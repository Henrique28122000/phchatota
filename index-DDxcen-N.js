(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const D of document.querySelectorAll('link[rel="modulepreload"]'))C(D);new MutationObserver(D=>{for(const O of D)if(O.type==="childList")for(const $ of O.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&C($)}).observe(document,{childList:!0,subtree:!0});function b(D){const O={};return D.integrity&&(O.integrity=D.integrity),D.referrerPolicy&&(O.referrerPolicy=D.referrerPolicy),D.crossOrigin==="use-credentials"?O.credentials="include":D.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function C(D){if(D.ep)return;D.ep=!0;const O=b(D);fetch(D.href,O)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var g=Symbol.for("react.transitional.element"),f=Symbol.for("react.fragment");function b(C,D,O){var $=null;if(O!==void 0&&($=""+O),D.key!==void 0&&($=""+D.key),"key"in D){O={};for(var _e in D)_e!=="key"&&(O[_e]=D[_e])}else O=D;return D=O.ref,{$$typeof:g,type:C,key:$,ref:D!==void 0?D:null,props:O}}return reactJsxRuntime_production.Fragment=f,reactJsxRuntime_production.jsx=b,reactJsxRuntime_production.jsxs=b,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var g=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),$=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),Fe=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),Re=Symbol.for("react.activity"),Z=Symbol.iterator;function I(k){return k===null||typeof k!="object"?null:(k=Z&&k[Z]||k["@@iterator"],typeof k=="function"?k:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pe=Object.assign,ke={};function ce(k,G,xe){this.props=k,this.context=G,this.refs=ke,this.updater=xe||P}ce.prototype.isReactComponent={},ce.prototype.setState=function(k,G){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,G,"setState")},ce.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Ne(){}Ne.prototype=ce.prototype;function tt(k,G,xe){this.props=k,this.context=G,this.refs=ke,this.updater=xe||P}var Qe=tt.prototype=new Ne;Qe.constructor=tt,Pe(Qe,ce.prototype),Qe.isPureReactComponent=!0;var ne=Array.isArray;function oe(){}var fe={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function re(k,G,xe){var Ae=xe.ref;return{$$typeof:g,type:k,key:G,ref:Ae!==void 0?Ae:null,props:xe}}function K(k,G){return re(k.type,G,k.props)}function M(k){return typeof k=="object"&&k!==null&&k.$$typeof===g}function F(k){var G={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(xe){return G[xe]})}var T=/\/+/g;function _(k,G){return typeof k=="object"&&k!==null&&k.key!=null?F(""+k.key):G.toString(36)}function E(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(oe,oe):(k.status="pending",k.then(function(G){k.status==="pending"&&(k.status="fulfilled",k.value=G)},function(G){k.status==="pending"&&(k.status="rejected",k.reason=G)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function w(k,G,xe,Ae,De){var Ie=typeof k;(Ie==="undefined"||Ie==="boolean")&&(k=null);var be=!1;if(k===null)be=!0;else switch(Ie){case"bigint":case"string":case"number":be=!0;break;case"object":switch(k.$$typeof){case g:case f:be=!0;break;case ot:return be=k._init,w(be(k._payload),G,xe,Ae,De)}}if(be)return De=De(k),be=Ae===""?"."+_(k,0):Ae,ne(De)?(xe="",be!=null&&(xe=be.replace(T,"$&/")+"/"),w(De,G,xe,"",function(pe){return pe})):De!=null&&(M(De)&&(De=K(De,xe+(De.key==null||k&&k.key===De.key?"":(""+De.key).replace(T,"$&/")+"/")+be)),G.push(De)),1;be=0;var qe=Ae===""?".":Ae+":";if(ne(k))for(var Ve=0;Ve<k.length;Ve++)Ae=k[Ve],Ie=qe+_(Ae,Ve),be+=w(Ae,G,xe,Ie,De);else if(Ve=I(k),typeof Ve=="function")for(k=Ve.call(k),Ve=0;!(Ae=k.next()).done;)Ae=Ae.value,Ie=qe+_(Ae,Ve++),be+=w(Ae,G,xe,Ie,De);else if(Ie==="object"){if(typeof k.then=="function")return w(E(k),G,xe,Ae,De);throw G=String(k),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return be}function R(k,G,xe){if(k==null)return k;var Ae=[],De=0;return w(k,Ae,"","",function(Ie){return G.call(xe,Ie,De++)}),Ae}function V(k){if(k._status===-1){var G=k._result;G=G(),G.then(function(xe){(k._status===0||k._status===-1)&&(k._status=1,k._result=xe)},function(xe){(k._status===0||k._status===-1)&&(k._status=2,k._result=xe)}),k._status===-1&&(k._status=0,k._result=G)}if(k._status===1)return k._result.default;throw k._result}var ae=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},q={map:R,forEach:function(k,G,xe){R(k,function(){G.apply(this,arguments)},xe)},count:function(k){var G=0;return R(k,function(){G++}),G},toArray:function(k){return R(k,function(G){return G})||[]},only:function(k){if(!M(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return react_production.Activity=Re,react_production.Children=q,react_production.Component=ce,react_production.Fragment=b,react_production.Profiler=D,react_production.PureComponent=tt,react_production.StrictMode=C,react_production.Suspense=ye,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(k){return fe.H.useMemoCache(k)}},react_production.cache=function(k){return function(){return k.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(k,G,xe){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Ae=Pe({},k.props),De=k.key;if(G!=null)for(Ie in G.key!==void 0&&(De=""+G.key),G)!Y.call(G,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&G.ref===void 0||(Ae[Ie]=G[Ie]);var Ie=arguments.length-2;if(Ie===1)Ae.children=xe;else if(1<Ie){for(var be=Array(Ie),qe=0;qe<Ie;qe++)be[qe]=arguments[qe+2];Ae.children=be}return re(k.type,De,Ae)},react_production.createContext=function(k){return k={$$typeof:$,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:O,_context:k},k},react_production.createElement=function(k,G,xe){var Ae,De={},Ie=null;if(G!=null)for(Ae in G.key!==void 0&&(Ie=""+G.key),G)Y.call(G,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(De[Ae]=G[Ae]);var be=arguments.length-2;if(be===1)De.children=xe;else if(1<be){for(var qe=Array(be),Ve=0;Ve<be;Ve++)qe[Ve]=arguments[Ve+2];De.children=qe}if(k&&k.defaultProps)for(Ae in be=k.defaultProps,be)De[Ae]===void 0&&(De[Ae]=be[Ae]);return re(k,Ie,De)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(k){return{$$typeof:_e,render:k}},react_production.isValidElement=M,react_production.lazy=function(k){return{$$typeof:ot,_payload:{_status:-1,_result:k},_init:V}},react_production.memo=function(k,G){return{$$typeof:Fe,type:k,compare:G===void 0?null:G}},react_production.startTransition=function(k){var G=fe.T,xe={};fe.T=xe;try{var Ae=k(),De=fe.S;De!==null&&De(xe,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(oe,ae)}catch(Ie){ae(Ie)}finally{G!==null&&xe.types!==null&&(G.types=xe.types),fe.T=G}},react_production.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},react_production.use=function(k){return fe.H.use(k)},react_production.useActionState=function(k,G,xe){return fe.H.useActionState(k,G,xe)},react_production.useCallback=function(k,G){return fe.H.useCallback(k,G)},react_production.useContext=function(k){return fe.H.useContext(k)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(k,G){return fe.H.useDeferredValue(k,G)},react_production.useEffect=function(k,G){return fe.H.useEffect(k,G)},react_production.useEffectEvent=function(k){return fe.H.useEffectEvent(k)},react_production.useId=function(){return fe.H.useId()},react_production.useImperativeHandle=function(k,G,xe){return fe.H.useImperativeHandle(k,G,xe)},react_production.useInsertionEffect=function(k,G){return fe.H.useInsertionEffect(k,G)},react_production.useLayoutEffect=function(k,G){return fe.H.useLayoutEffect(k,G)},react_production.useMemo=function(k,G){return fe.H.useMemo(k,G)},react_production.useOptimistic=function(k,G){return fe.H.useOptimistic(k,G)},react_production.useReducer=function(k,G,xe){return fe.H.useReducer(k,G,xe)},react_production.useRef=function(k){return fe.H.useRef(k)},react_production.useState=function(k){return fe.H.useState(k)},react_production.useSyncExternalStore=function(k,G,xe){return fe.H.useSyncExternalStore(k,G,xe)},react_production.useTransition=function(){return fe.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(g){function f(w,R){var V=w.length;w.push(R);e:for(;0<V;){var ae=V-1>>>1,q=w[ae];if(0<D(q,R))w[ae]=R,w[V]=q,V=ae;else break e}}function b(w){return w.length===0?null:w[0]}function C(w){if(w.length===0)return null;var R=w[0],V=w.pop();if(V!==R){w[0]=V;e:for(var ae=0,q=w.length,k=q>>>1;ae<k;){var G=2*(ae+1)-1,xe=w[G],Ae=G+1,De=w[Ae];if(0>D(xe,V))Ae<q&&0>D(De,xe)?(w[ae]=De,w[Ae]=V,ae=Ae):(w[ae]=xe,w[G]=V,ae=G);else if(Ae<q&&0>D(De,V))w[ae]=De,w[Ae]=V,ae=Ae;else break e}}return R}function D(w,R){var V=w.sortIndex-R.sortIndex;return V!==0?V:w.id-R.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var O=performance;g.unstable_now=function(){return O.now()}}else{var $=Date,_e=$.now();g.unstable_now=function(){return $.now()-_e}}var ye=[],Fe=[],ot=1,Re=null,Z=3,I=!1,P=!1,Pe=!1,ke=!1,ce=typeof setTimeout=="function"?setTimeout:null,Ne=typeof clearTimeout=="function"?clearTimeout:null,tt=typeof setImmediate<"u"?setImmediate:null;function Qe(w){for(var R=b(Fe);R!==null;){if(R.callback===null)C(Fe);else if(R.startTime<=w)C(Fe),R.sortIndex=R.expirationTime,f(ye,R);else break;R=b(Fe)}}function ne(w){if(Pe=!1,Qe(w),!P)if(b(ye)!==null)P=!0,oe||(oe=!0,F());else{var R=b(Fe);R!==null&&E(ne,R.startTime-w)}}var oe=!1,fe=-1,Y=5,re=-1;function K(){return ke?!0:!(g.unstable_now()-re<Y)}function M(){if(ke=!1,oe){var w=g.unstable_now();re=w;var R=!0;try{e:{P=!1,Pe&&(Pe=!1,Ne(fe),fe=-1),I=!0;var V=Z;try{t:{for(Qe(w),Re=b(ye);Re!==null&&!(Re.expirationTime>w&&K());){var ae=Re.callback;if(typeof ae=="function"){Re.callback=null,Z=Re.priorityLevel;var q=ae(Re.expirationTime<=w);if(w=g.unstable_now(),typeof q=="function"){Re.callback=q,Qe(w),R=!0;break t}Re===b(ye)&&C(ye),Qe(w)}else C(ye);Re=b(ye)}if(Re!==null)R=!0;else{var k=b(Fe);k!==null&&E(ne,k.startTime-w),R=!1}}break e}finally{Re=null,Z=V,I=!1}R=void 0}}finally{R?F():oe=!1}}}var F;if(typeof tt=="function")F=function(){tt(M)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,_=T.port2;T.port1.onmessage=M,F=function(){_.postMessage(null)}}else F=function(){ce(M,0)};function E(w,R){fe=ce(function(){w(g.unstable_now())},R)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(w){w.callback=null},g.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<w?Math.floor(1e3/w):5},g.unstable_getCurrentPriorityLevel=function(){return Z},g.unstable_next=function(w){switch(Z){case 1:case 2:case 3:var R=3;break;default:R=Z}var V=Z;Z=R;try{return w()}finally{Z=V}},g.unstable_requestPaint=function(){ke=!0},g.unstable_runWithPriority=function(w,R){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var V=Z;Z=w;try{return R()}finally{Z=V}},g.unstable_scheduleCallback=function(w,R,V){var ae=g.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ae+V:ae):V=ae,w){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=V+q,w={id:ot++,callback:R,priorityLevel:w,startTime:V,expirationTime:q,sortIndex:-1},V>ae?(w.sortIndex=V,f(Fe,w),b(ye)===null&&w===b(Fe)&&(Pe?(Ne(fe),fe=-1):Pe=!0,E(ne,V-ae))):(w.sortIndex=q,f(ye,w),P||I||(P=!0,oe||(oe=!0,F()))),w},g.unstable_shouldYield=K,g.unstable_wrapCallback=function(w){var R=Z;return function(){var V=Z;Z=R;try{return w.apply(this,arguments)}finally{Z=V}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var g=requireReact();function f(ye){var Fe="https://react.dev/errors/"+ye;if(1<arguments.length){Fe+="?args[]="+encodeURIComponent(arguments[1]);for(var ot=2;ot<arguments.length;ot++)Fe+="&args[]="+encodeURIComponent(arguments[ot])}return"Minified React error #"+ye+"; visit "+Fe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function b(){}var C={d:{f:b,r:function(){throw Error(f(522))},D:b,C:b,L:b,m:b,X:b,S:b,M:b},p:0,findDOMNode:null},D=Symbol.for("react.portal");function O(ye,Fe,ot){var Re=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:Re==null?null:""+Re,children:ye,containerInfo:Fe,implementation:ot}}var $=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _e(ye,Fe){if(ye==="font")return"";if(typeof Fe=="string")return Fe==="use-credentials"?Fe:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,reactDom_production.createPortal=function(ye,Fe){var ot=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fe||Fe.nodeType!==1&&Fe.nodeType!==9&&Fe.nodeType!==11)throw Error(f(299));return O(ye,Fe,null,ot)},reactDom_production.flushSync=function(ye){var Fe=$.T,ot=C.p;try{if($.T=null,C.p=2,ye)return ye()}finally{$.T=Fe,C.p=ot,C.d.f()}},reactDom_production.preconnect=function(ye,Fe){typeof ye=="string"&&(Fe?(Fe=Fe.crossOrigin,Fe=typeof Fe=="string"?Fe==="use-credentials"?Fe:"":void 0):Fe=null,C.d.C(ye,Fe))},reactDom_production.prefetchDNS=function(ye){typeof ye=="string"&&C.d.D(ye)},reactDom_production.preinit=function(ye,Fe){if(typeof ye=="string"&&Fe&&typeof Fe.as=="string"){var ot=Fe.as,Re=_e(ot,Fe.crossOrigin),Z=typeof Fe.integrity=="string"?Fe.integrity:void 0,I=typeof Fe.fetchPriority=="string"?Fe.fetchPriority:void 0;ot==="style"?C.d.S(ye,typeof Fe.precedence=="string"?Fe.precedence:void 0,{crossOrigin:Re,integrity:Z,fetchPriority:I}):ot==="script"&&C.d.X(ye,{crossOrigin:Re,integrity:Z,fetchPriority:I,nonce:typeof Fe.nonce=="string"?Fe.nonce:void 0})}},reactDom_production.preinitModule=function(ye,Fe){if(typeof ye=="string")if(typeof Fe=="object"&&Fe!==null){if(Fe.as==null||Fe.as==="script"){var ot=_e(Fe.as,Fe.crossOrigin);C.d.M(ye,{crossOrigin:ot,integrity:typeof Fe.integrity=="string"?Fe.integrity:void 0,nonce:typeof Fe.nonce=="string"?Fe.nonce:void 0})}}else Fe==null&&C.d.M(ye)},reactDom_production.preload=function(ye,Fe){if(typeof ye=="string"&&typeof Fe=="object"&&Fe!==null&&typeof Fe.as=="string"){var ot=Fe.as,Re=_e(ot,Fe.crossOrigin);C.d.L(ye,ot,{crossOrigin:Re,integrity:typeof Fe.integrity=="string"?Fe.integrity:void 0,nonce:typeof Fe.nonce=="string"?Fe.nonce:void 0,type:typeof Fe.type=="string"?Fe.type:void 0,fetchPriority:typeof Fe.fetchPriority=="string"?Fe.fetchPriority:void 0,referrerPolicy:typeof Fe.referrerPolicy=="string"?Fe.referrerPolicy:void 0,imageSrcSet:typeof Fe.imageSrcSet=="string"?Fe.imageSrcSet:void 0,imageSizes:typeof Fe.imageSizes=="string"?Fe.imageSizes:void 0,media:typeof Fe.media=="string"?Fe.media:void 0})}},reactDom_production.preloadModule=function(ye,Fe){if(typeof ye=="string")if(Fe){var ot=_e(Fe.as,Fe.crossOrigin);C.d.m(ye,{as:typeof Fe.as=="string"&&Fe.as!=="script"?Fe.as:void 0,crossOrigin:ot,integrity:typeof Fe.integrity=="string"?Fe.integrity:void 0})}else C.d.m(ye)},reactDom_production.requestFormReset=function(ye){C.d.r(ye)},reactDom_production.unstable_batchedUpdates=function(ye,Fe){return ye(Fe)},reactDom_production.useFormState=function(ye,Fe,ot){return $.H.useFormState(ye,Fe,ot)},reactDom_production.useFormStatus=function(){return $.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(f){console.error(f)}}return g(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var g=requireScheduler(),f=requireReact(),b=requireReactDom();function C(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function D(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function O(i){var c=i,h=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(h=c.return),i=c.return;while(i)}return c.tag===3?h:null}function $(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function _e(i){if(i.tag===31){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function ye(i){if(O(i)!==i)throw Error(C(188))}function Fe(i){var c=i.alternate;if(!c){if(c=O(i),c===null)throw Error(C(188));return c!==i?null:i}for(var h=i,y=c;;){var A=h.return;if(A===null)break;var z=A.alternate;if(z===null){if(y=A.return,y!==null){h=y;continue}break}if(A.child===z.child){for(z=A.child;z;){if(z===h)return ye(A),i;if(z===y)return ye(A),c;z=z.sibling}throw Error(C(188))}if(h.return!==y.return)h=A,y=z;else{for(var Me=!1,pt=A.child;pt;){if(pt===h){Me=!0,h=A,y=z;break}if(pt===y){Me=!0,y=A,h=z;break}pt=pt.sibling}if(!Me){for(pt=z.child;pt;){if(pt===h){Me=!0,h=z,y=A;break}if(pt===y){Me=!0,y=z,h=A;break}pt=pt.sibling}if(!Me)throw Error(C(189))}}if(h.alternate!==y)throw Error(C(190))}if(h.tag!==3)throw Error(C(188));return h.stateNode.current===h?i:c}function ot(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=ot(i),c!==null)return c;i=i.sibling}return null}var Re=Object.assign,Z=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),Pe=Symbol.for("react.fragment"),ke=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),Ne=Symbol.for("react.consumer"),tt=Symbol.for("react.context"),Qe=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var T=Symbol.for("react.client.reference");function _(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===T?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Pe:return"Fragment";case ce:return"Profiler";case ke:return"StrictMode";case ne:return"Suspense";case oe:return"SuspenseList";case re:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case P:return"Portal";case tt:return i.displayName||"Context";case Ne:return(i._context.displayName||"Context")+".Consumer";case Qe:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case fe:return c=i.displayName||null,c!==null?c:_(i.type)||"Memo";case Y:c=i._payload,i=i._init;try{return _(i(c))}catch{}}return null}var E=Array.isArray,w=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=b.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ae=[],q=-1;function k(i){return{current:i}}function G(i){0>q||(i.current=ae[q],ae[q]=null,q--)}function xe(i,c){q++,ae[q]=i.current,i.current=c}var Ae=k(null),De=k(null),Ie=k(null),be=k(null);function qe(i,c){switch(xe(Ie,c),xe(De,i),xe(Ae,null),c.nodeType){case 9:case 11:i=(i=c.documentElement)&&(i=i.namespaceURI)?Pu(i):0;break;default:if(i=c.tagName,c=c.namespaceURI)c=Pu(c),i=Cl(c,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(Ae),xe(Ae,i)}function Ve(){G(Ae),G(De),G(Ie)}function pe(i){i.memoizedState!==null&&xe(be,i);var c=Ae.current,h=Cl(c,i.type);c!==h&&(xe(De,i),xe(Ae,h))}function j(i){De.current===i&&(G(Ae),G(De)),be.current===i&&(G(be),fd._currentValue=V)}var B,nt;function he(i){if(B===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);B=c&&c[1]||"",nt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+B+i+nt}var it=!1;function wt(i,c){if(!i||it)return"";it=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var on=function(){throw Error()};if(Object.defineProperty(on.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(on,[])}catch(Xt){var Qt=Xt}Reflect.construct(i,[],on)}else{try{on.call()}catch(Xt){Qt=Xt}i.call(on.prototype)}}else{try{throw Error()}catch(Xt){Qt=Xt}(on=i())&&typeof on.catch=="function"&&on.catch(function(){})}}catch(Xt){if(Xt&&Qt&&typeof Xt.stack=="string")return[Xt.stack,Qt.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=y.DetermineComponentFrameRoot(),Me=z[0],pt=z[1];if(Me&&pt){var kt=Me.split(`
`),zt=pt.split(`
`);for(A=y=0;y<kt.length&&!kt[y].includes("DetermineComponentFrameRoot");)y++;for(;A<zt.length&&!zt[A].includes("DetermineComponentFrameRoot");)A++;if(y===kt.length||A===zt.length)for(y=kt.length-1,A=zt.length-1;1<=y&&0<=A&&kt[y]!==zt[A];)A--;for(;1<=y&&0<=A;y--,A--)if(kt[y]!==zt[A]){if(y!==1||A!==1)do if(y--,A--,0>A||kt[y]!==zt[A]){var tn=`
`+kt[y].replace(" at new "," at ");return i.displayName&&tn.includes("<anonymous>")&&(tn=tn.replace("<anonymous>",i.displayName)),tn}while(1<=y&&0<=A);break}}}finally{it=!1,Error.prepareStackTrace=h}return(h=i?i.displayName||i.name:"")?he(h):""}function Ee(i,c){switch(i.tag){case 26:case 27:case 5:return he(i.type);case 16:return he("Lazy");case 13:return i.child!==c&&c!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return wt(i.type,!1);case 11:return wt(i.type.render,!1);case 1:return wt(i.type,!0);case 31:return he("Activity");default:return""}}function Oe(i){try{var c="",h=null;do c+=Ee(i,h),h=i,i=i.return;while(i);return c}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var rt=Object.prototype.hasOwnProperty,me=g.unstable_scheduleCallback,Se=g.unstable_cancelCallback,ge=g.unstable_shouldYield,ve=g.unstable_requestPaint,ee=g.unstable_now,ze=g.unstable_getCurrentPriorityLevel,Je=g.unstable_ImmediatePriority,yt=g.unstable_UserBlockingPriority,xt=g.unstable_NormalPriority,Ye=g.unstable_LowPriority,J=g.unstable_IdlePriority,He=g.log,Le=g.unstable_setDisableYieldValue,Ue=null,_t=null;function st(i){if(typeof He=="function"&&Le(i),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Ue,i)}catch{}}var Dt=Math.clz32?Math.clz32:ut,qt=Math.log,Lt=Math.LN2;function ut(i){return i>>>=0,i===0?32:31-(qt(i)/Lt|0)|0}var Yt=256,wn=262144,Rn=4194304;function jn(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Mn(i,c,h){var y=i.pendingLanes;if(y===0)return 0;var A=0,z=i.suspendedLanes,Me=i.pingedLanes;i=i.warmLanes;var pt=y&134217727;return pt!==0?(y=pt&~z,y!==0?A=jn(y):(Me&=pt,Me!==0?A=jn(Me):h||(h=pt&~i,h!==0&&(A=jn(h))))):(pt=y&~z,pt!==0?A=jn(pt):Me!==0?A=jn(Me):h||(h=y&~i,h!==0&&(A=jn(h)))),A===0?0:c!==0&&c!==A&&(c&z)===0&&(z=A&-A,h=c&-c,z>=h||z===32&&(h&4194048)!==0)?c:A}function Pn(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function ci(i,c){switch(i){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nr(){var i=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),i}function nr(i){for(var c=[],h=0;31>h;h++)c.push(i);return c}function Nn(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function _r(i,c,h,y,A,z){var Me=i.pendingLanes;i.pendingLanes=h,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=h,i.entangledLanes&=h,i.errorRecoveryDisabledLanes&=h,i.shellSuspendCounter=0;var pt=i.entanglements,kt=i.expirationTimes,zt=i.hiddenUpdates;for(h=Me&~h;0<h;){var tn=31-Dt(h),on=1<<tn;pt[tn]=0,kt[tn]=-1;var Qt=zt[tn];if(Qt!==null)for(zt[tn]=null,tn=0;tn<Qt.length;tn++){var Xt=Qt[tn];Xt!==null&&(Xt.lane&=-536870913)}h&=~on}y!==0&&$n(i,y,0),z!==0&&A===0&&i.tag!==0&&(i.suspendedLanes|=z&~(Me&~c))}function $n(i,c,h){i.pendingLanes|=c,i.suspendedLanes&=~c;var y=31-Dt(c);i.entangledLanes|=c,i.entanglements[y]=i.entanglements[y]|1073741824|h&261930}function Dr(i,c){var h=i.entangledLanes|=c;for(i=i.entanglements;h;){var y=31-Dt(h),A=1<<y;A&c|i[y]&c&&(i[y]|=c),h&=~A}}function Gr(i,c){var h=c&-c;return h=(h&42)!==0?1:Or(h),(h&(i.suspendedLanes|c))!==0?0:h}function Or(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function mi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ar(){var i=R.p;return i!==0?i:(i=window.event,i===void 0?32:le(i.type))}function sr(i,c){var h=R.p;try{return R.p=i,c()}finally{R.p=h}}var kn=Math.random().toString(36).slice(2),Jn="__reactFiber$"+kn,Mr="__reactProps$"+kn,ar="__reactContainer$"+kn,oi="__reactEvents$"+kn,gi="__reactListeners$"+kn,go="__reactHandles$"+kn,xi="__reactResources$"+kn,ui="__reactMarker$"+kn;function no(i){delete i[Jn],delete i[Mr],delete i[oi],delete i[gi],delete i[go]}function Ui(i){var c=i[Jn];if(c)return c;for(var h=i.parentNode;h;){if(c=h[ar]||h[Jn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(i=Ec(i);i!==null;){if(h=i[Jn])return h;i=Ec(i)}return c}i=h,h=i.parentNode}return null}function vi(i){if(i=i[Jn]||i[ar]){var c=i.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return i}return null}function Br(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(C(33))}function ur(i){var c=i[xi];return c||(c=i[xi]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Qr(i){i[ui]=!0}var qr=new Set,Bi={};function Vn(i,c){mr(i,c),mr(i+"Capture",c)}function mr(i,c){for(Bi[i]=c,i=0;i<c.length;i++)qr.add(c[i])}var lr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ti={},Q={};function dt(i){return rt.call(Q,i)?!0:rt.call(ti,i)?!1:lr.test(i)?Q[i]=!0:(ti[i]=!0,!1)}function Be(i,c,h){if(dt(c))if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+h)}}function Te(i,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+h)}}function $e(i,c,h,y){if(y===null)i.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(h);return}i.setAttributeNS(c,h,""+y)}}function Ge(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function mt(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function vt(i,c,h){var y=Object.getOwnPropertyDescriptor(i.constructor.prototype,c);if(!i.hasOwnProperty(c)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var A=y.get,z=y.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return A.call(this)},set:function(Me){h=""+Me,z.call(this,Me)}}),Object.defineProperty(i,c,{enumerable:y.enumerable}),{getValue:function(){return h},setValue:function(Me){h=""+Me},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function St(i){if(!i._valueTracker){var c=mt(i)?"checked":"value";i._valueTracker=vt(i,c,""+i[c])}}function It(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return i&&(y=mt(i)?i.checked?"true":"false":i.value),i=y,i!==h?(c.setValue(i),!0):!1}function Nt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Gt=/[\n"\\]/g;function Ut(i){return i.replace(Gt,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Wt(i,c,h,y,A,z,Me,pt){i.name="",Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"?i.type=Me:i.removeAttribute("type"),c!=null?Me==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+Ge(c)):i.value!==""+Ge(c)&&(i.value=""+Ge(c)):Me!=="submit"&&Me!=="reset"||i.removeAttribute("value"),c!=null?en(i,Me,Ge(c)):h!=null?en(i,Me,Ge(h)):y!=null&&i.removeAttribute("value"),A==null&&z!=null&&(i.defaultChecked=!!z),A!=null&&(i.checked=A&&typeof A!="function"&&typeof A!="symbol"),pt!=null&&typeof pt!="function"&&typeof pt!="symbol"&&typeof pt!="boolean"?i.name=""+Ge(pt):i.removeAttribute("name")}function an(i,c,h,y,A,z,Me,pt){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(i.type=z),c!=null||h!=null){if(!(z!=="submit"&&z!=="reset"||c!=null)){St(i);return}h=h!=null?""+Ge(h):"",c=c!=null?""+Ge(c):h,pt||c===i.value||(i.value=c),i.defaultValue=c}y=y??A,y=typeof y!="function"&&typeof y!="symbol"&&!!y,i.checked=pt?i.checked:!!y,i.defaultChecked=!!y,Me!=null&&typeof Me!="function"&&typeof Me!="symbol"&&typeof Me!="boolean"&&(i.name=Me),St(i)}function en(i,c,h){c==="number"&&Nt(i.ownerDocument)===i||i.defaultValue===""+h||(i.defaultValue=""+h)}function Cn(i,c,h,y){if(i=i.options,c){c={};for(var A=0;A<h.length;A++)c["$"+h[A]]=!0;for(h=0;h<i.length;h++)A=c.hasOwnProperty("$"+i[h].value),i[h].selected!==A&&(i[h].selected=A),A&&y&&(i[h].defaultSelected=!0)}else{for(h=""+Ge(h),c=null,A=0;A<i.length;A++){if(i[A].value===h){i[A].selected=!0,y&&(i[A].defaultSelected=!0);return}c!==null||i[A].disabled||(c=i[A])}c!==null&&(c.selected=!0)}}function Un(i,c,h){if(c!=null&&(c=""+Ge(c),c!==i.value&&(i.value=c),h==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=h!=null?""+Ge(h):""}function On(i,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(C(92));if(E(y)){if(1<y.length)throw Error(C(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=Ge(c),i.defaultValue=h,y=i.textContent,y===h&&y!==""&&y!==null&&(i.value=y),St(i)}function Xn(i,c){if(c){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=c;return}}i.textContent=c}var Zn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sr(i,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":y?i.setProperty(c,h):typeof h!="number"||h===0||Zn.has(c)?c==="float"?i.cssFloat=h:i[c]=(""+h).trim():i[c]=h+"px"}function gr(i,c,h){if(c!=null&&typeof c!="object")throw Error(C(62));if(i=i.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?i.setProperty(y,""):y==="float"?i.cssFloat="":i[y]="");for(var A in c)y=c[A],c.hasOwnProperty(A)&&h[A]!==y&&Sr(i,A,y)}else for(var z in c)c.hasOwnProperty(z)&&Sr(i,z,c[z])}function ir(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ti=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _i(i){return eo.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Vr(){}var li=null;function di(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wr=null,Wn=null;function Ji(i){var c=vi(i);if(c&&(i=c.stateNode)){var h=i[Mr]||null;e:switch(i=c.stateNode,c.type){case"input":if(Wt(i,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Ut(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==i&&y.form===i.form){var A=y[Mr]||null;if(!A)throw Error(C(90));Wt(y,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===i.form&&It(y)}break e;case"textarea":Un(i,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Cn(i,!!h.multiple,c,!1)}}}var hi=!1;function Ii(i,c,h){if(hi)return i(c,h);hi=!0;try{var y=i(c);return y}finally{if(hi=!1,(Wr!==null||Wn!==null)&&(wl(),Wr&&(c=Wr,i=Wn,Wn=Wr=null,Ji(c),i)))for(c=0;c<i.length;c++)Ji(i[c])}}function ie(i,c){var h=i.stateNode;if(h===null)return null;var y=h[Mr]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(i=i.type,y=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!y;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(C(231,c,typeof h));return h}var L=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ue=!1;if(L)try{var je={};Object.defineProperty(je,"passive",{get:function(){ue=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{ue=!1}var Xe=null,ft=null,bt=null;function Rt(){if(bt)return bt;var i,c=ft,h=c.length,y,A="value"in Xe?Xe.value:Xe.textContent,z=A.length;for(i=0;i<h&&c[i]===A[i];i++);var Me=h-i;for(y=1;y<=Me&&c[h-y]===A[z-y];y++);return bt=A.slice(i,1<y?1-y:void 0)}function Pt(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Vt(){return!0}function $t(){return!1}function ln(i){function c(h,y,A,z,Me){this._reactName=h,this._targetInst=A,this.type=y,this.nativeEvent=z,this.target=Me,this.currentTarget=null;for(var pt in i)i.hasOwnProperty(pt)&&(h=i[pt],this[pt]=h?h(z):z[pt]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Vt:$t,this.isPropagationStopped=$t,this}return Re(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),c}var qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tn=ln(qn),Sn=Re({},qn,{view:0,detail:0}),_n=ln(Sn),Gn,cr,Ur,Hr=Re({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ur&&(Ur&&i.type==="mousemove"?(Gn=i.screenX-Ur.screenX,cr=i.screenY-Ur.screenY):cr=Gn=0,Ur=i),Gn)},movementY:function(i){return"movementY"in i?i.movementY:cr}}),Jr=ln(Hr),Er=Re({},Hr,{dataTransfer:0}),Kr=ln(Er),Go=Re({},Sn,{relatedTarget:0}),$o=ln(Go),Uu=Re({},qn,{animationName:0,elapsedTime:0,pseudoElement:0}),wc=ln(Uu),vh=Re({},qn,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qo=ln(vh),yh=Re({},qn,{data:0}),pd=ln(yh),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},md={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pl(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=gd[i])?!!c[i]:!1}function Bu(){return Pl}var $c=Re({},Sn,{key:function(i){if(i.key){var c=Xc[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Pt(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?md[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bu,charCode:function(i){return i.type==="keypress"?Pt(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Pt(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_a=ln($c),bh=Re({},Hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vd=ln(bh),Gs=Re({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bu}),Cc=ln(Gs),yd=Re({},qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_h=ln(yd),eu=Re({},Hr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),zu=ln(eu),ju=Re({},qn,{newState:0,oldState:0}),Qs=ln(ju),qu=[9,13,27,32],Rc=L&&"CompositionEvent"in window,fi=null;L&&"documentMode"in document&&(fi=document.documentMode);var Sh=L&&"TextEvent"in window&&!fi,bd=L&&(!Rc||fi&&8<fi&&11>=fi),Nl=" ",Ws=!1;function _d(i,c){switch(i){case"keyup":return qu.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sa(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ea=!1;function Sd(i,c){switch(i){case"compositionend":return Sa(c);case"keypress":return c.which!==32?null:(Ws=!0,Nl);case"textInput":return i=c.data,i===Nl&&Ws?null:i;default:return null}}function Ed(i,c){if(Ea)return i==="compositionend"||!Rc&&_d(i,c)?(i=Rt(),bt=ft=Xe=null,Ea=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return bd&&c.locale!=="ko"?null:c.data;default:return null}}var Td={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dl(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!Td[i.type]:c==="textarea"}function Vu(i,c,h,y){Wr?Wn?Wn.push(y):Wn=[y]:Wr=y,c=th(c,"onChange"),0<c.length&&(h=new Tn("onChange","change",null,h,y),i.push({event:h,listeners:c}))}var nc=null,xc=null;function Js(i){Wf(i,0)}function Hu(i){var c=Br(i);if(It(c))return i}function Fu(i,c){if(i==="change")return c}var wd=!1;if(L){var Ol;if(L){var rc="oninput"in document;if(!rc){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),rc=typeof Gu.oninput=="function"}Ol=rc}else Ol=!1;wd=Ol&&(!document.documentMode||9<document.documentMode)}function Qu(){nc&&(nc.detachEvent("onpropertychange",Cd),xc=nc=null)}function Cd(i){if(i.propertyName==="value"&&Hu(xc)){var c=[];Vu(c,xc,i,di(i)),Ii(Js,c)}}function Rd(i,c,h){i==="focusin"?(Qu(),nc=c,xc=h,nc.attachEvent("onpropertychange",Cd)):i==="focusout"&&Qu()}function Eh(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Hu(xc)}function Ic(i,c){if(i==="click")return Hu(c)}function Ft(i,c){if(i==="input"||i==="change")return Hu(c)}function Lr(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var Ao=typeof Object.is=="function"?Object.is:Lr;function tu(i,c){if(Ao(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var h=Object.keys(i),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var A=h[y];if(!rt.call(c,A)||!Ao(i[A],c[A]))return!1}return!0}function Po(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ic(i,c){var h=Po(i);i=0;for(var y;h;){if(h.nodeType===3){if(y=i+h.textContent.length,i<=c&&y>=c)return{node:h,offset:c-i};i=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Po(h)}}function nu(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?nu(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function Ps(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=Nt(i.document);c instanceof i.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)i=c.contentWindow;else break;c=Nt(i.document)}return c}function Ll(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}var Ml=L&&"documentMode"in document&&11>=document.documentMode,Ta=null,Wu=null,kc=null,Ul=!1;function Ju(i,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ul||Ta==null||Ta!==Nt(y)||(y=Ta,"selectionStart"in y&&Ll(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),kc&&tu(kc,y)||(kc=y,y=th(Wu,"onSelect"),0<y.length&&(c=new Tn("onSelect","select",null,c,h),i.push({event:c,listeners:y}),c.target=Ta)))}function zn(i,c){var h={};return h[i.toLowerCase()]=c.toLowerCase(),h["Webkit"+i]="webkit"+c,h["Moz"+i]="moz"+c,h}var So={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},wa={},Ca={};L&&(Ca=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function ps(i){if(wa[i])return wa[i];if(!So[i])return i;var c=So[i],h;for(h in c)if(c.hasOwnProperty(h)&&h in Ca)return wa[i]=c[h];return i}var Ku=ps("animationend"),ki=ps("animationiteration"),Yu=ps("animationstart"),Zu=ps("transitionrun"),vo=ps("transitionstart"),Ra=ps("transitioncancel"),Xu=ps("transitionend"),Bl=new Map,zl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zl.push("scrollEnd");function es(i,c){Bl.set(i,c),Vn(c,[i])}var or=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},No=[],Ac=0,$u=0;function oc(){for(var i=Ac,c=$u=Ac=0;c<i;){var h=No[c];No[c++]=null;var y=No[c];No[c++]=null;var A=No[c];No[c++]=null;var z=No[c];if(No[c++]=null,y!==null&&A!==null){var Me=y.pending;Me===null?A.next=A:(A.next=Me.next,Me.next=A),y.pending=A}z!==0&&ru(h,A,z)}}function sc(i,c,h,y){No[Ac++]=i,No[Ac++]=c,No[Ac++]=h,No[Ac++]=y,$u|=y,i.lanes|=y,i=i.alternate,i!==null&&(i.lanes|=y)}function el(i,c,h,y){return sc(i,c,h,y),Ai(i)}function Ks(i,c){return sc(i,null,null,c),Ai(i)}function ru(i,c,h){i.lanes|=h;var y=i.alternate;y!==null&&(y.lanes|=h);for(var A=!1,z=i.return;z!==null;)z.childLanes|=h,y=z.alternate,y!==null&&(y.childLanes|=h),z.tag===22&&(i=z.stateNode,i===null||i._visibility&1||(A=!0)),i=z,z=z.return;return i.tag===3?(z=i.stateNode,A&&c!==null&&(A=31-Dt(h),i=z.hiddenUpdates,y=i[A],y===null?i[A]=[c]:y.push(c),c.lane=h|536870912),z):null}function Ai(i){if(50<_s)throw _s=0,nf=null,Error(C(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var ac={};function ms(i,c,h,y){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Eo(i,c,h,y){return new ms(i,c,h,y)}function iu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ts(i,c){var h=i.alternate;return h===null?(h=Eo(i.tag,c,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=c,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&65011712,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,c=i.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h.refCleanup=i.refCleanup,h}function Ns(i,c){i.flags&=65011714;var h=i.alternate;return h===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=h.childLanes,i.lanes=h.lanes,i.child=h.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=h.memoizedProps,i.memoizedState=h.memoizedState,i.updateQueue=h.updateQueue,i.type=h.type,c=h.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function Ys(i,c,h,y,A,z){var Me=0;if(y=i,typeof i=="function")iu(i)&&(Me=1);else if(typeof i=="string")Me=Tp(i,h,Ae.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case re:return i=Eo(31,h,c,A),i.elementType=re,i.lanes=z,i;case Pe:return Do(h.children,A,z,c);case ke:Me=8,A|=24;break;case ce:return i=Eo(12,h,c,A|2),i.elementType=ce,i.lanes=z,i;case ne:return i=Eo(13,h,c,A),i.elementType=ne,i.lanes=z,i;case oe:return i=Eo(19,h,c,A),i.elementType=oe,i.lanes=z,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case tt:Me=10;break e;case Ne:Me=9;break e;case Qe:Me=11;break e;case fe:Me=14;break e;case Y:Me=16,y=null;break e}Me=29,h=Error(C(130,i===null?"null":typeof i,"")),y=null}return c=Eo(Me,h,c,A),c.elementType=i,c.type=y,c.lanes=z,c}function Do(i,c,h,y){return i=Eo(7,i,y,c),i.lanes=h,i}function xa(i,c,h){return i=Eo(6,i,null,c),i.lanes=h,i}function ao(i){var c=Eo(18,null,null,0);return c.stateNode=i,c}function Pc(i,c,h){return c=Eo(4,i.children!==null?i.children:[],i.key,c),c.lanes=h,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}var Zs=new WeakMap;function qo(i,c){if(typeof i=="object"&&i!==null){var h=Zs.get(i);return h!==void 0?h:(c={value:i,source:c,stack:Oe(c)},Zs.set(i,c),c)}return{value:i,source:c,stack:Oe(c)}}var cc=[],Ia=0,uc=null,Ds=0,zi=[],ns=0,rs=null,gs=1,yo="";function Xs(i,c){cc[Ia++]=Ds,cc[Ia++]=uc,uc=i,Ds=c}function jl(i,c,h){zi[ns++]=gs,zi[ns++]=yo,zi[ns++]=rs,rs=i;var y=gs;i=yo;var A=32-Dt(y)-1;y&=~(1<<A),h+=1;var z=32-Dt(c)+A;if(30<z){var Me=A-A%5;z=(y&(1<<Me)-1).toString(32),y>>=Me,A-=Me,gs=1<<32-Dt(c)+A|h<<A|y,yo=z+i}else gs=1<<z|h<<A|y,yo=i}function ql(i){i.return!==null&&(Xs(i,1),jl(i,1,0))}function $s(i){for(;i===uc;)uc=cc[--Ia],cc[Ia]=null,Ds=cc[--Ia],cc[Ia]=null;for(;i===rs;)rs=zi[--ns],zi[ns]=null,yo=zi[--ns],zi[ns]=null,gs=zi[--ns],zi[ns]=null}function tl(i,c){zi[ns++]=gs,zi[ns++]=yo,zi[ns++]=rs,gs=c.id,yo=c.overflow,rs=i}var bo=null,er=null,Ir=!1,Oo=null,yi=!1,lc=Error(C(519));function ro(i){var c=Error(C(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ka(qo(c,i)),lc}function ea(i){var c=i.stateNode,h=i.type,y=i.memoizedProps;switch(c[Jn]=i,c[Mr]=y,h){case"dialog":Yr("cancel",c),Yr("close",c);break;case"iframe":case"object":case"embed":Yr("load",c);break;case"video":case"audio":for(h=0;h<ku.length;h++)Yr(ku[h],c);break;case"source":Yr("error",c);break;case"img":case"image":case"link":Yr("error",c),Yr("load",c);break;case"details":Yr("toggle",c);break;case"input":Yr("invalid",c),an(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":Yr("invalid",c);break;case"textarea":Yr("invalid",c),On(c,y.value,y.defaultValue,y.children)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||ba(c.textContent,h)?(y.popover!=null&&(Yr("beforetoggle",c),Yr("toggle",c)),y.onScroll!=null&&Yr("scroll",c),y.onScrollEnd!=null&&Yr("scrollend",c),y.onClick!=null&&(c.onclick=Vr),c=!0):c=!1,c||ro(i,!0)}function nl(i){for(bo=i.return;bo;)switch(bo.tag){case 5:case 31:case 13:yi=!1;return;case 27:case 3:yi=!0;return;default:bo=bo.return}}function pi(i){if(i!==bo)return!1;if(!Ir)return nl(i),Ir=!0,!1;var c=i.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=i.type,h=!(h!=="form"&&h!=="button")||nh(i.type,i.memoizedProps)),h=!h),h&&er&&ro(i),nl(i),c===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));er=Xf(i)}else if(c===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));er=Xf(i)}else c===27?(c=er,Hs(i.type)?(i=hf,hf=null,er=i):er=c):er=bo?Ss(i.stateNode.nextSibling):null;return!0}function ri(){er=bo=null,Ir=!1}function rl(){var i=Oo;return i!==null&&(Fo===null?Fo=i:Fo.push.apply(Fo,i),Oo=null),i}function ka(i){Oo===null?Oo=[i]:Oo.push(i)}var ou=k(null),ta=null,na=null;function Os(i,c,h){xe(ou,c._currentValue),c._currentValue=h}function To(i){i._currentValue=ou.current,G(ou)}function su(i,c,h){for(;i!==null;){var y=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),i===h)break;i=i.return}}function au(i,c,h,y){var A=i.child;for(A!==null&&(A.return=i);A!==null;){var z=A.dependencies;if(z!==null){var Me=A.child;z=z.firstContext;e:for(;z!==null;){var pt=z;z=A;for(var kt=0;kt<c.length;kt++)if(pt.context===c[kt]){z.lanes|=h,pt=z.alternate,pt!==null&&(pt.lanes|=h),su(z.return,h,i),y||(Me=null);break e}z=pt.next}}else if(A.tag===18){if(Me=A.return,Me===null)throw Error(C(341));Me.lanes|=h,z=Me.alternate,z!==null&&(z.lanes|=h),su(Me,h,i),Me=null}else Me=A.child;if(Me!==null)Me.return=A;else for(Me=A;Me!==null;){if(Me===i){Me=null;break}if(A=Me.sibling,A!==null){A.return=Me.return,Me=A;break}Me=Me.return}A=Me}}function Aa(i,c,h,y){i=null;for(var A=c,z=!1;A!==null;){if(!z){if((A.flags&524288)!==0)z=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var Me=A.alternate;if(Me===null)throw Error(C(387));if(Me=Me.memoizedProps,Me!==null){var pt=A.type;Ao(A.pendingProps.value,Me.value)||(i!==null?i.push(pt):i=[pt])}}else if(A===be.current){if(Me=A.alternate,Me===null)throw Error(C(387));Me.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(i!==null?i.push(fd):i=[fd])}A=A.return}i!==null&&au(c,i,h,y),c.flags|=262144}function ra(i){for(i=i.firstContext;i!==null;){if(!Ao(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Pa(i){ta=i,na=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function co(i){return Nc(ta,i)}function Na(i,c){return ta===null&&Pa(i),Nc(i,c)}function Nc(i,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},na===null){if(i===null)throw Error(C(308));na=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else na=na.next=c;return h}var Th=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(h,y){i.push(y)}};this.abort=function(){c.aborted=!0,i.forEach(function(h){return h()})}},il=g.unstable_scheduleCallback,wh=g.unstable_NormalPriority,io={$$typeof:tt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dc(){return{controller:new Th,data:new Map,refCount:0}}function vr(i){i.refCount--,i.refCount===0&&il(wh,function(){i.controller.abort()})}var ia=null,Vl=0,Da=0,Oa=null;function oo(i,c){if(ia===null){var h=ia=[];Vl=0,Da=va(),Oa={status:"pending",value:void 0,then:function(y){h.push(y)}}}return Vl++,c.then(Ki,Ki),c}function Ki(){if(--Vl===0&&ia!==null){Oa!==null&&(Oa.status="fulfilled");var i=ia;ia=null,Da=0,Oa=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function wo(i,c){var h=[],y={status:"pending",value:null,reason:null,then:function(A){h.push(A)}};return i.then(function(){y.status="fulfilled",y.value=c;for(var A=0;A<h.length;A++)(0,h[A])(c)},function(A){for(y.status="rejected",y.reason=A,A=0;A<h.length;A++)(0,h[A])(void 0)}),y}var Hl=w.S;w.S=function(i,c){ef=ee(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&oo(i,c),Hl!==null&&Hl(i,c)};var lo=k(null);function Dc(){var i=lo.current;return i!==null?i:Rr.pooledCache}function Pi(i,c){c===null?xe(lo,lo.current):xe(lo,c.pool)}function Oc(){var i=Dc();return i===null?null:{parent:io._currentValue,pool:i}}var Ls=Error(C(460)),La=Error(C(474)),ol=Error(C(542)),Yn={then:function(){}};function m(i){return i=i.status,i==="fulfilled"||i==="rejected"}function N(i,c,h){switch(h=i[h],h===void 0?i.push(c):h!==c&&(c.then(Vr,Vr),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,de(i),i;default:if(typeof c.status=="string")c.then(Vr,Vr);else{if(i=Rr,i!==null&&100<i.shellSuspendCounter)throw Error(C(482));i=c,i.status="pending",i.then(function(y){if(c.status==="pending"){var A=c;A.status="fulfilled",A.value=y}},function(y){if(c.status==="pending"){var A=c;A.status="rejected",A.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,de(i),i}throw W=c,Ls}}function S(i){try{var c=i._init;return c(i._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(W=h,Ls):h}}var W=null;function H(){if(W===null)throw Error(C(459));var i=W;return W=null,i}function de(i){if(i===Ls||i===ol)throw Error(C(483))}var lt=null,at=0;function Tt(i){var c=at;return at+=1,lt===null&&(lt=[]),N(lt,i,c)}function ct(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function we(i,c){throw c.$$typeof===Z?Error(C(525)):(i=Object.prototype.toString.call(c),Error(C(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function Jt(i){function c(jt,Mt){if(i){var Ct=jt.deletions;Ct===null?(jt.deletions=[Mt],jt.flags|=16):Ct.push(Mt)}}function h(jt,Mt){if(!i)return null;for(;Mt!==null;)c(jt,Mt),Mt=Mt.sibling;return null}function y(jt){for(var Mt=new Map;jt!==null;)jt.key!==null?Mt.set(jt.key,jt):Mt.set(jt.index,jt),jt=jt.sibling;return Mt}function A(jt,Mt){return jt=ts(jt,Mt),jt.index=0,jt.sibling=null,jt}function z(jt,Mt,Ct){return jt.index=Ct,i?(Ct=jt.alternate,Ct!==null?(Ct=Ct.index,Ct<Mt?(jt.flags|=67108866,Mt):Ct):(jt.flags|=67108866,Mt)):(jt.flags|=1048576,Mt)}function Me(jt){return i&&jt.alternate===null&&(jt.flags|=67108866),jt}function pt(jt,Mt,Ct,sn){return Mt===null||Mt.tag!==6?(Mt=xa(Ct,jt.mode,sn),Mt.return=jt,Mt):(Mt=A(Mt,Ct),Mt.return=jt,Mt)}function kt(jt,Mt,Ct,sn){var Kn=Ct.type;return Kn===Pe?tn(jt,Mt,Ct.props.children,sn,Ct.key):Mt!==null&&(Mt.elementType===Kn||typeof Kn=="object"&&Kn!==null&&Kn.$$typeof===Y&&S(Kn)===Mt.type)?(Mt=A(Mt,Ct.props),ct(Mt,Ct),Mt.return=jt,Mt):(Mt=Ys(Ct.type,Ct.key,Ct.props,null,jt.mode,sn),ct(Mt,Ct),Mt.return=jt,Mt)}function zt(jt,Mt,Ct,sn){return Mt===null||Mt.tag!==4||Mt.stateNode.containerInfo!==Ct.containerInfo||Mt.stateNode.implementation!==Ct.implementation?(Mt=Pc(Ct,jt.mode,sn),Mt.return=jt,Mt):(Mt=A(Mt,Ct.children||[]),Mt.return=jt,Mt)}function tn(jt,Mt,Ct,sn,Kn){return Mt===null||Mt.tag!==7?(Mt=Do(Ct,jt.mode,sn,Kn),Mt.return=jt,Mt):(Mt=A(Mt,Ct),Mt.return=jt,Mt)}function on(jt,Mt,Ct){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return Mt=xa(""+Mt,jt.mode,Ct),Mt.return=jt,Mt;if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case I:return Ct=Ys(Mt.type,Mt.key,Mt.props,null,jt.mode,Ct),ct(Ct,Mt),Ct.return=jt,Ct;case P:return Mt=Pc(Mt,jt.mode,Ct),Mt.return=jt,Mt;case Y:return Mt=S(Mt),on(jt,Mt,Ct)}if(E(Mt)||F(Mt))return Mt=Do(Mt,jt.mode,Ct,null),Mt.return=jt,Mt;if(typeof Mt.then=="function")return on(jt,Tt(Mt),Ct);if(Mt.$$typeof===tt)return on(jt,Na(jt,Mt),Ct);we(jt,Mt)}return null}function Qt(jt,Mt,Ct,sn){var Kn=Mt!==null?Mt.key:null;if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return Kn!==null?null:pt(jt,Mt,""+Ct,sn);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case I:return Ct.key===Kn?kt(jt,Mt,Ct,sn):null;case P:return Ct.key===Kn?zt(jt,Mt,Ct,sn):null;case Y:return Ct=S(Ct),Qt(jt,Mt,Ct,sn)}if(E(Ct)||F(Ct))return Kn!==null?null:tn(jt,Mt,Ct,sn,null);if(typeof Ct.then=="function")return Qt(jt,Mt,Tt(Ct),sn);if(Ct.$$typeof===tt)return Qt(jt,Mt,Na(jt,Ct),sn);we(jt,Ct)}return null}function Xt(jt,Mt,Ct,sn,Kn){if(typeof sn=="string"&&sn!==""||typeof sn=="number"||typeof sn=="bigint")return jt=jt.get(Ct)||null,pt(Mt,jt,""+sn,Kn);if(typeof sn=="object"&&sn!==null){switch(sn.$$typeof){case I:return jt=jt.get(sn.key===null?Ct:sn.key)||null,kt(Mt,jt,sn,Kn);case P:return jt=jt.get(sn.key===null?Ct:sn.key)||null,zt(Mt,jt,sn,Kn);case Y:return sn=S(sn),Xt(jt,Mt,Ct,sn,Kn)}if(E(sn)||F(sn))return jt=jt.get(Ct)||null,tn(Mt,jt,sn,Kn,null);if(typeof sn.then=="function")return Xt(jt,Mt,Ct,Tt(sn),Kn);if(sn.$$typeof===tt)return Xt(jt,Mt,Ct,Na(Mt,sn),Kn);we(Mt,sn)}return null}function Ln(jt,Mt,Ct,sn){for(var Kn=null,Pr=null,Fn=Mt,pr=Mt=0,zr=null;Fn!==null&&pr<Ct.length;pr++){Fn.index>pr?(zr=Fn,Fn=null):zr=Fn.sibling;var Fr=Qt(jt,Fn,Ct[pr],sn);if(Fr===null){Fn===null&&(Fn=zr);break}i&&Fn&&Fr.alternate===null&&c(jt,Fn),Mt=z(Fr,Mt,pr),Pr===null?Kn=Fr:Pr.sibling=Fr,Pr=Fr,Fn=zr}if(pr===Ct.length)return h(jt,Fn),Ir&&Xs(jt,pr),Kn;if(Fn===null){for(;pr<Ct.length;pr++)Fn=on(jt,Ct[pr],sn),Fn!==null&&(Mt=z(Fn,Mt,pr),Pr===null?Kn=Fn:Pr.sibling=Fn,Pr=Fn);return Ir&&Xs(jt,pr),Kn}for(Fn=y(Fn);pr<Ct.length;pr++)zr=Xt(Fn,jt,pr,Ct[pr],sn),zr!==null&&(i&&zr.alternate!==null&&Fn.delete(zr.key===null?pr:zr.key),Mt=z(zr,Mt,pr),Pr===null?Kn=zr:Pr.sibling=zr,Pr=zr);return i&&Fn.forEach(function(Es){return c(jt,Es)}),Ir&&Xs(jt,pr),Kn}function tr(jt,Mt,Ct,sn){if(Ct==null)throw Error(C(151));for(var Kn=null,Pr=null,Fn=Mt,pr=Mt=0,zr=null,Fr=Ct.next();Fn!==null&&!Fr.done;pr++,Fr=Ct.next()){Fn.index>pr?(zr=Fn,Fn=null):zr=Fn.sibling;var Es=Qt(jt,Fn,Fr.value,sn);if(Es===null){Fn===null&&(Fn=zr);break}i&&Fn&&Es.alternate===null&&c(jt,Fn),Mt=z(Es,Mt,pr),Pr===null?Kn=Es:Pr.sibling=Es,Pr=Es,Fn=zr}if(Fr.done)return h(jt,Fn),Ir&&Xs(jt,pr),Kn;if(Fn===null){for(;!Fr.done;pr++,Fr=Ct.next())Fr=on(jt,Fr.value,sn),Fr!==null&&(Mt=z(Fr,Mt,pr),Pr===null?Kn=Fr:Pr.sibling=Fr,Pr=Fr);return Ir&&Xs(jt,pr),Kn}for(Fn=y(Fn);!Fr.done;pr++,Fr=Ct.next())Fr=Xt(Fn,jt,pr,Fr.value,sn),Fr!==null&&(i&&Fr.alternate!==null&&Fn.delete(Fr.key===null?pr:Fr.key),Mt=z(Fr,Mt,pr),Pr===null?Kn=Fr:Pr.sibling=Fr,Pr=Fr);return i&&Fn.forEach(function(Mu){return c(jt,Mu)}),Ir&&Xs(jt,pr),Kn}function br(jt,Mt,Ct,sn){if(typeof Ct=="object"&&Ct!==null&&Ct.type===Pe&&Ct.key===null&&(Ct=Ct.props.children),typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case I:e:{for(var Kn=Ct.key;Mt!==null;){if(Mt.key===Kn){if(Kn=Ct.type,Kn===Pe){if(Mt.tag===7){h(jt,Mt.sibling),sn=A(Mt,Ct.props.children),sn.return=jt,jt=sn;break e}}else if(Mt.elementType===Kn||typeof Kn=="object"&&Kn!==null&&Kn.$$typeof===Y&&S(Kn)===Mt.type){h(jt,Mt.sibling),sn=A(Mt,Ct.props),ct(sn,Ct),sn.return=jt,jt=sn;break e}h(jt,Mt);break}else c(jt,Mt);Mt=Mt.sibling}Ct.type===Pe?(sn=Do(Ct.props.children,jt.mode,sn,Ct.key),sn.return=jt,jt=sn):(sn=Ys(Ct.type,Ct.key,Ct.props,null,jt.mode,sn),ct(sn,Ct),sn.return=jt,jt=sn)}return Me(jt);case P:e:{for(Kn=Ct.key;Mt!==null;){if(Mt.key===Kn)if(Mt.tag===4&&Mt.stateNode.containerInfo===Ct.containerInfo&&Mt.stateNode.implementation===Ct.implementation){h(jt,Mt.sibling),sn=A(Mt,Ct.children||[]),sn.return=jt,jt=sn;break e}else{h(jt,Mt);break}else c(jt,Mt);Mt=Mt.sibling}sn=Pc(Ct,jt.mode,sn),sn.return=jt,jt=sn}return Me(jt);case Y:return Ct=S(Ct),br(jt,Mt,Ct,sn)}if(E(Ct))return Ln(jt,Mt,Ct,sn);if(F(Ct)){if(Kn=F(Ct),typeof Kn!="function")throw Error(C(150));return Ct=Kn.call(Ct),tr(jt,Mt,Ct,sn)}if(typeof Ct.then=="function")return br(jt,Mt,Tt(Ct),sn);if(Ct.$$typeof===tt)return br(jt,Mt,Na(jt,Ct),sn);we(jt,Ct)}return typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint"?(Ct=""+Ct,Mt!==null&&Mt.tag===6?(h(jt,Mt.sibling),sn=A(Mt,Ct),sn.return=jt,jt=sn):(h(jt,Mt),sn=xa(Ct,jt.mode,sn),sn.return=jt,jt=sn),Me(jt)):h(jt,Mt)}return function(jt,Mt,Ct,sn){try{at=0;var Kn=br(jt,Mt,Ct,sn);return lt=null,Kn}catch(Fn){if(Fn===Ls||Fn===ol)throw Fn;var Pr=Eo(29,Fn,null,jt.mode);return Pr.lanes=sn,Pr.return=jt,Pr}finally{}}}var En=Jt(!0),rn=Jt(!1),In=!1;function fn(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dn(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function xn(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function An(i,c,h){var y=i.updateQueue;if(y===null)return null;if(y=y.shared,(Cr&2)!==0){var A=y.pending;return A===null?c.next=c:(c.next=A.next,A.next=c),y.pending=c,c=Ai(i),ru(i,null,h),c}return sc(i,y,c,h),Ai(i)}function Hn(i,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,Dr(i,h)}}function dr(i,c){var h=i.updateQueue,y=i.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var A=null,z=null;if(h=h.firstBaseUpdate,h!==null){do{var Me={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};z===null?A=z=Me:z=z.next=Me,h=h.next}while(h!==null);z===null?A=z=c:z=z.next=c}else A=z=c;h={baseState:y.baseState,firstBaseUpdate:A,lastBaseUpdate:z,shared:y.shared,callbacks:y.callbacks},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=c:i.next=c,h.lastBaseUpdate=c}var Zr=!1;function yr(){if(Zr){var i=Oa;if(i!==null)throw i}}function rr(i,c,h,y){Zr=!1;var A=i.updateQueue;In=!1;var z=A.firstBaseUpdate,Me=A.lastBaseUpdate,pt=A.shared.pending;if(pt!==null){A.shared.pending=null;var kt=pt,zt=kt.next;kt.next=null,Me===null?z=zt:Me.next=zt,Me=kt;var tn=i.alternate;tn!==null&&(tn=tn.updateQueue,pt=tn.lastBaseUpdate,pt!==Me&&(pt===null?tn.firstBaseUpdate=zt:pt.next=zt,tn.lastBaseUpdate=kt))}if(z!==null){var on=A.baseState;Me=0,tn=zt=kt=null,pt=z;do{var Qt=pt.lane&-536870913,Xt=Qt!==pt.lane;if(Xt?(Qn&Qt)===Qt:(y&Qt)===Qt){Qt!==0&&Qt===Da&&(Zr=!0),tn!==null&&(tn=tn.next={lane:0,tag:pt.tag,payload:pt.payload,callback:null,next:null});e:{var Ln=i,tr=pt;Qt=c;var br=h;switch(tr.tag){case 1:if(Ln=tr.payload,typeof Ln=="function"){on=Ln.call(br,on,Qt);break e}on=Ln;break e;case 3:Ln.flags=Ln.flags&-65537|128;case 0:if(Ln=tr.payload,Qt=typeof Ln=="function"?Ln.call(br,on,Qt):Ln,Qt==null)break e;on=Re({},on,Qt);break e;case 2:In=!0}}Qt=pt.callback,Qt!==null&&(i.flags|=64,Xt&&(i.flags|=8192),Xt=A.callbacks,Xt===null?A.callbacks=[Qt]:Xt.push(Qt))}else Xt={lane:Qt,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null},tn===null?(zt=tn=Xt,kt=on):tn=tn.next=Xt,Me|=Qt;if(pt=pt.next,pt===null){if(pt=A.shared.pending,pt===null)break;Xt=pt,pt=Xt.next,Xt.next=null,A.lastBaseUpdate=Xt,A.shared.pending=null}}while(!0);tn===null&&(kt=on),A.baseState=kt,A.firstBaseUpdate=zt,A.lastBaseUpdate=tn,z===null&&(A.shared.lanes=0),Qc|=Me,i.lanes=Me,i.memoizedState=on}}function si(i,c){if(typeof i!="function")throw Error(C(191,i));i.call(c)}function ii(i,c){var h=i.callbacks;if(h!==null)for(i.callbacks=null,i=0;i<h.length;i++)si(h[i],c)}var ei=k(null),to=k(0);function ji(i,c){i=Ga,xe(to,i),xe(ei,c),Ga=i|c.baseLanes}function Ts(){xe(to,Ga),xe(ei,ei.current)}function ho(){Ga=to.current,G(ei),G(to)}var qi=k(null),uo=null;function Wo(i){var c=i.alternate;xe(Ni,Ni.current&1),xe(qi,i),uo===null&&(c===null||ei.current!==null||c.memoizedState!==null)&&(uo=i)}function Si(i){xe(Ni,Ni.current),xe(qi,i),uo===null&&(uo=i)}function ws(i){i.tag===22?(xe(Ni,Ni.current),xe(qi,i),uo===null&&(uo=i)):Vi()}function Vi(){xe(Ni,Ni.current),xe(qi,qi.current)}function fo(i){G(qi),uo===i&&(uo=null),G(Ni)}var Ni=k(0);function Lo(i){for(var c=i;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||tc(h)||Du(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var _o=0,fr=null,hr=null,Yi=null,Tr=!1,Ma=!1,wi=!1,Xr=0,xr=0,Di=null,Ei=0;function $r(){throw Error(C(321))}function wr(i,c){if(c===null)return!1;for(var h=0;h<c.length&&h<i.length;h++)if(!Ao(i[h],c[h]))return!1;return!0}function Zi(i,c,h,y,A,z){return _o=z,fr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,w.H=i===null||i.memoizedState===null?Kl:Dd,wi=!1,z=h(y,A),wi=!1,Ma&&(z=Cs(c,h,y,A)),bi(i),z}function bi(i){w.H=zc;var c=hr!==null&&hr.next!==null;if(_o=0,Yi=hr=fr=null,Tr=!1,xr=0,Di=null,c)throw Error(C(300));i===null||po||(i=i.dependencies,i!==null&&ra(i)&&(po=!0))}function Cs(i,c,h,y){fr=i;var A=0;do{if(Ma&&(Di=null),xr=0,Ma=!1,25<=A)throw Error(C(301));if(A+=1,Yi=hr=null,i.updateQueue!=null){var z=i.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}w.H=Ph,z=c(h,y)}while(Ma);return z}function pf(){var i=w.H,c=i.useState()[0];return c=typeof c.then=="function"?al(c):c,i=i.useState()[0],(hr!==null?hr.memoizedState:null)!==i&&(fr.flags|=1024),c}function sl(){var i=Xr!==0;return Xr=0,i}function Rs(i,c,h){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~h}function Ua(i){if(Tr){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}Tr=!1}_o=0,Yi=hr=fr=null,Ma=!1,xr=Xr=0,Di=null}function Jo(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yi===null?fr.memoizedState=Yi=i:Yi=Yi.next=i,Yi}function Xi(){if(hr===null){var i=fr.alternate;i=i!==null?i.memoizedState:null}else i=hr.next;var c=Yi===null?fr.memoizedState:Yi.next;if(c!==null)Yi=c,hr=i;else{if(i===null)throw fr.alternate===null?Error(C(467)):Error(C(310));hr=i,i={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},Yi===null?fr.memoizedState=Yi=i:Yi=Yi.next=i}return Yi}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(i){var c=xr;return xr+=1,Di===null&&(Di=[]),i=N(Di,i,c),c=fr,(Yi===null?c.memoizedState:Yi.next)===null&&(c=c.alternate,w.H=c===null||c.memoizedState===null?Kl:Dd),i}function uu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return al(i);if(i.$$typeof===tt)return co(i)}throw Error(C(438,String(i)))}function Fl(i){var c=null,h=fr.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=fr.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(A){return A.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=cu(),fr.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(i),y=0;y<i;y++)h[y]=K;return c.index++,h}function Ba(i,c){return typeof c=="function"?c(i):c}function lu(i){var c=Xi();return Lc(c,hr,i)}function Lc(i,c,h){var y=i.queue;if(y===null)throw Error(C(311));y.lastRenderedReducer=h;var A=i.baseQueue,z=y.pending;if(z!==null){if(A!==null){var Me=A.next;A.next=z.next,z.next=Me}c.baseQueue=A=z,y.pending=null}if(z=i.baseState,A===null)i.memoizedState=z;else{c=A.next;var pt=Me=null,kt=null,zt=c,tn=!1;do{var on=zt.lane&-536870913;if(on!==zt.lane?(Qn&on)===on:(_o&on)===on){var Qt=zt.revertLane;if(Qt===0)kt!==null&&(kt=kt.next={lane:0,revertLane:0,gesture:null,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null}),on===Da&&(tn=!0);else if((_o&Qt)===Qt){zt=zt.next,Qt===Da&&(tn=!0);continue}else on={lane:0,revertLane:zt.revertLane,gesture:null,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},kt===null?(pt=kt=on,Me=z):kt=kt.next=on,fr.lanes|=Qt,Qc|=Qt;on=zt.action,wi&&h(z,on),z=zt.hasEagerState?zt.eagerState:h(z,on)}else Qt={lane:on,revertLane:zt.revertLane,gesture:zt.gesture,action:zt.action,hasEagerState:zt.hasEagerState,eagerState:zt.eagerState,next:null},kt===null?(pt=kt=Qt,Me=z):kt=kt.next=Qt,fr.lanes|=on,Qc|=on;zt=zt.next}while(zt!==null&&zt!==c);if(kt===null?Me=z:kt.next=pt,!Ao(z,i.memoizedState)&&(po=!0,tn&&(h=Oa,h!==null)))throw h;i.memoizedState=z,i.baseState=Me,i.baseQueue=kt,y.lastRenderedState=z}return A===null&&(y.lanes=0),[i.memoizedState,y.dispatch]}function Mc(i){var c=Xi(),h=c.queue;if(h===null)throw Error(C(311));h.lastRenderedReducer=i;var y=h.dispatch,A=h.pending,z=c.memoizedState;if(A!==null){h.pending=null;var Me=A=A.next;do z=i(z,Me.action),Me=Me.next;while(Me!==A);Ao(z,c.memoizedState)||(po=!0),c.memoizedState=z,c.baseQueue===null&&(c.baseState=z),h.lastRenderedState=z}return[z,y]}function du(i,c,h){var y=fr,A=Xi(),z=Ir;if(z){if(h===void 0)throw Error(C(407));h=h()}else h=c();var Me=!Ao((hr||A).memoizedState,h);if(Me&&(A.memoizedState=h,po=!0),A=A.queue,Ad(xd.bind(null,y,A,i),[i]),A.getSnapshot!==c||Me||Yi!==null&&Yi.memoizedState.tag&1){if(y.flags|=2048,fu(9,{destroy:void 0},mf.bind(null,y,A,h,c),null),Rr===null)throw Error(C(349));z||(_o&127)!==0||Ce(y,c,h)}return h}function Ce(i,c,h){i.flags|=16384,i={getSnapshot:c,value:h},c=fr.updateQueue,c===null?(c=cu(),fr.updateQueue=c,c.stores=[i]):(h=c.stores,h===null?c.stores=[i]:h.push(i))}function mf(i,c,h,y){c.value=h,c.getSnapshot=y,hc(c)&&cl(i)}function xd(i,c,h){return h(function(){hc(c)&&cl(i)})}function hc(i){var c=i.getSnapshot;i=i.value;try{var h=c();return!Ao(i,h)}catch{return!0}}function cl(i){var c=Ks(i,2);c!==null&&Qi(c,i,2)}function hu(i){var c=Jo();if(typeof i=="function"){var h=i;if(i=h(),wi){st(!0);try{h()}finally{st(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:i},c}function gf(i,c,h,y){return i.baseState=h,Lc(i,hr,typeof y=="function"?y:Ba)}function ul(i,c,h,y,A){if(gc(i))throw Error(C(485));if(i=c.action,i!==null){var z={payload:A,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Me){z.listeners.push(Me)}};w.T!==null?h(!0):z.isTransition=!1,y(z),h=c.pending,h===null?(z.next=c.pending=z,Gl(c,z)):(z.next=h.next,c.pending=h.next=z)}}function Gl(i,c){var h=c.action,y=c.payload,A=i.state;if(c.isTransition){var z=w.T,Me={};w.T=Me;try{var pt=h(A,y),kt=w.S;kt!==null&&kt(Me,pt),Ch(i,c,pt)}catch(zt){Ql(i,c,zt)}finally{z!==null&&Me.types!==null&&(z.types=Me.types),w.T=z}}else try{z=h(A,y),Ch(i,c,z)}catch(zt){Ql(i,c,zt)}}function Ch(i,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){vf(i,c,y)},function(y){return Ql(i,c,y)}):vf(i,c,h)}function vf(i,c,h){c.status="fulfilled",c.value=h,Oi(c),i.state=h,c=i.pending,c!==null&&(h=c.next,h===c?i.pending=null:(h=h.next,c.next=h,Gl(i,h)))}function Ql(i,c,h){var y=i.pending;if(i.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,Oi(c),c=c.next;while(c!==y)}i.action=null}function Oi(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function za(i,c){return c}function yf(i,c){if(Ir){var h=Rr.formState;if(h!==null){e:{var y=fr;if(Ir){if(er){t:{for(var A=er,z=yi;A.nodeType!==8;){if(!z){A=null;break t}if(A=Ss(A.nextSibling),A===null){A=null;break t}}z=A.data,A=z==="F!"||z==="F"?A:null}if(A){er=Ss(A.nextSibling),y=A.data==="F!";break e}}ro(y)}y=!1}y&&(c=h[0])}}return h=Jo(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:za,lastRenderedState:c},h.queue=y,h=Rf.bind(null,fr,y),y.dispatch=h,y=hu(!1),z=Jl.bind(null,fr,!1,y.queue),y=Jo(),A={state:c,dispatch:null,action:i,pending:null},y.queue=A,h=ul.bind(null,fr,A,z,h),A.dispatch=h,y.memoizedState=i,[c,h,!1]}function ja(i){var c=Xi();return fc(c,hr,i)}function fc(i,c,h){if(c=Lc(i,c,za)[0],i=lu(Ba)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=al(c)}catch(Me){throw Me===Ls?ol:Me}else y=c;c=Xi();var A=c.queue,z=A.dispatch;return h!==c.memoizedState&&(fr.flags|=2048,fu(9,{destroy:void 0},Uc.bind(null,A,h),null)),[y,z,i]}function Uc(i,c){i.action=c}function Rh(i){var c=Xi(),h=hr;if(h!==null)return fc(c,h,i);Xi(),c=c.memoizedState,h=Xi();var y=h.queue.dispatch;return h.memoizedState=i,[c,y,!1]}function fu(i,c,h,y){return i={tag:i,create:h,deps:y,inst:c,next:null},c=fr.updateQueue,c===null&&(c=cu(),fr.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=i.next=i:(y=h.next,h.next=i,i.next=y,c.lastEffect=i),i}function Id(){return Xi().memoizedState}function ll(i,c,h,y){var A=Jo();fr.flags|=i,A.memoizedState=fu(1|c,{destroy:void 0},h,y===void 0?null:y)}function kd(i,c,h,y){var A=Xi();y=y===void 0?null:y;var z=A.memoizedState.inst;hr!==null&&y!==null&&wr(y,hr.memoizedState.deps)?A.memoizedState=fu(c,z,h,y):(fr.flags|=i,A.memoizedState=fu(1|c,z,h,y))}function xh(i,c){ll(8390656,8,i,c)}function Ad(i,c){kd(2048,8,i,c)}function ap(i){fr.flags|=4;var c=fr.updateQueue;if(c===null)c=cu(),fr.updateQueue=c,c.events=[i];else{var h=c.events;h===null?c.events=[i]:h.push(i)}}function bf(i){var c=Xi().memoizedState;return ap({ref:c,nextImpl:i}),function(){if((Cr&2)!==0)throw Error(C(440));return c.impl.apply(void 0,arguments)}}function _f(i,c){return kd(4,2,i,c)}function Sf(i,c){return kd(4,4,i,c)}function Ih(i,c){if(typeof c=="function"){i=i();var h=c(i);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function pc(i,c,h){h=h!=null?h.concat([i]):null,kd(4,4,Ih.bind(null,c,i),h)}function qa(){}function Ef(i,c){var h=Xi();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&wr(c,y[1])?y[0]:(h.memoizedState=[i,c],i)}function Tf(i,c){var h=Xi();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&wr(c,y[1]))return y[0];if(y=i(),wi){st(!0);try{i()}finally{st(!1)}}return h.memoizedState=[y,c],y}function dl(i,c,h){return h===void 0||(_o&1073741824)!==0&&(Qn&261930)===0?i.memoizedState=c:(i.memoizedState=h,i=Df(),fr.lanes|=i,Qc|=i,h)}function Wl(i,c,h,y){return Ao(h,c)?h:ei.current!==null?(i=dl(i,h,y),Ao(i,c)||(po=!0),i):(_o&42)===0||(_o&1073741824)!==0&&(Qn&261930)===0?(po=!0,i.memoizedState=h):(i=Df(),fr.lanes|=i,Qc|=i,c)}function Pd(i,c,h,y,A){var z=R.p;R.p=z!==0&&8>z?z:8;var Me=w.T,pt={};w.T=pt,Jl(i,!1,c,h);try{var kt=A(),zt=w.S;if(zt!==null&&zt(pt,kt),kt!==null&&typeof kt=="object"&&typeof kt.then=="function"){var tn=wo(kt,y);fl(i,c,tn,Is(i))}else fl(i,c,y,Is(i))}catch(on){fl(i,c,{then:function(){},status:"rejected",reason:on},Is())}finally{R.p=z,Me!==null&&pt.types!==null&&(Me.types=pt.types),w.T=Me}}function cp(){}function mc(i,c,h,y){if(i.tag!==5)throw Error(C(476));var A=Bc(i).queue;Pd(i,A,c,V,h===null?cp:function(){return wf(i),h(y)})}function Bc(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:V},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:h},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function wf(i){var c=Bc(i);c.next===null&&(c=i.alternate.memoizedState),fl(i,c.next.queue,{},Is())}function kh(){return co(fd)}function Cf(){return Xi().memoizedState}function Nd(){return Xi().memoizedState}function Ah(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var h=Is();i=xn(h);var y=An(c,i,h);y!==null&&(Qi(y,c,h),Hn(y,c,h)),c={cache:dc()},i.payload=c;return}c=c.return}}function hl(i,c,h){var y=Is();h={lane:y,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},gc(i)?pu(c,h):(h=el(i,c,h,y),h!==null&&(Qi(h,i,y),mu(h,c,y)))}function Rf(i,c,h){var y=Is();fl(i,c,h,y)}function fl(i,c,h,y){var A={lane:y,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(gc(i))pu(c,A);else{var z=i.alternate;if(i.lanes===0&&(z===null||z.lanes===0)&&(z=c.lastRenderedReducer,z!==null))try{var Me=c.lastRenderedState,pt=z(Me,h);if(A.hasEagerState=!0,A.eagerState=pt,Ao(pt,Me))return sc(i,c,A,0),Rr===null&&oc(),!1}catch{}finally{}if(h=el(i,c,A,y),h!==null)return Qi(h,i,y),mu(h,c,y),!0}return!1}function Jl(i,c,h,y){if(y={lane:2,revertLane:va(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},gc(i)){if(c)throw Error(C(479))}else c=el(i,h,y,2),c!==null&&Qi(c,i,2)}function gc(i){var c=i.alternate;return i===fr||c!==null&&c===fr}function pu(i,c){Ma=Tr=!0;var h=i.pending;h===null?c.next=c:(c.next=h.next,h.next=c),i.pending=c}function mu(i,c,h){if((h&4194048)!==0){var y=c.lanes;y&=i.pendingLanes,h|=y,c.lanes=h,Dr(i,h)}}var zc={readContext:co,use:uu,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useLayoutEffect:$r,useInsertionEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useSyncExternalStore:$r,useId:$r,useHostTransitionStatus:$r,useFormState:$r,useActionState:$r,useOptimistic:$r,useMemoCache:$r,useCacheRefresh:$r};zc.useEffectEvent=$r;var Kl={readContext:co,use:uu,useCallback:function(i,c){return Jo().memoizedState=[i,c===void 0?null:c],i},useContext:co,useEffect:xh,useImperativeHandle:function(i,c,h){h=h!=null?h.concat([i]):null,ll(4194308,4,Ih.bind(null,c,i),h)},useLayoutEffect:function(i,c){return ll(4194308,4,i,c)},useInsertionEffect:function(i,c){ll(4,2,i,c)},useMemo:function(i,c){var h=Jo();c=c===void 0?null:c;var y=i();if(wi){st(!0);try{i()}finally{st(!1)}}return h.memoizedState=[y,c],y},useReducer:function(i,c,h){var y=Jo();if(h!==void 0){var A=h(c);if(wi){st(!0);try{h(c)}finally{st(!1)}}}else A=c;return y.memoizedState=y.baseState=A,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:A},y.queue=i,i=i.dispatch=hl.bind(null,fr,i),[y.memoizedState,i]},useRef:function(i){var c=Jo();return i={current:i},c.memoizedState=i},useState:function(i){i=hu(i);var c=i.queue,h=Rf.bind(null,fr,c);return c.dispatch=h,[i.memoizedState,h]},useDebugValue:qa,useDeferredValue:function(i,c){var h=Jo();return dl(h,i,c)},useTransition:function(){var i=hu(!1);return i=Pd.bind(null,fr,i.queue,!0,!1),Jo().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,h){var y=fr,A=Jo();if(Ir){if(h===void 0)throw Error(C(407));h=h()}else{if(h=c(),Rr===null)throw Error(C(349));(Qn&127)!==0||Ce(y,c,h)}A.memoizedState=h;var z={value:h,getSnapshot:c};return A.queue=z,xh(xd.bind(null,y,z,i),[i]),y.flags|=2048,fu(9,{destroy:void 0},mf.bind(null,y,z,h,c),null),h},useId:function(){var i=Jo(),c=Rr.identifierPrefix;if(Ir){var h=yo,y=gs;h=(y&~(1<<32-Dt(y)-1)).toString(32)+h,c="_"+c+"R_"+h,h=Xr++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=Ei++,c="_"+c+"r_"+h.toString(32)+"_";return i.memoizedState=c},useHostTransitionStatus:kh,useFormState:yf,useActionState:yf,useOptimistic:function(i){var c=Jo();c.memoizedState=c.baseState=i;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Jl.bind(null,fr,!0,h),h.dispatch=c,[i,c]},useMemoCache:Fl,useCacheRefresh:function(){return Jo().memoizedState=Ah.bind(null,fr)},useEffectEvent:function(i){var c=Jo(),h={impl:i};return c.memoizedState=h,function(){if((Cr&2)!==0)throw Error(C(440));return h.impl.apply(void 0,arguments)}}},Dd={readContext:co,use:uu,useCallback:Ef,useContext:co,useEffect:Ad,useImperativeHandle:pc,useInsertionEffect:_f,useLayoutEffect:Sf,useMemo:Tf,useReducer:lu,useRef:Id,useState:function(){return lu(Ba)},useDebugValue:qa,useDeferredValue:function(i,c){var h=Xi();return Wl(h,hr.memoizedState,i,c)},useTransition:function(){var i=lu(Ba)[0],c=Xi().memoizedState;return[typeof i=="boolean"?i:al(i),c]},useSyncExternalStore:du,useId:Cf,useHostTransitionStatus:kh,useFormState:ja,useActionState:ja,useOptimistic:function(i,c){var h=Xi();return gf(h,hr,i,c)},useMemoCache:Fl,useCacheRefresh:Nd};Dd.useEffectEvent=bf;var Ph={readContext:co,use:uu,useCallback:Ef,useContext:co,useEffect:Ad,useImperativeHandle:pc,useInsertionEffect:_f,useLayoutEffect:Sf,useMemo:Tf,useReducer:Mc,useRef:Id,useState:function(){return Mc(Ba)},useDebugValue:qa,useDeferredValue:function(i,c){var h=Xi();return hr===null?dl(h,i,c):Wl(h,hr.memoizedState,i,c)},useTransition:function(){var i=Mc(Ba)[0],c=Xi().memoizedState;return[typeof i=="boolean"?i:al(i),c]},useSyncExternalStore:du,useId:Cf,useHostTransitionStatus:kh,useFormState:Rh,useActionState:Rh,useOptimistic:function(i,c){var h=Xi();return hr!==null?gf(h,hr,i,c):(h.baseState=i,[i,h.queue.dispatch])},useMemoCache:Fl,useCacheRefresh:Nd};Ph.useEffectEvent=bf;function Od(i,c,h,y){c=i.memoizedState,h=h(y,c),h=h==null?c:Re({},c,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Ld={enqueueSetState:function(i,c,h){i=i._reactInternals;var y=Is(),A=xn(y);A.payload=c,h!=null&&(A.callback=h),c=An(i,A,y),c!==null&&(Qi(c,i,y),Hn(c,i,y))},enqueueReplaceState:function(i,c,h){i=i._reactInternals;var y=Is(),A=xn(y);A.tag=1,A.payload=c,h!=null&&(A.callback=h),c=An(i,A,y),c!==null&&(Qi(c,i,y),Hn(c,i,y))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var h=Is(),y=xn(h);y.tag=2,c!=null&&(y.callback=c),c=An(i,y,h),c!==null&&(Qi(c,i,h),Hn(c,i,h))}};function Nh(i,c,h,y,A,z,Me){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(y,z,Me):c.prototype&&c.prototype.isPureReactComponent?!tu(h,y)||!tu(A,z):!0}function Dh(i,c,h,y){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==i&&Ld.enqueueReplaceState(c,c.state,null)}function jc(i,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(i=i.defaultProps){h===c&&(h=Re({},h));for(var A in i)h[A]===void 0&&(h[A]=i[A])}return h}function Oh(i){or(i)}function xf(i){console.error(i)}function Mo(i){or(i)}function Ms(i,c){try{var h=i.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function Va(i,c,h){try{var y=i.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Md(i,c,h){return h=xn(h),h.tag=3,h.payload={element:null},h.callback=function(){Ms(i,c)},h}function Ud(i){return i=xn(i),i.tag=3,i}function qc(i,c,h,y){var A=h.type.getDerivedStateFromError;if(typeof A=="function"){var z=y.value;i.payload=function(){return A(z)},i.callback=function(){Va(c,h,y)}}var Me=h.stateNode;Me!==null&&typeof Me.componentDidCatch=="function"&&(i.callback=function(){Va(c,h,y),typeof A!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var pt=y.stack;this.componentDidCatch(y.value,{componentStack:pt!==null?pt:""})})}function If(i,c,h,y,A){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&Aa(c,h,A,!0),h=qi.current,h!==null){switch(h.tag){case 31:case 13:return uo===null?Jd():h.alternate===null&&Fi===0&&(Fi=3),h.flags&=-257,h.flags|=65536,h.lanes=A,y===Yn?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),sf(i,y,A)),!1;case 22:return h.flags|=65536,y===Yn?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),sf(i,y,A)),!1}throw Error(C(435,h.tag))}return sf(i,y,A),Jd(),!1}if(Ir)return c=qi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=A,y!==lc&&(i=Error(C(422),{cause:y}),ka(qo(i,h)))):(y!==lc&&(c=Error(C(423),{cause:y}),ka(qo(c,h))),i=i.current.alternate,i.flags|=65536,A&=-A,i.lanes|=A,y=qo(y,h),A=Md(i.stateNode,y,A),dr(i,A),Fi!==4&&(Fi=2)),!1;var z=Error(C(520),{cause:y});if(z=qo(z,h),El===null?El=[z]:El.push(z),Fi!==4&&(Fi=2),c===null)return!0;y=qo(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,i=A&-A,h.lanes|=i,i=Md(h.stateNode,y,i),dr(h,i),!1;case 1:if(c=h.type,z=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(xo===null||!xo.has(z))))return h.flags|=65536,A&=-A,h.lanes|=A,A=Ud(A),qc(A,i,h,y),dr(h,A),!1}h=h.return}while(h!==null);return!1}var Bd=Error(C(461)),po=!1;function Uo(i,c,h,y){c.child=i===null?rn(c,null,h,y):En(c,i.child,h,y)}function Lh(i,c,h,y,A){h=h.render;var z=c.ref;if("ref"in y){var Me={};for(var pt in y)pt!=="ref"&&(Me[pt]=y[pt])}else Me=y;return Pa(c),y=Zi(i,c,h,Me,z,A),pt=sl(),i!==null&&!po?(Rs(i,c,A),Us(i,c,A)):(Ir&&pt&&ql(c),c.flags|=1,Uo(i,c,y,A),c.child)}function Mh(i,c,h,y,A){if(i===null){var z=h.type;return typeof z=="function"&&!iu(z)&&z.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=z,Uh(i,c,z,y,A)):(i=Ys(h.type,null,y,c,c.mode,A),i.ref=c.ref,i.return=c,c.child=i)}if(z=i.child,!jd(i,A)){var Me=z.memoizedProps;if(h=h.compare,h=h!==null?h:tu,h(Me,y)&&i.ref===c.ref)return Us(i,c,A)}return c.flags|=1,i=ts(z,y),i.ref=c.ref,i.return=c,c.child=i}function Uh(i,c,h,y,A){if(i!==null){var z=i.memoizedProps;if(tu(z,y)&&i.ref===c.ref)if(po=!1,c.pendingProps=y=z,jd(i,A))(i.flags&131072)!==0&&(po=!0);else return c.lanes=i.lanes,Us(i,c,A)}return Ho(i,c,h,y,A)}function xs(i,c,h,y){var A=y.children,z=i!==null?i.memoizedState:null;if(i===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((c.flags&128)!==0){if(z=z!==null?z.baseLanes|h:h,i!==null){for(y=c.child=i.child,A=0;y!==null;)A=A|y.lanes|y.childLanes,y=y.sibling;y=A&~z}else y=0,c.child=null;return Vo(i,c,z,h,y)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&Pi(c,z!==null?z.cachePool:null),z!==null?ji(c,z):Ts(),ws(c);else return y=c.lanes=536870912,Vo(i,c,z!==null?z.baseLanes|h:h,h,y)}else z!==null?(Pi(c,z.cachePool),ji(c,z),Vi(),c.memoizedState=null):(i!==null&&Pi(c,null),Ts(),Vi());return Uo(i,c,A,h),c.child}function oa(i,c){return i!==null&&i.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Vo(i,c,h,y,A){var z=Dc();return z=z===null?null:{parent:io._currentValue,pool:z},c.memoizedState={baseLanes:h,cachePool:z},i!==null&&Pi(c,null),Ts(),ws(c),i!==null&&Aa(i,c,y,!0),c.childLanes=A,null}function zd(i,c){return c=$i({mode:c.mode,children:c.children},i.mode),c.ref=i.ref,i.child=c,c.return=i,c}function Bh(i,c,h){return En(c,i.child,null,h),i=zd(c,c.pendingProps),i.flags|=2,fo(c),c.memoizedState=null,i}function Dn(i,c,h){var y=c.pendingProps,A=(c.flags&128)!==0;if(c.flags&=-129,i===null){if(Ir){if(y.mode==="hidden")return i=zd(c,y),c.lanes=536870912,oa(null,i);if(Si(c),(i=er)?(i=Rl(i,yi),i=i!==null&&i.data==="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:rs!==null?{id:gs,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},h=ao(i),h.return=c,c.child=h,bo=c,er=null)):i=null,i===null)throw ro(c);return c.lanes=536870912,null}return zd(c,y)}var z=i.memoizedState;if(z!==null){var Me=z.dehydrated;if(Si(c),A)if(c.flags&256)c.flags&=-257,c=Bh(i,c,h);else if(c.memoizedState!==null)c.child=i.child,c.flags|=128,c=null;else throw Error(C(558));else if(po||Aa(i,c,h,!1),A=(h&i.childLanes)!==0,po||A){if(y=Rr,y!==null&&(Me=Gr(y,h),Me!==0&&Me!==z.retryLane))throw z.retryLane=Me,Ks(i,Me),Qi(y,i,Me),Bd;Jd(),c=Bh(i,c,h)}else i=z.treeContext,er=Ss(Me.nextSibling),bo=c,Ir=!0,Oo=null,yi=!1,i!==null&&tl(c,i),c=zd(c,y),c.flags|=4096;return c}return i=ts(i.child,{mode:y.mode,children:y.children}),i.ref=c.ref,c.child=i,i.return=c,i}function Bo(i,c){var h=c.ref;if(h===null)i!==null&&i.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(C(284));(i===null||i.ref!==h)&&(c.flags|=4194816)}}function Ho(i,c,h,y,A){return Pa(c),h=Zi(i,c,h,y,void 0,A),y=sl(),i!==null&&!po?(Rs(i,c,A),Us(i,c,A)):(Ir&&y&&ql(c),c.flags|=1,Uo(i,c,h,A),c.child)}function Yl(i,c,h,y,A,z){return Pa(c),c.updateQueue=null,h=Cs(c,y,h,A),bi(i),y=sl(),i!==null&&!po?(Rs(i,c,z),Us(i,c,z)):(Ir&&y&&ql(c),c.flags|=1,Uo(i,c,h,z),c.child)}function kf(i,c,h,y,A){if(Pa(c),c.stateNode===null){var z=ac,Me=h.contextType;typeof Me=="object"&&Me!==null&&(z=co(Me)),z=new h(y,z),c.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=Ld,c.stateNode=z,z._reactInternals=c,z=c.stateNode,z.props=y,z.state=c.memoizedState,z.refs={},fn(c),Me=h.contextType,z.context=typeof Me=="object"&&Me!==null?co(Me):ac,z.state=c.memoizedState,Me=h.getDerivedStateFromProps,typeof Me=="function"&&(Od(c,h,Me,y),z.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(Me=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),Me!==z.state&&Ld.enqueueReplaceState(z,z.state,null),rr(c,y,z,A),yr(),z.state=c.memoizedState),typeof z.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(i===null){z=c.stateNode;var pt=c.memoizedProps,kt=jc(h,pt);z.props=kt;var zt=z.context,tn=h.contextType;Me=ac,typeof tn=="object"&&tn!==null&&(Me=co(tn));var on=h.getDerivedStateFromProps;tn=typeof on=="function"||typeof z.getSnapshotBeforeUpdate=="function",pt=c.pendingProps!==pt,tn||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(pt||zt!==Me)&&Dh(c,z,y,Me),In=!1;var Qt=c.memoizedState;z.state=Qt,rr(c,y,z,A),yr(),zt=c.memoizedState,pt||Qt!==zt||In?(typeof on=="function"&&(Od(c,h,on,y),zt=c.memoizedState),(kt=In||Nh(c,h,kt,y,Qt,zt,Me))?(tn||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(c.flags|=4194308)):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=zt),z.props=y,z.state=zt,z.context=Me,y=kt):(typeof z.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{z=c.stateNode,dn(i,c),Me=c.memoizedProps,tn=jc(h,Me),z.props=tn,on=c.pendingProps,Qt=z.context,zt=h.contextType,kt=ac,typeof zt=="object"&&zt!==null&&(kt=co(zt)),pt=h.getDerivedStateFromProps,(zt=typeof pt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Me!==on||Qt!==kt)&&Dh(c,z,y,kt),In=!1,Qt=c.memoizedState,z.state=Qt,rr(c,y,z,A),yr();var Xt=c.memoizedState;Me!==on||Qt!==Xt||In||i!==null&&i.dependencies!==null&&ra(i.dependencies)?(typeof pt=="function"&&(Od(c,h,pt,y),Xt=c.memoizedState),(tn=In||Nh(c,h,tn,y,Qt,Xt,kt)||i!==null&&i.dependencies!==null&&ra(i.dependencies))?(zt||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(y,Xt,kt),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(y,Xt,kt)),typeof z.componentDidUpdate=="function"&&(c.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof z.componentDidUpdate!="function"||Me===i.memoizedProps&&Qt===i.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Me===i.memoizedProps&&Qt===i.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=Xt),z.props=y,z.state=Xt,z.context=kt,y=tn):(typeof z.componentDidUpdate!="function"||Me===i.memoizedProps&&Qt===i.memoizedState||(c.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Me===i.memoizedProps&&Qt===i.memoizedState||(c.flags|=1024),y=!1)}return z=y,Bo(i,c),y=(c.flags&128)!==0,z||y?(z=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:z.render(),c.flags|=1,i!==null&&y?(c.child=En(c,i.child,null,A),c.child=En(c,null,h,A)):Uo(i,c,h,A),c.memoizedState=z.state,i=c.child):i=Us(i,c,A),i}function Vc(i,c,h,y){return ri(),c.flags|=256,Uo(i,c,h,y),c.child}var zh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vs(i){return{baseLanes:i,cachePool:Oc()}}function vc(i,c,h){return i=i!==null?i.childLanes&~h:0,c&&(i|=bs),i}function Hc(i,c,h){var y=c.pendingProps,A=!1,z=(c.flags&128)!==0,Me;if((Me=z)||(Me=i!==null&&i.memoizedState===null?!1:(Ni.current&2)!==0),Me&&(A=!0,c.flags&=-129),Me=(c.flags&32)!==0,c.flags&=-33,i===null){if(Ir){if(A?Wo(c):Vi(),(i=er)?(i=Rl(i,yi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:rs!==null?{id:gs,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},h=ao(i),h.return=c,c.child=h,bo=c,er=null)):i=null,i===null)throw ro(c);return Du(i)?c.lanes=32:c.lanes=536870912,null}var pt=y.children;return y=y.fallback,A?(Vi(),A=c.mode,pt=$i({mode:"hidden",children:pt},A),y=Do(y,A,h,null),pt.return=c,y.return=c,pt.sibling=y,c.child=pt,y=c.child,y.memoizedState=vs(h),y.childLanes=vc(i,Me,h),c.memoizedState=zh,oa(null,y)):(Wo(c),jh(c,pt))}var kt=i.memoizedState;if(kt!==null&&(pt=kt.dehydrated,pt!==null)){if(z)c.flags&256?(Wo(c),c.flags&=-257,c=is(i,c,h)):c.memoizedState!==null?(Vi(),c.child=i.child,c.flags|=128,c=null):(Vi(),pt=y.fallback,A=c.mode,y=$i({mode:"visible",children:y.children},A),pt=Do(pt,A,h,null),pt.flags|=2,y.return=c,pt.return=c,y.sibling=pt,c.child=y,En(c,i.child,null,h),y=c.child,y.memoizedState=vs(h),y.childLanes=vc(i,Me,h),c.memoizedState=zh,c=oa(null,y));else if(Wo(c),Du(pt)){if(Me=pt.nextSibling&&pt.nextSibling.dataset,Me)var zt=Me.dgst;Me=zt,y=Error(C(419)),y.stack="",y.digest=Me,ka({value:y,source:null,stack:null}),c=is(i,c,h)}else if(po||Aa(i,c,h,!1),Me=(h&i.childLanes)!==0,po||Me){if(Me=Rr,Me!==null&&(y=Gr(Me,h),y!==0&&y!==kt.retryLane))throw kt.retryLane=y,Ks(i,y),Qi(Me,i,y),Bd;tc(pt)||Jd(),c=is(i,c,h)}else tc(pt)?(c.flags|=192,c.child=i.child,c=null):(i=kt.treeContext,er=Ss(pt.nextSibling),bo=c,Ir=!0,Oo=null,yi=!1,i!==null&&tl(c,i),c=jh(c,y.children),c.flags|=4096);return c}return A?(Vi(),pt=y.fallback,A=c.mode,kt=i.child,zt=kt.sibling,y=ts(kt,{mode:"hidden",children:y.children}),y.subtreeFlags=kt.subtreeFlags&65011712,zt!==null?pt=ts(zt,pt):(pt=Do(pt,A,h,null),pt.flags|=2),pt.return=c,y.return=c,y.sibling=pt,c.child=y,oa(null,y),y=c.child,pt=i.child.memoizedState,pt===null?pt=vs(h):(A=pt.cachePool,A!==null?(kt=io._currentValue,A=A.parent!==kt?{parent:kt,pool:kt}:A):A=Oc(),pt={baseLanes:pt.baseLanes|h,cachePool:A}),y.memoizedState=pt,y.childLanes=vc(i,Me,h),c.memoizedState=zh,oa(i.child,y)):(Wo(c),h=i.child,i=h.sibling,h=ts(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,i!==null&&(Me=c.deletions,Me===null?(c.deletions=[i],c.flags|=16):Me.push(i)),c.child=h,c.memoizedState=null,h)}function jh(i,c){return c=$i({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function $i(i,c){return i=Eo(22,i,null,c),i.lanes=0,i}function is(i,c,h){return En(c,i.child,null,h),i=jh(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function ys(i,c,h){i.lanes|=c;var y=i.alternate;y!==null&&(y.lanes|=c),su(i.return,c,h)}function Zl(i,c,h,y,A,z){var Me=i.memoizedState;Me===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:A,treeForkCount:z}:(Me.isBackwards=c,Me.rendering=null,Me.renderingStartTime=0,Me.last=y,Me.tail=h,Me.tailMode=A,Me.treeForkCount=z)}function gu(i,c,h){var y=c.pendingProps,A=y.revealOrder,z=y.tail;y=y.children;var Me=Ni.current,pt=(Me&2)!==0;if(pt?(Me=Me&1|2,c.flags|=128):Me&=1,xe(Ni,Me),Uo(i,c,y,h),y=Ir?Ds:0,!pt&&i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ys(i,h,c);else if(i.tag===19)ys(i,h,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(A){case"forwards":for(h=c.child,A=null;h!==null;)i=h.alternate,i!==null&&Lo(i)===null&&(A=h),h=h.sibling;h=A,h===null?(A=c.child,c.child=null):(A=h.sibling,h.sibling=null),Zl(c,!1,A,h,z,y);break;case"backwards":case"unstable_legacy-backwards":for(h=null,A=c.child,c.child=null;A!==null;){if(i=A.alternate,i!==null&&Lo(i)===null){c.child=A;break}i=A.sibling,A.sibling=h,h=A,A=i}Zl(c,!0,h,null,z,y);break;case"together":Zl(c,!1,null,null,void 0,y);break;default:c.memoizedState=null}return c.child}function Us(i,c,h){if(i!==null&&(c.dependencies=i.dependencies),Qc|=c.lanes,(h&c.childLanes)===0)if(i!==null){if(Aa(i,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(C(153));if(c.child!==null){for(i=c.child,h=ts(i,i.pendingProps),c.child=h,h.return=c;i.sibling!==null;)i=i.sibling,h=h.sibling=ts(i,i.pendingProps),h.return=c;h.sibling=null}return c.child}function jd(i,c){return(i.lanes&c)!==0?!0:(i=i.dependencies,!!(i!==null&&ra(i)))}function qh(i,c,h){switch(c.tag){case 3:qe(c,c.stateNode.containerInfo),Os(c,io,i.memoizedState.cache),ri();break;case 27:case 5:pe(c);break;case 4:qe(c,c.stateNode.containerInfo);break;case 10:Os(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,Si(c),null;break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Wo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Hc(i,c,h):(Wo(c),i=Us(i,c,h),i!==null?i.sibling:null);Wo(c);break;case 19:var A=(i.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(Aa(i,c,h,!1),y=(h&c.childLanes)!==0),A){if(y)return gu(i,c,h);c.flags|=128}if(A=c.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),xe(Ni,Ni.current),y)break;return null;case 22:return c.lanes=0,xs(i,c,h,c.pendingProps);case 24:Os(c,io,i.memoizedState.cache)}return Us(i,c,h)}function Vh(i,c,h){if(i!==null)if(i.memoizedProps!==c.pendingProps)po=!0;else{if(!jd(i,h)&&(c.flags&128)===0)return po=!1,qh(i,c,h);po=(i.flags&131072)!==0}else po=!1,Ir&&(c.flags&1048576)!==0&&jl(c,Ds,c.index);switch(c.lanes=0,c.tag){case 16:e:{var y=c.pendingProps;if(i=S(c.elementType),c.type=i,typeof i=="function")iu(i)?(y=jc(i,y),c.tag=1,c=kf(null,c,i,y,h)):(c.tag=0,c=Ho(null,c,i,y,h));else{if(i!=null){var A=i.$$typeof;if(A===Qe){c.tag=11,c=Lh(null,c,i,y,h);break e}else if(A===fe){c.tag=14,c=Mh(null,c,i,y,h);break e}}throw c=_(i)||i,Error(C(306,c,""))}}return c;case 0:return Ho(i,c,c.type,c.pendingProps,h);case 1:return y=c.type,A=jc(y,c.pendingProps),kf(i,c,y,A,h);case 3:e:{if(qe(c,c.stateNode.containerInfo),i===null)throw Error(C(387));y=c.pendingProps;var z=c.memoizedState;A=z.element,dn(i,c),rr(c,y,null,h);var Me=c.memoizedState;if(y=Me.cache,Os(c,io,y),y!==z.cache&&au(c,[io],h,!0),yr(),y=Me.element,z.isDehydrated)if(z={element:y,isDehydrated:!1,cache:Me.cache},c.updateQueue.baseState=z,c.memoizedState=z,c.flags&256){c=Vc(i,c,y,h);break e}else if(y!==A){A=qo(Error(C(424)),c),ka(A),c=Vc(i,c,y,h);break e}else{switch(i=c.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(er=Ss(i.firstChild),bo=c,Ir=!0,Oo=null,yi=!0,h=rn(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ri(),y===A){c=Us(i,c,h);break e}Uo(i,c,y,h)}c=c.child}return c;case 26:return Bo(i,c),i===null?(h=ep(c.type,null,c.pendingProps,null))?c.memoizedState=h:Ir||(h=c.type,i=c.pendingProps,y=$a(Ie.current).createElement(h),y[Jn]=c,y[Mr]=i,ko(y,h,i),Qr(y),c.stateNode=y):c.memoizedState=ep(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return pe(c),i===null&&Ir&&(y=c.stateNode=$f(c.type,c.pendingProps,Ie.current),bo=c,yi=!0,A=er,Hs(c.type)?(hf=A,er=Ss(y.firstChild)):er=A),Uo(i,c,c.pendingProps.children,h),Bo(i,c),i===null&&(c.flags|=4194304),c.child;case 5:return i===null&&Ir&&((A=y=er)&&(y=ah(y,c.type,c.pendingProps,yi),y!==null?(c.stateNode=y,bo=c,er=Ss(y.firstChild),yi=!1,A=!0):A=!1),A||ro(c)),pe(c),A=c.type,z=c.pendingProps,Me=i!==null?i.memoizedProps:null,y=z.children,nh(A,z)?y=null:Me!==null&&nh(A,Me)&&(c.flags|=32),c.memoizedState!==null&&(A=Zi(i,c,pf,null,null,h),fd._currentValue=A),Bo(i,c),Uo(i,c,y,h),c.child;case 6:return i===null&&Ir&&((i=h=er)&&(h=ec(h,c.pendingProps,yi),h!==null?(c.stateNode=h,bo=c,er=null,i=!0):i=!1),i||ro(c)),null;case 13:return Hc(i,c,h);case 4:return qe(c,c.stateNode.containerInfo),y=c.pendingProps,i===null?c.child=En(c,null,y,h):Uo(i,c,y,h),c.child;case 11:return Lh(i,c,c.type,c.pendingProps,h);case 7:return Uo(i,c,c.pendingProps,h),c.child;case 8:return Uo(i,c,c.pendingProps.children,h),c.child;case 12:return Uo(i,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,Os(c,c.type,y.value),Uo(i,c,y.children,h),c.child;case 9:return A=c.type._context,y=c.pendingProps.children,Pa(c),A=co(A),y=y(A),c.flags|=1,Uo(i,c,y,h),c.child;case 14:return Mh(i,c,c.type,c.pendingProps,h);case 15:return Uh(i,c,c.type,c.pendingProps,h);case 19:return gu(i,c,h);case 31:return Dn(i,c,h);case 22:return xs(i,c,h,c.pendingProps);case 24:return Pa(c),y=co(io),i===null?(A=Dc(),A===null&&(A=Rr,z=dc(),A.pooledCache=z,z.refCount++,z!==null&&(A.pooledCacheLanes|=h),A=z),c.memoizedState={parent:y,cache:A},fn(c),Os(c,io,A)):((i.lanes&h)!==0&&(dn(i,c),rr(c,null,null,h),yr()),A=i.memoizedState,z=c.memoizedState,A.parent!==y?(A={parent:y,cache:y},c.memoizedState=A,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=A),Os(c,io,y)):(y=z.cache,Os(c,io,y),y!==A.cache&&au(c,[io],h,!0))),Uo(i,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(C(156,c.tag))}function os(i){i.flags|=4}function Hi(i,c,h,y,A){if((c=(i.mode&32)!==0)&&(c=!1),c){if(i.flags|=16777216,(A&335544128)===A)if(i.stateNode.complete)i.flags|=8192;else if(Mf())i.flags|=8192;else throw W=Yn,La}else i.flags&=-16777217}function ss(i,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ip(c))if(Mf())i.flags|=8192;else throw W=Yn,La}function qd(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?Nr():536870912,i.lanes|=c,Tu|=c)}function pl(i,c){if(!Ir)switch(i.tailMode){case"hidden":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:y.sibling=null}}function Li(i){var c=i.alternate!==null&&i.alternate.child===i.child,h=0,y=0;if(c)for(var A=i.child;A!==null;)h|=A.lanes|A.childLanes,y|=A.subtreeFlags&65011712,y|=A.flags&65011712,A.return=i,A=A.sibling;else for(A=i.child;A!==null;)h|=A.lanes|A.childLanes,y|=A.subtreeFlags,y|=A.flags,A.return=i,A=A.sibling;return i.subtreeFlags|=y,i.childLanes=h,c}function yc(i,c,h){var y=c.pendingProps;switch($s(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Li(c),null;case 1:return Li(c),null;case 3:return h=c.stateNode,y=null,i!==null&&(y=i.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),To(io),Ve(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(pi(c)?os(c):i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,rl())),Li(c),null;case 26:var A=c.type,z=c.memoizedState;return i===null?(os(c),z!==null?(Li(c),ss(c,z)):(Li(c),Hi(c,A,null,y,h))):z?z!==i.memoizedState?(os(c),Li(c),ss(c,z)):(Li(c),c.flags&=-16777217):(i=i.memoizedProps,i!==y&&os(c),Li(c),Hi(c,A,i,y,h)),null;case 27:if(j(c),h=Ie.current,A=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==y&&os(c);else{if(!y){if(c.stateNode===null)throw Error(C(166));return Li(c),null}i=Ae.current,pi(c)?ea(c):(i=$f(A,y,h),c.stateNode=i,os(c))}return Li(c),null;case 5:if(j(c),A=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==y&&os(c);else{if(!y){if(c.stateNode===null)throw Error(C(166));return Li(c),null}if(z=Ae.current,pi(c))ea(c);else{var Me=$a(Ie.current);switch(z){case 1:z=Me.createElementNS("http://www.w3.org/2000/svg",A);break;case 2:z=Me.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;default:switch(A){case"svg":z=Me.createElementNS("http://www.w3.org/2000/svg",A);break;case"math":z=Me.createElementNS("http://www.w3.org/1998/Math/MathML",A);break;case"script":z=Me.createElement("div"),z.innerHTML="<script><\/script>",z=z.removeChild(z.firstChild);break;case"select":z=typeof y.is=="string"?Me.createElement("select",{is:y.is}):Me.createElement("select"),y.multiple?z.multiple=!0:y.size&&(z.size=y.size);break;default:z=typeof y.is=="string"?Me.createElement(A,{is:y.is}):Me.createElement(A)}}z[Jn]=c,z[Mr]=y;e:for(Me=c.child;Me!==null;){if(Me.tag===5||Me.tag===6)z.appendChild(Me.stateNode);else if(Me.tag!==4&&Me.tag!==27&&Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===c)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===c)break e;Me=Me.return}Me.sibling.return=Me.return,Me=Me.sibling}c.stateNode=z;e:switch(ko(z,A,y),A){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&os(c)}}return Li(c),Hi(c,c.type,i===null?null:i.memoizedProps,c.pendingProps,h),null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==y&&os(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(C(166));if(i=Ie.current,pi(c)){if(i=c.stateNode,h=c.memoizedProps,y=null,A=bo,A!==null)switch(A.tag){case 27:case 5:y=A.memoizedProps}i[Jn]=c,i=!!(i.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||ba(i.nodeValue,h)),i||ro(c,!0)}else i=$a(i).createTextNode(y),i[Jn]=c,c.stateNode=i}return Li(c),null;case 31:if(h=c.memoizedState,i===null||i.memoizedState!==null){if(y=pi(c),h!==null){if(i===null){if(!y)throw Error(C(318));if(i=c.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(557));i[Jn]=c}else ri(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Li(c),i=!1}else h=rl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=h),i=!0;if(!i)return c.flags&256?(fo(c),c):(fo(c),null);if((c.flags&128)!==0)throw Error(C(558))}return Li(c),null;case 13:if(y=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(A=pi(c),y!==null&&y.dehydrated!==null){if(i===null){if(!A)throw Error(C(318));if(A=c.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(C(317));A[Jn]=c}else ri(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Li(c),A=!1}else A=rl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=A),A=!0;if(!A)return c.flags&256?(fo(c),c):(fo(c),null)}return fo(c),(c.flags&128)!==0?(c.lanes=h,c):(h=y!==null,i=i!==null&&i.memoizedState!==null,h&&(y=c.child,A=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(A=y.alternate.memoizedState.cachePool.pool),z=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(z=y.memoizedState.cachePool.pool),z!==A&&(y.flags|=2048)),h!==i&&h&&(c.child.flags|=8192),qd(c,c.updateQueue),Li(c),null);case 4:return Ve(),i===null&&Au(c.stateNode.containerInfo),Li(c),null;case 10:return To(c.type),Li(c),null;case 19:if(G(Ni),y=c.memoizedState,y===null)return Li(c),null;if(A=(c.flags&128)!==0,z=y.rendering,z===null)if(A)pl(y,!1);else{if(Fi!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(z=Lo(i),z!==null){for(c.flags|=128,pl(y,!1),i=z.updateQueue,c.updateQueue=i,qd(c,i),c.subtreeFlags=0,i=h,h=c.child;h!==null;)Ns(h,i),h=h.sibling;return xe(Ni,Ni.current&1|2),Ir&&Xs(c,y.treeForkCount),c.child}i=i.sibling}y.tail!==null&&ee()>Zo&&(c.flags|=128,A=!0,pl(y,!1),c.lanes=4194304)}else{if(!A)if(i=Lo(z),i!==null){if(c.flags|=128,A=!0,i=i.updateQueue,c.updateQueue=i,qd(c,i),pl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!z.alternate&&!Ir)return Li(c),null}else 2*ee()-y.renderingStartTime>Zo&&h!==536870912&&(c.flags|=128,A=!0,pl(y,!1),c.lanes=4194304);y.isBackwards?(z.sibling=c.child,c.child=z):(i=y.last,i!==null?i.sibling=z:c.child=z,y.last=z)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=ee(),i.sibling=null,h=Ni.current,xe(Ni,A?h&1|2:h&1),Ir&&Xs(c,y.treeForkCount),i):(Li(c),null);case 22:case 23:return fo(c),ho(),y=c.memoizedState!==null,i!==null?i.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(Li(c),c.subtreeFlags&6&&(c.flags|=8192)):Li(c),h=c.updateQueue,h!==null&&qd(c,h.retryQueue),h=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),i!==null&&G(lo),null;case 24:return h=null,i!==null&&(h=i.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),To(io),Li(c),null;case 25:return null;case 30:return null}throw Error(C(156,c.tag))}function vu(i,c){switch($s(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return To(io),Ve(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return j(c),null;case 31:if(c.memoizedState!==null){if(fo(c),c.alternate===null)throw Error(C(340));ri()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 13:if(fo(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(C(340));ri()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return G(Ni),null;case 4:return Ve(),null;case 10:return To(c.type),null;case 22:case 23:return fo(c),ho(),i!==null&&G(lo),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return To(io),null;case 25:return null;default:return null}}function jr(i,c){switch($s(c),c.tag){case 3:To(io),Ve();break;case 26:case 27:case 5:j(c);break;case 4:Ve();break;case 31:c.memoizedState!==null&&fo(c);break;case 13:fo(c);break;case 19:G(Ni);break;case 10:To(c.type);break;case 22:case 23:fo(c),ho(),i!==null&&G(lo);break;case 24:To(io)}}function ml(i,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var A=y.next;h=A;do{if((h.tag&i)===i){y=void 0;var z=h.create,Me=h.inst;y=z(),Me.destroy=y}h=h.next}while(h!==A)}}catch(pt){Ri(c,c.return,pt)}}function sa(i,c,h){try{var y=c.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var z=A.next;y=z;do{if((y.tag&i)===i){var Me=y.inst,pt=Me.destroy;if(pt!==void 0){Me.destroy=void 0,A=c;var kt=h,zt=pt;try{zt()}catch(tn){Ri(A,kt,tn)}}}y=y.next}while(y!==z)}}catch(tn){Ri(c,c.return,tn)}}function Af(i){var c=i.updateQueue;if(c!==null){var h=i.stateNode;try{ii(c,h)}catch(y){Ri(i,i.return,y)}}}function Pf(i,c,h){h.props=jc(i.type,i.memoizedProps),h.state=i.memoizedState;try{h.componentWillUnmount()}catch(y){Ri(i,c,y)}}function gl(i,c){try{var h=i.ref;if(h!==null){switch(i.tag){case 26:case 27:case 5:var y=i.stateNode;break;case 30:y=i.stateNode;break;default:y=i.stateNode}typeof h=="function"?i.refCleanup=h(y):h.current=y}}catch(A){Ri(i,c,A)}}function aa(i,c){var h=i.ref,y=i.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(A){Ri(i,c,A)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(A){Ri(i,c,A)}else h.current=null}function Hh(i){var c=i.type,h=i.memoizedProps,y=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(A){Ri(i,i.return,A)}}function Fh(i,c,h){try{var y=i.stateNode;lf(y,i.type,h,c),y[Mr]=c}catch(A){Ri(i,i.return,A)}}function Xl(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Hs(i.type)||i.tag===4}function Vd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xl(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Hs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hd(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(i,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(i),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Vr));else if(y!==4&&(y===27&&Hs(i.type)&&(h=i.stateNode,c=null),i=i.child,i!==null))for(Hd(i,c,h),i=i.sibling;i!==null;)Hd(i,c,h),i=i.sibling}function Ha(i,c,h){var y=i.tag;if(y===5||y===6)i=i.stateNode,c?h.insertBefore(i,c):h.appendChild(i);else if(y!==4&&(y===27&&Hs(i.type)&&(h=i.stateNode),i=i.child,i!==null))for(Ha(i,c,h),i=i.sibling;i!==null;)Ha(i,c,h),i=i.sibling}function Gh(i){var c=i.stateNode,h=i.memoizedProps;try{for(var y=i.type,A=c.attributes;A.length;)c.removeAttributeNode(A[0]);ko(c,y,h),c[Jn]=i,c[Mr]=h}catch(z){Ri(i,i.return,z)}}var Bs=!1,so=!1,yu=!1,Qh=typeof WeakSet=="function"?WeakSet:Set,Co=null;function bu(i,c){if(i=i.containerInfo,Xa=d,i=Ps(i),Ll(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var A=y.anchorOffset,z=y.focusNode;y=y.focusOffset;try{h.nodeType,z.nodeType}catch{h=null;break e}var Me=0,pt=-1,kt=-1,zt=0,tn=0,on=i,Qt=null;t:for(;;){for(var Xt;on!==h||A!==0&&on.nodeType!==3||(pt=Me+A),on!==z||y!==0&&on.nodeType!==3||(kt=Me+y),on.nodeType===3&&(Me+=on.nodeValue.length),(Xt=on.firstChild)!==null;)Qt=on,on=Xt;for(;;){if(on===i)break t;if(Qt===h&&++zt===A&&(pt=Me),Qt===z&&++tn===y&&(kt=Me),(Xt=on.nextSibling)!==null)break;on=Qt,Qt=on.parentNode}on=Xt}h=pt===-1||kt===-1?null:{start:pt,end:kt}}else h=null}h=h||{start:0,end:0}}else h=null;for(Kc={focusedElem:i,selectionRange:h},d=!1,Co=c;Co!==null;)if(c=Co,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Co=i;else for(;Co!==null;){switch(c=Co,z=c.alternate,i=c.flags,c.tag){case 0:if((i&4)!==0&&(i=c.updateQueue,i=i!==null?i.events:null,i!==null))for(h=0;h<i.length;h++)A=i[h],A.ref.impl=A.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&z!==null){i=void 0,h=c,A=z.memoizedProps,z=z.memoizedState,y=h.stateNode;try{var Ln=jc(h.type,A);i=y.getSnapshotBeforeUpdate(Ln,z),y.__reactInternalSnapshotBeforeUpdate=i}catch(tr){Ri(h,h.return,tr)}}break;case 3:if((i&1024)!==0){if(i=c.stateNode.containerInfo,h=i.nodeType,h===9)Nu(i);else if(h===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Nu(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(C(163))}if(i=c.sibling,i!==null){i.return=c.return,Co=i;break}Co=c.return}}function Fd(i,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:zs(i,h),y&4&&ml(5,h);break;case 1:if(zs(i,h),y&4)if(i=h.stateNode,c===null)try{i.componentDidMount()}catch(Me){Ri(h,h.return,Me)}else{var A=jc(h.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(A,c,i.__reactInternalSnapshotBeforeUpdate)}catch(Me){Ri(h,h.return,Me)}}y&64&&Af(h),y&512&&gl(h,h.return);break;case 3:if(zs(i,h),y&64&&(i=h.updateQueue,i!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{ii(i,c)}catch(Me){Ri(h,h.return,Me)}}break;case 27:c===null&&y&4&&Gh(h);case 26:case 5:zs(i,h),c===null&&y&4&&Hh(h),y&512&&gl(h,h.return);break;case 12:zs(i,h);break;case 31:zs(i,h),y&4&&Wh(i,h);break;case 13:zs(i,h),y&4&&_u(i,h),y&64&&(i=h.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(h=Vs.bind(null,h),ch(i,h))));break;case 22:if(y=h.memoizedState!==null||Bs,!y){c=c!==null&&c.memoizedState!==null||so,A=Bs;var z=so;Bs=y,(so=c)&&!z?bc(i,h,(h.subtreeFlags&8772)!==0):zs(i,h),Bs=A,so=z}break;case 30:break;default:zs(i,h)}}function $l(i){var c=i.alternate;c!==null&&(i.alternate=null,$l(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&no(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Ci=null,as=!1;function ca(i,c,h){for(h=h.child;h!==null;)vl(i,c,h),h=h.sibling}function vl(i,c,h){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ue,h)}catch{}switch(h.tag){case 26:so||aa(h,c),ca(i,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:so||aa(h,c);var y=Ci,A=as;Hs(h.type)&&(Ci=h.stateNode,as=!1),ca(i,c,h),ud(h.stateNode),Ci=y,as=A;break;case 5:so||aa(h,c);case 6:if(y=Ci,A=as,Ci=null,ca(i,c,h),Ci=y,as=A,Ci!==null)if(as)try{(Ci.nodeType===9?Ci.body:Ci.nodeName==="HTML"?Ci.ownerDocument.body:Ci).removeChild(h.stateNode)}catch(z){Ri(h,c,z)}else try{Ci.removeChild(h.stateNode)}catch(z){Ri(h,c,z)}break;case 18:Ci!==null&&(as?(i=Ci,sh(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,h.stateNode),mn(i)):sh(Ci,h.stateNode));break;case 4:y=Ci,A=as,Ci=h.stateNode.containerInfo,as=!0,ca(i,c,h),Ci=y,as=A;break;case 0:case 11:case 14:case 15:sa(2,h,c),so||sa(4,h,c),ca(i,c,h);break;case 1:so||(aa(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&Pf(h,c,y)),ca(i,c,h);break;case 21:ca(i,c,h);break;case 22:so=(y=so)||h.memoizedState!==null,ca(i,c,h),so=y;break;default:ca(i,c,h)}}function Wh(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{mn(i)}catch(h){Ri(c,c.return,h)}}}function _u(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{mn(i)}catch(h){Ri(c,c.return,h)}}function up(i){switch(i.tag){case 31:case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new Qh),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new Qh),c;default:throw Error(C(435,i.tag))}}function Fc(i,c){var h=up(i);c.forEach(function(y){if(!h.has(y)){h.add(y);var A=hp.bind(null,i,y);y.then(A,A)}})}function zo(i,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var A=h[y],z=i,Me=c,pt=Me;e:for(;pt!==null;){switch(pt.tag){case 27:if(Hs(pt.type)){Ci=pt.stateNode,as=!1;break e}break;case 5:Ci=pt.stateNode,as=!1;break e;case 3:case 4:Ci=pt.stateNode.containerInfo,as=!0;break e}pt=pt.return}if(Ci===null)throw Error(C(160));vl(z,Me,A),Ci=null,as=!1,z=A.alternate,z!==null&&(z.return=null),A.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)ua(c,i),c=c.sibling}var Gi=null;function ua(i,c){var h=i.alternate,y=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:zo(c,i),cs(i),y&4&&(sa(3,i,i.return),ml(3,i),sa(5,i,i.return));break;case 1:zo(c,i),cs(i),y&512&&(so||h===null||aa(h,h.return)),y&64&&Bs&&(i=i.updateQueue,i!==null&&(y=i.callbacks,y!==null&&(h=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var A=Gi;if(zo(c,i),cs(i),y&512&&(so||h===null||aa(h,h.return)),y&4){var z=h!==null?h.memoizedState:null;if(y=i.memoizedState,h===null)if(y===null)if(i.stateNode===null){e:{y=i.type,h=i.memoizedProps,A=A.ownerDocument||A;t:switch(y){case"title":z=A.getElementsByTagName("title")[0],(!z||z[ui]||z[Jn]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=A.createElement(y),A.head.insertBefore(z,A.querySelector("head > title"))),ko(z,y,h),z[Jn]=i,Qr(z),y=z;break e;case"link":var Me=np("link","href",A).get(y+(h.href||""));if(Me){for(var pt=0;pt<Me.length;pt++)if(z=Me[pt],z.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&z.getAttribute("rel")===(h.rel==null?null:h.rel)&&z.getAttribute("title")===(h.title==null?null:h.title)&&z.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){Me.splice(pt,1);break t}}z=A.createElement(y),ko(z,y,h),A.head.appendChild(z);break;case"meta":if(Me=np("meta","content",A).get(y+(h.content||""))){for(pt=0;pt<Me.length;pt++)if(z=Me[pt],z.getAttribute("content")===(h.content==null?null:""+h.content)&&z.getAttribute("name")===(h.name==null?null:h.name)&&z.getAttribute("property")===(h.property==null?null:h.property)&&z.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&z.getAttribute("charset")===(h.charSet==null?null:h.charSet)){Me.splice(pt,1);break t}}z=A.createElement(y),ko(z,y,h),A.head.appendChild(z);break;default:throw Error(C(468,y))}z[Jn]=i,Qr(z),y=z}i.stateNode=y}else rp(A,i.type,i.stateNode);else i.stateNode=ff(A,y,i.memoizedProps);else z!==y?(z===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):z.count--,y===null?rp(A,i.type,i.stateNode):ff(A,y,i.memoizedProps)):y===null&&i.stateNode!==null&&Fh(i,i.memoizedProps,h.memoizedProps)}break;case 27:zo(c,i),cs(i),y&512&&(so||h===null||aa(h,h.return)),h!==null&&y&4&&Fh(i,i.memoizedProps,h.memoizedProps);break;case 5:if(zo(c,i),cs(i),y&512&&(so||h===null||aa(h,h.return)),i.flags&32){A=i.stateNode;try{Xn(A,"")}catch(Ln){Ri(i,i.return,Ln)}}y&4&&i.stateNode!=null&&(A=i.memoizedProps,Fh(i,A,h!==null?h.memoizedProps:A)),y&1024&&(yu=!0);break;case 6:if(zo(c,i),cs(i),y&4){if(i.stateNode===null)throw Error(C(162));y=i.memoizedProps,h=i.stateNode;try{h.nodeValue=y}catch(Ln){Ri(i,i.return,Ln)}}break;case 3:if(hh=null,A=Gi,Gi=xl(c.containerInfo),zo(c,i),Gi=A,cs(i),y&4&&h!==null&&h.memoizedState.isDehydrated)try{mn(c.containerInfo)}catch(Ln){Ri(i,i.return,Ln)}yu&&(yu=!1,Su(i));break;case 4:y=Gi,Gi=xl(i.stateNode.containerInfo),zo(c,i),cs(i),Gi=y;break;case 12:zo(c,i),cs(i);break;case 31:zo(c,i),cs(i),y&4&&(y=i.updateQueue,y!==null&&(i.updateQueue=null,Fc(i,y)));break;case 13:zo(c,i),cs(i),i.child.flags&8192&&i.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Wd=ee()),y&4&&(y=i.updateQueue,y!==null&&(i.updateQueue=null,Fc(i,y)));break;case 22:A=i.memoizedState!==null;var kt=h!==null&&h.memoizedState!==null,zt=Bs,tn=so;if(Bs=zt||A,so=tn||kt,zo(c,i),so=tn,Bs=zt,cs(i),y&8192)e:for(c=i.stateNode,c._visibility=A?c._visibility&-2:c._visibility|1,A&&(h===null||kt||Bs||so||la(i)),h=null,c=i;;){if(c.tag===5||c.tag===26){if(h===null){kt=h=c;try{if(z=kt.stateNode,A)Me=z.style,typeof Me.setProperty=="function"?Me.setProperty("display","none","important"):Me.display="none";else{pt=kt.stateNode;var on=kt.memoizedProps.style,Qt=on!=null&&on.hasOwnProperty("display")?on.display:null;pt.style.display=Qt==null||typeof Qt=="boolean"?"":(""+Qt).trim()}}catch(Ln){Ri(kt,kt.return,Ln)}}}else if(c.tag===6){if(h===null){kt=c;try{kt.stateNode.nodeValue=A?"":kt.memoizedProps}catch(Ln){Ri(kt,kt.return,Ln)}}}else if(c.tag===18){if(h===null){kt=c;try{var Xt=kt.stateNode;A?jo(Xt,!0):jo(kt.stateNode,!1)}catch(Ln){Ri(kt,kt.return,Ln)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=i.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Fc(i,h))));break;case 19:zo(c,i),cs(i),y&4&&(y=i.updateQueue,y!==null&&(i.updateQueue=null,Fc(i,y)));break;case 30:break;case 21:break;default:zo(c,i),cs(i)}}function cs(i){var c=i.flags;if(c&2){try{for(var h,y=i.return;y!==null;){if(Xl(y)){h=y;break}y=y.return}if(h==null)throw Error(C(160));switch(h.tag){case 27:var A=h.stateNode,z=Vd(i);Ha(i,z,A);break;case 5:var Me=h.stateNode;h.flags&32&&(Xn(Me,""),h.flags&=-33);var pt=Vd(i);Ha(i,pt,Me);break;case 3:case 4:var kt=h.stateNode.containerInfo,zt=Vd(i);Hd(i,zt,kt);break;default:throw Error(C(161))}}catch(tn){Ri(i,i.return,tn)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function Su(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;Su(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function zs(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Fd(i,c.alternate,c),c=c.sibling}function la(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:sa(4,c,c.return),la(c);break;case 1:aa(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&Pf(c,c.return,h),la(c);break;case 27:ud(c.stateNode);case 26:case 5:aa(c,c.return),la(c);break;case 22:c.memoizedState===null&&la(c);break;case 30:la(c);break;default:la(c)}i=i.sibling}}function bc(i,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,A=i,z=c,Me=z.flags;switch(z.tag){case 0:case 11:case 15:bc(A,z,h),ml(4,z);break;case 1:if(bc(A,z,h),y=z,A=y.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(zt){Ri(y,y.return,zt)}if(y=z,A=y.updateQueue,A!==null){var pt=y.stateNode;try{var kt=A.shared.hiddenCallbacks;if(kt!==null)for(A.shared.hiddenCallbacks=null,A=0;A<kt.length;A++)si(kt[A],pt)}catch(zt){Ri(y,y.return,zt)}}h&&Me&64&&Af(z),gl(z,z.return);break;case 27:Gh(z);case 26:case 5:bc(A,z,h),h&&y===null&&Me&4&&Hh(z),gl(z,z.return);break;case 12:bc(A,z,h);break;case 31:bc(A,z,h),h&&Me&4&&Wh(A,z);break;case 13:bc(A,z,h),h&&Me&4&&_u(A,z);break;case 22:z.memoizedState===null&&bc(A,z,h),gl(z,z.return);break;case 30:break;default:bc(A,z,h)}c=c.sibling}}function Jh(i,c){var h=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==h&&(i!=null&&i.refCount++,h!=null&&vr(h))}function Kh(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&vr(i))}function da(i,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Yh(i,c,h,y),c=c.sibling}function Yh(i,c,h,y){var A=c.flags;switch(c.tag){case 0:case 11:case 15:da(i,c,h,y),A&2048&&ml(9,c);break;case 1:da(i,c,h,y);break;case 3:da(i,c,h,y),A&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&vr(i)));break;case 12:if(A&2048){da(i,c,h,y),i=c.stateNode;try{var z=c.memoizedProps,Me=z.id,pt=z.onPostCommit;typeof pt=="function"&&pt(Me,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(kt){Ri(c,c.return,kt)}}else da(i,c,h,y);break;case 31:da(i,c,h,y);break;case 13:da(i,c,h,y);break;case 23:break;case 22:z=c.stateNode,Me=c.alternate,c.memoizedState!==null?z._visibility&2?da(i,c,h,y):ed(i,c):z._visibility&2?da(i,c,h,y):(z._visibility|=2,yl(i,c,h,y,(c.subtreeFlags&10256)!==0||!1)),A&2048&&Jh(Me,c);break;case 24:da(i,c,h,y),A&2048&&Kh(c.alternate,c);break;default:da(i,c,h,y)}}function yl(i,c,h,y,A){for(A=A&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var z=i,Me=c,pt=h,kt=y,zt=Me.flags;switch(Me.tag){case 0:case 11:case 15:yl(z,Me,pt,kt,A),ml(8,Me);break;case 23:break;case 22:var tn=Me.stateNode;Me.memoizedState!==null?tn._visibility&2?yl(z,Me,pt,kt,A):ed(z,Me):(tn._visibility|=2,yl(z,Me,pt,kt,A)),A&&zt&2048&&Jh(Me.alternate,Me);break;case 24:yl(z,Me,pt,kt,A),A&&zt&2048&&Kh(Me.alternate,Me);break;default:yl(z,Me,pt,kt,A)}c=c.sibling}}function ed(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=i,y=c,A=y.flags;switch(y.tag){case 22:ed(h,y),A&2048&&Jh(y.alternate,y);break;case 24:ed(h,y),A&2048&&Kh(y.alternate,y);break;default:ed(h,y)}c=c.sibling}}var bl=8192;function _l(i,c,h){if(i.subtreeFlags&bl)for(i=i.child;i!==null;)mo(i,c,h),i=i.sibling}function mo(i,c,h){switch(i.tag){case 26:_l(i,c,h),i.flags&bl&&i.memoizedState!==null&&op(h,Gi,i.memoizedState,i.memoizedProps);break;case 5:_l(i,c,h);break;case 3:case 4:var y=Gi;Gi=xl(i.stateNode.containerInfo),_l(i,c,h),Gi=y;break;case 22:i.memoizedState===null&&(y=i.alternate,y!==null&&y.memoizedState!==null?(y=bl,bl=16777216,_l(i,c,h),bl=y):_l(i,c,h));break;default:_l(i,c,h)}}function Ko(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function Ro(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Co=y,Gd(y,i)}Ko(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Yo(i),i=i.sibling}function Yo(i){switch(i.tag){case 0:case 11:case 15:Ro(i),i.flags&2048&&sa(9,i,i.return);break;case 3:Ro(i);break;case 12:Ro(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&2&&(i.return===null||i.return.tag!==13)?(c._visibility&=-3,Sl(i)):Ro(i);break;default:Ro(i)}}function Sl(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Co=y,Gd(y,i)}Ko(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:sa(8,c,c.return),Sl(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Sl(c));break;default:Sl(c)}i=i.sibling}}function Gd(i,c){for(;Co!==null;){var h=Co;switch(h.tag){case 0:case 11:case 15:sa(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:vr(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Co=y;else e:for(h=i;Co!==null;){y=Co;var A=y.sibling,z=y.return;if($l(y),y===h){Co=null;break e}if(A!==null){A.return=z,Co=A;break e}Co=z}}}var Zh={getCacheForType:function(i){var c=co(io),h=c.data.get(i);return h===void 0&&(h=i(),c.data.set(i,h)),h},cacheSignal:function(){return co(io).controller.signal}},Xh=typeof WeakMap=="function"?WeakMap:Map,Cr=0,Rr=null,kr=null,Qn=0,ni=0,us=null,Gc=!1,Fa=!1,Qd=!1,Ga=0,Fi=0,Qc=0,Eu=0,$h=0,bs=0,Tu=0,El=null,Fo=null,ha=!1,Wd=0,ef=0,Zo=1/0,ls=null,xo=null,Io=0,ai=null,Tl=null,_c=0,tf=0,js=null,Nf=null,_s=0,nf=null;function Is(){return(Cr&2)!==0&&Qn!==0?Qn&-Qn:w.T!==null?va():Ar()}function Df(){if(bs===0)if((Qn&536870912)===0||Ir){var i=wn;wn<<=1,(wn&3932160)===0&&(wn=262144),bs=i}else bs=536870912;return i=qi.current,i!==null&&(i.flags|=32),bs}function Qi(i,c,h){(i===Rr&&(ni===2||ni===9)||i.cancelPendingCommit!==null)&&(Xo(i,0),fa(i,Qn,bs,!1)),Nn(i,h),((Cr&2)===0||i!==Rr)&&(i===Rr&&((Cr&2)===0&&(Eu|=h),Fi===4&&fa(i,Qn,bs,!1)),ma(i))}function Of(i,c,h){if((Cr&6)!==0)throw Error(C(327));var y=!h&&(c&127)===0&&(c&i.expiredLanes)===0||Pn(i,c),A=y?ks(i,c):td(i,c,!0),z=y;do{if(A===0){Fa&&!y&&fa(i,c,0,!1);break}else{if(h=i.current.alternate,z&&!ds(h)){A=td(i,c,!1),z=!1;continue}if(A===2){if(z=c,i.errorRecoveryDisabledLanes&z)var Me=0;else Me=i.pendingLanes&-536870913,Me=Me!==0?Me:Me&536870912?536870912:0;if(Me!==0){c=Me;e:{var pt=i;A=El;var kt=pt.current.memoizedState.isDehydrated;if(kt&&(Xo(pt,Me).flags|=256),Me=td(pt,Me,!1),Me!==2){if(Qd&&!kt){pt.errorRecoveryDisabledLanes|=z,Eu|=z,A=4;break e}z=Fo,Fo=A,z!==null&&(Fo===null?Fo=z:Fo.push.apply(Fo,z))}A=Me}if(z=!1,A!==2)continue}}if(A===1){Xo(i,0),fa(i,c,0,!0);break}e:{switch(y=i,z=A,z){case 0:case 1:throw Error(C(345));case 4:if((c&4194048)!==c)break;case 6:fa(y,c,bs,!Gc);break e;case 2:Fo=null;break;case 3:case 5:break;default:throw Error(C(329))}if((c&62914560)===c&&(A=Wd+300-ee(),10<A)){if(fa(y,c,bs,!Gc),Mn(y,0,!0)!==0)break e;_c=c,y.timeoutHandle=rh(Lf.bind(null,y,h,Fo,ls,ha,c,bs,Eu,Tu,Gc,z,"Throttled",-0,0),A);break e}Lf(y,h,Fo,ls,ha,c,bs,Eu,Tu,Gc,z,null,-0,0)}}break}while(!0);ma(i)}function Lf(i,c,h,y,A,z,Me,pt,kt,zt,tn,on,Qt,Xt){if(i.timeoutHandle=-1,on=c.subtreeFlags,on&8192||(on&16785408)===16785408){on={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vr},mo(c,z,on);var Ln=(z&62914560)===z?Wd-ee():(z&4194048)===z?ef-ee():0;if(Ln=wp(on,Ln),Ln!==null){_c=z,i.cancelPendingCommit=Ln(jf.bind(null,i,c,z,h,y,A,Me,pt,kt,tn,on,null,Qt,Xt)),fa(i,z,Me,!zt);return}}jf(i,c,z,h,y,A,Me,pt,kt)}function ds(i){for(var c=i;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var A=h[y],z=A.getSnapshot;A=A.value;try{if(!Ao(z(),A))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fa(i,c,h,y){c&=~$h,c&=~Eu,i.suspendedLanes|=c,i.pingedLanes&=~c,y&&(i.warmLanes|=c),y=i.expirationTimes;for(var A=c;0<A;){var z=31-Dt(A),Me=1<<z;y[z]=-1,A&=~Me}h!==0&&$n(i,h,c)}function wl(){return(Cr&6)===0?(rd(0),!1):!0}function Wi(){if(kr!==null){if(ni===0)var i=kr.return;else i=kr,na=ta=null,Ua(i),lt=null,at=0,i=kr;for(;i!==null;)jr(i.alternate,i),i=i.return;kr=null}}function Xo(i,c){var h=i.timeoutHandle;h!==-1&&(i.timeoutHandle=-1,ih(h)),h=i.cancelPendingCommit,h!==null&&(i.cancelPendingCommit=null,h()),_c=0,Wi(),Rr=i,kr=h=ts(i.current,null),Qn=c,ni=0,us=null,Gc=!1,Fa=Pn(i,c),Qd=!1,Tu=bs=$h=Eu=Qc=Fi=0,Fo=El=null,ha=!1,(c&8)!==0&&(c|=c&32);var y=i.entangledLanes;if(y!==0)for(i=i.entanglements,y&=c;0<y;){var A=31-Dt(y),z=1<<A;c|=i[A],y&=~z}return Ga=c,oc(),h}function rf(i,c){fr=null,w.H=zc,c===Ls||c===ol?(c=H(),ni=3):c===La?(c=H(),ni=4):ni=c===Bd?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,us=c,kr===null&&(Fi=1,Ms(i,qo(c,i.current)))}function Mf(){var i=qi.current;return i===null?!0:(Qn&4194048)===Qn?uo===null:(Qn&62914560)===Qn||(Qn&536870912)!==0?i===uo:!1}function Uf(){var i=w.H;return w.H=zc,i===null?zc:i}function Bf(){var i=w.A;return w.A=Zh,i}function Jd(){Fi=4,Gc||(Qn&4194048)!==Qn&&qi.current!==null||(Fa=!0),(Qc&134217727)===0&&(Eu&134217727)===0||Rr===null||fa(Rr,Qn,bs,!1)}function td(i,c,h){var y=Cr;Cr|=2;var A=Uf(),z=Bf();(Rr!==i||Qn!==c)&&(ls=null,Xo(i,c)),c=!1;var Me=Fi;e:do try{if(ni!==0&&kr!==null){var pt=kr,kt=us;switch(ni){case 8:Wi(),Me=6;break e;case 3:case 2:case 9:case 6:qi.current===null&&(c=!0);var zt=ni;if(ni=0,us=null,pa(i,pt,kt,zt),h&&Fa){Me=0;break e}break;default:zt=ni,ni=0,us=null,pa(i,pt,kt,zt)}}qs(),Me=Fi;break}catch(tn){rf(i,tn)}while(!0);return c&&i.shellSuspendCounter++,na=ta=null,Cr=y,w.H=A,w.A=z,kr===null&&(Rr=null,Qn=0,oc()),Me}function qs(){for(;kr!==null;)zf(kr)}function ks(i,c){var h=Cr;Cr|=2;var y=Uf(),A=Bf();Rr!==i||Qn!==c?(ls=null,Zo=ee()+500,Xo(i,c)):Fa=Pn(i,c);e:do try{if(ni!==0&&kr!==null){c=kr;var z=us;t:switch(ni){case 1:ni=0,us=null,pa(i,c,z,1);break;case 2:case 9:if(m(z)){ni=0,us=null,wu(c);break}c=function(){ni!==2&&ni!==9||Rr!==i||(ni=7),ma(i)},z.then(c,c);break e;case 3:ni=7;break e;case 4:ni=5;break e;case 7:m(z)?(ni=0,us=null,wu(c)):(ni=0,us=null,pa(i,c,z,7));break;case 5:var Me=null;switch(kr.tag){case 26:Me=kr.memoizedState;case 5:case 27:var pt=kr;if(Me?ip(Me):pt.stateNode.complete){ni=0,us=null;var kt=pt.sibling;if(kt!==null)kr=kt;else{var zt=pt.return;zt!==null?(kr=zt,Cu(zt)):kr=null}break t}}ni=0,us=null,pa(i,c,z,5);break;case 6:ni=0,us=null,pa(i,c,z,6);break;case 8:Wi(),Fi=6;break e;default:throw Error(C(462))}}lp();break}catch(tn){rf(i,tn)}while(!0);return na=ta=null,w.H=y,w.A=A,Cr=h,kr!==null?0:(Rr=null,Qn=0,oc(),Fi)}function lp(){for(;kr!==null&&!ge();)zf(kr)}function zf(i){var c=Vh(i.alternate,i,Ga);i.memoizedProps=i.pendingProps,c===null?Cu(i):kr=c}function wu(i){var c=i,h=c.alternate;switch(c.tag){case 15:case 0:c=Yl(h,c,c.pendingProps,c.type,void 0,Qn);break;case 11:c=Yl(h,c,c.pendingProps,c.type.render,c.ref,Qn);break;case 5:Ua(c);default:jr(h,c),c=kr=Ns(c,Ga),c=Vh(h,c,Ga)}i.memoizedProps=i.pendingProps,c===null?Cu(i):kr=c}function pa(i,c,h,y){na=ta=null,Ua(c),lt=null,at=0;var A=c.return;try{if(If(i,A,c,h,Qn)){Fi=1,Ms(i,qo(h,i.current)),kr=null;return}}catch(z){if(A!==null)throw kr=A,z;Fi=1,Ms(i,qo(h,i.current)),kr=null;return}c.flags&32768?(Ir||y===1?i=!0:Fa||(Qn&536870912)!==0?i=!1:(Gc=i=!0,(y===2||y===9||y===3||y===6)&&(y=qi.current,y!==null&&y.tag===13&&(y.flags|=16384))),of(c,i)):Cu(c)}function Cu(i){var c=i;do{if((c.flags&32768)!==0){of(c,Gc);return}i=c.return;var h=yc(c.alternate,c,Ga);if(h!==null){kr=h;return}if(c=c.sibling,c!==null){kr=c;return}kr=c=i}while(c!==null);Fi===0&&(Fi=5)}function of(i,c){do{var h=vu(i.alternate,i);if(h!==null){h.flags&=32767,kr=h;return}if(h=i.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(i=i.sibling,i!==null)){kr=i;return}kr=i=h}while(i!==null);Fi=6,kr=null}function jf(i,c,h,y,A,z,Me,pt,kt){i.cancelPendingCommit=null;do nd();while(Io!==0);if((Cr&6)!==0)throw Error(C(327));if(c!==null){if(c===i.current)throw Error(C(177));if(z=c.lanes|c.childLanes,z|=$u,_r(i,h,z,Me,pt,kt),i===Rr&&(kr=Rr=null,Qn=0),Tl=c,ai=i,_c=h,tf=z,js=A,Nf=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,fp(xt,function(){return Yd(),null})):(i.callbackNode=null,i.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=w.T,w.T=null,A=R.p,R.p=2,Me=Cr,Cr|=4;try{bu(i,c,h)}finally{Cr=Me,R.p=A,w.T=y}}Io=1,Kd(),qf(),Ru()}}function Kd(){if(Io===1){Io=0;var i=ai,c=Tl,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=w.T,w.T=null;var y=R.p;R.p=2;var A=Cr;Cr|=4;try{ua(c,i);var z=Kc,Me=Ps(i.containerInfo),pt=z.focusedElem,kt=z.selectionRange;if(Me!==pt&&pt&&pt.ownerDocument&&nu(pt.ownerDocument.documentElement,pt)){if(kt!==null&&Ll(pt)){var zt=kt.start,tn=kt.end;if(tn===void 0&&(tn=zt),"selectionStart"in pt)pt.selectionStart=zt,pt.selectionEnd=Math.min(tn,pt.value.length);else{var on=pt.ownerDocument||document,Qt=on&&on.defaultView||window;if(Qt.getSelection){var Xt=Qt.getSelection(),Ln=pt.textContent.length,tr=Math.min(kt.start,Ln),br=kt.end===void 0?tr:Math.min(kt.end,Ln);!Xt.extend&&tr>br&&(Me=br,br=tr,tr=Me);var jt=ic(pt,tr),Mt=ic(pt,br);if(jt&&Mt&&(Xt.rangeCount!==1||Xt.anchorNode!==jt.node||Xt.anchorOffset!==jt.offset||Xt.focusNode!==Mt.node||Xt.focusOffset!==Mt.offset)){var Ct=on.createRange();Ct.setStart(jt.node,jt.offset),Xt.removeAllRanges(),tr>br?(Xt.addRange(Ct),Xt.extend(Mt.node,Mt.offset)):(Ct.setEnd(Mt.node,Mt.offset),Xt.addRange(Ct))}}}}for(on=[],Xt=pt;Xt=Xt.parentNode;)Xt.nodeType===1&&on.push({element:Xt,left:Xt.scrollLeft,top:Xt.scrollTop});for(typeof pt.focus=="function"&&pt.focus(),pt=0;pt<on.length;pt++){var sn=on[pt];sn.element.scrollLeft=sn.left,sn.element.scrollTop=sn.top}}d=!!Xa,Kc=Xa=null}finally{Cr=A,R.p=y,w.T=h}}i.current=c,Io=2}}function qf(){if(Io===2){Io=0;var i=ai,c=Tl,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=w.T,w.T=null;var y=R.p;R.p=2;var A=Cr;Cr|=4;try{Fd(i,c.alternate,c)}finally{Cr=A,R.p=y,w.T=h}}Io=3}}function Ru(){if(Io===4||Io===3){Io=0,ve();var i=ai,c=Tl,h=_c,y=Nf;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Io=5:(Io=0,Tl=ai=null,xu(i,i.pendingLanes));var A=i.pendingLanes;if(A===0&&(xo=null),mi(h),c=c.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ue,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=w.T,A=R.p,R.p=2,w.T=null;try{for(var z=i.onRecoverableError,Me=0;Me<y.length;Me++){var pt=y[Me];z(pt.value,{componentStack:pt.stack})}}finally{w.T=c,R.p=A}}(_c&3)!==0&&nd(),ma(i),A=i.pendingLanes,(h&261930)!==0&&(A&42)!==0?i===nf?_s++:(_s=0,nf=i):_s=0,rd(0)}}function xu(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,vr(c)))}function nd(){return Kd(),qf(),Ru(),Yd()}function Yd(){if(Io!==5)return!1;var i=ai,c=tf;tf=0;var h=mi(_c),y=w.T,A=R.p;try{R.p=32>h?32:h,w.T=null,h=js,js=null;var z=ai,Me=_c;if(Io=0,Tl=ai=null,_c=0,(Cr&6)!==0)throw Error(C(331));var pt=Cr;if(Cr|=4,Yo(z.current),Yh(z,z.current,Me,h),Cr=pt,rd(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ue,z)}catch{}return!0}finally{R.p=A,w.T=y,xu(i,c)}}function Vf(i,c,h){c=qo(h,c),c=Md(i.stateNode,c,2),i=An(i,c,2),i!==null&&(Nn(i,2),ma(i))}function Ri(i,c,h){if(i.tag===3)Vf(i,i,h);else for(;c!==null;){if(c.tag===3){Vf(c,i,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(xo===null||!xo.has(y))){i=qo(h,i),h=Ud(2),y=An(c,h,2),y!==null&&(qc(h,y,c,i),Nn(y,2),ma(y));break}}c=c.return}}function sf(i,c,h){var y=i.pingCache;if(y===null){y=i.pingCache=new Xh;var A=new Set;y.set(c,A)}else A=y.get(c),A===void 0&&(A=new Set,y.set(c,A));A.has(h)||(Qd=!0,A.add(h),i=dp.bind(null,i,c,h),c.then(i,i))}function dp(i,c,h){var y=i.pingCache;y!==null&&y.delete(c),i.pingedLanes|=i.suspendedLanes&h,i.warmLanes&=~h,Rr===i&&(Qn&h)===h&&(Fi===4||Fi===3&&(Qn&62914560)===Qn&&300>ee()-Wd?(Cr&2)===0&&Xo(i,0):$h|=h,Tu===Qn&&(Tu=0)),ma(i)}function af(i,c){c===0&&(c=Nr()),i=Ks(i,c),i!==null&&(Nn(i,c),ma(i))}function Vs(i){var c=i.memoizedState,h=0;c!==null&&(h=c.retryLane),af(i,h)}function hp(i,c){var h=0;switch(i.tag){case 31:case 13:var y=i.stateNode,A=i.memoizedState;A!==null&&(h=A.retryLane);break;case 19:y=i.stateNode;break;case 22:y=i.stateNode._retryCache;break;default:throw Error(C(314))}y!==null&&y.delete(c),af(i,h)}function fp(i,c){return me(i,c)}var Zd=null,Wc=null,Qa=!1,Sc=!1,Xd=!1,Wa=0;function ma(i){i!==Wc&&i.next===null&&(Wc===null?Zd=Wc=i:Wc=Wc.next=i),Sc=!0,Qa||(Qa=!0,pp())}function rd(i,c){if(!Xd&&Sc){Xd=!0;do for(var h=!1,y=Zd;y!==null;){if(i!==0){var A=y.pendingLanes;if(A===0)var z=0;else{var Me=y.suspendedLanes,pt=y.pingedLanes;z=(1<<31-Dt(42|i)+1)-1,z&=A&~(Me&~pt),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(h=!0,ga(y,z))}else z=Qn,z=Mn(y,y===Rr?z:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(z&3)===0||Pn(y,z)||(h=!0,ga(y,z));y=y.next}while(h);Xd=!1}}function Hf(){id()}function id(){Sc=Qa=!1;var i=0;Wa!==0&&cd()&&(i=Wa);for(var c=ee(),h=null,y=Zd;y!==null;){var A=y.next,z=Ff(y,c);z===0?(y.next=null,h===null?Zd=A:h.next=A,A===null&&(Wc=h)):(h=y,(i!==0||(z&3)!==0)&&(Sc=!0)),y=A}Io!==0&&Io!==5||rd(i),Wa!==0&&(Wa=0)}function Ff(i,c){for(var h=i.suspendedLanes,y=i.pingedLanes,A=i.expirationTimes,z=i.pendingLanes&-62914561;0<z;){var Me=31-Dt(z),pt=1<<Me,kt=A[Me];kt===-1?((pt&h)===0||(pt&y)!==0)&&(A[Me]=ci(pt,c)):kt<=c&&(i.expiredLanes|=pt),z&=~pt}if(c=Rr,h=Qn,h=Mn(i,i===c?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),y=i.callbackNode,h===0||i===c&&(ni===2||ni===9)||i.cancelPendingCommit!==null)return y!==null&&y!==null&&Se(y),i.callbackNode=null,i.callbackPriority=0;if((h&3)===0||Pn(i,h)){if(c=h&-h,c===i.callbackPriority)return c;switch(y!==null&&Se(y),mi(h)){case 2:case 8:h=yt;break;case 32:h=xt;break;case 268435456:h=J;break;default:h=xt}return y=Gf.bind(null,i),h=me(h,y),i.callbackPriority=c,i.callbackNode=h,c}return y!==null&&y!==null&&Se(y),i.callbackPriority=2,i.callbackNode=null,2}function Gf(i,c){if(Io!==0&&Io!==5)return i.callbackNode=null,i.callbackPriority=0,null;var h=i.callbackNode;if(nd()&&i.callbackNode!==h)return null;var y=Qn;return y=Mn(i,i===Rr?y:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),y===0?null:(Of(i,y,c),Ff(i,ee()),i.callbackNode!=null&&i.callbackNode===h?Gf.bind(null,i):null)}function ga(i,c){if(nd())return null;Of(i,c,!0)}function pp(){df(function(){(Cr&6)!==0?me(Je,Hf):id()})}function va(){if(Wa===0){var i=Da;i===0&&(i=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),Wa=i}return Wa}function Ja(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_i(""+i)}function Ka(i,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,i.id&&h.setAttribute("form",i.id),c.parentNode.insertBefore(h,c),i=new FormData(i),h.parentNode.removeChild(h),i}function Qf(i,c,h,y,A){if(c==="submit"&&h&&h.stateNode===A){var z=Ja((A[Mr]||null).action),Me=y.submitter;Me&&(c=(c=Me[Mr]||null)?Ja(c.formAction):Me.getAttribute("formAction"),c!==null&&(z=c,Me=null));var pt=new Tn("action","action",null,y,A);i.push({event:pt,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Wa!==0){var kt=Me?Ka(A,Me):new FormData(A);mc(h,{pending:!0,data:kt,method:A.method,action:z},null,kt)}}else typeof z=="function"&&(pt.preventDefault(),kt=Me?Ka(A,Me):new FormData(A),mc(h,{pending:!0,data:kt,method:A.method,action:z},z,kt))},currentTarget:A}]})}}for(var Iu=0;Iu<zl.length;Iu++){var $d=zl[Iu],od=$d.toLowerCase(),eh=$d[0].toUpperCase()+$d.slice(1);es(od,"on"+eh)}es(Ku,"onAnimationEnd"),es(ki,"onAnimationIteration"),es(Yu,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Zu,"onTransitionRun"),es(vo,"onTransitionStart"),es(Ra,"onTransitionCancel"),es(Xu,"onTransitionEnd"),mr("onMouseEnter",["mouseout","mouseover"]),mr("onMouseLeave",["mouseout","mouseover"]),mr("onPointerEnter",["pointerout","pointerover"]),mr("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function Wf(i,c){c=(c&4)!==0;for(var h=0;h<i.length;h++){var y=i[h],A=y.event;y=y.listeners;e:{var z=void 0;if(c)for(var Me=y.length-1;0<=Me;Me--){var pt=y[Me],kt=pt.instance,zt=pt.currentTarget;if(pt=pt.listener,kt!==z&&A.isPropagationStopped())break e;z=pt,A.currentTarget=zt;try{z(A)}catch(tn){or(tn)}A.currentTarget=null,z=kt}else for(Me=0;Me<y.length;Me++){if(pt=y[Me],kt=pt.instance,zt=pt.currentTarget,pt=pt.listener,kt!==z&&A.isPropagationStopped())break e;z=pt,A.currentTarget=zt;try{z(A)}catch(tn){or(tn)}A.currentTarget=null,z=kt}}}}function Yr(i,c){var h=c[oi];h===void 0&&(h=c[oi]=new Set);var y=i+"__bubble";h.has(y)||(Jf(c,i,2,!1),h.add(y))}function uf(i,c,h){var y=0;c&&(y|=4),Jf(h,i,y,c)}var sd="_reactListening"+Math.random().toString(36).slice(2);function Au(i){if(!i[sd]){i[sd]=!0,qr.forEach(function(h){h!=="selectionchange"&&(cf.has(h)||uf(h,!1,i),uf(h,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[sd]||(c[sd]=!0,uf("selectionchange",!1,c))}}function Jf(i,c,h,y){switch(le(c)){case 2:var A=p;break;case 8:A=u;break;default:A=v}h=A.bind(null,c,h,i),A=void 0,!ue||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(A=!0),y?A!==void 0?i.addEventListener(c,h,{capture:!0,passive:A}):i.addEventListener(c,h,!0):A!==void 0?i.addEventListener(c,h,{passive:A}):i.addEventListener(c,h,!1)}function Jc(i,c,h,y,A){var z=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var Me=y.tag;if(Me===3||Me===4){var pt=y.stateNode.containerInfo;if(pt===A)break;if(Me===4)for(Me=y.return;Me!==null;){var kt=Me.tag;if((kt===3||kt===4)&&Me.stateNode.containerInfo===A)return;Me=Me.return}for(;pt!==null;){if(Me=Ui(pt),Me===null)return;if(kt=Me.tag,kt===5||kt===6||kt===26||kt===27){y=z=Me;continue e}pt=pt.parentNode}}y=y.return}Ii(function(){var zt=z,tn=di(h),on=[];e:{var Qt=Bl.get(i);if(Qt!==void 0){var Xt=Tn,Ln=i;switch(i){case"keypress":if(Pt(h)===0)break e;case"keydown":case"keyup":Xt=_a;break;case"focusin":Ln="focus",Xt=$o;break;case"focusout":Ln="blur",Xt=$o;break;case"beforeblur":case"afterblur":Xt=$o;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Jr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Kr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Cc;break;case Ku:case ki:case Yu:Xt=wc;break;case Xu:Xt=_h;break;case"scroll":case"scrollend":Xt=_n;break;case"wheel":Xt=zu;break;case"copy":case"cut":case"paste":Xt=Qo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=vd;break;case"toggle":case"beforetoggle":Xt=Qs}var tr=(c&4)!==0,br=!tr&&(i==="scroll"||i==="scrollend"),jt=tr?Qt!==null?Qt+"Capture":null:Qt;tr=[];for(var Mt=zt,Ct;Mt!==null;){var sn=Mt;if(Ct=sn.stateNode,sn=sn.tag,sn!==5&&sn!==26&&sn!==27||Ct===null||jt===null||(sn=ie(Mt,jt),sn!=null&&tr.push(ad(Mt,sn,Ct))),br)break;Mt=Mt.return}0<tr.length&&(Qt=new Xt(Qt,Ln,null,h,tn),on.push({event:Qt,listeners:tr}))}}if((c&7)===0){e:{if(Qt=i==="mouseover"||i==="pointerover",Xt=i==="mouseout"||i==="pointerout",Qt&&h!==li&&(Ln=h.relatedTarget||h.fromElement)&&(Ui(Ln)||Ln[ar]))break e;if((Xt||Qt)&&(Qt=tn.window===tn?tn:(Qt=tn.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,Xt?(Ln=h.relatedTarget||h.toElement,Xt=zt,Ln=Ln?Ui(Ln):null,Ln!==null&&(br=O(Ln),tr=Ln.tag,Ln!==br||tr!==5&&tr!==27&&tr!==6)&&(Ln=null)):(Xt=null,Ln=zt),Xt!==Ln)){if(tr=Jr,sn="onMouseLeave",jt="onMouseEnter",Mt="mouse",(i==="pointerout"||i==="pointerover")&&(tr=vd,sn="onPointerLeave",jt="onPointerEnter",Mt="pointer"),br=Xt==null?Qt:Br(Xt),Ct=Ln==null?Qt:Br(Ln),Qt=new tr(sn,Mt+"leave",Xt,h,tn),Qt.target=br,Qt.relatedTarget=Ct,sn=null,Ui(tn)===zt&&(tr=new tr(jt,Mt+"enter",Ln,h,tn),tr.target=Ct,tr.relatedTarget=br,sn=tr),br=sn,Xt&&Ln)t:{for(tr=mp,jt=Xt,Mt=Ln,Ct=0,sn=jt;sn;sn=tr(sn))Ct++;sn=0;for(var Kn=Mt;Kn;Kn=tr(Kn))sn++;for(;0<Ct-sn;)jt=tr(jt),Ct--;for(;0<sn-Ct;)Mt=tr(Mt),sn--;for(;Ct--;){if(jt===Mt||Mt!==null&&jt===Mt.alternate){tr=jt;break t}jt=tr(jt),Mt=tr(Mt)}tr=null}else tr=null;Xt!==null&&Kf(on,Qt,Xt,tr,!1),Ln!==null&&br!==null&&Kf(on,br,Ln,tr,!0)}}e:{if(Qt=zt?Br(zt):window,Xt=Qt.nodeName&&Qt.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&Qt.type==="file")var Pr=Fu;else if(Dl(Qt))if(wd)Pr=Ft;else{Pr=Eh;var Fn=Rd}else Xt=Qt.nodeName,!Xt||Xt.toLowerCase()!=="input"||Qt.type!=="checkbox"&&Qt.type!=="radio"?zt&&ir(zt.elementType)&&(Pr=Fu):Pr=Ic;if(Pr&&(Pr=Pr(i,zt))){Vu(on,Pr,h,tn);break e}Fn&&Fn(i,Qt,zt),i==="focusout"&&zt&&Qt.type==="number"&&zt.memoizedProps.value!=null&&en(Qt,"number",Qt.value)}switch(Fn=zt?Br(zt):window,i){case"focusin":(Dl(Fn)||Fn.contentEditable==="true")&&(Ta=Fn,Wu=zt,kc=null);break;case"focusout":kc=Wu=Ta=null;break;case"mousedown":Ul=!0;break;case"contextmenu":case"mouseup":case"dragend":Ul=!1,Ju(on,h,tn);break;case"selectionchange":if(Ml)break;case"keydown":case"keyup":Ju(on,h,tn)}var pr;if(Rc)e:{switch(i){case"compositionstart":var zr="onCompositionStart";break e;case"compositionend":zr="onCompositionEnd";break e;case"compositionupdate":zr="onCompositionUpdate";break e}zr=void 0}else Ea?_d(i,h)&&(zr="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(zr="onCompositionStart");zr&&(bd&&h.locale!=="ko"&&(Ea||zr!=="onCompositionStart"?zr==="onCompositionEnd"&&Ea&&(pr=Rt()):(Xe=tn,ft="value"in Xe?Xe.value:Xe.textContent,Ea=!0)),Fn=th(zt,zr),0<Fn.length&&(zr=new pd(zr,i,null,h,tn),on.push({event:zr,listeners:Fn}),pr?zr.data=pr:(pr=Sa(h),pr!==null&&(zr.data=pr)))),(pr=Sh?Sd(i,h):Ed(i,h))&&(zr=th(zt,"onBeforeInput"),0<zr.length&&(Fn=new pd("onBeforeInput","beforeinput",null,h,tn),on.push({event:Fn,listeners:zr}),Fn.data=pr)),Qf(on,i,zt,h,tn)}Wf(on,c)})}function ad(i,c,h){return{instance:i,listener:c,currentTarget:h}}function th(i,c){for(var h=c+"Capture",y=[];i!==null;){var A=i,z=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||z===null||(A=ie(i,h),A!=null&&y.unshift(ad(i,A,z)),A=ie(i,c),A!=null&&y.push(ad(i,A,z))),i.tag===3)return y;i=i.return}return[]}function mp(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Kf(i,c,h,y,A){for(var z=c._reactName,Me=[];h!==null&&h!==y;){var pt=h,kt=pt.alternate,zt=pt.stateNode;if(pt=pt.tag,kt!==null&&kt===y)break;pt!==5&&pt!==26&&pt!==27||zt===null||(kt=zt,A?(zt=ie(h,z),zt!=null&&Me.unshift(ad(h,zt,kt))):A||(zt=ie(h,z),zt!=null&&Me.push(ad(h,zt,kt)))),h=h.return}Me.length!==0&&i.push({event:c,listeners:Me})}var gp=/\r\n?/g,Ya=/\u0000|\uFFFD/g;function ya(i){return(typeof i=="string"?i:""+i).replace(gp,`
`).replace(Ya,"")}function ba(i,c){return c=ya(c),ya(i)===c}function Mi(i,c,h,y,A,z){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Xn(i,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Xn(i,""+y);break;case"className":Te(i,"class",y);break;case"tabIndex":Te(i,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Te(i,h,y);break;case"style":gr(i,y,z);break;case"data":if(c!=="object"){Te(i,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){i.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){i.removeAttribute(h);break}y=_i(""+y),i.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){i.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(h==="formAction"?(c!=="input"&&Mi(i,c,"name",A.name,A,null),Mi(i,c,"formEncType",A.formEncType,A,null),Mi(i,c,"formMethod",A.formMethod,A,null),Mi(i,c,"formTarget",A.formTarget,A,null)):(Mi(i,c,"encType",A.encType,A,null),Mi(i,c,"method",A.method,A,null),Mi(i,c,"target",A.target,A,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){i.removeAttribute(h);break}y=_i(""+y),i.setAttribute(h,y);break;case"onClick":y!=null&&(i.onclick=Vr);break;case"onScroll":y!=null&&Yr("scroll",i);break;case"onScrollEnd":y!=null&&Yr("scrollend",i);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(C(61));if(h=y.__html,h!=null){if(A.children!=null)throw Error(C(60));i.innerHTML=h}}break;case"multiple":i.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":i.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){i.removeAttribute("xlink:href");break}h=_i(""+y),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?i.setAttribute(h,""+y):i.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?i.setAttribute(h,""):i.removeAttribute(h);break;case"capture":case"download":y===!0?i.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?i.setAttribute(h,y):i.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?i.setAttribute(h,y):i.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?i.removeAttribute(h):i.setAttribute(h,y);break;case"popover":Yr("beforetoggle",i),Yr("toggle",i),Be(i,"popover",y);break;case"xlinkActuate":$e(i,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":$e(i,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":$e(i,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":$e(i,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":$e(i,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":$e(i,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":$e(i,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":$e(i,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":$e(i,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Be(i,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Ti.get(h)||h,Be(i,h,y))}}function Za(i,c,h,y,A,z){switch(h){case"style":gr(i,y,z);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(C(61));if(h=y.__html,h!=null){if(A.children!=null)throw Error(C(60));i.innerHTML=h}}break;case"children":typeof y=="string"?Xn(i,y):(typeof y=="number"||typeof y=="bigint")&&Xn(i,""+y);break;case"onScroll":y!=null&&Yr("scroll",i);break;case"onScrollEnd":y!=null&&Yr("scrollend",i);break;case"onClick":y!=null&&(i.onclick=Vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bi.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(A=h.endsWith("Capture"),c=h.slice(2,A?h.length-7:void 0),z=i[Mr]||null,z=z!=null?z[h]:null,typeof z=="function"&&i.removeEventListener(c,z,A),typeof y=="function")){typeof z!="function"&&z!==null&&(h in i?i[h]=null:i.hasAttribute(h)&&i.removeAttribute(h)),i.addEventListener(c,y,A);break e}h in i?i[h]=y:y===!0?i.setAttribute(h,""):Be(i,h,y)}}}function ko(i,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yr("error",i),Yr("load",i);var y=!1,A=!1,z;for(z in h)if(h.hasOwnProperty(z)){var Me=h[z];if(Me!=null)switch(z){case"src":y=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(C(137,c));default:Mi(i,c,z,Me,h,null)}}A&&Mi(i,c,"srcSet",h.srcSet,h,null),y&&Mi(i,c,"src",h.src,h,null);return;case"input":Yr("invalid",i);var pt=z=Me=A=null,kt=null,zt=null;for(y in h)if(h.hasOwnProperty(y)){var tn=h[y];if(tn!=null)switch(y){case"name":A=tn;break;case"type":Me=tn;break;case"checked":kt=tn;break;case"defaultChecked":zt=tn;break;case"value":z=tn;break;case"defaultValue":pt=tn;break;case"children":case"dangerouslySetInnerHTML":if(tn!=null)throw Error(C(137,c));break;default:Mi(i,c,y,tn,h,null)}}an(i,z,pt,kt,zt,Me,A,!1);return;case"select":Yr("invalid",i),y=Me=z=null;for(A in h)if(h.hasOwnProperty(A)&&(pt=h[A],pt!=null))switch(A){case"value":z=pt;break;case"defaultValue":Me=pt;break;case"multiple":y=pt;default:Mi(i,c,A,pt,h,null)}c=z,h=Me,i.multiple=!!y,c!=null?Cn(i,!!y,c,!1):h!=null&&Cn(i,!!y,h,!0);return;case"textarea":Yr("invalid",i),z=A=y=null;for(Me in h)if(h.hasOwnProperty(Me)&&(pt=h[Me],pt!=null))switch(Me){case"value":y=pt;break;case"defaultValue":A=pt;break;case"children":z=pt;break;case"dangerouslySetInnerHTML":if(pt!=null)throw Error(C(91));break;default:Mi(i,c,Me,pt,h,null)}On(i,y,A,z);return;case"option":for(kt in h)if(h.hasOwnProperty(kt)&&(y=h[kt],y!=null))switch(kt){case"selected":i.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Mi(i,c,kt,y,h,null)}return;case"dialog":Yr("beforetoggle",i),Yr("toggle",i),Yr("cancel",i),Yr("close",i);break;case"iframe":case"object":Yr("load",i);break;case"video":case"audio":for(y=0;y<ku.length;y++)Yr(ku[y],i);break;case"image":Yr("error",i),Yr("load",i);break;case"details":Yr("toggle",i);break;case"embed":case"source":case"link":Yr("error",i),Yr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(zt in h)if(h.hasOwnProperty(zt)&&(y=h[zt],y!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":throw Error(C(137,c));default:Mi(i,c,zt,y,h,null)}return;default:if(ir(c)){for(tn in h)h.hasOwnProperty(tn)&&(y=h[tn],y!==void 0&&Za(i,c,tn,y,h,void 0));return}}for(pt in h)h.hasOwnProperty(pt)&&(y=h[pt],y!=null&&Mi(i,c,pt,y,h,null))}function lf(i,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,z=null,Me=null,pt=null,kt=null,zt=null,tn=null;for(Xt in h){var on=h[Xt];if(h.hasOwnProperty(Xt)&&on!=null)switch(Xt){case"checked":break;case"value":break;case"defaultValue":kt=on;default:y.hasOwnProperty(Xt)||Mi(i,c,Xt,null,y,on)}}for(var Qt in y){var Xt=y[Qt];if(on=h[Qt],y.hasOwnProperty(Qt)&&(Xt!=null||on!=null))switch(Qt){case"type":z=Xt;break;case"name":A=Xt;break;case"checked":zt=Xt;break;case"defaultChecked":tn=Xt;break;case"value":Me=Xt;break;case"defaultValue":pt=Xt;break;case"children":case"dangerouslySetInnerHTML":if(Xt!=null)throw Error(C(137,c));break;default:Xt!==on&&Mi(i,c,Qt,Xt,y,on)}}Wt(i,Me,pt,kt,zt,tn,z,A);return;case"select":Xt=Me=pt=Qt=null;for(z in h)if(kt=h[z],h.hasOwnProperty(z)&&kt!=null)switch(z){case"value":break;case"multiple":Xt=kt;default:y.hasOwnProperty(z)||Mi(i,c,z,null,y,kt)}for(A in y)if(z=y[A],kt=h[A],y.hasOwnProperty(A)&&(z!=null||kt!=null))switch(A){case"value":Qt=z;break;case"defaultValue":pt=z;break;case"multiple":Me=z;default:z!==kt&&Mi(i,c,A,z,y,kt)}c=pt,h=Me,y=Xt,Qt!=null?Cn(i,!!h,Qt,!1):!!y!=!!h&&(c!=null?Cn(i,!!h,c,!0):Cn(i,!!h,h?[]:"",!1));return;case"textarea":Xt=Qt=null;for(pt in h)if(A=h[pt],h.hasOwnProperty(pt)&&A!=null&&!y.hasOwnProperty(pt))switch(pt){case"value":break;case"children":break;default:Mi(i,c,pt,null,y,A)}for(Me in y)if(A=y[Me],z=h[Me],y.hasOwnProperty(Me)&&(A!=null||z!=null))switch(Me){case"value":Qt=A;break;case"defaultValue":Xt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(C(91));break;default:A!==z&&Mi(i,c,Me,A,y,z)}Un(i,Qt,Xt);return;case"option":for(var Ln in h)if(Qt=h[Ln],h.hasOwnProperty(Ln)&&Qt!=null&&!y.hasOwnProperty(Ln))switch(Ln){case"selected":i.selected=!1;break;default:Mi(i,c,Ln,null,y,Qt)}for(kt in y)if(Qt=y[kt],Xt=h[kt],y.hasOwnProperty(kt)&&Qt!==Xt&&(Qt!=null||Xt!=null))switch(kt){case"selected":i.selected=Qt&&typeof Qt!="function"&&typeof Qt!="symbol";break;default:Mi(i,c,kt,Qt,y,Xt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tr in h)Qt=h[tr],h.hasOwnProperty(tr)&&Qt!=null&&!y.hasOwnProperty(tr)&&Mi(i,c,tr,null,y,Qt);for(zt in y)if(Qt=y[zt],Xt=h[zt],y.hasOwnProperty(zt)&&Qt!==Xt&&(Qt!=null||Xt!=null))switch(zt){case"children":case"dangerouslySetInnerHTML":if(Qt!=null)throw Error(C(137,c));break;default:Mi(i,c,zt,Qt,y,Xt)}return;default:if(ir(c)){for(var br in h)Qt=h[br],h.hasOwnProperty(br)&&Qt!==void 0&&!y.hasOwnProperty(br)&&Za(i,c,br,void 0,y,Qt);for(tn in y)Qt=y[tn],Xt=h[tn],!y.hasOwnProperty(tn)||Qt===Xt||Qt===void 0&&Xt===void 0||Za(i,c,tn,Qt,y,Xt);return}}for(var jt in h)Qt=h[jt],h.hasOwnProperty(jt)&&Qt!=null&&!y.hasOwnProperty(jt)&&Mi(i,c,jt,null,y,Qt);for(on in y)Qt=y[on],Xt=h[on],!y.hasOwnProperty(on)||Qt===Xt||Qt==null&&Xt==null||Mi(i,c,on,Qt,y,Xt)}function Yf(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vp(){if(typeof performance.getEntriesByType=="function"){for(var i=0,c=0,h=performance.getEntriesByType("resource"),y=0;y<h.length;y++){var A=h[y],z=A.transferSize,Me=A.initiatorType,pt=A.duration;if(z&&pt&&Yf(Me)){for(Me=0,pt=A.responseEnd,y+=1;y<h.length;y++){var kt=h[y],zt=kt.startTime;if(zt>pt)break;var tn=kt.transferSize,on=kt.initiatorType;tn&&Yf(on)&&(kt=kt.responseEnd,Me+=tn*(kt<pt?1:(pt-zt)/(kt-zt)))}if(--y,c+=8*(z+Me)/(A.duration/1e3),i++,10<i)break}}if(0<i)return c/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Xa=null,Kc=null;function $a(i){return i.nodeType===9?i:i.ownerDocument}function Pu(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cl(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function nh(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Yc=null;function cd(){var i=window.event;return i&&i.type==="popstate"?i===Yc?!1:(Yc=i,!0):(Yc=null,!1)}var rh=typeof setTimeout=="function"?setTimeout:void 0,ih=typeof clearTimeout=="function"?clearTimeout:void 0,oh=typeof Promise=="function"?Promise:void 0,df=typeof queueMicrotask=="function"?queueMicrotask:typeof oh<"u"?function(i){return oh.resolve(null).then(i).catch(Zf)}:rh;function Zf(i){setTimeout(function(){throw i})}function Hs(i){return i==="head"}function sh(i,c){var h=c,y=0;do{var A=h.nextSibling;if(i.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"||h==="/&"){if(y===0){i.removeChild(A),mn(c);return}y--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")y++;else if(h==="html")ud(i.ownerDocument.documentElement);else if(h==="head"){h=i.ownerDocument.head,ud(h);for(var z=h.firstChild;z;){var Me=z.nextSibling,pt=z.nodeName;z[ui]||pt==="SCRIPT"||pt==="STYLE"||pt==="LINK"&&z.rel.toLowerCase()==="stylesheet"||h.removeChild(z),z=Me}}else h==="body"&&ud(i.ownerDocument.body);h=A}while(h);mn(c)}function jo(i,c){var h=i;i=0;do{var y=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(i===0)break;i--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||i++;h=y}while(h)}function Nu(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Nu(h),no(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}i.removeChild(h)}}function ah(i,c,h,y){for(;i.nodeType===1;){var A=h;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(y){if(!i[ui])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(z=i.getAttribute("rel"),z==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(z!==A.rel||i.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||i.getAttribute("title")!==(A.title==null?null:A.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(z=i.getAttribute("src"),(z!==(A.src==null?null:A.src)||i.getAttribute("type")!==(A.type==null?null:A.type)||i.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&z&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var z=A.name==null?null:""+A.name;if(A.type==="hidden"&&i.getAttribute("name")===z)return i}else return i;if(i=Ss(i.nextSibling),i===null)break}return null}function ec(i,c,h){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!h||(i=Ss(i.nextSibling),i===null))return null;return i}function Rl(i,c){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ss(i.nextSibling),i===null))return null;return i}function tc(i){return i.data==="$?"||i.data==="$~"}function Du(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function ch(i,c){var h=i.ownerDocument;if(i.data==="$~")i._reactRetry=c;else if(i.data!=="$?"||h.readyState!=="loading")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),i._reactRetry=y}}function Ss(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return i}var hf=null;function Xf(i){i=i.nextSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"||h==="/&"){if(c===0)return Ss(i.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}i=i.nextSibling}return null}function Ec(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return i;c--}else h!=="/$"&&h!=="/&"||c++}i=i.previousSibling}return null}function $f(i,c,h){switch(c=$a(h),i){case"html":if(i=c.documentElement,!i)throw Error(C(452));return i;case"head":if(i=c.head,!i)throw Error(C(453));return i;case"body":if(i=c.body,!i)throw Error(C(454));return i;default:throw Error(C(451))}}function ud(i){for(var c=i.attributes;c.length;)i.removeAttributeNode(c[0]);no(i)}var hs=new Map,Ou=new Set;function xl(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Tc=R.d;R.d={f:Zc,r:Fs,D:yp,C:bp,L:_p,m:Sp,X:uh,S:Ep,M:Il};function Zc(){var i=Tc.f(),c=wl();return i||c}function Fs(i){var c=vi(i);c!==null&&c.tag===5&&c.type==="form"?wf(c):Tc.r(i)}var fs=typeof document>"u"?null:document;function As(i,c,h){var y=fs;if(y&&typeof c=="string"&&c){var A=Ut(c);A='link[rel="'+i+'"][href="'+A+'"]',typeof h=="string"&&(A+='[crossorigin="'+h+'"]'),Ou.has(A)||(Ou.add(A),i={rel:i,crossOrigin:h,href:c},y.querySelector(A)===null&&(c=y.createElement("link"),ko(c,"link",i),Qr(c),y.head.appendChild(c)))}}function yp(i){Tc.D(i),As("dns-prefetch",i,null)}function bp(i,c){Tc.C(i,c),As("preconnect",i,c)}function _p(i,c,h){Tc.L(i,c,h);var y=fs;if(y&&i&&c){var A='link[rel="preload"][as="'+Ut(c)+'"]';c==="image"&&h&&h.imageSrcSet?(A+='[imagesrcset="'+Ut(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(A+='[imagesizes="'+Ut(h.imageSizes)+'"]')):A+='[href="'+Ut(i)+'"]';var z=A;switch(c){case"style":z=kl(i);break;case"script":z=Lu(i)}hs.has(z)||(i=Re({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:i,as:c},h),hs.set(z,i),y.querySelector(A)!==null||c==="style"&&y.querySelector(ld(z))||c==="script"&&y.querySelector(Al(z))||(c=y.createElement("link"),ko(c,"link",i),Qr(c),y.head.appendChild(c)))}}function Sp(i,c){Tc.m(i,c);var h=fs;if(h&&i){var y=c&&typeof c.as=="string"?c.as:"script",A='link[rel="modulepreload"][as="'+Ut(y)+'"][href="'+Ut(i)+'"]',z=A;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=Lu(i)}if(!hs.has(z)&&(i=Re({rel:"modulepreload",href:i},c),hs.set(z,i),h.querySelector(A)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Al(z)))return}y=h.createElement("link"),ko(y,"link",i),Qr(y),h.head.appendChild(y)}}}function Ep(i,c,h){Tc.S(i,c,h);var y=fs;if(y&&i){var A=ur(y).hoistableStyles,z=kl(i);c=c||"default";var Me=A.get(z);if(!Me){var pt={loading:0,preload:null};if(Me=y.querySelector(ld(z)))pt.loading=5;else{i=Re({rel:"stylesheet",href:i,"data-precedence":c},h),(h=hs.get(z))&&lh(i,h);var kt=Me=y.createElement("link");Qr(kt),ko(kt,"link",i),kt._p=new Promise(function(zt,tn){kt.onload=zt,kt.onerror=tn}),kt.addEventListener("load",function(){pt.loading|=1}),kt.addEventListener("error",function(){pt.loading|=2}),pt.loading|=4,hd(Me,c,y)}Me={type:"stylesheet",instance:Me,count:1,state:pt},A.set(z,Me)}}}function uh(i,c){Tc.X(i,c);var h=fs;if(h&&i){var y=ur(h).hoistableScripts,A=Lu(i),z=y.get(A);z||(z=h.querySelector(Al(A)),z||(i=Re({src:i,async:!0},c),(c=hs.get(A))&&dh(i,c),z=h.createElement("script"),Qr(z),ko(z,"link",i),h.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},y.set(A,z))}}function Il(i,c){Tc.M(i,c);var h=fs;if(h&&i){var y=ur(h).hoistableScripts,A=Lu(i),z=y.get(A);z||(z=h.querySelector(Al(A)),z||(i=Re({src:i,async:!0,type:"module"},c),(c=hs.get(A))&&dh(i,c),z=h.createElement("script"),Qr(z),ko(z,"link",i),h.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},y.set(A,z))}}function ep(i,c,h,y){var A=(A=Ie.current)?xl(A):null;if(!A)throw Error(C(446));switch(i){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=kl(h.href),h=ur(A).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){i=kl(h.href);var z=ur(A).hoistableStyles,Me=z.get(i);if(Me||(A=A.ownerDocument||A,Me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(i,Me),(z=A.querySelector(ld(i)))&&!z._p&&(Me.instance=z,Me.state.loading=5),hs.has(i)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},hs.set(i,h),z||tp(A,i,h,Me.state))),c&&y===null)throw Error(C(528,""));return Me}if(c&&y!==null)throw Error(C(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Lu(h),h=ur(A).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(C(444,i))}}function kl(i){return'href="'+Ut(i)+'"'}function ld(i){return'link[rel="stylesheet"]['+i+"]"}function dd(i){return Re({},i,{"data-precedence":i.precedence,precedence:null})}function tp(i,c,h,y){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=i.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),ko(c,"link",h),Qr(c),i.head.appendChild(c))}function Lu(i){return'[src="'+Ut(i)+'"]'}function Al(i){return"script[async]"+i}function ff(i,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=i.querySelector('style[data-href~="'+Ut(h.href)+'"]');if(y)return c.instance=y,Qr(y),y;var A=Re({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(i.ownerDocument||i).createElement("style"),Qr(y),ko(y,"style",A),hd(y,h.precedence,i),c.instance=y;case"stylesheet":A=kl(h.href);var z=i.querySelector(ld(A));if(z)return c.state.loading|=4,c.instance=z,Qr(z),z;y=dd(h),(A=hs.get(A))&&lh(y,A),z=(i.ownerDocument||i).createElement("link"),Qr(z);var Me=z;return Me._p=new Promise(function(pt,kt){Me.onload=pt,Me.onerror=kt}),ko(z,"link",y),c.state.loading|=4,hd(z,h.precedence,i),c.instance=z;case"script":return z=Lu(h.src),(A=i.querySelector(Al(z)))?(c.instance=A,Qr(A),A):(y=h,(A=hs.get(z))&&(y=Re({},h),dh(y,A)),i=i.ownerDocument||i,A=i.createElement("script"),Qr(A),ko(A,"link",y),i.head.appendChild(A),c.instance=A);case"void":return null;default:throw Error(C(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,hd(y,h.precedence,i));return c.instance}function hd(i,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=y.length?y[y.length-1]:null,z=A,Me=0;Me<y.length;Me++){var pt=y[Me];if(pt.dataset.precedence===c)z=pt;else if(z!==A)break}z?z.parentNode.insertBefore(i,z.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(i,c.firstChild))}function lh(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function dh(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var hh=null;function np(i,c,h){if(hh===null){var y=new Map,A=hh=new Map;A.set(h,y)}else A=hh,y=A.get(h),y||(y=new Map,A.set(h,y));if(y.has(i))return y;for(y.set(i,null),h=h.getElementsByTagName(i),A=0;A<h.length;A++){var z=h[A];if(!(z[ui]||z[Jn]||i==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var Me=z.getAttribute(c)||"";Me=i+Me;var pt=y.get(Me);pt?pt.push(z):y.set(Me,[z])}}return y}function rp(i,c,h){i=i.ownerDocument||i,i.head.insertBefore(h,c==="title"?i.querySelector("head > title"):null)}function Tp(i,c,h){if(h===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function ip(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function op(i,c,h,y){if(h.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=kl(y.href),z=c.querySelector(ld(A));if(z){c=z._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(i.count++,i=ph.bind(i),c.then(i,i)),h.state.loading|=4,h.instance=z,Qr(z);return}z=c.ownerDocument||c,y=dd(y),(A=hs.get(A))&&lh(y,A),z=z.createElement("link"),Qr(z);var Me=z;Me._p=new Promise(function(pt,kt){Me.onload=pt,Me.onerror=kt}),ko(z,"link",y),h.instance=z}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(i.count++,h=ph.bind(i),c.addEventListener("load",h),c.addEventListener("error",h))}}var fh=0;function wp(i,c){return i.stylesheets&&i.count===0&&gh(i,i.stylesheets),0<i.count||0<i.imgCount?function(h){var y=setTimeout(function(){if(i.stylesheets&&gh(i,i.stylesheets),i.unsuspend){var z=i.unsuspend;i.unsuspend=null,z()}},6e4+c);0<i.imgBytes&&fh===0&&(fh=62500*vp());var A=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&gh(i,i.stylesheets),i.unsuspend)){var z=i.unsuspend;i.unsuspend=null,z()}},(i.imgBytes>fh?50:800)+c);return i.unsuspend=h,function(){i.unsuspend=null,clearTimeout(y),clearTimeout(A)}}:null}function ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gh(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var mh=null;function gh(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,mh=new Map,c.forEach(Cp,i),mh=null,ph.call(i))}function Cp(i,c){if(!(c.state.loading&4)){var h=mh.get(i);if(h)var y=h.get(null);else{h=new Map,mh.set(i,h);for(var A=i.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<A.length;z++){var Me=A[z];(Me.nodeName==="LINK"||Me.getAttribute("media")!=="not all")&&(h.set(Me.dataset.precedence,Me),y=Me)}y&&h.set(null,y)}A=c.instance,Me=A.getAttribute("data-precedence"),z=h.get(Me)||y,z===y&&h.set(null,A),h.set(Me,A),this.count++,y=ph.bind(this),A.addEventListener("load",y),A.addEventListener("error",y),z?z.parentNode.insertBefore(A,z.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(A,i.firstChild)),c.state.loading|=4}}var fd={$$typeof:tt,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function s(i,c,h,y,A,z,Me,pt,kt){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=y,this.onUncaughtError=A,this.onCaughtError=z,this.onRecoverableError=Me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=kt,this.incompleteTransitions=new Map}function e(i,c,h,y,A,z,Me,pt,kt,zt,tn,on){return i=new s(i,c,h,Me,kt,zt,tn,on,pt),c=1,z===!0&&(c|=24),z=Eo(3,null,null,c),i.current=z,z.stateNode=i,c=dc(),c.refCount++,i.pooledCache=c,c.refCount++,z.memoizedState={element:y,isDehydrated:h,cache:c},fn(z),i}function t(i){return i?(i=ac,i):ac}function n(i,c,h,y,A,z){A=t(A),y.context===null?y.context=A:y.pendingContext=A,y=xn(c),y.payload={element:h},z=z===void 0?null:z,z!==null&&(y.callback=z),h=An(i,y,c),h!==null&&(Qi(h,i,c),Hn(h,i,c))}function r(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<c?h:c}}function o(i,c){r(i,c),(i=i.alternate)&&r(i,c)}function a(i){if(i.tag===13||i.tag===31){var c=Ks(i,67108864);c!==null&&Qi(c,i,67108864),o(i,67108864)}}function l(i){if(i.tag===13||i.tag===31){var c=Is();c=Or(c);var h=Ks(i,c);h!==null&&Qi(h,i,c),o(i,c)}}var d=!0;function p(i,c,h,y){var A=w.T;w.T=null;var z=R.p;try{R.p=2,v(i,c,h,y)}finally{R.p=z,w.T=A}}function u(i,c,h,y){var A=w.T;w.T=null;var z=R.p;try{R.p=8,v(i,c,h,y)}finally{R.p=z,w.T=A}}function v(i,c,h,y){if(d){var A=x(y);if(A===null)Jc(i,c,y,U,h),At(i,y);else if(Bt(A,i,c,h,y))y.stopPropagation();else if(At(i,y),c&4&&-1<Et.indexOf(i)){for(;A!==null;){var z=vi(A);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var Me=jn(z.pendingLanes);if(Me!==0){var pt=z;for(pt.pendingLanes|=2,pt.entangledLanes|=2;Me;){var kt=1<<31-Dt(Me);pt.entanglements[1]|=kt,Me&=~kt}ma(z),(Cr&6)===0&&(Zo=ee()+500,rd(0))}}break;case 31:case 13:pt=Ks(z,2),pt!==null&&Qi(pt,z,2),wl(),o(z,2)}if(z=x(y),z===null&&Jc(i,c,y,U,h),z===A)break;A=z}A!==null&&y.stopPropagation()}else Jc(i,c,y,null,h)}}function x(i){return i=di(i),te(i)}var U=null;function te(i){if(U=null,i=Ui(i),i!==null){var c=O(i);if(c===null)i=null;else{var h=c.tag;if(h===13){if(i=$(c),i!==null)return i;i=null}else if(h===31){if(i=_e(c),i!==null)return i;i=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return U=i,null}function le(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ze()){case Je:return 2;case yt:return 8;case xt:case Ye:return 32;case J:return 268435456;default:return 32}default:return 32}}var se=!1,We=null,Ke=null,Ze=null,et=new Map,ht=new Map,gt=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function At(i,c){switch(i){case"focusin":case"focusout":We=null;break;case"dragenter":case"dragleave":Ke=null;break;case"mouseover":case"mouseout":Ze=null;break;case"pointerover":case"pointerout":et.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(c.pointerId)}}function Ot(i,c,h,y,A,z){return i===null||i.nativeEvent!==z?(i={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:z,targetContainers:[A]},c!==null&&(c=vi(c),c!==null&&a(c)),i):(i.eventSystemFlags|=y,c=i.targetContainers,A!==null&&c.indexOf(A)===-1&&c.push(A),i)}function Bt(i,c,h,y,A){switch(c){case"focusin":return We=Ot(We,i,c,h,y,A),!0;case"dragenter":return Ke=Ot(Ke,i,c,h,y,A),!0;case"mouseover":return Ze=Ot(Ze,i,c,h,y,A),!0;case"pointerover":var z=A.pointerId;return et.set(z,Ot(et.get(z)||null,i,c,h,y,A)),!0;case"gotpointercapture":return z=A.pointerId,ht.set(z,Ot(ht.get(z)||null,i,c,h,y,A)),!0}return!1}function Kt(i){var c=Ui(i.target);if(c!==null){var h=O(c);if(h!==null){if(c=h.tag,c===13){if(c=$(h),c!==null){i.blockedOn=c,sr(i.priority,function(){l(h)});return}}else if(c===31){if(c=_e(h),c!==null){i.blockedOn=c,sr(i.priority,function(){l(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ht(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var h=x(i.nativeEvent);if(h===null){h=i.nativeEvent;var y=new h.constructor(h.type,h);li=y,h.target.dispatchEvent(y),li=null}else return c=vi(h),c!==null&&a(c),i.blockedOn=h,!1;c.shift()}return!0}function Zt(i,c,h){Ht(i)&&h.delete(c)}function un(){se=!1,We!==null&&Ht(We)&&(We=null),Ke!==null&&Ht(Ke)&&(Ke=null),Ze!==null&&Ht(Ze)&&(Ze=null),et.forEach(Zt),ht.forEach(Zt)}function hn(i,c){i.blockedOn===c&&(i.blockedOn=null,se||(se=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,un)))}var pn=null;function Bn(i){pn!==i&&(pn=i,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){pn===i&&(pn=null);for(var c=0;c<i.length;c+=3){var h=i[c],y=i[c+1],A=i[c+2];if(typeof y!="function"){if(te(y||h)===null)continue;break}var z=vi(h);z!==null&&(i.splice(c,3),c-=3,mc(z,{pending:!0,data:A,method:h.method,action:y},y,A))}}))}function mn(i){function c(kt){return hn(kt,i)}We!==null&&hn(We,i),Ke!==null&&hn(Ke,i),Ze!==null&&hn(Ze,i),et.forEach(c),ht.forEach(c);for(var h=0;h<gt.length;h++){var y=gt[h];y.blockedOn===i&&(y.blockedOn=null)}for(;0<gt.length&&(h=gt[0],h.blockedOn===null);)Kt(h),h.blockedOn===null&&gt.shift();if(h=(i.ownerDocument||i).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var A=h[y],z=h[y+1],Me=A[Mr]||null;if(typeof z=="function")Me||Bn(h);else if(Me){var pt=null;if(z&&z.hasAttribute("formAction")){if(A=z,Me=z[Mr]||null)pt=Me.formAction;else if(te(A)!==null)continue}else pt=Me.action;typeof pt=="function"?h[y+1]=pt:(h.splice(y,3),y-=3),Bn(h)}}}function vn(){function i(z){z.canIntercept&&z.info==="react-transition"&&z.intercept({handler:function(){return new Promise(function(Me){return A=Me})},focusReset:"manual",scroll:"manual"})}function c(){A!==null&&(A(),A=null),y||setTimeout(h,20)}function h(){if(!y&&!navigation.transition){var z=navigation.currentEntry;z&&z.url!=null&&navigation.navigate(z.url,{state:z.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,A=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){y=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),A!==null&&(A(),A=null)}}}function cn(i){this._internalRoot=i}nn.prototype.render=cn.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(C(409));var h=c.current,y=Is();n(h,y,i,c,null,null)},nn.prototype.unmount=cn.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;n(i.current,2,null,i,null,null),wl(),c[ar]=null}};function nn(i){this._internalRoot=i}nn.prototype.unstable_scheduleHydration=function(i){if(i){var c=Ar();i={blockedOn:null,target:i,priority:c};for(var h=0;h<gt.length&&c!==0&&c<gt[h].priority;h++);gt.splice(h,0,i),h===0&&Kt(i)}};var gn=f.version;if(gn!=="19.2.0")throw Error(C(527,gn,"19.2.0"));R.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(C(188)):(i=Object.keys(i).join(","),Error(C(268,i)));return i=Fe(c),i=i!==null?ot(i):null,i=i===null?null:i.stateNode,i};var yn={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bn.isDisabled&&bn.supportsFiber)try{Ue=bn.inject(yn),_t=bn}catch{}}return reactDomClient_production.createRoot=function(i,c){if(!D(i))throw Error(C(299));var h=!1,y="",A=Oh,z=xf,Me=Mo;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(z=c.onCaughtError),c.onRecoverableError!==void 0&&(Me=c.onRecoverableError)),c=e(i,1,!1,null,null,h,y,null,A,z,Me,vn),i[ar]=c.current,Au(i),new cn(c)},reactDomClient_production.hydrateRoot=function(i,c,h){if(!D(i))throw Error(C(299));var y=!1,A="",z=Oh,Me=xf,pt=Mo,kt=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(z=h.onUncaughtError),h.onCaughtError!==void 0&&(Me=h.onCaughtError),h.onRecoverableError!==void 0&&(pt=h.onRecoverableError),h.formState!==void 0&&(kt=h.formState)),c=e(i,1,!0,c,h??null,y,A,kt,z,Me,pt,vn),c.context=t(null),h=c.current,y=Is(),y=Or(y),A=xn(y),A.callback=null,An(h,A,y),h=y,c.current.lanes=h,Nn(c,h),ma(c),i[ar]=c.current,Au(i),new nn(c)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(f){console.error(f)}}return g(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createHashHistory(g={}){function f(D,O){let{pathname:$="/",search:_e="",hash:ye=""}=parsePath(D.location.hash.substring(1));return!$.startsWith("/")&&!$.startsWith(".")&&($="/"+$),createLocation("",{pathname:$,search:_e,hash:ye},O.state&&O.state.usr||null,O.state&&O.state.key||"default")}function b(D,O){let $=D.document.querySelector("base"),_e="";if($&&$.getAttribute("href")){let ye=D.location.href,Fe=ye.indexOf("#");_e=Fe===-1?ye:ye.slice(0,Fe)}return _e+"#"+(typeof O=="string"?O:createPath(O))}function C(D,O){warning(D.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(O)})`)}return getUrlBasedHistory(f,b,C,g)}function invariant(g,f){if(g===!1||g===null||typeof g>"u")throw new Error(f)}function warning(g,f){if(!g){typeof console<"u"&&console.warn(f);try{throw new Error(f)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(g,f){return{usr:g.state,key:g.key,idx:f}}function createLocation(g,f,b=null,C){return{pathname:typeof g=="string"?g:g.pathname,search:"",hash:"",...typeof f=="string"?parsePath(f):f,state:b,key:f&&f.key||C||createKey()}}function createPath({pathname:g="/",search:f="",hash:b=""}){return f&&f!=="?"&&(g+=f.charAt(0)==="?"?f:"?"+f),b&&b!=="#"&&(g+=b.charAt(0)==="#"?b:"#"+b),g}function parsePath(g){let f={};if(g){let b=g.indexOf("#");b>=0&&(f.hash=g.substring(b),g=g.substring(0,b));let C=g.indexOf("?");C>=0&&(f.search=g.substring(C),g=g.substring(0,C)),g&&(f.pathname=g)}return f}function getUrlBasedHistory(g,f,b,C={}){let{window:D=document.defaultView,v5Compat:O=!1}=C,$=D.history,_e="POP",ye=null,Fe=ot();Fe==null&&(Fe=0,$.replaceState({...$.state,idx:Fe},""));function ot(){return($.state||{idx:null}).idx}function Re(){_e="POP";let ke=ot(),ce=ke==null?null:ke-Fe;Fe=ke,ye&&ye({action:_e,location:Pe.location,delta:ce})}function Z(ke,ce){_e="PUSH";let Ne=createLocation(Pe.location,ke,ce);b&&b(Ne,ke),Fe=ot()+1;let tt=getHistoryState(Ne,Fe),Qe=Pe.createHref(Ne);try{$.pushState(tt,"",Qe)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;D.location.assign(Qe)}O&&ye&&ye({action:_e,location:Pe.location,delta:1})}function I(ke,ce){_e="REPLACE";let Ne=createLocation(Pe.location,ke,ce);b&&b(Ne,ke),Fe=ot();let tt=getHistoryState(Ne,Fe),Qe=Pe.createHref(Ne);$.replaceState(tt,"",Qe),O&&ye&&ye({action:_e,location:Pe.location,delta:0})}function P(ke){return createBrowserURLImpl(ke)}let Pe={get action(){return _e},get location(){return g(D,$)},listen(ke){if(ye)throw new Error("A history only accepts one active listener");return D.addEventListener(PopStateEventType,Re),ye=ke,()=>{D.removeEventListener(PopStateEventType,Re),ye=null}},createHref(ke){return f(D,ke)},createURL:P,encodeLocation(ke){let ce=P(ke);return{pathname:ce.pathname,search:ce.search,hash:ce.hash}},push:Z,replace:I,go(ke){return $.go(ke)}};return Pe}function createBrowserURLImpl(g,f=!1){let b="http://localhost";typeof window<"u"&&(b=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(b,"No window.location.(origin|href) available to create URL");let C=typeof g=="string"?g:createPath(g);return C=C.replace(/ $/,"%20"),!f&&C.startsWith("//")&&(C=b+C),new URL(C,b)}function matchRoutes(g,f,b="/"){return matchRoutesImpl(g,f,b,!1)}function matchRoutesImpl(g,f,b,C){let D=typeof f=="string"?parsePath(f):f,O=stripBasename(D.pathname||"/",b);if(O==null)return null;let $=flattenRoutes(g);rankRouteBranches($);let _e=null;for(let ye=0;_e==null&&ye<$.length;++ye){let Fe=decodePath(O);_e=matchRouteBranch($[ye],Fe,C)}return _e}function flattenRoutes(g,f=[],b=[],C="",D=!1){let O=($,_e,ye=D,Fe)=>{let ot={relativePath:Fe===void 0?$.path||"":Fe,caseSensitive:$.caseSensitive===!0,childrenIndex:_e,route:$};if(ot.relativePath.startsWith("/")){if(!ot.relativePath.startsWith(C)&&ye)return;invariant(ot.relativePath.startsWith(C),`Absolute route path "${ot.relativePath}" nested under path "${C}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),ot.relativePath=ot.relativePath.slice(C.length)}let Re=joinPaths([C,ot.relativePath]),Z=b.concat(ot);$.children&&$.children.length>0&&(invariant($.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${Re}".`),flattenRoutes($.children,f,Z,Re,ye)),!($.path==null&&!$.index)&&f.push({path:Re,score:computeScore(Re,$.index),routesMeta:Z})};return g.forEach(($,_e)=>{var ye;if($.path===""||!((ye=$.path)!=null&&ye.includes("?")))O($,_e);else for(let Fe of explodeOptionalSegments($.path))O($,_e,!0,Fe)}),f}function explodeOptionalSegments(g){let f=g.split("/");if(f.length===0)return[];let[b,...C]=f,D=b.endsWith("?"),O=b.replace(/\?$/,"");if(C.length===0)return D?[O,""]:[O];let $=explodeOptionalSegments(C.join("/")),_e=[];return _e.push(...$.map(ye=>ye===""?O:[O,ye].join("/"))),D&&_e.push(...$),_e.map(ye=>g.startsWith("/")&&ye===""?"/":ye)}function rankRouteBranches(g){g.sort((f,b)=>f.score!==b.score?b.score-f.score:compareIndexes(f.routesMeta.map(C=>C.childrenIndex),b.routesMeta.map(C=>C.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=g=>g==="*";function computeScore(g,f){let b=g.split("/"),C=b.length;return b.some(isSplat)&&(C+=splatPenalty),f&&(C+=indexRouteValue),b.filter(D=>!isSplat(D)).reduce((D,O)=>D+(paramRe.test(O)?dynamicSegmentValue:O===""?emptySegmentValue:staticSegmentValue),C)}function compareIndexes(g,f){return g.length===f.length&&g.slice(0,-1).every((C,D)=>C===f[D])?g[g.length-1]-f[f.length-1]:0}function matchRouteBranch(g,f,b=!1){let{routesMeta:C}=g,D={},O="/",$=[];for(let _e=0;_e<C.length;++_e){let ye=C[_e],Fe=_e===C.length-1,ot=O==="/"?f:f.slice(O.length)||"/",Re=matchPath({path:ye.relativePath,caseSensitive:ye.caseSensitive,end:Fe},ot),Z=ye.route;if(!Re&&Fe&&b&&!C[C.length-1].route.index&&(Re=matchPath({path:ye.relativePath,caseSensitive:ye.caseSensitive,end:!1},ot)),!Re)return null;Object.assign(D,Re.params),$.push({params:D,pathname:joinPaths([O,Re.pathname]),pathnameBase:normalizePathname(joinPaths([O,Re.pathnameBase])),route:Z}),Re.pathnameBase!=="/"&&(O=joinPaths([O,Re.pathnameBase]))}return $}function matchPath(g,f){typeof g=="string"&&(g={path:g,caseSensitive:!1,end:!0});let[b,C]=compilePath(g.path,g.caseSensitive,g.end),D=f.match(b);if(!D)return null;let O=D[0],$=O.replace(/(.)\/+$/,"$1"),_e=D.slice(1);return{params:C.reduce((Fe,{paramName:ot,isOptional:Re},Z)=>{if(ot==="*"){let P=_e[Z]||"";$=O.slice(0,O.length-P.length).replace(/(.)\/+$/,"$1")}const I=_e[Z];return Re&&!I?Fe[ot]=void 0:Fe[ot]=(I||"").replace(/%2F/g,"/"),Fe},{}),pathname:O,pathnameBase:$,pattern:g}}function compilePath(g,f=!1,b=!0){warning(g==="*"||!g.endsWith("*")||g.endsWith("/*"),`Route path "${g}" will be treated as if it were "${g.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${g.replace(/\*$/,"/*")}".`);let C=[],D="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,($,_e,ye)=>(C.push({paramName:_e,isOptional:ye!=null}),ye?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return g.endsWith("*")?(C.push({paramName:"*"}),D+=g==="*"||g==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):b?D+="\\/*$":g!==""&&g!=="/"&&(D+="(?:(?=\\/|$))"),[new RegExp(D,f?void 0:"i"),C]}function decodePath(g){try{return g.split("/").map(f=>decodeURIComponent(f).replace(/\//g,"%2F")).join("/")}catch(f){return warning(!1,`The URL path "${g}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${f}).`),g}}function stripBasename(g,f){if(f==="/")return g;if(!g.toLowerCase().startsWith(f.toLowerCase()))return null;let b=f.endsWith("/")?f.length-1:f.length,C=g.charAt(b);return C&&C!=="/"?null:g.slice(b)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=g=>ABSOLUTE_URL_REGEX.test(g);function resolvePath(g,f="/"){let{pathname:b,search:C="",hash:D=""}=typeof g=="string"?parsePath(g):g,O;if(b)if(isAbsoluteUrl(b))O=b;else{if(b.includes("//")){let $=b;b=b.replace(/\/\/+/g,"/"),warning(!1,`Pathnames cannot have embedded double slashes - normalizing ${$} -> ${b}`)}b.startsWith("/")?O=resolvePathname(b.substring(1),"/"):O=resolvePathname(b,f)}else O=f;return{pathname:O,search:normalizeSearch(C),hash:normalizeHash(D)}}function resolvePathname(g,f){let b=f.replace(/\/+$/,"").split("/");return g.split("/").forEach(D=>{D===".."?b.length>1&&b.pop():D!=="."&&b.push(D)}),b.length>1?b.join("/"):"/"}function getInvalidPathError(g,f,b,C){return`Cannot include a '${g}' character in a manually specified \`to.${f}\` field [${JSON.stringify(C)}].  Please separate it out to the \`to.${b}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(g){return g.filter((f,b)=>b===0||f.route.path&&f.route.path.length>0)}function getResolveToMatches(g){let f=getPathContributingMatches(g);return f.map((b,C)=>C===f.length-1?b.pathname:b.pathnameBase)}function resolveTo(g,f,b,C=!1){let D;typeof g=="string"?D=parsePath(g):(D={...g},invariant(!D.pathname||!D.pathname.includes("?"),getInvalidPathError("?","pathname","search",D)),invariant(!D.pathname||!D.pathname.includes("#"),getInvalidPathError("#","pathname","hash",D)),invariant(!D.search||!D.search.includes("#"),getInvalidPathError("#","search","hash",D)));let O=g===""||D.pathname==="",$=O?"/":D.pathname,_e;if($==null)_e=b;else{let Re=f.length-1;if(!C&&$.startsWith("..")){let Z=$.split("/");for(;Z[0]==="..";)Z.shift(),Re-=1;D.pathname=Z.join("/")}_e=Re>=0?f[Re]:"/"}let ye=resolvePath(D,_e),Fe=$&&$!=="/"&&$.endsWith("/"),ot=(O||$===".")&&b.endsWith("/");return!ye.pathname.endsWith("/")&&(Fe||ot)&&(ye.pathname+="/"),ye}var joinPaths=g=>g.join("/").replace(/\/\/+/g,"/"),normalizePathname=g=>g.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=g=>!g||g==="?"?"":g.startsWith("?")?g:"?"+g,normalizeHash=g=>!g||g==="#"?"":g.startsWith("#")?g:"#"+g;function isRouteErrorResponse(g){return g!=null&&typeof g.status=="number"&&typeof g.statusText=="string"&&typeof g.internal=="boolean"&&"data"in g}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(g,{relative:f}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:b,navigator:C}=reactExports.useContext(NavigationContext),{hash:D,pathname:O,search:$}=useResolvedPath(g,{relative:f}),_e=O;return b!=="/"&&(_e=O==="/"?b:joinPaths([b,O])),C.createHref({pathname:_e,search:$,hash:D})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(g){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(g)}function useNavigate(){let{isDataRoute:g}=reactExports.useContext(RouteContext);return g?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let g=reactExports.useContext(DataRouterContext),{basename:f,navigator:b}=reactExports.useContext(NavigationContext),{matches:C}=reactExports.useContext(RouteContext),{pathname:D}=useLocation(),O=JSON.stringify(getResolveToMatches(C)),$=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{$.current=!0}),reactExports.useCallback((ye,Fe={})=>{if(warning($.current,navigateEffectWarning),!$.current)return;if(typeof ye=="number"){b.go(ye);return}let ot=resolveTo(ye,JSON.parse(O),D,Fe.relative==="path");g==null&&f!=="/"&&(ot.pathname=ot.pathname==="/"?f:joinPaths([f,ot.pathname])),(Fe.replace?b.replace:b.push)(ot,Fe.state,Fe)},[f,b,O,D,g])}reactExports.createContext(null);function useParams(){let{matches:g}=reactExports.useContext(RouteContext),f=g[g.length-1];return f?f.params:{}}function useResolvedPath(g,{relative:f}={}){let{matches:b}=reactExports.useContext(RouteContext),{pathname:C}=useLocation(),D=JSON.stringify(getResolveToMatches(b));return reactExports.useMemo(()=>resolveTo(g,JSON.parse(D),C,f==="path"),[g,D,C,f])}function useRoutes(g,f){return useRoutesImpl(g,f)}function useRoutesImpl(g,f,b,C,D){var Ne;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:O}=reactExports.useContext(NavigationContext),{matches:$}=reactExports.useContext(RouteContext),_e=$[$.length-1],ye=_e?_e.params:{},Fe=_e?_e.pathname:"/",ot=_e?_e.pathnameBase:"/",Re=_e&&_e.route;{let tt=Re&&Re.path||"";warningOnce(Fe,!Re||tt.endsWith("*")||tt.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${Fe}" (under <Route path="${tt}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${tt}"> to <Route path="${tt==="/"?"*":`${tt}/*`}">.`)}let Z=useLocation(),I;if(f){let tt=typeof f=="string"?parsePath(f):f;invariant(ot==="/"||((Ne=tt.pathname)==null?void 0:Ne.startsWith(ot)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${ot}" but pathname "${tt.pathname}" was given in the \`location\` prop.`),I=tt}else I=Z;let P=I.pathname||"/",Pe=P;if(ot!=="/"){let tt=ot.replace(/^\//,"").split("/");Pe="/"+P.replace(/^\//,"").split("/").slice(tt.length).join("/")}let ke=matchRoutes(g,{pathname:Pe});warning(Re||ke!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),warning(ke==null||ke[ke.length-1].route.element!==void 0||ke[ke.length-1].route.Component!==void 0||ke[ke.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ce=_renderMatches(ke&&ke.map(tt=>Object.assign({},tt,{params:Object.assign({},ye,tt.params),pathname:joinPaths([ot,O.encodeLocation?O.encodeLocation(tt.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:tt.pathname]),pathnameBase:tt.pathnameBase==="/"?ot:joinPaths([ot,O.encodeLocation?O.encodeLocation(tt.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:tt.pathnameBase])})),$,b,C,D);return f&&ce?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},ce):ce}function DefaultErrorComponent(){let g=useRouteError(),f=isRouteErrorResponse(g)?`${g.status} ${g.statusText}`:g instanceof Error?g.message:JSON.stringify(g),b=g instanceof Error?g.stack:null,C="rgba(200,200,200, 0.5)",D={padding:"0.5rem",backgroundColor:C},O={padding:"2px 4px",backgroundColor:C},$=null;return console.error("Error handled by React Router default ErrorBoundary:",g),$=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:O},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:O},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},f),b?reactExports.createElement("pre",{style:D},b):null,$)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,f){return f.location!==g.location||f.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:f.error,location:f.location,revalidation:g.revalidation||f.revalidation}}componentDidCatch(g,f){this.props.onError?this.props.onError(g,f):console.error("React Router caught the following error during render",g)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:g,match:f,children:b}){let C=reactExports.useContext(DataRouterContext);return C&&C.static&&C.staticContext&&(f.route.errorElement||f.route.ErrorBoundary)&&(C.staticContext._deepestRenderedBoundaryId=f.route.id),reactExports.createElement(RouteContext.Provider,{value:g},b)}function _renderMatches(g,f=[],b=null,C=null,D=null){if(g==null){if(!b)return null;if(b.errors)g=b.matches;else if(f.length===0&&!b.initialized&&b.matches.length>0)g=b.matches;else return null}let O=g,$=b==null?void 0:b.errors;if($!=null){let ot=O.findIndex(Re=>Re.route.id&&($==null?void 0:$[Re.route.id])!==void 0);invariant(ot>=0,`Could not find a matching route for errors on route IDs: ${Object.keys($).join(",")}`),O=O.slice(0,Math.min(O.length,ot+1))}let _e=!1,ye=-1;if(b)for(let ot=0;ot<O.length;ot++){let Re=O[ot];if((Re.route.HydrateFallback||Re.route.hydrateFallbackElement)&&(ye=ot),Re.route.id){let{loaderData:Z,errors:I}=b,P=Re.route.loader&&!Z.hasOwnProperty(Re.route.id)&&(!I||I[Re.route.id]===void 0);if(Re.route.lazy||P){_e=!0,ye>=0?O=O.slice(0,ye+1):O=[O[0]];break}}}let Fe=b&&C?(ot,Re)=>{var Z,I;C(ot,{location:b.location,params:((I=(Z=b.matches)==null?void 0:Z[0])==null?void 0:I.params)??{},errorInfo:Re})}:void 0;return O.reduceRight((ot,Re,Z)=>{let I,P=!1,Pe=null,ke=null;b&&(I=$&&Re.route.id?$[Re.route.id]:void 0,Pe=Re.route.errorElement||defaultErrorElement,_e&&(ye<0&&Z===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),P=!0,ke=null):ye===Z&&(P=!0,ke=Re.route.hydrateFallbackElement||null)));let ce=f.concat(O.slice(0,Z+1)),Ne=()=>{let tt;return I?tt=Pe:P?tt=ke:Re.route.Component?tt=reactExports.createElement(Re.route.Component,null):Re.route.element?tt=Re.route.element:tt=ot,reactExports.createElement(RenderedRoute,{match:Re,routeContext:{outlet:ot,matches:ce,isDataRoute:b!=null},children:tt})};return b&&(Re.route.ErrorBoundary||Re.route.errorElement||Z===0)?reactExports.createElement(RenderErrorBoundary,{location:b.location,revalidation:b.revalidation,component:Pe,error:I,children:Ne(),routeContext:{outlet:null,matches:ce,isDataRoute:!0},onError:Fe}):Ne()},null)}function getDataRouterConsoleError(g){return`${g} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(g){let f=reactExports.useContext(DataRouterContext);return invariant(f,getDataRouterConsoleError(g)),f}function useDataRouterState(g){let f=reactExports.useContext(DataRouterStateContext);return invariant(f,getDataRouterConsoleError(g)),f}function useRouteContext(g){let f=reactExports.useContext(RouteContext);return invariant(f,getDataRouterConsoleError(g)),f}function useCurrentRouteId(g){let f=useRouteContext(g),b=f.matches[f.matches.length-1];return invariant(b.route.id,`${g} can only be used on routes that contain a unique "id"`),b.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var C;let g=reactExports.useContext(RouteErrorContext),f=useDataRouterState("useRouteError"),b=useCurrentRouteId("useRouteError");return g!==void 0?g:(C=f.errors)==null?void 0:C[b]}function useNavigateStable(){let{router:g}=useDataRouterContext("useNavigate"),f=useCurrentRouteId("useNavigate"),b=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>{b.current=!0}),reactExports.useCallback(async(D,O={})=>{warning(b.current,navigateEffectWarning),b.current&&(typeof D=="number"?g.navigate(D):await g.navigate(D,{fromRouteId:f,...O}))},[g,f])}var alreadyWarned={};function warningOnce(g,f,b){!f&&!alreadyWarned[g]&&(alreadyWarned[g]=!0,warning(!1,b))}reactExports.memo(DataRoutes);function DataRoutes({routes:g,future:f,state:b,unstable_onError:C}){return useRoutesImpl(g,void 0,b,C,f)}function Navigate({to:g,replace:f,state:b,relative:C}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:D}=reactExports.useContext(NavigationContext);warning(!D,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:O}=reactExports.useContext(RouteContext),{pathname:$}=useLocation(),_e=useNavigate(),ye=resolveTo(g,getResolveToMatches(O),$,C==="path"),Fe=JSON.stringify(ye);return reactExports.useEffect(()=>{_e(JSON.parse(Fe),{replace:f,state:b,relative:C})},[_e,Fe,C,f,b]),null}function Route(g){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:g="/",children:f=null,location:b,navigationType:C="POP",navigator:D,static:O=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let $=g.replace(/^\/*/,"/"),_e=reactExports.useMemo(()=>({basename:$,navigator:D,static:O,future:{}}),[$,D,O]);typeof b=="string"&&(b=parsePath(b));let{pathname:ye="/",search:Fe="",hash:ot="",state:Re=null,key:Z="default"}=b,I=reactExports.useMemo(()=>{let P=stripBasename(ye,$);return P==null?null:{location:{pathname:P,search:Fe,hash:ot,state:Re,key:Z},navigationType:C}},[$,ye,Fe,ot,Re,Z,C]);return warning(I!=null,`<Router basename="${$}"> is not able to match the URL "${ye}${Fe}${ot}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:reactExports.createElement(NavigationContext.Provider,{value:_e},reactExports.createElement(LocationContext.Provider,{children:f,value:I}))}function Routes({children:g,location:f}){return useRoutes(createRoutesFromChildren(g),f)}function createRoutesFromChildren(g,f=[]){let b=[];return reactExports.Children.forEach(g,(C,D)=>{if(!reactExports.isValidElement(C))return;let O=[...f,D];if(C.type===reactExports.Fragment){b.push.apply(b,createRoutesFromChildren(C.props.children,O));return}invariant(C.type===Route,`[${typeof C.type=="string"?C.type:C.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!C.props.index||!C.props.children,"An index route cannot have child routes.");let $={id:C.props.id||O.join("-"),caseSensitive:C.props.caseSensitive,element:C.props.element,Component:C.props.Component,index:C.props.index,path:C.props.path,middleware:C.props.middleware,loader:C.props.loader,action:C.props.action,hydrateFallbackElement:C.props.hydrateFallbackElement,HydrateFallback:C.props.HydrateFallback,errorElement:C.props.errorElement,ErrorBoundary:C.props.ErrorBoundary,hasErrorBoundary:C.props.hasErrorBoundary===!0||C.props.ErrorBoundary!=null||C.props.errorElement!=null,shouldRevalidate:C.props.shouldRevalidate,handle:C.props.handle,lazy:C.props.lazy};C.props.children&&($.children=createRoutesFromChildren(C.props.children,O)),b.push($)}),b}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(g){return g!=null&&typeof g.tagName=="string"}function isButtonElement(g){return isHtmlElement(g)&&g.tagName.toLowerCase()==="button"}function isFormElement(g){return isHtmlElement(g)&&g.tagName.toLowerCase()==="form"}function isInputElement(g){return isHtmlElement(g)&&g.tagName.toLowerCase()==="input"}function isModifiedEvent(g){return!!(g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)}function shouldProcessLinkClick(g,f){return g.button===0&&(!f||f==="_self")&&!isModifiedEvent(g)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(g){return g!=null&&!supportedFormEncTypes.has(g)?(warning(!1,`"${g}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):g}function getFormSubmissionInfo(g,f){let b,C,D,O,$;if(isFormElement(g)){let _e=g.getAttribute("action");C=_e?stripBasename(_e,f):null,b=g.getAttribute("method")||defaultMethod,D=getFormEncType(g.getAttribute("enctype"))||defaultEncType,O=new FormData(g)}else if(isButtonElement(g)||isInputElement(g)&&(g.type==="submit"||g.type==="image")){let _e=g.form;if(_e==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let ye=g.getAttribute("formaction")||_e.getAttribute("action");if(C=ye?stripBasename(ye,f):null,b=g.getAttribute("formmethod")||_e.getAttribute("method")||defaultMethod,D=getFormEncType(g.getAttribute("formenctype"))||getFormEncType(_e.getAttribute("enctype"))||defaultEncType,O=new FormData(_e,g),!isFormDataSubmitterSupported()){let{name:Fe,type:ot,value:Re}=g;if(ot==="image"){let Z=Fe?`${Fe}.`:"";O.append(`${Z}x`,"0"),O.append(`${Z}y`,"0")}else Fe&&O.append(Fe,Re)}}else{if(isHtmlElement(g))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');b=defaultMethod,C=null,D=defaultEncType,$=g}return O&&D==="text/plain"&&($=O,O=void 0),{action:C,method:b.toLowerCase(),encType:D,formData:O,body:$}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(g,f){if(g===!1||g===null||typeof g>"u")throw new Error(f)}function singleFetchUrl(g,f,b){let C=typeof g=="string"?new URL(g,typeof window>"u"?"server://singlefetch/":window.location.origin):g;return C.pathname==="/"?C.pathname=`_root.${b}`:f&&stripBasename(C.pathname,f)==="/"?C.pathname=`${f.replace(/\/$/,"")}/_root.${b}`:C.pathname=`${C.pathname.replace(/\/$/,"")}.${b}`,C}async function loadRouteModule(g,f){if(g.id in f)return f[g.id];try{let b=await import(g.module);return f[g.id]=b,b}catch(b){return console.error(`Error loading route module \`${g.module}\`, reloading page...`),console.error(b),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(g){return g==null?!1:g.href==null?g.rel==="preload"&&typeof g.imageSrcSet=="string"&&typeof g.imageSizes=="string":typeof g.rel=="string"&&typeof g.href=="string"}async function getKeyedPrefetchLinks(g,f,b){let C=await Promise.all(g.map(async D=>{let O=f.routes[D.route.id];if(O){let $=await loadRouteModule(O,b);return $.links?$.links():[]}return[]}));return dedupeLinkDescriptors(C.flat(1).filter(isHtmlLinkDescriptor).filter(D=>D.rel==="stylesheet"||D.rel==="preload").map(D=>D.rel==="stylesheet"?{...D,rel:"prefetch",as:"style"}:{...D,rel:"prefetch"}))}function getNewMatchesForLinks(g,f,b,C,D,O){let $=(ye,Fe)=>b[Fe]?ye.route.id!==b[Fe].route.id:!0,_e=(ye,Fe)=>{var ot;return b[Fe].pathname!==ye.pathname||((ot=b[Fe].route.path)==null?void 0:ot.endsWith("*"))&&b[Fe].params["*"]!==ye.params["*"]};return O==="assets"?f.filter((ye,Fe)=>$(ye,Fe)||_e(ye,Fe)):O==="data"?f.filter((ye,Fe)=>{var Re;let ot=C.routes[ye.route.id];if(!ot||!ot.hasLoader)return!1;if($(ye,Fe)||_e(ye,Fe))return!0;if(ye.route.shouldRevalidate){let Z=ye.route.shouldRevalidate({currentUrl:new URL(D.pathname+D.search+D.hash,window.origin),currentParams:((Re=b[0])==null?void 0:Re.params)||{},nextUrl:new URL(g,window.origin),nextParams:ye.params,defaultShouldRevalidate:!0});if(typeof Z=="boolean")return Z}return!0}):[]}function getModuleLinkHrefs(g,f,{includeHydrateFallback:b}={}){return dedupeHrefs(g.map(C=>{let D=f.routes[C.route.id];if(!D)return[];let O=[D.module];return D.clientActionModule&&(O=O.concat(D.clientActionModule)),D.clientLoaderModule&&(O=O.concat(D.clientLoaderModule)),b&&D.hydrateFallbackModule&&(O=O.concat(D.hydrateFallbackModule)),D.imports&&(O=O.concat(D.imports)),O}).flat(1))}function dedupeHrefs(g){return[...new Set(g)]}function sortKeys(g){let f={},b=Object.keys(g).sort();for(let C of b)f[C]=g[C];return f}function dedupeLinkDescriptors(g,f){let b=new Set;return new Set(f),g.reduce((C,D)=>{let O=JSON.stringify(sortKeys(D));return b.has(O)||(b.add(O),C.push({key:O,link:D})),C},[])}function useDataRouterContext2(){let g=reactExports.useContext(DataRouterContext);return invariant2(g,"You must render this element inside a <DataRouterContext.Provider> element"),g}function useDataRouterStateContext(){let g=reactExports.useContext(DataRouterStateContext);return invariant2(g,"You must render this element inside a <DataRouterStateContext.Provider> element"),g}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let g=reactExports.useContext(FrameworkContext);return invariant2(g,"You must render this element inside a <HydratedRouter> element"),g}function usePrefetchBehavior(g,f){let b=reactExports.useContext(FrameworkContext),[C,D]=reactExports.useState(!1),[O,$]=reactExports.useState(!1),{onFocus:_e,onBlur:ye,onMouseEnter:Fe,onMouseLeave:ot,onTouchStart:Re}=f,Z=reactExports.useRef(null);reactExports.useEffect(()=>{if(g==="render"&&$(!0),g==="viewport"){let Pe=ce=>{ce.forEach(Ne=>{$(Ne.isIntersecting)})},ke=new IntersectionObserver(Pe,{threshold:.5});return Z.current&&ke.observe(Z.current),()=>{ke.disconnect()}}},[g]),reactExports.useEffect(()=>{if(C){let Pe=setTimeout(()=>{$(!0)},100);return()=>{clearTimeout(Pe)}}},[C]);let I=()=>{D(!0)},P=()=>{D(!1),$(!1)};return b?g!=="intent"?[O,Z,{}]:[O,Z,{onFocus:composeEventHandlers(_e,I),onBlur:composeEventHandlers(ye,P),onMouseEnter:composeEventHandlers(Fe,I),onMouseLeave:composeEventHandlers(ot,P),onTouchStart:composeEventHandlers(Re,I)}]:[!1,Z,{}]}function composeEventHandlers(g,f){return b=>{g&&g(b),b.defaultPrevented||f(b)}}function PrefetchPageLinks({page:g,...f}){let{router:b}=useDataRouterContext2(),C=reactExports.useMemo(()=>matchRoutes(b.routes,g,b.basename),[b.routes,g,b.basename]);return C?reactExports.createElement(PrefetchPageLinksImpl,{page:g,matches:C,...f}):null}function useKeyedPrefetchLinks(g){let{manifest:f,routeModules:b}=useFrameworkContext(),[C,D]=reactExports.useState([]);return reactExports.useEffect(()=>{let O=!1;return getKeyedPrefetchLinks(g,f,b).then($=>{O||D($)}),()=>{O=!0}},[g,f,b]),C}function PrefetchPageLinksImpl({page:g,matches:f,...b}){let C=useLocation(),{manifest:D,routeModules:O}=useFrameworkContext(),{basename:$}=useDataRouterContext2(),{loaderData:_e,matches:ye}=useDataRouterStateContext(),Fe=reactExports.useMemo(()=>getNewMatchesForLinks(g,f,ye,D,C,"data"),[g,f,ye,D,C]),ot=reactExports.useMemo(()=>getNewMatchesForLinks(g,f,ye,D,C,"assets"),[g,f,ye,D,C]),Re=reactExports.useMemo(()=>{if(g===C.pathname+C.search+C.hash)return[];let P=new Set,Pe=!1;if(f.forEach(ce=>{var tt;let Ne=D.routes[ce.route.id];!Ne||!Ne.hasLoader||(!Fe.some(Qe=>Qe.route.id===ce.route.id)&&ce.route.id in _e&&((tt=O[ce.route.id])!=null&&tt.shouldRevalidate)||Ne.hasClientLoader?Pe=!0:P.add(ce.route.id))}),P.size===0)return[];let ke=singleFetchUrl(g,$,"data");return Pe&&P.size>0&&ke.searchParams.set("_routes",f.filter(ce=>P.has(ce.route.id)).map(ce=>ce.route.id).join(",")),[ke.pathname+ke.search]},[$,_e,C,D,Fe,f,g,O]),Z=reactExports.useMemo(()=>getModuleLinkHrefs(ot,D),[ot,D]),I=useKeyedPrefetchLinks(ot);return reactExports.createElement(reactExports.Fragment,null,Re.map(P=>reactExports.createElement("link",{key:P,rel:"prefetch",as:"fetch",href:P,...b})),Z.map(P=>reactExports.createElement("link",{key:P,rel:"modulepreload",href:P,...b})),I.map(({key:P,link:Pe})=>reactExports.createElement("link",{key:P,nonce:b.nonce,...Pe})))}function mergeRefs(...g){return f=>{g.forEach(b=>{typeof b=="function"?b(f):b!=null&&(b.current=f)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.9.6")}catch{}function HashRouter({basename:g,children:f,window:b}){let C=reactExports.useRef();C.current==null&&(C.current=createHashHistory({window:b,v5Compat:!0}));let D=C.current,[O,$]=reactExports.useState({action:D.action,location:D.location}),_e=reactExports.useCallback(ye=>{reactExports.startTransition(()=>$(ye))},[$]);return reactExports.useLayoutEffect(()=>D.listen(_e),[D,_e]),reactExports.createElement(Router,{basename:g,children:f,location:O.location,navigationType:O.action,navigator:D})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:f,discover:b="render",prefetch:C="none",relative:D,reloadDocument:O,replace:$,state:_e,target:ye,to:Fe,preventScrollReset:ot,viewTransition:Re,...Z},I){let{basename:P}=reactExports.useContext(NavigationContext),Pe=typeof Fe=="string"&&ABSOLUTE_URL_REGEX2.test(Fe),ke,ce=!1;if(typeof Fe=="string"&&Pe&&(ke=Fe,isBrowser))try{let re=new URL(window.location.href),K=Fe.startsWith("//")?new URL(re.protocol+Fe):new URL(Fe),M=stripBasename(K.pathname,P);K.origin===re.origin&&M!=null?Fe=M+K.search+K.hash:ce=!0}catch{warning(!1,`<Link to="${Fe}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Ne=useHref(Fe,{relative:D}),[tt,Qe,ne]=usePrefetchBehavior(C,Z),oe=useLinkClickHandler(Fe,{replace:$,state:_e,target:ye,preventScrollReset:ot,relative:D,viewTransition:Re});function fe(re){f&&f(re),re.defaultPrevented||oe(re)}let Y=reactExports.createElement("a",{...Z,...ne,href:ke||Ne,onClick:ce||O?f:fe,ref:mergeRefs(I,Qe),target:ye,"data-discover":!Pe&&b==="render"?"true":void 0});return tt&&!Pe?reactExports.createElement(reactExports.Fragment,null,Y,reactExports.createElement(PrefetchPageLinks,{page:Ne})):Y});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":f="page",caseSensitive:b=!1,className:C="",end:D=!1,style:O,to:$,viewTransition:_e,children:ye,...Fe},ot){let Re=useResolvedPath($,{relative:Fe.relative}),Z=useLocation(),I=reactExports.useContext(DataRouterStateContext),{navigator:P,basename:Pe}=reactExports.useContext(NavigationContext),ke=I!=null&&useViewTransitionState(Re)&&_e===!0,ce=P.encodeLocation?P.encodeLocation(Re).pathname:Re.pathname,Ne=Z.pathname,tt=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;b||(Ne=Ne.toLowerCase(),tt=tt?tt.toLowerCase():null,ce=ce.toLowerCase()),tt&&Pe&&(tt=stripBasename(tt,Pe)||tt);const Qe=ce!=="/"&&ce.endsWith("/")?ce.length-1:ce.length;let ne=Ne===ce||!D&&Ne.startsWith(ce)&&Ne.charAt(Qe)==="/",oe=tt!=null&&(tt===ce||!D&&tt.startsWith(ce)&&tt.charAt(ce.length)==="/"),fe={isActive:ne,isPending:oe,isTransitioning:ke},Y=ne?f:void 0,re;typeof C=="function"?re=C(fe):re=[C,ne?"active":null,oe?"pending":null,ke?"transitioning":null].filter(Boolean).join(" ");let K=typeof O=="function"?O(fe):O;return reactExports.createElement(Link,{...Fe,"aria-current":Y,className:re,ref:ot,style:K,to:$,viewTransition:_e},typeof ye=="function"?ye(fe):ye)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:g="render",fetcherKey:f,navigate:b,reloadDocument:C,replace:D,state:O,method:$=defaultMethod,action:_e,onSubmit:ye,relative:Fe,preventScrollReset:ot,viewTransition:Re,...Z},I)=>{let P=useSubmit(),Pe=useFormAction(_e,{relative:Fe}),ke=$.toLowerCase()==="get"?"get":"post",ce=typeof _e=="string"&&ABSOLUTE_URL_REGEX2.test(_e),Ne=tt=>{if(ye&&ye(tt),tt.defaultPrevented)return;tt.preventDefault();let Qe=tt.nativeEvent.submitter,ne=(Qe==null?void 0:Qe.getAttribute("formmethod"))||$;P(Qe||tt.currentTarget,{fetcherKey:f,method:ne,navigate:b,replace:D,state:O,relative:Fe,preventScrollReset:ot,viewTransition:Re})};return reactExports.createElement("form",{ref:I,method:ke,action:Pe,onSubmit:C?ye:Ne,...Z,"data-discover":!ce&&g==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(g){return`${g} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(g){let f=reactExports.useContext(DataRouterContext);return invariant(f,getDataRouterConsoleError2(g)),f}function useLinkClickHandler(g,{target:f,replace:b,state:C,preventScrollReset:D,relative:O,viewTransition:$}={}){let _e=useNavigate(),ye=useLocation(),Fe=useResolvedPath(g,{relative:O});return reactExports.useCallback(ot=>{if(shouldProcessLinkClick(ot,f)){ot.preventDefault();let Re=b!==void 0?b:createPath(ye)===createPath(Fe);_e(g,{replace:Re,state:C,preventScrollReset:D,relative:O,viewTransition:$})}},[ye,_e,Fe,b,C,f,g,D,O,$])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:g}=useDataRouterContext3("useSubmit"),{basename:f}=reactExports.useContext(NavigationContext),b=useRouteId();return reactExports.useCallback(async(C,D={})=>{let{action:O,method:$,encType:_e,formData:ye,body:Fe}=getFormSubmissionInfo(C,f);if(D.navigate===!1){let ot=D.fetcherKey||getUniqueFetcherId();await g.fetch(ot,b,D.action||O,{preventScrollReset:D.preventScrollReset,formData:ye,body:Fe,formMethod:D.method||$,formEncType:D.encType||_e,flushSync:D.flushSync})}else await g.navigate(D.action||O,{preventScrollReset:D.preventScrollReset,formData:ye,body:Fe,formMethod:D.method||$,formEncType:D.encType||_e,replace:D.replace,state:D.state,fromRouteId:b,flushSync:D.flushSync,viewTransition:D.viewTransition})},[g,f,b])}function useFormAction(g,{relative:f}={}){let{basename:b}=reactExports.useContext(NavigationContext),C=reactExports.useContext(RouteContext);invariant(C,"useFormAction must be used inside a RouteContext");let[D]=C.matches.slice(-1),O={...useResolvedPath(g||".",{relative:f})},$=useLocation();if(g==null){O.search=$.search;let _e=new URLSearchParams(O.search),ye=_e.getAll("index");if(ye.some(ot=>ot==="")){_e.delete("index"),ye.filter(Re=>Re).forEach(Re=>_e.append("index",Re));let ot=_e.toString();O.search=ot?`?${ot}`:""}}return(!g||g===".")&&D.route.index&&(O.search=O.search?O.search.replace(/^\?/,"?index&"):"?index"),b!=="/"&&(O.pathname=O.pathname==="/"?b:joinPaths([b,O.pathname])),createPath(O)}function useViewTransitionState(g,{relative:f}={}){let b=reactExports.useContext(ViewTransitionContext);invariant(b!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:C}=useDataRouterContext3("useViewTransitionState"),D=useResolvedPath(g,{relative:f});if(!b.isTransitioning)return!1;let O=stripBasename(b.currentLocation.pathname,C)||b.currentLocation.pathname,$=stripBasename(b.nextLocation.pathname,C)||b.nextLocation.pathname;return matchPath(D.pathname,$)!=null||matchPath(D.pathname,O)!=null}const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(g){const f=[];let b=0;for(let C=0;C<g.length;C++){let D=g.charCodeAt(C);D<128?f[b++]=D:D<2048?(f[b++]=D>>6|192,f[b++]=D&63|128):(D&64512)===55296&&C+1<g.length&&(g.charCodeAt(C+1)&64512)===56320?(D=65536+((D&1023)<<10)+(g.charCodeAt(++C)&1023),f[b++]=D>>18|240,f[b++]=D>>12&63|128,f[b++]=D>>6&63|128,f[b++]=D&63|128):(f[b++]=D>>12|224,f[b++]=D>>6&63|128,f[b++]=D&63|128)}return f},byteArrayToString=function(g){const f=[];let b=0,C=0;for(;b<g.length;){const D=g[b++];if(D<128)f[C++]=String.fromCharCode(D);else if(D>191&&D<224){const O=g[b++];f[C++]=String.fromCharCode((D&31)<<6|O&63)}else if(D>239&&D<365){const O=g[b++],$=g[b++],_e=g[b++],ye=((D&7)<<18|(O&63)<<12|($&63)<<6|_e&63)-65536;f[C++]=String.fromCharCode(55296+(ye>>10)),f[C++]=String.fromCharCode(56320+(ye&1023))}else{const O=g[b++],$=g[b++];f[C++]=String.fromCharCode((D&15)<<12|(O&63)<<6|$&63)}}return f.join("")},base64$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(g,f){if(!Array.isArray(g))throw Error("encodeByteArray takes an array as a parameter");this.init_();const b=f?this.byteToCharMapWebSafe_:this.byteToCharMap_,C=[];for(let D=0;D<g.length;D+=3){const O=g[D],$=D+1<g.length,_e=$?g[D+1]:0,ye=D+2<g.length,Fe=ye?g[D+2]:0,ot=O>>2,Re=(O&3)<<4|_e>>4;let Z=(_e&15)<<2|Fe>>6,I=Fe&63;ye||(I=64,$||(Z=64)),C.push(b[ot],b[Re],b[Z],b[I])}return C.join("")},encodeString(g,f){return this.HAS_NATIVE_SUPPORT&&!f?btoa(g):this.encodeByteArray(stringToByteArray$1(g),f)},decodeString(g,f){return this.HAS_NATIVE_SUPPORT&&!f?atob(g):byteArrayToString(this.decodeStringToByteArray(g,f))},decodeStringToByteArray(g,f){this.init_();const b=f?this.charToByteMapWebSafe_:this.charToByteMap_,C=[];for(let D=0;D<g.length;){const O=b[g.charAt(D++)],_e=D<g.length?b[g.charAt(D)]:0;++D;const Fe=D<g.length?b[g.charAt(D)]:64;++D;const Re=D<g.length?b[g.charAt(D)]:64;if(++D,O==null||_e==null||Fe==null||Re==null)throw new DecodeBase64StringError;const Z=O<<2|_e>>4;if(C.push(Z),Fe!==64){const I=_e<<4&240|Fe>>2;if(C.push(I),Re!==64){const P=Fe<<6&192|Re;C.push(P)}}}return C},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let g=0;g<this.ENCODED_VALS.length;g++)this.byteToCharMap_[g]=this.ENCODED_VALS.charAt(g),this.charToByteMap_[this.byteToCharMap_[g]]=g,this.byteToCharMapWebSafe_[g]=this.ENCODED_VALS_WEBSAFE.charAt(g),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[g]]=g,g>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(g)]=g,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(g)]=g)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(g){const f=stringToByteArray$1(g);return base64$1.encodeByteArray(f,!0)},base64urlEncodeWithoutPadding=function(g){return base64Encode(g).replace(/\./g,"")},base64Decode=function(g){try{return base64$1.decodeString(g,!0)}catch(f){console.error("base64Decode failed: ",f)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const g=define_process_env_default.__FIREBASE_DEFAULTS__;if(g)return JSON.parse(g)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let g;try{g=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const f=g&&base64Decode(g[1]);return f&&JSON.parse(f)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(g){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${g}`);return}},getDefaultEmulatorHost=g=>{var f,b;return(b=(f=getDefaults())==null?void 0:f.emulatorHosts)==null?void 0:b[g]},getDefaultAppConfig=()=>{var g;return(g=getDefaults())==null?void 0:g.config},getExperimentalSetting=g=>{var f;return(f=getDefaults())==null?void 0:f[`_${g}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((f,b)=>{this.resolve=f,this.reject=b})}wrapCallback(f){return(b,C)=>{b?this.reject(b):this.resolve(C),typeof f=="function"&&(this.promise.catch(()=>{}),f.length===1?f(b):f(b,C))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(g){try{return(g.startsWith("http://")||g.startsWith("https://")?new URL(g).hostname:g).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(g){return(await fetch(g,{credentials:"include"})).ok}const emulatorStatus={};function getEmulatorSummary(){const g={prod:[],emulator:[]};for(const f of Object.keys(emulatorStatus))emulatorStatus[f]?g.emulator.push(f):g.prod.push(f);return g}function getOrCreateEl(g){let f=document.getElementById(g),b=!1;return f||(f=document.createElement("div"),f.setAttribute("id",g),b=!0),{created:b,element:f}}let previouslyDismissed=!1;function updateEmulatorBanner(g,f){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[g]===f||emulatorStatus[g]||previouslyDismissed)return;emulatorStatus[g]=f;function b(Z){return`__firebase__banner__${Z}`}const C="__firebase__banner",O=getEmulatorSummary().prod.length>0;function $(){const Z=document.getElementById(C);Z&&Z.remove()}function _e(Z){Z.style.display="flex",Z.style.background="#7faaf0",Z.style.position="fixed",Z.style.bottom="5px",Z.style.left="5px",Z.style.padding=".5em",Z.style.borderRadius="5px",Z.style.alignItems="center"}function ye(Z,I){Z.setAttribute("width","24"),Z.setAttribute("id",I),Z.setAttribute("height","24"),Z.setAttribute("viewBox","0 0 24 24"),Z.setAttribute("fill","none"),Z.style.marginLeft="-6px"}function Fe(){const Z=document.createElement("span");return Z.style.cursor="pointer",Z.style.marginLeft="16px",Z.style.fontSize="24px",Z.innerHTML=" &times;",Z.onclick=()=>{previouslyDismissed=!0,$()},Z}function ot(Z,I){Z.setAttribute("id",I),Z.innerText="Learn more",Z.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Z.setAttribute("target","__blank"),Z.style.paddingLeft="5px",Z.style.textDecoration="underline"}function Re(){const Z=getOrCreateEl(C),I=b("text"),P=document.getElementById(I)||document.createElement("span"),Pe=b("learnmore"),ke=document.getElementById(Pe)||document.createElement("a"),ce=b("preprendIcon"),Ne=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Z.created){const tt=Z.element;_e(tt),ot(ke,Pe);const Qe=Fe();ye(Ne,ce),tt.append(Ne,P,ke,Qe),document.body.appendChild(tt)}O?(P.innerText="Preview backend disconnected.",Ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Re):Re()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const g=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof g=="object"&&g.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const g=getUA();return g.indexOf("MSIE ")>=0||g.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((g,f)=>{try{let b=!0;const C="validate-browser-context-for-indexeddb-analytics-module",D=self.indexedDB.open(C);D.onsuccess=()=>{D.result.close(),b||self.indexedDB.deleteDatabase(C),g(!0)},D.onupgradeneeded=()=>{b=!1},D.onerror=()=>{var O;f(((O=D.error)==null?void 0:O.message)||"")}}catch(b){f(b)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(f,b,C){super(b),this.code=f,this.customData=C,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(f,b,C){this.service=f,this.serviceName=b,this.errors=C}create(f,...b){const C=b[0]||{},D=`${this.service}/${f}`,O=this.errors[f],$=O?replaceTemplate(O,C):"Error",_e=`${this.serviceName}: ${$} (${D}).`;return new FirebaseError(D,_e,C)}}function replaceTemplate(g,f){return g.replace(PATTERN,(b,C)=>{const D=f[C];return D!=null?String(D):`<${C}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty(g){for(const f in g)if(Object.prototype.hasOwnProperty.call(g,f))return!1;return!0}function deepEqual(g,f){if(g===f)return!0;const b=Object.keys(g),C=Object.keys(f);for(const D of b){if(!C.includes(D))return!1;const O=g[D],$=f[D];if(isObject(O)&&isObject($)){if(!deepEqual(O,$))return!1}else if(O!==$)return!1}for(const D of C)if(!b.includes(D))return!1;return!0}function isObject(g){return g!==null&&typeof g=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(g){const f=[];for(const[b,C]of Object.entries(g))Array.isArray(C)?C.forEach(D=>{f.push(encodeURIComponent(b)+"="+encodeURIComponent(D))}):f.push(encodeURIComponent(b)+"="+encodeURIComponent(C));return f.length?"&"+f.join("&"):""}function querystringDecode(g){const f={};return g.replace(/^\?/,"").split("&").forEach(C=>{if(C){const[D,O]=C.split("=");f[decodeURIComponent(D)]=decodeURIComponent(O)}}),f}function extractQuerystring(g){const f=g.indexOf("?");if(!f)return"";const b=g.indexOf("#",f);return g.substring(f,b>0?b:void 0)}function createSubscribe(g,f){const b=new ObserverProxy(g,f);return b.subscribe.bind(b)}class ObserverProxy{constructor(f,b){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=b,this.task.then(()=>{f(this)}).catch(C=>{this.error(C)})}next(f){this.forEachObserver(b=>{b.next(f)})}error(f){this.forEachObserver(b=>{b.error(f)}),this.close(f)}complete(){this.forEachObserver(f=>{f.complete()}),this.close()}subscribe(f,b,C){let D;if(f===void 0&&b===void 0&&C===void 0)throw new Error("Missing Observer.");implementsAnyMethods(f,["next","error","complete"])?D=f:D={next:f,error:b,complete:C},D.next===void 0&&(D.next=noop),D.error===void 0&&(D.error=noop),D.complete===void 0&&(D.complete=noop);const O=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?D.error(this.finalError):D.complete()}catch{}}),this.observers.push(D),O}unsubscribeOne(f){this.observers===void 0||this.observers[f]===void 0||(delete this.observers[f],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(f){if(!this.finalized)for(let b=0;b<this.observers.length;b++)this.sendOne(b,f)}sendOne(f,b){this.task.then(()=>{if(this.observers!==void 0&&this.observers[f]!==void 0)try{b(this.observers[f])}catch(C){typeof console<"u"&&console.error&&console.error(C)}})}close(f){this.finalized||(this.finalized=!0,f!==void 0&&(this.finalError=f),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(g,f){if(typeof g!="object"||g===null)return!1;for(const b of f)if(b in g&&typeof g[b]=="function")return!0;return!1}function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(g){return g&&g._delegate?g._delegate:g}class Component{constructor(f,b,C){this.name=f,this.instanceFactory=b,this.type=C,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(f){return this.instantiationMode=f,this}setMultipleInstances(f){return this.multipleInstances=f,this}setServiceProps(f){return this.serviceProps=f,this}setInstanceCreatedCallback(f){return this.onInstanceCreated=f,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(f,b){this.name=f,this.container=b,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(f){const b=this.normalizeInstanceIdentifier(f);if(!this.instancesDeferred.has(b)){const C=new Deferred;if(this.instancesDeferred.set(b,C),this.isInitialized(b)||this.shouldAutoInitialize())try{const D=this.getOrInitializeService({instanceIdentifier:b});D&&C.resolve(D)}catch{}}return this.instancesDeferred.get(b).promise}getImmediate(f){const b=this.normalizeInstanceIdentifier(f==null?void 0:f.identifier),C=(f==null?void 0:f.optional)??!1;if(this.isInitialized(b)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:b})}catch(D){if(C)return null;throw D}else{if(C)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(f){if(f.name!==this.name)throw Error(`Mismatching Component ${f.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=f,!!this.shouldAutoInitialize()){if(isComponentEager(f))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[b,C]of this.instancesDeferred.entries()){const D=this.normalizeInstanceIdentifier(b);try{const O=this.getOrInitializeService({instanceIdentifier:D});C.resolve(O)}catch{}}}}clearInstance(f=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(f),this.instancesOptions.delete(f),this.instances.delete(f)}async delete(){const f=Array.from(this.instances.values());await Promise.all([...f.filter(b=>"INTERNAL"in b).map(b=>b.INTERNAL.delete()),...f.filter(b=>"_delete"in b).map(b=>b._delete())])}isComponentSet(){return this.component!=null}isInitialized(f=DEFAULT_ENTRY_NAME$1){return this.instances.has(f)}getOptions(f=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(f)||{}}initialize(f={}){const{options:b={}}=f,C=this.normalizeInstanceIdentifier(f.instanceIdentifier);if(this.isInitialized(C))throw Error(`${this.name}(${C}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const D=this.getOrInitializeService({instanceIdentifier:C,options:b});for(const[O,$]of this.instancesDeferred.entries()){const _e=this.normalizeInstanceIdentifier(O);C===_e&&$.resolve(D)}return D}onInit(f,b){const C=this.normalizeInstanceIdentifier(b),D=this.onInitCallbacks.get(C)??new Set;D.add(f),this.onInitCallbacks.set(C,D);const O=this.instances.get(C);return O&&f(O,C),()=>{D.delete(f)}}invokeOnInitCallbacks(f,b){const C=this.onInitCallbacks.get(b);if(C)for(const D of C)try{D(f,b)}catch{}}getOrInitializeService({instanceIdentifier:f,options:b={}}){let C=this.instances.get(f);if(!C&&this.component&&(C=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(f),options:b}),this.instances.set(f,C),this.instancesOptions.set(f,b),this.invokeOnInitCallbacks(C,f),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,f,C)}catch{}return C||null}normalizeInstanceIdentifier(f=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?f:DEFAULT_ENTRY_NAME$1:f}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(g){return g===DEFAULT_ENTRY_NAME$1?void 0:g}function isComponentEager(g){return g.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(f){this.name=f,this.providers=new Map}addComponent(f){const b=this.getProvider(f.name);if(b.isComponentSet())throw new Error(`Component ${f.name} has already been registered with ${this.name}`);b.setComponent(f)}addOrOverwriteComponent(f){this.getProvider(f.name).isComponentSet()&&this.providers.delete(f.name),this.addComponent(f)}getProvider(f){if(this.providers.has(f))return this.providers.get(f);const b=new Provider(f,this);return this.providers.set(f,b),b}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(g){g[g.DEBUG=0]="DEBUG",g[g.VERBOSE=1]="VERBOSE",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(g,f,...b)=>{if(f<g.logLevel)return;const C=new Date().toISOString(),D=ConsoleMethod[f];if(D)console[D](`[${C}]  ${g.name}:`,...b);else throw new Error(`Attempted to log a message with an invalid logType (value: ${f})`)};class Logger{constructor(f){this.name=f,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(f){if(!(f in LogLevel))throw new TypeError(`Invalid value "${f}" assigned to \`logLevel\``);this._logLevel=f}setLogLevel(f){this._logLevel=typeof f=="string"?levelStringToEnum[f]:f}get logHandler(){return this._logHandler}set logHandler(f){if(typeof f!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=f}get userLogHandler(){return this._userLogHandler}set userLogHandler(f){this._userLogHandler=f}debug(...f){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...f),this._logHandler(this,LogLevel.DEBUG,...f)}log(...f){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...f),this._logHandler(this,LogLevel.VERBOSE,...f)}info(...f){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...f),this._logHandler(this,LogLevel.INFO,...f)}warn(...f){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...f),this._logHandler(this,LogLevel.WARN,...f)}error(...f){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...f),this._logHandler(this,LogLevel.ERROR,...f)}}const instanceOfAny=(g,f)=>f.some(b=>g instanceof b);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(g){const f=new Promise((b,C)=>{const D=()=>{g.removeEventListener("success",O),g.removeEventListener("error",$)},O=()=>{b(wrap(g.result)),D()},$=()=>{C(g.error),D()};g.addEventListener("success",O),g.addEventListener("error",$)});return f.then(b=>{b instanceof IDBCursor&&cursorRequestMap.set(b,g)}).catch(()=>{}),reverseTransformCache.set(f,g),f}function cacheDonePromiseForTransaction(g){if(transactionDoneMap.has(g))return;const f=new Promise((b,C)=>{const D=()=>{g.removeEventListener("complete",O),g.removeEventListener("error",$),g.removeEventListener("abort",$)},O=()=>{b(),D()},$=()=>{C(g.error||new DOMException("AbortError","AbortError")),D()};g.addEventListener("complete",O),g.addEventListener("error",$),g.addEventListener("abort",$)});transactionDoneMap.set(g,f)}let idbProxyTraps={get(g,f,b){if(g instanceof IDBTransaction){if(f==="done")return transactionDoneMap.get(g);if(f==="objectStoreNames")return g.objectStoreNames||transactionStoreNamesMap.get(g);if(f==="store")return b.objectStoreNames[1]?void 0:b.objectStore(b.objectStoreNames[0])}return wrap(g[f])},set(g,f,b){return g[f]=b,!0},has(g,f){return g instanceof IDBTransaction&&(f==="done"||f==="store")?!0:f in g}};function replaceTraps(g){idbProxyTraps=g(idbProxyTraps)}function wrapFunction(g){return g===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(f,...b){const C=g.call(unwrap(this),f,...b);return transactionStoreNamesMap.set(C,f.sort?f.sort():[f]),wrap(C)}:getCursorAdvanceMethods().includes(g)?function(...f){return g.apply(unwrap(this),f),wrap(cursorRequestMap.get(this))}:function(...f){return wrap(g.apply(unwrap(this),f))}}function transformCachableValue(g){return typeof g=="function"?wrapFunction(g):(g instanceof IDBTransaction&&cacheDonePromiseForTransaction(g),instanceOfAny(g,getIdbProxyableTypes())?new Proxy(g,idbProxyTraps):g)}function wrap(g){if(g instanceof IDBRequest)return promisifyRequest(g);if(transformCache.has(g))return transformCache.get(g);const f=transformCachableValue(g);return f!==g&&(transformCache.set(g,f),reverseTransformCache.set(f,g)),f}const unwrap=g=>reverseTransformCache.get(g);function openDB(g,f,{blocked:b,upgrade:C,blocking:D,terminated:O}={}){const $=indexedDB.open(g,f),_e=wrap($);return C&&$.addEventListener("upgradeneeded",ye=>{C(wrap($.result),ye.oldVersion,ye.newVersion,wrap($.transaction),ye)}),b&&$.addEventListener("blocked",ye=>b(ye.oldVersion,ye.newVersion,ye)),_e.then(ye=>{O&&ye.addEventListener("close",()=>O()),D&&ye.addEventListener("versionchange",Fe=>D(Fe.oldVersion,Fe.newVersion,Fe))}).catch(()=>{}),_e}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(g,f){if(!(g instanceof IDBDatabase&&!(f in g)&&typeof f=="string"))return;if(cachedMethods.get(f))return cachedMethods.get(f);const b=f.replace(/FromIndex$/,""),C=f!==b,D=writeMethods.includes(b);if(!(b in(C?IDBIndex:IDBObjectStore).prototype)||!(D||readMethods.includes(b)))return;const O=async function($,..._e){const ye=this.transaction($,D?"readwrite":"readonly");let Fe=ye.store;return C&&(Fe=Fe.index(_e.shift())),(await Promise.all([Fe[b](..._e),D&&ye.done]))[0]};return cachedMethods.set(f,O),O}replaceTraps(g=>({...g,get:(f,b,C)=>getMethod(f,b)||g.get(f,b,C),has:(f,b)=>!!getMethod(f,b)||g.has(f,b)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(f){this.container=f}getPlatformInfoString(){return this.container.getProviders().map(b=>{if(isVersionServiceProvider(b)){const C=b.getImmediate();return`${C.library}/${C.version}`}else return null}).filter(b=>b).join(" ")}}function isVersionServiceProvider(g){const f=g.getComponent();return(f==null?void 0:f.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(g,f){try{g.container.addComponent(f)}catch(b){logger.debug(`Component ${f.name} failed to register with FirebaseApp ${g.name}`,b)}}function _registerComponent(g){const f=g.name;if(_components.has(f))return logger.debug(`There were multiple attempts to register component ${f}.`),!1;_components.set(f,g);for(const b of _apps.values())_addComponent(b,g);for(const b of _serverApps.values())_addComponent(b,g);return!0}function _getProvider(g,f){const b=g.container.getProvider("heartbeat").getImmediate({optional:!0});return b&&b.triggerHeartbeat(),g.container.getProvider(f)}function _isFirebaseServerApp(g){return g==null?!1:g.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(f,b,C){this._isDeleted=!1,this._options={...f},this._config={...b},this._name=b.name,this._automaticDataCollectionEnabled=b.automaticDataCollectionEnabled,this._container=C,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(f){this.checkDestroyed(),this._automaticDataCollectionEnabled=f}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(f){this._isDeleted=f}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(g,f={}){let b=g;typeof f!="object"&&(f={name:f});const C={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...f},D=C.name;if(typeof D!="string"||!D)throw ERROR_FACTORY.create("bad-app-name",{appName:String(D)});if(b||(b=getDefaultAppConfig()),!b)throw ERROR_FACTORY.create("no-options");const O=_apps.get(D);if(O){if(deepEqual(b,O.options)&&deepEqual(C,O.config))return O;throw ERROR_FACTORY.create("duplicate-app",{appName:D})}const $=new ComponentContainer(D);for(const ye of _components.values())$.addComponent(ye);const _e=new FirebaseAppImpl(b,C,$);return _apps.set(D,_e),_e}function getApp(g=DEFAULT_ENTRY_NAME){const f=_apps.get(g);if(!f&&g===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!f)throw ERROR_FACTORY.create("no-app",{appName:g});return f}function registerVersion(g,f,b){let C=PLATFORM_LOG_STRING[g]??g;b&&(C+=`-${b}`);const D=C.match(/\s|\//),O=f.match(/\s|\//);if(D||O){const $=[`Unable to register library "${C}" with version "${f}":`];D&&$.push(`library name "${C}" contains illegal characters (whitespace or "/")`),D&&O&&$.push("and"),O&&$.push(`version name "${f}" contains illegal characters (whitespace or "/")`),logger.warn($.join(" "));return}_registerComponent(new Component(`${C}-version`,()=>({library:C,version:f}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(g,f)=>{switch(f){case 0:try{g.createObjectStore(STORE_NAME)}catch(b){console.warn(b)}}}}).catch(g=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:g.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(g){try{const b=(await getDbPromise()).transaction(STORE_NAME),C=await b.objectStore(STORE_NAME).get(computeKey(g));return await b.done,C}catch(f){if(f instanceof FirebaseError)logger.warn(f.message);else{const b=ERROR_FACTORY.create("idb-get",{originalErrorMessage:f==null?void 0:f.message});logger.warn(b.message)}}}async function writeHeartbeatsToIndexedDB(g,f){try{const C=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await C.objectStore(STORE_NAME).put(f,computeKey(g)),await C.done}catch(b){if(b instanceof FirebaseError)logger.warn(b.message);else{const C=ERROR_FACTORY.create("idb-set",{originalErrorMessage:b==null?void 0:b.message});logger.warn(C.message)}}}function computeKey(g){return`${g.name}!${g.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(f){this.container=f,this._heartbeatsCache=null;const b=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(b),this._heartbeatsCachePromise=this._storage.read().then(C=>(this._heartbeatsCache=C,C))}async triggerHeartbeat(){var f,b;try{const D=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),O=getUTCDateString();if(((f=this._heartbeatsCache)==null?void 0:f.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((b=this._heartbeatsCache)==null?void 0:b.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===O||this._heartbeatsCache.heartbeats.some($=>$.date===O))return;if(this._heartbeatsCache.heartbeats.push({date:O,agent:D}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const $=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice($,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(C){logger.warn(C)}}async getHeartbeatsHeader(){var f;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((f=this._heartbeatsCache)==null?void 0:f.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const b=getUTCDateString(),{heartbeatsToSend:C,unsentEntries:D}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),O=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:C}));return this._heartbeatsCache.lastSentHeartbeatDate=b,D.length>0?(this._heartbeatsCache.heartbeats=D,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),O}catch(b){return logger.warn(b),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(g,f=MAX_HEADER_BYTES){const b=[];let C=g.slice();for(const D of g){const O=b.find($=>$.agent===D.agent);if(O){if(O.dates.push(D.date),countBytes(b)>f){O.dates.pop();break}}else if(b.push({agent:D.agent,dates:[D.date]}),countBytes(b)>f){b.pop();break}C=C.slice(1)}return{heartbeatsToSend:b,unsentEntries:C}}class HeartbeatStorageImpl{constructor(f){this.app=f,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const b=await readHeartbeatsFromIndexedDB(this.app);return b!=null&&b.heartbeats?b:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(f){if(await this._canUseIndexedDBPromise){const C=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:f.lastSentHeartbeatDate??C.lastSentHeartbeatDate,heartbeats:f.heartbeats})}else return}async add(f){if(await this._canUseIndexedDBPromise){const C=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:f.lastSentHeartbeatDate??C.lastSentHeartbeatDate,heartbeats:[...C.heartbeats,...f.heartbeats]})}else return}}function countBytes(g){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:g})).length}function getEarliestHeartbeatIdx(g){if(g.length===0)return-1;let f=0,b=g[0].date;for(let C=1;C<g.length;C++)g[C].date<b&&(b=g[C].date,f=C);return f}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(g){_registerComponent(new Component("platform-logger",f=>new PlatformLoggerServiceImpl(f),"PRIVATE")),_registerComponent(new Component("heartbeat",f=>new HeartbeatServiceImpl(f),"PRIVATE")),registerVersion(name$q,version$1$1,g),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");var name$1="firebase",version$1="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$1,"app");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(g,...f){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${g}`,...f)}function _logError(g,...f){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${g}`,...f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(g,...f){throw createErrorInternal(g,...f)}function _createError(g,...f){return createErrorInternal(g,...f)}function _errorWithCustomMessage(g,f,b){const C={...prodErrorMap(),[f]:b};return new ErrorFactory("auth","Firebase",C).create(f,{appName:g.name})}function _serverAppCurrentUserOperationNotSupportedError(g){return _errorWithCustomMessage(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(g,...f){if(typeof g!="string"){const b=f[0],C=[...f.slice(1)];return C[0]&&(C[0].appName=g.name),g._errorFactory.create(b,...C)}return _DEFAULT_AUTH_ERROR_FACTORY.create(g,...f)}function _assert(g,f,...b){if(!g)throw createErrorInternal(f,...b)}function debugFail(g){const f="INTERNAL ASSERTION FAILED: "+g;throw _logError(f),new Error(f)}function debugAssert(g,f){g||debugFail(f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var g;return typeof self<"u"&&((g=self.location)==null?void 0:g.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var g;return typeof self<"u"&&((g=self.location)==null?void 0:g.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(f,b){this.shortDelay=f,this.longDelay=b,debugAssert(b>f,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(g,f){debugAssert(g.emulator,"Emulator should always be set here");const{url:b}=g.emulator;return f?`${b}${f.startsWith("/")?f.slice(1):f}`:b}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(f,b,C){this.fetchImpl=f,b&&(this.headersImpl=b),C&&(this.responseImpl=C)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(g,f){return g.tenantId&&!f.tenantId?{...f,tenantId:g.tenantId}:f}async function _performApiRequest(g,f,b,C,D={}){return _performFetchWithErrorHandling(g,D,async()=>{let O={},$={};C&&(f==="GET"?$=C:O={body:JSON.stringify(C)});const _e=querystring({key:g.config.apiKey,...$}).slice(1),ye=await g._getAdditionalHeaders();ye["Content-Type"]="application/json",g.languageCode&&(ye["X-Firebase-Locale"]=g.languageCode);const Fe={method:f,headers:ye,...O};return isCloudflareWorker()||(Fe.referrerPolicy="no-referrer"),g.emulatorConfig&&isCloudWorkstation(g.emulatorConfig.host)&&(Fe.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(g,g.config.apiHost,b,_e),Fe)})}async function _performFetchWithErrorHandling(g,f,b){g._canInitEmulator=!1;const C={...SERVER_ERROR_MAP,...f};try{const D=new NetworkTimeout(g),O=await Promise.race([b(),D.promise]);D.clearNetworkTimeout();const $=await O.json();if("needConfirmation"in $)throw _makeTaggedError(g,"account-exists-with-different-credential",$);if(O.ok&&!("errorMessage"in $))return $;{const _e=O.ok?$.errorMessage:$.error.message,[ye,Fe]=_e.split(" : ");if(ye==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(g,"credential-already-in-use",$);if(ye==="EMAIL_EXISTS")throw _makeTaggedError(g,"email-already-in-use",$);if(ye==="USER_DISABLED")throw _makeTaggedError(g,"user-disabled",$);const ot=C[ye]||ye.toLowerCase().replace(/[_\s]+/g,"-");if(Fe)throw _errorWithCustomMessage(g,ot,Fe);_fail(g,ot)}}catch(D){if(D instanceof FirebaseError)throw D;_fail(g,"network-request-failed",{message:String(D)})}}async function _performSignInRequest(g,f,b,C,D={}){const O=await _performApiRequest(g,f,b,C,D);return"mfaPendingCredential"in O&&_fail(g,"multi-factor-auth-required",{_serverResponse:O}),O}async function _getFinalTarget(g,f,b,C){const D=`${f}${b}?${C}`,O=g,$=O.config.emulator?_emulatorUrl(g.config,D):`${g.config.apiScheme}://${D}`;return CookieAuthProxiedEndpoints.includes(b)&&(await O._persistenceManagerAvailable,O._getPersistenceType()==="COOKIE")?O._getPersistence()._getFinalTarget($).toString():$}function _parseEnforcementState(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((b,C)=>{this.timer=setTimeout(()=>C(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(g,f,b){const C={appName:g.name};b.email&&(C.email=b.email),b.phoneNumber&&(C.phoneNumber=b.phoneNumber);const D=_createError(g,f,C);return D.customData._tokenResponse=b,D}function isEnterprise(g){return g!==void 0&&g.enterprise!==void 0}class RecaptchaConfig{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],f.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const b of this.recaptchaEnforcementState)if(b.provider&&b.provider===f)return _parseEnforcementState(b.enforcementState);return null}isProviderEnabled(f){return this.getProviderEnforcementState(f)==="ENFORCE"||this.getProviderEnforcementState(f)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(g,f){return _performApiRequest(g,"GET","/v2/recaptchaConfig",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(g,f){return _performApiRequest(g,"POST","/v1/accounts:delete",f)}async function getAccountInfo(g,f){return _performApiRequest(g,"POST","/v1/accounts:lookup",f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(g){if(g)try{const f=new Date(Number(g));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}async function getIdTokenResult(g,f=!1){const b=getModularInstance(g),C=await b.getIdToken(f),D=_parseToken(C);_assert(D&&D.exp&&D.auth_time&&D.iat,b.auth,"internal-error");const O=typeof D.firebase=="object"?D.firebase:void 0,$=O==null?void 0:O.sign_in_provider;return{claims:D,token:C,authTime:utcTimestampToDateString(secondsStringToMilliseconds(D.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(D.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(D.exp)),signInProvider:$||null,signInSecondFactor:(O==null?void 0:O.sign_in_second_factor)||null}}function secondsStringToMilliseconds(g){return Number(g)*1e3}function _parseToken(g){const[f,b,C]=g.split(".");if(f===void 0||b===void 0||C===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const D=base64Decode(b);return D?JSON.parse(D):(_logError("Failed to decode base64 JWT payload"),null)}catch(D){return _logError("Caught error parsing JWT payload as JSON",D==null?void 0:D.toString()),null}}function _tokenExpiresIn(g){const f=_parseToken(g);return _assert(f,"internal-error"),_assert(typeof f.exp<"u","internal-error"),_assert(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(g,f,b=!1){if(b)return f;try{return await f}catch(C){throw C instanceof FirebaseError&&isUserInvalidated(C)&&g.auth.currentUser===g&&await g.auth.signOut(),C}}function isUserInvalidated({code:g}){return g==="auth/user-disabled"||g==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(f){if(f){const b=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),b}else{this.errorBackoff=3e4;const C=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,C)}}schedule(f=!1){if(!this.isRunning)return;const b=this.getInterval(f);this.timerId=setTimeout(async()=>{await this.iteration()},b)}async iteration(){try{await this.user.getIdToken(!0)}catch(f){(f==null?void 0:f.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(f,b){this.createdAt=f,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(g){var Re;const f=g.auth,b=await g.getIdToken(),C=await _logoutIfInvalidated(g,getAccountInfo(f,{idToken:b}));_assert(C==null?void 0:C.users.length,f,"internal-error");const D=C.users[0];g._notifyReloadListener(D);const O=(Re=D.providerUserInfo)!=null&&Re.length?extractProviderData(D.providerUserInfo):[],$=mergeProviderData(g.providerData,O),_e=g.isAnonymous,ye=!(g.email&&D.passwordHash)&&!($!=null&&$.length),Fe=_e?ye:!1,ot={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:$,metadata:new UserMetadata(D.createdAt,D.lastLoginAt),isAnonymous:Fe};Object.assign(g,ot)}async function reload(g){const f=getModularInstance(g);await _reloadWithoutSaving(f),await f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)}function mergeProviderData(g,f){return[...g.filter(C=>!f.some(D=>D.providerId===C.providerId)),...f]}function extractProviderData(g){return g.map(({providerId:f,...b})=>({providerId:f,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(g,f){const b=await _performFetchWithErrorHandling(g,{},async()=>{const C=querystring({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:D,apiKey:O}=g.config,$=await _getFinalTarget(g,D,"/v1/token",`key=${O}`),_e=await g._getAdditionalHeaders();_e["Content-Type"]="application/x-www-form-urlencoded";const ye={method:"POST",headers:_e,body:C};return g.emulatorConfig&&isCloudWorkstation(g.emulatorConfig.host)&&(ye.credentials="include"),FetchProvider.fetch()($,ye)});return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}}async function revokeToken(g,f){return _performApiRequest(g,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){_assert(f.idToken,"internal-error"),_assert(typeof f.idToken<"u","internal-error"),_assert(typeof f.refreshToken<"u","internal-error");const b="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):_tokenExpiresIn(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,b)}updateFromIdToken(f){_assert(f.length!==0,"internal-error");const b=_tokenExpiresIn(f);this.updateTokensAndExpiration(f,null,b)}async getToken(f,b=!1){return!b&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,f,"user-token-expired"),this.refreshToken?(await this.refresh(f,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(f,b){const{accessToken:C,refreshToken:D,expiresIn:O}=await requestStsToken(f,b);this.updateTokensAndExpiration(C,D,Number(O))}updateTokensAndExpiration(f,b,C){this.refreshToken=b||null,this.accessToken=f||null,this.expirationTime=Date.now()+C*1e3}static fromJSON(f,b){const{refreshToken:C,accessToken:D,expirationTime:O}=b,$=new StsTokenManager;return C&&(_assert(typeof C=="string","internal-error",{appName:f}),$.refreshToken=C),D&&(_assert(typeof D=="string","internal-error",{appName:f}),$.accessToken=D),O&&(_assert(typeof O=="number","internal-error",{appName:f}),$.expirationTime=O),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(g,f){_assert(typeof g=="string"||typeof g>"u","internal-error",{appName:f})}class UserImpl{constructor({uid:f,auth:b,stsTokenManager:C,...D}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=b,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new UserMetadata(D.createdAt||void 0,D.lastLoginAt||void 0)}async getIdToken(f){const b=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,f));return _assert(b,this.auth,"internal-error"),this.accessToken!==b&&(this.accessToken=b,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),b}getIdTokenResult(f){return getIdTokenResult(this,f)}reload(){return reload(this)}_assign(f){this!==f&&(_assert(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(b=>({...b})),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const b=new UserImpl({...this,auth:f,stsTokenManager:this.stsTokenManager._clone()});return b.metadata._copy(this.metadata),b}_onReload(f){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(f,b=!1){let C=!1;f.idToken&&f.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(f),C=!0),b&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),C&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const f=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:f})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>({...f})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,b){const C=b.displayName??void 0,D=b.email??void 0,O=b.phoneNumber??void 0,$=b.photoURL??void 0,_e=b.tenantId??void 0,ye=b._redirectEventId??void 0,Fe=b.createdAt??void 0,ot=b.lastLoginAt??void 0,{uid:Re,emailVerified:Z,isAnonymous:I,providerData:P,stsTokenManager:Pe}=b;_assert(Re&&Pe,f,"internal-error");const ke=StsTokenManager.fromJSON(this.name,Pe);_assert(typeof Re=="string",f,"internal-error"),assertStringOrUndefined(C,f.name),assertStringOrUndefined(D,f.name),_assert(typeof Z=="boolean",f,"internal-error"),_assert(typeof I=="boolean",f,"internal-error"),assertStringOrUndefined(O,f.name),assertStringOrUndefined($,f.name),assertStringOrUndefined(_e,f.name),assertStringOrUndefined(ye,f.name),assertStringOrUndefined(Fe,f.name),assertStringOrUndefined(ot,f.name);const ce=new UserImpl({uid:Re,auth:f,email:D,emailVerified:Z,displayName:C,isAnonymous:I,photoURL:$,phoneNumber:O,tenantId:_e,stsTokenManager:ke,createdAt:Fe,lastLoginAt:ot});return P&&Array.isArray(P)&&(ce.providerData=P.map(Ne=>({...Ne}))),ye&&(ce._redirectEventId=ye),ce}static async _fromIdTokenResponse(f,b,C=!1){const D=new StsTokenManager;D.updateFromServerResponse(b);const O=new UserImpl({uid:b.localId,auth:f,stsTokenManager:D,isAnonymous:C});return await _reloadWithoutSaving(O),O}static async _fromGetAccountInfoResponse(f,b,C){const D=b.users[0];_assert(D.localId!==void 0,"internal-error");const O=D.providerUserInfo!==void 0?extractProviderData(D.providerUserInfo):[],$=!(D.email&&D.passwordHash)&&!(O!=null&&O.length),_e=new StsTokenManager;_e.updateFromIdToken(C);const ye=new UserImpl({uid:D.localId,auth:f,stsTokenManager:_e,isAnonymous:$}),Fe={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:O,metadata:new UserMetadata(D.createdAt,D.lastLoginAt),isAnonymous:!(D.email&&D.passwordHash)&&!(O!=null&&O.length)};return Object.assign(ye,Fe),ye}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(g){debugAssert(g instanceof Function,"Expected a class definition");let f=instanceCache.get(g);return f?(debugAssert(f instanceof g,"Instance stored in cache mismatched with class"),f):(f=new g,instanceCache.set(g,f),f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(f,b){this.storage[f]=b}async _get(f){const b=this.storage[f];return b===void 0?null:b}async _remove(f){delete this.storage[f]}_addListener(f,b){}_removeListener(f,b){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(g,f,b){return`firebase:${g}:${f}:${b}`}class PersistenceUserManager{constructor(f,b,C){this.persistence=f,this.auth=b,this.userKey=C;const{config:D,name:O}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,D.apiKey,O),this.fullPersistenceKey=_persistenceKeyName("persistence",D.apiKey,O),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}async getCurrentUser(){const f=await this.persistence._get(this.fullUserKey);if(!f)return null;if(typeof f=="string"){const b=await getAccountInfo(this.auth,{idToken:f}).catch(()=>{});return b?UserImpl._fromGetAccountInfoResponse(this.auth,b,f):null}return UserImpl._fromJSON(this.auth,f)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(f){if(this.persistence===f)return;const b=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=f,b)return this.setCurrentUser(b)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(f,b,C="authUser"){if(!b.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),f,C);const D=(await Promise.all(b.map(async Fe=>{if(await Fe._isAvailable())return Fe}))).filter(Fe=>Fe);let O=D[0]||_getInstance(inMemoryPersistence);const $=_persistenceKeyName(C,f.config.apiKey,f.name);let _e=null;for(const Fe of b)try{const ot=await Fe._get($);if(ot){let Re;if(typeof ot=="string"){const Z=await getAccountInfo(f,{idToken:ot}).catch(()=>{});if(!Z)break;Re=await UserImpl._fromGetAccountInfoResponse(f,Z,ot)}else Re=UserImpl._fromJSON(f,ot);Fe!==O&&(_e=Re),O=Fe;break}}catch{}const ye=D.filter(Fe=>Fe._shouldAllowMigration);return!O._shouldAllowMigration||!ye.length?new PersistenceUserManager(O,f,C):(O=ye[0],_e&&await O._set($,_e.toJSON()),await Promise.all(b.map(async Fe=>{if(Fe!==O)try{await Fe._remove($)}catch{}})),new PersistenceUserManager(O,f,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(g){const f=g.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(_isIEMobile(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(_isFirefox(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(_isBlackBerry(f))return"Blackberry";if(_isWebOS(f))return"Webos";if(_isSafari(f))return"Safari";if((f.includes("chrome/")||_isChromeIOS(f))&&!f.includes("edge/"))return"Chrome";if(_isAndroid(f))return"Android";{const b=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,C=g.match(b);if((C==null?void 0:C.length)===2)return C[1]}return"Other"}function _isFirefox(g=getUA()){return/firefox\//i.test(g)}function _isSafari(g=getUA()){const f=g.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function _isChromeIOS(g=getUA()){return/crios\//i.test(g)}function _isIEMobile(g=getUA()){return/iemobile/i.test(g)}function _isAndroid(g=getUA()){return/android/i.test(g)}function _isBlackBerry(g=getUA()){return/blackberry/i.test(g)}function _isWebOS(g=getUA()){return/webos/i.test(g)}function _isIOS(g=getUA()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function _isIOSStandalone(g=getUA()){var f;return _isIOS(g)&&!!((f=window.navigator)!=null&&f.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(g=getUA()){return _isIOS(g)||_isAndroid(g)||_isWebOS(g)||_isBlackBerry(g)||/windows phone/i.test(g)||_isIEMobile(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(g,f=[]){let b;switch(g){case"Browser":b=_getBrowserName(getUA());break;case"Worker":b=`${_getBrowserName(getUA())}-${g}`;break;default:b=g}const C=f.length?f.join(","):"FirebaseCore-web";return`${b}/JsCore/${SDK_VERSION}/${C}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,b){const C=O=>new Promise(($,_e)=>{try{const ye=f(O);$(ye)}catch(ye){_e(ye)}});C.onAbort=b,this.queue.push(C);const D=this.queue.length-1;return()=>{this.queue[D]=()=>Promise.resolve()}}async runMiddleware(f){if(this.auth.currentUser===f)return;const b=[];try{for(const C of this.queue)await C(f),C.onAbort&&b.push(C.onAbort)}catch(C){b.reverse();for(const D of b)try{D()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:C==null?void 0:C.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(g,f={}){return _performApiRequest(g,"GET","/v2/passwordPolicy",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(f){var C;const b=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=b.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,b.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=b.maxPasswordLength),b.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=b.containsLowercaseCharacter),b.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=b.containsUppercaseCharacter),b.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=b.containsNumericCharacter),b.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=b.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((C=f.allowedNonAlphanumericCharacters)==null?void 0:C.join(""))??"",this.forceUpgradeOnSignin=f.forceUpgradeOnSignin??!1,this.schemaVersion=f.schemaVersion}validatePassword(f){const b={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,b),this.validatePasswordCharacterOptions(f,b),b.isValid&&(b.isValid=b.meetsMinPasswordLength??!0),b.isValid&&(b.isValid=b.meetsMaxPasswordLength??!0),b.isValid&&(b.isValid=b.containsLowercaseLetter??!0),b.isValid&&(b.isValid=b.containsUppercaseLetter??!0),b.isValid&&(b.isValid=b.containsNumericCharacter??!0),b.isValid&&(b.isValid=b.containsNonAlphanumericCharacter??!0),b}validatePasswordLengthOptions(f,b){const C=this.customStrengthOptions.minPasswordLength,D=this.customStrengthOptions.maxPasswordLength;C&&(b.meetsMinPasswordLength=f.length>=C),D&&(b.meetsMaxPasswordLength=f.length<=D)}validatePasswordCharacterOptions(f,b){this.updatePasswordCharacterOptionsStatuses(b,!1,!1,!1,!1);let C;for(let D=0;D<f.length;D++)C=f.charAt(D),this.updatePasswordCharacterOptionsStatuses(b,C>="a"&&C<="z",C>="A"&&C<="Z",C>="0"&&C<="9",this.allowedNonAlphanumericCharacters.includes(C))}updatePasswordCharacterOptionsStatuses(f,b,C,D,O){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=b)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=C)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=D)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=O))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(f,b,C,D){this.app=f,this.heartbeatServiceProvider=b,this.appCheckServiceProvider=C,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=D.sdkClientVersion,this._persistenceManagerAvailable=new Promise(O=>this._resolvePersistenceManagerAvailable=O)}_initializeWithPersistence(f,b){return b&&(this._popupRedirectResolver=_getInstance(b)),this._initializationPromise=this.queue(async()=>{var C,D,O;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,f),(C=this._resolvePersistenceManagerAvailable)==null||C.call(this),!this._deleted)){if((D=this._popupRedirectResolver)!=null&&D._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(b),this.lastNotifiedUid=((O=this.currentUser)==null?void 0:O.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const f=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!f)){if(this.currentUser&&f&&this.currentUser.uid===f.uid){this._currentUser._assign(f),await this.currentUser.getIdToken();return}await this._updateCurrentUser(f,!0)}}async initializeCurrentUserFromIdToken(f){try{const b=await getAccountInfo(this,{idToken:f}),C=await UserImpl._fromGetAccountInfoResponse(this,b,f);await this.directlySetCurrentUser(C)}catch(b){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",b),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(f){var O;if(_isFirebaseServerApp(this.app)){const $=this.app.settings.authIdToken;return $?new Promise(_e=>{setTimeout(()=>this.initializeCurrentUserFromIdToken($).then(_e,_e))}):this.directlySetCurrentUser(null)}const b=await this.assertedPersistence.getCurrentUser();let C=b,D=!1;if(f&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const $=(O=this.redirectUser)==null?void 0:O._redirectEventId,_e=C==null?void 0:C._redirectEventId,ye=await this.tryRedirectSignIn(f);(!$||$===_e)&&(ye!=null&&ye.user)&&(C=ye.user,D=!0)}if(!C)return this.directlySetCurrentUser(null);if(!C._redirectEventId){if(D)try{await this.beforeStateQueue.runMiddleware(C)}catch($){C=b,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject($))}return C?this.reloadAndSetCurrentUserOrClear(C):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===C._redirectEventId?this.directlySetCurrentUser(C):this.reloadAndSetCurrentUserOrClear(C)}async tryRedirectSignIn(f){let b=null;try{b=await this._popupRedirectResolver._completeRedirectFn(this,f,!0)}catch{await this._setRedirectUser(null)}return b}async reloadAndSetCurrentUserOrClear(f){try{await _reloadWithoutSaving(f)}catch(b){if((b==null?void 0:b.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(f)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(f){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const b=f?getModularInstance(f):null;return b&&_assert(b.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(b&&b._clone(this))}async _updateCurrentUser(f,b=!1){if(!this._deleted)return f&&_assert(this.tenantId===f.tenantId,this,"tenant-id-mismatch"),b||await this.beforeStateQueue.runMiddleware(f),this.queue(async()=>{await this.directlySetCurrentUser(f),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(f){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(f))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(f){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const b=this._getPasswordPolicyInternal();return b.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):b.validatePassword(f)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const f=await _getPasswordPolicy(this),b=new PasswordPolicyImpl(f);this.tenantId===null?this._projectPasswordPolicy=b:this._tenantPasswordPolicies[this.tenantId]=b}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(f){this._errorFactory=new ErrorFactory("auth","Firebase",f())}onAuthStateChanged(f,b,C){return this.registerStateListener(this.authStateSubscription,f,b,C)}beforeAuthStateChanged(f,b){return this.beforeStateQueue.pushCallback(f,b)}onIdTokenChanged(f,b,C){return this.registerStateListener(this.idTokenSubscription,f,b,C)}authStateReady(){return new Promise((f,b)=>{if(this.currentUser)f();else{const C=this.onAuthStateChanged(()=>{C(),f()},b)}})}async revokeAccessToken(f){if(this.currentUser){const b=await this.currentUser.getIdToken(),C={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:f,idToken:b};this.tenantId!=null&&(C.tenantId=this.tenantId),await revokeToken(this,C)}}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(f=this._currentUser)==null?void 0:f.toJSON()}}async _setRedirectUser(f,b){const C=await this.getOrInitRedirectPersistenceManager(b);return f===null?C.removeCurrentUser():C.setCurrentUser(f)}async getOrInitRedirectPersistenceManager(f){if(!this.redirectPersistenceManager){const b=f&&_getInstance(f)||this._popupRedirectResolver;_assert(b,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(b._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(f){var b,C;return this._isInitialized&&await this.queue(async()=>{}),((b=this._currentUser)==null?void 0:b._redirectEventId)===f?this._currentUser:((C=this.redirectUser)==null?void 0:C._redirectEventId)===f?this.redirectUser:null}async _persistUserIfCurrent(f){if(f===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(f))}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const f=((b=this.currentUser)==null?void 0:b.uid)??null;this.lastNotifiedUid!==f&&(this.lastNotifiedUid=f,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,b,C,D){if(this._deleted)return()=>{};const O=typeof b=="function"?b:b.next.bind(b);let $=!1;const _e=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(_e,this,"internal-error"),_e.then(()=>{$||O(this.currentUser)}),typeof b=="function"){const ye=f.addObserver(b,C,D);return()=>{$=!0,ye()}}else{const ye=f.addObserver(b);return()=>{$=!0,ye()}}}async directlySetCurrentUser(f){this.currentUser&&this.currentUser!==f&&this._currentUser._stopProactiveRefresh(),f&&this.isProactiveRefreshEnabled&&f._startProactiveRefresh(),this.currentUser=f,f?await this.assertedPersistence.setCurrentUser(f):await this.assertedPersistence.removeCurrentUser()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var D;const f={"X-Client-Version":this.clientVersion};this.app.options.appId&&(f["X-Firebase-gmpid"]=this.app.options.appId);const b=await((D=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:D.getHeartbeatsHeader());b&&(f["X-Firebase-Client"]=b);const C=await this._getAppCheckToken();return C&&(f["X-Firebase-AppCheck"]=C),f}async _getAppCheckToken(){var b;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const f=await((b=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:b.getToken());return f!=null&&f.error&&_logWarn(`Error while retrieving App Check token: ${f.error}`),f==null?void 0:f.token}}function _castAuth(g){return getModularInstance(g)}class Subscription{constructor(f){this.auth=f,this.observer=null,this.addObserver=createSubscribe(b=>this.observer=b)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(g){externalJSProvider=g}function _loadJS(g){return externalJSProvider.loadJS(g)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(g){return`__${g}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(f){f()}execute(f,b){return Promise.resolve("token")}render(f,b){return""}}class MockGreCAPTCHA{ready(f){f()}execute(f,b){return Promise.resolve("token")}render(f,b){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(f){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(f)}async verify(f="verify",b=!1){async function C(O){if(!b){if(O.tenantId==null&&O._agentRecaptchaConfig!=null)return O._agentRecaptchaConfig.siteKey;if(O.tenantId!=null&&O._tenantRecaptchaConfigs[O.tenantId]!==void 0)return O._tenantRecaptchaConfigs[O.tenantId].siteKey}return new Promise(async($,_e)=>{getRecaptchaConfig(O,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ye=>{if(ye.recaptchaKey===void 0)_e(new Error("recaptcha Enterprise site key undefined"));else{const Fe=new RecaptchaConfig(ye);return O.tenantId==null?O._agentRecaptchaConfig=Fe:O._tenantRecaptchaConfigs[O.tenantId]=Fe,$(Fe.siteKey)}}).catch(ye=>{_e(ye)})})}function D(O,$,_e){const ye=window.grecaptcha;isEnterprise(ye)?ye.enterprise.ready(()=>{ye.enterprise.execute(O,{action:f}).then(Fe=>{$(Fe)}).catch(()=>{$(FAKE_TOKEN)})}):_e(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((O,$)=>{C(this.auth).then(_e=>{if(!b&&isEnterprise(window.grecaptcha))D(_e,O,$);else{if(typeof window>"u"){$(new Error("RecaptchaVerifier is only supported in browser"));return}let ye=_recaptchaEnterpriseScriptUrl();ye.length!==0&&(ye+=_e),_loadJS(ye).then(()=>{D(_e,O,$)}).catch(Fe=>{$(Fe)})}}).catch(_e=>{$(_e)})})}}async function injectRecaptchaFields(g,f,b,C=!1,D=!1){const O=new RecaptchaEnterpriseVerifier(g);let $;if(D)$=FAKE_TOKEN;else try{$=await O.verify(b)}catch{$=await O.verify(b,!0)}const _e={...f};if(b==="mfaSmsEnrollment"||b==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _e){const ye=_e.phoneEnrollmentInfo.phoneNumber,Fe=_e.phoneEnrollmentInfo.recaptchaToken;Object.assign(_e,{phoneEnrollmentInfo:{phoneNumber:ye,recaptchaToken:Fe,captchaResponse:$,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _e){const ye=_e.phoneSignInInfo.recaptchaToken;Object.assign(_e,{phoneSignInInfo:{recaptchaToken:ye,captchaResponse:$,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _e}return C?Object.assign(_e,{captchaResp:$}):Object.assign(_e,{captchaResponse:$}),Object.assign(_e,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_e,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_e}async function handleRecaptchaFlow(g,f,b,C,D){var O;if((O=g._getRecaptchaConfig())!=null&&O.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const $=await injectRecaptchaFields(g,f,b,b==="getOobCode");return C(g,$)}else return C(g,f).catch(async $=>{if($.code==="auth/missing-recaptcha-token"){console.log(`${b} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _e=await injectRecaptchaFields(g,f,b,b==="getOobCode");return C(g,_e)}else return Promise.reject($)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(g,f){const b=_getProvider(g,"auth");if(b.isInitialized()){const D=b.getImmediate(),O=b.getOptions();if(deepEqual(O,f??{}))return D;_fail(D,"already-initialized")}return b.initialize({options:f})}function _initializeAuthInstance(g,f){const b=(f==null?void 0:f.persistence)||[],C=(Array.isArray(b)?b:[b]).map(_getInstance);f!=null&&f.errorMap&&g._updateErrorMap(f.errorMap),g._initializeWithPersistence(C,f==null?void 0:f.popupRedirectResolver)}function connectAuthEmulator(g,f,b){const C=_castAuth(g);_assert(/^https?:\/\//.test(f),C,"invalid-emulator-scheme");const D=!1,O=extractProtocol(f),{host:$,port:_e}=extractHostAndPort(f),ye=_e===null?"":`:${_e}`,Fe={url:`${O}//${$}${ye}/`},ot=Object.freeze({host:$,port:_e,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:D})});if(!C._canInitEmulator){_assert(C.config.emulator&&C.emulatorConfig,C,"emulator-config-failed"),_assert(deepEqual(Fe,C.config.emulator)&&deepEqual(ot,C.emulatorConfig),C,"emulator-config-failed");return}C.config.emulator=Fe,C.emulatorConfig=ot,C.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation($)?(pingServer(`${O}//${$}${ye}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(g){const f=g.indexOf(":");return f<0?"":g.substr(0,f+1)}function extractHostAndPort(g){const f=extractProtocol(g),b=/(\/\/)?([^?#/]+)/.exec(g.substr(f.length));if(!b)return{host:"",port:null};const C=b[2].split("@").pop()||"",D=/^(\[[^\]]+\])(:|$)/.exec(C);if(D){const O=D[1];return{host:O,port:parsePort(C.substr(O.length+1))}}else{const[O,$]=C.split(":");return{host:O,port:parsePort($)}}}function parsePort(g){if(!g)return null;const f=Number(g);return isNaN(f)?null:f}function emitEmulatorWarning(){function g(){const f=document.createElement("p"),b=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(f,b){this.providerId=f,this.signInMethod=b}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(f){return debugFail("not implemented")}_linkToIdToken(f,b){return debugFail("not implemented")}_getReauthenticationResolver(f){return debugFail("not implemented")}}async function linkEmailPassword(g,f){return _performApiRequest(g,"POST","/v1/accounts:signUp",f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(g,f){return _performSignInRequest(g,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(g,f){return _performSignInRequest(g,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(g,f))}async function signInWithEmailLinkForLinking(g,f){return _performSignInRequest(g,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(f,b,C,D=null){super("password",C),this._email=f,this._password=b,this._tenantId=D}static _fromEmailAndPassword(f,b){return new EmailAuthCredential(f,b,"password")}static _fromEmailAndCode(f,b,C=null){return new EmailAuthCredential(f,b,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const b=typeof f=="string"?JSON.parse(f):f;if(b!=null&&b.email&&(b!=null&&b.password)){if(b.signInMethod==="password")return this._fromEmailAndPassword(b.email,b.password);if(b.signInMethod==="emailLink")return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}async _getIdTokenResponse(f){switch(this.signInMethod){case"password":const b={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(f,b,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(f,{email:this._email,oobCode:this._password});default:_fail(f,"internal-error")}}async _linkToIdToken(f,b){switch(this.signInMethod){case"password":const C={idToken:b,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(f,C,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(f,{idToken:b,email:this._email,oobCode:this._password});default:_fail(f,"internal-error")}}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(g,f){return _performSignInRequest(g,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const b=new OAuthCredential(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(b.idToken=f.idToken),f.accessToken&&(b.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(b.nonce=f.nonce),f.pendingToken&&(b.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(b.accessToken=f.oauthToken,b.secret=f.oauthTokenSecret):_fail("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const b=typeof f=="string"?JSON.parse(f):f,{providerId:C,signInMethod:D,...O}=b;if(!C||!D)return null;const $=new OAuthCredential(C,D);return $.idToken=O.idToken||void 0,$.accessToken=O.accessToken||void 0,$.secret=O.secret,$.nonce=O.nonce,$.pendingToken=O.pendingToken||null,$}_getIdTokenResponse(f){const b=this.buildRequest();return signInWithIdp(f,b)}_linkToIdToken(f,b){const C=this.buildRequest();return C.idToken=b,signInWithIdp(f,C)}_getReauthenticationResolver(f){const b=this.buildRequest();return b.autoCreate=!1,signInWithIdp(f,b)}buildRequest(){const f={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),f.postBody=querystring(b)}return f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(g){const f=querystringDecode(extractQuerystring(g)).link,b=f?querystringDecode(extractQuerystring(f)).deep_link_id:null,C=querystringDecode(extractQuerystring(g)).deep_link_id;return(C?querystringDecode(extractQuerystring(C)).link:null)||C||b||f||g}class ActionCodeURL{constructor(f){const b=querystringDecode(extractQuerystring(f)),C=b.apiKey??null,D=b.oobCode??null,O=parseMode(b.mode??null);_assert(C&&D&&O,"argument-error"),this.apiKey=C,this.operation=O,this.code=D,this.continueUrl=b.continueUrl??null,this.languageCode=b.lang??null,this.tenantId=b.tenantId??null}static parseLink(f){const b=parseDeepLink(f);try{return new ActionCodeURL(b)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(f,b){return EmailAuthCredential._fromEmailAndPassword(f,b)}static credentialWithLink(f,b){const C=ActionCodeURL.parseLink(b);return _assert(C,"argument-error"),EmailAuthCredential._fromEmailAndCode(f,C.code,C.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(f){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return FacebookAuthProvider.credentialFromTaggedObject(f)}static credentialFromError(f){return FacebookAuthProvider.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(f.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(f,b){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:b})}static credentialFromResult(f){return GoogleAuthProvider.credentialFromTaggedObject(f)}static credentialFromError(f){return GoogleAuthProvider.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:b,oauthAccessToken:C}=f;if(!b&&!C)return null;try{return GoogleAuthProvider.credential(b,C)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(f){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return GithubAuthProvider.credentialFromTaggedObject(f)}static credentialFromError(f){return GithubAuthProvider.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return GithubAuthProvider.credential(f.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(f,b){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:b})}static credentialFromResult(f){return TwitterAuthProvider.credentialFromTaggedObject(f)}static credentialFromError(f){return TwitterAuthProvider.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:b,oauthTokenSecret:C}=f;if(!b||!C)return null;try{return TwitterAuthProvider.credential(b,C)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(g,f){return _performSignInRequest(g,"POST","/v1/accounts:signUp",_addTidIfNecessary(g,f))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static async _fromIdTokenResponse(f,b,C,D=!1){const O=await UserImpl._fromIdTokenResponse(f,C,D),$=providerIdForResponse(C);return new UserCredentialImpl({user:O,providerId:$,_tokenResponse:C,operationType:b})}static async _forOperation(f,b,C){await f._updateTokensIfNecessary(C,!0);const D=providerIdForResponse(C);return new UserCredentialImpl({user:f,providerId:D,_tokenResponse:C,operationType:b})}}function providerIdForResponse(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(f,b,C,D){super(b.code,b.message),this.operationType=C,this.user=D,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:f.name,tenantId:f.tenantId??void 0,_serverResponse:b.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(f,b,C,D){return new MultiFactorError(f,b,C,D)}}function _processCredentialSavingMfaContextIfNecessary(g,f,b,C){return(f==="reauthenticate"?b._getReauthenticationResolver(g):b._getIdTokenResponse(g)).catch(O=>{throw O.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(g,O,f,C):O})}async function _link$1(g,f,b=!1){const C=await _logoutIfInvalidated(g,f._linkToIdToken(g.auth,await g.getIdToken()),b);return UserCredentialImpl._forOperation(g,"link",C)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(g,f,b=!1){const{auth:C}=g;if(_isFirebaseServerApp(C.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(C));const D="reauthenticate";try{const O=await _logoutIfInvalidated(g,_processCredentialSavingMfaContextIfNecessary(C,D,f,g),b);_assert(O.idToken,C,"internal-error");const $=_parseToken(O.idToken);_assert($,C,"internal-error");const{sub:_e}=$;return _assert(g.uid===_e,C,"user-mismatch"),UserCredentialImpl._forOperation(g,D,O)}catch(O){throw(O==null?void 0:O.code)==="auth/user-not-found"&&_fail(C,"user-mismatch"),O}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(g,f,b=!1){if(_isFirebaseServerApp(g.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(g));const C="signIn",D=await _processCredentialSavingMfaContextIfNecessary(g,C,f),O=await UserCredentialImpl._fromIdTokenResponse(g,C,D);return b||await g._updateCurrentUser(O.user),O}async function signInWithCredential(g,f){return _signInWithCredential(_castAuth(g),f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(g){const f=_castAuth(g);f._getPasswordPolicyInternal()&&await f._updatePasswordPolicy()}async function createUserWithEmailAndPassword(g,f,b){if(_isFirebaseServerApp(g.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(g));const C=_castAuth(g),$=await handleRecaptchaFlow(C,{returnSecureToken:!0,email:f,password:b,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(ye=>{throw ye.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(g),ye}),_e=await UserCredentialImpl._fromIdTokenResponse(C,"signIn",$);return await C._updateCurrentUser(_e.user),_e}function signInWithEmailAndPassword(g,f,b){return _isFirebaseServerApp(g.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(g)):signInWithCredential(getModularInstance(g),EmailAuthProvider.credential(f,b)).catch(async C=>{throw C.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(g),C})}function onIdTokenChanged(g,f,b,C){return getModularInstance(g).onIdTokenChanged(f,b,C)}function beforeAuthStateChanged(g,f,b){return getModularInstance(g).beforeAuthStateChanged(f,b)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(f,b){this.storageRetriever=f,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,b){return this.storage.setItem(f,JSON.stringify(b)),Promise.resolve()}_get(f){const b=this.storage.getItem(f);return Promise.resolve(b?JSON.parse(b):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,b)=>this.onStorageEvent(f,b),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const b of Object.keys(this.listeners)){const C=this.storage.getItem(b),D=this.localCache[b];C!==D&&f(b,D,C)}}onStorageEvent(f,b=!1){if(!f.key){this.forAllChangedKeys(($,_e,ye)=>{this.notifyListeners($,ye)});return}const C=f.key;b?this.detachListener():this.stopPolling();const D=()=>{const $=this.storage.getItem(C);!b&&this.localCache[C]===$||this.notifyListeners(C,$)},O=this.storage.getItem(C);_isIE10()&&O!==f.newValue&&f.newValue!==f.oldValue?setTimeout(D,IE10_LOCAL_STORAGE_SYNC_DELAY):D()}notifyListeners(f,b){this.localCache[f]=b;const C=this.listeners[f];if(C)for(const D of Array.from(C))D(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,b,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:b,newValue:C}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,b){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(b)}_removeListener(f,b){this.listeners[f]&&(this.listeners[f].delete(b),this.listeners[f].size===0&&delete this.listeners[f]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(f,b){await super._set(f,b),this.localCache[f]=JSON.stringify(b)}async _get(f){const b=await super._get(f);return this.localCache[f]=JSON.stringify(b),b}async _remove(f){await super._remove(f),delete this.localCache[f]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,b){}_removeListener(f,b){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(g){return Promise.all(g.map(async f=>{try{return{fulfilled:!0,value:await f}}catch(b){return{fulfilled:!1,reason:b}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const b=this.receivers.find(D=>D.isListeningto(f));if(b)return b;const C=new Receiver(f);return this.receivers.push(C),C}isListeningto(f){return this.eventTarget===f}async handleEvent(f){const b=f,{eventId:C,eventType:D,data:O}=b.data,$=this.handlersMap[D];if(!($!=null&&$.size))return;b.ports[0].postMessage({status:"ack",eventId:C,eventType:D});const _e=Array.from($).map(async Fe=>Fe(b.origin,O)),ye=await _allSettled(_e);b.ports[0].postMessage({status:"done",eventId:C,eventType:D,response:ye})}_subscribe(f,b){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(b)}_unsubscribe(f,b){this.handlersMap[f]&&b&&this.handlersMap[f].delete(b),(!b||this.handlersMap[f].size===0)&&delete this.handlersMap[f],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(g="",f=10){let b="";for(let C=0;C<f;C++)b+=Math.floor(Math.random()*10);return g+b}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}async _send(f,b,C=50){const D=typeof MessageChannel<"u"?new MessageChannel:null;if(!D)throw new Error("connection_unavailable");let O,$;return new Promise((_e,ye)=>{const Fe=_generateEventId("",20);D.port1.start();const ot=setTimeout(()=>{ye(new Error("unsupported_event"))},C);$={messageChannel:D,onMessage(Re){const Z=Re;if(Z.data.eventId===Fe)switch(Z.data.status){case"ack":clearTimeout(ot),O=setTimeout(()=>{ye(new Error("timeout"))},3e3);break;case"done":clearTimeout(O),_e(Z.data.response);break;default:clearTimeout(ot),clearTimeout(O),ye(new Error("invalid_response"));break}}},this.handlers.add($),D.port1.addEventListener("message",$.onMessage),this.target.postMessage({eventType:f,eventId:Fe,data:b},[D.port2])}).finally(()=>{$&&this.removeMessageHandler($)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(g){_window().location.href=g}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var g;return((g=navigator==null?void 0:navigator.serviceWorker)==null?void 0:g.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(f){this.request=f}toPromise(){return new Promise((f,b)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function getObjectStore(g,f){return g.transaction([DB_OBJECTSTORE_NAME],f?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const g=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(g).toPromise()}function _openDatabase(){const g=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((f,b)=>{g.addEventListener("error",()=>{b(g.error)}),g.addEventListener("upgradeneeded",()=>{const C=g.result;try{C.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(D){b(D)}}),g.addEventListener("success",async()=>{const C=g.result;C.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?f(C):(C.close(),await _deleteDatabase(),f(await _openDatabase()))})})}async function _putObject(g,f,b){const C=getObjectStore(g,!0).put({[DB_DATA_KEYPATH]:f,value:b});return new DBPromise(C).toPromise()}async function getObject(g,f){const b=getObjectStore(g,!1).get(f),C=await new DBPromise(b).toPromise();return C===void 0?null:C.value}function _deleteObject(g,f){const b=getObjectStore(g,!0).delete(f);return new DBPromise(b).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(f){let b=0;for(;;)try{const C=await this._openDb();return await f(C)}catch(C){if(b++>_TRANSACTION_RETRY_COUNT)throw C;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(f,b)=>({keyProcessed:(await this._poll()).includes(b.key)})),this.receiver._subscribe("ping",async(f,b)=>["keyChanged"])}async initializeSender(){var b,C;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const f=await this.sender._send("ping",{},800);f&&(b=f[0])!=null&&b.fulfilled&&(C=f[0])!=null&&C.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(f){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:f},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const f=await _openDatabase();return await _putObject(f,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(f,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(f){this.pendingWrites++;try{await f()}finally{this.pendingWrites--}}async _set(f,b){return this._withPendingWrite(async()=>(await this._withRetries(C=>_putObject(C,f,b)),this.localCache[f]=b,this.notifyServiceWorker(f)))}async _get(f){const b=await this._withRetries(C=>getObject(C,f));return this.localCache[f]=b,b}async _remove(f){return this._withPendingWrite(async()=>(await this._withRetries(b=>_deleteObject(b,f)),delete this.localCache[f],this.notifyServiceWorker(f)))}async _poll(){const f=await this._withRetries(D=>{const O=getObjectStore(D,!1).getAll();return new DBPromise(O).toPromise()});if(!f)return[];if(this.pendingWrites!==0)return[];const b=[],C=new Set;if(f.length!==0)for(const{fbase_key:D,value:O}of f)C.add(D),JSON.stringify(this.localCache[D])!==JSON.stringify(O)&&(this.notifyListeners(D,O),b.push(D));for(const D of Object.keys(this.localCache))this.localCache[D]&&!C.has(D)&&(this.notifyListeners(D,null),b.push(D));return b}notifyListeners(f,b){this.localCache[f]=b;const C=this.listeners[f];if(C)for(const D of Array.from(C))D(b)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,b){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(b)}_removeListener(f,b){this.listeners[f]&&(this.listeners[f].delete(b),this.listeners[f].size===0&&delete this.listeners[f]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(g,f){return f?_getInstance(f):(_assert(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return signInWithIdp(f,this._buildIdpRequest())}_linkToIdToken(f,b){return signInWithIdp(f,this._buildIdpRequest(b))}_getReauthenticationResolver(f){return signInWithIdp(f,this._buildIdpRequest())}_buildIdpRequest(f){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(b.idToken=f),b}}function _signIn(g){return _signInWithCredential(g.auth,new IdpCredential(g),g.bypassAuthState)}function _reauth(g){const{auth:f,user:b}=g;return _assert(b,f,"internal-error"),_reauthenticate(b,new IdpCredential(g),g.bypassAuthState)}async function _link(g){const{auth:f,user:b}=g;return _assert(b,f,"internal-error"),_link$1(b,new IdpCredential(g),g.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(f,b,C,D,O=!1){this.auth=f,this.resolver=C,this.user=D,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){return new Promise(async(f,b)=>{this.pendingPromise={resolve:f,reject:b};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(C){this.reject(C)}})}async onAuthEvent(f){const{urlResponse:b,sessionId:C,postBody:D,tenantId:O,error:$,type:_e}=f;if($){this.reject($);return}const ye={auth:this.auth,requestUri:b,sessionId:C,tenantId:O||void 0,postBody:D||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_e)(ye))}catch(Fe){this.reject(Fe)}}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(f){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(f,b,C,D,O){super(f,b,D,O),this.provider=C,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const f=await this.execute();return _assert(f,this.auth,"internal-error"),f}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const f=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],f),this.authWindow.associatedEvent=f,this.resolver._originValidation(this.auth).catch(b=>{this.reject(b)}),this.resolver._isIframeWebStorageSupported(this.auth,b=>{b||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var f;return((f=this.authWindow)==null?void 0:f.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const f=()=>{var b,C;if((C=(b=this.authWindow)==null?void 0:b.window)!=null&&C.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(f,_POLL_WINDOW_CLOSE_TIMEOUT.get())};f()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(f,b,C=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,C),this.eventId=null}async execute(){let f=redirectOutcomeMap.get(this.auth._key());if(!f){try{const C=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;f=()=>Promise.resolve(C)}catch(b){f=()=>Promise.reject(b)}redirectOutcomeMap.set(this.auth._key(),f)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),f()}async onAuthEvent(f){if(f.type==="signInViaRedirect")return super.onAuthEvent(f);if(f.type==="unknown"){this.resolve(null);return}if(f.eventId){const b=await this.auth._redirectUserForId(f.eventId);if(b)return this.user=b,super.onAuthEvent(f);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(g,f){const b=pendingRedirectKey(f),C=resolverPersistence(g);if(!await C._isAvailable())return!1;const D=await C._get(b)==="true";return await C._remove(b),D}function _overrideRedirectResult(g,f){redirectOutcomeMap.set(g._key(),f)}function resolverPersistence(g){return _getInstance(g._redirectPersistence)}function pendingRedirectKey(g){return _persistenceKeyName(PENDING_REDIRECT_KEY,g.config.apiKey,g.name)}async function _getRedirectResult(g,f,b=!1){if(_isFirebaseServerApp(g.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(g));const C=_castAuth(g),D=_withDefaultResolver(C,f),$=await new RedirectAction(C,D,b).execute();return $&&!b&&(delete $.user._redirectEventId,await C._persistUserIfCurrent($.user),await C._setRedirectUser(null,f)),$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let b=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(f,C)&&(b=!0,this.sendToConsumer(f,C),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!isRedirectEvent(f)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=f,b=!0)),b}sendToConsumer(f,b){var C;if(f.error&&!isNullRedirectEvent(f)){const D=((C=f.error.code)==null?void 0:C.split("auth/")[1])||"internal-error";b.onError(_createError(this.auth,D))}else b.onAuthEvent(f)}isEventForConsumer(f,b){const C=b.eventId===null||!!f.eventId&&f.eventId===b.eventId;return b.filter.includes(f.type)&&C}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(f))}saveEventToCache(f){this.cachedEventUids.add(eventUid(f)),this.lastProcessedEventTime=Date.now()}}function eventUid(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(f=>f).join("-")}function isNullRedirectEvent({type:g,error:f}){return g==="unknown"&&(f==null?void 0:f.code)==="auth/no-auth-event"}function isRedirectEvent(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(g);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(g,f={}){return _performApiRequest(g,"GET","/v1/projects",f)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(g){if(g.config.emulator)return;const{authorizedDomains:f}=await _getProjectConfig(g);for(const b of f)try{if(matchDomain(b))return}catch{}_fail(g,"unauthorized-domain")}function matchDomain(g){const f=_getCurrentUrl(),{protocol:b,hostname:C}=new URL(f);if(g.startsWith("chrome-extension://")){const $=new URL(g);return $.hostname===""&&C===""?b==="chrome-extension:"&&g.replace("chrome-extension://","")===f.replace("chrome-extension://",""):b==="chrome-extension:"&&$.hostname===C}if(!HTTP_REGEX.test(b))return!1;if(IP_ADDRESS_REGEX.test(g))return C===g;const D=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+D+"|"+D+")$","i").test(C)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const g=_window().___jsl;if(g!=null&&g.H){for(const f of Object.keys(g.H))if(g.H[f].r=g.H[f].r||[],g.H[f].L=g.H[f].L||[],g.H[f].r=[...g.H[f].L],g.CP)for(let b=0;b<g.CP.length;b++)g.CP[b]=null}}function loadGapi(g){return new Promise((f,b)=>{var D,O,$;function C(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),b(_createError(g,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if((O=(D=_window().gapi)==null?void 0:D.iframes)!=null&&O.Iframe)f(gapi.iframes.getContext());else if(($=_window().gapi)!=null&&$.load)C();else{const _e=_generateCallbackName("iframefcb");return _window()[_e]=()=>{gapi.load?C():b(_createError(g,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${_e}`).catch(ye=>b(ye))}}).catch(f=>{throw cachedGApiLoader=null,f})}let cachedGApiLoader=null;function _loadGapi(g){return cachedGApiLoader=cachedGApiLoader||loadGapi(g),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(g){const f=g.config;_assert(f.authDomain,g,"auth-domain-config-required");const b=f.emulator?_emulatorUrl(f,EMULATED_IFRAME_PATH):`https://${g.config.authDomain}/${IFRAME_PATH}`,C={apiKey:f.apiKey,appName:g.name,v:SDK_VERSION},D=EID_FROM_APIHOST.get(g.config.apiHost);D&&(C.eid=D);const O=g._getFrameworks();return O.length&&(C.fw=O.join(",")),`${b}?${querystring(C).slice(1)}`}async function _openIframe(g){const f=await _loadGapi(g),b=_window().gapi;return _assert(b,g,"internal-error"),f.open({where:document.body,url:getIframeUrl(g),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},C=>new Promise(async(D,O)=>{await C.restyle({setHideOnLeave:!1});const $=_createError(g,"network-request-failed"),_e=_window().setTimeout(()=>{O($)},PING_TIMEOUT.get());function ye(){_window().clearTimeout(_e),D(C)}C.ping(ye).then(ye,()=>{O($)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(g,f,b,C=DEFAULT_WIDTH,D=DEFAULT_HEIGHT){const O=Math.max((window.screen.availHeight-D)/2,0).toString(),$=Math.max((window.screen.availWidth-C)/2,0).toString();let _e="";const ye={...BASE_POPUP_OPTIONS,width:C.toString(),height:D.toString(),top:O,left:$},Fe=getUA().toLowerCase();b&&(_e=_isChromeIOS(Fe)?TARGET_BLANK:b),_isFirefox(Fe)&&(f=f||FIREFOX_EMPTY_URL,ye.scrollbars="yes");const ot=Object.entries(ye).reduce((Z,[I,P])=>`${Z}${I}=${P},`,"");if(_isIOSStandalone(Fe)&&_e!=="_self")return openAsNewWindowIOS(f||"",_e),new AuthPopup(null);const Re=window.open(f||"",_e,ot);_assert(Re,g,"popup-blocked");try{Re.focus()}catch{}return new AuthPopup(Re)}function openAsNewWindowIOS(g,f){const b=document.createElement("a");b.href=g,b.target=f;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(C)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(g,f,b,C,D,O){_assert(g.config.authDomain,g,"auth-domain-config-required"),_assert(g.config.apiKey,g,"invalid-api-key");const $={apiKey:g.config.apiKey,appName:g.name,authType:b,redirectUrl:C,v:SDK_VERSION,eventId:D};if(f instanceof FederatedAuthProvider){f.setDefaultLanguage(g.languageCode),$.providerId=f.providerId||"",isEmpty(f.getCustomParameters())||($.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ot,Re]of Object.entries({}))$[ot]=Re}if(f instanceof BaseOAuthProvider){const ot=f.getScopes().filter(Re=>Re!=="");ot.length>0&&($.scopes=ot.join(","))}g.tenantId&&($.tid=g.tenantId);const _e=$;for(const ot of Object.keys(_e))_e[ot]===void 0&&delete _e[ot];const ye=await g._getAppCheckToken(),Fe=ye?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(ye)}`:"";return`${getHandlerBase(g)}?${querystring(_e).slice(1)}${Fe}`}function getHandlerBase({config:g}){return g.emulator?_emulatorUrl(g,EMULATOR_WIDGET_PATH):`https://${g.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(f,b,C,D){var $;debugAssert(($=this.eventManagers[f._key()])==null?void 0:$.manager,"_initialize() not called before _openPopup()");const O=await _getRedirectUrl(f,b,C,_getCurrentUrl(),D);return _open(f,O,_generateEventId())}async _openRedirect(f,b,C,D){await this._originValidation(f);const O=await _getRedirectUrl(f,b,C,_getCurrentUrl(),D);return _setWindowLocation(O),new Promise(()=>{})}_initialize(f){const b=f._key();if(this.eventManagers[b]){const{manager:D,promise:O}=this.eventManagers[b];return D?Promise.resolve(D):(debugAssert(O,"If manager is not set, promise should be"),O)}const C=this.initAndGetManager(f);return this.eventManagers[b]={promise:C},C.catch(()=>{delete this.eventManagers[b]}),C}async initAndGetManager(f){const b=await _openIframe(f),C=new AuthEventManager(f);return b.register("authEvent",D=>(_assert(D==null?void 0:D.authEvent,f,"invalid-auth-event"),{status:C.onEvent(D.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[f._key()]={manager:C},this.iframes[f._key()]=b,C}_isIframeWebStorageSupported(f,b){this.iframes[f._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},D=>{var $;const O=($=D==null?void 0:D[0])==null?void 0:$[WEB_STORAGE_SUPPORT_KEY];O!==void 0&&b(!!O),_fail(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const b=f._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=_validateOrigin(f)),this.originValidationPromises[b]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),((f=this.auth.currentUser)==null?void 0:f.uid)||null}async getToken(f){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(f)}:null}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const b=this.auth.onIdTokenChanged(C=>{f((C==null?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,b),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const b=this.internalListeners.get(f);b&&(this.internalListeners.delete(f),b(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(g){_registerComponent(new Component("auth",(f,{options:b})=>{const C=f.getProvider("app").getImmediate(),D=f.getProvider("heartbeat"),O=f.getProvider("app-check-internal"),{apiKey:$,authDomain:_e}=C.options;_assert($&&!$.includes(":"),"invalid-api-key",{appName:C.name});const ye={apiKey:$,authDomain:_e,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(g)},Fe=new AuthImpl(C,D,O,ye);return _initializeAuthInstance(Fe,b),Fe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,b,C)=>{f.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",f=>{const b=_castAuth(f.getProvider("auth").getImmediate());return(C=>new AuthInterop(C))(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version,getVersionForPlatform(g)),registerVersion(name,version,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=g=>async f=>{const b=f&&await f.getIdTokenResult(),C=b&&(new Date().getTime()-Date.parse(b.issuedAtTime))/1e3;if(C&&C>authIdTokenMaxAge)return;const D=b==null?void 0:b.token;lastPostedIdToken!==D&&(lastPostedIdToken=D,await fetch(g,{method:D?"POST":"DELETE",headers:D?{Authorization:`Bearer ${D}`}:{}}))};function getAuth(g=getApp()){const f=_getProvider(g,"auth");if(f.isInitialized())return f.getImmediate();const b=initializeAuth(g,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),C=getExperimentalSetting("authTokenSyncURL");if(C&&typeof isSecureContext=="boolean"&&isSecureContext){const O=new URL(C,location.origin);if(location.origin===O.origin){const $=mintCookieFactory(O.toString());beforeAuthStateChanged(b,$,()=>$(b.currentUser)),onIdTokenChanged(b,_e=>$(_e))}}const D=getDefaultEmulatorHost("auth");return D&&connectAuthEmulator(b,`http://${D}`),b}function getScriptParentElement(){var g;return((g=document.getElementsByTagName("head"))==null?void 0:g[0])??document}_setExternalJSProvider({loadJS(g){return new Promise((f,b)=>{const C=document.createElement("script");C.setAttribute("src",g),C.onload=f,C.onerror=D=>{const O=_createError("internal-error");O.customData=D,b(O)},C.type="text/javascript",C.charset="UTF-8",getScriptParentElement().appendChild(C)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");/*! Capacitor: https://capacitorjs.com/ - MIT License */const createCapacitorPlatforms=g=>{const f=new Map;f.set("web",{name:"web"});const b=g.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:f},C=(O,$)=>{b.platforms.set(O,$)},D=O=>{b.platforms.has(O)&&(b.currentPlatform=b.platforms.get(O))};return b.addPlatform=C,b.setPlatform=D,b},initPlatforms=g=>g.CapacitorPlatforms=createCapacitorPlatforms(g),CapacitorPlatforms=initPlatforms(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});CapacitorPlatforms.addPlatform;CapacitorPlatforms.setPlatform;var ExceptionCode;(function(g){g.Unimplemented="UNIMPLEMENTED",g.Unavailable="UNAVAILABLE"})(ExceptionCode||(ExceptionCode={}));class CapacitorException extends Error{constructor(f,b,C){super(f),this.message=f,this.code=b,this.data=C}}const getPlatformId=g=>{var f,b;return g!=null&&g.androidBridge?"android":!((b=(f=g==null?void 0:g.webkit)===null||f===void 0?void 0:f.messageHandlers)===null||b===void 0)&&b.bridge?"ios":"web"},createCapacitor=g=>{var f,b,C,D,O;const $=g.CapacitorCustomPlatform||null,_e=g.Capacitor||{},ye=_e.Plugins=_e.Plugins||{},Fe=g.CapacitorPlatforms,ot=()=>$!==null?$.name:getPlatformId(g),Re=((f=Fe==null?void 0:Fe.currentPlatform)===null||f===void 0?void 0:f.getPlatform)||ot,Z=()=>Re()!=="web",I=((b=Fe==null?void 0:Fe.currentPlatform)===null||b===void 0?void 0:b.isNativePlatform)||Z,P=fe=>{const Y=Qe.get(fe);return!!(Y!=null&&Y.platforms.has(Re())||ce(fe))},Pe=((C=Fe==null?void 0:Fe.currentPlatform)===null||C===void 0?void 0:C.isPluginAvailable)||P,ke=fe=>{var Y;return(Y=_e.PluginHeaders)===null||Y===void 0?void 0:Y.find(re=>re.name===fe)},ce=((D=Fe==null?void 0:Fe.currentPlatform)===null||D===void 0?void 0:D.getPluginHeader)||ke,Ne=fe=>g.console.error(fe),tt=(fe,Y,re)=>Promise.reject(`${re} does not have an implementation of "${Y}".`),Qe=new Map,ne=(fe,Y={})=>{const re=Qe.get(fe);if(re)return console.warn(`Capacitor plugin "${fe}" already registered. Cannot register plugins twice.`),re.proxy;const K=Re(),M=ce(fe);let F;const T=async()=>(!F&&K in Y?F=typeof Y[K]=="function"?F=await Y[K]():F=Y[K]:$!==null&&!F&&"web"in Y&&(F=typeof Y.web=="function"?F=await Y.web():F=Y.web),F),_=(q,k)=>{var G,xe;if(M){const Ae=M==null?void 0:M.methods.find(De=>k===De.name);if(Ae)return Ae.rtype==="promise"?De=>_e.nativePromise(fe,k.toString(),De):(De,Ie)=>_e.nativeCallback(fe,k.toString(),De,Ie);if(q)return(G=q[k])===null||G===void 0?void 0:G.bind(q)}else{if(q)return(xe=q[k])===null||xe===void 0?void 0:xe.bind(q);throw new CapacitorException(`"${fe}" plugin is not implemented on ${K}`,ExceptionCode.Unimplemented)}},E=q=>{let k;const G=(...xe)=>{const Ae=T().then(De=>{const Ie=_(De,q);if(Ie){const be=Ie(...xe);return k=be==null?void 0:be.remove,be}else throw new CapacitorException(`"${fe}.${q}()" is not implemented on ${K}`,ExceptionCode.Unimplemented)});return q==="addListener"&&(Ae.remove=async()=>k()),Ae};return G.toString=()=>`${q.toString()}() { [capacitor code] }`,Object.defineProperty(G,"name",{value:q,writable:!1,configurable:!1}),G},w=E("addListener"),R=E("removeListener"),V=(q,k)=>{const G=w({eventName:q},k),xe=async()=>{const De=await G;R({eventName:q,callbackId:De},k)},Ae=new Promise(De=>G.then(()=>De({remove:xe})));return Ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await xe()},Ae},ae=new Proxy({},{get(q,k){switch(k){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?V:w;case"removeListener":return R;default:return E(k)}}});return ye[fe]=ae,Qe.set(fe,{name:fe,proxy:ae,platforms:new Set([...Object.keys(Y),...M?[K]:[]])}),ae},oe=((O=Fe==null?void 0:Fe.currentPlatform)===null||O===void 0?void 0:O.registerPlugin)||ne;return _e.convertFileSrc||(_e.convertFileSrc=fe=>fe),_e.getPlatform=Re,_e.handleError=Ne,_e.isNativePlatform=I,_e.isPluginAvailable=Pe,_e.pluginMethodNoop=tt,_e.registerPlugin=oe,_e.Exception=CapacitorException,_e.DEBUG=!!_e.DEBUG,_e.isLoggingEnabled=!!_e.isLoggingEnabled,_e.platform=_e.getPlatform(),_e.isNative=_e.isNativePlatform(),_e},initCapacitorGlobal=g=>g.Capacitor=createCapacitor(g),Capacitor=initCapacitorGlobal(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),registerPlugin=Capacitor.registerPlugin;Capacitor.Plugins;class WebPlugin{constructor(f){this.listeners={},this.retainedEventArguments={},this.windowListeners={},f&&(console.warn(`Capacitor WebPlugin "${f.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=f)}addListener(f,b){let C=!1;this.listeners[f]||(this.listeners[f]=[],C=!0),this.listeners[f].push(b);const O=this.windowListeners[f];O&&!O.registered&&this.addWindowListener(O),C&&this.sendRetainedArgumentsForEvent(f);const $=async()=>this.removeListener(f,b);return Promise.resolve({remove:$})}async removeAllListeners(){this.listeners={};for(const f in this.windowListeners)this.removeWindowListener(this.windowListeners[f]);this.windowListeners={}}notifyListeners(f,b,C){const D=this.listeners[f];if(!D){if(C){let O=this.retainedEventArguments[f];O||(O=[]),O.push(b),this.retainedEventArguments[f]=O}return}D.forEach(O=>O(b))}hasListeners(f){return!!this.listeners[f].length}registerWindowListener(f,b){this.windowListeners[b]={registered:!1,windowEventName:f,pluginEventName:b,handler:C=>{this.notifyListeners(b,C)}}}unimplemented(f="not implemented"){return new Capacitor.Exception(f,ExceptionCode.Unimplemented)}unavailable(f="not available"){return new Capacitor.Exception(f,ExceptionCode.Unavailable)}async removeListener(f,b){const C=this.listeners[f];if(!C)return;const D=C.indexOf(b);this.listeners[f].splice(D,1),this.listeners[f].length||this.removeWindowListener(this.windowListeners[f])}addWindowListener(f){window.addEventListener(f.windowEventName,f.handler),f.registered=!0}removeWindowListener(f){f&&(window.removeEventListener(f.windowEventName,f.handler),f.registered=!1)}sendRetainedArgumentsForEvent(f){const b=this.retainedEventArguments[f];b&&(delete this.retainedEventArguments[f],b.forEach(C=>{this.notifyListeners(f,C)}))}}const encode=g=>encodeURIComponent(g).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),decode=g=>g.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class CapacitorCookiesPluginWeb extends WebPlugin{async getCookies(){const f=document.cookie,b={};return f.split(";").forEach(C=>{if(C.length<=0)return;let[D,O]=C.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");D=decode(D).trim(),O=decode(O).trim(),b[D]=O}),b}async setCookie(f){try{const b=encode(f.key),C=encode(f.value),D=`; expires=${(f.expires||"").replace("expires=","")}`,O=(f.path||"/").replace("path=",""),$=f.url!=null&&f.url.length>0?`domain=${f.url}`:"";document.cookie=`${b}=${C||""}${D}; path=${O}; ${$};`}catch(b){return Promise.reject(b)}}async deleteCookie(f){try{document.cookie=`${f.key}=; Max-Age=0`}catch(b){return Promise.reject(b)}}async clearCookies(){try{const f=document.cookie.split(";")||[];for(const b of f)document.cookie=b.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(f){return Promise.reject(f)}}async clearAllCookies(){try{await this.clearCookies()}catch(f){return Promise.reject(f)}}}registerPlugin("CapacitorCookies",{web:()=>new CapacitorCookiesPluginWeb});const readBlobAsBase64=async g=>new Promise((f,b)=>{const C=new FileReader;C.onload=()=>{const D=C.result;f(D.indexOf(",")>=0?D.split(",")[1]:D)},C.onerror=D=>b(D),C.readAsDataURL(g)}),normalizeHttpHeaders=(g={})=>{const f=Object.keys(g);return Object.keys(g).map(D=>D.toLocaleLowerCase()).reduce((D,O,$)=>(D[O]=g[f[$]],D),{})},buildUrlParams=(g,f=!0)=>g?Object.entries(g).reduce((C,D)=>{const[O,$]=D;let _e,ye;return Array.isArray($)?(ye="",$.forEach(Fe=>{_e=f?encodeURIComponent(Fe):Fe,ye+=`${O}=${_e}&`}),ye.slice(0,-1)):(_e=f?encodeURIComponent($):$,ye=`${O}=${_e}`),`${C}&${ye}`},"").substr(1):null,buildRequestInit=(g,f={})=>{const b=Object.assign({method:g.method||"GET",headers:g.headers},f),D=normalizeHttpHeaders(g.headers)["content-type"]||"";if(typeof g.data=="string")b.body=g.data;else if(D.includes("application/x-www-form-urlencoded")){const O=new URLSearchParams;for(const[$,_e]of Object.entries(g.data||{}))O.set($,_e);b.body=O.toString()}else if(D.includes("multipart/form-data")||g.data instanceof FormData){const O=new FormData;if(g.data instanceof FormData)g.data.forEach((_e,ye)=>{O.append(ye,_e)});else for(const _e of Object.keys(g.data))O.append(_e,g.data[_e]);b.body=O;const $=new Headers(b.headers);$.delete("content-type"),b.headers=$}else(D.includes("application/json")||typeof g.data=="object")&&(b.body=JSON.stringify(g.data));return b};class CapacitorHttpPluginWeb extends WebPlugin{async request(f){const b=buildRequestInit(f,f.webFetchExtra),C=buildUrlParams(f.params,f.shouldEncodeUrlParams),D=C?`${f.url}?${C}`:f.url,O=await fetch(D,b),$=O.headers.get("content-type")||"";let{responseType:_e="text"}=O.ok?f:{};$.includes("application/json")&&(_e="json");let ye,Fe;switch(_e){case"arraybuffer":case"blob":Fe=await O.blob(),ye=await readBlobAsBase64(Fe);break;case"json":ye=await O.json();break;case"document":case"text":default:ye=await O.text()}const ot={};return O.headers.forEach((Re,Z)=>{ot[Z]=Re}),{data:ye,headers:ot,status:O.status,url:O.url}}async get(f){return this.request(Object.assign(Object.assign({},f),{method:"GET"}))}async post(f){return this.request(Object.assign(Object.assign({},f),{method:"POST"}))}async put(f){return this.request(Object.assign(Object.assign({},f),{method:"PUT"}))}async patch(f){return this.request(Object.assign(Object.assign({},f),{method:"PATCH"}))}async delete(f){return this.request(Object.assign(Object.assign({},f),{method:"DELETE"}))}}registerPlugin("CapacitorHttp",{web:()=>new CapacitorHttpPluginWeb});const PushNotifications=registerPlugin("PushNotifications",{}),firebaseConfig={apiKey:"AIzaSyBOGkmIfZdRApC2DoO9gL1oA59-4Re3IPY",authDomain:"phchat-4122d.firebaseapp.com",projectId:"phchat-4122d",storageBucket:"phchat-4122d.firebasestorage.app",messagingSenderId:"555296879685",appId:"1:555296879685:web:74a94ff9642ee7d9291f2c"},app=initializeApp(firebaseConfig),auth=getAuth(app);new GoogleAuthProvider;const registerWithEmail=(g,f,b)=>createUserWithEmailAndPassword(g,f,b),loginWithEmail=(g,f,b)=>signInWithEmailAndPassword(g,f,b),initializePushNotifications=async(g,f)=>{if(!Capacitor.isNativePlatform()){console.log("Push nativo s funciona no APK. No navegador use Service Worker.");return}try{let b=await PushNotifications.checkPermissions();if(b.receive==="prompt"&&(b=await PushNotifications.requestPermissions()),b.receive!=="granted"){console.log("Permisso de notificaes negada");return}await PushNotifications.register(),PushNotifications.addListener("registration",C=>{console.log("FCM Token: ",C.value),g(C.value)}),PushNotifications.addListener("registrationError",C=>{console.error("Erro no registro FCM:",C)}),PushNotifications.addListener("pushNotificationReceived",C=>{console.log("Notificao recebida:",C),f({title:C.title,body:C.body,data:C.data})}),PushNotifications.addListener("pushNotificationActionPerformed",C=>{console.log("Ao da notificao:",C)})}catch(b){console.error("Erro ao inicializar PushNotifications:",b)}},BASE_URL="https://paulohenriquedev.site/api";async function request(g,f={}){const b=await fetch(`${BASE_URL}/${g}`,f),C=await b.json().catch(()=>null);if(!b.ok){const D=(C==null?void 0:C.message)||`Erro API: ${b.status}`;throw new Error(D)}if(!C)throw new Error("Resposta vazia da API");return C}const api={checkUsername:async g=>request(`checkUsername.php?username=${g}`),registerUser:async(g,f,b,C,D)=>request("registerUser.php",{method:"POST",body:JSON.stringify({name:g,email:f,uid:b,username:C,birthdate:D,bio:"Novo usurio do PH Chat"})}),getUser:async g=>{const f=await request(`getUser.php?user_id=${g}`);return Array.isArray(f)?f[0]:f},getProfileStats:async(g,f)=>request(`getUserProfile.php?my_id=${g}&target_id=${f}`),searchUsers:async g=>request(`searchUsers.php?q=${g}`),updateName:async(g,f)=>request("updateName.php",{method:"POST",body:JSON.stringify({user_id:g,name:f})}),updateBio:async(g,f)=>request("updateBio.php",{method:"POST",body:JSON.stringify({user_id:g,bio:f})}),updateUsername:async(g,f)=>request("updateUsername.php",{method:"POST",body:JSON.stringify({user_id:g,username:f})}),updateUserPhoto:async(g,f)=>{const b=new FormData;return b.append("photo_file",g),b.append("user_id",f),(await fetch(`${BASE_URL}/updatePhoto.php`,{method:"POST",body:b})).json()},getChats:async g=>request(`getMessages.php?user_id=${g}`),getChatMessages:async(g,f)=>request(`getChatMessages.php?user1_id=${g}&user2_id=${f}`),sendMessage:async(g,f,b,C)=>request("sendMessage.php",{method:"POST",body:JSON.stringify({sender_id:g,receiver_id:f,content:b,type:C})}),deleteMessage:async(g,f)=>request("deleteMessage.php",{method:"POST",body:JSON.stringify({message_id:g,user_id:f})}),createCall:async(g,f,b)=>(await fetch(`${BASE_URL}/createCall.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caller:g,receiver:f,type:b})})).json(),checkIncomingCall:async g=>(await fetch(`${BASE_URL}/checkIncomingCall.php?user_id=${g}`)).json(),acceptCall:async g=>request("acceptCall.php",{method:"POST",body:JSON.stringify({call_id:g})}),rejectCall:async g=>request("rejectCall.php",{method:"POST",body:JSON.stringify({call_id:g})}),endCall:async g=>request("endCall.php",{method:"POST",body:JSON.stringify({call_id:g})}),checkCallStatus:async g=>request(`checkCallStatus.php?call_id=${g}`),getZegoToken:async g=>request(`getZegoToken.php?user_id=${g}`),getPosts:async(g,f)=>{let b=`getPosts.php?user_id=${g}`;return f&&(b+=`&author_id=${f}`),request(b)},createPost:async(g,f,b,C)=>request("createPost.php",{method:"POST",body:JSON.stringify({user_id:g,content:f,media_url:b,media_type:C})}),deletePost:async(g,f)=>request("deletePost.php",{method:"POST",body:JSON.stringify({post_id:g,user_id:f})}),likePost:async(g,f)=>request("interactPost.php",{method:"POST",body:JSON.stringify({action:"like",user_id:g,post_id:f})}),commentPost:async(g,f,b)=>request("interactPost.php",{method:"POST",body:JSON.stringify({action:"comment",user_id:g,post_id:f,content:b})}),getComments:async g=>request(`getComments.php?post_id=${g}&t=${Date.now()}`),getStatuses:async g=>request(`getStatuses.php?user_id=${g}`),postStatus:async(g,f,b,C)=>request("postStatus.php",{method:"POST",body:JSON.stringify({user_id:g,media_url:f,media_type:b,caption:C})}),cleanupStatuses:async()=>request("cleanupStatuses.php"),viewStatus:async(g,f)=>request("statusInteract.php",{method:"POST",body:JSON.stringify({action:"view",status_id:g,user_id:f})}),deleteStatus:async(g,f)=>request("statusInteract.php",{method:"POST",body:JSON.stringify({action:"delete",status_id:g,user_id:f})}),getStatusViewers:async g=>request("statusInteract.php",{method:"POST",body:JSON.stringify({action:"get_viewers",status_id:g})}),uploadAudio:async(g,f)=>{const b=new FormData;return b.append("audio_file",g),b.append("sender_id",f),(await fetch(`${BASE_URL}/uploadAudio.php`,{method:"POST",body:b})).json()},uploadPhoto:async(g,f)=>{const b=new FormData;return b.append("photo_file",g),b.append("user_id",f),(await fetch(`${BASE_URL}/uploadPhoto.php`,{method:"POST",body:b})).json()},getFollowers:g=>request(`getFollowers.php?user_id=${g}`),getFollowing:g=>request(`getFollowing.php?user_id=${g}`),followUser:(g,f,b)=>fetch(`${BASE_URL}/followUser.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({follower_id:g,followed_id:f,action:b})}).then(C=>C.json()),isFollowing:(g,f)=>request(`${BASE_URL}/isFollowing.php?follower_id=${g}&followed_id=${f}`),checkFollow:(g,f)=>request(`checkFollow.php?follower_id=${g}&followed_id=${f}`),uploadVideo:async(g,f)=>{const b=new FormData;return b.append("video_file",g),b.append("user_id",f),(await fetch(`${BASE_URL}/uploadVideo.php`,{method:"POST",body:b})).json()},saveFcmToken:async(g,f)=>request("saveToken.php",{method:"POST",body:JSON.stringify({uid:g,token:f})}),async getUserByUsername(g){return(await fetch(`${BASE_URL}/getUserByUsername.php?username=${g}`)).json()}};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=g=>g.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=g=>g.replace(/^([A-Z])|[\s-_]+(\w)/g,(f,b,C)=>C?C.toUpperCase():b.toLowerCase()),toPascalCase=g=>{const f=toCamelCase(g);return f.charAt(0).toUpperCase()+f.slice(1)},mergeClasses=(...g)=>g.filter((f,b,C)=>!!f&&f.trim()!==""&&C.indexOf(f)===b).join(" ").trim(),hasA11yProp=g=>{for(const f in g)if(f.startsWith("aria-")||f==="role"||f==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:g="currentColor",size:f=24,strokeWidth:b=2,absoluteStrokeWidth:C,className:D="",children:O,iconNode:$,..._e},ye)=>reactExports.createElement("svg",{ref:ye,...defaultAttributes,width:f,height:f,stroke:g,strokeWidth:C?Number(b)*24/Number(f):b,className:mergeClasses("lucide",D),...!O&&!hasA11yProp(_e)&&{"aria-hidden":"true"},..._e},[...$.map(([Fe,ot])=>reactExports.createElement(Fe,ot)),...Array.isArray(O)?O:[O]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(g,f)=>{const b=reactExports.forwardRef(({className:C,...D},O)=>reactExports.createElement(Icon,{ref:O,iconNode:f,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(g))}`,`lucide-${g}`,C),...D}));return b.displayName=toPascalCase(g),b};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$H=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],ArrowDown=createLucideIcon("arrow-down",__iconNode$H);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$G=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$G);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$F=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$F);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$E=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],AtSign=createLucideIcon("at-sign",__iconNode$E);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$D=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Bell=createLucideIcon("bell",__iconNode$D);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$C=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Calendar=createLucideIcon("calendar",__iconNode$C);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$B=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Camera=createLucideIcon("camera",__iconNode$B);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$A=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],CheckCheck=createLucideIcon("check-check",__iconNode$A);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],CircleAlert=createLucideIcon("circle-alert",__iconNode$z);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$y=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],CircleCheckBig=createLucideIcon("circle-check-big",__iconNode$y);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$x=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$x);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$w=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],EllipsisVertical=createLucideIcon("ellipsis-vertical",__iconNode$w);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$v=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$v);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$u=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Globe=createLucideIcon("globe",__iconNode$u);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$t=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Heart=createLucideIcon("heart",__iconNode$t);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Image$1=createLucideIcon("image",__iconNode$s);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$r);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$q);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$p);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],MessageCircle=createLucideIcon("message-circle",__iconNode$o);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MessageSquare=createLucideIcon("message-square",__iconNode$n);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mic$1=createLucideIcon("mic",__iconNode$m);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$l);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Paperclip=createLucideIcon("paperclip",__iconNode$k);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Pause=createLucideIcon("pause",__iconNode$j);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Phone=createLucideIcon("phone",__iconNode$i);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$h);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$g);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],RefreshCw=createLucideIcon("refresh-cw",__iconNode$f);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Save=createLucideIcon("save",__iconNode$e);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Search=createLucideIcon("search",__iconNode$d);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$c);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$b);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$a);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$9);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Type=createLucideIcon("type",__iconNode$8);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],UserCheck=createLucideIcon("user-check",__iconNode$7);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],UserPlus=createLucideIcon("user-plus",__iconNode$6);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$5);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Video=createLucideIcon("video",__iconNode$4);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$3);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],VolumeX=createLucideIcon("volume-x",__iconNode$2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode$1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zap=createLucideIcon("zap",__iconNode),LoginPage=({onLogin:g})=>{const[f,b]=reactExports.useState(!1),[C,D]=reactExports.useState(!1),[O,$]=reactExports.useState(""),[_e,ye]=reactExports.useState(""),[Fe,ot]=reactExports.useState(""),[Re,Z]=reactExports.useState(""),[I,P]=reactExports.useState(""),[Pe,ke]=reactExports.useState(""),ce=async Ne=>{Ne.preventDefault(),$(""),D(!0);const tt=_e.trim();try{if(f){if(!I.trim()||!Re.trim()||!Pe)throw new Error("Preencha todos os campos.");const Qe=I.replace("@","").toLowerCase().trim();if(!await api.checkUsername(Qe))throw new Error(`O usurio @${Qe} j est em uso.`);const fe=(await registerWithEmail(auth,tt,Fe)).user,Y=await api.registerUser(Re,tt,fe.uid,Qe,Pe);if(Y.status==="success"){const re={uid:fe.uid,id:fe.uid,name:Re,email:tt,photo:"https://ui-avatars.com/api/?name="+encodeURIComponent(Re)+"&background=0D8ABC&color=fff",username:Qe,bio:"Novo usurio"};g(re)}else throw new Error(Y.message||"Erro ao salvar dados do perfil.")}else{const ne=(await loginWithEmail(auth,tt,Fe)).user,oe=await api.getUser(ne.uid);if(oe&&oe.id)g(oe);else throw new Error("Perfil no encontrado no sistema. Contate o suporte.")}}catch(Qe){console.error(Qe);let ne=Qe.message;ne.includes("auth/email-already-in-use")&&(ne="Este email j est cadastrado."),ne.includes("auth/wrong-password")&&(ne="Senha incorreta."),ne.includes("auth/user-not-found")&&(ne="Usurio no encontrado."),(ne.includes("auth/invalid-email")||ne.includes("auth/invalid-value"))&&(ne="Email invlido."),ne.includes("auth/weak-password")&&(ne="A senha deve ter pelo menos 6 caracteres."),$(ne)}finally{D(!1)}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-gray-50 dark:bg-gray-900 relative overflow-hidden transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-full h-72 bg-gradient-to-br from-[#008069] to-[#00a884] rounded-b-[40%] -z-0 shadow-lg"}),jsxRuntimeExports.jsx("div",{className:"z-10 w-full max-w-sm px-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-2xl flex flex-col w-full border border-gray-100 dark:border-gray-700 transition-all",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-teal-50 dark:bg-teal-900/30 rounded-full mb-3 shadow-inner",children:jsxRuntimeExports.jsx(MessageCircle,{size:40,className:"text-[#008069] dark:text-teal-400"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"PH Chat"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs text-center mt-1",children:f?"Crie sua conta e conecte-se.":"Bem-vindo de volta!"})]}),O&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-500 text-xs p-3 rounded-xl mb-4 text-center font-medium border border-red-100 dark:border-red-900/30 animate-in fade-in slide-in-from-top-2",children:O}),jsxRuntimeExports.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[f&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-3 text-gray-400 group-focus-within:text-teal-500 transition-colors",size:18}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Nome Completo",value:Re,onChange:Ne=>Z(Ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-white rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 transition-all text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(AtSign,{className:"absolute left-3 top-3 text-gray-400 group-focus-within:text-teal-500 transition-colors",size:18}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Usurio (ex: paulo123)",value:I,onChange:Ne=>P(Ne.target.value.toLowerCase().replace(/\s/g,"")),className:"w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-white rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 transition-all text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Calendar,{className:"absolute left-3 top-3 text-gray-400 group-focus-within:text-teal-500 transition-colors",size:18}),jsxRuntimeExports.jsx("input",{type:"date",value:Pe,onChange:Ne=>ke(Ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-white rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 transition-all text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-3 text-gray-400 group-focus-within:text-teal-500 transition-colors",size:18}),jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Seu Email",value:_e,onChange:Ne=>ye(Ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-white rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 transition-all text-sm",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-3 text-gray-400 group-focus-within:text-teal-500 transition-colors",size:18}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Sua Senha",value:Fe,onChange:Ne=>ot(Ne.target.value),className:"w-full bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 text-gray-800 dark:text-white rounded-xl py-2.5 pl-10 pr-4 focus:outline-none focus:border-teal-500 focus:ring-1 focus:ring-teal-500 transition-all text-sm",required:!0,minLength:6})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:C,className:"w-full bg-[#008069] text-white font-bold py-3 rounded-xl hover:bg-[#006e5a] transition-all shadow-lg shadow-teal-500/30 flex items-center justify-center gap-2 mt-2 active:scale-95",children:C?jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[f?"Criar Conta":"Entrar"," ",jsxRuntimeExports.jsx(ArrowRight,{size:18})]})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:f?"J tem uma conta?":"Ainda no tem conta?"}),jsxRuntimeExports.jsx("button",{onClick:()=>{b(!f),$("")},className:"text-[#008069] dark:text-teal-400 font-bold text-sm hover:underline mt-1",children:f?"Fazer Login":"Cadastre-se Agora"})]})]})}),jsxRuntimeExports.jsx("p",{className:"absolute bottom-6 text-xs text-gray-400",children:" 2025 PH Chat App"})]})},formatTimeSP=g=>{if(!g)return"";try{const f=new Date(g);return new Intl.DateTimeFormat("pt-BR",{hour:"2-digit",minute:"2-digit",timeZone:"America/Sao_Paulo"}).format(f)}catch{return""}},ChatListPage=({currentUser:g})=>{const[f,b]=reactExports.useState([]),[C,D]=reactExports.useState(!0),[O,$]=reactExports.useState(!1),[_e,ye]=reactExports.useState([]),Fe=useNavigate();reactExports.useEffect(()=>{api.cleanupStatuses().catch(console.error)},[]);const ot=async()=>{try{const I=await api.getChats(g.id);Array.isArray(I)&&b(I)}catch(I){console.error("Erro ao buscar conversas",I)}finally{D(!1)}},Re=async()=>{try{const I=await api.getNotifications(g.id);Array.isArray(I)&&ye(I)}catch{}};reactExports.useEffect(()=>{ot();const I=setInterval(ot,3e3);return()=>clearInterval(I)},[g.id]),reactExports.useEffect(()=>{O&&Re()},[O]);const Z=(I,P)=>{I.stopPropagation(),I.preventDefault(),Fe(`/user/${P}`)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"px-5 py-4 gradient-bg text-white shadow-md z-10 sticky top-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold tracking-wide",children:"PH Chat"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-5",children:[jsxRuntimeExports.jsx(Link,{to:"/status",children:jsxRuntimeExports.jsx(Camera,{size:22})}),jsxRuntimeExports.jsx(Link,{to:"/search",children:jsxRuntimeExports.jsx(Search,{size:22})}),jsxRuntimeExports.jsxs("button",{onClick:()=>$(!0),className:"relative",children:[jsxRuntimeExports.jsx(Bell,{size:22}),jsxRuntimeExports.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-[#008069]"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-white/70 font-bold text-sm uppercase",children:[jsxRuntimeExports.jsx("span",{className:"flex-1 pb-2 border-b-2 border-white text-white text-center",children:"Conversas"}),jsxRuntimeExports.jsx(Link,{to:"/status",className:"flex-1 pb-2 text-center hover:text-white",children:"Status"}),jsxRuntimeExports.jsx(Link,{to:"/discover",className:"flex-1 pb-2 text-center hover:text-white",children:"Descobrir"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto",children:C&&f.length===0?jsxRuntimeExports.jsx("div",{className:"flex justify-center mt-10",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-[#008069] border-t-transparent rounded-full animate-spin"})}):f.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center mt-20 opacity-60 px-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:"Sem conversas ainda"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Encontre amigos para papear."}),jsxRuntimeExports.jsx(Link,{to:"/search",className:"text-white font-bold px-6 py-2 bg-[#008069] rounded-full shadow",children:"Buscar Contatos"})]}):jsxRuntimeExports.jsx("ul",{className:"pb-4",children:f.map((I,P)=>{const Pe=String(I.sender_id)===String(g.id),ke=Pe?I.receiver_id:I.sender_id,ce=I.partner_name||"Usurio",Ne=I.partner_photo||"https://picsum.photos/50/50";let tt="";return I.type==="audio"?tt=" Mensagem de udio":I.type==="video"||I.content&&I.content.includes("uploads/videos")?tt=" Vdeo":I.type==="image"||I.content&&I.content.includes("uploads/photos")?tt=" Foto":tt=I.content||"",tt||(tt="..."),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsxs(Link,{to:`/chat/${ke}`,className:"flex items-center px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsx("div",{onClick:Qe=>Z(Qe,ke),className:"relative cursor-pointer",children:jsxRuntimeExports.jsx("img",{src:Ne,alt:ce,className:"w-12 h-12 rounded-full object-cover mr-4 bg-gray-200 dark:bg-gray-700"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 border-b border-gray-100 dark:border-gray-800 pb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-bold text-gray-900 dark:text-gray-100 truncate",children:ce}),jsxRuntimeExports.jsx("span",{className:`text-xs ${I.unread>0?"text-[#00a884] font-bold":"text-gray-400"}`,children:formatTimeSP(I.timestamp)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("p",{className:`text-sm truncate flex-1 ${I.unread>0?"font-bold text-gray-800 dark:text-gray-200":"text-gray-500 dark:text-gray-400"}`,children:[Pe&&jsxRuntimeExports.jsx("span",{className:"mr-1 text-gray-400 text-xs",children:""}),tt]}),I.unread>0&&jsxRuntimeExports.jsx("span",{className:"bg-[#25D366] text-white text-[10px] font-bold px-1.5 h-5 min-w-[20px] rounded-full flex items-center justify-center",children:I.unread})]})]})]})},P)})})}),O&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex justify-end",children:jsxRuntimeExports.jsxs("div",{className:"w-80 h-full bg-white dark:bg-gray-900 shadow-2xl animate-in slide-in-from-right flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#008069] text-white flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"font-bold",children:"Notificaes"}),jsxRuntimeExports.jsx("button",{onClick:()=>$(!1),children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:_e.length===0?jsxRuntimeExports.jsx("p",{className:"text-center text-gray-400 mt-10 text-sm",children:"Nenhuma notificao recente."}):_e.map((I,P)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 border-b border-gray-100 dark:border-gray-800",children:[jsxRuntimeExports.jsx("img",{src:I.photo||"https://picsum.photos/40/40",className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx("span",{className:"font-bold",children:I.name})," ",I.content]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:I.timestamp?formatTimeSP(I.timestamp):"Hoje"})]})]},P))})]})})]})},AudioRecorder=({onSend:g})=>{const[f,b]=reactExports.useState(!1),[C,D]=reactExports.useState(null),O=reactExports.useRef(null),$=reactExports.useRef([]),_e=reactExports.useRef(null),ye=async()=>{try{const Z=await navigator.mediaDevices.getUserMedia({audio:!0});_e.current=Z;const I=new MediaRecorder(Z,{mimeType:"audio/webm"});O.current=I,$.current=[],I.ondataavailable=P=>{P.data.size>0&&$.current.push(P.data)},I.onstop=()=>{const P=new Blob($.current,{type:"audio/webm"});D(P)},I.start(),b(!0)}catch(Z){console.error("Erro microfone:",Z),alert("Acesso ao microfone negado.")}},Fe=()=>{O.current&&(O.current.stop(),b(!1),_e.current&&(_e.current.getTracks().forEach(Z=>Z.stop()),_e.current=null))},ot=()=>{C&&(g(C),D(null))},Re=()=>{D(null)};return C?jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 p-1.5 rounded-full absolute bottom-16 right-4 z-50 shadow-lg border border-gray-200",children:[jsxRuntimeExports.jsx("button",{onClick:Re,className:"p-2 text-red-500 hover:bg-red-100 rounded-full",children:jsxRuntimeExports.jsx(Trash2,{size:20})}),jsxRuntimeExports.jsx("audio",{src:URL.createObjectURL(C),controls:!0,className:"h-8 w-32"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:"p-2 bg-[#008069] text-white rounded-full hover:bg-[#006e5a]",children:jsxRuntimeExports.jsx(Send,{size:20})})]}):jsxRuntimeExports.jsx("button",{onClick:f?Fe:ye,className:`p-3 rounded-full transition-colors flex items-center justify-center ${f?"bg-red-500 text-white animate-pulse":"bg-[#008069] text-white hover:bg-[#006e5a]"}`,children:f?jsxRuntimeExports.jsx(Square,{size:24}):jsxRuntimeExports.jsx(Mic$1,{size:24})})},AudioMessage=({src:g,isMe:f})=>{const[b,C]=reactExports.useState(!1),[D,O]=reactExports.useState(0),[$,_e]=reactExports.useState(0),ye=reactExports.useRef(null),[Fe]=reactExports.useState(()=>Array.from({length:24},()=>Math.floor(Math.random()*60)+20)),ot=()=>{const Pe=ye.current;Pe&&(b?Pe.pause():Pe.play(),C(!b))},Re=()=>{const Pe=ye.current;Pe&&_e(Pe.currentTime)},Z=()=>{const Pe=ye.current;Pe&&O(Pe.duration)},I=()=>{C(!1),_e(0)},P=Pe=>{if(!Pe)return"0:00";const ke=Math.floor(Pe/60),ce=Math.floor(Pe%60);return`${ke}:${ce.toString().padStart(2,"0")}`};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-1 min-w-[220px] max-w-[280px]",children:[jsxRuntimeExports.jsx("button",{onClick:ot,className:`w-10 h-10 rounded-full flex items-center justify-center transition-all shadow-sm active:scale-95 flex-shrink-0 ${f?"bg-white text-teal-600 dark:bg-teal-900 dark:text-teal-200":"bg-teal-500 text-white"}`,children:b?jsxRuntimeExports.jsx(Pause,{size:18,fill:"currentColor"}):jsxRuntimeExports.jsx(Play,{size:18,fill:"currentColor",className:"ml-0.5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[jsxRuntimeExports.jsx("div",{className:"h-8 flex items-center gap-[2px] w-full mb-1 opacity-90",children:Fe.map((Pe,ke)=>{const ce=$/D||0,Ne=ke/Fe.length<ce;return jsxRuntimeExports.jsx("div",{className:`w-1.5 rounded-full transition-all duration-200 ${f?Ne?"bg-teal-800 dark:bg-teal-300":"bg-teal-200/60 dark:bg-teal-900/40":Ne?"bg-teal-500":"bg-gray-300 dark:bg-gray-600"} ${b?"animate-pulse":""}`,style:{height:b?`${Math.max(Pe*Math.random(),20)}%`:`${Pe}%`,animationDelay:`${ke*.05}s`}},ke)})}),jsxRuntimeExports.jsxs("div",{className:`flex justify-between text-[10px] font-medium px-0.5 ${f?"text-teal-900/70 dark:text-teal-200/70":"text-gray-500 dark:text-gray-400"}`,children:[jsxRuntimeExports.jsx("span",{children:P($)}),jsxRuntimeExports.jsx("span",{children:P(D)})]})]}),jsxRuntimeExports.jsx("audio",{ref:ye,src:g,onTimeUpdate:Re,onLoadedMetadata:Z,onEnded:I,className:"hidden"})]})};function parseChatText(g){if(!g)return[];const f=/(https?:\/\/[^\s]+)/g,b=/@([a-zA-Z0-9_.]+)/g,C=[];let D=0;const O=new RegExp(`${f.source}|${b.source}`,"g");return g.replace(O,($,_e,ye,Fe)=>(Fe>D&&C.push({type:"text",content:g.slice(D,Fe)}),$.startsWith("http")?C.push({type:"link",content:$}):$.startsWith("@")&&C.push({type:"mention",content:$.substring(1)}),D=Fe+$.length,$)),D<g.length&&C.push({type:"text",content:g.slice(D)}),C}const SENT_SOUND_URL="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2239634044.mp3?filename=pop-39222.mp3",ChatRoomPage=({currentUser:g})=>{const{id:f}=useParams(),b=useNavigate(),[C,D]=reactExports.useState([]),[O,$]=reactExports.useState(""),[_e,ye]=reactExports.useState(null),[Fe,ot]=reactExports.useState(!1),[Re,Z]=reactExports.useState(null),I=reactExports.useRef(null),P=reactExports.useRef(null),Pe=reactExports.useRef(null),[ke,ce]=reactExports.useState(!1),[Ne,tt]=reactExports.useState(null),Qe=reactExports.useRef(null),ne=reactExports.useRef(!1),oe=reactExports.useRef(null),[fe,Y]=reactExports.useState(!0),[re,K]=reactExports.useState(!1),M=reactExports.useRef(!0),F=reactExports.useRef(null);reactExports.useEffect(()=>{f&&api.getUser(f).then(pe=>{ye(pe)}).catch(pe=>console.error(pe))},[f]),reactExports.useEffect(()=>{C.length>0?F.current=C[C.length-1].id:F.current=null},[C]);const T=()=>{try{const pe=new Audio(SENT_SOUND_URL);pe.volume=.5,pe.play().catch(j=>{})}catch{}},_=pe=>pe?pe.startsWith("blob:")||pe.startsWith("http")?pe:`https://paulohenriquedev.site/api/${pe}`:"",E=()=>{const pe=oe.current;return pe?pe.scrollTop+pe.clientHeight>=pe.scrollHeight-50:!1},w=(pe=!1)=>{const j=oe.current;j&&(pe||E()||M.current)&&(j.scrollTop=j.scrollHeight,K(!1),Y(!0))},R=async()=>{if(!(!f||!g.id))try{const pe=E(),j=await api.getChatMessages(g.id,f);if(!Array.isArray(j))return;const B=j.sort((it,wt)=>new Date(it.timestamp).getTime()-new Date(wt.timestamp).getTime());if(M.current&&B.length>0){D(B),M.current=!1,setTimeout(()=>w(!0),100);return}const nt=F.current,he=B.length?B[B.length-1].id:null;!pe&&he&&nt&&nt!==he&&!M.current&&K(!0),D(B),pe&&setTimeout(()=>w(!0),50)}catch(pe){console.error("Falha ao carregar mensagens",pe)}};reactExports.useEffect(()=>{R();const pe=setInterval(R,3e3);return()=>clearInterval(pe)},[f,g.id]),reactExports.useEffect(()=>{const pe=oe.current;if(!pe)return;const j=()=>{E()?(Y(!0),K(!1)):Y(!1)};return pe.addEventListener("scroll",j),()=>pe.removeEventListener("scroll",j)},[]);const V=async pe=>{if(pe&&pe.preventDefault(),!O.trim()||!f)return;T();const j=O;$(""),ot(!0);try{await api.sendMessage(g.id,f,j,"text"),await R(),w(!0)}catch(B){console.error("Falha ao enviar",B)}finally{ot(!1)}},ae=async pe=>{if(f){T();try{const j=await api.uploadAudio(pe,g.id,f);j.status==="success"&&j.file_path&&(await api.sendMessage(g.id,f,j.file_path,"audio"),await R(),w(!0))}catch(j){console.error("Falha upload audio",j)}}},q=async pe=>{if(!f||!pe.target.files||!pe.target.files[0])return;const j=pe.target.files[0];ot(!0);try{const B=await api.uploadPhoto(j,g.id),nt=B.file_path||B.file_url;nt&&(T(),await api.sendMessage(g.id,f,nt,"image"),await R(),w(!0))}catch{alert("Erro ao enviar imagem")}finally{ot(!1),pe.target&&(pe.target.value="")}},k=async pe=>{if(!f||!pe.target.files||!pe.target.files[0])return;const j=pe.target.files[0];ot(!0);try{const B=await api.uploadVideo(j,g.id),nt=B.file_path||B.file_url;nt&&(T(),await api.sendMessage(g.id,f,nt,"video"),await R(),w(!0))}catch{alert("Erro ao enviar vdeo")}finally{ot(!1),pe.target&&(pe.target.value="")}},G=async()=>{if(Re&&confirm("Deseja apagar esta mensagem para todos?"))try{await api.deleteMessage(Re,g.id),Z(null),D(pe=>pe.filter(j=>String(j.id)!==Re))}catch{alert("Erro ao deletar")}},xe=()=>{f&&b(`/user/${f}`)},Ae=async pe=>{try{const j=await api.searchUsers(pe);j&&j.length>0?b(`/user/${j[0].id}`):alert("Usurio no encontrado")}catch{alert("Erro ao carregar perfil")}},De=(pe,j)=>{j&&(ne.current=!1,Qe.current=setTimeout(()=>{ne.current=!0,Z(pe),navigator.vibrate&&navigator.vibrate(50)},600))},Ie=()=>{Qe.current&&clearTimeout(Qe.current)},be=pe=>{pe.preventDefault()},qe=(pe,j)=>{tt({url:pe,type:j})},Ve=()=>tt(null);return f?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-[#e5ddd5] dark:bg-gray-950 overflow-hidden relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-[0.06] pointer-events-none dark:opacity-[0.03] dark:invert",style:{backgroundImage:'url("https://i.pinimg.com/originals/97/c0/07/97c00759d90d786d9b6096d274ad3e07.png")',backgroundRepeat:"repeat",backgroundSize:"400px"}}),jsxRuntimeExports.jsxs("header",{className:"flex-none gradient-bg text-white p-2 flex items-center justify-between shadow-md z-20 h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"mr-1 p-2 rounded-full active:bg-white/20",children:jsxRuntimeExports.jsx(ArrowLeft,{size:22})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center cursor-pointer",onClick:xe,children:[jsxRuntimeExports.jsx("img",{src:(_e==null?void 0:_e.photo)||"https://picsum.photos/40/40",className:"w-9 h-9 rounded-full bg-gray-200 object-cover mr-2"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h2",{className:"font-bold text-base leading-tight",children:(_e==null?void 0:_e.name)||"..."}),jsxRuntimeExports.jsx("span",{className:"text-[10px] opacity-80",children:"Clique para ver dados"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4 pr-3",children:[jsxRuntimeExports.jsx(Video,{size:22}),jsxRuntimeExports.jsx(Phone,{size:20}),jsxRuntimeExports.jsx(EllipsisVertical,{size:20})]})]}),jsxRuntimeExports.jsx("div",{ref:oe,className:"flex-1 overflow-y-auto p-4 space-y-2 relative z-10",children:C.map((pe,j)=>{const B=String(pe.sender_id)===String(g.id),nt=Number(pe.is_read)===1||pe.is_read===!0;return jsxRuntimeExports.jsx("div",{className:`flex ${B?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsxs("div",{onTouchStart:()=>De(pe.id,B),onTouchEnd:Ie,onMouseDown:()=>De(pe.id,B),onMouseUp:Ie,onContextMenu:be,className:`max-w-[80%] px-2 py-1.5 shadow-sm rounded-lg relative text-sm select-none transition-colors ${B?"bg-[#d9fdd3] dark:bg-teal-900 text-gray-800 dark:text-gray-100 rounded-tr-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-100 rounded-tl-none"} ${Re===pe.id?"ring-2 ring-red-400":""}`,children:[jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:pe.type==="audio"?jsxRuntimeExports.jsx(AudioMessage,{src:_(pe.content),isMe:B}):pe.type==="image"?jsxRuntimeExports.jsx("div",{className:"pb-1",children:jsxRuntimeExports.jsx("img",{src:pe.content,alt:"Foto",className:"rounded-lg max-h-60 max-w-full object-cover cursor-pointer",onClick:()=>qe(pe.content||"","image")})}):pe.type==="video"?jsxRuntimeExports.jsxs("div",{className:"pb-1 relative",children:[jsxRuntimeExports.jsx("video",{src:pe.content,controls:!1,className:"rounded-lg max-h-60 max-w-full object-cover cursor-pointer"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsx("div",{className:"bg-black/40 p-2 rounded-full",children:jsxRuntimeExports.jsx(Play,{size:18,color:"white"})})}),jsxRuntimeExports.jsx("div",{onClick:()=>qe(pe.content||"","video"),className:"absolute inset-0"})]}):jsxRuntimeExports.jsx("div",{className:"pb-1 px-1 whitespace-pre-wrap break-words",children:parseChatText(pe.content||"").map((he,it)=>he.type==="text"?jsxRuntimeExports.jsx("span",{children:he.content},it):he.type==="link"?jsxRuntimeExports.jsx("a",{href:he.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline break-all",children:he.content},it):jsxRuntimeExports.jsxs("span",{onClick:()=>Ae(he.content),className:"text-[#008069] font-semibold cursor-pointer",children:["@",he.content]},it))})}),jsxRuntimeExports.jsxs("div",{className:`text-[9px] ${B?"text-gray-500 dark:text-gray-400":"text-gray-400 dark:text-gray-500"} text-right flex items-center justify-end gap-1 mt-0.5`,children:[jsxRuntimeExports.jsx("span",{children:formatTimeSP(pe.timestamp)}),B&&jsxRuntimeExports.jsx("span",{children:nt?jsxRuntimeExports.jsx(CheckCheck,{className:"text-blue-500",size:16}):jsxRuntimeExports.jsx(CheckCheck,{className:"text-gray-400",size:16})})]})]})},j)})}),re&&jsxRuntimeExports.jsxs("button",{onClick:()=>{w(!0),K(!1)},className:"absolute bottom-24 left-1/2 -translate-x-1/2 bg-[#008069] text-white px-4 py-2 rounded-full shadow-lg flex items-center gap-2 z-40 animate-bounce",children:[jsxRuntimeExports.jsx(ArrowDown,{size:16})," Novas mensagens"]}),Ne&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:Ve,children:jsxRuntimeExports.jsxs("div",{className:"relative max-h-[95%] max-w-[95%]",onClick:pe=>pe.stopPropagation(),children:[jsxRuntimeExports.jsx("button",{className:"absolute top-2 right-2 text-white z-50",onClick:Ve,children:jsxRuntimeExports.jsx(X,{size:28})}),Ne.type==="image"?jsxRuntimeExports.jsx("img",{src:Ne.url,className:"max-h-[95vh] max-w-[95vw] object-contain"}):jsxRuntimeExports.jsx("video",{src:Ne.url,controls:!0,autoPlay:!0,className:"max-h-[95vh] max-w-[95vw]"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-none p-2 bg-transparent z-20 pb-2 px-2 flex gap-1 items-end",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-white dark:bg-gray-800 rounded-3xl flex items-end p-1 shadow-sm min-h-[45px]",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ce(pe=>!pe),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200",children:jsxRuntimeExports.jsx(Paperclip,{size:20})}),ke&&jsxRuntimeExports.jsxs("div",{className:"absolute bottom-12 left-0 bg-white dark:bg-gray-800 shadow-lg rounded-lg p-2 w-48 space-y-2 z-30 animate-in slide-in-from-bottom-2",children:[jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded",onClick:()=>{var pe;return(pe=Pe.current)==null?void 0:pe.click()},children:[jsxRuntimeExports.jsx(Camera,{size:16})," Tirar foto"]}),jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded",onClick:()=>{var pe;return(pe=I.current)==null?void 0:pe.click()},children:[jsxRuntimeExports.jsx(Image$1,{size:16})," Enviar imagem"]}),jsxRuntimeExports.jsxs("button",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 w-full rounded",onClick:()=>{var pe;return(pe=P.current)==null?void 0:pe.click()},children:[jsxRuntimeExports.jsx(Video,{size:16})," Enviar vdeo"]})]})]}),jsxRuntimeExports.jsx("textarea",{value:O,onChange:pe=>$(pe.target.value),placeholder:"Mensagem",className:"flex-1 bg-transparent py-2.5 px-2 focus:outline-none text-gray-700 dark:text-white placeholder-gray-400 resize-none max-h-24 overflow-y-auto",rows:1}),jsxRuntimeExports.jsx("div",{className:"p-2 flex gap-1",children:jsxRuntimeExports.jsx("button",{className:"text-gray-400 hover:text-teal-600 transition-colors",onClick:()=>{var pe;return(pe=I.current)==null?void 0:pe.click()},children:jsxRuntimeExports.jsx(Image$1,{size:20})})})]}),O.length>0?jsxRuntimeExports.jsx("button",{onClick:V,disabled:Fe,className:"w-11 h-11 bg-[#008069] text-white rounded-full flex items-center justify-center shadow-md active:scale-95 transition",children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",height:"20",width:"20",preserveAspectRatio:"xMidYMid meet",fill:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"})})}):jsxRuntimeExports.jsx("div",{className:"mb-0.5",children:jsxRuntimeExports.jsx(AudioRecorder,{onSend:ae})})]}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",ref:Pe,capture:"environment",className:"hidden",onChange:q}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",ref:I,className:"hidden",onChange:q}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",ref:P,className:"hidden",onChange:k}),Re&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-50 bg-black/40 flex items-center justify-center",onClick:()=>Z(null),children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 w-64 space-y-3",onClick:pe=>pe.stopPropagation(),children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-200 text-center mb-2",children:"Opes"}),jsxRuntimeExports.jsxs("button",{onClick:G,className:"w-full p-3 bg-red-500 text-white rounded font-bold hover:opacity-90 flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{size:18})," Apagar para todos"]}),jsxRuntimeExports.jsx("button",{onClick:()=>Z(null),className:"w-full p-2 text-gray-500 dark:text-gray-400 text-sm",children:"Cancelar"})]})})]}):jsxRuntimeExports.jsx("div",{children:"Chat Invlido"})},UserSearchPage=()=>{const[g,f]=reactExports.useState(""),[b,C]=reactExports.useState([]),[D,O]=reactExports.useState(!1);return reactExports.useEffect(()=>{const $=setTimeout(async()=>{if(g.trim()){O(!0);try{const _e=await api.searchUsers(g);Array.isArray(_e)?C(_e):C([])}catch(_e){console.error(_e)}finally{O(!1)}}else C([])},500);return()=>clearTimeout($)},[g]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"flex-none p-4 gradient-bg sticky top-0 flex items-center gap-3 h-20 shadow-md z-10 rounded-b-3xl",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"p-2 text-white hover:bg-white/20 rounded-full transition",children:jsxRuntimeExports.jsx(ArrowLeft,{size:24})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"text",value:g,onChange:$=>f($.target.value),placeholder:"Buscar por nome ou @usuario...",className:"w-full bg-white/10 text-white placeholder-white/60 rounded-2xl py-2.5 pl-4 pr-10 focus:outline-none focus:bg-white/20 focus:ring-2 focus:ring-white/30 text-base backdrop-blur-sm transition-all",autoFocus:!0}),D?jsxRuntimeExports.jsx("div",{className:"absolute right-3 w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Search,{size:18,className:"absolute right-3 text-white/60"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xs font-bold text-gray-400 uppercase tracking-wide mb-4 pl-2",children:"Resultados"}),jsxRuntimeExports.jsx("ul",{className:"space-y-3",children:b.map($=>jsxRuntimeExports.jsx("li",{className:"flex items-center justify-between p-3.5 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-100 dark:border-gray-700 rounded-2xl shadow-sm transition-all",children:jsxRuntimeExports.jsxs(Link,{to:`/user/${$.id}`,className:"flex items-center space-x-3 overflow-hidden flex-1",children:[jsxRuntimeExports.jsx("img",{src:$.photo||"https://picsum.photos/50/50",alt:$.name,className:"w-12 h-12 rounded-xl object-cover bg-gray-200 dark:bg-gray-600 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 truncate text-base",children:$.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-teal-600 dark:text-teal-400 font-medium truncate",children:["@",$.username||"user"]}),$.bio&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5",children:$.bio})]})]})},$.id))})]})]})},ProfilePage=({user:g,onLogout:f,onUpdateUser:b})=>{const[C,D]=reactExports.useState(g.name),[O,$]=reactExports.useState(g.username||""),[_e,ye]=reactExports.useState(g.bio||""),[Fe,ot]=reactExports.useState(g.photo),[Re,Z]=reactExports.useState(!1),[I,P]=reactExports.useState(!1),[Pe,ke]=reactExports.useState(!1),[ce,Ne]=reactExports.useState(!1),[tt,Qe]=reactExports.useState(null),[ne,oe]=reactExports.useState(document.documentElement.classList.contains("dark")),[fe,Y]=reactExports.useState("idle");reactExports.useEffect(()=>{api.getProfileStats(g.id,g.id).then(Qe).catch(console.error)},[g.id]),reactExports.useEffect(()=>{const E=setTimeout(async()=>{if(O!==g.username&&O.trim().length>2){Y("checking");const w=await api.checkUsername(O);Y(w?"available":"taken")}else Y("idle")},500);return()=>clearTimeout(E)},[O,g.username]);const re=()=>{ne?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),oe(!1)):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),oe(!0))},K=async E=>{if(!E.target.files||!E.target.files[0])return;const w=E.target.files[0];ot(URL.createObjectURL(w)),Z(!0);try{const R=await api.updateUserPhoto(w,g.id);R.status==="success"&&R.file_url?(alert("Foto atualizada!"),b({photo:R.file_url})):(alert("Erro ao atualizar foto."),ot(g.photo))}catch{alert("Erro ao enviar imagem."),ot(g.photo)}finally{Z(!1)}},M=async()=>{if(C.trim()){P(!0);try{(await api.updateName(g.id,C)).status==="success"&&(b({name:C}),alert("Nome atualizado!"))}finally{P(!1)}}},F=async()=>{if(fe!=="available")return;const E=O.replace("@","").toLowerCase();Ne(!0);try{(await api.updateUsername(g.id,E)).status==="success"&&(b({username:E}),alert("Usurio atualizado!"))}finally{Ne(!1)}},T=async()=>{ke(!0);try{(await api.updateBio(g.id,_e)).status==="success"&&(b({bio:_e}),alert("Bio atualizada!"))}finally{ke(!1)}},_=()=>{auth.signOut(),f()};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 pb-20 overflow-y-auto",children:[jsxRuntimeExports.jsxs("header",{className:"p-4 pt-6 gradient-bg text-white flex items-center justify-between shadow-lg sticky top-0 z-10 rounded-b-3xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold ml-2",children:"Editar Perfil"}),jsxRuntimeExports.jsx("button",{onClick:re,className:"p-2 bg-white/20 rounded-full hover:bg-white/30 transition",children:ne?jsxRuntimeExports.jsx(Sun,{size:20}):jsxRuntimeExports.jsx(Moon,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative mb-6 mt-4 flex flex-col items-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"p-1 rounded-full border-4 border-teal-100 dark:border-teal-900 shadow-xl",children:jsxRuntimeExports.jsx("img",{src:Fe||"https://picsum.photos/150/150",className:`w-36 h-36 rounded-full object-cover ${Re?"opacity-50 blur-sm":""}`})}),Re&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mt-4",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition shadow-sm",children:[jsxRuntimeExports.jsx(Image$1,{size:18,className:"text-teal-600 dark:text-teal-400"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:"Galeria"}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:K})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-800 px-4 py-2 rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition shadow-sm",children:[jsxRuntimeExports.jsx(Camera,{size:18,className:"text-teal-600 dark:text-teal-400"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-bold",children:"Cmera"}),jsxRuntimeExports.jsx("input",{type:"file",className:"hidden",accept:"image/*",capture:"environment",onChange:K})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-around mt-2 mb-8 py-4 border-y border-gray-100 dark:border-gray-800 w-full",children:[jsxRuntimeExports.jsxs(Link,{to:`/follow-list/${g.id}/followers`,className:"text-center w-1/3 border-r border-gray-100 dark:border-gray-800",children:[jsxRuntimeExports.jsx("span",{className:"block font-bold text-xl text-gray-800 dark:text-gray-100",children:(tt==null?void 0:tt.followers)||0}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Seguidores"})]}),jsxRuntimeExports.jsxs(Link,{to:`/follow-list/${g.id}/following`,className:"text-center w-1/3",children:[jsxRuntimeExports.jsx("span",{className:"block font-bold text-xl text-gray-800 dark:text-gray-100",children:(tt==null?void 0:tt.following)||0}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Seguindo"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-teal-600 dark:text-teal-400 mb-1 uppercase tracking-wide",children:"Nome"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"text",value:C,onChange:E=>D(E.target.value),className:"w-full bg-transparent border-b border-gray-200 dark:border-gray-600 py-1 focus:border-teal-500 text-base"}),C!==g.name&&jsxRuntimeExports.jsx("button",{onClick:M,disabled:I,className:"ml-2 p-2 bg-teal-600 text-white rounded-full",children:I?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Save,{size:16})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-xs font-bold text-teal-600 dark:text-teal-400 mb-1 uppercase tracking-wide",children:"Usurio"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"mr-1",children:"@"}),jsxRuntimeExports.jsx("input",{value:O,onChange:E=>$(E.target.value.toLowerCase().replace(/\s/g,"")),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-600 py-1 focus:border-teal-500"}),fe==="checking"&&jsxRuntimeExports.jsx("span",{className:"absolute right-12 text-xs",children:"..."}),fe==="available"&&jsxRuntimeExports.jsx(CircleCheckBig,{size:18,className:"absolute right-12 text-green-500"}),fe==="taken"&&jsxRuntimeExports.jsx(CircleX,{size:18,className:"absolute right-12 text-red-500"}),O!==g.username&&fe==="available"&&jsxRuntimeExports.jsx("button",{onClick:F,disabled:ce,className:"ml-2 p-2 bg-teal-600 text-white rounded-full",children:ce?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Save,{size:16})})]}),fe==="taken"&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-[10px] mt-1",children:"Nome de usurio indisponvel."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-bold text-teal-600 dark:text-teal-400 uppercase tracking-wide",children:"Bio"}),_e!==g.bio&&jsxRuntimeExports.jsx("button",{onClick:T,disabled:Pe,className:"p-1.5 bg-teal-600 text-white rounded-full",children:Pe?jsxRuntimeExports.jsx("div",{className:"w-3 h-3 border-2 border-white/50 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Save,{size:14})})]}),jsxRuntimeExports.jsx("textarea",{value:_e,onChange:E=>ye(E.target.value),rows:3,className:"w-full bg-transparent text-sm resize-none focus:outline-none",placeholder:"Conte um pouco sobre voc..."})]}),jsxRuntimeExports.jsxs(Link,{to:`/user/${g.id}`,className:"flex items-center justify-center gap-2 w-full py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-2xl font-bold",children:[jsxRuntimeExports.jsx(Eye,{size:18})," Ver meu perfil pblico"]}),jsxRuntimeExports.jsxs("button",{onClick:_,className:"w-full border-2 border-red-200 dark:border-red-900/40 text-red-500 font-bold py-4 rounded-2xl hover:bg-red-50 dark:hover:bg-red-900/20 transition flex justify-center items-center",children:[jsxRuntimeExports.jsx(LogOut,{size:20,className:"mr-2"})," Sair da conta"]})]})]})]})},StatusPage=({currentUser:g})=>{const[f,b]=reactExports.useState([]),[C,D]=reactExports.useState(null),[O,$]=reactExports.useState(0),[_e,ye]=reactExports.useState(0),[Fe,ot]=reactExports.useState(null),[Re,Z]=reactExports.useState(""),[I,P]=reactExports.useState(!1),Pe=reactExports.useRef(null),[ke,ce]=reactExports.useState(!1),[Ne,tt]=reactExports.useState("select"),[Qe,ne]=reactExports.useState(null),[oe,fe]=reactExports.useState(""),[Y,re]=reactExports.useState(null),[K,M]=reactExports.useState(!1),F=reactExports.useRef(null),T=reactExports.useRef(null),_=reactExports.useCallback(async()=>{try{const Ve=await api.getStatuses(g.id);if(Array.isArray(Ve)){const pe={};Ve.forEach(he=>{pe[he.user_id]||(pe[he.user_id]={user_id:he.user_id,user_name:he.user_id===g.id?"Meu Status":he.name,user_photo:he.photo,statuses:[],hasUnviewed:!1}),pe[he.user_id].statuses.push(he),he.user_id!==g.id&&!he.viewed_by_me&&(pe[he.user_id].hasUnviewed=!0)});let j=Object.values(pe);const B=j.find(he=>he.user_id===g.id),nt=j.filter(he=>he.user_id!==g.id);nt.sort((he,it)=>he.hasUnviewed&&!it.hasUnviewed?-1:!he.hasUnviewed&&it.hasUnviewed?1:0),b(B?[B,...nt]:nt)}}catch(Ve){console.error(Ve)}},[g.id]);reactExports.useEffect(()=>{_()},[_]);const E=Ve=>{Ve&&URL.revokeObjectURL(Ve)},w=async()=>{if(Ne!=="text"&&!Qe){alert("Contedo vazio.");return}if(Ne==="text"&&!oe.trim()){alert("Digite algum texto.");return}M(!0);try{let Ve="",pe=Ne==="camera"?"image":Ne;if(Qe)try{let B;if(Ne==="camera"?B=await api.uploadPhoto(Qe,g.id):Ne==="video"&&(B=await api.uploadVideo(Qe,g.id)),B!=null&&B.file_url)Ve=B.file_url;else if(B!=null&&B.file_path)Ve=`https://paulohenriquedev.site/api/${B.file_path}`;else throw new Error("Servidor no retornou URL.")}catch(B){alert("Erro no upload: "+(B.message||"Tente novamente.")),M(!1);return}const j=await api.postStatus(g.id,Ve,pe,oe);j&&j.status==="success"?(ce(!1),ne(null),E(Y),re(null),fe(""),tt("select"),await _()):alert(j.message||"Erro ao salvar status.")}catch(Ve){alert("Erro: "+(Ve.message||"Erro de conexo"))}finally{M(!1)}},R=(Ve,pe)=>{if(Ve.target.files&&Ve.target.files[0]){const j=Ve.target.files[0];E(Y);const B=URL.createObjectURL(j);ne(j),tt(pe),re(B)}},V=()=>{E(Y),ne(null),re(null),fe(""),tt("select")},ae=async()=>{if(!Re.trim()||C===null)return;const Ve=f[C].user_id;P(!0);try{await api.sendMessage(g.id,Ve,`Reagiu ao status: ${Re}`,"text"),Z(""),alert("Resposta enviada!")}catch(pe){console.error(pe)}finally{P(!1)}},q=async Ve=>{if(!Ve.target.files||!Ve.target.files[0]||C===null)return;const pe=f[C].user_id,j=Ve.target.files[0];P(!0);try{const B=await api.uploadPhoto(j,g.id),nt=B.file_path||B.file_url;nt&&(await api.sendMessage(g.id,pe,nt,"image"),alert("Foto enviada!"))}catch(B){console.error(B),alert("Erro ao enviar foto")}finally{P(!1)}};reactExports.useEffect(()=>{T.current&&(window.clearInterval(T.current),T.current=null);let Ve=null;if(C!==null){const pe=f[C];if(!pe||!pe.statuses[O]){xe();return}const j=pe.statuses[O];j.user_id!==g.id&&!j.viewed_by_me&&(api.viewStatus(j.id,g.id).catch(()=>{}),j.viewed_by_me=!0),ye(0);const B=5e3;if(j.media_type==="video"||Re.length>0)return;const nt=100/(B/100);Ve=window.setInterval(()=>{ye(he=>he>=100?(Ve&&window.clearInterval(Ve),k(),100):he+nt)},100),T.current=Ve}return()=>{Ve&&window.clearInterval(Ve),T.current&&(window.clearInterval(T.current),T.current=null)}},[C,O,f,g.id,Re]);const k=()=>{if(C===null)return;const Ve=f[C];O<Ve.statuses.length-1?($(pe=>pe+1),ye(0)):C<f.length-1?(D(pe=>pe!==null?pe+1:null),$(0),ye(0)):xe()},G=()=>{O>0?($(Ve=>Ve-1),ye(0)):C!==null&&C>0?(D(Ve=>Ve!==null?Ve-1:null),$(0)):xe()},xe=()=>{D(null),$(0),ye(0),ot(null),Z("");try{F.current&&(F.current.pause(),F.current.currentTime=0)}catch{}},Ae=async()=>{if(C===null)return;const pe=f[C].statuses[O];if(confirm("Excluir este status?")){await api.deleteStatus(pe.id,g.id);const j=[...f],B=C;j[B]={...j[B],statuses:j[B].statuses.filter(nt=>nt.id!==pe.id)},j[B].statuses.length===0?(j.splice(B,1),b(j),xe()):(b(j),O>=j[B].statuses.length&&$(Math.max(0,j[B].statuses.length-1)),ye(0))}},De=async()=>{if(C===null)return;const Ve=f[C].statuses[O],pe=await api.getStatusViewers(Ve.id);ot(pe)},Ie=C!==null?f[C]:null,be=Ie?Ie.statuses[O]:null,qe=()=>{if(!F.current||!be||Re.length>0)return;const Ve=F.current;if(Ve.duration&&!isNaN(Ve.duration)){const pe=Ve.currentTime/Ve.duration*100;ye(Math.min(100,pe))}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col min-h-screen bg-white dark:bg-gray-900 pb-20 overflow-hidden",children:[jsxRuntimeExports.jsxs("header",{className:"px-5 py-4 gradient-bg text-white shadow-sm z-10 sticky top-0 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"Status"}),jsxRuntimeExports.jsx("button",{onClick:()=>ce(!0),className:"bg-white/20 p-2 rounded-full hover:bg-white/30 transition",children:jsxRuntimeExports.jsx(Camera,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-3 overflow-x-auto pb-4 no-scrollbar",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-[100px] h-[160px] relative rounded-xl overflow-hidden cursor-pointer shadow-md group border border-gray-100 dark:border-gray-800",onClick:()=>{const Ve=f.findIndex(pe=>pe.user_id===g.id);Ve!==-1?(D(Ve),$(0)):ce(!0)},children:[jsxRuntimeExports.jsx("img",{src:g.photo,alt:"me",className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/30 transition"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-full p-2 bg-gradient-to-t from-black/80 to-transparent",children:jsxRuntimeExports.jsx("p",{className:"text-white text-xs font-bold truncate",children:"Meu Status"})}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 bg-white rounded-full p-1 shadow",children:jsxRuntimeExports.jsx(Plus,{size:16,className:"text-[#008069]"})})]}),f.filter(Ve=>Ve.user_id!==g.id).map((Ve,pe)=>{const j=f.findIndex(he=>he.user_id===Ve.user_id),B=Ve.statuses[Ve.statuses.length-1];let nt=Ve.user_photo;return B&&B.media_type==="image"&&(nt=B.media_url),jsxRuntimeExports.jsxs("div",{className:`min-w-[100px] h-[160px] relative rounded-xl overflow-hidden cursor-pointer shadow-md group border-2 ${Ve.hasUnviewed?"border-[#008069]":"border-gray-100 dark:border-gray-700"}`,onClick:()=>{D(j),$(0)},children:[jsxRuntimeExports.jsx("img",{src:nt,alt:Ve.user_name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/30 transition"}),jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 p-0.5 rounded-full bg-[#008069] border border-white",children:jsxRuntimeExports.jsx("img",{src:Ve.user_photo,alt:Ve.user_name,className:"w-6 h-6 rounded-full object-cover"})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-full p-2 bg-gradient-to-t from-black/80 to-transparent",children:jsxRuntimeExports.jsx("p",{className:"text-white text-xs font-bold truncate",children:Ve.user_name})})]},Ve.user_id)})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200 text-lg mb-2",children:"Atualizaes"}),f.length<=1&&jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Nenhum status recente dos seus amigos."})]})]}),ke&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900 flex flex-col animate-in slide-in-from-bottom",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-4 bg-black/40 text-white z-20",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{ce(!1),V()},children:jsxRuntimeExports.jsx(X,{size:24})}),jsxRuntimeExports.jsx("span",{className:"font-bold text-lg",children:"Criar Status"}),Ne!=="select"&&jsxRuntimeExports.jsx("button",{onClick:w,disabled:K,className:"bg-[#008069] w-10 h-10 rounded-full flex items-center justify-center disabled:opacity-50 shadow-lg",children:K?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):jsxRuntimeExports.jsx(Send,{size:20,className:"-rotate-12 mr-0.5 mt-0.5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative bg-gray-900 overflow-hidden",children:[Ne==="select"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full p-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-white text-2xl font-bold mb-12",children:"Escolha o tipo de status"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-xs",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>tt("text"),className:"flex items-center gap-4 p-5 bg-gray-800 rounded-2xl hover:bg-gray-700 transition-all duration-200 transform hover:scale-105",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Type,{size:24,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-lg",children:"Texto"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-4 p-5 bg-gray-800 rounded-2xl hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Camera,{size:24,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-lg",children:"Foto"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Ve=>R(Ve,"camera")})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-4 p-5 bg-gray-800 rounded-2xl hover:bg-gray-700 transition-all duration-200 transform hover:scale-105 cursor-pointer",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full bg-teal-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Video,{size:24,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-lg",children:"Vdeo"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:Ve=>R(Ve,"video")})]})]})]}),Ne==="text"&&jsxRuntimeExports.jsxs("div",{className:"w-full h-full flex flex-col",children:[jsxRuntimeExports.jsx("textarea",{value:oe,onChange:Ve=>fe(Ve.target.value),placeholder:"Digite seu status...",className:"w-full h-full bg-teal-900 text-white text-3xl font-bold text-center outline-none resize-none p-8 placeholder-teal-700/50",autoFocus:!0}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-black/40 flex justify-between items-center",children:[jsxRuntimeExports.jsx("button",{onClick:V,className:"text-white bg-gray-700 px-4 py-2 rounded-lg hover:bg-gray-600 transition",children:"Voltar"}),jsxRuntimeExports.jsx("button",{onClick:w,disabled:!oe.trim()||K,className:"bg-[#008069] px-6 py-2 rounded-lg text-white font-bold disabled:opacity-50 flex items-center gap-2",children:K?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send,{size:18,className:"-rotate-12"}),"Publicar"]})})]})]}),Qe&&Ne!=="text"&&jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center justify-center bg-black relative w-full max-w-4xl",children:[Ne==="camera"&&jsxRuntimeExports.jsx("img",{src:Y,className:"max-w-full max-h-full object-contain",alt:"Preview"}),Ne==="video"&&jsxRuntimeExports.jsx("video",{src:Y,controls:!0,className:"max-w-full max-h-full"}),jsxRuntimeExports.jsx("button",{onClick:V,className:"absolute top-4 right-4 bg-black/60 p-2 rounded-full text-white z-20 hover:bg-red-500/80 transition",children:jsxRuntimeExports.jsx(Trash2,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-black/40 w-full max-w-4xl",children:[jsxRuntimeExports.jsx("input",{value:oe,onChange:Ve=>fe(Ve.target.value),placeholder:"Adicionar legenda...",className:"w-full bg-gray-800 text-white p-3 rounded-full outline-none text-center placeholder-gray-500 mb-3"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("button",{onClick:V,className:"text-white bg-gray-700 px-4 py-2 rounded-lg hover:bg-gray-600 transition",children:"Voltar"}),jsxRuntimeExports.jsx("button",{onClick:w,disabled:K,className:"bg-[#008069] px-6 py-2 rounded-lg text-white font-bold disabled:opacity-50 flex items-center gap-2",children:K?jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send,{size:18,className:"-rotate-12"}),"Publicar"]})})]})]})]})]})]}),Ie&&be&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 right-2 flex gap-1 z-20",children:Ie.statuses.map((Ve,pe)=>jsxRuntimeExports.jsx("div",{className:"h-1 bg-white/30 flex-1 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-white transition-all duration-100 linear",style:{width:pe<O?"100%":pe===O?`${_e}%`:"0%"}})},Ve.id))}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 pt-6 text-white z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("img",{src:Ie.user_photo,className:"w-10 h-10 rounded-full border border-white/50"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-sm",children:Ie.user_name}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-300",children:formatTimeSP(be.timestamp)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[Ie.user_id===g.id&&jsxRuntimeExports.jsx("button",{onClick:Ae,className:"p-2",children:jsxRuntimeExports.jsx(Trash2,{size:24})}),jsxRuntimeExports.jsx("button",{onClick:xe,children:jsxRuntimeExports.jsx(X,{size:28})})]})]}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex z-0",children:[jsxRuntimeExports.jsx("div",{className:"w-1/3 h-full",onClick:G}),jsxRuntimeExports.jsx("div",{className:"w-1/3 h-full"}),jsxRuntimeExports.jsx("div",{className:"w-1/3 h-full",onClick:k})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center justify-center relative bg-gray-900 pointer-events-none",children:[be.media_type==="image"&&jsxRuntimeExports.jsx("img",{src:be.media_url,className:"max-w-full max-h-full object-contain"}),be.media_type==="video"&&jsxRuntimeExports.jsx("video",{ref:F,src:be.media_url,className:"max-w-full max-h-full pointer-events-auto",autoPlay:!0,playsInline:!0,onTimeUpdate:qe,onEnded:()=>{ye(100),setTimeout(k,100)}}),be.media_type==="audio"&&jsxRuntimeExports.jsxs("div",{className:"w-full px-10 pointer-events-auto bg-black/50 p-8 rounded-2xl backdrop-blur-md border border-white/10 flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-teal-600 rounded-full flex items-center justify-center mb-6 animate-pulse",children:jsxRuntimeExports.jsx(Mic,{size:40,className:"text-white"})}),jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx(AudioMessage,{src:be.media_url,isMe:!1})}),jsxRuntimeExports.jsx("audio",{src:be.media_url,autoPlay:!0,onEnded:()=>{ye(100),setTimeout(k,100)},className:"hidden"})]}),be.media_type==="text"&&jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-teal-900 flex items-center justify-center p-8 text-center break-words",children:jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-white leading-relaxed",children:be.caption})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 w-full flex flex-col items-center text-white z-20 pb-4 pointer-events-auto px-4",children:[be.caption&&be.media_type!=="text"&&jsxRuntimeExports.jsx("p",{className:"text-lg bg-black/40 backdrop-blur-md p-3 rounded-xl mb-4 max-w-[85%] text-center",children:be.caption}),Ie.user_id===g.id?jsxRuntimeExports.jsxs("button",{onClick:De,className:"flex flex-col items-center mb-24 opacity-90 hover:opacity-100",children:[jsxRuntimeExports.jsx(Eye,{size:24}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-bold mt-1",children:[Fe?Fe.length:be.viewers_count||0," views"]})]}):jsxRuntimeExports.jsxs("div",{className:"w-full flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsxs("label",{className:"p-3 bg-black/40 backdrop-blur-md rounded-full cursor-pointer hover:bg-black/60 transition",children:[jsxRuntimeExports.jsx(Camera,{size:22}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",ref:Pe,onChange:q})]}),jsxRuntimeExports.jsx("input",{value:Re,onChange:Ve=>Z(Ve.target.value),placeholder:"Responder...",className:"flex-1 bg-black/40 backdrop-blur-md text-white px-4 py-3 rounded-full outline-none placeholder-gray-300 border border-white/10"}),Re.trim()&&jsxRuntimeExports.jsx("button",{onClick:ae,className:"p-3 bg-[#008069] rounded-full hover:bg-[#006e5a] transition",children:I?jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin"}):jsxRuntimeExports.jsx(Send,{size:20})})]})]}),Fe&&jsxRuntimeExports.jsxs("div",{className:"absolute bottom-0 w-full bg-white dark:bg-gray-800 rounded-t-3xl h-[50%] text-black dark:text-white z-30 animate-in slide-in-from-bottom p-4 shadow-2xl",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-lg",children:["Visualizado por ",Fe.length]}),jsxRuntimeExports.jsx("button",{onClick:()=>ot(null),children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsx("ul",{className:"overflow-y-auto h-full pb-10 space-y-2",children:Fe.map((Ve,pe)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-3 py-2 px-2 hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded-xl",children:[jsxRuntimeExports.jsx("img",{src:Ve.photo,className:"w-10 h-10 rounded-full bg-gray-200 object-cover"}),jsxRuntimeExports.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-200 text-sm",children:Ve.name})]},pe))})]})]})]})};function parsePostText(g){if(!g)return[];const f=/(https?:\/\/[^\s]+)/g,b=/@([a-zA-Z0-9_.]+)/g,C=[];let D=0;const O=new RegExp(`${f.source}|${b.source}`,"g");return g.replace(O,($,_e,ye,Fe)=>(Fe>D&&C.push({type:"text",content:g.slice(D,Fe)}),$.startsWith("http")?C.push({type:"link",content:$}):$.startsWith("@")&&C.push({type:"mention",content:$.substring(1)}),D=Fe+$.length,$)),D<g.length&&C.push({type:"text",content:g.slice(D)}),C}const PostCard=({post:g,currentUser:f})=>{const b=useNavigate(),C=async q=>{try{const k=await api.getUserByUsername(q);if(!k||k.error){alert("Usurio no encontrado");return}b(`/socialProfile/${k.uid}`)}catch{alert("Erro ao carregar perfil")}},[D,O]=reactExports.useState(g.liked_by_me),[$,_e]=reactExports.useState(Number(g.likes_count)),[ye,Fe]=reactExports.useState(Number(g.comments_count)),[ot,Re]=reactExports.useState(!1),[Z,I]=reactExports.useState(g.is_following),[P,Pe]=reactExports.useState(!1),[ke,ce]=reactExports.useState([]),[Ne,tt]=reactExports.useState(""),[Qe,ne]=reactExports.useState(!1),oe=reactExports.useRef(null),fe=reactExports.useRef(null),[Y,re]=reactExports.useState(!1),[K,M]=reactExports.useState(!0);reactExports.useEffect(()=>{if(g.media_type!=="video"||!fe.current)return;const q=new IntersectionObserver(k=>{k.forEach(G=>{var xe,Ae;G.isIntersecting?(xe=fe.current)==null||xe.play().catch(()=>{}):(Ae=fe.current)==null||Ae.pause()})},{threshold:.6});return q.observe(fe.current),()=>q.disconnect()},[g.media_type]);const F=async()=>{const q=!D;O(q),_e(k=>q?k+1:k-1);try{await api.likePost(f.id,g.id)}catch{O(!q),_e(k=>q?k-1:k+1)}},T=async()=>{const q=Z?"unfollow":"follow";I(!Z);try{await api.followUser(f.id,g.user_id,q)}catch{I(!Z)}},_=async()=>{ne(!0),Pe(!0);try{const q=await api.getComments(g.id);ce(Array.isArray(q)?q:[])}catch{ce([])}finally{ne(!1)}},E=async()=>{if(!Ne.trim())return;const q=Ne;tt("");const k={id:"temp-"+Date.now(),user_id:f.id,name:f.name,photo:f.photo,content:q,timestamp:new Date().toISOString()};ce(G=>[...G,k]),Fe(G=>G+1);try{await api.commentPost(f.id,g.id,q),await _()}catch{alert("Erro ao comentar"),ce(G=>G.filter(xe=>xe.id!==k.id)),tt(q)}},w=q=>{var k;tt(`@${q} `),(k=oe.current)==null||k.focus()},R=()=>{var q;re(!0),(q=fe.current)==null||q.pause()},V=async()=>{confirm("Apagar postagem?")&&(await api.deletePost(g.id,f.id),Re(!0))};if(ot)return null;const ae=new Date(g.timestamp).toLocaleDateString("pt-BR",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border mb-4 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Link,{to:`/socialProfile/${g.user_id}`,children:jsxRuntimeExports.jsx("img",{src:g.photo,className:"w-9 h-9 rounded-full border"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Link,{to:`/socialProfile/${g.user_id}`,className:"font-bold text-sm",children:g.name})}),g.user_id!==f.id&&!Z&&jsxRuntimeExports.jsxs("button",{onClick:T,className:"ml-2 px-3 py-1 text-xs font-bold bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx(UserPlus,{size:12})," Seguir"]})]}),g.user_id===f.id&&jsxRuntimeExports.jsx("button",{onClick:V,children:jsxRuntimeExports.jsx(Trash2,{size:16,className:"text-gray-400 hover:text-red-500"})})]}),g.content&&jsxRuntimeExports.jsx("div",{className:"px-3 pb-2 text-sm leading-relaxed whitespace-pre-wrap",children:parsePostText(g.content).map((q,k)=>q.type==="text"?jsxRuntimeExports.jsx("span",{children:q.content},k):q.type==="link"?jsxRuntimeExports.jsx("a",{href:q.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline break-all",children:q.content},k):jsxRuntimeExports.jsxs("span",{onClick:()=>C(q.content),className:"text-[#008069] font-semibold cursor-pointer",children:["@",q.content]},k))}),g.media_type==="image"&&jsxRuntimeExports.jsx("img",{src:g.media_url,className:"w-full max-h-[500px] object-cover",loading:"lazy"}),g.media_type==="video"&&jsxRuntimeExports.jsxs("div",{onClick:R,className:"relative cursor-pointer bg-black",children:[jsxRuntimeExports.jsx("video",{ref:fe,src:g.media_url,className:"w-full max-h-[500px] object-cover",muted:!0,loop:!0,playsInline:!0}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"bg-black/40 p-3 rounded-full",children:jsxRuntimeExports.jsx(Play,{fill:"white",size:24})})})]}),g.media_type==="audio"&&jsxRuntimeExports.jsx("div",{className:"px-3 pb-3",children:jsxRuntimeExports.jsx(AudioMessage,{src:g.media_url,isMe:!1})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[jsxRuntimeExports.jsx("button",{onClick:F,className:`${D?"text-red-500":""}`,children:jsxRuntimeExports.jsx(Heart,{size:24,fill:D?"currentColor":"none"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{var q;P||_(),(q=oe.current)==null||q.focus()},children:jsxRuntimeExports.jsx(MessageSquare,{size:24})}),jsxRuntimeExports.jsx("button",{className:"ml-auto",children:jsxRuntimeExports.jsx(Send,{size:22,className:"-rotate-12"})})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 pb-1 font-bold text-sm",children:[$," curtidas"]}),!P&&ye>0&&jsxRuntimeExports.jsxs("button",{onClick:_,className:"px-4 text-sm text-gray-500",children:["Ver todos os ",ye," comentrios"]}),P&&jsxRuntimeExports.jsx("div",{className:"px-4 mt-2 space-y-4 pb-3",children:Qe?jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carregando..."}):ke.length===0?jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Nenhum comentrio ainda."}):ke.map((q,k)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Link,{to:`/socialProfile/${q.user_id}`,children:jsxRuntimeExports.jsx("img",{src:q.photo,className:"w-8 h-8 rounded-full"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx(Link,{to:`/socialProfile/${q.user_id}`,className:"font-bold mr-2",children:q.name}),parsePostText(q.content).map((G,xe)=>G.type==="text"?jsxRuntimeExports.jsx("span",{children:G.content},xe):G.type==="link"?jsxRuntimeExports.jsx("a",{href:G.content,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 underline break-all",children:G.content},xe):jsxRuntimeExports.jsxs("span",{onClick:()=>C(G.content),className:"text-[#008069] font-semibold cursor-pointer",children:["@",G.content]},xe))]}),jsxRuntimeExports.jsx("button",{onClick:()=>w(q.name),className:"text-[10px] mt-1 text-gray-500",children:"Responder"})]})]},k))}),jsxRuntimeExports.jsx("div",{className:"px-4 text-[10px] text-gray-400 mb-2",children:ae}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-t",children:[jsxRuntimeExports.jsx("img",{src:f.photo,className:"w-8 h-8 rounded-full"}),jsxRuntimeExports.jsx("input",{ref:oe,value:Ne,onChange:q=>tt(q.target.value),placeholder:"Adicione um comentrio...",className:"flex-1 bg-transparent text-sm",onKeyDown:q=>q.key==="Enter"&&E()}),Ne.trim()&&jsxRuntimeExports.jsx("button",{onClick:E,className:"text-[#008069] font-bold",children:"Publicar"})]})]}),Y&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black z-[999] flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 p-4",children:jsxRuntimeExports.jsx("button",{onClick:()=>re(!1),children:jsxRuntimeExports.jsx(X,{size:28,color:"white"})})}),jsxRuntimeExports.jsx("video",{src:g.media_url,className:"w-full h-full object-contain",autoPlay:!0,loop:!0,muted:K,onClick:()=>M(!K)}),jsxRuntimeExports.jsx("button",{onClick:()=>M(!K),className:"absolute bottom-10 right-4 bg-black/40 p-3 rounded-full",children:K?jsxRuntimeExports.jsx(VolumeX,{color:"white"}):jsxRuntimeExports.jsx(Volume2,{color:"white"})})]})]})},DiscoverPage=({currentUser:g})=>{const[f,b]=reactExports.useState([]),[C,D]=reactExports.useState(!0),[O,$]=reactExports.useState(!1),[_e,ye]=reactExports.useState("all"),[Fe,ot]=reactExports.useState(""),[Re,Z]=reactExports.useState("text"),[I,P]=reactExports.useState(null),[Pe,ke]=reactExports.useState(null),[ce,Ne]=reactExports.useState(!1),tt=async()=>{try{const Y=await api.getPosts(g.id);Array.isArray(Y)&&b(Y)}catch(Y){console.error(Y)}finally{D(!1)}};reactExports.useEffect(()=>{tt()},[g.id]);const Qe=(Y,re)=>{if(Y.target.files&&Y.target.files[0]){const K=Y.target.files[0];P(K),Z(re),ke(URL.createObjectURL(K))}},ne=()=>{$(!1),ot(""),P(null),ke(null),Z("text")},oe=async()=>{if(!Fe.trim()&&!I)return alert("Escreva algo ou adicione mdia.");Ne(!0);try{let Y="";if(I){if(Re==="image"){const re=await api.uploadPhoto(I,g.id);re.file_url&&(Y=re.file_url)}else if(Re==="video"){const re=await api.uploadVideo(I,g.id);re.file_url&&(Y=re.file_url)}}await api.createPost(g.id,Fe,Y,Re),tt(),ne()}catch{alert("Erro ao publicar")}finally{Ne(!1)}},fe=f.filter(Y=>_e==="all"?!0:Y.media_type===_e);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-gray-100 dark:bg-gray-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"gradient-bg pt-4 pb-2 text-white shadow-md z-10 sticky top-0 rounded-b-xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold px-5 mb-3",children:"Descobrir"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 overflow-x-auto px-4 pb-2 no-scrollbar",children:[{id:"all",label:"Tudo"},{id:"image",label:"Fotos"},{id:"video",label:"Vdeos"},{id:"text",label:"Texto"}].map(Y=>jsxRuntimeExports.jsx("button",{onClick:()=>ye(Y.id),className:`px-4 py-1.5 rounded-full text-sm font-bold whitespace-nowrap transition-colors ${_e===Y.id?"bg-white text-[#008069]":"bg-[#006e5a] text-white/80 hover:bg-white/10"}`,children:Y.label},Y.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pt-4",children:[C?jsxRuntimeExports.jsx("div",{className:"flex justify-center p-10",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-[#008069] border-t-transparent rounded-full animate-spin"})}):fe.map(Y=>jsxRuntimeExports.jsx(PostCard,{post:Y,currentUser:g},Y.id)),!C&&fe.length===0&&jsxRuntimeExports.jsx("p",{className:"text-center text-gray-400 mt-10",children:"Nenhum post encontrado nesta categoria."}),jsxRuntimeExports.jsx("div",{className:"h-20"})," "]}),jsxRuntimeExports.jsx("button",{onClick:()=>$(!0),className:"fixed bottom-24 right-6 w-14 h-14 bg-[#008069] text-white rounded-full shadow-xl flex items-center justify-center hover:bg-[#006e5a] transition-all z-40 active:scale-90",children:jsxRuntimeExports.jsx(Plus,{size:28})}),O&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in slide-in-from-bottom",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md h-[80%] sm:h-auto sm:rounded-2xl rounded-t-2xl flex flex-col shadow-2xl transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("button",{onClick:ne,children:jsxRuntimeExports.jsx(X,{size:24,className:"text-gray-400 hover:text-gray-600"})}),jsxRuntimeExports.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-200",children:"Nova Publicao"}),jsxRuntimeExports.jsx("button",{onClick:oe,disabled:ce,className:"font-bold text-[#008069] disabled:opacity-50",children:ce?"...":"Postar"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[jsxRuntimeExports.jsx("textarea",{className:"w-full h-32 resize-none outline-none text-lg text-gray-700 dark:text-gray-200 bg-transparent placeholder-gray-300 dark:placeholder-gray-600",placeholder:"No que voc est pensando?",value:Fe,onChange:Y=>ot(Y.target.value),autoFocus:!0}),Pe&&jsxRuntimeExports.jsxs("div",{className:"mt-4 relative rounded-xl overflow-hidden bg-black max-h-60 flex justify-center group",children:[Re==="image"&&jsxRuntimeExports.jsx("img",{src:Pe,className:"max-h-60 object-contain"}),Re==="video"&&jsxRuntimeExports.jsx("video",{src:Pe,controls:!0,className:"max-h-60"}),jsxRuntimeExports.jsx("button",{onClick:()=>{P(null),ke(null),Z("text")},className:"absolute top-2 right-2 bg-black/50 text-white p-1.5 rounded-full hover:bg-red-500 transition",children:jsxRuntimeExports.jsx(X,{size:16})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900 rounded-b-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition active:scale-95",children:[jsxRuntimeExports.jsx(Image$1,{className:"text-[#008069] mb-1"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:"Foto"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y=>Qe(Y,"image")})]}),jsxRuntimeExports.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition active:scale-95",children:[jsxRuntimeExports.jsx(Video,{className:"text-[#008069] mb-1"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:"Vdeo"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"video/*",className:"hidden",onChange:Y=>Qe(Y,"video")})]}),jsxRuntimeExports.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center p-3 bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition active:scale-95",children:[jsxRuntimeExports.jsx(Camera,{className:"text-[#008069] mb-1"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-gray-600 dark:text-gray-400",children:"Cmera"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:Y=>Qe(Y,"image")})]})]})})]})})]})},SocialProfilePage=({currentUser:g})=>{const{id:f}=useParams(),[b,C]=reactExports.useState(null),[D,O]=reactExports.useState([]),[$,_e]=reactExports.useState(!0),[ye,Fe]=reactExports.useState(!1),ot=async()=>{if(f){_e(!0),Fe(!1);try{const Z=await api.getProfileStats(g.id,f).catch(()=>null);if(!Z||!Z.id)throw new Error("Perfil no encontrado");C(Z);try{const I=await api.getPosts(g.id,f);Array.isArray(I)&&O(I)}catch(I){console.error("Erro ao carregar posts:",I)}}catch{Fe(!0)}finally{_e(!1)}}};reactExports.useEffect(()=>{ot()},[f,g.id]);const Re=async()=>{if(!b)return;const Z=b.is_following?"unfollow":"follow";C(I=>I?{...I,is_following:!I.is_following,followers:I.is_following?I.followers-1:I.followers+1}:null);try{await api.followUser(g.id,b.id,Z)}catch(I){console.error(I)}};return $?jsxRuntimeExports.jsx("div",{className:"h-full bg-white dark:bg-gray-900 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-4 border-[#008069] border-t-transparent rounded-full animate-spin"})}):ye||!b?jsxRuntimeExports.jsxs("div",{className:"h-full bg-white dark:bg-gray-900 flex flex-col items-center justify-center p-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-full mb-4",children:jsxRuntimeExports.jsx(CircleAlert,{size:40,className:"text-red-500"})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"Perfil Indisponvel"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"O usurio no foi encontrado ou houve um erro de conexo."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Link,{to:"/",className:"px-6 py-2 bg-gray-100 dark:bg-gray-800 rounded-full font-bold text-gray-700 dark:text-gray-200",children:"Incio"}),jsxRuntimeExports.jsxs("button",{onClick:ot,className:"px-6 py-2 bg-teal-600 rounded-full font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16})," Tentar Novamente"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 pb-20 overflow-y-auto no-scrollbar",children:[jsxRuntimeExports.jsx("div",{className:"h-32 gradient-bg relative shrink-0",children:jsxRuntimeExports.jsx(Link,{to:"/",className:"absolute top-4 left-4 p-2 bg-black/20 text-white rounded-full backdrop-blur-sm hover:bg-black/30 transition z-10",children:jsxRuntimeExports.jsx(ArrowLeft,{size:20})})}),jsxRuntimeExports.jsxs("div",{className:"px-5 relative -mt-12 mb-2 shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end",children:[jsxRuntimeExports.jsx("img",{src:b.photo||"https://picsum.photos/100/100",className:"w-24 h-24 rounded-full border-4 border-white dark:border-gray-900 shadow-lg bg-gray-200 object-cover"}),b.id!==g.id&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx(Link,{to:`/chat/${b.id}`,className:"p-2.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200 rounded-full border border-gray-200 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700 transition",children:jsxRuntimeExports.jsx(MessageCircle,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:Re,className:`px-5 py-2.5 rounded-full font-bold flex items-center gap-2 shadow-sm transition-all text-sm ${b.is_following?"bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-gray-200":"bg-[#008069] text-white hover:bg-[#006e5a]"}`,children:b.is_following?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UserCheck,{size:18})," Seguindo"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(UserPlus,{size:18})," Seguir"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:b.name}),jsxRuntimeExports.jsxs("p",{className:"text-teal-600 dark:text-teal-400 font-medium text-sm mb-1",children:["@",b.username||"user"]}),b.bio&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:b.bio})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-around mt-6 py-4 border-y border-gray-100 dark:border-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"text-center w-1/3",children:[jsxRuntimeExports.jsx("span",{className:"block font-bold text-xl text-gray-800 dark:text-gray-100",children:D.length}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Posts"})]}),jsxRuntimeExports.jsxs(Link,{to:`/follow-list/${b.id}/followers`,className:"text-center w-1/3 border-l border-r border-gray-100 dark:border-gray-800",children:[jsxRuntimeExports.jsx("span",{className:"block font-bold text-xl text-gray-800 dark:text-gray-100",children:b.followers}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Seguidores"})]}),jsxRuntimeExports.jsxs(Link,{to:`/follow-list/${b.id}/following`,className:"text-center w-1/3",children:[jsxRuntimeExports.jsx("span",{className:"block font-bold text-xl text-gray-800 dark:text-gray-100",children:b.following}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Seguindo"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 bg-gray-50 dark:bg-gray-950 pt-4 flex-1",children:[D.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm text-center py-10",children:"Nenhuma publicao ainda."}):D.map(Z=>jsxRuntimeExports.jsx(PostCard,{post:Z,currentUser:g},Z.id)),jsxRuntimeExports.jsx("div",{className:"h-4"})]})]})};var ZegoExpressWebRTC$1={exports:{}},umd$2={exports:{}},hasRequiredUmd$1;function requireUmd$1(){return hasRequiredUmd$1||(hasRequiredUmd$1=1,(function(g,f){var b=(function(C){Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var D=null;try{D=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function O(w,R,V){this.low=w|0,this.high=R|0,this.unsigned=!!V}O.prototype.__isLong__,Object.defineProperty(O.prototype,"__isLong__",{value:!0});function $(w){return(w&&w.__isLong__)===!0}function _e(w){var R=Math.clz32(w&-w);return w?31-R:R}O.isLong=$;var ye={},Fe={};function ot(w,R){var V,ae,q;return R?(w>>>=0,(q=0<=w&&w<256)&&(ae=Fe[w],ae)?ae:(V=Z(w,0,!0),q&&(Fe[w]=V),V)):(w|=0,(q=-128<=w&&w<128)&&(ae=ye[w],ae)?ae:(V=Z(w,w<0?-1:0,!1),q&&(ye[w]=V),V))}O.fromInt=ot;function Re(w,R){if(isNaN(w))return R?fe:oe;if(R){if(w<0)return fe;if(w>=tt)return F}else{if(w<=-Qe)return T;if(w+1>=Qe)return M}return w<0?Re(-w,R).neg():Z(w%Ne|0,w/Ne|0,R)}O.fromNumber=Re;function Z(w,R,V){return new O(w,R,V)}O.fromBits=Z;var I=Math.pow;function P(w,R,V){if(w.length===0)throw Error("empty string");if(typeof R=="number"?(V=R,R=!1):R=!!R,w==="NaN"||w==="Infinity"||w==="+Infinity"||w==="-Infinity")return R?fe:oe;if(V=V||10,V<2||36<V)throw RangeError("radix");var ae;if((ae=w.indexOf("-"))>0)throw Error("interior hyphen");if(ae===0)return P(w.substring(1),R,V).neg();for(var q=Re(I(V,8)),k=oe,G=0;G<w.length;G+=8){var xe=Math.min(8,w.length-G),Ae=parseInt(w.substring(G,G+xe),V);if(xe<8){var De=Re(I(V,xe));k=k.mul(De).add(Re(Ae))}else k=k.mul(q),k=k.add(Re(Ae))}return k.unsigned=R,k}O.fromString=P;function Pe(w,R){return typeof w=="number"?Re(w,R):typeof w=="string"?P(w,R):Z(w.low,w.high,typeof R=="boolean"?R:w.unsigned)}O.fromValue=Pe;var ke=65536,ce=1<<24,Ne=ke*ke,tt=Ne*Ne,Qe=tt/2,ne=ot(ce),oe=ot(0);O.ZERO=oe;var fe=ot(0,!0);O.UZERO=fe;var Y=ot(1);O.ONE=Y;var re=ot(1,!0);O.UONE=re;var K=ot(-1);O.NEG_ONE=K;var M=Z(-1,2147483647,!1);O.MAX_VALUE=M;var F=Z(-1,-1,!0);O.MAX_UNSIGNED_VALUE=F;var T=Z(0,-2147483648,!1);O.MIN_VALUE=T;var _=O.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*Ne+(this.low>>>0):this.high*Ne+(this.low>>>0)},_.toString=function(R){if(R=R||10,R<2||36<R)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(T)){var V=Re(R),ae=this.div(V),q=ae.mul(V).sub(this);return ae.toString(R)+q.toInt().toString(R)}else return"-"+this.neg().toString(R);for(var k=Re(I(R,6),this.unsigned),G=this,xe="";;){var Ae=G.div(k),De=G.sub(Ae.mul(k)).toInt()>>>0,Ie=De.toString(R);if(G=Ae,G.isZero())return Ie+xe;for(;Ie.length<6;)Ie="0"+Ie;xe=""+Ie+xe}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var R=this.high!=0?this.high:this.low,V=31;V>0&&(R&1<<V)==0;V--);return this.high!=0?V+33:V+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(R){return $(R)||(R=Pe(R)),this.unsigned!==R.unsigned&&this.high>>>31===1&&R.high>>>31===1?!1:this.high===R.high&&this.low===R.low},_.eq=_.equals,_.notEquals=function(R){return!this.eq(R)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(R){return this.comp(R)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(R){return this.comp(R)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(R){return this.comp(R)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(R){return this.comp(R)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(R){if($(R)||(R=Pe(R)),this.eq(R))return 0;var V=this.isNegative(),ae=R.isNegative();return V&&!ae?-1:!V&&ae?1:this.unsigned?R.high>>>0>this.high>>>0||R.high===this.high&&R.low>>>0>this.low>>>0?-1:1:this.sub(R).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(Y)},_.neg=_.negate,_.add=function(R){$(R)||(R=Pe(R));var V=this.high>>>16,ae=this.high&65535,q=this.low>>>16,k=this.low&65535,G=R.high>>>16,xe=R.high&65535,Ae=R.low>>>16,De=R.low&65535,Ie=0,be=0,qe=0,Ve=0;return Ve+=k+De,qe+=Ve>>>16,Ve&=65535,qe+=q+Ae,be+=qe>>>16,qe&=65535,be+=ae+xe,Ie+=be>>>16,be&=65535,Ie+=V+G,Ie&=65535,Z(qe<<16|Ve,Ie<<16|be,this.unsigned)},_.subtract=function(R){return $(R)||(R=Pe(R)),this.add(R.neg())},_.sub=_.subtract,_.multiply=function(R){if(this.isZero())return this;if($(R)||(R=Pe(R)),D){var V=D.mul(this.low,this.high,R.low,R.high);return Z(V,D.get_high(),this.unsigned)}if(R.isZero())return this.unsigned?fe:oe;if(this.eq(T))return R.isOdd()?T:oe;if(R.eq(T))return this.isOdd()?T:oe;if(this.isNegative())return R.isNegative()?this.neg().mul(R.neg()):this.neg().mul(R).neg();if(R.isNegative())return this.mul(R.neg()).neg();if(this.lt(ne)&&R.lt(ne))return Re(this.toNumber()*R.toNumber(),this.unsigned);var ae=this.high>>>16,q=this.high&65535,k=this.low>>>16,G=this.low&65535,xe=R.high>>>16,Ae=R.high&65535,De=R.low>>>16,Ie=R.low&65535,be=0,qe=0,Ve=0,pe=0;return pe+=G*Ie,Ve+=pe>>>16,pe&=65535,Ve+=k*Ie,qe+=Ve>>>16,Ve&=65535,Ve+=G*De,qe+=Ve>>>16,Ve&=65535,qe+=q*Ie,be+=qe>>>16,qe&=65535,qe+=k*De,be+=qe>>>16,qe&=65535,qe+=G*Ae,be+=qe>>>16,qe&=65535,be+=ae*Ie+q*De+k*Ae+G*xe,be&=65535,Z(Ve<<16|pe,be<<16|qe,this.unsigned)},_.mul=_.multiply,_.divide=function(R){if($(R)||(R=Pe(R)),R.isZero())throw Error("division by zero");if(D){if(!this.unsigned&&this.high===-2147483648&&R.low===-1&&R.high===-1)return this;var V=(this.unsigned?D.div_u:D.div_s)(this.low,this.high,R.low,R.high);return Z(V,D.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?fe:oe;var ae,q,k;if(this.unsigned){if(R.unsigned||(R=R.toUnsigned()),R.gt(this))return fe;if(R.gt(this.shru(1)))return re;k=fe}else{if(this.eq(T)){if(R.eq(Y)||R.eq(K))return T;if(R.eq(T))return Y;var G=this.shr(1);return ae=G.div(R).shl(1),ae.eq(oe)?R.isNegative()?Y:K:(q=this.sub(R.mul(ae)),k=ae.add(q.div(R)),k)}else if(R.eq(T))return this.unsigned?fe:oe;if(this.isNegative())return R.isNegative()?this.neg().div(R.neg()):this.neg().div(R).neg();if(R.isNegative())return this.div(R.neg()).neg();k=oe}for(q=this;q.gte(R);){ae=Math.max(1,Math.floor(q.toNumber()/R.toNumber()));for(var xe=Math.ceil(Math.log(ae)/Math.LN2),Ae=xe<=48?1:I(2,xe-48),De=Re(ae),Ie=De.mul(R);Ie.isNegative()||Ie.gt(q);)ae-=Ae,De=Re(ae,this.unsigned),Ie=De.mul(R);De.isZero()&&(De=Y),k=k.add(De),q=q.sub(Ie)}return k},_.div=_.divide,_.modulo=function(R){if($(R)||(R=Pe(R)),D){var V=(this.unsigned?D.rem_u:D.rem_s)(this.low,this.high,R.low,R.high);return Z(V,D.get_high(),this.unsigned)}return this.sub(this.div(R).mul(R))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return Z(~this.low,~this.high,this.unsigned)},_.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_.clz=_.countLeadingZeros,_.countTrailingZeros=function(){return this.low?_e(this.low):_e(this.high)+32},_.ctz=_.countTrailingZeros,_.and=function(R){return $(R)||(R=Pe(R)),Z(this.low&R.low,this.high&R.high,this.unsigned)},_.or=function(R){return $(R)||(R=Pe(R)),Z(this.low|R.low,this.high|R.high,this.unsigned)},_.xor=function(R){return $(R)||(R=Pe(R)),Z(this.low^R.low,this.high^R.high,this.unsigned)},_.shiftLeft=function(R){return $(R)&&(R=R.toInt()),(R&=63)===0?this:R<32?Z(this.low<<R,this.high<<R|this.low>>>32-R,this.unsigned):Z(0,this.low<<R-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(R){return $(R)&&(R=R.toInt()),(R&=63)===0?this:R<32?Z(this.low>>>R|this.high<<32-R,this.high>>R,this.unsigned):Z(this.high>>R-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(R){return $(R)&&(R=R.toInt()),(R&=63)===0?this:R<32?Z(this.low>>>R|this.high<<32-R,this.high>>>R,this.unsigned):R===32?Z(this.high,0,this.unsigned):Z(this.high>>>R-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.rotateLeft=function(R){var V;return $(R)&&(R=R.toInt()),(R&=63)===0?this:R===32?Z(this.high,this.low,this.unsigned):R<32?(V=32-R,Z(this.low<<R|this.high>>>V,this.high<<R|this.low>>>V,this.unsigned)):(R-=32,V=32-R,Z(this.high<<R|this.low>>>V,this.low<<R|this.high>>>V,this.unsigned))},_.rotl=_.rotateLeft,_.rotateRight=function(R){var V;return $(R)&&(R=R.toInt()),(R&=63)===0?this:R===32?Z(this.high,this.low,this.unsigned):R<32?(V=32-R,Z(this.high<<V|this.low>>>R,this.low<<V|this.high>>>R,this.unsigned)):(R-=32,V=32-R,Z(this.low<<V|this.high>>>R,this.high<<V|this.low>>>R,this.unsigned))},_.rotr=_.rotateRight,_.toSigned=function(){return this.unsigned?Z(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:Z(this.low,this.high,!0)},_.toBytes=function(R){return R?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var R=this.high,V=this.low;return[V&255,V>>>8&255,V>>>16&255,V>>>24,R&255,R>>>8&255,R>>>16&255,R>>>24]},_.toBytesBE=function(){var R=this.high,V=this.low;return[R>>>24,R>>>16&255,R>>>8&255,R&255,V>>>24,V>>>16&255,V>>>8&255,V&255]},O.fromBytes=function(R,V,ae){return ae?O.fromBytesLE(R,V):O.fromBytesBE(R,V)},O.fromBytesLE=function(R,V){return new O(R[0]|R[1]<<8|R[2]<<16|R[3]<<24,R[4]|R[5]<<8|R[6]<<16|R[7]<<24,V)},O.fromBytesBE=function(R,V){return new O(R[4]<<24|R[5]<<16|R[6]<<8|R[7],R[0]<<24|R[1]<<16|R[2]<<8|R[3],V)};var E=O;return C.default=E,"default"in C?C.default:C})({});g.exports=b})(umd$2)),umd$2.exports}var indexMinimal$1={},minimal$3={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=g;function g(f,b){for(var C=new Array(arguments.length-1),D=0,O=2,$=!0;O<arguments.length;)C[D++]=arguments[O++];return new Promise(function(ye,Fe){C[D]=function(Re){if($)if($=!1,Re)Fe(Re);else{for(var Z=new Array(arguments.length-1),I=0;I<Z.length;)Z[I++]=arguments[I];ye.apply(null,Z)}};try{f.apply(b||null,C)}catch(ot){$&&($=!1,Fe(ot))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,(function(g){var f=g;f.length=function(_e){var ye=_e.length;if(!ye)return 0;for(var Fe=0;--ye%4>1&&_e.charAt(ye)==="=";)++Fe;return Math.ceil(_e.length*3)/4-Fe};for(var b=new Array(64),C=new Array(123),D=0;D<64;)C[b[D]=D<26?D+65:D<52?D+71:D<62?D-4:D-59|43]=D++;f.encode=function(_e,ye,Fe){for(var ot=null,Re=[],Z=0,I=0,P;ye<Fe;){var Pe=_e[ye++];switch(I){case 0:Re[Z++]=b[Pe>>2],P=(Pe&3)<<4,I=1;break;case 1:Re[Z++]=b[P|Pe>>4],P=(Pe&15)<<2,I=2;break;case 2:Re[Z++]=b[P|Pe>>6],Re[Z++]=b[Pe&63],I=0;break}Z>8191&&((ot||(ot=[])).push(String.fromCharCode.apply(String,Re)),Z=0)}return I&&(Re[Z++]=b[P],Re[Z++]=61,I===1&&(Re[Z++]=61)),ot?(Z&&ot.push(String.fromCharCode.apply(String,Re.slice(0,Z))),ot.join("")):String.fromCharCode.apply(String,Re.slice(0,Z))};var O="invalid encoding";f.decode=function(_e,ye,Fe){for(var ot=Fe,Re=0,Z,I=0;I<_e.length;){var P=_e.charCodeAt(I++);if(P===61&&Re>1)break;if((P=C[P])===void 0)throw Error(O);switch(Re){case 0:Z=P,Re=1;break;case 1:ye[Fe++]=Z<<2|(P&48)>>4,Z=P,Re=2;break;case 2:ye[Fe++]=(Z&15)<<4|(P&60)>>2,Z=P,Re=3;break;case 3:ye[Fe++]=(Z&3)<<6|P,Re=0;break}}if(Re===1)throw Error(O);return Fe-ot},f.test=function(_e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(_e)}})(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=g;function g(){this._listeners={}}return g.prototype.on=function(b,C,D){return(this._listeners[b]||(this._listeners[b]=[])).push({fn:C,ctx:D||this}),this},g.prototype.off=function(b,C){if(b===void 0)this._listeners={};else if(C===void 0)this._listeners[b]=[];else for(var D=this._listeners[b],O=0;O<D.length;)D[O].fn===C?D.splice(O,1):++O;return this},g.prototype.emit=function(b){var C=this._listeners[b];if(C){for(var D=[],O=1;O<arguments.length;)D.push(arguments[O++]);for(O=0;O<C.length;)C[O].fn.apply(C[O++].ctx,D)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=g(g);function g(O){return typeof Float32Array<"u"?(function(){var $=new Float32Array([-0]),_e=new Uint8Array($.buffer),ye=_e[3]===128;function Fe(I,P,Pe){$[0]=I,P[Pe]=_e[0],P[Pe+1]=_e[1],P[Pe+2]=_e[2],P[Pe+3]=_e[3]}function ot(I,P,Pe){$[0]=I,P[Pe]=_e[3],P[Pe+1]=_e[2],P[Pe+2]=_e[1],P[Pe+3]=_e[0]}O.writeFloatLE=ye?Fe:ot,O.writeFloatBE=ye?ot:Fe;function Re(I,P){return _e[0]=I[P],_e[1]=I[P+1],_e[2]=I[P+2],_e[3]=I[P+3],$[0]}function Z(I,P){return _e[3]=I[P],_e[2]=I[P+1],_e[1]=I[P+2],_e[0]=I[P+3],$[0]}O.readFloatLE=ye?Re:Z,O.readFloatBE=ye?Z:Re})():(function(){function $(ye,Fe,ot,Re){var Z=Fe<0?1:0;if(Z&&(Fe=-Fe),Fe===0)ye(1/Fe>0?0:2147483648,ot,Re);else if(isNaN(Fe))ye(2143289344,ot,Re);else if(Fe>34028234663852886e22)ye((Z<<31|2139095040)>>>0,ot,Re);else if(Fe<11754943508222875e-54)ye((Z<<31|Math.round(Fe/1401298464324817e-60))>>>0,ot,Re);else{var I=Math.floor(Math.log(Fe)/Math.LN2),P=Math.round(Fe*Math.pow(2,-I)*8388608)&8388607;ye((Z<<31|I+127<<23|P)>>>0,ot,Re)}}O.writeFloatLE=$.bind(null,f),O.writeFloatBE=$.bind(null,b);function _e(ye,Fe,ot){var Re=ye(Fe,ot),Z=(Re>>31)*2+1,I=Re>>>23&255,P=Re&8388607;return I===255?P?NaN:Z*(1/0):I===0?Z*1401298464324817e-60*P:Z*Math.pow(2,I-150)*(P+8388608)}O.readFloatLE=_e.bind(null,C),O.readFloatBE=_e.bind(null,D)})(),typeof Float64Array<"u"?(function(){var $=new Float64Array([-0]),_e=new Uint8Array($.buffer),ye=_e[7]===128;function Fe(I,P,Pe){$[0]=I,P[Pe]=_e[0],P[Pe+1]=_e[1],P[Pe+2]=_e[2],P[Pe+3]=_e[3],P[Pe+4]=_e[4],P[Pe+5]=_e[5],P[Pe+6]=_e[6],P[Pe+7]=_e[7]}function ot(I,P,Pe){$[0]=I,P[Pe]=_e[7],P[Pe+1]=_e[6],P[Pe+2]=_e[5],P[Pe+3]=_e[4],P[Pe+4]=_e[3],P[Pe+5]=_e[2],P[Pe+6]=_e[1],P[Pe+7]=_e[0]}O.writeDoubleLE=ye?Fe:ot,O.writeDoubleBE=ye?ot:Fe;function Re(I,P){return _e[0]=I[P],_e[1]=I[P+1],_e[2]=I[P+2],_e[3]=I[P+3],_e[4]=I[P+4],_e[5]=I[P+5],_e[6]=I[P+6],_e[7]=I[P+7],$[0]}function Z(I,P){return _e[7]=I[P],_e[6]=I[P+1],_e[5]=I[P+2],_e[4]=I[P+3],_e[3]=I[P+4],_e[2]=I[P+5],_e[1]=I[P+6],_e[0]=I[P+7],$[0]}O.readDoubleLE=ye?Re:Z,O.readDoubleBE=ye?Z:Re})():(function(){function $(ye,Fe,ot,Re,Z,I){var P=Re<0?1:0;if(P&&(Re=-Re),Re===0)ye(0,Z,I+Fe),ye(1/Re>0?0:2147483648,Z,I+ot);else if(isNaN(Re))ye(0,Z,I+Fe),ye(2146959360,Z,I+ot);else if(Re>17976931348623157e292)ye(0,Z,I+Fe),ye((P<<31|2146435072)>>>0,Z,I+ot);else{var Pe;if(Re<22250738585072014e-324)Pe=Re/5e-324,ye(Pe>>>0,Z,I+Fe),ye((P<<31|Pe/4294967296)>>>0,Z,I+ot);else{var ke=Math.floor(Math.log(Re)/Math.LN2);ke===1024&&(ke=1023),Pe=Re*Math.pow(2,-ke),ye(Pe*4503599627370496>>>0,Z,I+Fe),ye((P<<31|ke+1023<<20|Pe*1048576&1048575)>>>0,Z,I+ot)}}}O.writeDoubleLE=$.bind(null,f,0,4),O.writeDoubleBE=$.bind(null,b,4,0);function _e(ye,Fe,ot,Re,Z){var I=ye(Re,Z+Fe),P=ye(Re,Z+ot),Pe=(P>>31)*2+1,ke=P>>>20&2047,ce=4294967296*(P&1048575)+I;return ke===2047?ce?NaN:Pe*(1/0):ke===0?Pe*5e-324*ce:Pe*Math.pow(2,ke-1075)*(ce+4503599627370496)}O.readDoubleLE=_e.bind(null,C,0,4),O.readDoubleBE=_e.bind(null,D,4,0)})(),O}function f(O,$,_e){$[_e]=O&255,$[_e+1]=O>>>8&255,$[_e+2]=O>>>16&255,$[_e+3]=O>>>24}function b(O,$,_e){$[_e]=O>>>24,$[_e+1]=O>>>16&255,$[_e+2]=O>>>8&255,$[_e+3]=O&255}function C(O,$){return(O[$]|O[$+1]<<8|O[$+2]<<16|O[$+3]<<24)>>>0}function D(O,$){return(O[$]<<24|O[$+1]<<16|O[$+2]<<8|O[$+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(g){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,(function(g){var f=g;f.length=function(C){for(var D=0,O=0,$=0;$<C.length;++$)O=C.charCodeAt($),O<128?D+=1:O<2048?D+=2:(O&64512)===55296&&(C.charCodeAt($+1)&64512)===56320?(++$,D+=4):D+=3;return D},f.read=function(C,D,O){var $=O-D;if($<1)return"";for(var _e=null,ye=[],Fe=0,ot;D<O;)ot=C[D++],ot<128?ye[Fe++]=ot:ot>191&&ot<224?ye[Fe++]=(ot&31)<<6|C[D++]&63:ot>239&&ot<365?(ot=((ot&7)<<18|(C[D++]&63)<<12|(C[D++]&63)<<6|C[D++]&63)-65536,ye[Fe++]=55296+(ot>>10),ye[Fe++]=56320+(ot&1023)):ye[Fe++]=(ot&15)<<12|(C[D++]&63)<<6|C[D++]&63,Fe>8191&&((_e||(_e=[])).push(String.fromCharCode.apply(String,ye)),Fe=0);return _e?(Fe&&_e.push(String.fromCharCode.apply(String,ye.slice(0,Fe))),_e.join("")):String.fromCharCode.apply(String,ye.slice(0,Fe))},f.write=function(C,D,O){for(var $=O,_e,ye,Fe=0;Fe<C.length;++Fe)_e=C.charCodeAt(Fe),_e<128?D[O++]=_e:_e<2048?(D[O++]=_e>>6|192,D[O++]=_e&63|128):(_e&64512)===55296&&((ye=C.charCodeAt(Fe+1))&64512)===56320?(_e=65536+((_e&1023)<<10)+(ye&1023),++Fe,D[O++]=_e>>18|240,D[O++]=_e>>12&63|128,D[O++]=_e>>6&63|128,D[O++]=_e&63|128):(D[O++]=_e>>12|224,D[O++]=_e>>6&63|128,D[O++]=_e&63|128);return O-$}})(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=g;function g(f,b,C){var D=C||8192,O=D>>>1,$=null,_e=D;return function(Fe){if(Fe<1||Fe>O)return f(Fe);_e+Fe>D&&($=f(D),_e=0);var ot=b.call($,_e,_e+=Fe);return _e&7&&(_e=(_e|7)+1),ot}}return pool_1}var longbits$1,hasRequiredLongbits$1;function requireLongbits$1(){if(hasRequiredLongbits$1)return longbits$1;hasRequiredLongbits$1=1,longbits$1=f;var g=requireMinimal$3();function f(O,$){this.lo=O>>>0,this.hi=$>>>0}var b=f.zero=new f(0,0);b.toNumber=function(){return 0},b.zzEncode=b.zzDecode=function(){return this},b.length=function(){return 1};var C=f.zeroHash="\0\0\0\0\0\0\0\0";f.fromNumber=function($){if($===0)return b;var _e=$<0;_e&&($=-$);var ye=$>>>0,Fe=($-ye)/4294967296>>>0;return _e&&(Fe=~Fe>>>0,ye=~ye>>>0,++ye>4294967295&&(ye=0,++Fe>4294967295&&(Fe=0))),new f(ye,Fe)},f.from=function($){if(typeof $=="number")return f.fromNumber($);if(g.isString($))if(g.Long)$=g.Long.fromString($);else return f.fromNumber(parseInt($,10));return $.low||$.high?new f($.low>>>0,$.high>>>0):b},f.prototype.toNumber=function($){if(!$&&this.hi>>>31){var _e=~this.lo+1>>>0,ye=~this.hi>>>0;return _e||(ye=ye+1>>>0),-(_e+ye*4294967296)}return this.lo+this.hi*4294967296},f.prototype.toLong=function($){return g.Long?new g.Long(this.lo|0,this.hi|0,!!$):{low:this.lo|0,high:this.hi|0,unsigned:!!$}};var D=String.prototype.charCodeAt;return f.fromHash=function($){return $===C?b:new f((D.call($,0)|D.call($,1)<<8|D.call($,2)<<16|D.call($,3)<<24)>>>0,(D.call($,4)|D.call($,5)<<8|D.call($,6)<<16|D.call($,7)<<24)>>>0)},f.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},f.prototype.zzEncode=function(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this},f.prototype.zzDecode=function(){var $=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this},f.prototype.length=function(){var $=this.lo,_e=(this.lo>>>28|this.hi<<4)>>>0,ye=this.hi>>>24;return ye===0?_e===0?$<16384?$<128?1:2:$<2097152?3:4:_e<16384?_e<128?5:6:_e<2097152?7:8:ye<128?9:10},longbits$1}var hasRequiredMinimal$3;function requireMinimal$3(){return hasRequiredMinimal$3||(hasRequiredMinimal$3=1,(function(g){var f=g;f.asPromise=requireAspromise(),f.base64=requireBase64(),f.EventEmitter=requireEventemitter(),f.float=requireFloat(),f.inquire=requireInquire(),f.utf8=requireUtf8(),f.pool=requirePool(),f.LongBits=requireLongbits$1(),f.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),f.global=f.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$3,f.emptyArray=Object.freeze?Object.freeze([]):[],f.emptyObject=Object.freeze?Object.freeze({}):{},f.isInteger=Number.isInteger||function(O){return typeof O=="number"&&isFinite(O)&&Math.floor(O)===O},f.isString=function(O){return typeof O=="string"||O instanceof String},f.isObject=function(O){return O&&typeof O=="object"},f.isset=f.isSet=function(O,$){var _e=O[$];return _e!=null&&O.hasOwnProperty($)?typeof _e!="object"||(Array.isArray(_e)?_e.length:Object.keys(_e).length)>0:!1},f.Buffer=(function(){try{var D=f.inquire("buffer").Buffer;return D.prototype.utf8Write?D:null}catch{return null}})(),f._Buffer_from=null,f._Buffer_allocUnsafe=null,f.newBuffer=function(O){return typeof O=="number"?f.Buffer?f._Buffer_allocUnsafe(O):new f.Array(O):f.Buffer?f._Buffer_from(O):typeof Uint8Array>"u"?O:new Uint8Array(O)},f.Array=typeof Uint8Array<"u"?Uint8Array:Array,f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long"),f.key2Re=/^true|false|0|1$/,f.key32Re=/^-?(?:0|[1-9][0-9]*)$/,f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,f.longToHash=function(O){return O?f.LongBits.from(O).toHash():f.LongBits.zeroHash},f.longFromHash=function(O,$){var _e=f.LongBits.fromHash(O);return f.Long?f.Long.fromBits(_e.lo,_e.hi,$):_e.toNumber(!!$)};function b(D,O,$){for(var _e=Object.keys(O),ye=0;ye<_e.length;++ye)(D[_e[ye]]===void 0||!$)&&(D[_e[ye]]=O[_e[ye]]);return D}f.merge=b,f.lcFirst=function(O){return O.charAt(0).toLowerCase()+O.substring(1)};function C(D){function O($,_e){if(!(this instanceof O))return new O($,_e);Object.defineProperty(this,"message",{get:function(){return $}}),Error.captureStackTrace?Error.captureStackTrace(this,O):Object.defineProperty(this,"stack",{value:new Error().stack||""}),_e&&b(this,_e)}return O.prototype=Object.create(Error.prototype,{constructor:{value:O,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return D},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),O}f.newError=C,f.ProtocolError=C("ProtocolError"),f.oneOfGetter=function(O){for(var $={},_e=0;_e<O.length;++_e)$[O[_e]]=1;return function(){for(var ye=Object.keys(this),Fe=ye.length-1;Fe>-1;--Fe)if($[ye[Fe]]===1&&this[ye[Fe]]!==void 0&&this[ye[Fe]]!==null)return ye[Fe]}},f.oneOfSetter=function(O){return function($){for(var _e=0;_e<O.length;++_e)O[_e]!==$&&delete this[O[_e]]}},f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},f._configure=function(){var D=f.Buffer;if(!D){f._Buffer_from=f._Buffer_allocUnsafe=null;return}f._Buffer_from=D.from!==Uint8Array.from&&D.from||function($,_e){return new D($,_e)},f._Buffer_allocUnsafe=D.allocUnsafe||function($){return new D($)}}})(minimal$3)),minimal$3}var writer$1,hasRequiredWriter$1;function requireWriter$1(){if(hasRequiredWriter$1)return writer$1;hasRequiredWriter$1=1,writer$1=ye;var g=requireMinimal$3(),f,b=g.LongBits,C=g.base64,D=g.utf8;function O(ke,ce,Ne){this.fn=ke,this.len=ce,this.next=void 0,this.val=Ne}function $(){}function _e(ke){this.head=ke.head,this.tail=ke.tail,this.len=ke.len,this.next=ke.states}function ye(){this.len=0,this.head=new O($,0,0),this.tail=this.head,this.states=null}var Fe=function(){return g.Buffer?function(){return(ye.create=function(){return new f})()}:function(){return new ye}};ye.create=Fe(),ye.alloc=function(ce){return new g.Array(ce)},g.Array!==Array&&(ye.alloc=g.pool(ye.alloc,g.Array.prototype.subarray)),ye.prototype._push=function(ce,Ne,tt){return this.tail=this.tail.next=new O(ce,Ne,tt),this.len+=Ne,this};function ot(ke,ce,Ne){ce[Ne]=ke&255}function Re(ke,ce,Ne){for(;ke>127;)ce[Ne++]=ke&127|128,ke>>>=7;ce[Ne]=ke}function Z(ke,ce){this.len=ke,this.next=void 0,this.val=ce}Z.prototype=Object.create(O.prototype),Z.prototype.fn=Re,ye.prototype.uint32=function(ce){return this.len+=(this.tail=this.tail.next=new Z((ce=ce>>>0)<128?1:ce<16384?2:ce<2097152?3:ce<268435456?4:5,ce)).len,this},ye.prototype.int32=function(ce){return ce<0?this._push(I,10,b.fromNumber(ce)):this.uint32(ce)},ye.prototype.sint32=function(ce){return this.uint32((ce<<1^ce>>31)>>>0)};function I(ke,ce,Ne){for(;ke.hi;)ce[Ne++]=ke.lo&127|128,ke.lo=(ke.lo>>>7|ke.hi<<25)>>>0,ke.hi>>>=7;for(;ke.lo>127;)ce[Ne++]=ke.lo&127|128,ke.lo=ke.lo>>>7;ce[Ne++]=ke.lo}ye.prototype.uint64=function(ce){var Ne=b.from(ce);return this._push(I,Ne.length(),Ne)},ye.prototype.int64=ye.prototype.uint64,ye.prototype.sint64=function(ce){var Ne=b.from(ce).zzEncode();return this._push(I,Ne.length(),Ne)},ye.prototype.bool=function(ce){return this._push(ot,1,ce?1:0)};function P(ke,ce,Ne){ce[Ne]=ke&255,ce[Ne+1]=ke>>>8&255,ce[Ne+2]=ke>>>16&255,ce[Ne+3]=ke>>>24}ye.prototype.fixed32=function(ce){return this._push(P,4,ce>>>0)},ye.prototype.sfixed32=ye.prototype.fixed32,ye.prototype.fixed64=function(ce){var Ne=b.from(ce);return this._push(P,4,Ne.lo)._push(P,4,Ne.hi)},ye.prototype.sfixed64=ye.prototype.fixed64,ye.prototype.float=function(ce){return this._push(g.float.writeFloatLE,4,ce)},ye.prototype.double=function(ce){return this._push(g.float.writeDoubleLE,8,ce)};var Pe=g.Array.prototype.set?function(ce,Ne,tt){Ne.set(ce,tt)}:function(ce,Ne,tt){for(var Qe=0;Qe<ce.length;++Qe)Ne[tt+Qe]=ce[Qe]};return ye.prototype.bytes=function(ce){var Ne=ce.length>>>0;if(!Ne)return this._push(ot,1,0);if(g.isString(ce)){var tt=ye.alloc(Ne=C.length(ce));C.decode(ce,tt,0),ce=tt}return this.uint32(Ne)._push(Pe,Ne,ce)},ye.prototype.string=function(ce){var Ne=D.length(ce);return Ne?this.uint32(Ne)._push(D.write,Ne,ce):this._push(ot,1,0)},ye.prototype.fork=function(){return this.states=new _e(this),this.head=this.tail=new O($,0,0),this.len=0,this},ye.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new O($,0,0),this.len=0),this},ye.prototype.ldelim=function(){var ce=this.head,Ne=this.tail,tt=this.len;return this.reset().uint32(tt),tt&&(this.tail.next=ce.next,this.tail=Ne,this.len+=tt),this},ye.prototype.finish=function(){for(var ce=this.head.next,Ne=this.constructor.alloc(this.len),tt=0;ce;)ce.fn(ce.val,Ne,tt),tt+=ce.len,ce=ce.next;return Ne},ye._configure=function(ke){f=ke,ye.create=Fe(),f._configure()},writer$1}var writer_buffer$1,hasRequiredWriter_buffer$1;function requireWriter_buffer$1(){if(hasRequiredWriter_buffer$1)return writer_buffer$1;hasRequiredWriter_buffer$1=1,writer_buffer$1=b;var g=requireWriter$1();(b.prototype=Object.create(g.prototype)).constructor=b;var f=requireMinimal$3();function b(){g.call(this)}b._configure=function(){b.alloc=f._Buffer_allocUnsafe,b.writeBytesBuffer=f.Buffer&&f.Buffer.prototype instanceof Uint8Array&&f.Buffer.prototype.set.name==="set"?function(O,$,_e){$.set(O,_e)}:function(O,$,_e){if(O.copy)O.copy($,_e,0,O.length);else for(var ye=0;ye<O.length;)$[_e++]=O[ye++]}},b.prototype.bytes=function(O){f.isString(O)&&(O=f._Buffer_from(O,"base64"));var $=O.length>>>0;return this.uint32($),$&&this._push(b.writeBytesBuffer,$,O),this};function C(D,O,$){D.length<40?f.utf8.write(D,O,$):O.utf8Write?O.utf8Write(D,$):O.write(D,$)}return b.prototype.string=function(O){var $=f.Buffer.byteLength(O);return this.uint32($),$&&this._push(C,$,O),this},b._configure(),writer_buffer$1}var reader$1,hasRequiredReader$1;function requireReader$1(){if(hasRequiredReader$1)return reader$1;hasRequiredReader$1=1,reader$1=O;var g=requireMinimal$3(),f,b=g.LongBits,C=g.utf8;function D(Re,Z){return RangeError("index out of range: "+Re.pos+" + "+(Z||1)+" > "+Re.len)}function O(Re){this.buf=Re,this.pos=0,this.len=Re.length}var $=typeof Uint8Array<"u"?function(Z){if(Z instanceof Uint8Array||Array.isArray(Z))return new O(Z);throw Error("illegal buffer")}:function(Z){if(Array.isArray(Z))return new O(Z);throw Error("illegal buffer")},_e=function(){return g.Buffer?function(I){return(O.create=function(Pe){return g.Buffer.isBuffer(Pe)?new f(Pe):$(Pe)})(I)}:$};O.create=_e(),O.prototype._slice=g.Array.prototype.subarray||g.Array.prototype.slice,O.prototype.uint32=(function(){var Z=4294967295;return function(){if(Z=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Z=(Z|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Z;if((this.pos+=5)>this.len)throw this.pos=this.len,D(this,10);return Z}})(),O.prototype.int32=function(){return this.uint32()|0},O.prototype.sint32=function(){var Z=this.uint32();return Z>>>1^-(Z&1)|0};function ye(){var Re=new b(0,0),Z=0;if(this.len-this.pos>4){for(;Z<4;++Z)if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<Z*7)>>>0,this.buf[this.pos++]<128)return Re;if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<28)>>>0,Re.hi=(Re.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Re;Z=0}else{for(;Z<3;++Z){if(this.pos>=this.len)throw D(this);if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<Z*7)>>>0,this.buf[this.pos++]<128)return Re}return Re.lo=(Re.lo|(this.buf[this.pos++]&127)<<Z*7)>>>0,Re}if(this.len-this.pos>4){for(;Z<5;++Z)if(Re.hi=(Re.hi|(this.buf[this.pos]&127)<<Z*7+3)>>>0,this.buf[this.pos++]<128)return Re}else for(;Z<5;++Z){if(this.pos>=this.len)throw D(this);if(Re.hi=(Re.hi|(this.buf[this.pos]&127)<<Z*7+3)>>>0,this.buf[this.pos++]<128)return Re}throw Error("invalid varint encoding")}O.prototype.bool=function(){return this.uint32()!==0};function Fe(Re,Z){return(Re[Z-4]|Re[Z-3]<<8|Re[Z-2]<<16|Re[Z-1]<<24)>>>0}O.prototype.fixed32=function(){if(this.pos+4>this.len)throw D(this,4);return Fe(this.buf,this.pos+=4)},O.prototype.sfixed32=function(){if(this.pos+4>this.len)throw D(this,4);return Fe(this.buf,this.pos+=4)|0};function ot(){if(this.pos+8>this.len)throw D(this,8);return new b(Fe(this.buf,this.pos+=4),Fe(this.buf,this.pos+=4))}return O.prototype.float=function(){if(this.pos+4>this.len)throw D(this,4);var Z=g.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Z},O.prototype.double=function(){if(this.pos+8>this.len)throw D(this,4);var Z=g.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Z},O.prototype.bytes=function(){var Z=this.uint32(),I=this.pos,P=this.pos+Z;if(P>this.len)throw D(this,Z);if(this.pos+=Z,Array.isArray(this.buf))return this.buf.slice(I,P);if(I===P){var Pe=g.Buffer;return Pe?Pe.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,I,P)},O.prototype.string=function(){var Z=this.bytes();return C.read(Z,0,Z.length)},O.prototype.skip=function(Z){if(typeof Z=="number"){if(this.pos+Z>this.len)throw D(this,Z);this.pos+=Z}else do if(this.pos>=this.len)throw D(this);while(this.buf[this.pos++]&128);return this},O.prototype.skipType=function(Re){switch(Re){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Re=this.uint32()&7)!==4;)this.skipType(Re);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Re+" at offset "+this.pos)}return this},O._configure=function(Re){f=Re,O.create=_e(),f._configure();var Z=g.Long?"toLong":"toNumber";g.merge(O.prototype,{int64:function(){return ye.call(this)[Z](!1)},uint64:function(){return ye.call(this)[Z](!0)},sint64:function(){return ye.call(this).zzDecode()[Z](!1)},fixed64:function(){return ot.call(this)[Z](!0)},sfixed64:function(){return ot.call(this)[Z](!1)}})},reader$1}var reader_buffer$1,hasRequiredReader_buffer$1;function requireReader_buffer$1(){if(hasRequiredReader_buffer$1)return reader_buffer$1;hasRequiredReader_buffer$1=1,reader_buffer$1=b;var g=requireReader$1();(b.prototype=Object.create(g.prototype)).constructor=b;var f=requireMinimal$3();function b(C){g.call(this,C)}return b._configure=function(){f.Buffer&&(b.prototype._slice=f.Buffer.prototype.slice)},b.prototype.string=function(){var D=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+D,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+D,this.len))},b._configure(),reader_buffer$1}var rpc$1={},service$1,hasRequiredService$1;function requireService$1(){if(hasRequiredService$1)return service$1;hasRequiredService$1=1,service$1=f;var g=requireMinimal$3();(f.prototype=Object.create(g.EventEmitter.prototype)).constructor=f;function f(b,C,D){if(typeof b!="function")throw TypeError("rpcImpl must be a function");g.EventEmitter.call(this),this.rpcImpl=b,this.requestDelimited=!!C,this.responseDelimited=!!D}return f.prototype.rpcCall=function b(C,D,O,$,_e){if(!$)throw TypeError("request must be specified");var ye=this;if(!_e)return g.asPromise(b,ye,C,D,O,$);if(!ye.rpcImpl){setTimeout(function(){_e(Error("already ended"))},0);return}try{return ye.rpcImpl(C,D[ye.requestDelimited?"encodeDelimited":"encode"]($).finish(),function(ot,Re){if(ot)return ye.emit("error",ot,C),_e(ot);if(Re===null){ye.end(!0);return}if(!(Re instanceof O))try{Re=O[ye.responseDelimited?"decodeDelimited":"decode"](Re)}catch(Z){return ye.emit("error",Z,C),_e(Z)}return ye.emit("data",Re,C),_e(null,Re)})}catch(Fe){ye.emit("error",Fe,C),setTimeout(function(){_e(Fe)},0);return}},f.prototype.end=function(C){return this.rpcImpl&&(C||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service$1}var hasRequiredRpc$1;function requireRpc$1(){return hasRequiredRpc$1||(hasRequiredRpc$1=1,(function(g){var f=g;f.Service=requireService$1()})(rpc$1)),rpc$1}var roots$1,hasRequiredRoots$1;function requireRoots$1(){return hasRequiredRoots$1||(hasRequiredRoots$1=1,roots$1={}),roots$1}var hasRequiredIndexMinimal$1;function requireIndexMinimal$1(){return hasRequiredIndexMinimal$1||(hasRequiredIndexMinimal$1=1,(function(g){var f=g;f.build="minimal",f.Writer=requireWriter$1(),f.BufferWriter=requireWriter_buffer$1(),f.Reader=requireReader$1(),f.BufferReader=requireReader_buffer$1(),f.util=requireMinimal$3(),f.rpc=requireRpc$1(),f.roots=requireRoots$1(),f.configure=b;function b(){f.util._configure(),f.Writer._configure(f.BufferWriter),f.Reader._configure(f.BufferReader)}b()})(indexMinimal$1)),indexMinimal$1}var minimal$2,hasRequiredMinimal$2;function requireMinimal$2(){return hasRequiredMinimal$2||(hasRequiredMinimal$2=1,minimal$2=requireIndexMinimal$1()),minimal$2}var ZegoExpressLogger$1={exports:{}},indexMinimal={},minimal$1={},longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=f;var g=requireMinimal$1();function f(O,$){this.lo=O>>>0,this.hi=$>>>0}var b=f.zero=new f(0,0);b.toNumber=function(){return 0},b.zzEncode=b.zzDecode=function(){return this},b.length=function(){return 1};var C=f.zeroHash="\0\0\0\0\0\0\0\0";f.fromNumber=function($){if($===0)return b;var _e=$<0;_e&&($=-$);var ye=$>>>0,Fe=($-ye)/4294967296>>>0;return _e&&(Fe=~Fe>>>0,ye=~ye>>>0,++ye>4294967295&&(ye=0,++Fe>4294967295&&(Fe=0))),new f(ye,Fe)},f.from=function($){if(typeof $=="number")return f.fromNumber($);if(g.isString($))if(g.Long)$=g.Long.fromString($);else return f.fromNumber(parseInt($,10));return $.low||$.high?new f($.low>>>0,$.high>>>0):b},f.prototype.toNumber=function($){if(!$&&this.hi>>>31){var _e=~this.lo+1>>>0,ye=~this.hi>>>0;return _e||(ye=ye+1>>>0),-(_e+ye*4294967296)}return this.lo+this.hi*4294967296},f.prototype.toLong=function($){return g.Long?new g.Long(this.lo|0,this.hi|0,!!$):{low:this.lo|0,high:this.hi|0,unsigned:!!$}};var D=String.prototype.charCodeAt;return f.fromHash=function($){return $===C?b:new f((D.call($,0)|D.call($,1)<<8|D.call($,2)<<16|D.call($,3)<<24)>>>0,(D.call($,4)|D.call($,5)<<8|D.call($,6)<<16|D.call($,7)<<24)>>>0)},f.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},f.prototype.zzEncode=function(){var $=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^$)>>>0,this.lo=(this.lo<<1^$)>>>0,this},f.prototype.zzDecode=function(){var $=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^$)>>>0,this.hi=(this.hi>>>1^$)>>>0,this},f.prototype.length=function(){var $=this.lo,_e=(this.lo>>>28|this.hi<<4)>>>0,ye=this.hi>>>24;return ye===0?_e===0?$<16384?$<128?1:2:$<2097152?3:4:_e<16384?_e<128?5:6:_e<2097152?7:8:ye<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,(function(g){var f=g;f.asPromise=requireAspromise(),f.base64=requireBase64(),f.EventEmitter=requireEventemitter(),f.float=requireFloat(),f.inquire=requireInquire(),f.utf8=requireUtf8(),f.pool=requirePool(),f.LongBits=requireLongbits(),f.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),f.global=f.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal$1,f.emptyArray=Object.freeze?Object.freeze([]):[],f.emptyObject=Object.freeze?Object.freeze({}):{},f.isInteger=Number.isInteger||function(O){return typeof O=="number"&&isFinite(O)&&Math.floor(O)===O},f.isString=function(O){return typeof O=="string"||O instanceof String},f.isObject=function(O){return O&&typeof O=="object"},f.isset=f.isSet=function(O,$){var _e=O[$];return _e!=null&&O.hasOwnProperty($)?typeof _e!="object"||(Array.isArray(_e)?_e.length:Object.keys(_e).length)>0:!1},f.Buffer=(function(){try{var D=f.inquire("buffer").Buffer;return D.prototype.utf8Write?D:null}catch{return null}})(),f._Buffer_from=null,f._Buffer_allocUnsafe=null,f.newBuffer=function(O){return typeof O=="number"?f.Buffer?f._Buffer_allocUnsafe(O):new f.Array(O):f.Buffer?f._Buffer_from(O):typeof Uint8Array>"u"?O:new Uint8Array(O)},f.Array=typeof Uint8Array<"u"?Uint8Array:Array,f.Long=f.global.dcodeIO&&f.global.dcodeIO.Long||f.global.Long||f.inquire("long"),f.key2Re=/^true|false|0|1$/,f.key32Re=/^-?(?:0|[1-9][0-9]*)$/,f.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,f.longToHash=function(O){return O?f.LongBits.from(O).toHash():f.LongBits.zeroHash},f.longFromHash=function(O,$){var _e=f.LongBits.fromHash(O);return f.Long?f.Long.fromBits(_e.lo,_e.hi,$):_e.toNumber(!!$)};function b(D,O,$){for(var _e=Object.keys(O),ye=0;ye<_e.length;++ye)(D[_e[ye]]===void 0||!$)&&(D[_e[ye]]=O[_e[ye]]);return D}f.merge=b,f.lcFirst=function(O){return O.charAt(0).toLowerCase()+O.substring(1)};function C(D){function O($,_e){if(!(this instanceof O))return new O($,_e);Object.defineProperty(this,"message",{get:function(){return $}}),Error.captureStackTrace?Error.captureStackTrace(this,O):Object.defineProperty(this,"stack",{value:new Error().stack||""}),_e&&b(this,_e)}return O.prototype=Object.create(Error.prototype,{constructor:{value:O,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return D},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),O}f.newError=C,f.ProtocolError=C("ProtocolError"),f.oneOfGetter=function(O){for(var $={},_e=0;_e<O.length;++_e)$[O[_e]]=1;return function(){for(var ye=Object.keys(this),Fe=ye.length-1;Fe>-1;--Fe)if($[ye[Fe]]===1&&this[ye[Fe]]!==void 0&&this[ye[Fe]]!==null)return ye[Fe]}},f.oneOfSetter=function(O){return function($){for(var _e=0;_e<O.length;++_e)O[_e]!==$&&delete this[O[_e]]}},f.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},f._configure=function(){var D=f.Buffer;if(!D){f._Buffer_from=f._Buffer_allocUnsafe=null;return}f._Buffer_from=D.from!==Uint8Array.from&&D.from||function($,_e){return new D($,_e)},f._Buffer_allocUnsafe=D.allocUnsafe||function($){return new D($)}}})(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=ye;var g=requireMinimal$1(),f,b=g.LongBits,C=g.base64,D=g.utf8;function O(ke,ce,Ne){this.fn=ke,this.len=ce,this.next=void 0,this.val=Ne}function $(){}function _e(ke){this.head=ke.head,this.tail=ke.tail,this.len=ke.len,this.next=ke.states}function ye(){this.len=0,this.head=new O($,0,0),this.tail=this.head,this.states=null}var Fe=function(){return g.Buffer?function(){return(ye.create=function(){return new f})()}:function(){return new ye}};ye.create=Fe(),ye.alloc=function(ce){return new g.Array(ce)},g.Array!==Array&&(ye.alloc=g.pool(ye.alloc,g.Array.prototype.subarray)),ye.prototype._push=function(ce,Ne,tt){return this.tail=this.tail.next=new O(ce,Ne,tt),this.len+=Ne,this};function ot(ke,ce,Ne){ce[Ne]=ke&255}function Re(ke,ce,Ne){for(;ke>127;)ce[Ne++]=ke&127|128,ke>>>=7;ce[Ne]=ke}function Z(ke,ce){this.len=ke,this.next=void 0,this.val=ce}Z.prototype=Object.create(O.prototype),Z.prototype.fn=Re,ye.prototype.uint32=function(ce){return this.len+=(this.tail=this.tail.next=new Z((ce=ce>>>0)<128?1:ce<16384?2:ce<2097152?3:ce<268435456?4:5,ce)).len,this},ye.prototype.int32=function(ce){return ce<0?this._push(I,10,b.fromNumber(ce)):this.uint32(ce)},ye.prototype.sint32=function(ce){return this.uint32((ce<<1^ce>>31)>>>0)};function I(ke,ce,Ne){for(;ke.hi;)ce[Ne++]=ke.lo&127|128,ke.lo=(ke.lo>>>7|ke.hi<<25)>>>0,ke.hi>>>=7;for(;ke.lo>127;)ce[Ne++]=ke.lo&127|128,ke.lo=ke.lo>>>7;ce[Ne++]=ke.lo}ye.prototype.uint64=function(ce){var Ne=b.from(ce);return this._push(I,Ne.length(),Ne)},ye.prototype.int64=ye.prototype.uint64,ye.prototype.sint64=function(ce){var Ne=b.from(ce).zzEncode();return this._push(I,Ne.length(),Ne)},ye.prototype.bool=function(ce){return this._push(ot,1,ce?1:0)};function P(ke,ce,Ne){ce[Ne]=ke&255,ce[Ne+1]=ke>>>8&255,ce[Ne+2]=ke>>>16&255,ce[Ne+3]=ke>>>24}ye.prototype.fixed32=function(ce){return this._push(P,4,ce>>>0)},ye.prototype.sfixed32=ye.prototype.fixed32,ye.prototype.fixed64=function(ce){var Ne=b.from(ce);return this._push(P,4,Ne.lo)._push(P,4,Ne.hi)},ye.prototype.sfixed64=ye.prototype.fixed64,ye.prototype.float=function(ce){return this._push(g.float.writeFloatLE,4,ce)},ye.prototype.double=function(ce){return this._push(g.float.writeDoubleLE,8,ce)};var Pe=g.Array.prototype.set?function(ce,Ne,tt){Ne.set(ce,tt)}:function(ce,Ne,tt){for(var Qe=0;Qe<ce.length;++Qe)Ne[tt+Qe]=ce[Qe]};return ye.prototype.bytes=function(ce){var Ne=ce.length>>>0;if(!Ne)return this._push(ot,1,0);if(g.isString(ce)){var tt=ye.alloc(Ne=C.length(ce));C.decode(ce,tt,0),ce=tt}return this.uint32(Ne)._push(Pe,Ne,ce)},ye.prototype.string=function(ce){var Ne=D.length(ce);return Ne?this.uint32(Ne)._push(D.write,Ne,ce):this._push(ot,1,0)},ye.prototype.fork=function(){return this.states=new _e(this),this.head=this.tail=new O($,0,0),this.len=0,this},ye.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new O($,0,0),this.len=0),this},ye.prototype.ldelim=function(){var ce=this.head,Ne=this.tail,tt=this.len;return this.reset().uint32(tt),tt&&(this.tail.next=ce.next,this.tail=Ne,this.len+=tt),this},ye.prototype.finish=function(){for(var ce=this.head.next,Ne=this.constructor.alloc(this.len),tt=0;ce;)ce.fn(ce.val,Ne,tt),tt+=ce.len,ce=ce.next;return Ne},ye._configure=function(ke){f=ke,ye.create=Fe(),f._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=b;var g=requireWriter();(b.prototype=Object.create(g.prototype)).constructor=b;var f=requireMinimal$1();function b(){g.call(this)}b._configure=function(){b.alloc=f._Buffer_allocUnsafe,b.writeBytesBuffer=f.Buffer&&f.Buffer.prototype instanceof Uint8Array&&f.Buffer.prototype.set.name==="set"?function(O,$,_e){$.set(O,_e)}:function(O,$,_e){if(O.copy)O.copy($,_e,0,O.length);else for(var ye=0;ye<O.length;)$[_e++]=O[ye++]}},b.prototype.bytes=function(O){f.isString(O)&&(O=f._Buffer_from(O,"base64"));var $=O.length>>>0;return this.uint32($),$&&this._push(b.writeBytesBuffer,$,O),this};function C(D,O,$){D.length<40?f.utf8.write(D,O,$):O.utf8Write?O.utf8Write(D,$):O.write(D,$)}return b.prototype.string=function(O){var $=f.Buffer.byteLength(O);return this.uint32($),$&&this._push(C,$,O),this},b._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=O;var g=requireMinimal$1(),f,b=g.LongBits,C=g.utf8;function D(Re,Z){return RangeError("index out of range: "+Re.pos+" + "+(Z||1)+" > "+Re.len)}function O(Re){this.buf=Re,this.pos=0,this.len=Re.length}var $=typeof Uint8Array<"u"?function(Z){if(Z instanceof Uint8Array||Array.isArray(Z))return new O(Z);throw Error("illegal buffer")}:function(Z){if(Array.isArray(Z))return new O(Z);throw Error("illegal buffer")},_e=function(){return g.Buffer?function(I){return(O.create=function(Pe){return g.Buffer.isBuffer(Pe)?new f(Pe):$(Pe)})(I)}:$};O.create=_e(),O.prototype._slice=g.Array.prototype.subarray||g.Array.prototype.slice,O.prototype.uint32=(function(){var Z=4294967295;return function(){if(Z=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(Z=(Z|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(Z=(Z|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return Z;if((this.pos+=5)>this.len)throw this.pos=this.len,D(this,10);return Z}})(),O.prototype.int32=function(){return this.uint32()|0},O.prototype.sint32=function(){var Z=this.uint32();return Z>>>1^-(Z&1)|0};function ye(){var Re=new b(0,0),Z=0;if(this.len-this.pos>4){for(;Z<4;++Z)if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<Z*7)>>>0,this.buf[this.pos++]<128)return Re;if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<28)>>>0,Re.hi=(Re.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return Re;Z=0}else{for(;Z<3;++Z){if(this.pos>=this.len)throw D(this);if(Re.lo=(Re.lo|(this.buf[this.pos]&127)<<Z*7)>>>0,this.buf[this.pos++]<128)return Re}return Re.lo=(Re.lo|(this.buf[this.pos++]&127)<<Z*7)>>>0,Re}if(this.len-this.pos>4){for(;Z<5;++Z)if(Re.hi=(Re.hi|(this.buf[this.pos]&127)<<Z*7+3)>>>0,this.buf[this.pos++]<128)return Re}else for(;Z<5;++Z){if(this.pos>=this.len)throw D(this);if(Re.hi=(Re.hi|(this.buf[this.pos]&127)<<Z*7+3)>>>0,this.buf[this.pos++]<128)return Re}throw Error("invalid varint encoding")}O.prototype.bool=function(){return this.uint32()!==0};function Fe(Re,Z){return(Re[Z-4]|Re[Z-3]<<8|Re[Z-2]<<16|Re[Z-1]<<24)>>>0}O.prototype.fixed32=function(){if(this.pos+4>this.len)throw D(this,4);return Fe(this.buf,this.pos+=4)},O.prototype.sfixed32=function(){if(this.pos+4>this.len)throw D(this,4);return Fe(this.buf,this.pos+=4)|0};function ot(){if(this.pos+8>this.len)throw D(this,8);return new b(Fe(this.buf,this.pos+=4),Fe(this.buf,this.pos+=4))}return O.prototype.float=function(){if(this.pos+4>this.len)throw D(this,4);var Z=g.float.readFloatLE(this.buf,this.pos);return this.pos+=4,Z},O.prototype.double=function(){if(this.pos+8>this.len)throw D(this,4);var Z=g.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,Z},O.prototype.bytes=function(){var Z=this.uint32(),I=this.pos,P=this.pos+Z;if(P>this.len)throw D(this,Z);if(this.pos+=Z,Array.isArray(this.buf))return this.buf.slice(I,P);if(I===P){var Pe=g.Buffer;return Pe?Pe.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,I,P)},O.prototype.string=function(){var Z=this.bytes();return C.read(Z,0,Z.length)},O.prototype.skip=function(Z){if(typeof Z=="number"){if(this.pos+Z>this.len)throw D(this,Z);this.pos+=Z}else do if(this.pos>=this.len)throw D(this);while(this.buf[this.pos++]&128);return this},O.prototype.skipType=function(Re){switch(Re){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(Re=this.uint32()&7)!==4;)this.skipType(Re);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+Re+" at offset "+this.pos)}return this},O._configure=function(Re){f=Re,O.create=_e(),f._configure();var Z=g.Long?"toLong":"toNumber";g.merge(O.prototype,{int64:function(){return ye.call(this)[Z](!1)},uint64:function(){return ye.call(this)[Z](!0)},sint64:function(){return ye.call(this).zzDecode()[Z](!1)},fixed64:function(){return ot.call(this)[Z](!0)},sfixed64:function(){return ot.call(this)[Z](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=b;var g=requireReader();(b.prototype=Object.create(g.prototype)).constructor=b;var f=requireMinimal$1();function b(C){g.call(this,C)}return b._configure=function(){f.Buffer&&(b.prototype._slice=f.Buffer.prototype.slice)},b.prototype.string=function(){var D=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+D,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+D,this.len))},b._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=f;var g=requireMinimal$1();(f.prototype=Object.create(g.EventEmitter.prototype)).constructor=f;function f(b,C,D){if(typeof b!="function")throw TypeError("rpcImpl must be a function");g.EventEmitter.call(this),this.rpcImpl=b,this.requestDelimited=!!C,this.responseDelimited=!!D}return f.prototype.rpcCall=function b(C,D,O,$,_e){if(!$)throw TypeError("request must be specified");var ye=this;if(!_e)return g.asPromise(b,ye,C,D,O,$);if(!ye.rpcImpl){setTimeout(function(){_e(Error("already ended"))},0);return}try{return ye.rpcImpl(C,D[ye.requestDelimited?"encodeDelimited":"encode"]($).finish(),function(ot,Re){if(ot)return ye.emit("error",ot,C),_e(ot);if(Re===null){ye.end(!0);return}if(!(Re instanceof O))try{Re=O[ye.responseDelimited?"decodeDelimited":"decode"](Re)}catch(Z){return ye.emit("error",Z,C),_e(Z)}return ye.emit("data",Re,C),_e(null,Re)})}catch(Fe){ye.emit("error",Fe,C),setTimeout(function(){_e(Fe)},0);return}},f.prototype.end=function(C){return this.rpcImpl&&(C||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,(function(g){var f=g;f.Service=requireService()})(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,(function(g){var f=g;f.build="minimal",f.Writer=requireWriter(),f.BufferWriter=requireWriter_buffer(),f.Reader=requireReader(),f.BufferReader=requireReader_buffer(),f.util=requireMinimal$1(),f.rpc=requireRpc(),f.roots=requireRoots(),f.configure=b;function b(){f.util._configure(),f.Writer._configure(f.BufferWriter),f.Reader._configure(f.BufferReader)}b()})(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}var umd$1={exports:{}},umd=umd$1.exports,hasRequiredUmd;function requireUmd(){return hasRequiredUmd||(hasRequiredUmd=1,(function(g,f){(function(b,C){function D(O){return O.default||O}C(f),g.exports=D(f)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:umd,function(b){Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var C=null;try{C=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function D(_,E,w){this.low=_|0,this.high=E|0,this.unsigned=!!w}D.prototype.__isLong__,Object.defineProperty(D.prototype,"__isLong__",{value:!0});function O(_){return(_&&_.__isLong__)===!0}function $(_){var E=Math.clz32(_&-_);return _?31-E:E}D.isLong=O;var _e={},ye={};function Fe(_,E){var w,R,V;return E?(_>>>=0,(V=0<=_&&_<256)&&(R=ye[_],R)?R:(w=Re(_,0,!0),V&&(ye[_]=w),w)):(_|=0,(V=-128<=_&&_<128)&&(R=_e[_],R)?R:(w=Re(_,_<0?-1:0,!1),V&&(_e[_]=w),w))}D.fromInt=Fe;function ot(_,E){if(isNaN(_))return E?oe:ne;if(E){if(_<0)return oe;if(_>=Ne)return M}else{if(_<=-tt)return F;if(_+1>=tt)return K}return _<0?ot(-_,E).neg():Re(_%ce|0,_/ce|0,E)}D.fromNumber=ot;function Re(_,E,w){return new D(_,E,w)}D.fromBits=Re;var Z=Math.pow;function I(_,E,w){if(_.length===0)throw Error("empty string");if(typeof E=="number"?(w=E,E=!1):E=!!E,_==="NaN"||_==="Infinity"||_==="+Infinity"||_==="-Infinity")return E?oe:ne;if(w=w||10,w<2||36<w)throw RangeError("radix");var R;if((R=_.indexOf("-"))>0)throw Error("interior hyphen");if(R===0)return I(_.substring(1),E,w).neg();for(var V=ot(Z(w,8)),ae=ne,q=0;q<_.length;q+=8){var k=Math.min(8,_.length-q),G=parseInt(_.substring(q,q+k),w);if(k<8){var xe=ot(Z(w,k));ae=ae.mul(xe).add(ot(G))}else ae=ae.mul(V),ae=ae.add(ot(G))}return ae.unsigned=E,ae}D.fromString=I;function P(_,E){return typeof _=="number"?ot(_,E):typeof _=="string"?I(_,E):Re(_.low,_.high,typeof E=="boolean"?E:_.unsigned)}D.fromValue=P;var Pe=65536,ke=1<<24,ce=Pe*Pe,Ne=ce*ce,tt=Ne/2,Qe=Fe(ke),ne=Fe(0);D.ZERO=ne;var oe=Fe(0,!0);D.UZERO=oe;var fe=Fe(1);D.ONE=fe;var Y=Fe(1,!0);D.UONE=Y;var re=Fe(-1);D.NEG_ONE=re;var K=Re(-1,2147483647,!1);D.MAX_VALUE=K;var M=Re(-1,-1,!0);D.MAX_UNSIGNED_VALUE=M;var F=Re(0,-2147483648,!1);D.MIN_VALUE=F;var T=D.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*ce+(this.low>>>0):this.high*ce+(this.low>>>0)},T.toString=function(E){if(E=E||10,E<2||36<E)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(F)){var w=ot(E),R=this.div(w),V=R.mul(w).sub(this);return R.toString(E)+V.toInt().toString(E)}else return"-"+this.neg().toString(E);for(var ae=ot(Z(E,6),this.unsigned),q=this,k="";;){var G=q.div(ae),xe=q.sub(G.mul(ae)).toInt()>>>0,Ae=xe.toString(E);if(q=G,q.isZero())return Ae+k;for(;Ae.length<6;)Ae="0"+Ae;k=""+Ae+k}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(F)?64:this.neg().getNumBitsAbs();for(var E=this.high!=0?this.high:this.low,w=31;w>0&&(E&1<<w)==0;w--);return this.high!=0?w+33:w+1},T.isSafeInteger=function(){var E=this.high>>21;return E?this.unsigned?!1:E===-1&&!(this.low===0&&this.high===-2097152):!0},T.isZero=function(){return this.high===0&&this.low===0},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return(this.low&1)===1},T.isEven=function(){return(this.low&1)===0},T.equals=function(E){return O(E)||(E=P(E)),this.unsigned!==E.unsigned&&this.high>>>31===1&&E.high>>>31===1?!1:this.high===E.high&&this.low===E.low},T.eq=T.equals,T.notEquals=function(E){return!this.eq(E)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(E){return this.comp(E)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(E){return this.comp(E)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(E){return this.comp(E)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(E){return this.comp(E)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(E){if(O(E)||(E=P(E)),this.eq(E))return 0;var w=this.isNegative(),R=E.isNegative();return w&&!R?-1:!w&&R?1:this.unsigned?E.high>>>0>this.high>>>0||E.high===this.high&&E.low>>>0>this.low>>>0?-1:1:this.sub(E).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(F)?F:this.not().add(fe)},T.neg=T.negate,T.add=function(E){O(E)||(E=P(E));var w=this.high>>>16,R=this.high&65535,V=this.low>>>16,ae=this.low&65535,q=E.high>>>16,k=E.high&65535,G=E.low>>>16,xe=E.low&65535,Ae=0,De=0,Ie=0,be=0;return be+=ae+xe,Ie+=be>>>16,be&=65535,Ie+=V+G,De+=Ie>>>16,Ie&=65535,De+=R+k,Ae+=De>>>16,De&=65535,Ae+=w+q,Ae&=65535,Re(Ie<<16|be,Ae<<16|De,this.unsigned)},T.subtract=function(E){return O(E)||(E=P(E)),this.add(E.neg())},T.sub=T.subtract,T.multiply=function(E){if(this.isZero())return this;if(O(E)||(E=P(E)),C){var w=C.mul(this.low,this.high,E.low,E.high);return Re(w,C.get_high(),this.unsigned)}if(E.isZero())return this.unsigned?oe:ne;if(this.eq(F))return E.isOdd()?F:ne;if(E.eq(F))return this.isOdd()?F:ne;if(this.isNegative())return E.isNegative()?this.neg().mul(E.neg()):this.neg().mul(E).neg();if(E.isNegative())return this.mul(E.neg()).neg();if(this.lt(Qe)&&E.lt(Qe))return ot(this.toNumber()*E.toNumber(),this.unsigned);var R=this.high>>>16,V=this.high&65535,ae=this.low>>>16,q=this.low&65535,k=E.high>>>16,G=E.high&65535,xe=E.low>>>16,Ae=E.low&65535,De=0,Ie=0,be=0,qe=0;return qe+=q*Ae,be+=qe>>>16,qe&=65535,be+=ae*Ae,Ie+=be>>>16,be&=65535,be+=q*xe,Ie+=be>>>16,be&=65535,Ie+=V*Ae,De+=Ie>>>16,Ie&=65535,Ie+=ae*xe,De+=Ie>>>16,Ie&=65535,Ie+=q*G,De+=Ie>>>16,Ie&=65535,De+=R*Ae+V*xe+ae*G+q*k,De&=65535,Re(be<<16|qe,De<<16|Ie,this.unsigned)},T.mul=T.multiply,T.divide=function(E){if(O(E)||(E=P(E)),E.isZero())throw Error("division by zero");if(C){if(!this.unsigned&&this.high===-2147483648&&E.low===-1&&E.high===-1)return this;var w=(this.unsigned?C.div_u:C.div_s)(this.low,this.high,E.low,E.high);return Re(w,C.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?oe:ne;var R,V,ae;if(this.unsigned){if(E.unsigned||(E=E.toUnsigned()),E.gt(this))return oe;if(E.gt(this.shru(1)))return Y;ae=oe}else{if(this.eq(F)){if(E.eq(fe)||E.eq(re))return F;if(E.eq(F))return fe;var q=this.shr(1);return R=q.div(E).shl(1),R.eq(ne)?E.isNegative()?fe:re:(V=this.sub(E.mul(R)),ae=R.add(V.div(E)),ae)}else if(E.eq(F))return this.unsigned?oe:ne;if(this.isNegative())return E.isNegative()?this.neg().div(E.neg()):this.neg().div(E).neg();if(E.isNegative())return this.div(E.neg()).neg();ae=ne}for(V=this;V.gte(E);){R=Math.max(1,Math.floor(V.toNumber()/E.toNumber()));for(var k=Math.ceil(Math.log(R)/Math.LN2),G=k<=48?1:Z(2,k-48),xe=ot(R),Ae=xe.mul(E);Ae.isNegative()||Ae.gt(V);)R-=G,xe=ot(R,this.unsigned),Ae=xe.mul(E);xe.isZero()&&(xe=fe),ae=ae.add(xe),V=V.sub(Ae)}return ae},T.div=T.divide,T.modulo=function(E){if(O(E)||(E=P(E)),C){var w=(this.unsigned?C.rem_u:C.rem_s)(this.low,this.high,E.low,E.high);return Re(w,C.get_high(),this.unsigned)}return this.sub(this.div(E).mul(E))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return Re(~this.low,~this.high,this.unsigned)},T.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},T.clz=T.countLeadingZeros,T.countTrailingZeros=function(){return this.low?$(this.low):$(this.high)+32},T.ctz=T.countTrailingZeros,T.and=function(E){return O(E)||(E=P(E)),Re(this.low&E.low,this.high&E.high,this.unsigned)},T.or=function(E){return O(E)||(E=P(E)),Re(this.low|E.low,this.high|E.high,this.unsigned)},T.xor=function(E){return O(E)||(E=P(E)),Re(this.low^E.low,this.high^E.high,this.unsigned)},T.shiftLeft=function(E){return O(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?Re(this.low<<E,this.high<<E|this.low>>>32-E,this.unsigned):Re(0,this.low<<E-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(E){return O(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?Re(this.low>>>E|this.high<<32-E,this.high>>E,this.unsigned):Re(this.high>>E-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(E){return O(E)&&(E=E.toInt()),(E&=63)===0?this:E<32?Re(this.low>>>E|this.high<<32-E,this.high>>>E,this.unsigned):E===32?Re(this.high,0,this.unsigned):Re(this.high>>>E-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.rotateLeft=function(E){var w;return O(E)&&(E=E.toInt()),(E&=63)===0?this:E===32?Re(this.high,this.low,this.unsigned):E<32?(w=32-E,Re(this.low<<E|this.high>>>w,this.high<<E|this.low>>>w,this.unsigned)):(E-=32,w=32-E,Re(this.high<<E|this.low>>>w,this.low<<E|this.high>>>w,this.unsigned))},T.rotl=T.rotateLeft,T.rotateRight=function(E){var w;return O(E)&&(E=E.toInt()),(E&=63)===0?this:E===32?Re(this.high,this.low,this.unsigned):E<32?(w=32-E,Re(this.high<<w|this.low>>>E,this.low<<w|this.high>>>E,this.unsigned)):(E-=32,w=32-E,Re(this.low<<w|this.high>>>E,this.high<<w|this.low>>>E,this.unsigned))},T.rotr=T.rotateRight,T.toSigned=function(){return this.unsigned?Re(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:Re(this.low,this.high,!0)},T.toBytes=function(E){return E?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var E=this.high,w=this.low;return[w&255,w>>>8&255,w>>>16&255,w>>>24,E&255,E>>>8&255,E>>>16&255,E>>>24]},T.toBytesBE=function(){var E=this.high,w=this.low;return[E>>>24,E>>>16&255,E>>>8&255,E&255,w>>>24,w>>>16&255,w>>>8&255,w&255]},D.fromBytes=function(E,w,R){return R?D.fromBytesLE(E,w):D.fromBytesBE(E,w)},D.fromBytesLE=function(E,w){return new D(E[0]|E[1]<<8|E[2]<<16|E[3]<<24,E[4]|E[5]<<8|E[6]<<16|E[7]<<24,w)},D.fromBytesBE=function(E,w){return new D(E[4]<<24|E[5]<<16|E[6]<<8|E[7],E[0]<<24|E[1]<<16|E[2]<<8|E[3],w)},typeof BigInt=="function"&&(D.fromBigInt=function(E,w){var R=Number(BigInt.asIntN(32,E)),V=Number(BigInt.asIntN(32,E>>BigInt(32)));return Re(R,V,w)},D.fromValue=function(E,w){return typeof E=="bigint"?D.fromBigInt(E,w):P(E,w)},T.toBigInt=function(){var E=BigInt(this.low>>>0),w=BigInt(this.unsigned?this.high>>>0:this.high);return w<<BigInt(32)|E}),b.default=D})})(umd$1,umd$1.exports)),umd$1.exports}var ZegoExpressLogger=ZegoExpressLogger$1.exports,hasRequiredZegoExpressLogger;function requireZegoExpressLogger(){return hasRequiredZegoExpressLogger||(hasRequiredZegoExpressLogger=1,(function(g,f){((b,C)=>{g.exports=C(requireMinimal(),requireUmd())})(typeof self<"u"?self:ZegoExpressLogger,function(b,C){return O=[function(_e,ye){_e.exports=b},function(_e,ye){_e.exports=C},function(_e,Lr,vo){vo.r(Lr),vo.d(Lr,"ZegoLogger",function(){return ol}),vo.d(Lr,"ZegoDataReport",function(){return ne}),vo.d(Lr,"createZegoWebSocket",function(){return tt}),vo.d(Lr,"LoggerStateCenter",function(){return Z}),I.getInstance=function(){return I.instance||(I.instance=new I).u(),I.instance},I.prototype.u=function(){},Object.defineProperty(I.prototype,"testEnvironment",{get:function(){return this.h},set:function(m){this.h=m},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"ENV",{get:function(){return this.v},set:function(m){this.v=m},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"debug",{get:function(){return this._},set:function(m){this._=m},enumerable:!1,configurable:!0}),I.instance=new I;var ot,Re,Z=I;function I(){this.h=!1,this.v=0,this._=!1}(Lr=ri=ri||{})[Lr.IE=0]="IE",Lr[Lr.FIREFOX=1]="FIREFOX",Lr[Lr.CHROME=2]="CHROME",Lr[Lr.SAFARI=3]="SAFARI",Lr[Lr.OPERA=4]="OPERA",Lr[Lr.WEIXIN=5]="WEIXIN",Lr[Lr.WEIXINMINI=6]="WEIXINMINI",Lr[Lr.UNKOWN=7]="UNKOWN",(ri=ot=ot||{})[ri.BROWSER=0]="BROWSER",ri[ri.WEIXINMINI=1]="WEIXINMINI",(Lr=Re=Re||{})[Lr.DISABLE=0]="DISABLE",Lr[Lr.WEBSOCKET=1]="WEBSOCKET",Lr[Lr.HTTPS=2]="HTTPS";var P,Pe,ke={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},ce=((ri=P=P||{})[ri.IPv4Only=0]="IPv4Only",ri[ri.IPv4Prefer=1]="IPv4Prefer",ri[ri.IPv6Prefer=2]="IPv6Prefer",(Lr=Pe=Pe||{})[Lr.offline=0]="offline",Lr[Lr.online=1]="online",Ne.prototype.init=function(){var m=this;this.g&&(this.readyState=0,this.g.onOpen(function(N){m.readyState=m.g.readyState,typeof m.onopen=="function"&&(m.onopen(N),m.g.onClose(function(S){m.readyState=m.g.readyState,typeof m.onclose=="function"&&m.onclose(S)}),m.g.onMessage(function(S){typeof m.onmessage=="function"&&m.onmessage(S)}))}),this.g.onError(function(N){m.readyState=m.g.readyState,typeof m.onerror=="function"&&m.onerror(N)}))},Ne.prototype.onopen=function(m){},Ne.prototype.onerror=function(m){},Ne.prototype.onclose=function(m){},Ne.prototype.onmessage=function(m){},Ne.prototype.send=function(m){this.g&&this.g.send({data:m})},Ne.prototype.close=function(){this.g&&this.g.close()},Ne);function Ne(m,N){this.url=m,this.readyState=3,this.init()}function tt(m,N,S){return N%2===ot.BROWSER?(N=m,(S=S)?S.createSocket(N,1):new WebSocket(N)):new ce(m)}var Qe=function(){return(Qe=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},ne=(oe.prototype.newReport=function(m,N){this.dataStatistics[m]={event_time:Date.now(),time_consumed:0,seq:m,error:0,message:"success",event:N,events:[]}},oe.prototype.addMsgExt=function(m,N){this.dataStatistics[m]?this.dataStatistics[m].msg_ext=N:console.warn("".concat(m," not exist"))},oe.prototype.addMsgInfo=function(m,N){this.dataStatistics[m]?Object.assign(this.dataStatistics[m],N):console.warn("".concat(m," not exist"))},oe.prototype.eventStart=function(m,N){this.dataStatistics[m]?this.dataStatistics[m].events==null?this.logger.warn("zd.es.0 no events"):this.dataStatistics[m].events.push({event:N,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no seq match")},oe.prototype.eventEnd=function(m,N,S){if(this.dataStatistics[m]){var W=this.dataStatistics[m].events;if(W&&W.length!==0){for(var H=W.length-1;0<=H;H--)if(W[H].event==N&&W[H].time_consumed==0){W[H].time_consumed=Date.now()-W[H].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},oe.prototype.eventEndWithMsg=function(m,N,S){if(this.dataStatistics[m]){var W=this.dataStatistics[m].events;if(W){for(var H=W.length-1;0<=H;H--)if(W[H].event==N&&W[H].time_consumed==0){W[H].time_consumed=Date.now()-W[H].event_time,W[H].msg_ext==null&&(W[H].msg_ext={}),W[H].msg_ext=Qe({},S);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},oe.prototype.eventEndWithMsgInfo=function(m,N,S){if(this.dataStatistics[m]){var W=this.dataStatistics[m].events;if(W){for(var H=W.length-1;0<=H;H--)if(W[H].event==N&&W[H].time_consumed==0){W[H].time_consumed=Date.now()-W[H].event_time,Object.assign(W[H],S);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},oe.prototype.addEventInfo=function(m,N,S,W){if(this.dataStatistics[m]){var H=this.dataStatistics[m].events;if(H==null)this.logger.warn("zd.aei.0 no events");else for(var de=H.length-1;0<=de;de--)if(H[de].event==N&&H[de].time_consumed!=null){H[de].msg_ext==null?H[de].msg_ext={}:H[de].msg_ext&&(H[de].msg_ext[S]=W);break}}else this.logger.warn("zd.aei.0 no seq match")},oe.prototype.addEventMsg=function(m,N,S,W){if(this.dataStatistics[m]){var H=this.dataStatistics[m].events;if(H==null)this.logger.warn("zd.aem.0 no events");else for(var de=H.length-1;0<=de;de--)if(H[de].event==N){H[de][S]=W;break}}else this.logger.warn("zd.aem.0 no seq match")},oe.prototype.addEvent=function(m,N,S){this.dataStatistics[m]?this.dataStatistics[m].events&&(S?this.dataStatistics[m].events.push({event:N,event_time:Date.now(),msg_ext:S}):this.dataStatistics[m].events.push({event:N,event_time:Date.now()})):this.logger.warn("zd.ae.0 no seq match")},oe.prototype.uploadReport=function(m,N,S,W){var H=this.dataStatistics[m];H!=null&&(N&&(H.event=N),H.time_consumed=Date.now()-H.event_time,S&&this.addMsgInfo(m,{error:S.code,message:S.message||S.msg+" "+(W||"")}),this.logger.report(H),delete this.dataStatistics[m])},oe);function oe(m){this.dataStatistics={},this.logger=m}var fe,Y=["00","01","02","03","04","05","06","07","08","09"];function re(){var m=new Date;return[m.getFullYear()+"/",(Y[m.getMonth()+1]||m.getMonth()+1)+"/",(Y[m.getDate()]||m.getDate())+" ",(Y[m.getHours()]||m.getHours())+":",(Y[m.getMinutes()]||m.getMinutes())+":",Y[m.getSeconds()]||m.getSeconds(),"."+(""+m.getTime()).slice(-3)].join("")}(ri=fe=fe||{}).WEBSOCKET_STATE_CHANGE="zl.net.wsc",ri.OPEN_WS="zl.net.opws";var K=vo(0),Lr=vo(1);(K=K.default||K).util.Long=Lr.default||Lr,K.util.Long.fromBits=K.util.Long.fromBits||function(){return 0};for(var M=K.roots,F=K.types?K.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},T=K.types?K.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},_=Object.keys(F),E={$:function(m){return E[m]?E[m].call(this):M[m].decode?M[m].decode(this,this.uint32()):E.$.call(this,"int32")}},w={$:function(m,N,S){var W=F[m];return W===void 0?M[m].encode?(this.uint32((S<<3|2)>>0).fork(),M[m].encode(N,this).ldelim()):w.$.call(this,"int32",N,S):w[m].call(this.uint32(S<<3|W),N)}},R=0;R<_.length;R++)E[_[R]]=K.Reader.prototype[_[R]],w[_[R]]=K.Writer.prototype[_[R]];(function m(N,S,W,H){for(var de=0,lt=Object.keys(N);de<lt.length;de++){var at=lt[de];if(N[at].$m&&Object.keys(N[at].$m).every(function(Tt){return Number(Tt)})){if(W[at])throw Error(`nested type ${W}.${at} has already exist`);W[at]=((Tt,ct)=>{function we(fn){for(var dn in Tt)dn=Tt[dn],dn[1].charAt(0)==="{"?this[dn[0]]={}:dn[1].charAt(0)!=="["&&dn[1].charAt(0)!=="<"||(this[dn[0]]=[]);if(fn)for(var xn=Object.keys(fn),An=0;An<xn.length;++An)fn[xn[An]]!=null&&(this[xn[An]]=fn[xn[An]])}var Jt,En={};for(Jt in Tt){var rn=Tt[Jt],In=rn[1];In.charAt(0)==="{"?(we.prototype[rn[0]]=K.util.emptyObject,En[In]={$m:In.substring(1).split(",").map(function(fn,dn){return["$"+(dn+1),fn,null]}).reduce(function(fn,dn,xn){return fn[xn+1]=dn,fn},{})}):In.charAt(0)==="["||In.charAt(0)==="<"?we.prototype[rn[0]]=K.util.emptyArray:In==="bytes"?we.prototype[rn[0]]=K.util.newBuffer([]):rn[2]&&rn[2].hasOwnProperty("low")&&rn[2].hasOwnProperty("high")?we.prototype[rn[0]]=K.util.Long.fromBits(rn[2].low,rn[2].high,rn[2].unsigned):we.prototype[rn[0]]=rn[2]}return we.create=function(fn){return new we(fn)},we.decode=function(fn,dn){fn instanceof K.Reader||(fn=K.Reader.create(fn));for(var xn=dn===void 0?fn.len:fn.pos+dn,An=new we;fn.pos<xn;){var Hn=fn.uint32(),dr=Hn>>>3;if(0<dr&&Tt[dr]){var Zr=Tt[dr][0];if((yr=Tt[dr][1]).charAt(0)==="{")An[Zr]===K.util.emptyObject&&(An[Zr]={}),dr=we.$namespace[yr].decode(fn,fn.uint32()),An[Zr][dr.$1]=dr.$2;else if(yr.charAt(0)==="["||yr.charAt(0)==="<"){yr=yr.substring(1),An[Zr]&&An[Zr].length||(An[Zr]=[]);var yr,dr=!E[yr]&&!M[yr].decode;if(T[yr=dr?"int32":yr]!==void 0&&(7&Hn)==2)for(var rr=fn.uint32()+fn.pos;fn.pos<rr;)An[Zr].push(E.$.call(fn,yr));else An[Zr].push(E.$.call(fn,yr))}else An[Zr]=E.$.call(fn,yr)}else fn.skipType(7&Hn)}return An},we.encode=function(fn,dn){for(var xn in dn=dn||K.Writer.create(),Tt){var An=Tt[xn][0];if((rr=Tt[xn][1]).charAt(0)==="{"){if(fn[An]!=null&&fn.hasOwnProperty(An))for(var Hn=0,dr=Object.keys(fn[An]);Hn<dr.length;++Hn)dn.uint32((xn<<3|2)>>0).fork(),we.$namespace[rr].encode({$1:dr[Hn],$2:fn[An][dr[Hn]]},dn).ldelim()}else if(rr.charAt(0)==="["||rr.charAt(0)==="<"){var Zr=rr.charAt(0)==="<",yr=(rr=rr.substring(1),fn[An]);if(yr!=null&&yr.length){var rr=F[rr]===void 0&&!M[rr].encode?"int32":rr;if(Zr&&T[rr]!==void 0){for(dn.uint32((xn<<3|2)>>0).fork(),Hn=0;Hn<yr.length;Hn++)w[rr].call(dn,yr[Hn]);dn.ldelim()}else for(Hn=0;Hn<yr.length;Hn++)w.$.call(dn,rr,yr[Hn],xn)}}else fn[An]!=null&&fn.hasOwnProperty(An)&&w.$.call(dn,rr,fn[An],xn)}return dn},Object.keys(En).length&&(we.$namespace=m(En,S+"."+ct,we.$namespace||{},!0)),we})(N[at].$m,at)}else N[at].$s?W[at]=((Tt,ct)=>{function we(Jt,En,rn){K.rpc.Service.call(this,Jt,En,rn)}return((we.prototype=Object.create(K.rpc.Service.prototype)).constructor=we).create=function(Jt,En,rn){return new we(Jt,En,rn)},Object.keys(Tt).forEach(function(Jt){var En=Tt[Jt];function rn(In,fn){return this.rpcCall(rn,M[En[0]],M[En[1]],In,fn)}Object.defineProperty(rn,"name",{value:Jt}),Object.defineProperty(rn,"path",{value:S+"."+ct}),we.prototype[Jt]=rn}),we})(N[at].$s,at):N[at].$e&&Object.values(N[at].$e).every(function(Tt){return Number(Tt)===Tt})&&(W[at]=(Tt=>{for(var ct=Object.keys(Tt),we={},Jt=0;Jt<ct.length;Jt++)we[we[ct[Jt]]=Tt[ct[Jt]]]=ct[Jt];return we})(N[at].$e));W[at]&&!H&&(M[S+"."+at]=W[at]),delete N[at].$m,delete N[at].$s,delete N[at].$e,W[at]=m(N[at],S?S+"."+at:at,W[at]||{})}return W})({report:{rtcreport:{DetailLogRequest:{$m:{1:["appid","uint32",0],2:["product","uint32",0],3:["id_name","string",""],4:["timestamp","uint64",{low:0,high:0,unsigned:!0}],5:["litesign","string",""],6:["detail_data","bytes",[]]}},DetailLogResponse:{$m:{1:["code","uint32",0]}}}}},"",M,!1);var V=M.report;let ae=0,q=1;function k(m){let N=m.length;for(;0<=--N;)m[N]=0}let G=29,xe=256,Ae=xe+1+G,De=30,Ie=19,be=2*Ae+1,qe=15,Ve=16,pe=7,j=256,B=16,nt=17,he=18,it=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),wt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ee=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Oe=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rt=new Array(2*(Ae+2)),me=(k(rt),new Array(2*De)),Se=(k(me),new Array(512)),ge=(k(Se),new Array(256)),ve=(k(ge),new Array(G)),ee=(k(ve),new Array(De));function ze(m,N,S,W,H){this.static_tree=m,this.extra_bits=N,this.extra_base=S,this.elems=W,this.max_length=H,this.has_stree=m&&m.length}k(ee);let Je,yt,xt;function Ye(m,N){this.dyn_tree=m,this.max_code=0,this.stat_desc=N}let J=m=>m<256?Se[m]:Se[256+(m>>>7)],He=(m,N)=>{m.pending_buf[m.pending++]=255&N,m.pending_buf[m.pending++]=N>>>8&255},Le=(m,N,S)=>{m.bi_valid>Ve-S?(m.bi_buf|=N<<m.bi_valid&65535,He(m,m.bi_buf),m.bi_buf=N>>Ve-m.bi_valid,m.bi_valid+=S-Ve):(m.bi_buf|=N<<m.bi_valid&65535,m.bi_valid+=S)},Ue=(m,N,S)=>{Le(m,S[2*N],S[2*N+1])},_t=(m,N)=>{let S=0;for(;S|=1&m,m>>>=1,S<<=1,0<--N;);return S>>>1},st=(m,N)=>{var S,W=N.dyn_tree,H=N.max_code,de=N.stat_desc.static_tree,lt=N.stat_desc.has_stree,at=N.stat_desc.extra_bits,Tt=N.stat_desc.extra_base,ct=N.stat_desc.max_length;let we,Jt,En,rn,In,fn=0;for(rn=0;rn<=qe;rn++)m.bl_count[rn]=0;for(W[2*m.heap[m.heap_max]+1]=0,we=m.heap_max+1;we<be;we++)Jt=m.heap[we],(rn=W[2*W[2*Jt+1]+1]+1)>ct&&(rn=ct,fn++),W[2*Jt+1]=rn,Jt>H||(m.bl_count[rn]++,In=0,Jt>=Tt&&(In=at[Jt-Tt]),S=W[2*Jt],m.opt_len+=S*(rn+In),lt&&(m.static_len+=S*(de[2*Jt+1]+In)));if(fn!==0){do for(rn=ct-1;m.bl_count[rn]===0;)rn--;while(m.bl_count[rn]--,m.bl_count[rn+1]+=2,m.bl_count[ct]--,0<(fn-=2));for(rn=ct;rn!==0;rn--)for(Jt=m.bl_count[rn];Jt!==0;)H<(En=m.heap[--we])||(W[2*En+1]!==rn&&(m.opt_len+=(rn-W[2*En+1])*W[2*En],W[2*En+1]=rn),Jt--)}},Dt=(m,N,S)=>{var W=new Array(qe+1);let H=0,de,lt;for(de=1;de<=qe;de++)H=H+S[de-1]<<1,W[de]=H;for(lt=0;lt<=N;lt++){var at=m[2*lt+1];at!==0&&(m[2*lt]=_t(W[at]++,at))}},qt=m=>{let N;for(N=0;N<Ae;N++)m.dyn_ltree[2*N]=0;for(N=0;N<De;N++)m.dyn_dtree[2*N]=0;for(N=0;N<Ie;N++)m.bl_tree[2*N]=0;m.dyn_ltree[2*j]=1,m.opt_len=m.static_len=0,m.sym_next=m.matches=0},Lt=m=>{8<m.bi_valid?He(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0},ut=(m,N,S,W)=>{var H=2*N,de=2*S;return m[H]<m[de]||m[H]===m[de]&&W[N]<=W[S]},Yt=(m,N,S)=>{var W=m.heap[S];let H=S<<1;for(;H<=m.heap_len&&(H<m.heap_len&&ut(N,m.heap[H+1],m.heap[H],m.depth)&&H++,!ut(N,W,m.heap[H],m.depth));)m.heap[S]=m.heap[H],S=H,H<<=1;m.heap[S]=W},wn=(m,N,S)=>{var W,H,de,lt;let at=0;if(m.sym_next!==0)for(;W=255&m.pending_buf[m.sym_buf+at++],W+=(255&m.pending_buf[m.sym_buf+at++])<<8,H=m.pending_buf[m.sym_buf+at++],W==0?Ue(m,H,N):(de=ge[H],Ue(m,de+xe+1,N),(lt=it[de])!==0&&(H-=ve[de],Le(m,H,lt)),W--,de=J(W),Ue(m,de,S),(lt=wt[de])!==0&&(W-=ee[de],Le(m,W,lt))),at<m.sym_next;);Ue(m,j,N)},Rn=(m,N)=>{var S=N.dyn_tree,W=N.stat_desc.static_tree,H=N.stat_desc.has_stree,de=N.stat_desc.elems;let lt,at,Tt=-1,ct;for(m.heap_len=0,m.heap_max=be,lt=0;lt<de;lt++)S[2*lt]!==0?(m.heap[++m.heap_len]=Tt=lt,m.depth[lt]=0):S[2*lt+1]=0;for(;m.heap_len<2;)S[2*(ct=m.heap[++m.heap_len]=Tt<2?++Tt:0)]=1,m.depth[ct]=0,m.opt_len--,H&&(m.static_len-=W[2*ct+1]);for(N.max_code=Tt,lt=m.heap_len>>1;1<=lt;lt--)Yt(m,S,lt);for(ct=de;lt=m.heap[1],m.heap[1]=m.heap[m.heap_len--],Yt(m,S,1),at=m.heap[1],m.heap[--m.heap_max]=lt,m.heap[--m.heap_max]=at,S[2*ct]=S[2*lt]+S[2*at],m.depth[ct]=(m.depth[lt]>=m.depth[at]?m.depth[lt]:m.depth[at])+1,S[2*lt+1]=S[2*at+1]=ct,m.heap[1]=ct++,Yt(m,S,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],st(m,N),Dt(S,Tt,m.bl_count)},jn=(m,N,S)=>{let W,H=-1;var de;let lt=N[1],at=0,Tt=7,ct=4;for(lt===0&&(Tt=138,ct=3),N[2*(S+1)+1]=65535,W=0;W<=S;W++)de=lt,lt=N[2*(W+1)+1],++at<Tt&&de===lt||(at<ct?m.bl_tree[2*de]+=at:de!==0?(de!==H&&m.bl_tree[2*de]++,m.bl_tree[2*B]++):at<=10?m.bl_tree[2*nt]++:m.bl_tree[2*he]++,at=0,H=de,ct=lt===0?(Tt=138,3):de===lt?(Tt=6,3):(Tt=7,4))},Mn=(m,N,S)=>{let W,H=-1;var de;let lt=N[1],at=0,Tt=7,ct=4;for(lt===0&&(Tt=138,ct=3),W=0;W<=S;W++)if(de=lt,lt=N[2*(W+1)+1],!(++at<Tt&&de===lt)){if(at<ct)for(;Ue(m,de,m.bl_tree),--at!=0;);else de!==0?(de!==H&&(Ue(m,de,m.bl_tree),at--),Ue(m,B,m.bl_tree),Le(m,at-3,2)):at<=10?(Ue(m,nt,m.bl_tree),Le(m,at-3,3)):(Ue(m,he,m.bl_tree),Le(m,at-11,7));at=0,H=de,ct=lt===0?(Tt=138,3):de===lt?(Tt=6,3):(Tt=7,4)}},Pn=!1,ci=(m,N,S,W)=>{Le(m,0+(W?1:0),3),Lt(m),He(m,S),He(m,~S),S&&m.pending_buf.set(m.window.subarray(N,N+S),m.pending),m.pending+=S};var ri={O:m=>{Pn||((()=>{let N,S,W,H,de;var lt=new Array(qe+1);for(W=0,H=0;H<G-1;H++)for(ve[H]=W,N=0;N<1<<it[H];N++)ge[W++]=H;for(ge[W-1]=H,de=0,H=0;H<16;H++)for(ee[H]=de,N=0;N<1<<wt[H];N++)Se[de++]=H;for(de>>=7;H<De;H++)for(ee[H]=de<<7,N=0;N<1<<wt[H]-7;N++)Se[256+de++]=H;for(S=0;S<=qe;S++)lt[S]=0;for(N=0;N<=143;)rt[2*N+1]=8,N++,lt[8]++;for(;N<=255;)rt[2*N+1]=9,N++,lt[9]++;for(;N<=279;)rt[2*N+1]=7,N++,lt[7]++;for(;N<=287;)rt[2*N+1]=8,N++,lt[8]++;for(Dt(rt,Ae+1,lt),N=0;N<De;N++)me[2*N+1]=5,me[2*N]=_t(N,5);Je=new ze(rt,it,xe+1,Ae,qe),yt=new ze(me,wt,0,De,qe),xt=new ze(new Array(0),Ee,0,Ie,pe)})(),Pn=!0),m.l_desc=new Ye(m.dyn_ltree,Je),m.d_desc=new Ye(m.dyn_dtree,yt),m.bl_desc=new Ye(m.bl_tree,xt),m.bi_buf=0,m.bi_valid=0,qt(m)},S:ci,k:(m,N,S,W)=>{let H,de,lt=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=(at=>{let Tt=4093624447,ct;for(ct=0;ct<=31;ct++,Tt>>>=1)if(1&Tt&&at.dyn_ltree[2*ct]!==0)return ae;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return q;for(ct=32;ct<xe;ct++)if(at.dyn_ltree[2*ct]!==0)return q;return ae})(m)),Rn(m,m.l_desc),Rn(m,m.d_desc),lt=(at=>{let Tt;for(jn(at,at.dyn_ltree,at.l_desc.max_code),jn(at,at.dyn_dtree,at.d_desc.max_code),Rn(at,at.bl_desc),Tt=Ie-1;3<=Tt&&at.bl_tree[2*Oe[Tt]+1]===0;Tt--);return at.opt_len+=3*(Tt+1)+5+5+4,Tt})(m),H=m.opt_len+3+7>>>3,(de=m.static_len+3+7>>>3)<=H&&(H=de)):H=de=S+5,S+4<=H&&N!==-1?ci(m,N,S,W):m.strategy===4||de===H?(Le(m,2+(W?1:0),3),wn(m,rt,me)):(Le(m,4+(W?1:0),3),((at,Tt,ct,we)=>{let Jt;for(Le(at,Tt-257,5),Le(at,ct-1,5),Le(at,we-4,4),Jt=0;Jt<we;Jt++)Le(at,at.bl_tree[2*Oe[Jt]+1],3);Mn(at,at.dyn_ltree,Tt-1),Mn(at,at.dyn_dtree,ct-1)})(m,m.l_desc.max_code+1,m.d_desc.max_code+1,lt+1),wn(m,m.dyn_ltree,m.dyn_dtree)),qt(m),W&&Lt(m)},A:(m,N,S)=>(m.pending_buf[m.sym_buf+m.sym_next++]=N,m.pending_buf[m.sym_buf+m.sym_next++]=N>>8,m.pending_buf[m.sym_buf+m.sym_next++]=S,N===0?m.dyn_ltree[2*S]++:(m.matches++,N--,m.dyn_ltree[2*(ge[S]+xe+1)]++,m.dyn_dtree[2*J(N)]++),m.sym_next===m.sym_end),j:m=>{Le(m,2,3),Ue(m,j,rt),(m=m).bi_valid===16?(He(m,m.bi_buf),m.bi_buf=0,m.bi_valid=0):8<=m.bi_valid&&(m.pending_buf[m.pending++]=255&m.bi_buf,m.bi_buf>>=8,m.bi_valid-=8)}},Nr=(m,N,S,W)=>{let H=65535&m|0,de=m>>>16&65535|0,lt=0;for(;S!==0;){for(S-=lt=2e3<S?2e3:S;H=H+N[W++]|0,de=de+H|0,--lt;);H%=65521,de%=65521}return H|de<<16|0};let nr=new Uint32Array((()=>{let m,N=[];for(var S=0;S<256;S++){m=S;for(var W=0;W<8;W++)m=1&m?3988292384^m>>>1:m>>>1;N[S]=m}return N})());var Nn=(m,N,S,W)=>{var H=nr,de=W+S;m^=-1;for(let lt=W;lt<de;lt++)m=m>>>8^H[255&(m^N[lt])];return-1^m},_r={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},vo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{O:$n,S:Dr,k:Gr,A:Or,j:mi}=ri,{Z_NO_FLUSH:Ar,Z_PARTIAL_FLUSH:sr,Z_FULL_FLUSH:kn,Z_FINISH:Jn,Z_BLOCK:Mr,Z_OK:ar,Z_STREAM_END:oi,Z_STREAM_ERROR:gi,Z_DATA_ERROR:go,Z_BUF_ERROR:xi,Z_DEFAULT_COMPRESSION:ui,Z_FILTERED:no,Z_HUFFMAN_ONLY:Ui,Z_RLE:vi,Z_FIXED:Br,Z_DEFAULT_STRATEGY:ur,Z_UNKNOWN:Qr,Z_DEFLATED:qr}=vo,Bi=9,Vn=286,mr=30,lr=19,ti=2*Vn+1,Q=15,dt=3,Be=258,Te=Be+dt+1,$e=42,Ge=57,mt=69,vt=73,St=91,It=103,Nt=113,Gt=666,Ut=1,Wt=2,an=3,en=4,Cn=(m,N)=>(m.msg=_r[N],N),Un=m=>2*m-(4<m?9:0),On=m=>{let N=m.length;for(;0<=--N;)m[N]=0},Xn=m=>{let N,S,W;var H=m.w_size;for(N=m.hash_size,W=N;S=m.head[--W],m.head[W]=S>=H?S-H:0,--N;);for(N=H,W=N;S=m.prev[--W],m.prev[W]=S>=H?S-H:0,--N;);},Zn=(m,N,S)=>(N<<m.hash_shift^S)&m.hash_mask,Sr=m=>{var N=m.state;let S=N.pending;(S=S>m.avail_out?m.avail_out:S)!==0&&(m.output.set(N.pending_buf.subarray(N.pending_out,N.pending_out+S),m.next_out),m.next_out+=S,N.pending_out+=S,m.total_out+=S,m.avail_out-=S,N.pending-=S,N.pending===0)&&(N.pending_out=0)},gr=(m,N)=>{Gr(m,0<=m.block_start?m.block_start:-1,m.strstart-m.block_start,N),m.block_start=m.strstart,Sr(m.strm)},ir=(m,N)=>{m.pending_buf[m.pending++]=N},Ti=(m,N)=>{m.pending_buf[m.pending++]=N>>>8&255,m.pending_buf[m.pending++]=255&N},eo=(m,N,S,W)=>{let H=m.avail_in;return(H=H>W?W:H)===0?0:(m.avail_in-=H,N.set(m.input.subarray(m.next_in,m.next_in+H),S),m.state.wrap===1?m.adler=Nr(m.adler,N,H,S):m.state.wrap===2&&(m.adler=Nn(m.adler,N,H,S)),m.next_in+=H,m.total_in+=H,H)},_i=(m,N)=>{let S=m.max_chain_length,W=m.strstart,H;var de;let lt=m.prev_length,at=m.nice_match;var Tt=m.strstart>m.w_size-Te?m.strstart-(m.w_size-Te):0,ct=m.window,we=m.w_mask,Jt=m.prev,En=m.strstart+Be;let rn=ct[W+lt-1],In=ct[W+lt];m.good_match<=m.prev_length&&(S>>=2),at>m.lookahead&&(at=m.lookahead);do if(ct[(H=N)+lt]===In&&ct[H+lt-1]===rn&&ct[H]===ct[W]&&ct[++H]===ct[W+1]){for(W+=2,H++;ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&ct[++W]===ct[++H]&&W<En;);if(de=Be-(En-W),W=En-Be,de>lt){if(m.match_start=N,(lt=de)>=at)break;rn=ct[W+lt-1],In=ct[W+lt]}}while((N=Jt[N&we])>Tt&&--S!=0);return lt<=m.lookahead?lt:m.lookahead},Vr=m=>{var N=m.w_size;let S,W,H;do{if(W=m.window_size-m.lookahead-m.strstart,m.strstart>=N+(N-Te)&&(m.window.set(m.window.subarray(N,N+N-W),0),m.match_start-=N,m.strstart-=N,m.block_start-=N,m.strstart<m.insert&&(m.insert=m.strstart),Xn(m),W+=N),m.strm.avail_in===0)break;if(S=eo(m.strm,m.window,m.strstart+m.lookahead,W),m.lookahead+=S,m.lookahead+m.insert>=dt)for(H=m.strstart-m.insert,m.ins_h=m.window[H],m.ins_h=Zn(m,m.ins_h,m.window[H+1]);m.insert&&(m.ins_h=Zn(m,m.ins_h,m.window[H+dt-1]),m.prev[H&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=H,H++,m.insert--,!(m.lookahead+m.insert<dt)););}while(m.lookahead<Te&&m.strm.avail_in!==0)},li=(m,N)=>{let S=m.pending_buf_size-5>m.w_size?m.w_size:m.pending_buf_size-5,W,H,de,lt=0;for(var at=m.strm.avail_in;W=65535,de=m.bi_valid+42>>3,!(m.strm.avail_out<de||(de=m.strm.avail_out-de,H=m.strstart-m.block_start,(W=(W=W>H+m.strm.avail_in?H+m.strm.avail_in:W)>de?de:W)<S&&(W===0&&N!==Jn||N===Ar||W!==H+m.strm.avail_in))||(lt=N===Jn&&W===H+m.strm.avail_in?1:0,Dr(m,0,0,lt),m.pending_buf[m.pending-4]=W,m.pending_buf[m.pending-3]=W>>8,m.pending_buf[m.pending-2]=~W,m.pending_buf[m.pending-1]=~W>>8,Sr(m.strm),H&&(H>W&&(H=W),m.strm.output.set(m.window.subarray(m.block_start,m.block_start+H),m.strm.next_out),m.strm.next_out+=H,m.strm.avail_out-=H,m.strm.total_out+=H,m.block_start+=H,W-=H),W&&(eo(m.strm,m.strm.output,m.strm.next_out,W),m.strm.next_out+=W,m.strm.avail_out-=W,m.strm.total_out+=W),lt!==0)););return(at-=m.strm.avail_in)&&(at>=m.w_size?(m.matches=2,m.window.set(m.strm.input.subarray(m.strm.next_in-m.w_size,m.strm.next_in),0),m.strstart=m.w_size,m.insert=m.strstart):(m.window_size-m.strstart<=at&&(m.strstart-=m.w_size,m.window.set(m.window.subarray(m.w_size,m.w_size+m.strstart),0),m.matches<2&&m.matches++,m.strstart<m.insert)&&(m.insert=m.strstart),m.window.set(m.strm.input.subarray(m.strm.next_in-at,m.strm.next_in),m.strstart),m.strstart+=at,m.insert+=m.w_size-m.insert<at?m.w_size-m.insert:at),m.block_start=m.strstart),m.high_water<m.strstart&&(m.high_water=m.strstart),lt?en:N!==Ar&&N!==Jn&&m.strm.avail_in===0&&m.strstart===m.block_start?Wt:(de=m.window_size-m.strstart,m.strm.avail_in>de&&m.block_start>=m.w_size&&(m.block_start-=m.w_size,m.strstart-=m.w_size,m.window.set(m.window.subarray(m.w_size,m.w_size+m.strstart),0),m.matches<2&&m.matches++,de+=m.w_size,m.strstart<m.insert)&&(m.insert=m.strstart),(de=de>m.strm.avail_in?m.strm.avail_in:de)&&(eo(m.strm,m.window,m.strstart,de),m.strstart+=de,m.insert+=de>m.w_size-m.insert?m.w_size-m.insert:de),m.high_water<m.strstart&&(m.high_water=m.strstart),de=m.bi_valid+42>>3,de=65535<m.pending_buf_size-de?65535:m.pending_buf_size-de,S=de>m.w_size?m.w_size:de,((H=m.strstart-m.block_start)>=S||(H||N===Jn)&&N!==Ar&&m.strm.avail_in===0&&H<=de)&&(W=H>de?de:H,lt=N===Jn&&m.strm.avail_in===0&&W===H?1:0,Dr(m,m.block_start,W,lt),m.block_start+=W,Sr(m.strm)),lt?an:Ut)};Lr=(m,N)=>{let S,W;for(;;){if(m.lookahead<Te){if(Vr(m),m.lookahead<Te&&N===Ar)return Ut;if(m.lookahead===0)break}if(S=0,m.lookahead>=dt&&(m.ins_h=Zn(m,m.ins_h,m.window[m.strstart+dt-1]),S=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),S!==0&&m.strstart-S<=m.w_size-Te&&(m.match_length=_i(m,S)),m.match_length>=dt)if(W=Or(m,m.strstart-m.match_start,m.match_length-dt),m.lookahead-=m.match_length,m.match_length<=m.max_lazy_match&&m.lookahead>=dt){for(m.match_length--;m.strstart++,m.ins_h=Zn(m,m.ins_h,m.window[m.strstart+dt-1]),S=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart,--m.match_length!=0;);m.strstart++}else m.strstart+=m.match_length,m.match_length=0,m.ins_h=m.window[m.strstart],m.ins_h=Zn(m,m.ins_h,m.window[m.strstart+1]);else W=Or(m,0,m.window[m.strstart]),m.lookahead--,m.strstart++;if(W&&(gr(m,!1),m.strm.avail_out===0))return Ut}return m.insert=m.strstart<dt-1?m.strstart:dt-1,N===Jn?(gr(m,!0),m.strm.avail_out===0?an:en):m.sym_next&&(gr(m,!1),m.strm.avail_out===0)?Ut:Wt},ri=(m,N)=>{let S,W;for(var H;;){if(m.lookahead<Te){if(Vr(m),m.lookahead<Te&&N===Ar)return Ut;if(m.lookahead===0)break}if(S=0,m.lookahead>=dt&&(m.ins_h=Zn(m,m.ins_h,m.window[m.strstart+dt-1]),S=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),m.prev_length=m.match_length,m.prev_match=m.match_start,m.match_length=dt-1,S!==0&&m.prev_length<m.max_lazy_match&&m.strstart-S<=m.w_size-Te&&(m.match_length=_i(m,S),m.match_length<=5)&&(m.strategy===no||m.match_length===dt&&4096<m.strstart-m.match_start)&&(m.match_length=dt-1),m.prev_length>=dt&&m.match_length<=m.prev_length){for(H=m.strstart+m.lookahead-dt,W=Or(m,m.strstart-1-m.prev_match,m.prev_length-dt),m.lookahead-=m.prev_length-1,m.prev_length-=2;++m.strstart<=H&&(m.ins_h=Zn(m,m.ins_h,m.window[m.strstart+dt-1]),S=m.prev[m.strstart&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=m.strstart),--m.prev_length!=0;);if(m.match_available=0,m.match_length=dt-1,m.strstart++,W&&(gr(m,!1),m.strm.avail_out===0))return Ut}else if(m.match_available){if((W=Or(m,0,m.window[m.strstart-1]))&&gr(m,!1),m.strstart++,m.lookahead--,m.strm.avail_out===0)return Ut}else m.match_available=1,m.strstart++,m.lookahead--}return m.match_available&&(W=Or(m,0,m.window[m.strstart-1]),m.match_available=0),m.insert=m.strstart<dt-1?m.strstart:dt-1,N===Jn?(gr(m,!0),m.strm.avail_out===0?an:en):m.sym_next&&(gr(m,!1),m.strm.avail_out===0)?Ut:Wt};function di(m,N,S,W,H){this.good_length=m,this.max_lazy=N,this.nice_length=S,this.max_chain=W,this.func=H}let Wr=[new di(0,0,0,0,li),new di(4,4,8,4,Lr),new di(4,5,16,8,Lr),new di(4,6,32,32,Lr),new di(4,4,16,16,ri),new di(8,16,32,32,ri),new di(8,16,128,128,ri),new di(8,32,128,256,ri),new di(32,128,258,1024,ri),new di(32,258,258,4096,ri)],Wn=m=>{m.window_size=2*m.w_size,On(m.head),m.max_lazy_match=Wr[m.level].max_lazy,m.good_match=Wr[m.level].good_length,m.nice_match=Wr[m.level].nice_length,m.max_chain_length=Wr[m.level].max_chain,m.strstart=0,m.block_start=0,m.lookahead=0,m.insert=0,m.match_length=m.prev_length=dt-1,m.match_available=0,m.ins_h=0};function Ji(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ti),this.dyn_dtree=new Uint16Array(2*(2*mr+1)),this.bl_tree=new Uint16Array(2*(2*lr+1)),On(this.dyn_ltree),On(this.dyn_dtree),On(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Q+1),this.heap=new Uint16Array(2*Vn+1),On(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Vn+1),On(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let hi=m=>{var N;return!m||!(N=m.state)||N.strm!==m||N.status!==$e&&N.status!==Ge&&N.status!==mt&&N.status!==vt&&N.status!==St&&N.status!==It&&N.status!==Nt&&N.status!==Gt?1:0},Ii=m=>{if(hi(m))return Cn(m,gi);m.total_in=m.total_out=0,m.data_type=Qr;var N=m.state;return N.pending=0,N.pending_out=0,N.wrap<0&&(N.wrap=-N.wrap),N.status=N.wrap===2?Ge:N.wrap?$e:Nt,m.adler=N.wrap===2?0:1,N.last_flush=-2,$n(N),ar},ie=m=>{var N=Ii(m);return N===ar&&Wn(m.state),N},L=(m,N,S,W,H,de)=>{if(!m)return gi;let lt=1;if(N===ui&&(N=6),W<0?(lt=0,W=-W):15<W&&(lt=2,W-=16),H<1||H>Bi||S!==qr||W<8||15<W||N<0||9<N||de<0||de>Br||W===8&&lt!==1)return Cn(m,gi);W===8&&(W=9);var at=new Ji;return(m.state=at).strm=m,at.status=$e,at.wrap=lt,at.gzhead=null,at.w_bits=W,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=H+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+dt-1)/dt),at.window=new Uint8Array(2*at.w_size),at.head=new Uint16Array(at.hash_size),at.prev=new Uint16Array(at.w_size),at.lit_bufsize=1<<H+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new Uint8Array(at.pending_buf_size),at.sym_buf=at.lit_bufsize,at.sym_end=3*(at.lit_bufsize-1),at.level=N,at.strategy=de,at.method=S,ie(m)};var ue={deflateInit:(m,N)=>L(m,N,qr,15,8,ur),deflateInit2:L,deflateReset:ie,deflateResetKeep:Ii,deflateSetHeader:(m,N)=>hi(m)||m.state.wrap!==2?gi:(m.state.gzhead=N,ar),deflate:(m,N)=>{if(hi(m)||N>Mr||N<0)return m?Cn(m,gi):gi;var S=m.state;if(!m.output||m.avail_in!==0&&!m.input||S.status===Gt&&N!==Jn)return Cn(m,m.avail_out===0?xi:gi);var W=S.last_flush;if(S.last_flush=N,S.pending!==0){if(Sr(m),m.avail_out===0)return S.last_flush=-1,ar}else if(m.avail_in===0&&Un(N)<=Un(W)&&N!==Jn)return Cn(m,xi);if(S.status===Gt&&m.avail_in!==0)return Cn(m,xi);if(S.status===$e&&S.wrap===0&&(S.status=Nt),S.status===$e){let de=qr+(S.w_bits-8<<4)<<8,lt=-1;if(lt=S.strategy>=Ui||S.level<2?0:S.level<6?1:S.level===6?2:3,de|=lt<<6,S.strstart!==0&&(de|=32),de+=31-de%31,Ti(S,de),S.strstart!==0&&(Ti(S,m.adler>>>16),Ti(S,65535&m.adler)),m.adler=1,S.status=Nt,Sr(m),S.pending!==0)return S.last_flush=-1,ar}if(S.status===Ge){if(m.adler=0,ir(S,31),ir(S,139),ir(S,8),S.gzhead)ir(S,(S.gzhead.text?1:0)+(S.gzhead.hcrc?2:0)+(S.gzhead.extra?4:0)+(S.gzhead.name?8:0)+(S.gzhead.comment?16:0)),ir(S,255&S.gzhead.time),ir(S,S.gzhead.time>>8&255),ir(S,S.gzhead.time>>16&255),ir(S,S.gzhead.time>>24&255),ir(S,S.level===9?2:S.strategy>=Ui||S.level<2?4:0),ir(S,255&S.gzhead.os),S.gzhead.extra&&S.gzhead.extra.length&&(ir(S,255&S.gzhead.extra.length),ir(S,S.gzhead.extra.length>>8&255)),S.gzhead.hcrc&&(m.adler=Nn(m.adler,S.pending_buf,S.pending,0)),S.gzindex=0,S.status=mt;else if(ir(S,0),ir(S,0),ir(S,0),ir(S,0),ir(S,0),ir(S,S.level===9?2:S.strategy>=Ui||S.level<2?4:0),ir(S,3),S.status=Nt,Sr(m),S.pending!==0)return S.last_flush=-1,ar}if(S.status===mt){if(S.gzhead.extra){let de=S.pending,lt=(65535&S.gzhead.extra.length)-S.gzindex;for(;S.pending+lt>S.pending_buf_size;){var H=S.pending_buf_size-S.pending;if(S.pending_buf.set(S.gzhead.extra.subarray(S.gzindex,S.gzindex+H),S.pending),S.pending=S.pending_buf_size,S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de)),S.gzindex+=H,Sr(m),S.pending!==0)return S.last_flush=-1,ar;de=0,lt-=H}W=new Uint8Array(S.gzhead.extra),S.pending_buf.set(W.subarray(S.gzindex,S.gzindex+lt),S.pending),S.pending+=lt,S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de)),S.gzindex=0}S.status=vt}if(S.status===vt){if(S.gzhead.name){let de=S.pending,lt;do if(S.pending===S.pending_buf_size){if(S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de)),Sr(m),S.pending!==0)return S.last_flush=-1,ar;de=0}while(lt=S.gzindex<S.gzhead.name.length?255&S.gzhead.name.charCodeAt(S.gzindex++):0,ir(S,lt),lt!==0);S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de)),S.gzindex=0}S.status=St}if(S.status===St){if(S.gzhead.comment){let de=S.pending,lt;do if(S.pending===S.pending_buf_size){if(S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de)),Sr(m),S.pending!==0)return S.last_flush=-1,ar;de=0}while(lt=S.gzindex<S.gzhead.comment.length?255&S.gzhead.comment.charCodeAt(S.gzindex++):0,ir(S,lt),lt!==0);S.gzhead.hcrc&&S.pending>de&&(m.adler=Nn(m.adler,S.pending_buf,S.pending-de,de))}S.status=It}if(S.status===It){if(S.gzhead.hcrc){if(S.pending+2>S.pending_buf_size&&(Sr(m),S.pending!==0))return S.last_flush=-1,ar;ir(S,255&m.adler),ir(S,m.adler>>8&255),m.adler=0}if(S.status=Nt,Sr(m),S.pending!==0)return S.last_flush=-1,ar}if(m.avail_in!==0||S.lookahead!==0||N!==Ar&&S.status!==Gt){if(W=S.level===0?li(S,N):S.strategy===Ui?((de,lt)=>{for(var at;;){if(de.lookahead===0&&(Vr(de),de.lookahead===0)){if(lt===Ar)return Ut;break}if(de.match_length=0,at=Or(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,at&&(gr(de,!1),de.strm.avail_out===0))return Ut}return de.insert=0,lt===Jn?(gr(de,!0),de.strm.avail_out===0?an:en):de.sym_next&&(gr(de,!1),de.strm.avail_out===0)?Ut:Wt})(S,N):S.strategy===vi?((de,lt)=>{let at;var Tt;let ct,we;for(var Jt=de.window;;){if(de.lookahead<=Be){if(Vr(de),de.lookahead<=Be&&lt===Ar)return Ut;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=dt&&0<de.strstart&&(Tt=Jt[ct=de.strstart-1])===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]){for(we=de.strstart+Be;Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&Tt===Jt[++ct]&&ct<we;);de.match_length=Be-(we-ct),de.lookahead<de.match_length&&(de.match_length=de.lookahead)}if(de.match_length>=dt?(at=Or(de,1,de.match_length-dt),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(at=Or(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),at&&(gr(de,!1),de.strm.avail_out===0))return Ut}return de.insert=0,lt===Jn?(gr(de,!0),de.strm.avail_out===0?an:en):de.sym_next&&(gr(de,!1),de.strm.avail_out===0)?Ut:Wt})(S,N):Wr[S.level].func(S,N),W!==an&&W!==en||(S.status=Gt),W===Ut||W===an)return m.avail_out===0&&(S.last_flush=-1),ar;if(W===Wt&&(N===sr?mi(S):N!==Mr&&(Dr(S,0,0,!1),N===kn)&&(On(S.head),S.lookahead===0)&&(S.strstart=0,S.block_start=0,S.insert=0),Sr(m),m.avail_out===0))return S.last_flush=-1,ar}return N!==Jn||!(S.wrap<=0)&&(S.wrap===2?(ir(S,255&m.adler),ir(S,m.adler>>8&255),ir(S,m.adler>>16&255),ir(S,m.adler>>24&255),ir(S,255&m.total_in),ir(S,m.total_in>>8&255),ir(S,m.total_in>>16&255),ir(S,m.total_in>>24&255)):(Ti(S,m.adler>>>16),Ti(S,65535&m.adler)),Sr(m),0<S.wrap&&(S.wrap=-S.wrap),S.pending!==0)?ar:oi},deflateEnd:m=>{var N;return hi(m)?gi:(N=m.state.status,m.state=null,N===Nt?Cn(m,go):ar)},deflateSetDictionary:(m,N)=>{let S=N.length;if(hi(m))return gi;var W=m.state,H=W.wrap;if(H===2||H===1&&W.status!==$e||W.lookahead)return gi;H===1&&(m.adler=Nr(m.adler,N,S,0)),W.wrap=0,S>=W.w_size&&(H===0&&(On(W.head),W.strstart=0,W.block_start=0,W.insert=0),(de=new Uint8Array(W.w_size)).set(N.subarray(S-W.w_size,S),0),N=de,S=W.w_size);var de=m.avail_in,lt=m.next_in,at=m.input;for(m.avail_in=S,m.next_in=0,m.input=N,Vr(W);W.lookahead>=dt;){let Tt=W.strstart,ct=W.lookahead-(dt-1);for(;W.ins_h=Zn(W,W.ins_h,W.window[Tt+dt-1]),W.prev[Tt&W.w_mask]=W.head[W.ins_h],W.head[W.ins_h]=Tt,Tt++,--ct;);W.strstart=Tt,W.lookahead=dt-1,Vr(W)}return W.strstart+=W.lookahead,W.block_start=W.strstart,W.insert=W.lookahead,W.lookahead=0,W.match_length=W.prev_length=dt-1,W.match_available=0,m.next_in=lt,m.input=at,m.avail_in=de,W.wrap=H,ar},deflateInfo:"pako deflate (from Nodeca project)"},je=function(m){for(var N,S,W=Array.prototype.slice.call(arguments,1);W.length;){var H=W.shift();if(H){if(typeof H!="object")throw new TypeError(H+"must be non-object");for(var de in H)N=H,S=de,Object.prototype.hasOwnProperty.call(N,S)&&(m[de]=H[de])}}return m},Xe=m=>{let N=0;for(let H=0,de=m.length;H<de;H++)N+=m[H].length;var S=new Uint8Array(N);for(let H=0,de=0,lt=m.length;H<lt;H++){var W=m[H];S.set(W,de),de+=W.length}return S};let ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ft=!1}let bt=new Uint8Array(256);for(let m=0;m<256;m++)bt[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;bt[254]=bt[254]=1;var Rt=m=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(m);let N,S,W,H,de,lt=m.length,at=0;for(H=0;H<lt;H++)(64512&(S=m.charCodeAt(H)))==55296&&H+1<lt&&(64512&(W=m.charCodeAt(H+1)))==56320&&(S=65536+(S-55296<<10)+(W-56320),H++),at+=S<128?1:S<2048?2:S<65536?3:4;for(N=new Uint8Array(at),de=0,H=0;de<at;H++)(64512&(S=m.charCodeAt(H)))==55296&&H+1<lt&&(64512&(W=m.charCodeAt(H+1)))==56320&&(S=65536+(S-55296<<10)+(W-56320),H++),S<128?N[de++]=S:(S<2048?N[de++]=192|S>>>6:(S<65536?N[de++]=224|S>>>12:(N[de++]=240|S>>>18,N[de++]=128|S>>>12&63),N[de++]=128|S>>>6&63),N[de++]=128|63&S);return N},Pt=(m,N)=>{var S=N||m.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(m.subarray(0,N));let W,H;var de=new Array(2*S);for(H=0,W=0;W<S;){let lt=m[W++];if(lt<128)de[H++]=lt;else{let at=bt[lt];if(4<at)de[H++]=65533,W+=at-1;else{for(lt&=at===2?31:at===3?15:7;1<at&&W<S;)lt=lt<<6|63&m[W++],at--;1<at?de[H++]=65533:lt<65536?de[H++]=lt:(lt-=65536,de[H++]=55296|lt>>10&1023,de[H++]=56320|1023&lt)}}}return((lt,at)=>{if(at<65534&&lt.subarray&&ft)return String.fromCharCode.apply(null,lt.length===at?lt:lt.subarray(0,at));let Tt="";for(let ct=0;ct<at;ct++)Tt+=String.fromCharCode(lt[ct]);return Tt})(de,H)},Vt=(m,N)=>{let S=(N=(N=N||m.length)>m.length?m.length:N)-1;for(;0<=S&&(192&m[S])==128;)S--;return!(S<0)&&S!==0&&S+bt[m[S]]>N?S:N},$t=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let ln=Object.prototype.toString,{Z_NO_FLUSH:qn,Z_SYNC_FLUSH:Tn,Z_FULL_FLUSH:Sn,Z_FINISH:_n,Z_OK:Gn,Z_STREAM_END:cr,Z_DEFAULT_COMPRESSION:Ur,Z_DEFAULT_STRATEGY:Hr,Z_DEFLATED:Jr}=vo;function Er(N){this.options=je({level:Ur,method:Jr,chunkSize:16384,windowBits:15,memLevel:8,strategy:Hr},N||{});var N=this.options,S=(N.raw&&0<N.windowBits?N.windowBits=-N.windowBits:N.gzip&&0<N.windowBits&&N.windowBits<16&&(N.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $t,this.strm.avail_out=0,ue.deflateInit2(this.strm,N.level,N.method,N.windowBits,N.memLevel,N.strategy));if(S!==Gn)throw new Error(_r[S]);if(N.header&&ue.deflateSetHeader(this.strm,N.header),N.dictionary){let W;if(W=typeof N.dictionary=="string"?Rt(N.dictionary):ln.call(N.dictionary)==="[object ArrayBuffer]"?new Uint8Array(N.dictionary):N.dictionary,(S=ue.deflateSetDictionary(this.strm,W))!==Gn)throw new Error(_r[S]);this.T=!0}}function Kr(m,N){if(N=new Er(N),N.push(m,!0),N.err)throw N.msg||_r[N.err];return N.result}Er.prototype.push=function(m,N){var S=this.strm,W=this.options.chunkSize;let H,de;if(this.ended)return!1;for(de=N===~~N?N:N===!0?_n:qn,typeof m=="string"?S.input=Rt(m):ln.call(m)==="[object ArrayBuffer]"?S.input=new Uint8Array(m):S.input=m,S.next_in=0,S.avail_in=S.input.length;;)if(S.avail_out===0&&(S.output=new Uint8Array(W),S.next_out=0,S.avail_out=W),(de===Tn||de===Sn)&&S.avail_out<=6)this.onData(S.output.subarray(0,S.next_out)),S.avail_out=0;else{if(ue.deflate(S,de)===cr)return 0<S.next_out&&this.onData(S.output.subarray(0,S.next_out)),H=ue.deflateEnd(this.strm),this.onEnd(H),this.ended=!0,H===Gn;if(S.avail_out===0)this.onData(S.output);else if(0<de&&0<S.next_out)this.onData(S.output.subarray(0,S.next_out)),S.avail_out=0;else if(S.avail_in===0)break}return!0},Er.prototype.onData=function(m){this.chunks.push(m)},Er.prototype.onEnd=function(m){m===Gn&&(this.result=Xe(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};let Go=Kr,$o={deflate:Go},Uu=16209,wc=16191,vh=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yh=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),pd=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Xc=(m,N,S,W,H,de,lt,at)=>{var Tt,ct=at.bits;let we=0,Jt=0,En=0,rn=0,In=0,fn=0,dn=0,xn=0,An=0,Hn=0,dr,Zr,yr,rr,si=null,ii;var ei=new Uint16Array(16),to=new Uint16Array(16);let ji=null,Ts,ho,qi;for(we=0;we<=15;we++)ei[we]=0;for(Jt=0;Jt<W;Jt++)ei[N[S+Jt]]++;for(In=ct,rn=15;1<=rn&&ei[rn]===0;rn--);if(In>rn&&(In=rn),rn===0)H[de++]=20971520,H[de++]=20971520,at.bits=1;else{for(En=1;En<rn&&ei[En]===0;En++);for(In<En&&(In=En),xn=1,we=1;we<=15;we++)if((xn=(xn<<=1)-ei[we])<0)return-1;if(0<xn&&(m===0||rn!==1))return-1;for(to[1]=0,we=1;we<15;we++)to[we+1]=to[we]+ei[we];for(Jt=0;Jt<W;Jt++)N[S+Jt]!==0&&(lt[to[N[S+Jt]]++]=Jt);if(ii=m===0?(si=ji=lt,20):m===1?(si=vh,ji=Qo,257):(si=yh,ji=pd,0),Hn=0,Jt=0,we=En,rr=de,fn=In,dn=0,yr=-1,Tt=(An=1<<In)-1,m===1&&852<An||m===2&&592<An)return 1;for(;;){for(Ts=we-dn,qi=lt[Jt]+1<ii?(ho=0,lt[Jt]):lt[Jt]>=ii?(ho=ji[lt[Jt]-ii],si[lt[Jt]-ii]):(ho=96,0),dr=1<<we-dn,Zr=1<<fn,En=Zr;Zr-=dr,H[rr+(Hn>>dn)+Zr]=Ts<<24|ho<<16|qi|0,Zr!==0;);for(dr=1<<we-1;Hn&dr;)dr>>=1;if(Hn=dr!==0?(Hn&=dr-1)+dr:0,Jt++,--ei[we]==0){if(we===rn)break;we=N[S+lt[Jt]]}if(we>In&&(Hn&Tt)!==yr){for(dn===0&&(dn=In),rr+=En,fn=we-dn,xn=1<<fn;fn+dn<rn&&!((xn-=ei[fn+dn])<=0);)fn++,xn<<=1;if(An+=1<<fn,m===1&&852<An||m===2&&592<An)return 1;H[yr=Hn&Tt]=In<<24|fn<<16|rr-de|0}}Hn!==0&&(H[rr+Hn]=we-dn<<24|64<<16|0),at.bits=In}return 0};let md=1,gd=2,{Z_FINISH:Pl,Z_BLOCK:Bu,Z_TREES:$c,Z_OK:_a,Z_STREAM_END:bh,Z_NEED_DICT:vd,Z_STREAM_ERROR:Gs,Z_DATA_ERROR:Cc,Z_MEM_ERROR:yd,Z_BUF_ERROR:_h,Z_DEFLATED:eu}=vo,zu=16180,ju=16190,Qs=16191,qu=16199,Rc=16200,fi=16209,Sh=16211,bd=852,Nl=592,Ws=m=>(m>>>24&255)+(m>>>8&65280)+((65280&m)<<8)+((255&m)<<24);function _d(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let Sa=m=>{var N;return!m||!(N=m.state)||N.strm!==m||N.mode<zu||N.mode>Sh?1:0},Ea=m=>{var N;return Sa(m)?Gs:(N=m.state,m.total_in=m.total_out=N.total=0,m.msg="",N.wrap&&(m.adler=1&N.wrap),N.mode=zu,N.last=0,N.havedict=0,N.flags=-1,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new Int32Array(bd),N.distcode=N.distdyn=new Int32Array(Nl),N.sane=1,N.back=-1,_a)},Sd=m=>{var N;return Sa(m)?Gs:((N=m.state).wsize=0,N.whave=0,N.wnext=0,Ea(m))},Ed=(m,N)=>{let S;var W;return Sa(m)||(W=m.state,N<0?(S=0,N=-N):(S=5+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N))?Gs:(W.window!==null&&W.wbits!==N&&(W.window=null),W.wrap=S,W.wbits=N,Sd(m))},Td=(m,N)=>{var S;return m?(S=new _d,(m.state=S).strm=m,S.window=null,S.mode=zu,(S=Ed(m,N))!==_a&&(m.state=null),S):Gs},Dl=!0,Vu,nc,xc=(m,N,S,W)=>{let H;return m=m.state,m.window===null&&(m.wsize=1<<m.wbits,m.wnext=0,m.whave=0,m.window=new Uint8Array(m.wsize)),m.wsize<=W?(m.window.set(N.subarray(S-m.wsize,S),0),m.wnext=0,m.whave=m.wsize):((H=m.wsize-m.wnext)>W&&(H=W),m.window.set(N.subarray(S-W,S-W+H),m.wnext),(W-=H)?(m.window.set(N.subarray(S-W,S),0),m.wnext=W,m.whave=m.wsize):(m.wnext+=H,m.wnext===m.wsize&&(m.wnext=0),m.whave<m.wsize&&(m.whave+=H))),0};var Js={inflateReset:Sd,inflateReset2:Ed,inflateResetKeep:Ea,inflateInit:m=>Td(m,15),inflateInit2:Td,inflate:(m,N)=>{var S;let W,H,de,lt,at,Tt,ct,we,Jt,En,rn,In,fn,dn=0,xn,An,Hn,dr,Zr,yr,rr,si;var ii=new Uint8Array(4);let ei,to;var ji,Ts,ho,qi,uo,Wo,Si,ws,Vi,fo,Ni,Lo,_o,fr,hr,Yi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sa(m)||!m.output||!m.input&&m.avail_in!==0)return Gs;(S=m.state).mode===Qs&&(S.mode=16192),lt=m.next_out,H=m.output,Tt=m.avail_out,de=m.next_in,W=m.input,at=m.avail_in,ct=S.hold,we=S.bits,Jt=at,En=Tt,si=_a;e:for(;;)switch(S.mode){case zu:if(S.wrap===0)S.mode=16192;else{for(;we<16;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}2&S.wrap&&ct===35615?(S.wbits===0&&(S.wbits=15),ii[S.check=0]=255&ct,ii[1]=ct>>>8&255,S.check=Nn(S.check,ii,2,0),ct=0,we=0,S.mode=16181):(S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&ct)<<8)+(ct>>8))%31?(m.msg="incorrect header check",S.mode=fi):(15&ct)!==eu?(m.msg="unknown compression method",S.mode=fi):(ct>>>=4,we-=4,rr=8+(15&ct),S.wbits===0&&(S.wbits=rr),15<rr||rr>S.wbits?(m.msg="invalid window size",S.mode=fi):(S.dmax=1<<S.wbits,S.flags=0,m.adler=S.check=1,S.mode=512&ct?16189:Qs,ct=0,we=0)))}break;case 16181:for(;we<16;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(S.flags=ct,(255&S.flags)!==eu){m.msg="unknown compression method",S.mode=fi;break}if(57344&S.flags){m.msg="unknown header flags set",S.mode=fi;break}S.head&&(S.head.text=ct>>8&1),512&S.flags&&4&S.wrap&&(ii[0]=255&ct,ii[1]=ct>>>8&255,S.check=Nn(S.check,ii,2,0)),ct=0,we=0,S.mode=16182;case 16182:for(;we<32;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.head&&(S.head.time=ct),512&S.flags&&4&S.wrap&&(ii[0]=255&ct,ii[1]=ct>>>8&255,ii[2]=ct>>>16&255,ii[3]=ct>>>24&255,S.check=Nn(S.check,ii,4,0)),ct=0,we=0,S.mode=16183;case 16183:for(;we<16;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.head&&(S.head.xflags=255&ct,S.head.os=ct>>8),512&S.flags&&4&S.wrap&&(ii[0]=255&ct,ii[1]=ct>>>8&255,S.check=Nn(S.check,ii,2,0)),ct=0,we=0,S.mode=16184;case 16184:if(1024&S.flags){for(;we<16;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.length=ct,S.head&&(S.head.extra_len=ct),512&S.flags&&4&S.wrap&&(ii[0]=255&ct,ii[1]=ct>>>8&255,S.check=Nn(S.check,ii,2,0)),ct=0,we=0}else S.head&&(S.head.extra=null);S.mode=16185;case 16185:if(1024&S.flags&&((rn=(rn=S.length)>at?at:rn)&&(S.head&&(rr=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Uint8Array(S.head.extra_len)),S.head.extra.set(W.subarray(de,de+rn),rr)),512&S.flags&&4&S.wrap&&(S.check=Nn(S.check,W,rn,de)),at-=rn,de+=rn,S.length-=rn),S.length))break e;S.length=0,S.mode=16186;case 16186:if(2048&S.flags){if(at===0)break e;for(rn=0;rr=W[de+rn++],S.head&&rr&&S.length<65536&&(S.head.name+=String.fromCharCode(rr)),rr&&rn<at;);if(512&S.flags&&4&S.wrap&&(S.check=Nn(S.check,W,rn,de)),at-=rn,de+=rn,rr)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=16187;case 16187:if(4096&S.flags){if(at===0)break e;for(rn=0;rr=W[de+rn++],S.head&&rr&&S.length<65536&&(S.head.comment+=String.fromCharCode(rr)),rr&&rn<at;);if(512&S.flags&&4&S.wrap&&(S.check=Nn(S.check,W,rn,de)),at-=rn,de+=rn,rr)break e}else S.head&&(S.head.comment=null);S.mode=16188;case 16188:if(512&S.flags){for(;we<16;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(4&S.wrap&&ct!==(65535&S.check)){m.msg="header crc mismatch",S.mode=fi;break}ct=0,we=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),m.adler=S.check=0,S.mode=Qs;break;case 16189:for(;we<32;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}m.adler=S.check=Ws(ct),ct=0,we=0,S.mode=ju;case ju:if(S.havedict===0)return m.next_out=lt,m.avail_out=Tt,m.next_in=de,m.avail_in=at,S.hold=ct,S.bits=we,vd;m.adler=S.check=1,S.mode=Qs;case Qs:if(N===Bu||N===$c)break e;case 16192:if(S.last)ct>>>=7&we,we-=7&we,S.mode=16206;else{for(;we<3;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}switch(S.last=1&ct,ct>>>=1,--we,3&ct){case 0:S.mode=16193;break;case 1:if((Xr=>{if(Dl){Vu=new Int32Array(512),nc=new Int32Array(32);let xr=0;for(;xr<144;)Xr.lens[xr++]=8;for(;xr<256;)Xr.lens[xr++]=9;for(;xr<280;)Xr.lens[xr++]=7;for(;xr<288;)Xr.lens[xr++]=8;for(Xc(md,Xr.lens,0,288,Vu,0,Xr.work,{bits:9}),xr=0;xr<32;)Xr.lens[xr++]=5;Xc(gd,Xr.lens,0,32,nc,0,Xr.work,{bits:5}),Dl=!1}Xr.lencode=Vu,Xr.lenbits=9,Xr.distcode=nc,Xr.distbits=5})(S),S.mode=qu,N!==$c)break;ct>>>=2,we-=2;break e;case 2:S.mode=16196;break;case 3:m.msg="invalid block type",S.mode=fi}ct>>>=2,we-=2}break;case 16193:for(ct>>>=7&we,we-=7&we;we<32;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if((65535&ct)!=(ct>>>16^65535)){m.msg="invalid stored block lengths",S.mode=fi;break}if(S.length=65535&ct,ct=0,we=0,S.mode=16194,N===$c)break e;case 16194:S.mode=16195;case 16195:if(rn=S.length){if((rn=(rn=rn>at?at:rn)>Tt?Tt:rn)===0)break e;H.set(W.subarray(de,de+rn),lt),at-=rn,de+=rn,Tt-=rn,lt+=rn,S.length-=rn}else S.mode=Qs;break;case 16196:for(;we<14;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(S.nlen=257+(31&ct),ct>>>=5,we-=5,S.ndist=1+(31&ct),ct>>>=5,we-=5,S.ncode=4+(15&ct),ct>>>=4,we-=4,286<S.nlen||30<S.ndist){m.msg="too many length or distance symbols",S.mode=fi;break}S.have=0,S.mode=16197;case 16197:for(;S.have<S.ncode;){for(;we<3;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.lens[Yi[S.have++]]=7&ct,ct>>>=3,we-=3}for(;S.have<19;)S.lens[Yi[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,ei={bits:S.lenbits},si=Xc(0,S.lens,0,19,S.lencode,0,S.work,ei),S.lenbits=ei.bits,si){m.msg="invalid code lengths set",S.mode=fi;break}S.have=0,S.mode=16198;case 16198:for(;S.have<S.nlen+S.ndist;){for(;dn=S.lencode[ct&(1<<S.lenbits)-1],xn=dn>>>24,An=dn>>>16&255,Hn=65535&dn,!(xn<=we);){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(Hn<16)ct>>>=xn,we-=xn,S.lens[S.have++]=Hn;else{if(Hn===16){for(to=xn+2;we<to;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(ct>>>=xn,we-=xn,S.have===0){m.msg="invalid bit length repeat",S.mode=fi;break}rr=S.lens[S.have-1],rn=3+(3&ct),ct>>>=2,we-=2}else if(Hn===17){for(to=xn+3;we<to;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}ct>>>=xn,we-=xn,rr=0,rn=3+(7&ct),ct>>>=3,we-=3}else{for(to=xn+7;we<to;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}ct>>>=xn,we-=xn,rr=0,rn=11+(127&ct),ct>>>=7,we-=7}if(S.have+rn>S.nlen+S.ndist){m.msg="invalid bit length repeat",S.mode=fi;break}for(;rn--;)S.lens[S.have++]=rr}}if(S.mode===fi)break;if(S.lens[256]===0){m.msg="invalid code -- missing end-of-block",S.mode=fi;break}if(S.lenbits=9,ei={bits:S.lenbits},si=Xc(md,S.lens,0,S.nlen,S.lencode,0,S.work,ei),S.lenbits=ei.bits,si){m.msg="invalid literal/lengths set",S.mode=fi;break}if(S.distbits=6,S.distcode=S.distdyn,ei={bits:S.distbits},si=Xc(gd,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,ei),S.distbits=ei.bits,si){m.msg="invalid distances set",S.mode=fi;break}if(S.mode=qu,N===$c)break e;case qu:S.mode=Rc;case Rc:if(6<=at&&258<=Tt){m.next_out=lt,m.avail_out=Tt,m.next_in=de,m.avail_in=at,S.hold=ct,S.bits=we;{Tr=void 0,Ma=void 0,ji=void 0,Ts=void 0,ho=void 0,qi=void 0,uo=void 0,Wo=void 0,Si=void 0,ws=void 0,Vi=void 0,fo=void 0,Ni=void 0,Lo=void 0,_o=void 0,fr=void 0,hr=void 0,wi=void 0;var Tr=m,Ma=En;let Xr,xr,Di,Ei,$r,wr,Zi,bi,Cs;var wi=Tr.state;Xr=Tr.next_in,fr=Tr.input,ji=Xr+(Tr.avail_in-5),xr=Tr.next_out,hr=Tr.output,Ts=xr-(Ma-Tr.avail_out),ho=xr+(Tr.avail_out-257),qi=wi.dmax,uo=wi.wsize,Wo=wi.whave,Si=wi.wnext,ws=wi.window,Di=wi.hold,Ei=wi.bits,Vi=wi.lencode,fo=wi.distcode,Ni=(1<<wi.lenbits)-1,Lo=(1<<wi.distbits)-1;t:do for(Ei<15&&(Di+=fr[Xr++]<<Ei,Ei+=8,Di+=fr[Xr++]<<Ei,Ei+=8),$r=Vi[Di&Ni];;){if(wr=$r>>>24,Di>>>=wr,Ei-=wr,(wr=$r>>>16&255)===0)hr[xr++]=65535&$r;else{if(!(16&wr)){if((64&wr)==0){$r=Vi[(65535&$r)+(Di&(1<<wr)-1)];continue}if(32&wr){wi.mode=wc;break t}Tr.msg="invalid literal/length code",wi.mode=Uu;break t}for(Zi=65535&$r,(wr&=15)&&(Ei<wr&&(Di+=fr[Xr++]<<Ei,Ei+=8),Zi+=Di&(1<<wr)-1,Di>>>=wr,Ei-=wr),Ei<15&&(Di+=fr[Xr++]<<Ei,Ei+=8,Di+=fr[Xr++]<<Ei,Ei+=8),$r=fo[Di&Lo];;){if(wr=$r>>>24,Di>>>=wr,Ei-=wr,!(16&(wr=$r>>>16&255))){if((64&wr)==0){$r=fo[(65535&$r)+(Di&(1<<wr)-1)];continue}Tr.msg="invalid distance code",wi.mode=Uu;break t}if(_o=65535&$r,wr&=15,Ei<wr&&(Di+=fr[Xr++]<<Ei,(Ei+=8)<wr)&&(Di+=fr[Xr++]<<Ei,Ei+=8),qi<(_o+=Di&(1<<wr)-1)){Tr.msg="invalid distance too far back",wi.mode=Uu;break t}if(Di>>>=wr,Ei-=wr,_o>(wr=xr-Ts)){if((wr=_o-wr)>Wo&&wi.sane){Tr.msg="invalid distance too far back",wi.mode=Uu;break t}if(bi=0,Cs=ws,Si===0){if(bi+=uo-wr,wr<Zi){for(Zi-=wr;hr[xr++]=ws[bi++],--wr;);bi=xr-_o,Cs=hr}}else if(Si<wr){if(bi+=uo+Si-wr,(wr-=Si)<Zi){for(Zi-=wr;hr[xr++]=ws[bi++],--wr;);if(bi=0,Si<Zi){for(wr=Si,Zi-=wr;hr[xr++]=ws[bi++],--wr;);bi=xr-_o,Cs=hr}}}else if(bi+=Si-wr,wr<Zi){for(Zi-=wr;hr[xr++]=ws[bi++],--wr;);bi=xr-_o,Cs=hr}for(;2<Zi;)hr[xr++]=Cs[bi++],hr[xr++]=Cs[bi++],hr[xr++]=Cs[bi++],Zi-=3;Zi&&(hr[xr++]=Cs[bi++],1<Zi)&&(hr[xr++]=Cs[bi++])}else{for(bi=xr-_o;hr[xr++]=hr[bi++],hr[xr++]=hr[bi++],hr[xr++]=hr[bi++],2<(Zi-=3););Zi&&(hr[xr++]=hr[bi++],1<Zi)&&(hr[xr++]=hr[bi++])}break}}break}while(Xr<ji&&xr<ho);Zi=Ei>>3,Xr-=Zi,Ei-=Zi<<3,Di&=(1<<Ei)-1,Tr.next_in=Xr,Tr.next_out=xr,Tr.avail_in=Xr<ji?ji-Xr+5:5-(Xr-ji),Tr.avail_out=xr<ho?ho-xr+257:257-(xr-ho),wi.hold=Di,wi.bits=Ei}lt=m.next_out,H=m.output,Tt=m.avail_out,de=m.next_in,W=m.input,at=m.avail_in,ct=S.hold,we=S.bits,S.mode===Qs&&(S.back=-1);break}for(S.back=0;dn=S.lencode[ct&(1<<S.lenbits)-1],xn=dn>>>24,An=dn>>>16&255,Hn=65535&dn,!(xn<=we);){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(An&&(240&An)==0){for(dr=xn,Zr=An,yr=Hn;dn=S.lencode[yr+((ct&(1<<dr+Zr)-1)>>dr)],xn=dn>>>24,An=dn>>>16&255,Hn=65535&dn,!(dr+xn<=we);){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}ct>>>=dr,we-=dr,S.back+=dr}if(ct>>>=xn,we-=xn,S.back+=xn,S.length=Hn,An===0){S.mode=16205;break}if(32&An){S.back=-1,S.mode=Qs;break}if(64&An){m.msg="invalid literal/length code",S.mode=fi;break}S.extra=15&An,S.mode=16201;case 16201:if(S.extra){for(to=S.extra;we<to;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.length+=ct&(1<<S.extra)-1,ct>>>=S.extra,we-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=16202;case 16202:for(;dn=S.distcode[ct&(1<<S.distbits)-1],xn=dn>>>24,An=dn>>>16&255,Hn=65535&dn,!(xn<=we);){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if((240&An)==0){for(dr=xn,Zr=An,yr=Hn;dn=S.distcode[yr+((ct&(1<<dr+Zr)-1)>>dr)],xn=dn>>>24,An=dn>>>16&255,Hn=65535&dn,!(dr+xn<=we);){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}ct>>>=dr,we-=dr,S.back+=dr}if(ct>>>=xn,we-=xn,S.back+=xn,64&An){m.msg="invalid distance code",S.mode=fi;break}S.offset=Hn,S.extra=15&An,S.mode=16203;case 16203:if(S.extra){for(to=S.extra;we<to;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}S.offset+=ct&(1<<S.extra)-1,ct>>>=S.extra,we-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){m.msg="invalid distance too far back",S.mode=fi;break}S.mode=16204;case 16204:if(Tt===0)break e;if(rn=En-Tt,S.offset>rn){if((rn=S.offset-rn)>S.whave&&S.sane){m.msg="invalid distance too far back",S.mode=fi;break}In=rn>S.wnext?(rn-=S.wnext,S.wsize-rn):S.wnext-rn,rn>S.length&&(rn=S.length),fn=S.window}else fn=H,In=lt-S.offset,rn=S.length;for(rn>Tt&&(rn=Tt),Tt-=rn,S.length-=rn;H[lt++]=fn[In++],--rn;);S.length===0&&(S.mode=Rc);break;case 16205:if(Tt===0)break e;H[lt++]=S.length,Tt--,S.mode=Rc;break;case 16206:if(S.wrap){for(;we<32;){if(at===0)break e;at--,ct|=W[de++]<<we,we+=8}if(En-=Tt,m.total_out+=En,S.total+=En,4&S.wrap&&En&&(m.adler=S.check=(S.flags?Nn:Nr)(S.check,H,En,lt-En)),En=Tt,4&S.wrap&&(S.flags?ct:Ws(ct))!==S.check){m.msg="incorrect data check",S.mode=fi;break}ct=0,we=0}S.mode=16207;case 16207:if(S.wrap&&S.flags){for(;we<32;){if(at===0)break e;at--,ct+=W[de++]<<we,we+=8}if(4&S.wrap&&ct!==(4294967295&S.total)){m.msg="incorrect length check",S.mode=fi;break}ct=0,we=0}S.mode=16208;case 16208:si=bh;break e;case fi:si=Cc;break e;case 16210:return yd;default:return Gs}return m.next_out=lt,m.avail_out=Tt,m.next_in=de,m.avail_in=at,S.hold=ct,S.bits=we,(S.wsize||En!==m.avail_out&&S.mode<fi&&(S.mode<16206||N!==Pl))&&xc(m,m.output,m.next_out,En-m.avail_out),Jt-=m.avail_in,En-=m.avail_out,m.total_in+=Jt,m.total_out+=En,S.total+=En,4&S.wrap&&En&&(m.adler=S.check=(S.flags?Nn:Nr)(S.check,H,En,m.next_out-En)),m.data_type=S.bits+(S.last?64:0)+(S.mode===Qs?128:0)+(S.mode===qu||S.mode===16194?256:0),si=(Jt==0&&En===0||N===Pl)&&si===_a?_h:si},inflateEnd:m=>{var N;return Sa(m)?Gs:((N=m.state).window&&(N.window=null),m.state=null,_a)},inflateGetHeader:(m,N)=>Sa(m)||(2&(m=m.state).wrap)==0?Gs:((m.head=N).done=!1,_a),inflateSetDictionary:(m,N)=>{var S,W=N.length;return Sa(m)||(S=m.state).wrap!==0&&S.mode!==ju?Gs:S.mode===ju&&Nr(1,N,W,0)!==S.check?Cc:xc(m,N,W,W)?(S.mode=16210,yd):(S.havedict=1,_a)},inflateInfo:"pako inflate (from Nodeca project)"},Hu=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let Fu=Object.prototype.toString,{Z_NO_FLUSH:wd,Z_FINISH:Ol,Z_OK:rc,Z_STREAM_END:Gu,Z_NEED_DICT:Qu,Z_STREAM_ERROR:Cd,Z_DATA_ERROR:Rd,Z_MEM_ERROR:Eh}=vo;function Ic(S){this.options=je({chunkSize:65536,windowBits:15,to:""},S||{});var N=this.options,S=(N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,N.windowBits===0)&&(N.windowBits=-15),!(0<=N.windowBits&&N.windowBits<16)||S&&S.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&(15&N.windowBits)==0&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $t,this.strm.avail_out=0,Js.inflateInit2(this.strm,N.windowBits));if(S!==rc)throw new Error(_r[S]);if(this.header=new Hu,Js.inflateGetHeader(this.strm,this.header),N.dictionary&&(typeof N.dictionary=="string"?N.dictionary=Rt(N.dictionary):Fu.call(N.dictionary)==="[object ArrayBuffer]"&&(N.dictionary=new Uint8Array(N.dictionary)),N.raw)&&(S=Js.inflateSetDictionary(this.strm,N.dictionary))!==rc)throw new Error(_r[S])}function Ft(m,N){if(N=new Ic(N),N.push(m),N.err)throw N.msg||_r[N.err];return N.result}Ic.prototype.push=function(m,N){var S,W,H,de=this.strm,lt=this.options.chunkSize,at=this.options.dictionary;let Tt,ct,we;if(this.ended)return!1;for(ct=N===~~N?N:N===!0?Ol:wd,Fu.call(m)==="[object ArrayBuffer]"?de.input=new Uint8Array(m):de.input=m,de.next_in=0,de.avail_in=de.input.length;;){for(de.avail_out===0&&(de.output=new Uint8Array(lt),de.next_out=0,de.avail_out=lt),(Tt=Js.inflate(de,ct))===Qu&&at&&((Tt=Js.inflateSetDictionary(de,at))===rc?Tt=Js.inflate(de,ct):Tt===Rd&&(Tt=Qu));0<de.avail_in&&Tt===Gu&&0<de.state.wrap&&m[de.next_in]!==0;)Js.inflateReset(de),Tt=Js.inflate(de,ct);switch(Tt){case Cd:case Rd:case Qu:case Eh:return this.onEnd(Tt),!(this.ended=!0)}if(we=de.avail_out,!de.next_out||de.avail_out!==0&&Tt!==Gu||(this.options.to==="string"?(S=Vt(de.output,de.next_out),W=de.next_out-S,H=Pt(de.output,S),de.next_out=W,de.avail_out=lt-W,W&&de.output.set(de.output.subarray(S,S+W),0),this.onData(H)):this.onData(de.output.length===de.next_out?de.output:de.output.subarray(0,de.next_out))),Tt!==rc||we!==0){if(Tt===Gu)return Tt=Js.inflateEnd(this.strm),this.onEnd(Tt),this.ended=!0;if(de.avail_in===0)break}}return!0},Ic.prototype.onData=function(m){this.chunks.push(m)},Ic.prototype.onEnd=function(m){m===rc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Xe(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};var Lr=$o.deflate,ri=Ft,Ao=Lr,tu=ri,Po=(ic.prototype.add=function(m){this.isStarting&&(this.count+=m)},ic.prototype.stop=function(){return this.isStarting=!1,this.reset()},ic.prototype.start=function(m){var N=this;m===void 0&&(m=0),this.isStarting=!0,this.count=0,clearInterval(this.timer),m&&(this.timer=window.setInterval(function(){var S=N.count;N.speed=S/m,N.count=0},m))},ic.prototype.reset=function(){this.count=0,clearInterval(this.timer),this.timer=0,this.speed=0},ic);function ic(m){this.R=m=m===void 0?"":m,this.count=0,this.isStarting=!1,this.timer=0,this.lastLogTime=0,this.speed=0,this.lastTime=0}var nu=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},Ps=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}};function Ll(m,N,S){return nu(this,void 0,void 0,function(){var W,H,de;return Ps(this,function(lt){switch(lt.label){case 0:return W="",H=(at=>{at=at||32;for(var Tt="abcdefhijkmnprstwxyz0123456789",ct=Tt.length,we="",Jt=0;Jt<at;Jt++)we+=Tt.charAt(Math.floor(Math.random()*ct));return we})(16),[4,(function(at){var Tt;return nu(this,void 0,void 0,function(){var ct,we;return Ps(this,function(Jt){switch(Jt.label){case 0:return ct=new TextEncoder().encode(at),[4,(Tt=crypto.subtle)==null?void 0:Tt.digest("SHA-256",ct)];case 1:return ct=Jt.sent(),we=Array.from(new Uint8Array(ct)),[2,we.map(function(En){return En.toString(16).padStart(2,"0")}).join("")]}})})})("".concat(m).concat("DPIV9g5X2zvTD4Zj").concat(H).concat(S))];case 1:return(de=(de=lt.sent()).toLocaleLowerCase())&&(de={ver:N,hash:de,nonce:H,expire:S},de=JSON.stringify(de),W=btoa(de)),[2,W]}})})}function Ml(m){return nu(this,void 0,void 0,function(){var N,S;return Ps(this,function(W){switch(W.label){case 0:return N="",S=Math.floor((Date.now()+7776e6)/1e3),[4,Ll(m,2,S)];case 1:return S=W.sent(),[2,N=0<S.length?S:N]}})})}var Ta=function(){return(Ta=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},Wu=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},kc=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},Ul=function(m,N,S){if(arguments.length===2)for(var W,H=0,de=N.length;H<de;H++)!W&&H in N||((W=W||Array.prototype.slice.call(N,0,H))[H]=N[H]);return m.concat(W||Array.prototype.slice.call(N))},Ju=(Object.defineProperty(zn.prototype,"speed",{get:function(){return this.I.speed},enumerable:!1,configurable:!0}),Object.defineProperty(zn.prototype,"url",{get:function(){return this.N.url},set:function(m){this.N.url=m},enumerable:!1,configurable:!0}),Object.defineProperty(zn.prototype,"strategy",{get:function(){return this.D.strategy},enumerable:!1,configurable:!0}),zn.prototype.setStrategy=function(m){var N;m===0?(this.D.setStrategy(m),(N=this.Z)!=null&&N.destroy(),this.Z=null):this.D.strategy!=m&&((N=this.Z)!=null&&N.destroy(),this.D.setStrategy(m),this.Z=this.D.build())},zn.prototype.addRemoteWsLog=function(m){if(this.N.env!=ot.BROWSER)throw new Error("cannot use net strategy on  mini program");for(this.U.push(m);this.U.size()>this.U.logCacheMax;)this.U.removeALog();this.connected()&&this.Z&&this.Z.active()},zn.prototype.stopWebSocketServer=function(){this.clearHbTimer(),this.L=void 0,this.g&&(this.g.onclose=null,this.g.onerror=null,this.g.close(),this.g=null)},zn.prototype.P=function(){this.g&&this.N.useStrategy&&(this.Z=this.D.build())},zn.prototype.F=function(m){for(var N=[],S=1;S<arguments.length;S++)N[S-1]=arguments[S];var W=this.M=this.B,H="";switch(m){case"onconnecting":this.B==="never_opened"?this.B="first_connecting":this.B="reconnecting";break;case"onopen":this.B="connected",this.I.start(3e3),this.onSocketConnect();break;case"onclosed":this.B="closed";var de=N[0];de&&(H+=" close code=".concat(de.code)),this.I.stop(),this.onSocketClose();break;case"onerror":this.B="error",this.I.stop(),this.onSocketError()}m=fe.WEBSOCKET_STATE_CHANGE+" log ws state change: ".concat(W," -> ").concat(this.B),H&&(m+=H),this.B==="error"?this.C.warn(m):this.C.info(m)},zn.prototype.onSocketConnect=function(){},zn.prototype.onSocketClose=function(){},zn.prototype.onSocketError=function(){},zn.prototype.onHeartBeatTimeout=function(){},zn.prototype.openWebSocketLogServer=function(m,N,S,W){var H=this;N===void 0&&(N=!1),S===void 0&&(S=!1),m===""||!S&&this.url==m||((this.url&&this.url!==""||this.B==="never_opened")&&this.C.info(fe.OPEN_WS+" log url change to: ".concat(m," , ").concat(this.enabled)),(this.url=m)&&this.enabled&&(S=function(){H.H&&(clearTimeout(H.H),H.H=null),H.stopWebSocketServer(),H.g=tt(m,H.N.env,H.q),H.g instanceof WebSocket&&(H.g.binaryType="arraybuffer"),H.P(),H.F("onconnecting"),H.g.onopen=function(){var de;H.J=!1,H.L=void 0,H.N.useStrategy&&(de=H.Z)!=null&&de.active(),H.F("onopen")},H.g.onclose=function(){for(var de=[],lt=0;lt<arguments.length;lt++)de[lt]=arguments[lt];H.J=!1,H.F.apply(H,Ul(["onclosed"],de,!1))},H.g.onmessage=H.K.bind(H),H.g.onerror=function(){H.F("onerror")}},N?S():(N=this.B==="error"||this.M==="error",this.H||(this.H=setTimeout(S,W||(N?5e3:3e3))))))},zn.prototype.resetSocketTimer=function(){this.H&&(clearTimeout(this.H),this.H=null)},zn.prototype.closed=function(){return this.g==null||this.g.readyState==2||this.g.readyState==3},zn.prototype.connected=function(){return this.g!==null&&this.g.readyState==1},zn.prototype.connecting=function(){return this.g!==null&&this.g.readyState==0},Object.defineProperty(zn.prototype,"canSendWs",{get:function(){var m=this.L,m=!m||performance.now()-m<5e3;return!(!this.g||this.g.readyState!==1)&&m},enumerable:!1,configurable:!0}),zn.prototype.sendLogFrame=function(m){var N;return Wu(this,void 0,void 0,function(){var S;return kc(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,3]),[4,this.makeLogFrame(m)];case 1:return S=W.sent(),this.I.add(8*S.byteLength),this.connected()?((N=this.g)!=null&&N.send(S),[2,!0]):[2,!1];case 2:return W.sent(),[2,!0];case 3:return[2]}})})},zn.prototype.makeLogFrame=function(m){return Wu(this,void 0,void 0,function(){var N,S,W,H,de;return kc(this,function(lt){switch(lt.label){case 0:return H=Ao(m),S=this.N,N=S.appid,S=S.userid,W=this.seq++,H={detail_data:H},this.J?[3,2]:[4,Ml(N)];case 1:if(!(de=lt.sent()))throw new Error("litesign error");H=Ta(Ta({},H),{appid:N,product:2,id_name:S,timestamp:Math.floor(Date.now()/1e3),litesign:de}),lt.label=2;case 2:return de=V.rtcreport.DetailLogRequest.encode(H).finish(),this.J=!0,[2,this.G(W,7,de)]}})})},zn.prototype.G=function(m,N,S){var W=(S==null?void 0:S.length)||0,H=new Uint8Array(10+W);return H[0]=64,H[1]=N,H[2]=m>>24&255,H[3]=m>>16&255,H[4]=m>>8&255,H[5]=255&m,H[6]=W>>24&255,H[7]=W>>16&255,H[8]=W>>8&255,H[9]=255&W,S&&H.set(S,10),H},zn.prototype.K=function(N){var N=new Uint8Array(N.data),S=N[0];this.L=performance.now(),this.startHbTimer(),S===64&&N[1]===8&&(N[2],N[3],N[4],N[5],S=N[6]<<24|N[7]<<16|N[8]<<8|N[9],N=new Uint8Array(N.slice(10,10+S)),V.rtcreport.DetailLogResponse.decode(N).code===101)&&(this.J=!1)},zn.prototype.clearLogCacheAndUpload=function(){var m=this;this.connected()&&this.U.clear().forEach(function(N){m.sendLogFrame(N)})},zn.prototype.clearHbTimer=function(){this.checkHbTimer&&(clearTimeout(this.checkHbTimer),this.checkHbTimer=void 0)},zn.prototype.startHbTimer=function(){var m=this;this.clearHbTimer(),this.L!==void 0&&15e3<performance.now()-this.L?this.onHeartBeatTimeout():this.checkHbTimer=setTimeout(function(){var N;m.g&&(N=m.G(m.seq++,5),m.I.add(8*N.byteLength),m.g.send(N),m.startHbTimer())},5e3)},zn.prototype.setUpBitrate=function(m){return m/=8,m=2e3<=m?5:200<=m?4:100<=m?3:10<=m?2:1<=m?1:0,this.setStrategy(m),m},zn.prototype.destroy=function(){this.g=null,this.I.stop()},zn);function zn(m,N,S,W){this.U=m,this.N=N,this.C=S,this.q=W,this.g=null,this.B="never_opened",this.M="never_opened",this.D=new Ys(this),this.Z=null,this.J=!1,this.H=null,this.enabled=!0,this.seq=1,this.L=void 0,this.checkHbTimer=void 0,this.I=new Po("detail log"),this.D.setCache(this.U)}wa.prototype.active=function(){var m=this;this.W.canSendWs&&this.U.size()!==0&&this.X.canSendLog()&&(this.X.getLog().forEach(function(N){m.W.sendLogFrame(N).then(function(S){!S&&m.W.enabled&&m.X.cacheLog(N)})}),this.X.onSendLog())},wa.prototype.destroy=function(){this.X.onCanSendActive=void 0,this.X.destroy()};var So=wa;function wa(m,N,S){this.W=m,this.U=N,this.X=S,this.X.onCanSendActive=this.active.bind(this)}function Ca(m){this.cache=m}ps=function(m,N){return(ps=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)};var ps,Ku;(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}ps(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(ki,Ku=Ca),ki.prototype.getLog=function(){return this.cache.clear()},ki.prototype.canSendLog=function(){return 0<this.cache.size()},ki.prototype.onSendLog=function(){},ki.prototype.cacheLog=function(m){this.cache.push(m)},ki.prototype.destroy=function(){};function ki(m){return Ku.call(this,m)||this}Yu=function(m,N){return(Yu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}Yu(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(Ra,Zu=Ca),Ra.prototype.canSendLog=function(){return!this.locked&&0<this.cache.size()},Ra.prototype.getLog=function(){for(var m=[],N=0,S=!1;!S;){var W=this.cache.getOneLogPacket(this.maxPacketLen);if(!W||W.length<=0)break;var H=N+(W.length||0);H+this.cache.getOnePackMaxPacketLen(this.maxPacketLen)>this.maxPacketLen&&(S=!0),m.push(W),N=H}return this.lastTime=Date.now(),m},Ra.prototype.onSendLog=function(){var m=this;this.locked=!0,this.timer=setTimeout(function(){m.locked=!1,m.onCanSendActive&&m.onCanSendActive()},this.maxDelay)},Ra.prototype.cacheLog=function(m){this.cache.cacheLogPacket(m)},Ra.prototype.destroy=function(){this.timer&&(clearTimeout(this.timer),this.timer=0)};var Yu,Zu,vo=Ra;function Ra(){var m=Zu!==null&&Zu.apply(this,arguments)||this;return m.name="NetworkFrequency",m.maxDelay=10,m.maxPacketLen=2e4,m.locked=!1,m.lastTime=0,m.timer=0,m}Xu=function(m,N){return(Xu=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}Xu(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(es,Bl=vo);var Xu,Bl,zl=es;function es(m){return m=Bl.call(this,m)||this,m.name="MaxBW",m.maxDelay=10,m.maxPacketLen=2e4,m}or=function(m,N){return(or=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}or(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})($u,No=vo);var or,No,Ac=$u;function $u(m){return m=No.call(this,m)||this,m.name="HighBig",m.maxDelay=100,m.maxPacketLen=2e4,m}oc=function(m,N){return(oc=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}oc(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(Ks,sc=vo);var oc,sc,el=Ks;function Ks(m){return m=sc.call(this,m)||this,m.name="HighSmall",m.maxDelay=100,m.maxPacketLen=1e4,m}ru=function(m,N){return(ru=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}ru(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(ms,Ai=vo);var ru,Ai,ac=ms;function ms(m){return m=Ai.call(this,m)||this,m.name="LowBig",m.maxDelay=500,m.maxPacketLen=5e3,m}Eo=function(m,N){return(Eo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}Eo(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(Ns,iu=vo);var Eo,iu,ts=Ns;function Ns(m){return m=iu.call(this,m)||this,m.name="LowSmall",m.maxDelay=1e3,m.maxPacketLen=1e3,m}Object.defineProperty(Do.prototype,"strategy",{get:function(){return this.X},enumerable:!1,configurable:!0}),Do.prototype.setCache=function(m){this.U=m},Do.prototype.setStrategy=function(m){isNaN(m)||(this.X=m)},Do.prototype.build=function(){if(!this.U)throw new Error("cannot build log sender");switch(this.X){case 1:return new So(this.W,this.U,new ts(this.U));case 2:return new So(this.W,this.U,new ac(this.U));case 3:return new So(this.W,this.U,new el(this.U));case 4:return new So(this.W,this.U,new Ac(this.U));default:return new So(this.W,this.U,new zl(this.U))}};var Ys=Do;function Do(m){this.W=m,this.X=5}ao.Y=function(){return!(!window||!window.localStorage)},ao.bin2hex=function(m){for(var N,S="",W=0,H=(m+="").length;W<H;W++)S+=(N=m.charCodeAt(W).toString(16)).length<2?"0"+N:N;return S},ao.getCanvasFingerprint=function(W){var N=document.createElement("canvas"),S=N.getContext("2d"),S=(S.textBaseline="top",S.font="14px 'Arial'",S.fillStyle="#f60",S.fillRect(125,1,62,20),S.fillStyle="#069",S.fillText(W,2,15),S.fillStyle="rgba(102, 204, 0, 0.7)",S.fillText(W,4,17),N.toDataURL().replace("data:image/png;base64,","")),W=atob(S);return this.bin2hex(W.slice(-16,-12))},ao.generateUUID=function(){var m,N,S=localStorage.getItem(this.V);return S||(m=new Date().getTime(),S="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(W){var H=(m+16*Math.random())%16|0;return m=Math.floor(m/16),(W=="x"?H:3&H|8).toString(36)}),N=this.getCanvasFingerprint("hello, zego")+S.slice(8),localStorage.setItem(this.V,N),S)},ao.id=function(){var m;return ao.Y()?((m=localStorage.getItem(this.V))||(m=ao.generateUUID(),localStorage.setItem(this.V,m)),m):""},ao.V="z_deviceID";var xa=ao;function ao(){}var Pc=function(){this.url="",this.env=ot.BROWSER,this.useStrategy=!0,this.token="",this.deviceid=xa.id(),this.ipStackMode=P.IPv4Prefer,this.networkState=Pe.online};Object.defineProperty(Zs.prototype,"buffer",{get:function(){return this.queue},set:function(m){this.queue=m},enumerable:!1,configurable:!0}),Zs.prototype.push=function(m){if(!m)throw new Error("item null!");this.cacheByteLength+=m.length,m&&this.queue.push(m),this.cacheByteLength+=m.length},Zs.prototype.pop=function(){var m=this.queue[0]||"";return this.cacheByteLength-=m.length,this.queue.shift()},Zs.prototype.front=function(){return this.queue[0]},Zs.prototype.getFrontList=function(m){return this.queue.slice(0,m=m===void 0?1:m)},Zs.prototype.removeFrontList=function(m){var N=this.getFrontList(m=m===void 0?1:m).reduce(function(S,W){return S+=W.length},0);return this.cacheByteLength-=N,this.queue.splice(0,m)},Zs.prototype.clear=function(){this.timer&&(console.warn("clear cache"+this.name),clearInterval(this.timer)),this.queue=[]},Lr=Zs;function Zs(m){this.name=m=m===void 0?"":m,this.queue=[],this.timer=0,this.cacheByteLength=0}qo=function(m,N){return(qo=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)};var qo,cc,Ia=function(){return(Ia=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},uc=function(m,N,S){for(var W,H=0,de=N.length;H<de;H++)!W&&H in N||((W=W||Array.prototype.slice.call(N,0,H))[H]=N[H]);return m.concat(W||Array.prototype.slice.call(N))},Ds=((function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}qo(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(zi,cc=Lr),zi.prototype.size=function(){return this.queue.length},zi.prototype.getOnePackMaxPacketLen=function(m){return m&&m<this.tt?m:this.tt},zi.prototype.getOneLogPacket=function(m){var N=[],S=0,W="";if(this.size()){var H=JSON.parse(this.queue[this.queue.length-1]).userid,de=this.N.userid||H;if(de){for(var lt=this.getOnePackMaxPacketLen(m);0<this.queue.length&&(!m||S===0||S<m);){var at=this.queue[0].length;if(S&&lt<S+at)return W=JSON.stringify(N);var Tt=JSON.parse(this.queue[0]),Tt=Ia(Ia({},Tt),{userid:Tt.userid||de,roomid:Tt.roomid||this.N.roomid});S+=at,N.push(Tt),this.pop()}return(W=JSON.stringify(N))===""?void 0:W}}},zi.prototype.cacheLogPacket=function(N){var N=JSON.parse(N);this.size()+N.length<this.logCacheMax&&(N=N.map(function(S){return JSON.stringify(S)}),this.queue=uc(uc([],N,!0),this.queue))},zi.prototype.clear=function(){for(var m=[];0<this.queue.length;){var N=this.getOneLogPacket();if(!N)break;m.push(N)}return m},zi.prototype.removeALog=function(){for(var m=this.queue,N=0;N<m.length;N++){var S=void 0;try{S=JSON.parse(m[N])}catch{}if(!S||S.level<2)return void(this.queue=uc(uc([],m.slice(0,N),!0),m.slice(N+1)))}this.pop()},zi);function zi(m,N){N===void 0&&(N=1/0);var S=cc.call(this,"ws cache")||this;return S.logCacheMax=N,S.tt=64e3,S.N=m,S}var ns=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},rs=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},gs=(yo.fetchWhitelist=function(m,N){return ns(this,void 0,void 0,function(){var S,W,H,de,lt,at,Tt,ct,we,Jt;return rs(this,function(En){switch(En.label){case 0:return lt=m.product,S=m.appID,Jt=m.userID,W=m.token,H=m.deviceID,Tt=m.bizType,de=(de=this.domains[this.activeIndex])||"detaillog-global.zego.im",de="https://".concat(de,"/zglog/whitelist"),lt={product:lt,biz_type:""+Tt,appid:""+S,uin:Jt,timestamp:""+Date.now(),deviceid:H},W?(lt.token=W,[3,3]):[3,1];case 1:return at=lt,[4,Ml(S)];case 2:at.litesign=En.sent(),En.label=3;case 3:return Tt=new URLSearchParams(lt),ct="".concat(de,"?").concat(Tt.toString()),N?[4,new Promise(function(rn,In){N.startHttpRequest({location:ct,method_no:1,serviceType:2},function(fn){fn.status_code===200?rn(fn.body):In("request fail. status="+fn.status_code)},function(fn){In("request fail. result: "+JSON.stringify(fn))})})]:[3,5];case 4:return[2,En.sent()];case 5:return En.trys.push([5,10,,14]),[4,fetch(ct,{method:"GET"})];case 6:return(we=En.sent()).ok?[4,we.json()]:[3,8];case 7:return[2,En.sent()];case 8:throw"get list fail. status="+we.status+"msg="+we.statusText;case 9:return[3,14];case 10:if(Jt=En.sent(),yo.activeIndex!==yo.domains.length-1)return[3,11];throw yo.activeIndex=0,"get list fail. error ".concat(Jt," ").concat(JSON.stringify(Jt));case 11:return yo.activeIndex++,[4,yo.fetchWhitelist(m,N)];case 12:return[2,En.sent()];case 13:return[3,14];case 14:return[2]}})})},yo.domains=[],yo.activeIndex=0,yo);function yo(){}var Xs=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},jl=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},ql=($s.prototype.nt=function(m){return"file_"+m},$s.prototype.saveLogs=function(m,N,S,W){return N=N.map(function(H){return{log:H,instanceId:S}}),this.it.addList(this.nt(m),N)},$s.prototype.queryList=function(m,N,S){return N=[{field:"instanceId",value:N}],this.it.queryByCursor(this.nt(m),{maxCount:S,conditions:N})},$s.prototype.storedBytesSize=function(m){var N=this;return new Promise(function(S,W){return Xs(N,void 0,void 0,function(){var H,de;return jl(this,function(lt){return H=this.it.openCursor(this.nt(m)),de=0,H.onsuccess=function(ct){var Tt,ct=(ct=ct.target)==null?void 0:ct.result;ct?(Tt=ct.value,de+=Tt.log.length,ct.continue()):S(de)},H.onerror=function(at){W(at)},[2]})})})},$s.prototype.lines=function(m,N){return this.it.lines(this.nt(m),isNaN(N)?void 0:[{field:"instanceId",value:N}])},$s.prototype.deleteAll=function(m,N){return this.it.deleteAll(this.nt(m),N)},$s);function $s(m){this.it=m}var tl=function(){return(tl=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},bo=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},er=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},Ir=(Oo.prototype.save=function(m,N){return this.it.save(this.et,m,N)},Oo.prototype.queryList=function(m,N){return this.it.getAll(this.et,m,N)},Oo.prototype.delete=function(m,N){return this.it.deleteItems(this.et,m,N)},Oo.prototype.lines=function(){return this.it.lines(this.et)},Oo.prototype.deleteByCount=function(m){return this.it.deleteByCount(this.et,m)},Oo.prototype.deleteAll=function(){return this.it.deleteAll(this.et)},Oo.prototype.getItem=function(m,N){return this.it.queryById(this.et,m,N)},Oo.prototype.update=function(m,N){return bo(this,void 0,void 0,function(){var S;return er(this,function(W){switch(W.label){case 0:return[4,this.getItem(m.id,N)];case 1:return(S=W.sent())?(S=tl(tl({},S),m),[2,this.it.update(this.et,S,N)]):[2]}})})},Oo);function Oo(m){this.it=m,this.et="log_instance"}lc.prototype.save=function(m,N){return this.it.save(this.et,m,N)},lc.prototype.update=function(m,N){return this.it.update(this.et,m,N)},lc.prototype.delete=function(m,N){return this.it.deleteItems(this.et,[m],N)},lc.prototype.queryList=function(m){return this.it.queryByCursor(this.et,{transaction:m})};var yi=lc;function lc(m){this.it=m,this.et="file_usage"}var ro=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},ea=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},nl=(pi.prototype.openDB=function(m,N){return ro(this,void 0,void 0,function(){var S,W=this;return ea(this,function(H){switch(H.label){case 0:return S=window.indexedDB.open(N.database+"_"+m,N.version),[4,new Promise(function(de){S.onupgradeneeded=function(lt){var at=lt.target.result;N.tableList.forEach(function(Tt){var ct;at.objectStoreNames.contains(Tt.tableName)||(ct=at.createObjectStore(Tt.tableName,{keyPath:"id",autoIncrement:!0}),Tt.tableItems.forEach(function(we){we.index&&ct.createIndex(we.itemName,we.itemName,{unique:we.unique})}))})},S.onsuccess=function(lt){var at=(lt=lt.target)==null?void 0:lt.result;(W.rt=at).onclose=function(){W.onDBClose&&W.onDBClose(),W.rt=void 0,S.onsuccess=null,S.onupgradeneeded=null,at.onclose=null},de(S)}})];case 1:return H.sent(),[2]}})})},pi.prototype.closeDB=function(){var m;return ro(this,void 0,void 0,function(){return ea(this,function(N){return this.rt&&((m=this.rt)!=null&&m.close(),this.rt=void 0),[2]})})},pi.prototype.st=function(){if(!this.rt)throw new Error("indexDB not open")},pi.prototype.getTransaction=function(m,N){return N===void 0&&(N=!1),this.st(),this.rt.transaction(m,N?"readwrite":void 0)},pi.prototype.save=function(m,N,S){var W=this;return new Promise(function(H){var de=(S=S||W.getTransaction([m],!0)).objectStore(m).add(N);de.onsuccess=function(){return H(de.result)}})},pi.prototype.addList=function(m,N,S){return ro(this,void 0,void 0,function(){var W,H;return ea(this,function(de){switch(de.label){case 0:return S=S||this.getTransaction([m],!0),W=S.objectStore(m),H=[],N.forEach(function(lt){var at=new Promise(function(Tt,ct){var we=W.add(lt);we.onsuccess=function(){return Tt()},we.onerror=function(Jt){return ct(we.error)}});H.push(at)}),[4,Promise.all(H)];case 1:return de.sent(),[2]}})})},pi.prototype.update=function(m,N,S){var W=this;return new Promise(function(H){(S=S||W.getTransaction([m],!0)).objectStore(m).put(N).onsuccess=function(){return H()}})},pi.prototype.queryById=function(m,N,S){var W=this;return new Promise(function(H){var de=(S=S||W.getTransaction([m])).objectStore(m).get(N);de.onsuccess=function(){return H(de.result||null)}})},pi.prototype.queryByCursor=function(m,N){var S=this;return new Promise(function(W,H){var de=N.maxCount,lt=N.conditions,at=N.transaction,at=(at||S.getTransaction([m])).objectStore(m),Tt=[],ct=null,we=(ct=lt&&0<lt.length&&(we=lt[0],at.indexNames.contains(we.field))?at.index(we.field):ct)&&lt!=null&&lt.length?ct.openCursor(S.ot(lt[0])):at.openCursor();we.onsuccess=function(rn){var En,rn=rn.target.result;rn&&(!de||Tt.length<de)?(En=rn.value,lt!=null&&lt.length&&!S.ut(En,lt)||Tt.push(En),rn.continue()):W(Tt)},we.onerror=function(Jt){H(Jt.target.error)}})},pi.prototype.getAll=function(m,N,S){var W=this;return new Promise(function(H,de){var lt=(S=S||W.getTransaction([m])).objectStore(m).getAll(void 0,N);lt.onsuccess=function(){return H(lt.result)},lt.onerror=function(at){de(at)}})},pi.prototype.lines=function(m,N,S){var W=this;return new Promise(function(H,de){var lt,at=(S=S||W.getTransaction([m])).objectStore(m),Tt=0,ct=!(N==null||!N.length),we=void 0,Jt=null;N&&0<N.length?(we=N[0],(Jt=(ct=at.indexNames.contains(we.field)&&(Jt=at.index(we.field))&&N.length===1?!1:ct)?Jt&&we?Jt.openCursor(W.ot(we)):at.openCursor(void 0):Jt&&we?Jt.openKeyCursor(W.ot(we)):at.openKeyCursor(void 0)).onsuccess=function(In){var rn,In=In.target.result;In?(ct&&(rn=In.value,N!=null)&&N.length&&!W.ut(rn,N)||Tt++,In.continue()):H(Tt)},Jt.onerror=function(En){de(En.target.error)}):((lt=at.count()).onsuccess=function(){return H(lt.result)},lt.onerror=function(){return de(lt.error)})})},pi.prototype.openCursor=function(m,N){return(N=N||this.getTransaction([m])).objectStore(m).openCursor()},pi.prototype.deleteById=function(m,N,S){var W=this;return new Promise(function(H,de){var lt=(S=S||W.getTransaction([m],!0)).objectStore(m).delete(N);lt.onsuccess=function(){return H()},lt.onerror=function(){de()}})},pi.prototype.deleteByCount=function(m,N){var S=this;return new Promise(function(W,H){return ro(S,void 0,void 0,function(){var de,lt;return ea(this,function(at){switch(at.label){case 0:de=8192,at.label=1;case 1:return 0<N?[4,this.queryByCursor(m,{maxCount:Math.min(N,de)})]:[3,4];case 2:return(lt=at.sent()).length===0?[3,4]:(N-=lt.length,[4,this.deleteItems(m,lt)]);case 3:return at.sent(),[3,1];case 4:return W(),[2]}})})})},pi.prototype.deleteAll=function(m,N){var S=this;return new Promise(function(W,H){return ro(S,void 0,void 0,function(){var de;return ea(this,function(lt){return N=N||this.getTransaction([m],!0),de=N.objectStore(m),(de=de.clear()).onsuccess=function(){return W()},de.onerror=function(at){H()},[2]})})})},pi.prototype.deleteItems=function(m,N,S){var W=this;return new Promise(function(H){return ro(W,void 0,void 0,function(){var de;return ea(this,function(lt){switch(lt.label){case 0:return S=S||this.getTransaction([m],!0),de=S.objectStore(m),[4,Promise.all(N.map(function(at){return new Promise(function(Tt){de.delete(at.id).onsuccess=function(){return Tt()}})}))];case 1:return lt.sent(),H(),[2]}})})})},pi.prototype.ut=function(m,N){return N.every(function(de){var W=m[de.field],H=de.value,de=de.operator;switch(de===void 0?1:de){case 1:return W===H;case 2:return W!==H;case 3:return W<H;case 4:return H<W;case 5:return W<=H;case 6:return H<=W;default:return!1}})},pi.prototype.ot=function(S){var N=S.value,S=S.operator;switch(S===void 0?1:S){case 1:return IDBKeyRange.only(N);case 3:return IDBKeyRange.upperBound(N,!0);case 5:return IDBKeyRange.upperBound(N);case 4:return IDBKeyRange.lowerBound(N,!0);case 6:return IDBKeyRange.lowerBound(N);default:return}},pi);function pi(){}var ri=function(m,N,S){if(S||arguments.length===2)for(var W,H=0,de=N.length;H<de;H++)!W&&H in N||((W=W||Array.prototype.slice.call(N,0,H))[H]=N[H]);return m.concat(W||Array.prototype.slice.call(N))},rl={version:1,database:"zego_rtc_logger",tableList:ri(ri([{tableName:"log_instance",tableItems:[]}],new Array(20).fill(void 0).map(function(m,N){return{tableName:"file_"+(N+1),tableItems:[{itemName:"log",index:!1,unique:!1},{itemName:"instanceId",index:!0,unique:!1}]}}),!0),[{tableName:"file_usage",tableItems:[]}],!1)},ka=rl.tableList.map(function(m){return m.tableName});ou=function(m,N){return(ou=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(S,W){S.__proto__=W}:function(S,W){for(var H in W)Object.prototype.hasOwnProperty.call(W,H)&&(S[H]=W[H])}))(m,N)},(function(m,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function S(){this.constructor=m}ou(m,N),m.prototype=N===null?Object.create(N):(S.prototype=N.prototype,new S)})(Os,ta=Lr),Os.prototype.size=function(){return this.queue.length};var ou,ta,na=Os;function Os(m){m===void 0&&(m=1/0);var N=ta.call(this,"zzziplog storage_"+Date.now())||this;return N.logCacheMax=m,N}var To=function(){return(To=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},su=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},au=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},Aa=(ra.prototype.pushTask=function(m,N,S,W,H){m={task:m},N&&(m=To(To({},m),{args:N})),S&&(m=To(To({},m),{successCallback:S})),W&&(m=To(To({},m),{errorCallback:W})),H&&(m=To(To({},m),{completeCallback:H})),this.ct.push(m)},ra.prototype.ft=function(m,N){return su(this,void 0,void 0,function(){var S,W;return au(this,function(H){switch(H.label){case 0:S=null,H.label=1;case 1:return H.trys.push([1,4,5,6]),m&&m.args?S=m.task.apply(m,m.args):m&&(S=m.task()),S instanceof Promise?[4,S]:[3,3];case 2:S=H.sent(),H.label=3;case 3:return m.successCallback&&m.successCallback(S),[3,6];case 4:if(W=H.sent(),m.errorCallback)return m.errorCallback(W),[3,6];throw W;case 5:return N(),m.completeCallback&&m.completeCallback(),[7];case 6:return[2]}})})},ra.prototype.runATask=function(){return su(this,void 0,void 0,function(){var m,N=this;return au(this,function(S){switch(S.label){case 0:return this.ct.length<=0?[2]:(m=this.ct[0],m?[4,this.ft(m,function(){N.ct.shift()})]:[3,2]);case 1:S.sent(),S.label=2;case 2:return[2]}})})},ra.prototype.runAllTask=function(){return su(this,void 0,void 0,function(){return au(this,function(m){switch(m.label){case 0:return 0<this.ct.length?[4,this.runATask()]:[3,2];case 1:return m.sent(),[3,0];case 2:return[2]}})})},ra.prototype.size=function(){return this.ct.length},ra);function ra(){this.ct=[]}co.prototype.writeLine=function(m){m&&m!==""&&this.ht.push(m)},co.prototype.saveAs=function(m,N){var S=document.createElement("a");S.href=URL.createObjectURL(m),S.download=N,S.click()},co.prototype.createZip=function(){var m="";return 0<this.ht.length&&(m=this.ht.join(`
`),this.ht=[]),m=(N=>{for(var S,W=0,H=N.length,de="";W<H;)S=N.subarray(W,Math.min(W+32768,H)),de+=String.fromCharCode.apply(null,Array.from(S)),W+=32768;return btoa(de)})(Ao(m)),new Blob([m],{type:"text/plain;charset=utf-8"})};var Pa=co;function co(){this.ht=[]}var Na=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},Nc=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},Th=(il.prototype.setUploadUrl=function(m){this.lt=m,this.vt=0,this.dt=this.lt[this.vt]},il.prototype.sendRequest=function(m,N){return N===void 0&&(N=!1),Na(this,void 0,void 0,function(){var S,W;return Nc(this,function(H){switch(H.label){case 0:if(!this.dt)throw new Error("upload url is empty");H.label=1;case 1:return H.trys.push([1,3,,7]),[4,dc.post("https://".concat(this.dt,"/log/").concat(N?"userupload":"upload"),m,this.proxyCtrl)];case 2:if((S=H.sent()).code!==0)throw S;return this.C.info("zl.zlu.sr zip log ".concat(this.dt)),[3,7];case 3:if(((S=H.sent())==null?void 0:S.code)!==101&&this.lt.length&&this.vt!==this.lt.length-1)return[3,4];throw W=this.dt,this.vt=0,this.dt=this.lt[this.vt],new Error("upload logs ".concat(W," failed, error=").concat(JSON.stringify(S)));case 4:return this.vt<this.lt.length-1&&this.vt++,this.dt=this.lt[this.vt],[4,this.sendRequest(m,N)];case 5:H.sent(),H.label=6;case 6:return[3,7];case 7:return[2]}})})},il.prototype.upload=function(m,N,S){return Na(this,void 0,void 0,function(){var W,H,de,lt,at,Tt=this;return Nc(this,function(ct){switch(ct.label){case 0:return W=m.appId,H=m.userId,de=m.deviceId,lt=m.token,[4,Ml(W)];case 1:if(at=ct.sent(),!(!W||!H&&!de||!at&&!lt))return[2,new Promise(function(we,Jt){return Na(Tt,void 0,void 0,function(){var En,rn=this;return Nc(this,function(In){switch(In.label){case 0:return En=function(){return Na(rn,void 0,void 0,function(){var fn,dn,xn=this;return Nc(this,function(An){switch(An.label){case 0:this.wt=!0,(fn=new FormData).append("logs",N),fn.append("appid",W.toString()),H&&fn.append("uin",H==null?void 0:H.toString()),fn.append("timestamp",new Date().getTime().toString()),de&&fn.append("deviceid",de),at?fn.append("litesign",at):lt&&fn.append("token",lt),An.label=1;case 1:return An.trys.push([1,3,4,5]),[4,this.sendRequest(fn,S)];case 2:return An.sent(),[3,5];case 3:return dn=An.sent(),Jt(dn),[3,5];case 4:return setTimeout(function(){return Na(xn,void 0,void 0,function(){return Nc(this,function(Hn){switch(Hn.label){case 0:return this.wt=!1,[4,this.bt.runATask()];case 1:return Hn.sent(),[2]}})})},100),[7];case 5:return[2]}})})},this.wt?(this.bt.pushTask(En,[],function(){we()},function(fn){Jt(fn)}),[3,3]):[3,1];case 1:return[4,En()];case 2:In.sent(),we(),In.label=3;case 3:return[2]}})})})];throw new Error("cannot upload logs, please login room before you upload logs.")}})})},il);function il(m,N){this.C=m,this.proxyCtrl=N,this.yt="detaillog-global.zego.im",this.dt=this.yt,this.lt=[],this.vt=0,this.bt=new Aa,this.wt=!1}var wh=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},io=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},dc=(vr.post=function(m,N,S){var W=this;return new Promise(function(H,de){return wh(W,void 0,void 0,function(){var lt;return io(this,function(at){try{S?S.startHttpRequest({location:m,body:N,method_no:2,headers:[{name:"Content-Type",val:"multipart/form-data"}],serviceType:2},function(Tt){Tt.status_code===200?H(Tt.body):de("request fail. status="+Tt.status_code)},function(Tt){de("request fail. result: "+JSON.stringify(Tt))}):((lt=new XMLHttpRequest).open("POST",m,!0),lt.responseType="json",lt.send(N),lt.onreadystatechange=function(){lt.readyState===XMLHttpRequest.DONE&&(lt.status===200?H(lt.response):de("request fail. status="+lt.status))})}catch(Tt){de(Tt)}return[2]})})})},vr);function vr(){}var ia=function(){return(ia=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},Vl=(Da.prototype.build=function(m){for(var N=ia({},m),S=[],W=0,H=this._t;W<H.length;W++){var de=H[W];S.push(N[de])}for(var lt=0,at=this.gt;lt<at.length;lt++){var Tt=N[de=at[lt]];Tt!==this.Ot[de]&&(this.Ot[de]=Tt,S.push("".concat(de,": ").concat(Tt)))}return S.join(" @ ")},Da.prototype.buildFullMessageLog=function(m){return m=JSON.parse(m),m=ia(ia({},this.Ot),m),JSON.stringify(m)},Da);function Da(m){this.N=m,this.Ot={},this._t=["level","time","action","content","streamid"],this.gt=["appid","userid","roomid","sessionid"],this.St=0}var Oa=function(){return(Oa=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},oo=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},Ki=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}},wo=new TextEncoder;function Hl(m){return wo.encode(m).length}function lo(lt){var lt=new Date(lt),N=lt.getFullYear(),S=String(lt.getMonth()+1).padStart(2,"0"),W=String(lt.getDate()).padStart(2,"0"),H=String(lt.getHours()).padStart(2,"0"),de=String(lt.getMinutes()).padStart(2,"0"),lt=String(lt.getSeconds()).padStart(2,"0");return"".concat(N).concat(S).concat(W).concat(H).concat(de).concat(lt)}Pi.prototype.setFileConfig=function(m,N){typeof m=="number"&&(m=m<3?3:20<m?20:Math.round(m),this.fileConfig.count=m),typeof N=="number"&&0<=N&&(this.fileConfig.size=N)},Object.defineProperty(Pi.prototype,"dbOpened",{get:function(){return this.kt},enumerable:!1,configurable:!0}),Object.defineProperty(Pi.prototype,"Et",{get:function(){return this.N.appid},enumerable:!1,configurable:!0}),Pi.prototype.At=function(m){return oo(this,void 0,void 0,function(){var N,S,W=this;return Ki(this,function(H){switch(H.label){case 0:return N=[],[4,new Promise(function(de,lt){return oo(W,void 0,void 0,function(){var at,Tt,ct;return Ki(this,function(we){switch(we.label){case 0:return(at=this.it.getTransaction(ka,!0)).oncomplete=function(){de()},at.onerror=function(Jt){lt(at.error)},at.onabort=function(Jt){lt(at.error)},[4,this.jt.queryList(at)];case 1:return Tt=we.sent(),[4,this.Tt.queryList(void 0,at)];case 2:return ct=we.sent(),(S=Tt[0])&&(ct.forEach(function(Jt){Jt.lastLogTime<S.lastTime&&N.push(Jt)}),this.xt.deleteAll(S.fileId,at),this.Tt.delete(N,at)),[2]}})})})];case 1:return H.sent(),[2]}})})},Pi.prototype.checkUsingFile=function(){return oo(this,void 0,void 0,function(){var m,N,S,W,H=this;return Ki(this,function(de){switch(de.label){case 0:return m=[],S=!(N=[]),[4,new Promise(function(lt,at){return oo(H,void 0,void 0,function(){var Tt,ct,we,Jt,En,rn,In=this;return Ki(this,function(fn){switch(fn.label){case 0:return(Tt=this.it.getTransaction(ka,!0)).oncomplete=function(){lt()},Tt.onerror=function(dn){at(Tt.error)},Tt.onabort=function(dn){at(Tt.error)},[4,this.jt.queryList(Tt)];case 1:return ct=fn.sent(),[4,this.Tt.queryList(void 0,Tt)];case 2:if(we=fn.sent(),rn=ct[ct.length-1],0<(En=ct.length-this.fileConfig.count)&&(N=ct.splice(0,En)),rn&&rn.byteLength>=this.fileConfig.size?(S=!0,ct.length===this.fileConfig.count&&(En=ct.shift())&&N.push(En)):rn||(S=!0),N.length&&((Jt=N[N.length-1])&&we.forEach(function(dn){(!dn.active||3e5<Date.now()-dn.lastLogTime)&&dn.lastLogTime<Jt.lastTime&&m.push(dn)}),N.forEach(function(dn){In.xt.deleteAll(dn.fileId,Tt),In.jt.delete(dn,Tt)}),this.Tt.delete(m,Tt)),S){if(En=Date.now(),!(rn=new Array(20).fill(1).map(function(dn,xn){return xn+1}).find(function(dn){return!ct.find(function(xn){return xn.fileId===dn})})))throw"not found can use file";this.jt.save({fileId:rn,byteLength:0,startTime:En,lastTime:En},Tt)}return[2]}})})})];case 1:return de.sent(),[4,this.jt.queryList()];case 2:return W=de.sent(),[2,W[W.length-1]]}})})},Pi.prototype.uploadLegacyLog=function(m,N,S){return N===void 0&&(N=!0),S===void 0&&(S=5),oo(this,void 0,void 0,function(){var W,H,de=this;return Ki(this,function(lt){switch(lt.label){case 0:return this.Rt?[4,this.Tt.queryList()]:[2];case 1:return H=(H=lt.sent()).filter(function(at){return!(at.id===de.It||!at.userIds.length||at.active&&!(3e5<Date.now()-at.lastLogTime)||N&&at.userIds.includes(de.N.userid))}),W=H.reduce(function(at,Tt){var ct=Tt.userIds[Tt.userIds.length-1];return ct&&(at[ct]=at[ct]||[],at[ct].push(Tt)),at},{}),H=Object.keys(W),H=H.map(function(at){return oo(de,void 0,void 0,function(){var Tt,ct,we=this;return Ki(this,function(Jt){return Tt=W[at],ct=function(){return oo(we,void 0,void 0,function(){return Ki(this,function(En){switch(En.label){case 0:return[4,this.Nt(at,m,Tt)];case 1:return En.sent(),[2]}})})},[2,new Promise(function(En,rn){return oo(we,void 0,void 0,function(){var In;return Ki(this,function(fn){switch(fn.label){case 0:return this.dbOpened?[3,1]:(this.Dt.pushTask(ct,[],function(){En()},function(dn){rn(dn)}),[3,5]);case 1:return fn.trys.push([1,3,,4]),[4,ct()];case 2:return fn.sent(),[3,4];case 3:return In=fn.sent(),rn(In),[2];case 4:En(),fn.label=5;case 5:return[2]}})})}).catch(function(En){return{error:En,index:0}})]})})}),S--,[4,Promise.all(H)];case 2:return H=lt.sent(),H.find(function(at){return at==null?void 0:at.error})&&S?[4,this.uploadLegacyLog(m,N,S)]:[3,4];case 3:lt.sent(),lt.label=4;case 4:return[2]}})})},Pi.prototype.openDB=function(){return oo(this,void 0,void 0,function(){var m;return Ki(this,function(N){switch(N.label){case 0:return m=!1,this.Zt||(this.Zt=this.it.openDB(this.Et,rl),m=!0),[4,this.Zt];case 1:return N.sent(),[4,this.Ut()];case 2:return N.sent(),this.Zt=void 0,this.kt=!0,m?[4,this.Dt.runAllTask()]:[3,5];case 3:return N.sent(),[4,this.Lt.runATask()];case 4:N.sent(),this.Pt(),N.label=5;case 5:return[2]}})})},Pi.prototype.Ut=function(m){return oo(this,void 0,void 0,function(){var N,S,W,H;return Ki(this,function(de){switch(de.label){case 0:return N=this.It,S=!1,N!==void 0?[3,1]:(S=!0,[3,3]);case 1:return[4,this.Tt.getItem(N,m)];case 2:(W=de.sent())?W.active||this.Tt.update({id:W.id,active:1},m):S=!0,de.label=3;case 3:return S?(W=Date.now(),H={appId:this.Et,userIds:this.Ft,active:1,lastLogTime:W,createdAt:W,logQuantity:0,byteLength:0},this.N.userid&&!this.Ft.includes(this.N.userid)&&this.Ft.push(this.N.userid),[4,this.Tt.save(H,m)]):[3,5];case 4:H=de.sent(),this.It=H,de.label=5;case 5:return[2]}})})},Pi.prototype.zt=function(){return this.Rt&&Pi.isEnvSupport()&&!this.kt&&!this.Zt},Pi.prototype.enable=function(){this.Rt||(this.Rt=!0,this.zt()&&this.openDB())},Pi.prototype.saveLog=function(m){for(this.zt()&&this.openDB(),m=JSON.parse(m),this.Ft&&m.userid&&!this.Ft.includes(m.userid)&&(this.Ft.push(m.userid),this.dbOpened)&&this.Tt.update({id:this.It,userIds:this.Ft}),this.U.push(this.Mt.build(m));this.U.size()>this.U.logCacheMax;)this.U.pop();this.Bt||this.Pt()},Pi.prototype.Pt=function(m){return m===void 0&&(m=!1),oo(this,void 0,void 0,function(){var N,S=this;return Ki(this,function(W){switch(W.label){case 0:return this.Rt?this.dbOpened?(N=!1,this.Bt||(N=!0,this.Bt=new Promise(function(H,de){function lt(){oo(S,void 0,void 0,function(){var at,Tt,ct,we,Jt,En,rn,In,fn,dn,xn=this;return Ki(this,function(An){switch(An.label){case 0:if(!(at=this.It))return H(),[2];if(!this.dbOpened||!this.fileConfig.size)return H(),[2];if((Tt=this.U.getFrontList(100)).length<100&&(Jt=Date.now(),Jt=this.Ct&&1e4<=Jt-this.Ct,dn=Tt.length!==0,!dn||!m&&!Jt))return dn?this.Ht||(this.Ht=window.setTimeout(function(){xn.Pt()},1e4)):(this.Ht&&window.clearTimeout(this.Ht),this.Ht=void 0),H(),[2];ct=function(Hn){var dr="QuotaExceededError";(Hn==null?void 0:Hn.name)===dr||Hn+""==dr?xn.At().finally(function(){setTimeout(function(){lt()},5e3)}):de(Hn)},An.label=1;case 1:return An.trys.push([1,3,,4]),[4,this.checkUsingFile()];case 2:return we=An.sent(),[3,4];case 3:return Jt=An.sent(),ct(Jt),[2];case 4:return En=we.fileId,rn=Tt.reduce(function(Hn,dr){return Hn+=Hl(dr)},0),(In=this.it.getTransaction(ka,!0)).oncomplete=function(){xn.U.removeFrontList(Tt.length),lt()},In.onerror=function(Hn){ct(In.error)},In.onabort=function(Hn){ct(In.error)},fn=Date.now(),this.It?[4,this.Tt.getItem(this.It,In)]:[3,6];case 5:(dn=An.sent())?(this.Ct=fn,Tt.length,this.Tt.update({id:this.It,byteLength:dn.byteLength+rn,logQuantity:dn.logQuantity+Tt.length,lastLogTime:fn},In)):this.Ut(In),An.label=6;case 6:return this.xt.saveLogs(En,Tt,at,In),we.byteLength+=rn,we.lastTime=fn,this.jt.update(we,In),[2]}})})}lt()}),this.Bt.finally(function(){S.Bt=void 0})),[4,this.Bt]):[2]:[2];case 1:return W.sent(),!m||N?[3,3]:[4,this.Pt(m)];case 2:W.sent(),W.label=3;case 3:return[2]}})})},Pi.isEnvSupport=function(){return!!(window&&"indexedDB"in window)},Pi.prototype.qt=function(m,N,S){return oo(this,void 0,void 0,function(){var W,H,de,lt,at,Tt,ct,we,Jt,En,rn=this;return Ki(this,function(In){switch(In.label){case 0:return S?[3,2]:[4,this.Tt.queryList()];case 1:W=In.sent(),S=W.filter(function(fn){return fn.userIds.includes(m)}),In.label=2;case 2:H=new Pa,de=0,lt=[],at=this.fileConfig.size,Tt=function(){return oo(rn,void 0,void 0,function(){var fn,dn,xn,An,Hn,dr,Zr,yr,rr;return Ki(this,function(si){switch(si.label){case 0:fn=H.createZip(),dn={appId:this.Et,deviceId:this.N.deviceid},m===this.N.userid&&(dn.token=this.N.token),dn.userId=m,Hn=lt.reduce(function(ii,ei){return ei.startTime<xn&&(ii.startTime=ei.startTime),An<ei.endTime&&(ii.endTime=ei.endTime),ii},{startTime:0,endTime:0}),xn=Hn.startTime,An=Hn.endTime,si.label=1;case 1:return si.trys.push([1,3,,4]),[4,this.Jt.upload(dn,fn,N)];case 2:return si.sent(),[3,4];case 3:throw Hn=si.sent(),this.onUploadLog(fn.size,"".concat(m,"_").concat(lo(xn),"_").concat(lo(An)),{code:-1,message:""+Hn+JSON.stringify(Hn)}),Hn;case 4:H=new Pa,de=0,dr=this.it.getTransaction(ka,!0),Zr=0,si.label=5;case 5:return Zr<lt.length?(yr=lt[Zr],[4,this.Tt.getItem(yr.id,dr)]):[3,8];case 6:(rr=si.sent())&&((rr=rr.byteLength-yr.uploadByteLength)<0&&(rr=0),this.Tt.update({id:yr.id,lastUploadInfo:{logId:yr.logId,usageId:yr.usageId},byteLength:rr},dr)),si.label=7;case 7:return Zr++,[3,5];case 8:return this.onUploadLog(fn.size,"".concat(m,"_").concat(lo(xn),"_").concat(lo(An))),lt=[],[2]}})})},ct=function(fn){return H.writeLine(fn),fn=Hl(fn),at<(de+=fn)?{byteLength:fn,hasLeft:!1}:{byteLength:fn,hasLeft:!0}},we=function(fn){var dn,xn,An,Hn,dr,Zr,yr,rr,si,ii,ei,to;return Ki(this,function(ji){switch(ji.label){case 0:return dn=S[fn],[4,Jt.Tt.getItem(dn.id)];case 1:return xn=ji.sent(),xn=(xn||dn).lastUploadInfo,An=Oa(Oa({id:dn.id,logId:0,usageId:0},xn||{}),{uploadByteLength:0,startTime:dn.createdAt,endTime:dn.lastLogTime}),lt.push(An),Hn=0,ct("#start# "+dn.id),ct(JSON.stringify(dn)),[4,Jt.jt.queryList()];case 2:dr=ji.sent(),Zr=0,ji.label=3;case 3:return Zr<dr.length?(yr=dr[Zr],yr=yr.fileId,!xn||yr>=xn.usageId?(An.usageId=yr,[4,Jt.xt.queryList(yr,dn.id)]):[3,11]):[3,12];case 4:rr=ji.sent(),si=function(Ts){return oo(rn,void 0,void 0,function(){var ho,qi;return Ki(this,function(uo){switch(uo.label){case 0:return qi=ct(Ts.log),ho=qi.hasLeft,qi=qi.byteLength,Hn++,An.logId=Ts.id,An.uploadByteLength+=qi,ho?[3,2]:(ct("#end# "+dn.id+" "+Hn),Hn=0,[4,Tt()]);case 1:uo.sent(),ct("#start# "+dn.id),uo.label=2;case 2:return[2]}})})},ii=0,ji.label=5;case 5:return ii<rr.length?(ei=rr[ii],yr!==(xn==null?void 0:xn.usageId)?[3,8]:ei.id>xn.logId?[4,si(ei)]:[3,7]):[3,11];case 6:ji.sent(),ji.label=7;case 7:return[3,10];case 8:return ei.log,[4,si(ei)];case 9:ji.sent(),ji.label=10;case 10:return ii++,[3,5];case 11:return Zr++,[3,3];case 12:return ct("#end# "+dn.id+" "+Hn),Hn=0,!(to=S[fn+1])||0<de&&de+to.byteLength>at?[4,Tt()]:[3,14];case 13:ji.sent(),ji.label=14;case 14:return[2]}})},Jt=this,En=0,In.label=3;case 3:return En<S.length?[5,we(En)]:[3,6];case 4:In.sent(),In.label=5;case 5:return En++,[3,3];case 6:return[2]}})})},Pi.prototype.Nt=function(m,N,S){return oo(this,void 0,void 0,function(){var W=this;return Ki(this,function(H){return[2,new Promise(function(de,lt){return oo(W,void 0,void 0,function(){var at,Tt=this;return Ki(this,function(ct){return at=function(){return oo(Tt,void 0,void 0,function(){return Ki(this,function(we){switch(we.label){case 0:return[4,this.qt(m,N,S)];case 1:return we.sent(),[2]}})})},this.Lt.pushTask(at,[],function(){de()},function(we){lt(we)},function(){0<Tt.Lt.size()&&Tt.Lt.runATask()}),this.dbOpened&&this.Lt.size()===1&&this.Lt.runATask(),[2]})})})]})})},Pi.prototype.Kt=function(m){return oo(this,void 0,void 0,function(){var N;return Ki(this,function(S){switch(S.label){case 0:return this.It?[4,this.Pt(!0)]:[2];case 1:S.sent(),this.Gt=!1,S.label=2;case 2:return S.trys.push([2,4,,5]),[4,this.Nt(this.N.userid,m)];case 3:return S.sent(),this.Gt=!0,[3,5];case 4:throw N=S.sent(),this.Gt=!1,N;case 5:return[2]}})})},Pi.prototype.setUploadUrl=function(m){this.Jt.setUploadUrl(m)},Pi.prototype.startUpload=function(m,N){return N===void 0&&(N=!1),oo(this,void 0,void 0,function(){var S;return Ki(this,function(W){switch(W.label){case 0:if(!this.Rt)throw new Error("zip logs upload is not enabled.");if(!N&&this.Wt!==0&&performance.now()-this.Wt<6e4&&this.Gt||this.Xt)throw new Error("Do not uplaod frequently.");W.label=1;case 1:return W.trys.push([1,6,,7]),this.Wt=performance.now(),this.Xt=!0,this.dbOpened?[3,3]:[4,this.openDB()];case 2:W.sent(),W.label=3;case 3:return[4,this.Kt(m)];case 4:return W.sent(),[4,this.uploadLegacyLog(m)];case 5:return W.sent(),this.Xt=!1,[3,7];case 6:throw S=W.sent(),this.Xt=!1,S;case 7:return[2]}})})},Pi.prototype.disable=function(){return oo(this,void 0,void 0,function(){var m;return Ki(this,function(N){switch(N.label){case 0:if(m=this.It,!this.Rt||isNaN(m)||!this.kt)return[3,6];N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.Tt.update({active:0,id:m})];case 2:return N.sent(),[3,4];case 3:return N.sent(),[3,4];case 4:return[4,this.Pt(!0)];case 5:return N.sent(),this.it.closeDB(),this.kt=!1,this.U.clear(),[2,!(this.Rt=!1)];case 6:return this.U.clear(),[2,this.Rt=!1]}})})},Pi.prototype.onUploadLog=function(m,N,S){},Pi.prototype.destroy=function(){this.It?this.disable():(this.Ht&&(window.clearTimeout(this.Ht),this.Ht=void 0),this.U.clear())};var Dc=Pi;function Pi(m,N,S){var W=this;this.N=m,this.C=N,this.proxyCtrl=S,this.fileConfig={count:3,size:5242880},this.it=new nl,this.xt=new ql(this.it),this.Tt=new Ir(this.it),this.jt=new yi(this.it),this.kt=!1,this.U=new na(8e3),this.Dt=new Aa,this.Lt=new Aa,this.Rt=!1,this.Wt=0,this.Gt=!1,this.Xt=!1,this.Ft=[],this.Zt=void 0,this.Jt=new Th(N,S),this.Mt=new Vl(this.N),this.it.onDBClose=function(){W.kt=!1}}var Oc=function(){return(Oc=Object.assign||function(m){for(var N,S=1,W=arguments.length;S<W;S++)for(var H in N=arguments[S])Object.prototype.hasOwnProperty.call(N,H)&&(m[H]=N[H]);return m}).apply(this,arguments)},Ls=function(m,N,S,W){return new(S=S||Promise)(function(H,de){function lt(ct){try{Tt(W.next(ct))}catch(we){de(we)}}function at(ct){try{Tt(W.throw(ct))}catch(we){de(we)}}function Tt(ct){var we;ct.done?H(ct.value):((we=ct.value)instanceof S?we:new S(function(Jt){Jt(we)})).then(lt,at)}Tt((W=W.apply(m,[])).next())})},La=function(m,N){var S,W,H,de={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]},lt={next:at(0),throw:at(1),return:at(2)};return typeof Symbol=="function"&&(lt[Symbol.iterator]=function(){return this}),lt;function at(Tt){return function(ct){var we=[Tt,ct];if(S)throw new TypeError("Generator is already executing.");for(;de=lt&&we[lt=0]?0:de;)try{if(S=1,W&&(H=2&we[0]?W.return:we[0]?W.throw||((H=W.return)&&H.call(W),0):W.next)&&!(H=H.call(W,we[1])).done)return H;switch(W=0,(we=H?[2&we[0],H.value]:we)[0]){case 0:case 1:H=we;break;case 4:return de.label++,{value:we[1],done:!1};case 5:de.label++,W=we[1],we=[0];continue;case 7:we=de.ops.pop(),de.trys.pop();continue;default:if(!(H=0<(H=de.trys).length&&H[H.length-1])&&(we[0]===6||we[0]===2)){de=0;continue}if(we[0]===3&&(!H||we[1]>H[0]&&we[1]<H[3]))de.label=we[1];else if(we[0]===6&&de.label<H[1])de.label=H[1],H=we;else{if(!(H&&de.label<H[2])){H[2]&&de.ops.pop(),de.trys.pop();continue}de.label=H[2],de.ops.push(we)}}we=N.call(m,de)}catch(Jt){we=[6,Jt],W=0}finally{S=H=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}}};Object.defineProperty(Yn.prototype,"url",{get:function(){return this.N.url||""},set:function(m){this.N.url=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"logType",{get:function(){return this.N.logType||Re.DISABLE},set:function(m){this.N.logType=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"env",{get:function(){return this.N.env},set:function(m){this.N.env=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"appid",{get:function(){return this.N.appid},set:function(m){this.N.appid=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"roomid",{get:function(){return this.N.roomid},set:function(m){this.N.roomid=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"sessionid",{get:function(){return this.N.sessionid},set:function(m){this.N.sessionid=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"userid",{get:function(){return this.N.userid},set:function(m){this.N.userid=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"version",{get:function(){return this.N.version},set:function(m){this.N.version=m},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"wsSpeed",{get:function(){var m;return(m=(m=this.$t)==null?void 0:m.speed)!=null?m:0},enumerable:!1,configurable:!0}),Yn.prototype.setLogLevel=function(m){return m=ke[m],m!==void 0&&(this.logLevel=m,!0)},Yn.prototype.setRemoteLogLevel=function(m){return m=ke[m],m!==void 0&&(this.logRemoteLevel=m,!0)},Yn.prototype.setSessionInfo=function(m,N,S,W,H,de){this.appid=m,this.roomid=N,this.sessionid=S,this.userid=W,this.version=de},Yn.prototype.setTokenInfo=function(m,N){this.N.token=m||"",N&&(this.N.userid=N)},Yn.prototype.setZipLogConfig=function(m,N){var S;N===void 0&&(N=!1),m===1?(!this.Yt&&this.env==ot.BROWSER&&Dc.isEnvSupport()&&(this.Yt=new Dc(this.N,this.C,this.proxyCtrl)),(S=this.Yt)!=null&&S.enable()):m==0&&N&&this.Yt&&(this.Yt.destroy(),this.Yt=null)},Yn.prototype.setStorageConfig=function(m){this.Yt&&this.Yt.setFileConfig(m.count,m.size)},Yn.prototype.setZipLogDomains=function(m,N){m=this.getLogUrlsByIPStackMode(m,N),this.Yt&&this.Yt.setUploadUrl(m),gs.domains=m},Yn.prototype.makeZipLogSpaceUpload=function(){return Ls(this,void 0,void 0,function(){return La(this,function(m){switch(m.label){case 0:return this.Yt?[4,this.Yt.uploadLegacyLog(!1,!1)]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})})},Yn.prototype.uploadStorageLog=function(m){return m===void 0&&(m=!1),Ls(this,void 0,void 0,function(){return La(this,function(N){switch(N.label){case 0:return this.Yt?[4,this.Yt.startUpload(m)]:[3,2];case 1:return N.sent(),[3,3];case 2:throw new Error("cannot use zip log module");case 3:return[2]}})})},Yn.prototype.report=function(m){m=this.Qt(ke.REPORT,m),this.logLevel!==ke.DISABLE&&this.logLevel<=ke.REPORT&&!this.isDestroy&&console.debug(m),this.Vt(ke.REPORT,m,!0)},Yn.prototype.debug=function(m,W){var S={},W=(typeof(W=W===void 0?{}:W)=="string"?m=Array.from(arguments).join(""):S=W,this.tn(ke.DEBUG,m,S));this.logLevel!==ke.DISABLE&&this.logLevel<=ke.DEBUG&&!this.isDestroy&&console.debug(W),this.nn(ke.DEBUG,W)},Yn.prototype.info=function(m,W){var S={},W=(typeof(W=W===void 0?{}:W)=="string"?m=Array.from(arguments).join(""):S=W,this.tn(ke.INFO,m,S));this.logLevel!==ke.DISABLE&&this.logLevel<=ke.INFO&&!this.isDestroy&&console.info(W),this.nn(ke.INFO,W)},Yn.prototype.warn=function(m,W){var S={},W=(typeof(W=W===void 0?{}:W)=="string"?m=Array.from(arguments).join(""):S=W,this.tn(ke.WARN,m,S));this.logLevel!==ke.DISABLE&&this.logLevel<=ke.WARN&&!this.isDestroy&&console.warn(W),this.nn(ke.WARN,W)},Yn.prototype.remoteReport=function(){for(var m=[],N=0;N<arguments.length;N++)m[N]=arguments[N];var S=this.tn(ke.INFO,m.join(""));this.nn(ke.INFO,S)},Yn.prototype.error=function(m,W){var S={},W=(typeof(W=W===void 0?{}:W)=="string"?m=Array.from(arguments).join(""):S=W,this.tn(ke.ERROR,m,S));this.logLevel!==ke.DISABLE&&this.logLevel<=ke.ERROR&&!this.isDestroy&&(console.error(W),this.env%2===ot.BROWSER&&window?this.stateCenter.debug&&window.alert(m.substr(m.indexOf(" ")+1,4500)):(this.env,ot.WEIXINMINI)),this.nn(ke.ERROR,W)},Yn.prototype.nn=function(m,N){this.logRemoteLevel!==ke.DISABLE&&this.logRemoteLevel<=m&&(this.Vt(m,N),this.Yt)&&this.Yt.saveLog(N)},Yn.prototype.setSettingConfig=function(m){this.N.ipStackMode=m.ipStackMode},Yn.prototype.getLogUrlsByIPStackMode=function(m,N){var S=[];switch(this.N.ipStackMode){case P.IPv4Only:S.push.apply(S,m);break;case P.IPv4Prefer:S.push.apply(S,m),S.push.apply(S,N);break;case P.IPv6Prefer:S.push.apply(S,N),S.push.apply(S,m);break;default:S.push.apply(S,m)}return S},Yn.prototype.onConnected=function(m){},Yn.prototype.onUploadLog=function(m,N,S){},Yn.prototype.setLogServer=function(m,N){var S;if(this.isDestroy||this.logConnected)return!1;N=this.N.env===0?(this.N.connectURLs=this.getLogUrlsByIPStackMode(m,N),this.N.connectURLs[this.urlIndex]):(this.N.connectURLs=m,this.url!==this.N.connectURLs[0]&&(this.logConnected=!1),this.N.connectURLs[0]);try{return N.startsWith("wss:")?(this.logType=Re.WEBSOCKET,(S=this.$t)!=null&&S.openWebSocketLogServer(N,!0)):N.startsWith("https:")?(this.logType=Re.HTTPS,this.en(N)):this.logType=Re.DISABLE,!0}catch(W){return this.error(JSON.stringify(W)),!1}},Yn.prototype.rn=function(){this.logType==Re.WEBSOCKET?this.sn():this.logType==Re.HTTPS&&(this.on(),this.un()),this.logType=Re.DISABLE},Yn.prototype.sn=function(){var m;(m=this.$t)!=null&&m.stopWebSocketServer()},Yn.prototype.en=function(m){var N=this;(this.url=m)&&(this.un(),this.logUploadTimer||(this.logUploadTimer=setInterval(function(){N.on()},this.logUploadInterval)))},Yn.prototype.un=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},Yn.prototype.Vt=function(m,N,S){return S===void 0&&(S=!1),Ls(this,void 0,void 0,function(){return La(this,function(W){if(!this.isDestroy){if(this.logType==Re.WEBSOCKET)this.cn&&this.fn(m,N);else if(this.logType==Re.HTTPS)this.hn(m,N,S);else if(this.logLevel!==ke.DISABLE&&this.logLevel<=m){if(4e3<N.length)return[2];for(this.an.push(N);this.an.size()>this.ln;)this.an.removeALog()}}return[2]})})},Yn.prototype.clearCache=function(){var m;this.an.size()!==0&&(m=this.$t)!=null&&m.clearLogCacheAndUpload()},Yn.prototype.fn=function(m,N){var S;return Ls(this,void 0,void 0,function(){var W,H=this;return La(this,function(de){return typeof N=="string"&&4e3<N.length?((lt,at)=>{for(var Tt=[],ct=0;ct<lt.length;)Tt.push(lt.substring(ct,ct+at)),ct+=at;return Tt})((W=JSON.parse(N)).content,3e3).forEach(function(lt,at){3<at||(W.content="s".concat(at+1,": ").concat(lt),H.fn(m,JSON.stringify(W)))}):this.N.useStrategy&&this.env==ot.BROWSER&&(S=this.$t)!=null&&S.addRemoteWsLog(N),[2]})})},Yn.prototype.hn=function(m,N,S){this.an.push(N),(this.an.size()>=this.ln||S===!0)&&this.on()},Yn.prototype.tn=function(m,de,lt){lt===void 0&&(lt={});var W=re(),de=[de.substr(0,de.indexOf(" "))||de,de.substr(de.indexOf(" ")+1,8e3)||de],H=de[0],de=de[1],lt=Oc(Oc({},lt),{time:W,level:m,action:H,content:de,appid:this.appid,roomid:this.roomid||void 0,userid:this.userid,sessionid:this.sessionid||void 0});return JSON.stringify(lt)},Yn.prototype.Qt=function(m,N){var S=re(),W="",W=this.env%2===ot.BROWSER?"rtc":"ali";return N=Oc(Oc({},N),{time:S,level:m,console:W,appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+N.event_time+"_"+N.seq}),JSON.stringify(N)},Yn.prototype.on=function(){this.an.size()!=0&&(this.env%2===ot.BROWSER?this.vn():this.SendHttpsLogWeChatMini())},Yn.prototype.vn=function(){var m=this,N=this.an.buffer.join(`
`),S=this.an.buffer,W=new XMLHttpRequest;W.onreadystatechange=function(){if(W.readyState==4){if(W.status==200){if(m.logConnected=!0,W.responseText.length==0)return;try{var H=JSON.parse(W.responseText).interval;typeof H=="number"&&m.logUploadInterval!==H&&(m.timeInterval=H,m.en(m.url))}catch(de){m.an.buffer=S.concat(m.an.buffer),console.log("send result failed "+de)}}else m.an.buffer=S.concat(m.an.buffer);S=null}},W.open("POST",this.url,!0),this.env==0?W.send(N):this.env==1&&(W.setRequestHeader("content-type","application/json"),W.send(JSON.stringify({user_id:this.userid,log:N}))),this.an.buffer=[]},Yn.prototype.SendHttpsLogWeChatMini=function(){},Yn.prototype.retryConnectSocket=function(){var m,N;100<performance.now()-this.wsConnectFailTime&&(this.tryIndex++,m=this.N.networkState===Pe.offline,N=void this.C.info("zl.rcs.0 ".concat(JSON.stringify(this.N.connectURLs)," ").concat(this.tryIndex," ").concat(this.urlIndex)),N=this.tryIndex<this.urlTryMaxCount?this.url:(this.tryIndex=0,this.urlIndex++,this.N.connectURLs[this.urlIndex%this.N.connectURLs.length]),m?(m=this.$t)!=null&&m.openWebSocketLogServer(N,!1,!0,this.dn):(m=this.$t)!=null&&m.openWebSocketLogServer(N,!1,!0,this.wn)),this.wsConnectFailTime=performance.now()},Yn.prototype.listener=function(){var m=this;this.env==ot.BROWSER&&(window.addEventListener("online",function(){m.N.networkState=Pe.online,m.reconnectLogServer()}),window.addEventListener("offline",function(){m.N.networkState=Pe.offline})),this.$t&&(this.$t.onSocketConnect=function(){m.logConnected=!0,m.N.networkState=Pe.online,m.onConnected({url:m.url})},this.$t.onSocketClose=function(){m.retryConnectSocket()},this.$t.onSocketError=function(){m.retryConnectSocket()},this.$t.onHeartBeatTimeout=function(){m.reconnectLogServer()})},Yn.prototype.reconnectLogServer=function(){var m,N;this.logType===Re.WEBSOCKET&&(this.C.info("zl.rcs.1 call"),this.tryIndex=0,this.urlIndex=0,N=this.N.connectURLs[this.urlIndex],this.url="",(m=this.$t)!=null&&m.resetSocketTimer(),(m=this.$t)!=null)&&m.openWebSocketLogServer(N,!1,!0,this.wn)},Yn.prototype.enableWebSocketLog=function(m){this.$t&&m!==this.$t.enabled&&(m?(this.$t.enabled=!0,this.$t.openWebSocketLogServer(this.url,!0,!0)):(this.$t.enabled=!1,this.sn(),this.an.clear()))},Yn.prototype.stopStorageLog=function(){return Ls(this,void 0,void 0,function(){return La(this,function(m){return this.Yt?[2,this.Yt.disable()]:[2,!1]})})},Yn.prototype.setUpBitrate=function(m){var N;return(N=this.$t)==null||!N.enabled||(N=this.$t)==null?void 0:N.setUpBitrate(m)},Yn.prototype.setUploadStrategy=function(m){var N;(N=this.$t)!=null&&N.enabled&&this.$t.setStrategy(m)},Yn.prototype.getWhiteList=function(m,N){return gs.fetchWhitelist({appID:this.appid,product:m=m===void 0?"rtc":m,userID:this.N.userid,token:this.N.token,deviceID:this.N.deviceid,bizType:N=N===void 0?0:N},this.proxyCtrl)},Object.defineProperty(Yn.prototype,"cn",{get:function(){var m;return!((m=this.$t)==null||!m.enabled)},enumerable:!1,configurable:!0}),Yn.prototype.destroy=function(){var m;this.rn(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),Z.instance=void 0,(m=this.$t)!=null&&m.destroy(),this.Yt&&this.Yt.destroy(),this.url="",this.isDestroy=!0,this.tryIndex=0,this.urlIndex=0},Yn.logVersion="1.4.15";var ol=Yn;function Yn(m,N){var S=this;this.proxyCtrl=N,this.logLevel=ke.INFO,this.logRemoteLevel=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.existUserID=!1,this.isDestroy=!1,this.ln=8192,this.wn=2e3,this.dn=5e3,this.C={debug:this.debug.bind(this),info:this.info.bind(this),warn:this.warn.bind(this),error:this.error.bind(this)},this.logConnected=!1,this.tryIndex=0,this.urlIndex=0,this.urlTryMaxCount=3,this.wsConnectFailTime=0,this.urlGroups={v4:[],v6:[]},this.inflate=tu,this.deflate=Ao,this.stateCenter=Z.getInstance(),this.N=new Pc,this.N.env=m,this.an=new Ds(this.N,this.ln),this.$t=new Ju(this.an,this.N,this.C,this.proxyCtrl),this.listener(),this.env==ot.BROWSER&&Dc.isEnvSupport()&&(this.Yt=new Dc(this.N,this.C,this.proxyCtrl),this.Yt.onUploadLog=function(W,H,de){S.onUploadLog(W,H,de)})}}],$={},D.m=O,D.c=$,D.d=function(_e,ye,Fe){D.o(_e,ye)||Object.defineProperty(_e,ye,{enumerable:!0,get:Fe})},D.r=function(_e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_e,"bn",{value:!0})},D.t=function(_e,ye){if(1&ye&&(_e=D(_e)),8&ye||4&ye&&typeof _e=="object"&&_e&&_e.bn)return _e;var Fe=Object.create(null);if(D.r(Fe),Object.defineProperty(Fe,"default",{enumerable:!0,value:_e}),2&ye&&typeof _e!="string")for(var ot in _e)D.d(Fe,ot,(function(Re){return _e[Re]}).bind(null,ot));return Fe},D.n=function(_e){var ye=_e&&_e.bn?function(){return _e.default}:function(){return _e};return D.d(ye,"a",ye),ye},D.o=function(_e,ye){return Object.prototype.hasOwnProperty.call(_e,ye)},D.p="",D(D.s=2);function D(_e){var ye;return($[_e]||(ye=$[_e]={i:_e,l:!1,exports:{}},O[_e].call(ye.exports,ye,ye.exports,D),ye.l=!0,ye)).exports}var O,$})})(ZegoExpressLogger$1)),ZegoExpressLogger$1.exports}function commonjsRequire(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var hasRequiredLocalforage;function requireLocalforage(){return hasRequiredLocalforage||(hasRequiredLocalforage=1,(function(g,f){(function(b){g.exports=b()})(function(){return(function b(C,D,O){function $(Fe,ot){if(!D[Fe]){if(!C[Fe]){var Re=typeof commonjsRequire=="function"&&commonjsRequire;if(!ot&&Re)return Re(Fe,!0);if(_e)return _e(Fe,!0);var Z=new Error("Cannot find module '"+Fe+"'");throw Z.code="MODULE_NOT_FOUND",Z}var I=D[Fe]={exports:{}};C[Fe][0].call(I.exports,function(P){var Pe=C[Fe][1][P];return $(Pe||P)},I,I.exports,b,C,D,O)}return D[Fe].exports}for(var _e=typeof commonjsRequire=="function"&&commonjsRequire,ye=0;ye<O.length;ye++)$(O[ye]);return $})({1:[function(b,C,D){(function(O){var $=O.MutationObserver||O.WebKitMutationObserver,_e;if($){var ye=0,Fe=new $(P),ot=O.document.createTextNode("");Fe.observe(ot,{characterData:!0}),_e=function(){ot.data=ye=++ye%2}}else if(!O.setImmediate&&typeof O.MessageChannel<"u"){var Re=new O.MessageChannel;Re.port1.onmessage=P,_e=function(){Re.port2.postMessage(0)}}else"document"in O&&"onreadystatechange"in O.document.createElement("script")?_e=function(){var ke=O.document.createElement("script");ke.onreadystatechange=function(){P(),ke.onreadystatechange=null,ke.parentNode.removeChild(ke),ke=null},O.document.documentElement.appendChild(ke)}:_e=function(){setTimeout(P,0)};var Z,I=[];function P(){Z=!0;for(var ke,ce,Ne=I.length;Ne;){for(ce=I,I=[],ke=-1;++ke<Ne;)ce[ke]();Ne=I.length}Z=!1}C.exports=Pe;function Pe(ke){I.push(ke)===1&&!Z&&_e()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(b,C,D){var O=b(1);function $(){}var _e={},ye=["REJECTED"],Fe=["FULFILLED"],ot=["PENDING"];C.exports=Re;function Re(ne){if(typeof ne!="function")throw new TypeError("resolver must be a function");this.state=ot,this.queue=[],this.outcome=void 0,ne!==$&&Pe(this,ne)}Re.prototype.catch=function(ne){return this.then(null,ne)},Re.prototype.then=function(ne,oe){if(typeof ne!="function"&&this.state===Fe||typeof oe!="function"&&this.state===ye)return this;var fe=new this.constructor($);if(this.state!==ot){var Y=this.state===Fe?ne:oe;I(fe,Y,this.outcome)}else this.queue.push(new Z(fe,ne,oe));return fe};function Z(ne,oe,fe){this.promise=ne,typeof oe=="function"&&(this.onFulfilled=oe,this.callFulfilled=this.otherCallFulfilled),typeof fe=="function"&&(this.onRejected=fe,this.callRejected=this.otherCallRejected)}Z.prototype.callFulfilled=function(ne){_e.resolve(this.promise,ne)},Z.prototype.otherCallFulfilled=function(ne){I(this.promise,this.onFulfilled,ne)},Z.prototype.callRejected=function(ne){_e.reject(this.promise,ne)},Z.prototype.otherCallRejected=function(ne){I(this.promise,this.onRejected,ne)};function I(ne,oe,fe){O(function(){var Y;try{Y=oe(fe)}catch(re){return _e.reject(ne,re)}Y===ne?_e.reject(ne,new TypeError("Cannot resolve promise with itself")):_e.resolve(ne,Y)})}_e.resolve=function(ne,oe){var fe=ke(P,oe);if(fe.status==="error")return _e.reject(ne,fe.value);var Y=fe.value;if(Y)Pe(ne,Y);else{ne.state=Fe,ne.outcome=oe;for(var re=-1,K=ne.queue.length;++re<K;)ne.queue[re].callFulfilled(oe)}return ne},_e.reject=function(ne,oe){ne.state=ye,ne.outcome=oe;for(var fe=-1,Y=ne.queue.length;++fe<Y;)ne.queue[fe].callRejected(oe);return ne};function P(ne){var oe=ne&&ne.then;if(ne&&(typeof ne=="object"||typeof ne=="function")&&typeof oe=="function")return function(){oe.apply(ne,arguments)}}function Pe(ne,oe){var fe=!1;function Y(F){fe||(fe=!0,_e.reject(ne,F))}function re(F){fe||(fe=!0,_e.resolve(ne,F))}function K(){oe(re,Y)}var M=ke(K);M.status==="error"&&Y(M.value)}function ke(ne,oe){var fe={};try{fe.value=ne(oe),fe.status="success"}catch(Y){fe.status="error",fe.value=Y}return fe}Re.resolve=ce;function ce(ne){return ne instanceof this?ne:_e.resolve(new this($),ne)}Re.reject=Ne;function Ne(ne){var oe=new this($);return _e.reject(oe,ne)}Re.all=tt;function tt(ne){var oe=this;if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var fe=ne.length,Y=!1;if(!fe)return this.resolve([]);for(var re=new Array(fe),K=0,M=-1,F=new this($);++M<fe;)T(ne[M],M);return F;function T(_,E){oe.resolve(_).then(w,function(R){Y||(Y=!0,_e.reject(F,R))});function w(R){re[E]=R,++K===fe&&!Y&&(Y=!0,_e.resolve(F,re))}}}Re.race=Qe;function Qe(ne){var oe=this;if(Object.prototype.toString.call(ne)!=="[object Array]")return this.reject(new TypeError("must be an array"));var fe=ne.length,Y=!1;if(!fe)return this.resolve([]);for(var re=-1,K=new this($);++re<fe;)M(ne[re]);return K;function M(F){oe.resolve(F).then(function(T){Y||(Y=!0,_e.resolve(K,T))},function(T){Y||(Y=!0,_e.reject(K,T))})}}},{1:1}],3:[function(b,C,D){(function(O){typeof O.Promise!="function"&&(O.Promise=b(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(b,C,D){var O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te};function $(Te,$e){if(!(Te instanceof $e))throw new TypeError("Cannot call a class as a function")}function _e(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var ye=_e();function Fe(){try{if(!ye||!ye.open)return!1;var Te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),$e=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Te||$e)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function ot(Te,$e){Te=Te||[],$e=$e||{};try{return new Blob(Te,$e)}catch(St){if(St.name!=="TypeError")throw St;for(var Ge=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,mt=new Ge,vt=0;vt<Te.length;vt+=1)mt.append(Te[vt]);return mt.getBlob($e.type)}}typeof Promise>"u"&&b(3);var Re=Promise;function Z(Te,$e){$e&&Te.then(function(Ge){$e(null,Ge)},function(Ge){$e(Ge)})}function I(Te,$e,Ge){typeof $e=="function"&&Te.then($e),typeof Ge=="function"&&Te.catch(Ge)}function P(Te){return typeof Te!="string"&&(console.warn(Te+" used as a key, but it is not a string."),Te=String(Te)),Te}function Pe(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var ke="local-forage-detect-blob-support",ce=void 0,Ne={},tt=Object.prototype.toString,Qe="readonly",ne="readwrite";function oe(Te){for(var $e=Te.length,Ge=new ArrayBuffer($e),mt=new Uint8Array(Ge),vt=0;vt<$e;vt++)mt[vt]=Te.charCodeAt(vt);return Ge}function fe(Te){return new Re(function($e){var Ge=Te.transaction(ke,ne),mt=ot([""]);Ge.objectStore(ke).put(mt,"key"),Ge.onabort=function(vt){vt.preventDefault(),vt.stopPropagation(),$e(!1)},Ge.oncomplete=function(){var vt=navigator.userAgent.match(/Chrome\/(\d+)/),St=navigator.userAgent.match(/Edge\//);$e(St||!vt||parseInt(vt[1],10)>=43)}}).catch(function(){return!1})}function Y(Te){return typeof ce=="boolean"?Re.resolve(ce):fe(Te).then(function($e){return ce=$e,ce})}function re(Te){var $e=Ne[Te.name],Ge={};Ge.promise=new Re(function(mt,vt){Ge.resolve=mt,Ge.reject=vt}),$e.deferredOperations.push(Ge),$e.dbReady?$e.dbReady=$e.dbReady.then(function(){return Ge.promise}):$e.dbReady=Ge.promise}function K(Te){var $e=Ne[Te.name],Ge=$e.deferredOperations.pop();if(Ge)return Ge.resolve(),Ge.promise}function M(Te,$e){var Ge=Ne[Te.name],mt=Ge.deferredOperations.pop();if(mt)return mt.reject($e),mt.promise}function F(Te,$e){return new Re(function(Ge,mt){if(Ne[Te.name]=Ne[Te.name]||G(),Te.db)if($e)re(Te),Te.db.close();else return Ge(Te.db);var vt=[Te.name];$e&&vt.push(Te.version);var St=ye.open.apply(ye,vt);$e&&(St.onupgradeneeded=function(It){var Nt=St.result;try{Nt.createObjectStore(Te.storeName),It.oldVersion<=1&&Nt.createObjectStore(ke)}catch(Gt){if(Gt.name==="ConstraintError")console.warn('The database "'+Te.name+'" has been upgraded from version '+It.oldVersion+" to version "+It.newVersion+', but the storage "'+Te.storeName+'" already exists.');else throw Gt}}),St.onerror=function(It){It.preventDefault(),mt(St.error)},St.onsuccess=function(){var It=St.result;It.onversionchange=function(Nt){Nt.target.close()},Ge(It),K(Te)}})}function T(Te){return F(Te,!1)}function _(Te){return F(Te,!0)}function E(Te,$e){if(!Te.db)return!0;var Ge=!Te.db.objectStoreNames.contains(Te.storeName),mt=Te.version<Te.db.version,vt=Te.version>Te.db.version;if(mt&&(Te.version!==$e&&console.warn('The database "'+Te.name+`" can't be downgraded from version `+Te.db.version+" to version "+Te.version+"."),Te.version=Te.db.version),vt||Ge){if(Ge){var St=Te.db.version+1;St>Te.version&&(Te.version=St)}return!0}return!1}function w(Te){return new Re(function($e,Ge){var mt=new FileReader;mt.onerror=Ge,mt.onloadend=function(vt){var St=btoa(vt.target.result||"");$e({__local_forage_encoded_blob:!0,data:St,type:Te.type})},mt.readAsBinaryString(Te)})}function R(Te){var $e=oe(atob(Te.data));return ot([$e],{type:Te.type})}function V(Te){return Te&&Te.__local_forage_encoded_blob}function ae(Te){var $e=this,Ge=$e._initReady().then(function(){var mt=Ne[$e._dbInfo.name];if(mt&&mt.dbReady)return mt.dbReady});return I(Ge,Te,Te),Ge}function q(Te){re(Te);for(var $e=Ne[Te.name],Ge=$e.forages,mt=0;mt<Ge.length;mt++){var vt=Ge[mt];vt._dbInfo.db&&(vt._dbInfo.db.close(),vt._dbInfo.db=null)}return Te.db=null,T(Te).then(function(St){return Te.db=St,E(Te)?_(Te):St}).then(function(St){Te.db=$e.db=St;for(var It=0;It<Ge.length;It++)Ge[It]._dbInfo.db=St}).catch(function(St){throw M(Te,St),St})}function k(Te,$e,Ge,mt){mt===void 0&&(mt=1);try{var vt=Te.db.transaction(Te.storeName,$e);Ge(null,vt)}catch(St){if(mt>0&&(!Te.db||St.name==="InvalidStateError"||St.name==="NotFoundError"))return Re.resolve().then(function(){if(!Te.db||St.name==="NotFoundError"&&!Te.db.objectStoreNames.contains(Te.storeName)&&Te.version<=Te.db.version)return Te.db&&(Te.version=Te.db.version+1),_(Te)}).then(function(){return q(Te).then(function(){k(Te,$e,Ge,mt-1)})}).catch(Ge);Ge(St)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function xe(Te){var $e=this,Ge={db:null};if(Te)for(var mt in Te)Ge[mt]=Te[mt];var vt=Ne[Ge.name];vt||(vt=G(),Ne[Ge.name]=vt),vt.forages.push($e),$e._initReady||($e._initReady=$e.ready,$e.ready=ae);var St=[];function It(){return Re.resolve()}for(var Nt=0;Nt<vt.forages.length;Nt++){var Gt=vt.forages[Nt];Gt!==$e&&St.push(Gt._initReady().catch(It))}var Ut=vt.forages.slice(0);return Re.all(St).then(function(){return Ge.db=vt.db,T(Ge)}).then(function(Wt){return Ge.db=Wt,E(Ge,$e._defaultConfig.version)?_(Ge):Wt}).then(function(Wt){Ge.db=vt.db=Wt,$e._dbInfo=Ge;for(var an=0;an<Ut.length;an++){var en=Ut[an];en!==$e&&(en._dbInfo.db=Ge.db,en._dbInfo.version=Ge.version)}})}function Ae(Te,$e){var Ge=this;Te=P(Te);var mt=new Re(function(vt,St){Ge.ready().then(function(){k(Ge._dbInfo,Qe,function(It,Nt){if(It)return St(It);try{var Gt=Nt.objectStore(Ge._dbInfo.storeName),Ut=Gt.get(Te);Ut.onsuccess=function(){var Wt=Ut.result;Wt===void 0&&(Wt=null),V(Wt)&&(Wt=R(Wt)),vt(Wt)},Ut.onerror=function(){St(Ut.error)}}catch(Wt){St(Wt)}})}).catch(St)});return Z(mt,$e),mt}function De(Te,$e){var Ge=this,mt=new Re(function(vt,St){Ge.ready().then(function(){k(Ge._dbInfo,Qe,function(It,Nt){if(It)return St(It);try{var Gt=Nt.objectStore(Ge._dbInfo.storeName),Ut=Gt.openCursor(),Wt=1;Ut.onsuccess=function(){var an=Ut.result;if(an){var en=an.value;V(en)&&(en=R(en));var Cn=Te(en,an.key,Wt++);Cn!==void 0?vt(Cn):an.continue()}else vt()},Ut.onerror=function(){St(Ut.error)}}catch(an){St(an)}})}).catch(St)});return Z(mt,$e),mt}function Ie(Te,$e,Ge){var mt=this;Te=P(Te);var vt=new Re(function(St,It){var Nt;mt.ready().then(function(){return Nt=mt._dbInfo,tt.call($e)==="[object Blob]"?Y(Nt.db).then(function(Gt){return Gt?$e:w($e)}):$e}).then(function(Gt){k(mt._dbInfo,ne,function(Ut,Wt){if(Ut)return It(Ut);try{var an=Wt.objectStore(mt._dbInfo.storeName);Gt===null&&(Gt=void 0);var en=an.put(Gt,Te);Wt.oncomplete=function(){Gt===void 0&&(Gt=null),St(Gt)},Wt.onabort=Wt.onerror=function(){var Cn=en.error?en.error:en.transaction.error;It(Cn)}}catch(Cn){It(Cn)}})}).catch(It)});return Z(vt,Ge),vt}function be(Te,$e){var Ge=this;Te=P(Te);var mt=new Re(function(vt,St){Ge.ready().then(function(){k(Ge._dbInfo,ne,function(It,Nt){if(It)return St(It);try{var Gt=Nt.objectStore(Ge._dbInfo.storeName),Ut=Gt.delete(Te);Nt.oncomplete=function(){vt()},Nt.onerror=function(){St(Ut.error)},Nt.onabort=function(){var Wt=Ut.error?Ut.error:Ut.transaction.error;St(Wt)}}catch(Wt){St(Wt)}})}).catch(St)});return Z(mt,$e),mt}function qe(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){k($e._dbInfo,ne,function(St,It){if(St)return vt(St);try{var Nt=It.objectStore($e._dbInfo.storeName),Gt=Nt.clear();It.oncomplete=function(){mt()},It.onabort=It.onerror=function(){var Ut=Gt.error?Gt.error:Gt.transaction.error;vt(Ut)}}catch(Ut){vt(Ut)}})}).catch(vt)});return Z(Ge,Te),Ge}function Ve(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){k($e._dbInfo,Qe,function(St,It){if(St)return vt(St);try{var Nt=It.objectStore($e._dbInfo.storeName),Gt=Nt.count();Gt.onsuccess=function(){mt(Gt.result)},Gt.onerror=function(){vt(Gt.error)}}catch(Ut){vt(Ut)}})}).catch(vt)});return Z(Ge,Te),Ge}function pe(Te,$e){var Ge=this,mt=new Re(function(vt,St){if(Te<0){vt(null);return}Ge.ready().then(function(){k(Ge._dbInfo,Qe,function(It,Nt){if(It)return St(It);try{var Gt=Nt.objectStore(Ge._dbInfo.storeName),Ut=!1,Wt=Gt.openKeyCursor();Wt.onsuccess=function(){var an=Wt.result;if(!an){vt(null);return}Te===0||Ut?vt(an.key):(Ut=!0,an.advance(Te))},Wt.onerror=function(){St(Wt.error)}}catch(an){St(an)}})}).catch(St)});return Z(mt,$e),mt}function j(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){k($e._dbInfo,Qe,function(St,It){if(St)return vt(St);try{var Nt=It.objectStore($e._dbInfo.storeName),Gt=Nt.openKeyCursor(),Ut=[];Gt.onsuccess=function(){var Wt=Gt.result;if(!Wt){mt(Ut);return}Ut.push(Wt.key),Wt.continue()},Gt.onerror=function(){vt(Gt.error)}}catch(Wt){vt(Wt)}})}).catch(vt)});return Z(Ge,Te),Ge}function B(Te,$e){$e=Pe.apply(this,arguments);var Ge=this.config();Te=typeof Te!="function"&&Te||{},Te.name||(Te.name=Te.name||Ge.name,Te.storeName=Te.storeName||Ge.storeName);var mt=this,vt;if(!Te.name)vt=Re.reject("Invalid arguments");else{var St=Te.name===Ge.name&&mt._dbInfo.db,It=St?Re.resolve(mt._dbInfo.db):T(Te).then(function(Nt){var Gt=Ne[Te.name],Ut=Gt.forages;Gt.db=Nt;for(var Wt=0;Wt<Ut.length;Wt++)Ut[Wt]._dbInfo.db=Nt;return Nt});Te.storeName?vt=It.then(function(Nt){if(Nt.objectStoreNames.contains(Te.storeName)){var Gt=Nt.version+1;re(Te);var Ut=Ne[Te.name],Wt=Ut.forages;Nt.close();for(var an=0;an<Wt.length;an++){var en=Wt[an];en._dbInfo.db=null,en._dbInfo.version=Gt}var Cn=new Re(function(Un,On){var Xn=ye.open(Te.name,Gt);Xn.onerror=function(Zn){var Sr=Xn.result;Sr.close(),On(Zn)},Xn.onupgradeneeded=function(){var Zn=Xn.result;Zn.deleteObjectStore(Te.storeName)},Xn.onsuccess=function(){var Zn=Xn.result;Zn.close(),Un(Zn)}});return Cn.then(function(Un){Ut.db=Un;for(var On=0;On<Wt.length;On++){var Xn=Wt[On];Xn._dbInfo.db=Un,K(Xn._dbInfo)}}).catch(function(Un){throw(M(Te,Un)||Re.resolve()).catch(function(){}),Un})}}):vt=It.then(function(Nt){re(Te);var Gt=Ne[Te.name],Ut=Gt.forages;Nt.close();for(var Wt=0;Wt<Ut.length;Wt++){var an=Ut[Wt];an._dbInfo.db=null}var en=new Re(function(Cn,Un){var On=ye.deleteDatabase(Te.name);On.onerror=function(){var Xn=On.result;Xn&&Xn.close(),Un(On.error)},On.onblocked=function(){console.warn('dropInstance blocked for database "'+Te.name+'" until all open connections are closed')},On.onsuccess=function(){var Xn=On.result;Xn&&Xn.close(),Cn(Xn)}});return en.then(function(Cn){Gt.db=Cn;for(var Un=0;Un<Ut.length;Un++){var On=Ut[Un];K(On._dbInfo)}}).catch(function(Cn){throw(M(Te,Cn)||Re.resolve()).catch(function(){}),Cn})})}return Z(vt,$e),vt}var nt={_driver:"asyncStorage",_initStorage:xe,_support:Fe(),iterate:De,getItem:Ae,setItem:Ie,removeItem:be,clear:qe,length:Ve,key:pe,keys:j,dropInstance:B};function he(){return typeof openDatabase=="function"}var it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wt="~~local_forage_type~",Ee=/^~~local_forage_type~([^~]+)~/,Oe="__lfsc__:",rt=Oe.length,me="arbf",Se="blob",ge="si08",ve="ui08",ee="uic8",ze="si16",Je="si32",yt="ur16",xt="ui32",Ye="fl32",J="fl64",He=rt+me.length,Le=Object.prototype.toString;function Ue(Te){var $e=Te.length*.75,Ge=Te.length,mt,vt=0,St,It,Nt,Gt;Te[Te.length-1]==="="&&($e--,Te[Te.length-2]==="="&&$e--);var Ut=new ArrayBuffer($e),Wt=new Uint8Array(Ut);for(mt=0;mt<Ge;mt+=4)St=it.indexOf(Te[mt]),It=it.indexOf(Te[mt+1]),Nt=it.indexOf(Te[mt+2]),Gt=it.indexOf(Te[mt+3]),Wt[vt++]=St<<2|It>>4,Wt[vt++]=(It&15)<<4|Nt>>2,Wt[vt++]=(Nt&3)<<6|Gt&63;return Ut}function _t(Te){var $e=new Uint8Array(Te),Ge="",mt;for(mt=0;mt<$e.length;mt+=3)Ge+=it[$e[mt]>>2],Ge+=it[($e[mt]&3)<<4|$e[mt+1]>>4],Ge+=it[($e[mt+1]&15)<<2|$e[mt+2]>>6],Ge+=it[$e[mt+2]&63];return $e.length%3===2?Ge=Ge.substring(0,Ge.length-1)+"=":$e.length%3===1&&(Ge=Ge.substring(0,Ge.length-2)+"=="),Ge}function st(Te,$e){var Ge="";if(Te&&(Ge=Le.call(Te)),Te&&(Ge==="[object ArrayBuffer]"||Te.buffer&&Le.call(Te.buffer)==="[object ArrayBuffer]")){var mt,vt=Oe;Te instanceof ArrayBuffer?(mt=Te,vt+=me):(mt=Te.buffer,Ge==="[object Int8Array]"?vt+=ge:Ge==="[object Uint8Array]"?vt+=ve:Ge==="[object Uint8ClampedArray]"?vt+=ee:Ge==="[object Int16Array]"?vt+=ze:Ge==="[object Uint16Array]"?vt+=yt:Ge==="[object Int32Array]"?vt+=Je:Ge==="[object Uint32Array]"?vt+=xt:Ge==="[object Float32Array]"?vt+=Ye:Ge==="[object Float64Array]"?vt+=J:$e(new Error("Failed to get type for BinaryArray"))),$e(vt+_t(mt))}else if(Ge==="[object Blob]"){var St=new FileReader;St.onload=function(){var It=wt+Te.type+"~"+_t(this.result);$e(Oe+Se+It)},St.readAsArrayBuffer(Te)}else try{$e(JSON.stringify(Te))}catch(It){console.error("Couldn't convert value into a JSON string: ",Te),$e(null,It)}}function Dt(Te){if(Te.substring(0,rt)!==Oe)return JSON.parse(Te);var $e=Te.substring(He),Ge=Te.substring(rt,He),mt;if(Ge===Se&&Ee.test($e)){var vt=$e.match(Ee);mt=vt[1],$e=$e.substring(vt[0].length)}var St=Ue($e);switch(Ge){case me:return St;case Se:return ot([St],{type:mt});case ge:return new Int8Array(St);case ve:return new Uint8Array(St);case ee:return new Uint8ClampedArray(St);case ze:return new Int16Array(St);case yt:return new Uint16Array(St);case Je:return new Int32Array(St);case xt:return new Uint32Array(St);case Ye:return new Float32Array(St);case J:return new Float64Array(St);default:throw new Error("Unkown type: "+Ge)}}var qt={serialize:st,deserialize:Dt,stringToBuffer:Ue,bufferToString:_t};function Lt(Te,$e,Ge,mt){Te.executeSql("CREATE TABLE IF NOT EXISTS "+$e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Ge,mt)}function ut(Te){var $e=this,Ge={db:null};if(Te)for(var mt in Te)Ge[mt]=typeof Te[mt]!="string"?Te[mt].toString():Te[mt];var vt=new Re(function(St,It){try{Ge.db=openDatabase(Ge.name,String(Ge.version),Ge.description,Ge.size)}catch(Nt){return It(Nt)}Ge.db.transaction(function(Nt){Lt(Nt,Ge,function(){$e._dbInfo=Ge,St()},function(Gt,Ut){It(Ut)})},It)});return Ge.serializer=qt,vt}function Yt(Te,$e,Ge,mt,vt,St){Te.executeSql(Ge,mt,vt,function(It,Nt){Nt.code===Nt.SYNTAX_ERR?It.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[$e.storeName],function(Gt,Ut){Ut.rows.length?St(Gt,Nt):Lt(Gt,$e,function(){Gt.executeSql(Ge,mt,vt,St)},St)},St):St(It,Nt)},St)}function wn(Te,$e){var Ge=this;Te=P(Te);var mt=new Re(function(vt,St){Ge.ready().then(function(){var It=Ge._dbInfo;It.db.transaction(function(Nt){Yt(Nt,It,"SELECT * FROM "+It.storeName+" WHERE key = ? LIMIT 1",[Te],function(Gt,Ut){var Wt=Ut.rows.length?Ut.rows.item(0).value:null;Wt&&(Wt=It.serializer.deserialize(Wt)),vt(Wt)},function(Gt,Ut){St(Ut)})})}).catch(St)});return Z(mt,$e),mt}function Rn(Te,$e){var Ge=this,mt=new Re(function(vt,St){Ge.ready().then(function(){var It=Ge._dbInfo;It.db.transaction(function(Nt){Yt(Nt,It,"SELECT * FROM "+It.storeName,[],function(Gt,Ut){for(var Wt=Ut.rows,an=Wt.length,en=0;en<an;en++){var Cn=Wt.item(en),Un=Cn.value;if(Un&&(Un=It.serializer.deserialize(Un)),Un=Te(Un,Cn.key,en+1),Un!==void 0){vt(Un);return}}vt()},function(Gt,Ut){St(Ut)})})}).catch(St)});return Z(mt,$e),mt}function jn(Te,$e,Ge,mt){var vt=this;Te=P(Te);var St=new Re(function(It,Nt){vt.ready().then(function(){$e===void 0&&($e=null);var Gt=$e,Ut=vt._dbInfo;Ut.serializer.serialize($e,function(Wt,an){an?Nt(an):Ut.db.transaction(function(en){Yt(en,Ut,"INSERT OR REPLACE INTO "+Ut.storeName+" (key, value) VALUES (?, ?)",[Te,Wt],function(){It(Gt)},function(Cn,Un){Nt(Un)})},function(en){if(en.code===en.QUOTA_ERR){if(mt>0){It(jn.apply(vt,[Te,Gt,Ge,mt-1]));return}Nt(en)}})})}).catch(Nt)});return Z(St,Ge),St}function Mn(Te,$e,Ge){return jn.apply(this,[Te,$e,Ge,1])}function Pn(Te,$e){var Ge=this;Te=P(Te);var mt=new Re(function(vt,St){Ge.ready().then(function(){var It=Ge._dbInfo;It.db.transaction(function(Nt){Yt(Nt,It,"DELETE FROM "+It.storeName+" WHERE key = ?",[Te],function(){vt()},function(Gt,Ut){St(Ut)})})}).catch(St)});return Z(mt,$e),mt}function ci(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){var St=$e._dbInfo;St.db.transaction(function(It){Yt(It,St,"DELETE FROM "+St.storeName,[],function(){mt()},function(Nt,Gt){vt(Gt)})})}).catch(vt)});return Z(Ge,Te),Ge}function Nr(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){var St=$e._dbInfo;St.db.transaction(function(It){Yt(It,St,"SELECT COUNT(key) as c FROM "+St.storeName,[],function(Nt,Gt){var Ut=Gt.rows.item(0).c;mt(Ut)},function(Nt,Gt){vt(Gt)})})}).catch(vt)});return Z(Ge,Te),Ge}function nr(Te,$e){var Ge=this,mt=new Re(function(vt,St){Ge.ready().then(function(){var It=Ge._dbInfo;It.db.transaction(function(Nt){Yt(Nt,It,"SELECT key FROM "+It.storeName+" WHERE id = ? LIMIT 1",[Te+1],function(Gt,Ut){var Wt=Ut.rows.length?Ut.rows.item(0).key:null;vt(Wt)},function(Gt,Ut){St(Ut)})})}).catch(St)});return Z(mt,$e),mt}function Nn(Te){var $e=this,Ge=new Re(function(mt,vt){$e.ready().then(function(){var St=$e._dbInfo;St.db.transaction(function(It){Yt(It,St,"SELECT key FROM "+St.storeName,[],function(Nt,Gt){for(var Ut=[],Wt=0;Wt<Gt.rows.length;Wt++)Ut.push(Gt.rows.item(Wt).key);mt(Ut)},function(Nt,Gt){vt(Gt)})})}).catch(vt)});return Z(Ge,Te),Ge}function _r(Te){return new Re(function($e,Ge){Te.transaction(function(mt){mt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(vt,St){for(var It=[],Nt=0;Nt<St.rows.length;Nt++)It.push(St.rows.item(Nt).name);$e({db:Te,storeNames:It})},function(vt,St){Ge(St)})},function(mt){Ge(mt)})})}function $n(Te,$e){$e=Pe.apply(this,arguments);var Ge=this.config();Te=typeof Te!="function"&&Te||{},Te.name||(Te.name=Te.name||Ge.name,Te.storeName=Te.storeName||Ge.storeName);var mt=this,vt;return Te.name?vt=new Re(function(St){var It;Te.name===Ge.name?It=mt._dbInfo.db:It=openDatabase(Te.name,"","",0),Te.storeName?St({db:It,storeNames:[Te.storeName]}):St(_r(It))}).then(function(St){return new Re(function(It,Nt){St.db.transaction(function(Gt){function Ut(Cn){return new Re(function(Un,On){Gt.executeSql("DROP TABLE IF EXISTS "+Cn,[],function(){Un()},function(Xn,Zn){On(Zn)})})}for(var Wt=[],an=0,en=St.storeNames.length;an<en;an++)Wt.push(Ut(St.storeNames[an]));Re.all(Wt).then(function(){It()}).catch(function(Cn){Nt(Cn)})},function(Gt){Nt(Gt)})})}):vt=Re.reject("Invalid arguments"),Z(vt,$e),vt}var Dr={_driver:"webSQLStorage",_initStorage:ut,_support:he(),iterate:Rn,getItem:wn,setItem:Mn,removeItem:Pn,clear:ci,length:Nr,key:nr,keys:Nn,dropInstance:$n};function Gr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Or(Te,$e){var Ge=Te.name+"/";return Te.storeName!==$e.storeName&&(Ge+=Te.storeName+"/"),Ge}function mi(){var Te="_localforage_support_test";try{return localStorage.setItem(Te,!0),localStorage.removeItem(Te),!1}catch{return!0}}function Ar(){return!mi()||localStorage.length>0}function sr(Te){var $e=this,Ge={};if(Te)for(var mt in Te)Ge[mt]=Te[mt];return Ge.keyPrefix=Or(Te,$e._defaultConfig),Ar()?($e._dbInfo=Ge,Ge.serializer=qt,Re.resolve()):Re.reject()}function kn(Te){var $e=this,Ge=$e.ready().then(function(){for(var mt=$e._dbInfo.keyPrefix,vt=localStorage.length-1;vt>=0;vt--){var St=localStorage.key(vt);St.indexOf(mt)===0&&localStorage.removeItem(St)}});return Z(Ge,Te),Ge}function Jn(Te,$e){var Ge=this;Te=P(Te);var mt=Ge.ready().then(function(){var vt=Ge._dbInfo,St=localStorage.getItem(vt.keyPrefix+Te);return St&&(St=vt.serializer.deserialize(St)),St});return Z(mt,$e),mt}function Mr(Te,$e){var Ge=this,mt=Ge.ready().then(function(){for(var vt=Ge._dbInfo,St=vt.keyPrefix,It=St.length,Nt=localStorage.length,Gt=1,Ut=0;Ut<Nt;Ut++){var Wt=localStorage.key(Ut);if(Wt.indexOf(St)===0){var an=localStorage.getItem(Wt);if(an&&(an=vt.serializer.deserialize(an)),an=Te(an,Wt.substring(It),Gt++),an!==void 0)return an}}});return Z(mt,$e),mt}function ar(Te,$e){var Ge=this,mt=Ge.ready().then(function(){var vt=Ge._dbInfo,St;try{St=localStorage.key(Te)}catch{St=null}return St&&(St=St.substring(vt.keyPrefix.length)),St});return Z(mt,$e),mt}function oi(Te){var $e=this,Ge=$e.ready().then(function(){for(var mt=$e._dbInfo,vt=localStorage.length,St=[],It=0;It<vt;It++){var Nt=localStorage.key(It);Nt.indexOf(mt.keyPrefix)===0&&St.push(Nt.substring(mt.keyPrefix.length))}return St});return Z(Ge,Te),Ge}function gi(Te){var $e=this,Ge=$e.keys().then(function(mt){return mt.length});return Z(Ge,Te),Ge}function go(Te,$e){var Ge=this;Te=P(Te);var mt=Ge.ready().then(function(){var vt=Ge._dbInfo;localStorage.removeItem(vt.keyPrefix+Te)});return Z(mt,$e),mt}function xi(Te,$e,Ge){var mt=this;Te=P(Te);var vt=mt.ready().then(function(){$e===void 0&&($e=null);var St=$e;return new Re(function(It,Nt){var Gt=mt._dbInfo;Gt.serializer.serialize($e,function(Ut,Wt){if(Wt)Nt(Wt);else try{localStorage.setItem(Gt.keyPrefix+Te,Ut),It(St)}catch(an){(an.name==="QuotaExceededError"||an.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Nt(an),Nt(an)}})})});return Z(vt,Ge),vt}function ui(Te,$e){if($e=Pe.apply(this,arguments),Te=typeof Te!="function"&&Te||{},!Te.name){var Ge=this.config();Te.name=Te.name||Ge.name,Te.storeName=Te.storeName||Ge.storeName}var mt=this,vt;return Te.name?vt=new Re(function(St){Te.storeName?St(Or(Te,mt._defaultConfig)):St(Te.name+"/")}).then(function(St){for(var It=localStorage.length-1;It>=0;It--){var Nt=localStorage.key(It);Nt.indexOf(St)===0&&localStorage.removeItem(Nt)}}):vt=Re.reject("Invalid arguments"),Z(vt,$e),vt}var no={_driver:"localStorageWrapper",_initStorage:sr,_support:Gr(),iterate:Mr,getItem:Jn,setItem:xi,removeItem:go,clear:kn,length:gi,key:ar,keys:oi,dropInstance:ui},Ui=function($e,Ge){return $e===Ge||typeof $e=="number"&&typeof Ge=="number"&&isNaN($e)&&isNaN(Ge)},vi=function($e,Ge){for(var mt=$e.length,vt=0;vt<mt;){if(Ui($e[vt],Ge))return!0;vt++}return!1},Br=Array.isArray||function(Te){return Object.prototype.toString.call(Te)==="[object Array]"},ur={},Qr={},qr={INDEXEDDB:nt,WEBSQL:Dr,LOCALSTORAGE:no},Bi=[qr.INDEXEDDB._driver,qr.WEBSQL._driver,qr.LOCALSTORAGE._driver],Vn=["dropInstance"],mr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Vn),lr={description:"",driver:Bi.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ti(Te,$e){Te[$e]=function(){var Ge=arguments;return Te.ready().then(function(){return Te[$e].apply(Te,Ge)})}}function Q(){for(var Te=1;Te<arguments.length;Te++){var $e=arguments[Te];if($e)for(var Ge in $e)$e.hasOwnProperty(Ge)&&(Br($e[Ge])?arguments[0][Ge]=$e[Ge].slice():arguments[0][Ge]=$e[Ge])}return arguments[0]}var dt=(function(){function Te($e){$(this,Te);for(var Ge in qr)if(qr.hasOwnProperty(Ge)){var mt=qr[Ge],vt=mt._driver;this[Ge]=vt,ur[vt]||this.defineDriver(mt)}this._defaultConfig=Q({},lr),this._config=Q({},this._defaultConfig,$e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Te.prototype.config=function(Ge){if((typeof Ge>"u"?"undefined":O(Ge))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var mt in Ge){if(mt==="storeName"&&(Ge[mt]=Ge[mt].replace(/\W/g,"_")),mt==="version"&&typeof Ge[mt]!="number")return new Error("Database version must be a number.");this._config[mt]=Ge[mt]}return"driver"in Ge&&Ge.driver?this.setDriver(this._config.driver):!0}else return typeof Ge=="string"?this._config[Ge]:this._config},Te.prototype.defineDriver=function(Ge,mt,vt){var St=new Re(function(It,Nt){try{var Gt=Ge._driver,Ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Ge._driver){Nt(Ut);return}for(var Wt=mr.concat("_initStorage"),an=0,en=Wt.length;an<en;an++){var Cn=Wt[an],Un=!vi(Vn,Cn);if((Un||Ge[Cn])&&typeof Ge[Cn]!="function"){Nt(Ut);return}}var On=function(){for(var Sr=function(_i){return function(){var Vr=new Error("Method "+_i+" is not implemented by the current driver"),li=Re.reject(Vr);return Z(li,arguments[arguments.length-1]),li}},gr=0,ir=Vn.length;gr<ir;gr++){var Ti=Vn[gr];Ge[Ti]||(Ge[Ti]=Sr(Ti))}};On();var Xn=function(Sr){ur[Gt]&&console.info("Redefining LocalForage driver: "+Gt),ur[Gt]=Ge,Qr[Gt]=Sr,It()};"_support"in Ge?Ge._support&&typeof Ge._support=="function"?Ge._support().then(Xn,Nt):Xn(!!Ge._support):Xn(!0)}catch(Zn){Nt(Zn)}});return I(St,mt,vt),St},Te.prototype.driver=function(){return this._driver||null},Te.prototype.getDriver=function(Ge,mt,vt){var St=ur[Ge]?Re.resolve(ur[Ge]):Re.reject(new Error("Driver not found."));return I(St,mt,vt),St},Te.prototype.getSerializer=function(Ge){var mt=Re.resolve(qt);return I(mt,Ge),mt},Te.prototype.ready=function(Ge){var mt=this,vt=mt._driverSet.then(function(){return mt._ready===null&&(mt._ready=mt._initDriver()),mt._ready});return I(vt,Ge,Ge),vt},Te.prototype.setDriver=function(Ge,mt,vt){var St=this;Br(Ge)||(Ge=[Ge]);var It=this._getSupportedDrivers(Ge);function Nt(){St._config.driver=St.driver()}function Gt(an){return St._extend(an),Nt(),St._ready=St._initStorage(St._config),St._ready}function Ut(an){return function(){var en=0;function Cn(){for(;en<an.length;){var Un=an[en];return en++,St._dbInfo=null,St._ready=null,St.getDriver(Un).then(Gt).catch(Cn)}Nt();var On=new Error("No available storage method found.");return St._driverSet=Re.reject(On),St._driverSet}return Cn()}}var Wt=this._driverSet!==null?this._driverSet.catch(function(){return Re.resolve()}):Re.resolve();return this._driverSet=Wt.then(function(){var an=It[0];return St._dbInfo=null,St._ready=null,St.getDriver(an).then(function(en){St._driver=en._driver,Nt(),St._wrapLibraryMethodsWithReady(),St._initDriver=Ut(It)})}).catch(function(){Nt();var an=new Error("No available storage method found.");return St._driverSet=Re.reject(an),St._driverSet}),I(this._driverSet,mt,vt),this._driverSet},Te.prototype.supports=function(Ge){return!!Qr[Ge]},Te.prototype._extend=function(Ge){Q(this,Ge)},Te.prototype._getSupportedDrivers=function(Ge){for(var mt=[],vt=0,St=Ge.length;vt<St;vt++){var It=Ge[vt];this.supports(It)&&mt.push(It)}return mt},Te.prototype._wrapLibraryMethodsWithReady=function(){for(var Ge=0,mt=mr.length;Ge<mt;Ge++)ti(this,mr[Ge])},Te.prototype.createInstance=function(Ge){return new Te(Ge)},Te})(),Be=new dt;C.exports=Be},{3:3}]},{},[4])(4)})})(localforage)),localforage.exports}var ZegoExpressWebRTC=ZegoExpressWebRTC$1.exports,hasRequiredZegoExpressWebRTC;function requireZegoExpressWebRTC(){return hasRequiredZegoExpressWebRTC||(hasRequiredZegoExpressWebRTC=1,(function(g,f){(function(b,C){g.exports=C(requireUmd$1(),requireMinimal$2(),requireZegoExpressLogger(),requireLocalforage())})(typeof self<"u"?self:ZegoExpressWebRTC,function(b,C,D,O){return(function(){var $={166:function(ot,Re,Z){var I,P,Pe,ke;Z.d(Re,{PP:function(){return ke},SC:function(){return Pe}}),(function(ce){ce[ce.NONE=0]="NONE",ce[ce.MEN_TO_CHILD=1]="MEN_TO_CHILD",ce[ce.MEN_TO_WOMEN=2]="MEN_TO_WOMEN",ce[ce.WOMEN_TO_CHILD=3]="WOMEN_TO_CHILD",ce[ce.WOMEN_TO_MEN=4]="WOMEN_TO_MEN",ce[ce.FOREIGNER=5]="FOREIGNER",ce[ce.OPTIMUS_PRIME=6]="OPTIMUS_PRIME",ce[ce.ANDROID=7]="ANDROID",ce[ce.ETHEREAL=8]="ETHEREAL",ce[ce.MALE_MAGNETIC=9]="MALE_MAGNETIC",ce[ce.FEMALE_FRESH=10]="FEMALE_FRESH",ce[ce.MAJOR_C=11]="MAJOR_C",ce[ce.MINOR_A=12]="MINOR_A",ce[ce.HARMONIC_MINOR=13]="HARMONIC_MINOR",ce[ce.FEMALE_ENERGETIC=14]="FEMALE_ENERGETIC",ce[ce.RICHNESS=15]="RICHNESS",ce[ce.MUFFLED=16]="MUFFLED",ce[ce.ROUNDNESS=17]="ROUNDNESS",ce[ce.FALSETTO=18]="FALSETTO",ce[ce.FULLNESS=19]="FULLNESS",ce[ce.CLEAR=20]="CLEAR",ce[ce.HIGHLY_RESONANT=21]="HIGHLY_RESONANT",ce[ce.LOUD_CLEAR=22]="LOUD_CLEAR"})(I||(I={})),(function(ce){ce[ce.None=0]="None",ce[ce.SoftRoom=1]="SoftRoom",ce[ce.LargeRoom=2]="LargeRoom",ce[ce.ConcertHall=3]="ConcertHall",ce[ce.Valley=4]="Valley",ce[ce.RecordingStudio=5]="RecordingStudio",ce[ce.Basement=6]="Basement",ce[ce.KTV=7]="KTV",ce[ce.Popular=8]="Popular",ce[ce.Rock=9]="Rock",ce[ce.VocalConcert=10]="VocalConcert",ce[ce.GramoPhone=11]="GramoPhone",ce[ce.EnhancedKTV=12]="EnhancedKTV"})(P||(P={})),(function(ce){ce[ce.None=0]="None",ce[ce.Local=1]="Local",ce[ce.Publish=2]="Publish",ce[ce.All=3]="All"})(Pe||(Pe={})),(function(ce){ce[ce.AI=0]="AI",ce[ce.AIBalanced=1]="AIBalanced",ce[ce.AIAggressive=2]="AIAggressive"})(ke||(ke={}))},327:function(ot,Re,Z){Z.d(Re,{L:function(){return P}});var I=Z(4872);function P(Pe,ke){if(Pe&&!(0,I.dr)(Pe)&&Pe.zegoStream){if(ke.info("cu.gs type:zego"),(0,I.dr)(Pe.stream))return Pe.stream;throw new Error("The ZegoLocalStream type requires first calling the capture api to capture the stream")}return Pe}},477:function(){},743:function(ot,Re,Z){Z.d(Re,{RangeAudio:function(){return xt}});var I=Z(8899),P=Z(8866),Pe=(function(){function Ye(){}return Ye.generateEls=function(J){if(J===void 0&&(J=30),this.elements.length>=J)this.elements.forEach(function(Le){Le.dom.play().catch(function(Ue){})});else{var He=Array(J-this.elements.length).fill(0).map(function(Le,Ue){var _t=P.VJ.createElement("audio");return _t.muted=!0,_t.setAttribute("autoplay","autoplay"),_t.setAttribute("playsInline","playsInline"),_t.id="audio"+Ue,{dom:_t,id:Ue,used:!1}});this.elements=this.elements.concat(He)}},Ye.useAudioEl=function(){this.elements.length===0&&this.generateEls();var J=this.elements.find(function(He){return!He.used});return J&&(J.used=!0),J},Ye.stopUsingAudioEl=function(J){var He=this.elements[J];He&&(He.dom.onpause=null,He.dom.onerror=null,He.dom.muted=!0,He.used=!1)},Ye.elements=[],Ye})(),ke=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},ce=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},Ne="zc.ra.3",tt=(function(){function Ye(J,He){this.un=J,this.an=He,this.rtcConn=null,this.loopbackConn=null,this.destStream=new MediaStream,this.onError=null}return Ye.prototype.bindStream=function(J,He){var Le,Ue;return ke(this,void 0,void 0,function(){var _t,st,Dt,qt,Lt,ut,Yt=this;return ce(this,function(wn){switch(wn.label){case 0:return He&&(this.un=He),_t=["completed","connected"],this.rtcConn&&this.loopbackConn&&_t.includes(this.rtcConn.connectionState)?(st=(Le=this.rtcConn)===null||Le===void 0?void 0:Le.getSenders().find(function(Rn){var jn;return((jn=Rn.track)===null||jn===void 0?void 0:jn.kind)==="audio"}),J.getTracks().forEach(function(Rn){Rn.kind==="audio"&&(st==null||st.replaceTrack(Rn))}),[3,10]):[3,1];case 1:this.rtcConn=new RTCPeerConnection,this.loopbackConn=new RTCPeerConnection,Dt={offerVideo:!0,offerAudio:!0,offerToReceiveAudio:!1,offerToReceiveVideo:!1},this.rtcConn.onicecandidateerror=function(Rn){Yt.an.warn(Ne+" ".concat(Yt.un," loopback in ice error: ").concat(JSON.stringify(Rn)))},this.loopbackConn.onicecandidateerror=function(Rn){Yt.an.warn(Ne+" ".concat(Yt.un," loopback out ice error: ").concat(JSON.stringify(Rn)))},this.rtcConn.onicecandidate=function(Rn){var jn,Mn=Rn.candidate;Mn&&(Yt.an.info(Ne+" ".concat(Yt.un," loopback add out candidate: ").concat(Mn)),(jn=Yt.loopbackConn)===null||jn===void 0||jn.addIceCandidate(new RTCIceCandidate(Mn)))},this.loopbackConn.onicecandidate=function(Rn){var jn,Mn=Rn.candidate;Mn&&(Yt.an.info(Ne+" ".concat(Yt.un," loopback add in candidate: ").concat(Mn)),(jn=Yt.rtcConn)===null||jn===void 0||jn.addIceCandidate(new RTCIceCandidate(Mn)))},window.setTimeout(function(){Yt.rtcConn&&Yt.loopbackConn&&(_t.includes(Yt.rtcConn.iceConnectionState)&&_t.includes(Yt.loopbackConn.iceConnectionState)?Yt.an.info(Ne+" ".concat(Yt.un," loopback connect ok.")):(Yt.an.warn(Ne+" ".concat(Yt.un," loopback connect failed. in state: ").concat(Yt.rtcConn.iceConnectionState,", out state: ").concat(Yt.loopbackConn.iceConnectionState)),Yt.close(),Yt.onError&&Yt.onError("time out")))},2e3),this.loopbackConn.ontrack=function(Rn){var jn=Rn.track;Yt.an.info(Ne+" ".concat(Yt.un," loopback receive track")),Yt.replaceTrack(jn)},J.getTracks().find(function(Rn){var jn;if(Rn.kind==="audio")return(jn=Yt.rtcConn)===null||jn===void 0||jn.addTrack(Rn,J),!0}),wn.label=2;case 2:return wn.trys.push([2,9,,10]),[4,this.rtcConn.createOffer(Dt)];case 3:return qt=wn.sent(),[4,this.rtcConn.setLocalDescription(qt)];case 4:return wn.sent(),[4,this.loopbackConn.setRemoteDescription(qt)];case 5:return wn.sent(),[4,this.loopbackConn.createAnswer()];case 6:return(Lt=wn.sent()).sdp=(Ue=Lt.sdp)===null||Ue===void 0?void 0:Ue.replace(/useinbandfec=/,"stereo=1;useinbandfec="),[4,this.loopbackConn.setLocalDescription(Lt)];case 7:return wn.sent(),[4,this.rtcConn.setRemoteDescription(Lt)];case 8:return wn.sent(),this.an.info(Ne+" ".concat(this.un," loopback set sdp completed.")),[3,10];case 9:return ut=wn.sent(),this.an.error(Ne+" ".concat(this.un," loopback connect failed.").concat(ut)),this.close(),this.onError&&this.onError("connect failed"),this.onError=null,[3,10];case 10:return[2,this.destStream]}})})},Ye.prototype.replaceTrack=function(J){var He=this;J.kind==="audio"&&(this.destStream.getTracks().forEach(function(Le){He.destStream.removeTrack(Le)}),this.destStream.addTrack(J))},Ye.prototype.close=function(){var J=this,He=this.rtcConn,Le=this.loopbackConn;this.destStream.getTracks().forEach(function(Ue){J.destStream.removeTrack(Ue)}),He==null||He.close(),Le==null||Le.close(),this.rtcConn=null,this.loopbackConn=null},Ye})(),Qe=Z(4872),ne=Z(6493),oe=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},fe=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},Y="zc.ra.5",re,K=(function(){function Ye(J,He){this.an=J,this.userID="base"+new Date().getTime(),this.isHide=!1,this.distance=null,this.maxDistance=1e3,this.position=null,this.speaker="",this.audioEl=null,this.sourceNode=null,this.isPlaying=!1,this.config={needLoopback:!0,useGain:!0,playOnAudioContext:!1,useWebAudio:!0},this.volume=1,this.gainNode=null,this.isSpatial=!1,this.panner=null,this.audioCtx=He.audioCtx,this.isSpatial=He.isSpatial,this.setMaxDistance((0,Qe.Cs)(He.maxDistance)?He.maxDistance:1e5),this.destNode=this.audioCtx.createMediaStreamDestination(),this.setVolume(He.volume),this.setSpeaker(He.speaker).catch(function(Le){}),this.inBackground(He.isHide)}return Ye.prototype.setPosition=function(J){this.an.info(Y+" ".concat(this.userID," set position: ")+J),this.position=J,this.panner&&(this.panner.positionX!==void 0?(this.panner.positionX.value=J[1],this.panner.positionY.value=J[2],this.panner.positionZ.value=-J[0]):this.panner.setPosition(J[1],J[2],-J[0]))},Ye.prototype.getDistanceFromListener=function(J){return this.distance=(function(He,Le){if(!Le||!He)return null;var Ue=[He[0]-Le[0],He[1]-Le[1],He[2]-Le[2]];return Math.sqrt(Math.pow(Ue[0],2)+Math.pow(Ue[1],2)+Math.pow(Ue[2],2))})(this.position,J.position),this.distance},Ye.prototype.setMaxDistance=function(J){this.maxDistance=J,this.panner&&(J<10&&(J=10),this.panner.maxDistance=2.6*J)},Ye.prototype.setVolume=function(J){isNaN(J)||(this.volume=J,this.gainNode&&(this.gainNode.gain.value=this.volume))},Ye.prototype.setSpeaker=function(J){var He;return oe(this,void 0,void 0,function(){var Le,Ue,_t;return fe(this,function(st){switch(st.label){case 0:if(!(0,Qe.QP)(J))return[2];if(this.speaker=J,!(Le=(He=this.audioEl)===null||He===void 0?void 0:He.dom))return[3,10];if(!(Ue=Le.setSinkId))return[3,8];st.label=1;case 1:return st.trys.push([1,6,,7]),this.config.playOnAudioContext?[3,3]:[4,Ue.call(Le,J||"")];case 2:return st.sent(),[3,5];case 3:return[4,Ue.call(Le,"")];case 4:st.sent(),st.label=5;case 5:return this.an.info(Y+" ".concat(this.userID," set speaker success. id: ").concat(J,".")),[3,7];case 6:throw _t=st.sent(),this.an.error(Y+" ".concat(this.userID," set speaker failed. id: ").concat(J,"  error: ").concat(_t,".")),_t;case 7:return[3,9];case 8:throw"setting speaker not support.";case 9:return[3,11];case 10:this.an.info(Y+" ".concat(this.userID," no element for set speaker.")),st.label=11;case 11:return[2]}})})},Ye.prototype.initPanner=function(){if(!this.panner){var J=(function(Le,Ue,_t){var st=_t||[0,0,0],Dt=Le.createPanner(),qt=Le.createGain();return Dt.panningModel="HRTF",Dt.distanceModel="linear",Dt.refDistance=1,Dt.maxDistance=2.6*Ue||1,Dt.rolloffFactor=1,Dt.coneOuterGain=.4,Dt.positionX!==void 0?(Dt.positionX.value=st[1],Dt.positionY.value=st[2],Dt.positionZ.value=-st[0]):Dt.setPosition(st[1],st[2],-st[0]),{panner:Dt,gainNode:qt}})(this.audioCtx,this.maxDistance,this.position),He=J.gainNode;this.panner=J.panner,this.gainNode=He,He.gain.value=this.volume}},Ye.prototype.changeRenderConfig=function(J,He,Le,Ue){var _t,st,Dt,qt,Lt;return He===void 0&&(He=!1),Le===void 0&&(Le=!1),Ue===void 0&&(Ue=!0),oe(this,void 0,void 0,function(){var ut,Yt,wn,Rn,jn,Mn,Pn,ci,Nr,nr,Nn,_r,$n=this;return fe(this,function(Dr){switch(Dr.label){case 0:return He||this.isSpatial!==J?(this.isSpatial=J,ut=(0,ne.H8)()&&(0,ne.Fr)(),[4,ge()]):[2];case 1:return Yt=Dr.sent(),wn=Yt.platform==="Windows"&&Yt.majorPlatformVersion>=13,Rn=this.isHide&&(wn||ut),jn=this.audioCtx.state!=="running",Ue&&(Rn||jn)&&(this.an.warn("".concat(Y," ").concat(this.userID," stop web audio. system: ").concat(Yt.platform," ").concat(Yt.majorPlatformVersion)),Ue=!1),this.config.useWebAudio=Ue,Mn=(0,ne.$t)(),Pn=Mn.includes("safari")&&!Mn.includes("chrome"),ci=Mn.includes("micromessenger")&&new RegExp(/(iphone|ipad|ipod|ios)/i).test(Mn),Ue||this.stream||(Le=!0),this.config.playOnAudioContext=Le,this.initPanner(),this.isPlaying&&this.sourceNode?(this.lastNode&&this.lastNode.disconnect(),Nr=this.sourceNode,this.sourceNode.disconnect(),(_t=this.panner)===null||_t===void 0||_t.disconnect(),(st=this.gainNode)===null||st===void 0||st.disconnect(),this.gainNode?(Ue&&(this.config.useGain&&(Nr=this.sourceNode.connect(this.gainNode)),this.panner&&J&&(Nr=Nr.connect(this.panner))),Nr.connect(Le?this.audioCtx.destination:this.destNode),this.lastNode=Nr,this.position&&this.setPosition(this.position),this.an.info(Y+" '".concat(this.userID,"' play ").concat(J?"3d":"normal"," stream on ").concat(Le?"audio ctx":"element")),(nr=(Dt=this.audioEl)===null||Dt===void 0?void 0:Dt.dom)?(nr.onpause=function(){$n.an.warn(Y+" ".concat($n.streamID," audio paused"))},nr.onerror=function(Gr){$n.an.warn(Y+" ".concat($n.streamID," audio error, ").concat(Gr))},Le?(this.stream&&nr.srcObject!==this.stream&&(nr.srcObject=this.stream,nr.muted=!0,nr.oncanplay=function(){nr.play().then(function(){$n.an.info(Y+" ".concat($n.userID," ctx autoplay success.")),$n.checkPlayStatus()}).catch(function(Gr){$n.an.warn(Y+" ".concat($n.userID," ctx autoplay failed."))})}),[3,6]):[3,2]):[3,6]):[3,6]):[3,6];case 2:return Nn=this.destNode.stream,(_r=this.config.needLoopback&&!ci&&!Pn)&&this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null),Ue||!this.stream?[3,3]:(this.an.info("".concat(Y," ").concat(this.userID," stop audio api")),this.sourceNode.disconnect(),(qt=this.panner)===null||qt===void 0||qt.disconnect(),(Lt=this.gainNode)===null||Lt===void 0||Lt.disconnect(),Nn=this.stream,[3,5]);case 3:return _r&&Nn?(this.loopbackConn=this.loopbackConn||new tt(this.streamID||"",this.an),this.loopbackConn.onError=function(Gr){$n.an.warn(Y+" ".concat($n.userID," loopback failed! ").concat(Gr)),$n.changeRenderConfig($n.isSpatial,!0,!0)},[4,this.loopbackConn.bindStream(Nn,this.streamID||void 0)]):[3,5];case 4:return Nn=Dr.sent(),[3,5];case 5:nr.muted=!0,nr.srcObject=Nn,this.setSpeaker(this.speaker).catch(function(Gr){}),nr.oncanplay=function(){if(nr){nr.muted=!1;var Gr=function(Or){$n.an.error(Y+" ".concat($n.userID," autoplay failed. error: ").concat(Or)),$n.changeRenderConfig($n.isSpatial,!0,!0)};nr.play().then(function(){nr!=null&&nr.paused?Gr("audio paused"):($n.an.info(Y+" ".concat($n.userID," element autoplay success.")),$n.checkPlayStatus())}).catch(function(Or){Gr(Or)})}},Dr.label=6;case 6:return[2]}})})},Ye.prototype.checkPlayStatus=function(){var J=this;setTimeout(function(){var He;if(J.isPlaying){var Le=(He=J.audioEl)===null||He===void 0?void 0:He.dom,Ue=J.audioCtx.state;!Le||Le.paused||Le.muted&&!J.config.playOnAudioContext||Ue!=="running"?(J.an.warn("".concat(Y," ").concat(J.userID," play detection is abnormal. audio ctx:").concat(Ue,", paused:").concat(Le==null?void 0:Le.paused,", muted:").concat(Le==null?void 0:Le.muted)),Ue!=="running"&&(J.audioCtx.resume(),setTimeout(function(){J.an.warn("".concat(Y," ").concat(J.userID," play resume. audio ctx:").concat(Ue,", paused:").concat(Le==null?void 0:Le.paused,", muted:").concat(Le==null?void 0:Le.muted))},1e3))):J.an.info("".concat(Y," ").concat(J.userID," play detection is fine"))}},2e3)},Ye.prototype.inBackground=function(J,He){J===void 0&&(J=!1),this.isHide!==J&&(this.isHide=J,J||this.config.useWebAudio||this.changeRenderConfig(this.isSpatial,!0))},Ye})(),M=(re=function(Ye,J){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(He,Le){He.__proto__=Le}||function(He,Le){for(var Ue in Le)Object.prototype.hasOwnProperty.call(Le,Ue)&&(He[Ue]=Le[Ue])},re(Ye,J)},function(Ye,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function He(){this.constructor=Ye}re(Ye,J),Ye.prototype=J===null?Object.create(J):(He.prototype=J.prototype,new He)}),F=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},T=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},_="zc.ra.1",E=(function(Ye){function J(He,Le,Ue){var _t=Ye.call(this,He,Ue)||this;return _t.an=He,_t.audioTrack=null,_t.zegoRTC=Ue.zegoRTC,_t.userID=Le.userID,_t.teamID=Le.teamID,_t.raMode=Le.raMode!==void 0?Le.raMode:I.kf.World,Le.position&&(_t.position=Le.position),_t}return M(J,Ye),Object.defineProperty(J.prototype,"sendMode",{get:function(){return this._sendMode!==void 0?this._sendMode:this.raMode===I.kf.World?I.UF.All:I.UF.Team},set:function(He){this._sendMode=He},enumerable:!1,configurable:!0}),J.prototype.checkTrackChanged=function(){var He;if(this.stream){var Le=this.stream.getAudioTracks()[0];Le&&Le!==this.audioTrack&&(this.an.info(_+" retry play success, render stream."),(He=this.sourceNode)===null||He===void 0||He.disconnect(),this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream),this.changeRenderConfig(this.isSpatial,!0),this.audioTrack=Le)}},J.prototype.startPlayingAudio=function(He){var Le,Ue;return F(this,void 0,void 0,function(){var _t,st,Dt;return T(this,function(qt){switch(qt.label){case 0:if(!this.streamID)return[2];qt.label=1;case 1:return qt.trys.push([1,3,,4]),He&&this.an.info(_+" ".concat(this.streamID," ")+He),this.isPlaying=!0,_t=this,[4,this.zegoRTC.startPlayingStream(this.streamID)];case 2:return _t.stream=qt.sent(),this.audioTrack=this.stream.getAudioTracks()[0],[3,4];case 3:if(st=qt.sent(),this.isPlaying=!1,st.code===1103049)return[2];throw st;case 4:return this.audioEl=this.audioEl||Pe.useAudioEl()||null,this.an.info(_+" ".concat(this.streamID," start using audio el ").concat((Le=this.audioEl)===null||Le===void 0?void 0:Le.id)),(Dt=(Ue=this.audioEl)===null||Ue===void 0?void 0:Ue.dom)||(this.an.error(_+" not enough audio elements"),Dt=P.VJ.createElement("audio"),this.audioEl={id:-1,dom:Dt,used:!0},Dt.setAttribute("autoplay","autoplay")),Dt.muted=!0,this.stream&&(this.sourceNode=this.audioCtx.createMediaStreamSource(this.stream)),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,6];case 5:qt.sent(),qt.label=6;case 6:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},J.prototype.stopPlayingAudio=function(He){this.isPlaying&&this.streamID?(this.an.info(_+" ".concat(this.streamID," ")+He),this.zegoRTC.stopPlayingStream(this.streamID),this.isPlaying=!1):this.streamID&&this.an.info(_+" ".concat(this.streamID," not playing, ")+He),this.stream=void 0,this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=null);var Le=this.audioEl,Ue=Le==null?void 0:Le.dom;Ue&&(Ue.srcObject=null,Ue.parentNode&&Ue.parentNode.removeChild(Ue));var _t=(Le==null?void 0:Le.id)||-1;Le&&_t>=0&&(Pe.stopUsingAudioEl(_t),this.an.info(_+" ".concat(this.streamID," stop using audio el ").concat(_t))),this.audioEl=null,this.loopbackConn&&(this.loopbackConn.close(),this.loopbackConn.onError=null)},J.prototype.isSpeakInTeam=function(He){var Le=![this.teamID,He].includes(void 0)&&this.teamID!==""&&this.teamID===He,Ue=[I.UF.Team,I.UF.All].includes(this.sendMode);return Le&&Ue},J})(K),w=(function(){var Ye=function(J,He){return Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Le,Ue){Le.__proto__=Ue}||function(Le,Ue){for(var _t in Ue)Object.prototype.hasOwnProperty.call(Ue,_t)&&(Le[_t]=Ue[_t])},Ye(J,He)};return function(J,He){if(typeof He!="function"&&He!==null)throw new TypeError("Class extends value "+String(He)+" is not a constructor or null");function Le(){this.constructor=J}Ye(J,He),J.prototype=He===null?Object.create(He):(Le.prototype=He.prototype,new Le)}})(),R=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},V=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},ae="zc.ra.4",q=(function(Ye){function J(He,Le,Ue){var _t=Ye.call(this,He,Ue)||this;return _t.an=He,_t.media=Le.media,_t.position=Le.position||null,_t.createSource(),_t.userID="custom"+new Date().getTime(),_t.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},_t}return w(J,Ye),J.prototype.createSource=function(){var He=this;if((0,ne.Fr)())return this.an.info("".concat((0,ne.Fr)()," ").concat(this.userID," not create src.")),void(this.changeRenderConfig=function(){return R(He,void 0,void 0,function(){return V(this,function(Le){return[2]})})});this.media&&(this.an.info(ae+" create el source."),this.sourceNode||(this.sourceNode=this.audioCtx.createMediaElementSource(this.media)),this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"))},J.prototype.startPlayingAudio=function(He){var Le,Ue;return R(this,void 0,void 0,function(){var _t;return V(this,function(st){switch(st.label){case 0:return this.isPlaying?(this.an.info(ae+" ".concat(this.userID," is already playing")),[2]):(He&&this.an.info(ae+" vocal ".concat(this.userID," play for ").concat(He)),this.isPlaying=!0,(0,ne.Fr)()?(this.media.muted=!1,[2]):(this.audioEl=this.audioEl||Pe.useAudioEl()||null,this.an.info(ae+" ".concat(this.userID," start using audio el ").concat((Le=this.audioEl)===null||Le===void 0?void 0:Le.id)),(_t=(Ue=this.audioEl)===null||Ue===void 0?void 0:Ue.dom)||(this.an.error(ae+" ".concat(this.userID," not enough audio elements")),_t=P.VJ.createElement("audio"),this.audioEl={id:-1,dom:_t,used:!0},_t.setAttribute("autoplay","autoplay")),_t.muted=!0,_t.setAttribute("autoplay","autoplay"),_t.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,2]));case 1:st.sent(),st.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},J.prototype.stopPlayingAudio=function(He){if(He===void 0&&(He=""),this.isPlaying&&(this.an.info(ae+" vocal ".concat(this.userID," stop for ")+He),this.isPlaying=!1),(0,ne.Fr)())this.media.muted=!0;else{this.sourceNode&&this.sourceNode.disconnect();var Le=this.audioEl,Ue=Le==null?void 0:Le.dom;Ue&&(Ue.srcObject=null,Ue.parentNode&&Ue.parentNode.removeChild(Ue));var _t=(Le==null?void 0:Le.id)||-1;Le&&_t>=0&&(Pe.stopUsingAudioEl(_t),this.an.info(ae+" ".concat(this.userID," stop using audio el ").concat(_t))),this.audioEl=null}},J.prototype.checkIfCanPlay=function(He){var Le=this.distance=this.getDistanceFromListener(He);Le===null||Le>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(Le," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},J})(K),k=(function(){var Ye=function(J,He){return Ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Le,Ue){Le.__proto__=Ue}||function(Le,Ue){for(var _t in Ue)Object.prototype.hasOwnProperty.call(Ue,_t)&&(Le[_t]=Ue[_t])},Ye(J,He)};return function(J,He){if(typeof He!="function"&&He!==null)throw new TypeError("Class extends value "+String(He)+" is not a constructor or null");function Le(){this.constructor=J}Ye(J,He),J.prototype=He===null?Object.create(He):(Le.prototype=He.prototype,new Le)}})(),G=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},xe=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},Ae="zc.ra.4",De=(function(Ye){function J(He,Le,Ue){var _t=Ye.call(this,He,Ue)||this;return _t.an=He,_t.streamView=Le.streamView,_t.position=Le.position||null,_t.createSource(),_t.userID="stream"+new Date().getTime(),_t.config={needLoopback:!1,useGain:!1,playOnAudioContext:!1,useWebAudio:!0},_t.streamView.on("_trackChange",function(st,Dt){st==="audio"&&(Dt?_t.createSource(!0):_t.an.error("".concat(Ae," ").concat(_t.userID," audio track lost")))}),_t}return k(J,Ye),J.prototype.createSource=function(He){var Le=this;if(He===void 0&&(He=!1),(0,ne.Fr)())return this.an.info("".concat(Ae," ").concat(this.userID," not create src.")),this.changeRenderConfig=function(){return G(Le,void 0,void 0,function(){return xe(this,function(_t){return[2]})})},!1;if(!this.streamView)return!1;if(this.an.info(Ae+" create view source. trackChanged: "+He),!this.sourceNode||He){var Ue=this.streamView.v.getAudioNodeAndStopRender();if(!Ue)return this.an.error(Ae+" create view source failed."),!1;this.sourceNode&&this.sourceNode.disconnect(),this.sourceNode=Ue,this.changeRenderConfig(this.isSpatial,!0)}return this.distance!==null&&this.distance<this.maxDistance&&this.startPlayingAudio("in range"),!0},J.prototype.startPlayingAudio=function(He){var Le,Ue;return G(this,void 0,void 0,function(){var _t;return xe(this,function(st){switch(st.label){case 0:return this.isPlaying?(this.an.info(Ae+" ".concat(this.userID," is already playing")),[2]):(He&&this.an.info(Ae+" vocal ".concat(this.userID," play for ").concat(He)),this.isPlaying=!0,(0,ne.Fr)()?(this.streamView.setAudioMuted(!1),[2]):(this.audioEl=this.audioEl||Pe.useAudioEl()||null,this.an.info(Ae+" ".concat(this.userID," start using audio el ").concat((Le=this.audioEl)===null||Le===void 0?void 0:Le.id)),(_t=(Ue=this.audioEl)===null||Ue===void 0?void 0:Ue.dom)||(this.an.error(Ae+" ".concat(this.userID," not enough audio elements")),_t=P.VJ.createElement("audio"),this.audioEl={id:-1,dom:_t,used:!0},_t.setAttribute("autoplay","autoplay")),_t.muted=!0,_t.setAttribute("autoplay","autoplay"),_t.setAttribute("id","zg-audio-source-"+this.userID),this.sourceNode?[4,this.changeRenderConfig(this.isSpatial,!0)]:[3,2]));case 1:st.sent(),st.label=2;case 2:return this.audioCtx.state==="suspended"&&this.audioCtx.resume(),[2]}})})},J.prototype.stopPlayingAudio=function(He){if(He===void 0&&(He=""),this.isPlaying&&(this.an.info(Ae+" vocal ".concat(this.userID," stop for ")+He),this.isPlaying=!1),(0,ne.Fr)())this.streamView.setAudioMuted(!0);else{this.sourceNode&&this.sourceNode.disconnect();var Le=this.audioEl,Ue=Le==null?void 0:Le.dom;Ue&&(Ue.srcObject=null,Ue.parentNode&&Ue.parentNode.removeChild(Ue));var _t=(Le==null?void 0:Le.id)||-1;Le&&_t>=0&&(Pe.stopUsingAudioEl(_t),this.an.info(Ae+" ".concat(this.userID," stop using audio el ").concat(_t))),this.audioEl=null}},J.prototype.checkIfCanPlay=function(He){var Le=this.distance=this.getDistanceFromListener(He);Le===null||Le>this.maxDistance||this.maxDistance===0?this.stopPlayingAudio("out of range. ".concat(Le," > ").concat(this.maxDistance)):this.startPlayingAudio("in range")},J})(K),Ie=Z(166),be=(function(){function Ye(){this.cn={}}return Ye.getInstance=function(){return Ye.instance||(Ye.instance=new Ye),Ye.instance},Ye.prototype.addEventHandler=function(J,He){if(this.cn[J]||(this.cn[J]=[]),!(0,Qe.JO)(He))throw new Error("Params callBack is not a Function");return this.cn[J].indexOf(He)==-1&&this.cn[J].push(He),!0},Ye.prototype.removeEventHandler=function(J,He){return!!this.cn[J]&&(this.cn[J]=He?this.cn[J].filter(function(Le){return Le!==He}):[],!0)},Ye.prototype.emit=function(J){for(var He=[],Le=1;Le<arguments.length;Le++)He[Le-1]=arguments[Le];this.cn[J]&&this.cn[J].forEach(function(Ue){try{setTimeout(function(){Ue.apply(void 0,He)},0)}catch(_t){console.error('Fail to execute callback of event "'.concat(J,'" : ').concat(_t))}})},Ye.prototype.reset=function(){this.cn={}},Ye})(),qe=be,Ve=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},pe=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},j,B=(function(){function Ye(J,He){var Le=this;this.raMode=I.kf.World,this.recvRange=null,this.position=null,this.forwardAxis=[1,0,0],this.upAxis=[0,0,1],this.audioStream=null,this.enableMic=!1,this.isPublishing=!1,this.streamID=null,this.isDenoise=!1,this.denoiseMode=Ie.PP.AI,this.voiceChanger=null,this.voiceParam=null,this.isUpdated=!0,this.zegoRTC=He,this.audioCtx=J,this.audioListener=this.audioCtx.listener,this.eventHandler=qe.getInstance(),this.zegoRTC.on("publisherStateUpdate",function(Ue){var _t=Ue.state,st=Ue.errorCode,Dt=Ue.extendedData,qt=Ue.streamID.match(/(.*)_(.*)/);if((qt==null?void 0:qt.length)===3){if(Le.userID!==qt[1])return;_t==="NO_PUBLISH"?(Le.isPublishing=!1,Le.stopPublishingStream()):(Le.isPublishing=!0,Le.isUpdated||(Le.an.info(_+" resend stream info"),Le.updateSteamExtraInfo())),Le.eventHandler.emit("microphoneStateUpdate",{NO_PUBLISH:I.eI.Off,PUBLISH_REQUESTING:I.eI.TurningOn,PUBLISHING:I.eI.On}[_t],st,Dt)}}),this.zegoRTC.on("deviceError",function(Ue,_t){return Ve(Le,void 0,void 0,function(){var st,Dt;return pe(this,function(qt){switch(qt.label){case 0:return this.an.info(_+" device fail ".concat(Ue," ").concat(_t," ").concat(!!this.audioStream," ").concat(this.micID)),this.audioStream?[4,this.zegoRTC.enumDevices()]:[2];case 1:return st=qt.sent(),Dt=st.microphones,this.micID||Dt.length!==0?Ue!==1106009?[3,3]:[4,this.zegoRTC.useAudioDevice(this.audioStream,this.micID||Dt[0].deviceID)]:[2];case 2:qt.sent(),qt.label=3;case 3:return[2]}})})})}return Object.defineProperty(Ye.prototype,"recvMode",{get:function(){return this._recvMode!==void 0?this._recvMode:[I.kf.World,I.kf.SecretTeam].includes(this.raMode)?I.ju.All:I.ju.Team},set:function(J){this._recvMode=J},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"sendMode",{get:function(){return this._sendMode!==void 0?this._sendMode:this.raMode===I.kf.World?I.UF.All:I.UF.Team},set:function(J){this._sendMode=J},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"an",{get:function(){return this.zegoRTC.logger},enumerable:!1,configurable:!0}),Ye.getInstance=function(J,He){return Ye.instance||(Ye.instance=new Ye(J,He)),Ye.instance},Ye.prototype.updateSelfPosition=function(J,He,Le){this.position=J,this.forwardAxis=He,Array.isArray(Le)&&(this.upAxis=Le),this.updateListenerEffect()},Ye.prototype.updateListenerEffect=function(){this.position&&(this.audioListener.positionX?(this.audioListener.positionX.value=this.position[1],this.audioListener.positionY.value=this.position[2],this.audioListener.positionZ.value=-this.position[0]):this.audioListener.setPosition(this.position[1],this.position[2],-this.position[0]),this.audioListener.forwardX?(this.audioListener.forwardX.value=this.forwardAxis[1],this.audioListener.forwardY.value=this.forwardAxis[2],this.audioListener.forwardZ.value=-this.forwardAxis[0],this.audioListener.upX.value=this.upAxis[1],this.audioListener.upY.value=this.upAxis[2],this.audioListener.upZ.value=-this.upAxis[0]):this.audioListener.setOrientation(this.forwardAxis[1],this.forwardAxis[2],-this.forwardAxis[0],this.upAxis[1],this.upAxis[2],-this.upAxis[0]))},Ye.prototype.startPublishingStream=function(){var J=this;this.enableMic?this.an.warn(_+" mic is already enabled"):(this.enableMic=!0,this.zegoRTC.createStream({camera:{video:!1,audio:!0,audioInput:this.micID||void 0,audioBitrate:30}}).then(function(He){return Ve(J,void 0,void 0,function(){return pe(this,function(Le){if(!this.userID)throw this.zegoRTC.destroyStream(He),this.enableMic=!1,Error("Enable mic failed. Please log in room first.");return this.audioStream&&this.audioStream!==He&&this.zegoRTC.destroyStream(this.audioStream),this.audioStream=He,this.isDenoise&&(this.enableDenoise(this.isDenoise),this.denoiseMode!==Ie.PP.AIBalanced&&this.denoiseMode!=Ie.PP.AIAggressive||this.setAiDenoiseMode(this.denoiseMode)),this.voiceChanger!==null&&this.setVoiceChangerPreset({voiceChanger:this.voiceChanger}),this.voiceParam!==null&&this.setVoiceChangerPreset({voiceParam:this.voiceParam}),this.streamID=this.userID+"_"+Date.now(),this.zegoRTC.startPublishingStream(this.streamID,He,{extraInfo:JSON.stringify(this.getExtraInfo())}),[2]})})}).catch(function(He){throw J.audioStream=null,J.enableMic=!1,He}))},Ye.prototype.stopPublishingStream=function(){this.isPublishing&&this.streamID&&this.zegoRTC.stopPublishingStream(this.streamID),this.isPublishing=!1,this.audioStream&&(this.zegoRTC.destroyStream(this.audioStream),this.audioStream=null),this.enableMic=!1},Ye.prototype.setCustomMode=function(J,He){var Le=!1,Ue=!1,_t=!1;return He!==this.recvMode&&(this.recvMode=He,_t=!0),J!==this.sendMode&&(this.sendMode=J,Le=!0,Ue=!0),Le&&this.updateSteamExtraInfo(),{sendChange:Ue,recvChange:_t}},Ye.prototype.setNormalMode=function(J){this.raMode=J,this.updateSteamExtraInfo()},Ye.prototype.setTeamID=function(J){this.teamID=J,this.updateSteamExtraInfo()},Ye.prototype.updateSteamExtraInfo=function(){var J=this;this.streamID&&this.isPublishing&&(this.isUpdated=!1,this.an.info(_+" update stream info"),this.zegoRTC.setStreamExtraInfo(this.streamID,JSON.stringify(this.getExtraInfo())).then(function(He){He.errorCode===0&&(J.an.info(_+" update stream info success"),J.isUpdated=!0)}))},Ye.prototype.getExtraInfo=function(){var J,He={range_audio_team_id:this.teamID||"",range_audio_mode:(J=this.raMode,{0:1,1:2,2:3}[J]),r_a_s_flag:1};return this._sendMode===void 0&&this.raMode!==I.kf.World||(He.r_a_speak=this.sendMode),He},Ye.prototype.reset=function(){this.audioStream&&this.stopPublishingStream(),this.userID=void 0,this.streamID=null},Ye.prototype.enableDenoise=function(J){var He=this;return this.audioStream&&this.zegoRTC._enableAiDenoise(this.audioStream,J).catch(function(Le){He.isDenoise=!1;var Ue=Le||{};He.eventHandler.emit("aiDenoiseError",Ue.errorCode,Ue.extendedData)}),this.isDenoise=J,!0},Ye.prototype.setAiDenoiseMode=function(J){var He=this;return this.audioStream&&this.zegoRTC.setAiDenoiseMode(this.audioStream,J).catch(function(Le){He.denoiseMode=Ie.PP.AI;var Ue=Le||{};He.eventHandler.emit("aiDenoiseError",Ue.errorCode,Ue.extendedData)}),this.denoiseMode=J,!0},Ye.prototype.setVoiceChangerPreset=function(J){var He=this;return this.audioStream&&this.zegoRTC.setVoiceChangerPreset(this.audioStream,J).catch(function(Le){He.voiceChanger=null;var Ue=Le||{};He.eventHandler.emit("voiceChangerError",Ue.errorCode,Ue.extendedData)}),"voiceChanger"in J&&J.voiceChanger!==void 0?(this.voiceChanger=J.voiceChanger,this.voiceParam=null):"voiceParam"in J&&J.voiceParam!==void 0&&(this.voiceParam=J.voiceParam,this.voiceChanger=null),!0},Ye})(),nt=function(Ye,J,He){for(var Le,Ue=0,_t=J.length;Ue<_t;Ue++)!Le&&Ue in J||(Le||(Le=Array.prototype.slice.call(J,0,Ue)),Le[Ue]=J[Ue]);return Ye.concat(Le||Array.prototype.slice.call(J))},he="zc.ra.2",it=(function(){function Ye(J,He){this.an=J,this.isEnable=!1,this.interval=100,this.timer=null,this.audioSourceList=[],this.hasChanged=!1,this.userChanged=!1,this.updateUserInterval=1e3,this.updateUserTimer=null,this.audioSourceUpdate=!1,this._maxPlayingQuantity=20,this.allAudioSourceList=[],this.audioSourceWithinRangeList=[],this.localUserList=[],this.hn=He}return Ye.getInstance=function(J,He){return Ye.instance||(Ye.instance=new Ye(J,He)),Ye.instance},Ye.prototype.setAudioSourceUpdate=function(J){this.audioSourceUpdate=J},Ye.prototype.setListener=function(J){this.hn=J,this.hasChanged=!0,this.userChanged=!0},Ye.prototype.setAudioSourceList=function(J){this.audioSourceList=J,this.an.info("".concat(he," set src list: [").concat(J.map(function(He){return He.userID}).join(","),"]")),this.hasChanged=!0},Ye.prototype.setAllAudioSourceList=function(J){J&&(this.allAudioSourceList=J),this.userChanged=!0},Ye.prototype.startPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.hasChanged=!0,this.playAudioTask()},Ye.prototype.playAudioTask=function(){var J=this;this.hasChanged&&(this.hasChanged=!1,this.handlePlayAudioTask()),this.timer=window.setTimeout(function(){J.playAudioTask()},this.interval)},Ye.prototype.handlePlayAudioTask=function(){var J=this;if(this.isEnable){this.an.info("".concat(he," handler task start"));var He=nt([],this.audioSourceList),Le=0,Ue=this.hn.recvMode;if([I.ju.Team,I.ju.All].includes(Ue)){var _t=this.getTeamAudioSourceGroup();He=_t.otherList,_t.teamList.forEach(function(Dt){Le<J._maxPlayingQuantity&&(Dt.isPlaying||Dt.startPlayingAudio("play for team"),Le++)})}var st=[I.ju.World,I.ju.All].includes(Ue);st&&(He.forEach(function(Dt){Dt.distance=Dt.getDistanceFromListener(J.hn)}),He.sort(function(Dt,qt){return Dt.distance===null?1:qt.distance===null||Dt.distance<qt.distance?-1:Dt.distance>qt.distance?1:0})),He.forEach(function(Dt){var qt=[I.UF.All,I.UF.World].includes(Dt.sendMode)&&Dt.distance!==null&&(J.hn.recvRange===null||Dt.distance<=J.hn.recvRange);if(st&&Le<J._maxPlayingQuantity&&qt)Dt.isPlaying||Dt.startPlayingAudio("play for range"),Le++;else{var Lt="stop for mode or range. mode: ".concat(Dt.sendMode,", range: ").concat(Dt.distance," > ").concat(J.hn.recvRange);Dt.stopPlayingAudio(Lt)}}),this.an.info(he+" playing quantity: ".concat(Le,"."))}else this.stopPlayingAudioStream()},Ye.prototype.startCheckUserInRange=function(){this.an.info(he+" start user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null),this.userChanged=!0,this.userCheckTask()},Ye.prototype.stopCheckUserInRange=function(){this.an.info(he+" stop user check"),this.updateUserTimer&&(clearTimeout(this.updateUserTimer),this.updateUserTimer=null)},Ye.prototype.userCheckTask=function(){var J=this;this.userChanged&&(this.userChanged=!1,this.handleUserCheckTask()),this.updateUserTimer=window.setTimeout(function(){J.userCheckTask()},this.updateUserInterval)},Ye.prototype.handleUserCheckTask=function(){var J=this;if(this.audioSourceUpdate){var He=[];this.allAudioSourceList.forEach(function(Le){Le.distance=Le.getDistanceFromListener(J.hn);var Ue=Le.distance!==null&&(J.hn.recvRange===null||Le.distance<=J.hn.recvRange),_t=!!J.localUserList.find(function(st){return st.userID===Le.userID});Ue&&_t&&He.push({userID:Le.userID,position:Le.position})}),this.checkAudioSourceListDiff(He,this.audioSourceWithinRangeList)&&this.hn.eventHandler.emit("audioSourceWithinRangeUpdate",He),this.audioSourceWithinRangeList=He}},Ye.prototype.getTeamAudioSourceGroup=function(){var J=this,He=[],Le=[];return this.audioSourceList.forEach(function(Ue){Ue.isSpeakInTeam(J.hn.teamID)?He.push(Ue):Le.push(Ue)}),{teamList:He,otherList:Le}},Ye.prototype.stopPlayingAudioStream=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.audioSourceList.forEach(function(J){J.stopPlayingAudio("stop for all stream")})},Ye.prototype.setLocalUserList=function(J){this.localUserList=J,this.userChanged=!0},Ye.prototype.checkAudioSourceListDiff=function(J,He){for(var Le,Ue=0;Ue<J.length;Ue++){Le=!1;for(var _t=0;_t<He.length;_t++)if(J[Ue].userID===He[_t].userID){Le=!0;break}if(!Le)return!0}for(var st=0;st<He.length;st++){Le=!1;for(var Dt=0;Dt<J.length;Dt++)if(He[st].userID===J[Dt].userID){Le=!0;break}if(!Le)return!0}return!1},Ye})();function wt(Ye){return!isNaN(Number(Ye))&&Ye!==""&&Number.MAX_SAFE_INTEGER>=Number(Ye)&&Number(Ye)>=-Number.MAX_SAFE_INTEGER}function Ee(Ye){if(Array.isArray(Ye)){for(var J=0;J<3;J++)if(!wt(Ye[J]))return!1;return!0}return!1}(function(Ye){Ye[Ye.Normal=0]="Normal",Ye[Ye.Custom=1]="Custom"})(j||(j={}));var Oe=function(){return Oe=Object.assign||function(Ye){for(var J,He=1,Le=arguments.length;He<Le;He++)for(var Ue in J=arguments[He])Object.prototype.hasOwnProperty.call(J,Ue)&&(Ye[Ue]=J[Ue]);return Ye},Oe.apply(this,arguments)},rt=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},me=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},Se=function(Ye,J,He){for(var Le,Ue=0,_t=J.length;Ue<_t;Ue++)!Le&&Ue in J||(Le||(Le=Array.prototype.slice.call(J,0,Ue)),Le[Ue]=J[Ue]);return Ye.concat(Le||Array.prototype.slice.call(J))};function ge(){var Ye;return rt(this,void 0,void 0,function(){var J,He,Le;return me(this,function(Ue){switch(Ue.label){case 0:return(J=navigator==null?void 0:navigator.userAgentData)?[4,J.getHighEntropyValues(["platformVersion"]).catch(function(){})]:[2,{platform:"",majorPlatformVersion:0}];case 1:return He=Ue.sent()||{},Le=parseInt((Ye=He.platformVersion)===null||Ye===void 0?void 0:Ye.split(".")[0]),[2,{platform:He.platform,majorPlatformVersion:Le}]}})})}var ve="zc.ra.0",ee=(function(){function Ye(J,He){var Le=this;this.an=He,this.isSpatial=!1,this.audioSourceList=[],this.audioSourceUpdate=!1,this.localUserList=[],this.speakingUserIdList=[],this.vocalSourceMap=new Map,this.volume=1,this.speaker="",this.ln=null,this.supportSpeakerSet=!1,this.isHide=!1,this.eventHandler={visibilitychange:function(){return rt(Le,void 0,void 0,function(){var Ue,_t,st,Dt,qt,Lt=this;return me(this,function(ut){switch(ut.label){case 0:return Se(Se([],this.vocalSourceList,!0),this.audioSourceList).forEach(function(Yt){Yt.inBackground(P.VJ.hidden),Lt.isHide=P.VJ.hidden}),Ue=function(){Se(Se([],Lt.vocalSourceList,!0),Lt.audioSourceList).forEach(function(Yt){Yt.changeRenderConfig(Lt.isOpen3D(Yt),!0,!1,!1)})},P.VJ.hidden?(_t=(0,ne.H8)()&&(0,ne.Fr)(),[4,ge()]):[3,2];case 1:return st=ut.sent(),Dt=st.platform==="Windows"&&st.majorPlatformVersion>=13,_t||Dt?(this.an.warn("".concat(ve," mobile chrome hide page and stop web audio.")),Ue(),[2]):((qt=this.audioCtx.state)!=="running"?(this.an.info("".concat(ve," hidden ctx: ").concat(qt,", resume ctx")),this.audioCtx.resume(),setTimeout(function(){var Yt=Lt.audioCtx.state;Lt.isHide&&(Yt==="running"?Lt.an.info("".concat(ve," hidden ctx: ").concat(Yt,".")):(Lt.an.warn("".concat(ve," hidden ctx: ").concat(Yt,", ctx resume failed. stop web audio.")),Ue()))},2e3)):this.an.info("".concat(ve," hidden ctx: ").concat(qt,".")),[3,3]);case 2:this.audioCtx.resume(),this.audioSourceList.forEach(function(Yt){var wn,Rn;Yt.isPlaying&&((wn=Yt.audioEl)===null||wn===void 0||wn.dom.pause(),(Rn=Yt.audioEl)===null||Rn===void 0||Rn.dom.play().catch(function(){Lt.an.warn("".concat(ve," show page and  ").concat(Yt.userID," replay failed."))}))}),ut.label=3;case 3:return[2]}})})}},this.zegoRTC=J,P.VJ.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1),this.zegoRTC.on("roomStreamUpdate",function(Ue,_t,st){var Dt=st.map(function(Lt){var ut=Le.getStreamInfo(Lt.extraInfo,Lt.streamID),Yt=ut.isRangeAudioStream,wn=ut.teamID,Rn=ut.raMode,jn=ut.sendMode;return Oe(Oe({},Lt),{isRangeAudioStream:Yt,teamID:wn,raMode:Rn,sendMode:jn})}).filter(function(Lt){return Lt.isRangeAudioStream}),qt=Dt.map(function(Lt){return Lt.user.userID});_t==="DELETE"?Le.speakingUserIdList=Le.speakingUserIdList.filter(function(Lt){var ut=!qt.includes(Lt);if(!ut){var Yt=Le.audioSourceMap[Lt];Yt&&Yt.stopPlayingAudio("stop for stream delete")}return ut}):_t==="ADD"&&(Le.speakingUserIdList=Le.speakingUserIdList.concat(qt),Dt.forEach(function(Lt){var ut=Lt.user.userID,Yt=Le.audioSourceMap[ut],wn=Lt.teamID,Rn=Lt.raMode,jn=Lt.sendMode;if(Yt)Yt.streamID!==Lt.streamID&&(Yt.stopPlayingAudio("stop for old stream"),Yt.streamID=Lt.streamID),Rn!==void 0&&(Yt.raMode=Rn),wn!==Yt.teamID&&(Yt.teamID=wn),Yt.changeRenderConfig(Le.isOpen3D(Yt));else{var Mn=new E(Le.an,{userID:ut,teamID:wn,raMode:Rn,sendMode:jn},{audioCtx:Le.audioCtx,zegoRTC:Le.zegoRTC,isSpatial:Le.isSpatial,maxDistance:Le.hn.recvRange,volume:Le.volume,speaker:Le.speaker,isHide:Le.isHide});Mn.streamID=Lt.streamID,Le.audioSourceList.push(Mn),Le.playStreamHandler.hasChanged=!0}})),Le.playStreamHandler.setAudioSourceList(Le.speakingAudioSourceList)}),this.zegoRTC.on("playerStateUpdate",function(Ue){var _t=Le.audioSourceList.find(function(st){return st.streamID===Ue.streamID});_t&&(Ue.state==="NO_PLAY"?_t.isPlaying=!1:(Ue.state==="PLAYING"&&_t.checkTrackChanged(),_t.isPlaying=!0))}),this.zegoRTC.on("streamExtraInfoUpdate",function(Ue,_t){Le.an.info(ve+" recv extra info: "+JSON.stringify(_t));var st=!1;_t.forEach(function(Dt){var qt=Le.audioSourceMap[Dt.user.userID];if(qt&&qt.streamID){var Lt=Le.getStreamInfo(Dt.extraInfo,Dt.streamID),ut=Lt.teamID,Yt=Lt.raMode,wn=Lt.sendMode;ut!==qt.teamID&&(qt.teamID=ut,st=!0),Yt!==void 0&&(qt.raMode=Yt,st=!0),qt.sendMode!==wn&&(qt.sendMode=wn,st=!0),Le.playStreamHandler.hasChanged=!0}}),st&&Le.enableSpatializer(Le.isSpatial)}),this.zegoRTC.RTM._on("_roomStateUpdate",function(Ue,_t){_t==="CONNECTED"?(Le.roomID=Ue,Le.hn.userID=Le.zegoRTC.RTM.getUserID(),Le.playStreamHandler.hasChanged=!0,Le.playStreamHandler.userChanged=!0):_t==="DISCONNECTED"&&(Le.roomID=void 0,Le.hn.reset(),Le.enableSpeaker(!1),Le.audioSourceList=[],Le.playStreamHandler.setAudioSourceList([]),Le.localUserList=[],Le.playStreamHandler.setLocalUserList([]))}),this.zegoRTC.RTM.on("roomUserUpdate",function(Ue,_t,st){var Dt;Le.an.info(ve+" roomUserUpdate: "+Ue+_t+JSON.stringify(st)),_t==="ADD"?(Dt=Le.localUserList).push.apply(Dt,st):_t==="DELETE"&&st.forEach(function(qt){Le.localUserList=Le.localUserList.filter(function(Lt){return Lt.userID!==qt.userID})}),Le.playStreamHandler.setLocalUserList(Le.localUserList)}),this.zegoRTC.on("publishQualityUpdate",function(Ue,_t){var st=Ue.match(/(.*)_(.*)/);if((st==null?void 0:st.length)===3){var Dt=st[1];if(Le.hn.userID!==Dt)return;var qt=Oe({},_t.audio);Le.eventManager.emit("publishQualityUpdate",Dt,qt)}}),this.zegoRTC.on("playQualityUpdate",function(Ue,_t){var st,Dt=Ue.match(/(.*)_(.*)/);if((Dt==null?void 0:Dt.length)===3){var qt=Dt[1],Lt=_t.audio,ut=_t.peerToPeerDelay,Yt=_t.peerToPeerPacketLostRate;if(!(!((st=Le.audioSourceList)===null||st===void 0)&&st.some(function(Rn){return Rn.userID===qt})))return;var wn=Oe(Oe({},Lt),{peerToPeerDelay:ut,peerToPeerPacketLostRate:Yt});Le.eventManager.emit("playQualityUpdate",qt,wn)}}),this.ln=this.dn(),this.hn=B.getInstance(this.audioCtx,this.zegoRTC),this.playStreamHandler=it.getInstance(this.an,this.hn),this.eventManager=qe.getInstance()}return Object.defineProperty(Ye.prototype,"audioSourceMap",{get:function(){return this.audioSourceList.reduce(function(J,He){return He.userID&&(J[He.userID]=He),J},{})},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"speakingAudioSourceList",{get:function(){var J=this;return this.audioSourceList.filter(function(He){return J.speakingUserIdList.includes(He.userID)})},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"vocalSourceList",{get:function(){for(var J=[],He=this.vocalSourceMap.values(),Le=0;Le<this.vocalSourceMap.size;Le++)J.push(He.next().value);return J},enumerable:!1,configurable:!0}),Object.defineProperty(Ye.prototype,"playingAudioSourceList",{get:function(){return this.audioSourceList.filter(function(J){return J.isPlaying})},enumerable:!1,configurable:!0}),Ye.prototype.dn=function(){var J=this,He=new(window.AudioContext||window.webkitAudioContext);return He.addEventListener("statechange",function(){He.state==="suspended"&&(J.an.info(ve+" audio context suspended"),He.resume())}),He},Object.defineProperty(Ye.prototype,"audioCtx",{get:function(){return this.ln||(this.ln=this.dn()),this.ln},enumerable:!1,configurable:!0}),Ye.getInstance=function(J,He){return Ye.instance||(Ye.instance=new Ye(J,He)),Ye.instance},Ye.prototype.resumeAudioContext=function(){return rt(this,void 0,void 0,function(){var J=this;return me(this,function(He){return[2,new P.l3(function(Le){Pe.generateEls(),J.audioCtx.state==="running"&&Le(!0),J.audioCtx.onstatechange=function(){J.audioCtx.state==="running"&&Le(!0)},J.audioCtx.resume(),J.an.info(ve+" resume audio ctx"),setTimeout(function(){Le(!1)},3e3)})]})})},Ye.prototype.getAudioContextState=function(){return this.audioCtx.state},Ye.prototype.getStreamInfo=function(J,He){var Le=void 0,Ue=null;try{Ue=JSON.parse(J)}catch{return this.an.warn(ve+" parse room extra info failed. ".concat(He," is not ra stream.")),{isRangeAudioStream:!1}}if(!Ue.hasOwnProperty("range_audio_team_id")||!Ue.hasOwnProperty("range_audio_mode"))return this.an.warn(ve+" extra info has no mode. ".concat(He," is not ra stream.")),{isRangeAudioStream:!1};Le={1:0,2:1,3:2}[Ue.range_audio_mode];var _t=Ue.r_a_s_flag,st={teamID:Ue.range_audio_team_id||void 0,raMode:Le,isRangeAudioStream:_t===void 0||_t===1};return Ue.hasOwnProperty("r_a_speak")&&(st.sendMode=Ue.r_a_speak),this.an.info("".concat(ve," ").concat(He," parse extra info: ").concat(JSON.stringify(st),".")),st},Ye.prototype.setAudioReceiveRange=function(J){if(!wt(J))throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");if(J=Number(J),(J=Number(J))<0)throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");this.an.info(ve+" set receive range: "+J),this.hn.recvRange=J,this.audioSourceList.forEach(function(He){He.setMaxDistance(J)}),this.playStreamHandler.hasChanged=!0,this.playStreamHandler.userChanged=!0},Ye.prototype.updateSelfPosition=function(J,He,Le,Ue){var _t=this,st=function(Dt){return"Failed to execute 'updateSelfPosition': Argument '".concat(Dt,`' requires an array of type number."`)};if(!Ee(J))throw new Error(st("position"));if(!Ee(He))throw new Error(st("axisForward"));if(!Ee(Le))throw new Error(st("axisRight"));if(!Ee(Ue))throw new Error(st("axisUp"));this.an.info(ve+" set self position [".concat(J,"]")),this.hn&&(this.hn.updateSelfPosition(J,He,Ue),this.vocalSourceMap.forEach(function(Dt){Dt.checkIfCanPlay(_t.hn)})),this.playStreamHandler.setListener(this.hn)},Ye.prototype.updateAudioSource=function(J,He){if(J=String(J),!Ee(He))throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");var Le=this.audioSourceMap[J];Le?Le.setPosition(He):(Le=new E(this.an,{userID:J,position:He},{audioCtx:this.audioCtx,zegoRTC:this.zegoRTC,isSpatial:this.isSpatial,maxDistance:this.hn.recvRange,volume:this.volume,speaker:this.speaker,isHide:this.isHide}),this.enableSpatializer(this.isSpatial),this.audioSourceList.push(Le)),this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList),this.playStreamHandler.setAllAudioSourceList(this.audioSourceList)},Ye.prototype.enableMicrophone=function(J){if(J===void 0&&(J=!0),!this.hn.userID)throw new Error("Enable mic failed. Please log in room first.");return J?this.hn.startPublishingStream():this.hn.stopPublishingStream()},Ye.prototype.selectMic=function(J){return rt(this,void 0,void 0,function(){var He,Le,Ue,_t;return me(this,function(st){switch(st.label){case 0:if(!(0,Qe.QP)(J)&&!(0,Qe.TE)(J))throw new Error("Select mic failed. DeviceID error.");if(Le=(He=this.hn).audioStream,Ue=He.isPublishing,this.an.info(ve+" select mic: "+J),!Le||!Ue)return[3,5];_t={errorCode:0},st.label=1;case 1:return st.trys.push([1,3,,4]),[4,this.zegoRTC.useAudioDevice(Le,J||"")];case 2:return _t=st.sent(),[3,4];case 3:return st.sent(),[2,!1];case 4:return _t.errorCode===0?(this.hn.micID=J,[2,!0]):[2,!1];case 5:return this.hn.micID=J,[2,!0];case 6:return[2]}})})},Ye.prototype.enableSpeaker=function(J){if(J===void 0&&(J=!0),J&&!this.roomID)throw new Error("Enable speaker failed. Please log in room first.");this.playStreamHandler.isEnable=J,this.an.info(ve+" enable speaker: "+J),J?(Pe.generateEls(),this.playStreamHandler.startPlayingAudioStream()):this.playStreamHandler.stopPlayingAudioStream()},Ye.prototype.enableSpatializer=function(J){var He=this;J===void 0&&(J=!0),this.an.info(ve+" set spatializer: "+J),this.isSpatial=!!J,this.audioSourceList.forEach(function(Le){Le.changeRenderConfig(He.isOpen3D(Le))}),this.vocalSourceList.forEach(function(Le){Le.changeRenderConfig(J)}),J&&this.hn.updateListenerEffect()},Ye.prototype.enableAiDenoise=function(J){if(this.an.info(ve+" set ai denoise: "+J),!(0,Qe.dd)(J))return!1;var He=(0,ne.Fr)();return(He||window.AudioWorklet)&&window.WebAssembly&&(window.AudioContext||(window==null?void 0:window.webkitAudioContext)).prototype.createScriptProcessor?this.hn.enableDenoise(!!J):(this.an.error(ve+"".concat(He&&" mobile"," browser dose not support ai denoise.")),!1)},Ye.prototype.setAiDenoiseMode=function(J){return J===void 0&&(J=Ie.PP.AI),this.hn.setAiDenoiseMode(J)},Ye.prototype.setVoiceChangerPreset=function(J){this.an.info(ve+" set voice changer preset: "+JSON.stringify(J));var He=(0,ne.Fr)();return(He||window.AudioWorklet)&&window.WebAssembly&&(window.AudioContext||(window==null?void 0:window.webkitAudioContext)).prototype.createScriptProcessor?this.hn.setVoiceChangerPreset(J):(this.an.error(ve+"".concat(He&&" mobile"," browser dose not support voice changer.")),!1)},Ye.prototype.setRangeAudioTeamID=function(J){this.an.info(ve+" set team id: "+J),this.hn.setTeamID(J),this.enableSpatializer(this.isSpatial),this.playStreamHandler.hasChanged=!0},Ye.prototype.setRangeAudioMode=function(J){if(this.modeType===j.Custom)throw new Error("Failed to execute 'setRangeAudioMode': already use 'setRangeAudioCustomMode'.");this.modeType=j.Normal,this.an.info(ve+" set mode "+J),this.hn.setNormalMode(J),this.playStreamHandler.hasChanged=!0},Ye.prototype.setCustomMode=function(J,He){if(this.modeType===j.Normal)throw new Error("Failed to execute 'setRangeAudioCustomMode': already use 'setRangeAudioMode'.");this.modeType=j.Custom,this.an.info(ve+" set custom mode: ".concat(J,", ").concat(He));var Le=this.hn.setCustomMode(J,He).recvChange;this.playStreamHandler.hasChanged=!0,Le&&this.enableSpatializer(this.isSpatial)},Ye.prototype.setAudioVolume=function(J){var He=this;if(this.an.info(ve+" set volume ".concat(J)),J<0)throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");this.volume=J/100,this.audioSourceList.forEach(function(Le){Le.setVolume(He.volume)})},Ye.prototype.selectSpeaker=function(J){var He=this;if(J===void 0&&(J=""),!(0,Qe.QP)(J))throw new Error("Select speaker failed. Device ID error.");if(!this.supportSpeakerSet){if(!P.VJ.createElement("audio").setSinkId)throw new Error("Failed to execute 'selectSpeaker': browser not support.");this.supportSpeakerSet=!0}this.speaker=J,this.an.info(ve+" set speaker: "+J),J===""&&this.an.warn(ve+" set speaker to be default. "),this.audioSourceList.find(function(Le){return rt(He,void 0,void 0,function(){var Ue;return me(this,function(_t){switch(_t.label){case 0:return _t.trys.push([0,2,,3]),[4,Le.setSpeaker(J)];case 1:return _t.sent(),[3,3];case 2:return Ue=_t.sent(),this.an.warn(ve+" set speaker failed. id: ".concat(J,", error: ").concat(Ue)),[2,!0];case 3:return[2,!1]}})})})},Ye.prototype.setPositionUpdateFrequency=function(J){if(!(J>=15))throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");this.playStreamHandler.interval=Number(J)||100,this.an.info(ve+" set interval: "+J)},Ye.prototype.on=function(J,He){return this.eventManager.addEventHandler(J,He)},Ye.prototype.off=function(J,He){return this.eventManager.removeEventHandler(J,He)},Ye.prototype.enableAudioSourceUpdateChecker=function(J,He){if(this.an.info(ve+" set source update: "+J),this.audioSourceUpdate=J,this.playStreamHandler.setAudioSourceUpdate(J),He&&(0,Qe.Cs)(He.frequency)){if(He.frequency<50)throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +].");this.playStreamHandler.updateUserInterval=Number(He.frequency)||1e3,this.an.info(ve+" set interval: "+He.frequency)}J?this.playStreamHandler.startCheckUserInRange():this.playStreamHandler.stopCheckUserInRange()},Ye.prototype.getVocalSource=function(J,He){var Le=this.vocalSourceMap.get(J);if(!Le){var Ue={audioCtx:this.audioCtx,isSpatial:this.isSpatial,maxDistance:He||0,volume:this.volume,speaker:this.speaker,isHide:this.isHide};Le=(0,Qe.Si)(J)?new q(this.an,{media:J},Ue):new De(this.an,{streamView:J},Ue)}return this.vocalSourceMap.set(J,Le),Le},Ye.prototype.setStreamVocalRange=function(J,He){var Le=(0,Qe.Si)(J);if(!Le&&!(J!=null&&J.v))throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");if(!wt(He))throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");He=Number(He),this.an.info(ve+" ".concat(Le?"custom":"stream"," set range: ")+He);var Ue=this.getVocalSource(J,He);Ue.setMaxDistance(He),Ue.checkIfCanPlay(this.hn)},Ye.prototype.updateStreamPosition=function(J,He){if(!(0,Qe.Si)(J)&&!(J!=null&&J.v))throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");if(!Ee(He))throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");var Le=this.getVocalSource(J);Le.setPosition(He),Le.checkIfCanPlay(this.hn)},Ye.prototype.isOpen3D=function(J){return J instanceof E?(this.hn.recvMode===I.ju.World||!J.isSpeakInTeam(this.hn.teamID))&&this.isSpatial:this.isSpatial},Ye})(),ze=function(Ye,J,He,Le){return new(He||(He=Promise))(function(Ue,_t){function st(Lt){try{qt(Le.next(Lt))}catch(ut){_t(ut)}}function Dt(Lt){try{qt(Le.throw(Lt))}catch(ut){_t(ut)}}function qt(Lt){var ut;Lt.done?Ue(Lt.value):(ut=Lt.value,ut instanceof He?ut:new He(function(Yt){Yt(ut)})).then(st,Dt)}qt((Le=Le.apply(Ye,[])).next())})},Je=function(Ye,J){var He,Le,Ue,_t,st={label:0,sent:function(){if(1&Ue[0])throw Ue[1];return Ue[1]},trys:[],ops:[]};return _t={next:Dt(0),throw:Dt(1),return:Dt(2)},typeof Symbol=="function"&&(_t[Symbol.iterator]=function(){return this}),_t;function Dt(qt){return function(Lt){return(function(ut){if(He)throw new TypeError("Generator is already executing.");for(;_t&&(_t=0,ut[0]&&(st=0)),st;)try{if(He=1,Le&&(Ue=2&ut[0]?Le.return:ut[0]?Le.throw||((Ue=Le.return)&&Ue.call(Le),0):Le.next)&&!(Ue=Ue.call(Le,ut[1])).done)return Ue;switch(Le=0,Ue&&(ut=[2&ut[0],Ue.value]),ut[0]){case 0:case 1:Ue=ut;break;case 4:return st.label++,{value:ut[1],done:!1};case 5:st.label++,Le=ut[1],ut=[0];continue;case 7:ut=st.ops.pop(),st.trys.pop();continue;default:if(Ue=st.trys,!((Ue=Ue.length>0&&Ue[Ue.length-1])||ut[0]!==6&&ut[0]!==2)){st=0;continue}if(ut[0]===3&&(!Ue||ut[1]>Ue[0]&&ut[1]<Ue[3])){st.label=ut[1];break}if(ut[0]===6&&st.label<Ue[1]){st.label=Ue[1],Ue=ut;break}if(Ue&&st.label<Ue[2]){st.label=Ue[2],st.ops.push(ut);break}Ue[2]&&st.ops.pop(),st.trys.pop();continue}ut=J.call(Ye,st)}catch(Yt){ut=[6,Yt],Le=0}finally{He=Ue=0}if(5&ut[0])throw ut[1];return{value:ut[0]?ut[1]:void 0,done:!0}})([qt,Lt])}}},yt=(function(){function Ye(J,He){this.vn=ee.getInstance(J,He)}return Ye.getInstance=function(J,He){if(!Ye.instance){if(!J)throw Error("create instance failed.");Ye.instance=new Ye(J,He)}return Ye.instance},Ye.prototype.enableAiDenoise=function(J){return this.vn.enableAiDenoise(J)},Ye.prototype.setAiDenoiseMode=function(J){return this.vn.setAiDenoiseMode(J)},Ye.prototype.enableAudioSourceUpdateChecker=function(J,He){this.vn.enableAudioSourceUpdateChecker(J,He)},Ye.prototype.on=function(J,He){return this.vn.on(J,He)},Ye.prototype.off=function(J,He){return this.vn.off(J,He)},Ye.prototype.setAudioReceiveRange=function(J){this.vn.setAudioReceiveRange(J)},Ye.prototype.updateSelfPosition=function(J,He,Le,Ue){this.vn.updateSelfPosition(J,He,Le,Ue)},Ye.prototype.updateAudioSource=function(J,He){this.vn.updateAudioSource(J,He)},Ye.prototype.enableSpatializer=function(J){return this.vn.enableSpatializer(J)},Ye.prototype.enableMicrophone=function(J){return this.vn.enableMicrophone(J)},Ye.prototype.selectMicrophone=function(J){return ze(this,void 0,void 0,function(){return Je(this,function(He){switch(He.label){case 0:return[4,this.vn.selectMic(J)];case 1:return[2,He.sent()]}})})},Ye.prototype.selectSpeaker=function(J){return this.vn.selectSpeaker(J)},Ye.prototype.enableSpeaker=function(J){return this.vn.enableSpeaker(J)},Ye.prototype.setRangeAudioCustomMode=function(J,He){this.vn.setCustomMode(J,He)},Ye.prototype.setRangeAudioMode=function(J){this.vn.setRangeAudioMode(J)},Ye.prototype.setTeamID=function(J){this.vn.setRangeAudioTeamID(J)},Ye.prototype.setPositionUpdateFrequency=function(J){return this.vn.setPositionUpdateFrequency(J)},Ye.prototype.setRangeAudioVolume=function(J){return this.vn.setAudioVolume(J)},Ye.prototype.setVoiceChangerPreset=function(J){return this.vn.setVoiceChangerPreset({voiceChanger:J})},Ye.prototype.setVoiceChangerParam=function(J){return this.vn.setVoiceChangerPreset({voiceParam:J})},Ye.prototype.isAudioContextRunning=function(){return this.vn.getAudioContextState()==="running"},Ye.prototype.resumeAudioContext=function(){return this.vn.resumeAudioContext()},Ye.prototype.setStreamVocalRange=function(J,He){this.vn.setStreamVocalRange(J,He)},Ye.prototype.updateStreamPosition=function(J,He){this.vn.updateStreamPosition(J,He)},Ye.prototype.setCustomSourceVocalRange=function(J,He){this.vn.setStreamVocalRange(J,He)},Ye.prototype.updateCustomSourcePosition=function(J,He){this.vn.updateStreamPosition(J,He)},Ye})(),xt={type:"RangeAudio",install:function(Ye){Object.defineProperty(Ye.prototype,"createRangeAudioInstance",{value:function(){return this.rangeAudio||(this.rangeAudio=yt.getInstance(this,this.logger)),this.rangeAudio},writable:!1})}}},754:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),(function(){var P=I.lib.WordArray;function Pe(ke,ce,Ne){for(var tt=[],Qe=0,ne=0;ne<ce;ne++)if(ne%4){var oe=Ne[ke.charCodeAt(ne-1)]<<ne%4*2,fe=Ne[ke.charCodeAt(ne)]>>>6-ne%4*2;tt[Qe>>>2]|=(oe|fe)<<24-Qe%4*8,Qe++}return P.create(tt,Qe)}I.enc.Base64={stringify:function(ke){var ce=ke.words,Ne=ke.sigBytes,tt=this._map;ke.clamp();for(var Qe=[],ne=0;ne<Ne;ne+=3)for(var oe=(ce[ne>>>2]>>>24-ne%4*8&255)<<16|(ce[ne+1>>>2]>>>24-(ne+1)%4*8&255)<<8|ce[ne+2>>>2]>>>24-(ne+2)%4*8&255,fe=0;fe<4&&ne+.75*fe<Ne;fe++)Qe.push(tt.charAt(oe>>>6*(3-fe)&63));var Y=tt.charAt(64);if(Y)for(;Qe.length%4;)Qe.push(Y);return Qe.join("")},parse:function(ke){var ce=ke.length,Ne=this._map,tt=this._reverseMap;if(!tt){tt=this._reverseMap=[];for(var Qe=0;Qe<Ne.length;Qe++)tt[Ne.charCodeAt(Qe)]=Qe}var ne=Ne.charAt(64);if(ne){var oe=ke.indexOf(ne);oe!==-1&&(ce=oe)}return Pe(ke,ce,tt)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),I.enc.Base64)},757:function(ot,Re,Z){ot.exports=(function(I,P,Pe,ke){return Ne=[function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.LinkedList=ne.ListNode=ne.ENUM_NETWORK_STATE=ne.SOCKET_DISCONNECT=ne.errorList=ne.Queue=ne.getSeq=ne.E_CLIENT_TYPE=ne.ENUM_LOG_LEVEL=ne.ZEGO_BROWSER_TYPE=ne.ZEGO_ENV=ne.PROTO_VERSION=void 0,ne.PROTO_VERSION="1.0.8",(Y=ne.ZEGO_ENV||(ne.ZEGO_ENV={}))[Y.BROWSER=0]="BROWSER",Y[Y.WEIXINMINI=1]="WEIXINMINI",(Y=ne.ZEGO_BROWSER_TYPE||(ne.ZEGO_BROWSER_TYPE={}))[Y.IE=0]="IE",Y[Y.FIREFOX=1]="FIREFOX",Y[Y.CHROME=2]="CHROME",Y[Y.SAFARI=3]="SAFARI",Y[Y.OPERA=4]="OPERA",Y[Y.WEIXIN=5]="WEIXIN",Y[Y.WEIXINMINI=6]="WEIXINMINI",Y[Y.UNKOWN=7]="UNKOWN",ne.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(Y=ne.E_CLIENT_TYPE||(ne.E_CLIENT_TYPE={}))[Y.ClientType_None=0]="ClientType_None",Y[Y.ClientType_H5=1]="ClientType_H5",Y[Y.ClientType_SmallPragram=2]="ClientType_SmallPragram",Y[Y.ClientType_Webrtc=3]="ClientType_Webrtc",ne.getSeq=(fe=1,function(){return fe++}),re.prototype.isEmpty=function(){return this.items.length==0},re.prototype.enqueue=function(T){this.items.push(T)},re.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},re.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},re.prototype.size=function(){return this.items.length},re.prototype.clear=function(){this.items=[]},re.prototype.all=function(){return this.items};var fe,Y=re;function re(){this.items=[],this.items=[]}ne.Queue=Y,ne.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},ne.SOCKET_DISCONNECT=-1,(Y=ne.ENUM_NETWORK_STATE||(ne.ENUM_NETWORK_STATE={}))[Y.offline=0]="offline",Y[Y.online=1]="online",Object.defineProperty(M.prototype,"id",{get:function(){return this.h||null},set:function(T){this.h=T},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"data",{get:function(){return this.v},set:function(T){this.v=T},enumerable:!1,configurable:!0}),M.prototype.hasNext=function(){return this.next&&this.next.id},M.prototype.hasPrev=function(){return this.prev&&this.prev.id};var K=M;function M(T,_){T===void 0&&(T=null),_===void 0&&(_=null),this.next=null,this.prev=null,this.h=T,this.v=_}function F(){this.start=new K,this.end=new K,this.g=0,this.O=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}ne.ListNode=K,F.prototype.insertBefore=function(T,_){return(_=new K(this.g,_)).next=T,_.prev=T.prev,T.prev&&(T.prev.next=_),T.prev=_,++this.g,++this.O,_},F.prototype.addLast=function(T){return this.insertBefore(this.end,T)},F.prototype.add=function(T){return this.addLast(T)},F.prototype.getFirst=function(){return this.O===0?null:this.start.next},F.prototype.getLast=function(){return this.O===0?null:this.end.prev},F.prototype.size=function(){return this.O},F.prototype.getFromFirst=function(T){var _=0,E=this.start.next;if(0<=T)for(;_<T&&E!==null;)E=E.next,++_;else E=null;if(E===null)throw"Index out of bounds.";return E},F.prototype.get=function(T){return T===0?this.getFirst():T===this.O-1?this.getLast():this.getFromFirst(T)},F.prototype.remove=function(T){return T.prev&&(T.prev.next=T.next),T.next&&(T.next.prev=T.prev),--this.O,T},F.prototype.removeFirst=function(){return 0<this.O&&this.start.next?this.remove(this.start.next):null},F.prototype.removeLast=function(){return 0<this.O&&this.end.prev?this.remove(this.end.prev):null},F.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this.O=0,this.g=0},F.prototype.each=function(T){for(var _=this.start;_.hasNext();)T(_=_.next)},F.prototype.find=function(T){for(var _=this.start,E=!1,w=null;_.hasNext()&&!E;)T(_=_.next)&&(w=_,E=!0);return w},F.prototype.map=function(T){for(var _=this.start,E=[];_.hasNext();)T(_=_.next)&&E.push(_);return E},F.prototype.push=function(T){return this.addLast(T)},F.prototype.unshift=function(T){this.insertBefore(0<this.O?this.start.next:this.end,T)},F.prototype.pop=function(){return this.removeLast()},F.prototype.shift=function(){return this.removeFirst()},ne.LinkedList=F},function(Qe,ne,oe){var fe=this&&this.__read||function(E,w){var R=typeof Symbol=="function"&&E[Symbol.iterator];if(!R)return E;var V,ae,q=R.call(E),k=[];try{for(;(w===void 0||0<w--)&&!(V=q.next()).done;)k.push(V.value)}catch(G){ae={error:G}}finally{try{V&&!V.done&&(R=q.return)&&R.call(q)}finally{if(ae)throw ae.error}}return k},Y=this&&this.__spread||function(){for(var E=[],w=0;w<arguments.length;w++)E=E.concat(fe(arguments[w]));return E},re=(Object.defineProperty(ne,"u",{value:!0}),ne.ContextAPI=ne.suppressInstrumentation=ne.ROOT_CONTEXT=ne.BaseContext=ne.setSpan=ne.getSpanContext=ne.getSpan=ne.createContextKey=void 0,oe(17));function K(E){return Symbol.for(E)}var M=(ne.createContextKey=K)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),F=K("OpenTelemetry Context Key SPAN");function T(E){return E.getValue(F)||void 0}function _(E){this._=E,this.S=new re.StackContextManager}ne.getSpan=T,ne.getSpanContext=function(E){return(E=T(E))==null?void 0:E.context()},ne.setSpan=function(E,w){return E.setValue(F,w)},ne.BaseContext=oe=function E(w){var R=this;R.M=w?new Map(w):new Map,R.getValue=function(V){return R.M.get(V)},R.setValue=function(V,ae){var q=new E(R.M);return q.M.set(V,ae),q},R.deleteValue=function(V){var ae=new E(R.M);return ae.M.delete(V),ae}},ne.ROOT_CONTEXT=new oe,ne.suppressInstrumentation=function(E){return E.setValue(M,!0)},_.getInstance=function(E){return E===void 0&&(E="context"),this.j||(this.j=new _(E)),this.j},_.prototype.active=function(){return this.S.active()},_.prototype.with=function(E,w,R){for(var V,ae=[],q=3;q<arguments.length;q++)ae[q-3]=arguments[q];return(V=this.T()).with.apply(V,Y([E,w,R],ae))},_.prototype.T=function(){return this.S},ne.ContextAPI=_},function(Qe,ne,oe){var fe,Y;Object.defineProperty(ne,"u",{value:!0}),ne.INVALID_SPAN_CONTEXT=ne.INVALID_TRACEID=ne.INVALID_SPANID=ne.TraceFlags=ne.SpanKind=ne.SpanStatusCode=void 0,(fe=ne.SpanStatusCode||(ne.SpanStatusCode={}))[fe.UNSET=0]="UNSET",fe[fe.OK=1]="OK",fe[fe.ERROR=2]="ERROR",(fe=ne.SpanKind||(ne.SpanKind={}))[fe.INTERNAL=0]="INTERNAL",fe[fe.SERVER=1]="SERVER",fe[fe.CLIENT=2]="CLIENT",fe[fe.PRODUCER=3]="PRODUCER",fe[fe.CONSUMER=4]="CONSUMER",(Y=fe=ne.TraceFlags||(ne.TraceFlags={}))[Y.NONE=0]="NONE",Y[Y.SAMPLED=1]="SAMPLED",ne.INVALID_SPANID="0000000000000000",ne.INVALID_TRACEID="00000000000000000000000000000000",ne.INVALID_SPAN_CONTEXT={traceId:ne.INVALID_TRACEID,spanId:ne.INVALID_SPANID,traceFlags:fe.NONE}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.log=ne.ZegoLog=void 0,Y.prototype.log=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join("");console.log(M)},Y.prototype.debug=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join("");console.debug(M)},Y.prototype.info=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join("");console.info(M)},Y.prototype.warn=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join("");console.warn(M)},Y.prototype.error=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join("");console.error(M)};var fe=Y;function Y(){}fe=new(ne.ZegoLog=fe),ne.log=fe},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.FAIL_TIME=ne.FAIL_MAX_COUNT=ne.FAIL_COUNT=ne.STORE_SIZE=ne.CACHE_SIZE=ne.BUCKET_CONFIG=ne.DEFAULT_CONFIG=void 0,ne.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:10},ne.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},ne.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},ne.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},ne.FAIL_COUNT=5,ne.FAIL_MAX_COUNT=10,ne.FAIL_TIME=30},function(Qe,ne,oe){var fe=this&&this.__importDefault||function(M){return M&&M.u?M:{default:M}},Y=(Object.defineProperty(ne,"u",{value:!0}),ne.uuid=ne.calculateMemSize=ne.analyzeKey=ne.getCurrentTime=ne.getCurrentEnv=ne.getBrowser=void 0,oe(0)),re=fe(oe(31)),K=(ne.getBrowser=function(){var M=window.navigator.userAgent,F=window.ActiveXObject!=null&&M.indexOf("MSIE")!=-1,T=M.indexOf("Firefox")!=-1,_=window.opr!=null,E=M.indexOf("Chrome")&&window.chrome,w=M.indexOf("Safari")!=-1&&M.indexOf("Version")!=-1;return M=M.toLowerCase().match(/MicroMessenger/i)&&M.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",F?Y.ZEGO_BROWSER_TYPE.IE:T?Y.ZEGO_BROWSER_TYPE.FIREFOX:_?Y.ZEGO_BROWSER_TYPE.OPERA:E?Y.ZEGO_BROWSER_TYPE.CHROME:w?Y.ZEGO_BROWSER_TYPE.SAFARI:M?Y.ZEGO_BROWSER_TYPE.WEIXIN:Y.ZEGO_BROWSER_TYPE.UNKOWN},ne.getCurrentEnv=function(){var M=window.navigator.userAgent;return new Promise(function(F){M.indexOf("MicroMessage")==-1?F(Y.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv(function(T){})})},["00","01","02","03","04","05","06","07","08","09"]);ne.getCurrentTime=function(){var M=new Date;return[M.getFullYear()+"/",(K[M.getMonth()+1]||M.getMonth()+1)+"/",(K[M.getDate()]||M.getDate())+" ",(K[M.getHours()]||M.getHours())+":",(K[M.getMinutes()]||M.getMinutes())+":",K[M.getSeconds()]||M.getSeconds(),"."+M.getTime()%1e3].join("")},ne.analyzeKey=function(M){return M=M.split("_"),{level:Number(M[0]),timestamp:M[1],seq:M[2]}},ne.calculateMemSize=function(M){return re.default(M)},ne.uuid=function(M,F){var T,_,E="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),w=[];if(F=F||E.length,M)for(T=0;T<M;T++)w[T]=E[0|Math.random()*F];else for(w[8]=w[13]=w[18]=w[23]="-",w[14]="4",T=0;T<36;T++)w[T]||(_=0|16*Math.random(),w[T]=E[T==19?3&_|8:_]);return w.join("")}},function(Qe,ne,oe){var fe=this&&this.__values||function(K){var M=typeof Symbol=="function"&&Symbol.iterator,F=M&&K[M],T=0;if(F)return F.call(K);if(K&&typeof K.length=="number")return{next:function(){return{value:(K=K&&T>=K.length?void 0:K)&&K[T++],done:!K}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=this&&this.__read||function(K,M){var F=typeof Symbol=="function"&&K[Symbol.iterator];if(!F)return K;var T,_,E=F.call(K),w=[];try{for(;(M===void 0||0<M--)&&!(T=E.next()).done;)w.push(T.value)}catch(R){_={error:R}}finally{try{T&&!T.done&&(F=E.return)&&F.call(E)}finally{if(_)throw _.error}}return w};function re(K){var M,F,T;if(K!=null&&Array.isArray(K))try{for(var _=fe(K),E=_.next();!E.done;E=_.next()){var w=E.value;if(w!=null)if(T){if(typeof w!==T)return!1}else T=typeof w}}catch(R){M={error:R}}finally{try{E&&!E.done&&(F=_.return)&&F.call(_)}finally{if(M)throw M.error}}return!0}Object.defineProperty(ne,"u",{value:!0}),ne.sanitizeAttributes=ne.isAttributeValue=void 0,ne.isAttributeValue=re,ne.sanitizeAttributes=function(K){var M,F,T={};if(K!=null&&typeof K=="object")try{for(var _=fe(Object.entries(K)),E=_.next();!E.done;E=_.next()){var w=Y(E.value,2),R=w[0],V=w[1];re(V)&&(T[R]=Array.isArray(V)?V.slice():V)}}catch(ae){M={error:ae}}finally{try{E&&!E.done&&(F=_.return)&&F.call(_)}finally{if(M)throw M.error}}return T}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.IdGenerator=void 0;var fe=Array(32);function Y(re){return function(){for(var K=0;K<2*re;K++)fe[K]=Math.floor(16*Math.random())+48,58<=fe[K]&&(fe[K]+=39);return String.fromCharCode.apply(null,fe.slice(0,2*re))}}ne.IdGenerator=function(){this.generateTraceId=Y(16),this.generateSpanId=Y(8),this.generateEventId=Y(4)}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.Resource=ne.SDK_INFO=ne.SemanticResourceAttributes=void 0,ne.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},ne.SDK_INFO=((fe={})[ne.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",fe[ne.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",fe[ne.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",fe[ne.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=ne.VERSION,fe),Y.empty=function(){return Y.EMPTY},Y.createTelemetrySDKResource=function(){var re;return new Y(((re={})[ne.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=ne.SDK_INFO[ne.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],re[ne.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=ne.SDK_INFO[ne.SemanticResourceAttributes.TELEMETRY_SDK_NAME],re[ne.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=ne.SDK_INFO[ne.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],re))},Y.prototype.merge=function(re){return re&&Object.keys(re.attributes).length?new Y(Object.assign({},this.attributes,re.attributes)):this},Y.EMPTY=new Y({});var fe=Y;function Y(re){this.attributes=re}ne.Resource=fe},function(Qe,ne,oe){var fe=this&&this.__values||function(E){var w=typeof Symbol=="function"&&Symbol.iterator,R=w&&E[w],V=0;if(R)return R.call(E);if(E&&typeof E.length=="number")return{next:function(){return{value:(E=E&&V>=E.length?void 0:E)&&E[V++],done:!E}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=this&&this.__read||function(E,w){var R=typeof Symbol=="function"&&E[Symbol.iterator];if(!R)return E;var V,ae,q=R.call(E),k=[];try{for(;(w===void 0||0<w--)&&!(V=q.next()).done;)k.push(V.value)}catch(G){ae={error:G}}finally{try{V&&!V.done&&(R=q.return)&&R.call(q)}finally{if(ae)throw ae.error}}return k},re=(Object.defineProperty(ne,"u",{value:!0}),ne.Span=void 0,oe(6)),K=oe(1),M=oe(2),F=oe(7),T=oe(18);function _(E,w,R,V,ae,q,k,G){G===void 0&&(G=[]),this.attributes={},this.links=[],this.events=[],this.status={code:M.SpanStatusCode.UNSET},this.endTime=0,this.N=!1,this.A=0,this.exported=!0,this.R=E.context,this.reporter=E.reporter,this.spanProcessor=E.spanProcessor,this.parentTracer=E,this.name=R,this.level=V,this.spanContext=ae,this.parentSpanId=k,this.kind=q,this.links=G,this.startTime=Date.now(),this.resource=E.resource,this.instrumentationLibrary=E.instrumentationLibrary,this.I=E.getActiveTraceParams(),this.k=new F.IdGenerator}_.prototype.context=function(){return this.spanContext},_.prototype.setAttribute=function(E,w){return w==null||E.length===0||!re.isAttributeValue(w)||Object.keys(this.attributes).length>=this.I.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,E)||(this.attributes[E]=w),this},_.prototype.appendAttribute=function(E,w){return w==null||E.length===0||!re.isAttributeValue(w)||Object.keys(this.attributes).length>=this.I.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,E)||(this.attributes[E]&&Array.isArray(this.attributes[E])?this.attributes[E].push(w):this.attributes[E]=[w]),this},_.prototype.setAttributes=function(E){var w,R;try{for(var V=fe(Object.entries(E)),ae=V.next();!ae.done;ae=V.next()){var q=Y(ae.value,2);this.setAttribute(q[0],q[1])}}catch(k){w={error:k}}finally{try{ae&&!ae.done&&(R=V.return)&&R.call(V)}finally{if(w)throw w.error}}return this},_.prototype.addEvent=function(E,w,R){this.events.length>=this.I.numberOfEventsPerSpan&&this.events.shift();var V=this.k.generateEventId();return T.isTimeInput(w)&&(R===void 0&&(R=w),w=void 0),R===void 0&&(R=T.hrTime()),this.events.push({name:E,attributes:w,time:T.timeInputToHrTime(R),event_id:V}),this},_.prototype.setStatus=function(E){return this.status=E,this},_.prototype.updateName=function(E){return this.name=E,this},_.prototype.end=function(E){var w,R=this;this.D()||(this.N=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),w=T.getCurrentTime(),this.setAttribute("e_time_s",w),this.endTime=Date.now(),this.A=this.endTime-this.startTime,this.R.with(K.suppressInstrumentation(this.R.active()),function(){var V=R.P(R);R.spanProcessor.spanEnd&&R.spanProcessor.spanEnd(V,R.level),V.droped||E===!1||(delete V.droped,R.reporter.report(JSON.stringify(V),R.level))}))},_.prototype.spanReport=function(){var E=this.P(this);this.reporter.report(JSON.stringify(E),this.level)},_.prototype.isRecording=function(){return this.N===!1},Object.defineProperty(_.prototype,"duration",{get:function(){return this.A},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"ended",{get:function(){return this.N},enumerable:!1,configurable:!0}),_.prototype.D=function(){return this.N},_.prototype.P=function(E){var w=[],R=(E.events.forEach(function(V){var ae={};Object.keys(V).forEach(function(q){q==="name"&&(ae[q]=V[q]),q==="time"&&(ae.timestamp=T.hrTimeToMilliseconds(V[q])),q==="attributes"&&(ae.tags=V[q])}),w.push(ae)}),[]);return E.links.forEach(function(V){R.push({span_id:V.context.spanId,trace_id:V.context.traceId})}),{trace_id:E.spanContext.traceId,parent_span_id:E.parentSpanId,name:E.name,span_id:E.spanContext.spanId,kind:E.kind,start_time:E.startTime,end_time:E.endTime,duration:E.duration,logs:w,tags:E.attributes,links:R}},ne.Span=_},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.ZegoSpan=void 0;var fe=oe(3),Y=oe(9);function re(K,M){this.spanId=K,this.span=M}re.prototype.setAttribute=function(K,M){var F=this;return this.span?this.span.setAttribute(K,M):this.B().then(function(){F.span&&F.span.setAttribute(K,M)}),this},re.prototype.setAttributes=function(K){var M=this;return this.span?this.span.setAttributes(K):this.B().then(function(){M.span&&M.span.setAttributes(K)}),this},re.prototype.appendAttribute=function(K,M){var F=this;return this.span?this.span.appendAttribute(K,M):this.B().then(function(){F.span&&F.span.appendAttribute(K,M)}),this},re.prototype.addEvent=function(K,M,F){var T=this;return this.span?this.span.addEvent(K,M,F):this.B().then(function(){T.span&&T.span.addEvent(K,M,F)}),this},re.prototype.setStatus=function(K){var M=this;return this.span?this.span.setStatus(K):this.B().then(function(){M.span&&M.span.setStatus(K)}),this},re.prototype.updateName=function(K){var M=this;return this.span?this.span.updateName(K):this.B().then(function(){M.span&&M.span.updateName(K)}),this},re.prototype.end=function(K){var M=this;K===void 0&&(K=!0),this.span?this.span.end(K):this.B(!0).then(function(){M.span&&M.span.end(K),M.U()})},re.prototype.setSpanActive=function(K){this.activeCallback=K},re.prototype.setSpanEnd=function(K){this.endCallback=K},re.prototype.spanReport=function(){var K;(K=this.span)!=null&&K.spanReport()},re.prototype.U=function(){this.L()||(this.J(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},re.prototype.L=function(){return this.spanId==="noop"},re.prototype.B=function(K){var M=this;return K===void 0&&(K=!1),new Promise(function(F,T){M.store.getItem(M.spanId).then(function(_){var E=new Y.Span(re.tracer,re.tracer.context.active(),_.name,_.level,_.spanContext,_.kind,_.parentSpanId,_.links);E.setStatus(_.status),E.setAttributes(_.attributes),M.span=E,M.activeCallback&&M.activeCallback(M.spanId,K),F()}).catch(function(_){T(_)})})},re.prototype.J=function(K){var M=this;this.store.getItem(K).then(function(F){F&&M.store.removeItem(K).then(function(){fe.log.log("remove suc")}).catch(function(T){fe.log.warn("remove fail")})})},ne.ZegoSpan=re},function(Qe,ne,oe){function fe(Y){this.q=Y=Y===void 0?"":Y,this.count=0,this.isStarting=!1,this.timer=0,this.lastLogTime=0,this.speed=0,this.lastTime=0}Object.defineProperty(ne,"u",{value:!0}),ne.SpeedUtil=void 0,fe.prototype.add=function(Y){this.isStarting&&(this.count+=Y)},fe.prototype.stop=function(){return this.isStarting=!1,this.reset()},fe.prototype.start=function(Y){var re=this;Y===void 0&&(Y=0),this.isStarting=!0,this.count=0,clearInterval(this.timer),Y&&(this.timer=window.setInterval(function(){re.speed=re.count/Y,re.count=0},Y))},fe.prototype.reset=function(){this.count=0,clearInterval(this.timer),this.timer=0,this.speed=0},ne.SpeedUtil=fe},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.createZegoStore=ne.ZegoWechatMiniStore=ne.ZEGO_ENV=void 0;var fe,Y,re=oe(13),K=((Y=fe=ne.ZEGO_ENV||(ne.ZEGO_ENV={}))[Y.BROWSER=0]="BROWSER",Y[Y.WEIXINMINI=1]="WEIXINMINI",oe(3)),M=(F.prototype.getItem=function(T){var _=this;return new Promise(function(E,w){try{E(wx.getStorageSync(_.keyPrefix+T))}catch(R){w(R)}})},F.prototype.setItem=function(T,_){var E=this;return new Promise(function(w,R){try{wx.setStorageSync(E.keyPrefix+T,_),w()}catch(V){R(V)}})},F.prototype.removeItem=function(T){var _=this;return new Promise(function(E,w){try{E(wx.removeStorageSync(_.keyPrefix+T))}catch(R){w(R)}})},F.prototype.clear=function(){return new Promise(function(T,_){try{wx.clearStorageSync(),T()}catch(E){_(E)}})},F.prototype.keys=function(){var T=this;return new Promise(function(_,E){try{var w=wx.getStorageInfoSync().keys,R=(K.log.warn("keys",w),[]);w.forEach(function(V){V.indexOf(T.keyPrefix)==0&&R.push(V.replace(T.keyPrefix,""))}),K.log.warn("keyArr",JSON.stringify(R)),R.sort(),_(R)}catch(V){E(V)}})},F);function F(T){this.storeName=T,this.keyPrefix=T+"/"}ne.ZegoWechatMiniStore=M,ne.createZegoStore=function(T,_,E){return _===fe.BROWSER?re.createInstance({name:T+":"+(E||"store")}):new M(T)}},function(Qe,ne){Qe.exports=I},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.DynamicCode=ne.ZegoTracer=ne.ZegoSpan=void 0;var fe=oe(15),Y=(Object.defineProperty(ne,"ZegoTracer",{enumerable:!0,get:function(){return fe.ZegoTracer}}),oe(46)),re=(Object.defineProperty(ne,"DynamicCode",{enumerable:!0,get:function(){return Y.DynamicCode}}),oe(10));Object.defineProperty(ne,"ZegoSpan",{enumerable:!0,get:function(){return re.ZegoSpan}})},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.ZegoTracer=void 0;var fe=oe(16),Y=oe(22),re=oe(10),K=oe(23),M=oe(3),F=oe(1),T=oe(8),_=oe(24),E=oe(39),w=oe(12),R=oe(44),V=oe(45);function ae(q){this.C=K.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new R.ZegoLog,this.stateCenter=new V.StateCenter(this.log),this.stateCenter.proxyCtrl=q}ae.prototype.init=function(q){q.deflate?(this.stateCenter.deflate=q.deflate,typeof q.keepLive=="boolean"&&(this.stateCenter.keepLive=q.keepLive),this.options=q,this.name=q.product,this.reporter=new _.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:q.appID,env:q.env||0,importantLevel:q.importantLevel,levels:q.levels,deviceID:q.deviceID,bps:q.bps,serverUrl:q.serverUrl}),this.tracer=new fe.Tracer({name:this.name,version:q.version},{resource:new T.Resource(q.resources)},this.reporter,{spanStart:q.spanStart,spanBeforeEnd:q.spanBeforeEnd,spanEnd:q.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.F(this.options),this.dyStore=w.createZegoStore(q.product+"_"+q.appID+"_dy",q.env||0)):console.error("init tracer failed. need input pako inflate function")},ae.prototype.F=function(q){this.rootSpan=this.tracer.startSpan("root",0);var k=F.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context.T().M=k,this.rootSpan.end()},ae.prototype.createSpan=function(q,k,G){var xe,Ae;return q<=this.level?(xe=F.setSpan(this.tracer.context.active(),G&&G.parent?G.parent.span:this.rootSpan),Ae=[],G&&G.linkSpans&&(G.linkSpans.forEach(function(De){Ae.push({context:De.span.context()})}),delete G.linkSpans),k=this.tracer.startSpan(k,q,Object.assign({},G,{links:Ae}),xe),q=new re.ZegoSpan(k.spanContext.spanId,k),re.ZegoSpan.tracer=this.tracer,q):(M.log.warn("createSpan level not fix"),new re.ZegoSpan(K.NOOP_SPAN_ID,new Y.NoopSpan))},ae.prototype.setLogger=function(q){this.stateCenter.logger=q},ae.prototype.setTimeOffset=function(q){this.reporter.setTimeOffset(q)},ae.prototype.setWaitNtpTimeout=function(q){this.reporter.setWaitNtpTimeout(q)},ae.prototype.setLogLevel=function(q){return this.stateCenter.W.setLogLevel(q)},ae.prototype.startReport=function(q){return this.reporter.startReport(q)},ae.prototype.setConfig=function(q){this.reporter.setConfig(q)},ae.prototype.loadJs=function(q,k,G,xe,Ae,De){return E.loadJS(q,this.dyStore,k,G,xe,Ae,De)},ae.prototype.flush=function(q){this.reporter.flush(q)},ae.prototype.setUnloadState=function(q){this.reporter.setUnloadState(q)},ae.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},ae.prototype.destroy=function(){this.reporter.uninit()},ae.prototype.setSampleConfig=function(q){this.level=q.level||this.level},ae.prototype.setResource=function(q){this.tracer.setResource(q),this.reporter.setProcessData(this.tracer.resource.attributes)},ae.prototype.setNetStateCheck=function(){this.reporter.setNetStateCheck()},ae.prototype.getUnloadStatus=function(){return{uploadSpeed:this.reporter.uploadSpeed,increaseSpeed:this.reporter.speed,unreportLength:this.reporter.unreportDataByteLen}},ae.prototype.reportSize=function(){return this.reporter.traceType.MEM_I_API},ne.ZegoTracer=ae},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.Tracer=void 0;var fe=oe(6),Y=oe(1),re=oe(2),K=oe(7),M=oe(8),F=oe(9),T=oe(19),_=oe(20);function E(w,R,V,ae){var q=_.mergeConfig(R);this.I=q.traceParams,this.k=new K.IdGenerator,this.resource=(q=R.resource)!=null?q:M.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=w,R=Math.random().toString(36).slice(-6),this.context=new Y.ContextAPI(R),this.reporter=V,this.spanProcessor=ae||{}}E.prototype.startSpan=function(w,R,V,ae){var q,k,G,xe=((Ie,be)=>{if(!Ie.root)return Y.getSpanContext(be)})(V=V===void 0?{}:V,ae=ae===void 0?this.context.active():ae),Ae=this.k.generateSpanId(),De=(xe&&T.isSpanContextValid(xe)?(q=xe.traceId,k=xe.traceState,G=xe.spanId):q=this.k.generateTraceId(),xe=(xe=V.kind)!=null?xe:re.SpanKind.INTERNAL,(De=V.links)!=null?De:[]);return V=fe.sanitizeAttributes(V.attributes),(ae=new F.Span(this,ae,w,R,{traceId:q,spanId:Ae,traceFlags:re.TraceFlags.NONE,traceState:k},xe,G,De)).setAttributes(V),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(ae),ae},E.prototype.setResource=function(w){this.resource=this.resource.merge(new M.Resource(w))},E.prototype.getActiveTraceParams=function(){return this.I},ne.Tracer=E},function(Qe,ne,oe){var fe=this&&this.__read||function(M,F){var T=typeof Symbol=="function"&&M[Symbol.iterator];if(!T)return M;var _,E,w=T.call(M),R=[];try{for(;(F===void 0||0<F--)&&!(_=w.next()).done;)R.push(_.value)}catch(V){E={error:V}}finally{try{_&&!_.done&&(T=w.return)&&T.call(w)}finally{if(E)throw E.error}}return R},Y=this&&this.__spread||function(){for(var M=[],F=0;F<arguments.length;F++)M=M.concat(fe(arguments[F]));return M},re=(Object.defineProperty(ne,"u",{value:!0}),ne.StackContextManager=void 0,oe(1));function K(){this.X=!1,this.M=re.ROOT_CONTEXT}K.prototype.K=function(M,F){function T(){for(var E=this,w=[],R=0;R<arguments.length;R++)w[R]=arguments[R];return _.with(F,function(){return M.apply(E,w)})}F===void 0&&(F=re.ROOT_CONTEXT);var _=this;return Object.defineProperty(T,"length",{enumerable:!1,configurable:!0,writable:!1,value:M.length}),T},K.prototype.active=function(){return this.M},K.prototype.bind=function(M,F){return(F=F===void 0?re.ROOT_CONTEXT:F)===void 0&&(F=this.active()),typeof M=="function"?this.K(M,F):M},K.prototype.disable=function(){return this.M=re.ROOT_CONTEXT,this.X=!1,this},K.prototype.enable=function(){return this.X||(this.X=!0,this.M=re.ROOT_CONTEXT),this},K.prototype.with=function(M,F,T){for(var _=[],E=3;E<arguments.length;E++)_[E-3]=arguments[E];var w=this.M;this.M=M||re.ROOT_CONTEXT;try{return F.call.apply(F,Y([T],_))}finally{this.M=w}},ne.StackContextManager=K},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.getCurrentTime=ne.isTimeInput=ne.hrTimeToMilliseconds=ne.hrTimeDuration=ne.timeInputToHrTime=ne.isTimeInputHrTime=ne.hrTime=void 0;var fe=9,Y=Math.pow(10,fe),re=["00","01","02","03","04","05","06","07","08","09"];function K(_){_/=1e3;var E=Math.trunc(_);return[E,Number((_-E).toFixed(fe))*Y]}function M(){var _,E=performance.timeOrigin;return typeof E!="number"?(_=performance).timing&&_.timing.fetchStart:E}function F(_){var E=K(M()),w=(_=K(typeof _=="number"?_:performance.now()),E[0]+_[0]);return Y<(E=E[1]+_[1])&&(E-=Y,w+=1),[w,E]}function T(_){return Array.isArray(_)&&_.length===2&&typeof _[0]=="number"&&typeof _[1]=="number"}ne.hrTime=F,ne.isTimeInputHrTime=T,ne.timeInputToHrTime=function(_){if(T(_))return _;if(typeof _=="number")return(_<M()?F:K)(_);if(_ instanceof Date)return K(_.getTime());throw TypeError("Invalid input type")},ne.hrTimeDuration=function(_,E){var w=E[0]-_[0];return(E=E[1]-_[1])<0&&(--w,E+=Y),[w,E]},ne.hrTimeToMilliseconds=function(_){return Math.round(1e3*_[0]+_[1]/1e6)},ne.isTimeInput=function(_){return T(_)||typeof _=="number"||_ instanceof Date},ne.getCurrentTime=function(){var _=new Date;return[_.getFullYear()+"/",(re[_.getMonth()+1]||_.getMonth()+1)+"/",(re[_.getDate()]||_.getDate())+" ",(re[_.getHours()]||_.getHours())+":",(re[_.getMinutes()]||_.getMinutes())+":",re[_.getSeconds()]||_.getSeconds(),"."+(""+_.getTime()).slice(-3)].join("")}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.isSpanContextValid=ne.isValidSpanId=ne.isValidTraceId=ne.INVALID_SPAN_CONTEXT=ne.INVALID_TRACEID=ne.INVALID_SPANID=void 0,oe=oe(2);var fe=/^([0-9a-f]{32})$/i,Y=/^[0-9a-f]{16}$/i;function re(M){return fe.test(M)&&M!==ne.INVALID_TRACEID}function K(M){return Y.test(M)&&M!==ne.INVALID_SPANID}ne.INVALID_SPANID="0000000000000000",ne.INVALID_TRACEID="00000000000000000000000000000000",ne.INVALID_SPAN_CONTEXT={traceId:ne.INVALID_TRACEID,spanId:ne.INVALID_SPANID,traceFlags:oe.TraceFlags.NONE},ne.isValidTraceId=re,ne.isValidSpanId=K,ne.isSpanContextValid=function(M){return re(M.traceId)&&K(M.spanId)}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.mergeConfig=void 0;var fe=oe(21);ne.mergeConfig=function(Y){var re=Object.assign({},fe.DEFAULT_CONFIG,Y);return re.traceParams=Object.assign({},fe.DEFAULT_CONFIG.traceParams,Y.traceParams||{}),re}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.DEFAULT_CONFIG=void 0,ne.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.NoopSpan=void 0;var fe=oe(2);function Y(re){re===void 0&&(re=fe.INVALID_SPAN_CONTEXT),this.G=re}Y.prototype.context=function(){return this.G},Y.prototype.setAttribute=function(re,K){return this},Y.prototype.appendAttribute=function(re,K){return this},Y.prototype.setAttributes=function(re){return this},Y.prototype.addEvent=function(re,K,M){return this},Y.prototype.setStatus=function(re){return this},Y.prototype.updateName=function(re){return this},Y.prototype.end=function(re){},Y.prototype.isRecording=function(){return!1},Y.prototype.spanReport=function(){},Y.prototype.recordException=function(re,K){},ne.NoopSpan=Y},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.NOOP_SPAN_ID=ne.SCHEDULED_DELAY_MILLIS=ne.DEFAULT_MAX_SPAN_SIZE=ne.readSpanKeys=void 0,ne.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],ne.DEFAULT_MAX_SPAN_SIZE=1e3,ne.SCHEDULED_DELAY_MILLIS=3e3,ne.NOOP_SPAN_ID="noop"},function(Qe,ne,oe){var fe=this&&this.__assign||function(){return(fe=Object.assign||function(k){for(var G,xe=1,Ae=arguments.length;xe<Ae;xe++)for(var De in G=arguments[xe])Object.prototype.hasOwnProperty.call(G,De)&&(k[De]=G[De]);return k}).apply(this,arguments)},Y=this&&this.__awaiter||function(k,G,xe,Ae){return new(xe=xe||Promise)(function(De,Ie){function be(pe){try{Ve(Ae.next(pe))}catch(j){Ie(j)}}function qe(pe){try{Ve(Ae.throw(pe))}catch(j){Ie(j)}}function Ve(pe){var j;pe.done?De(pe.value):((j=pe.value)instanceof xe?j:new xe(function(B){B(j)})).then(be,qe)}Ve((Ae=Ae.apply(k,G||[])).next())})},re=this&&this.__generator||function(k,G){var xe,Ae,De,Ie={label:0,sent:function(){if(1&De[0])throw De[1];return De[1]},trys:[],ops:[]},be={next:qe(0),throw:qe(1),return:qe(2)};return typeof Symbol=="function"&&(be[Symbol.iterator]=function(){return this}),be;function qe(Ve){return function(pe){var j=[Ve,pe];if(xe)throw new TypeError("Generator is already executing.");for(;Ie;)try{if(xe=1,Ae&&(De=2&j[0]?Ae.return:j[0]?Ae.throw||((De=Ae.return)&&De.call(Ae),0):Ae.next)&&!(De=De.call(Ae,j[1])).done)return De;switch(Ae=0,(j=De?[2&j[0],De.value]:j)[0]){case 0:case 1:De=j;break;case 4:return Ie.label++,{value:j[1],done:!1};case 5:Ie.label++,Ae=j[1],j=[0];continue;case 7:j=Ie.ops.pop(),Ie.trys.pop();continue;default:if(!(De=0<(De=Ie.trys).length&&De[De.length-1])&&(j[0]===6||j[0]===2)){Ie=0;continue}if(j[0]===3&&(!De||j[1]>De[0]&&j[1]<De[3]))Ie.label=j[1];else if(j[0]===6&&Ie.label<De[1])Ie.label=De[1],De=j;else{if(!(De&&Ie.label<De[2])){De[2]&&Ie.ops.pop(),Ie.trys.pop();continue}Ie.label=De[2],Ie.ops.push(j)}}j=G.call(k,Ie)}catch(B){j=[6,B],Ae=0}finally{xe=De=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}},K=this&&this.__read||function(k,G){var xe=typeof Symbol=="function"&&k[Symbol.iterator];if(!xe)return k;var Ae,De,Ie=xe.call(k),be=[];try{for(;(G===void 0||0<G--)&&!(Ae=Ie.next()).done;)be.push(Ae.value)}catch(qe){De={error:qe}}finally{try{Ae&&!Ae.done&&(xe=Ie.return)&&xe.call(Ie)}finally{if(De)throw De.error}}return be},M=this&&this.__spread||function(){for(var k=[],G=0;G<arguments.length;G++)k=k.concat(K(arguments[G]));return k},F=this&&this.__values||function(k){var G=typeof Symbol=="function"&&Symbol.iterator,xe=G&&k[G],Ae=0;if(xe)return xe.call(k);if(k&&typeof k.length=="number")return{next:function(){return{value:(k=k&&Ae>=k.length?void 0:k)&&k[Ae++],done:!k}}};throw new TypeError(G?"Object is not iterable.":"Symbol.iterator is not defined.")},T=(Object.defineProperty(ne,"u",{value:!0}),ne.ZegoDataReport=void 0,oe(0)),_=oe(25),E=oe(30),w=oe(38),R=oe(5),V=oe(4),ae=oe(11);function q(k,G){this.H=G,this.QUEUE_MAX=100,this.cacheMaxSize=V.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=V.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:V.CACHE_SIZE.totalAvailCache,totalDBSize:V.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.postDataState="",this.product=k,this.reportMap=new Map,this.Y=new ae.SpeedUtil("tracer increase"),(G=this.Y)!=null&&G.start(3e3)}Object.defineProperty(q.prototype,"speed",{get:function(){return this.Y.speed},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"uploadSpeed",{get:function(){return this.zegoService.speed},enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"unreportDataByteLen",{get:function(){return this.traceType.MEM_I_API+this.traceType.MEM_I_LOAD-this.traceType.MEM_O_DONE-this.traceType.MEM_O_DUMP},enumerable:!1,configurable:!0}),q.prototype.init=function(k){return Y(this,void 0,void 0,function(){var G=this;return re(this,function(xe){switch(xe.label){case 0:return this.config=fe(fe({},V.DEFAULT_CONFIG),k),this.config.env%2!=1&&this.V(),this.zegoService=new _.ZegoService(this.config.env||T.ZEGO_ENV.BROWSER,this.config.bps||V.DEFAULT_CONFIG.bps,this.product,this.pro,this.H),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.Z.bind(this)),this.zegoService.setPostFailCallback(this.product,function(Ae){return Y(G,void 0,void 0,function(){return re(this,function(De){switch(De.label){case 0:return this.H.logger.warn("zt.zd.i fail"),this.postDataState="fail",this.dropCount++,this.$(Ae),[4,this.tt(1)];case 1:return De.sent(),this.it("postFail"),[2]}})})}),this.nt(),this.storeHandler=new E.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",R.uuid(6),this.config,this.traceType,this.staticConfig,this.H,this.product),this.storeHandler.setDropCallBack(function(Ae){G.traceType.DB_O_DROP+=R.calculateMemSize(Ae),G.it("dataDroped",Ae)}),[4,this.storeHandler.loadPendingData()];case 1:return xe.sent(),this.storeHandler.init().then(function(){G.rt()}).catch(function(Ae){console.warn(Ae)}),this.et(),this.st(),this.ut(),[2]}})})},q.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null),this.Y.stop(),this.zegoService.destroy()},q.prototype.setConfig=function(k){typeof k=="object"&&typeof k.bps=="number"&&(this.config.bps=k.bps,this.zegoService.setBps(this.config.bps)),typeof k=="object"&&typeof k.totalDBSize=="number"&&(this.staticConfig.totalDBSize=k.totalDBSize),typeof k=="object"&&typeof k.serverUrl=="string"&&k.serverUrl!==""&&(this.config.serverUrl=k.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},q.prototype.pause=function(){this.isPaused=!0},q.prototype.resume=function(){this.isPaused=!1;var k=this.pendingQueue.getPendingDataInfo();this.ot(k.pendingDataSize,k.size)},q.prototype.startReport=function(k){var G=k.get("userID"),xe=k.get("token");return!(!G||typeof G!="string"||!xe||typeof xe!="string"||(this.startCommonField=k,this.config.userID=G,this.config.token=xe,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.ht()&&this.ct(),(G=k.get("serverUrl"))&&(this.config.serverUrl=G,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(k=(xe=this.pendingQueue.getPendingDataInfo()).pendingDataSize,this.ot(k,xe.size)),0))},q.prototype.setTimeOffset=function(k){var G=this;this.clientTimeOffset=k,this.tempBuffer.forEach(function(xe){(xe=xe.data).tags.time_offset||(xe.tags.time_offset=G.clientTimeOffset)}),this.config.userID&&this.ct()},q.prototype.setProcessData=function(k){this.H.processData=k},q.prototype.on=function(k,G){return this.ft(k,G)},q.prototype.off=function(k,G){return this.lt(k,G)},q.prototype.report=function(k,G){var xe;if(15e3<k.length)return!1;try{xe=JSON.parse(k)}catch{return!1}return this.H.W.debug(k+" "+G),(xe!=null&&xe.id_name||(k=xe==null?void 0:xe.tags)!=null&&k.id_name||this.config.userID)&&this.ht()?(xe!=null&&xe.id_name||(k=xe==null?void 0:xe.tags)!=null&&k.id_name?this.clientTimeOffset&&(xe.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(xe.tags.time_offset=this.clientTimeOffset),xe.tags.id_name=this.config.userID),this.vt(JSON.stringify(xe),G)):this.tempBuffer.push({data:xe,level:G}),!0},q.prototype.setUnloadState=function(k){this.unloadLevel=k,this.state="unload"},q.prototype.vt=function(k,G){var xe=this,Ae=R.calculateMemSize(k),De=(this.traceType.MEM_I_API+=Ae,this.Y.add(8*Ae),T.getSeq()),Ie=new Date().getTime(),be={seq:De,content:k,level:G,timestamp:Ie};this.state==="unload"?this.unloadLevel!==void 0&&G<=this.unloadLevel?(this.storeHandler.saveDataToStorage(be),this.pendingQueue.enqueue(be,G)):this.H.W.debug("level is low"):G<=this.config.importantLevel?(be.key=G+"_"+Ie+"_"+De,this.dataInDb.push(be.key),this.storeHandler.storeData(be).then(function(qe){xe.pendingQueue.enqueue(be,G),xe.traceType.DB_I_BACKUP+=Ae}).catch(function(qe){var Ve=xe.dataInDb.findIndex(function(pe){return pe===be.key});-1<Ve&&xe.dataInDb.splice(Ve,1),xe.pendingQueue.enqueue(be,G)})):this.pendingQueue.enqueue(be,G),this.state==="force"&&(Ie=R.calculateMemSize(k),this.forceDataTotalLen+=Ie)},q.prototype.ht=function(){return this.isWaitNtpTimeout||this.clientTimeOffset!==void 0},q.prototype.ct=function(){var k,G=this.tempBuffer.shift();G&&(k=G.data,G=G.level,k.tags.id_name=this.config.userID,this.vt(JSON.stringify(k),G),this.ct())},q.prototype.isConfigOK=function(k){return k.userID!==""&&k.token!==""&&k.server!==""},q.prototype.testSize=function(k){},q.prototype.flush=function(k){var G;this.state!=="force"&&(this.state="force",G=16e6,typeof k=="object"&&typeof k.bps=="number"&&(G=k.bps),this.zegoService.setBps(G),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,0<(G=(k=this.pendingQueue.getPendingDataInfo()).pendingDataSize)?this.ot(G,k.size):this.rt())},q.prototype.setWaitNtpTimeout=function(k){this.waitNtpTimeout=k},q.prototype.st=function(){var k=this;this.ntpTimer=setTimeout(function(){k.isWaitNtpTimeout=!0,k.config.userID&&k.ct()},this.waitNtpTimeout)},q.prototype.et=function(){var k=this,G=(this.H.W.debug("startReportTimer "+new Date),this.timeInterval=!0,this.pendingQueue.getPendingDataInfo());this.ot(G.pendingDataSize,G.size),this.reportTimer=window.setTimeout(function(){k.et()},3e4)},q.prototype.ut=function(){return Y(this,void 0,void 0,function(){var k,G,xe=this;return re(this,function(Ae){switch(Ae.label){case 0:return G=this.pendingQueue.getPendingDataInfo(),k=G.pendingDataSize,G=G.size,k>this.config.reportSize||G>this.config.reportNum?[4,this.ot(k,G)]:[3,2];case 1:return Ae.sent(),[3,3];case 2:this.rt(),Ae.label=3;case 3:return this.checkDataTimer=window.setTimeout(function(){xe.ut()},15e3),[2]}})})},q.prototype.V=function(){var k=this,G=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(G?"pagehide":"beforeunload",function(){window.event&&(window.event.cancelBubble=!0),k.saveDataBeforeUnload()})},q.prototype.saveDataBeforeUnload=function(){var k=(k=this.pendingQueue.readStoreData(1)).storeArr,G=(this.storeHandler.resetCommonStore(),[]);G.push.apply(G,M(k)),k=this.zegoService.readReportQueueData(),G.push.apply(G,M(k)),0<G.length&&this.storeHandler.storePendingData(G)},q.prototype.setNetStateCheck=function(){this.postDataState==="fail"&&this.zegoService.handleNetConnect()},q.prototype.Z=function(k,G,xe){return Y(this,void 0,void 0,function(){var Ae,De,Ie,be,qe,Ve=this;return re(this,function(pe){switch(pe.label){case 0:for(this.H.W.debug("post suc"),this.postDataState="suc",k.forEach(function(j){Ve.traceType.MEM_O_DONE+=R.calculateMemSize(j.content)}),Ae=function(j){var B=k[j];De.storeHandler.removeDataItem(B).then(function(nt){B.key&&Ve.reportMap.delete(B.key)}).catch(function(nt){})},De=this,Ie=0;Ie<k.length;Ie++)Ae(Ie);return this.reportPackagesSize-=G,qe=this.pendingQueue.getPendingDataInfo(),be=qe.pendingDataSize,qe=qe.size,be>this.config.reportSize||qe>this.config.reportNum?[4,this.ot(be,qe)]:[3,2];case 1:return pe.sent(),[3,3];case 2:this.rt(),pe.label=3;case 3:return this.state==="force"&&this.reportPackagesSize==0&&(be=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,qe=1-Number((be/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this.it("progressUpdate",qe),0<this.storeHandler.storeSize)&&this.rt(function(j){j===0&&(Ve.state="normal",Ve.zegoService.setBps(Ve.config.bps||V.DEFAULT_CONFIG.bps),Ve.listenerList.forceSuccessCallback)&&Ve.it("forceResult","SUCCESS")}),[2]}})})},q.prototype.ot=function(k,G){return Y(this,void 0,void 0,function(){var xe,Ae,De,Ie,be;return re(this,function(qe){switch(qe.label){case 0:return k>this.config.reportSize||G>this.config.reportNum||["force","unload"].includes(this.state)||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:(this.H.W.debug("isPaused "+this.isPaused+" "+this.userID+" "+this.config.token+" "+this.config.serverUrl),k>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.tt(this.cacheDelPer)]:[3,2])):[3,7];case 1:qe.sent(),qe.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),k>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.tt(this.cacheDelPer)]:[3,5]);case 4:qe.sent(),qe.label=5;case 5:return[2];case 6:if(De=this.pendingQueue.readReportData(this.config.reportSize),xe=De.totalLen,De=De.reportDataArr,xe<=0)return[2];for(De=this.dt(De),this.zegoService.report(Ae=De.packageArr,De=De.packageLen,this.product,this.state==="unload"),Ie=0;Ie<Ae.length;Ie++)this.reportMap.set((be=Ae[Ie]).key,be);this.reportPackagesSize+=De,this.pendingQueue.refresh(xe),qe.label=7;case 7:return[2]}})})},q.prototype.nt=function(){var k=this;this.pendingQueue=new w.PendingQueue(this.config.levels,this.product,this.staticConfig,this.H),this.pendingQueue.setListener({enCallback:function(G,xe,Ae){return Y(k,void 0,void 0,function(){return re(this,function(De){switch(De.label){case 0:return[4,this.ot(Ae,xe)];case 1:return De.sent(),[2]}})})}})},q.prototype.yt=function(){var k=this;this.storeHandler.readStoreDataItem().then(function(G){var xe=R.calculateMemSize(G.content);k.traceType.MEM_I_LOAD+=xe,k.pendingQueue.enqueue(G,G.level)}).catch(function(G){})},q.prototype.tt=function(k){return Y(this,void 0,void 0,function(){var G,xe,Ae,De,Ie,be,qe,Ve,pe;return re(this,function(j){switch(j.label){case 0:xe=this.pendingQueue.readStoreData(k),G=xe.totalLen,xe=xe.storeArr,Ae=function(B){var nt,he;return re(this,function(it){switch(it.label){case 0:return it.trys.push([0,2,,3]),[4,De.wt(B,G)];case 1:return it.sent(),nt=B.level+"_"+B.timestamp+"_"+B.seq,-1<(he=De.dataInDb.findIndex(function(wt){return wt===nt}))&&De.dataInDb.splice(he,1),[3,3];case 2:return it.sent(),[3,3];case 3:return[2]}})},De=this,j.label=1;case 1:j.trys.push([1,6,7,8]),Ie=F(xe),be=Ie.next(),j.label=2;case 2:return be.done?[3,5]:[5,Ae(qe=be.value)];case 3:j.sent(),j.label=4;case 4:return be=Ie.next(),[3,2];case 5:return[3,8];case 6:return qe=j.sent(),Ve={error:qe},[3,8];case 7:try{be&&!be.done&&(pe=Ie.return)&&pe.call(Ie)}finally{if(Ve)throw Ve.error}return[7];case 8:return[2]}})})},q.prototype.$=function(k){var G=this;k.length&&k.forEach(function(xe){G.storeHandler.storeData(xe).then(function(Ae){var De=R.calculateMemSize(xe.content);G.traceType.MEM_O_DUMP+=De}).catch(function(Ae){})})},q.prototype.wt=function(k,G){var xe=this;return new Promise(function(Ae,De){return Y(xe,void 0,void 0,function(){var Ie;return re(this,function(be){switch(be.label){case 0:return be.trys.push([0,2,,3]),[4,this.storeHandler.storeData(k)];case 1:return be.sent(),Ie=R.calculateMemSize(k.content),this.traceType.MEM_O_DUMP+=Ie,Ae(),[3,3];case 2:return Ie=be.sent(),De(Ie),[3,3];case 3:return[2]}})})})},q.prototype.rt=function(k){var G=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),function(xe){return-1<G.dataInDb.indexOf(xe)}).then(function(xe){G.isLoadReportData=!1,xe.datas.forEach(function(Ae){var De;G.reportMap.has(Ae.key)||G.pendingQueue.findInQueue(Ae)||(De=R.calculateMemSize(Ae.content),G.traceType.MEM_I_LOAD+=De,G.pendingQueue.enqueue(Ae,Ae.level),G.dataInDb.push(Ae.key))}),k&&k(xe.len)}).catch(function(xe){G.isLoadReportData=!1}))},q.prototype.dt=function(k){var G=this,xe=0;return k.forEach(function(Ae){var De,Ie,be=JSON.parse(Ae.content);if(G.startCommonField)try{for(var qe=F(G.startCommonField),Ve=qe.next();!Ve.done;Ve=qe.next()){var pe=K(Ve.value,2),j=pe[0];j!=="userID"&&j!=="token"&&j!=="serverUrl"&&(be[j]=pe[1])}}catch(B){De={error:B}}finally{try{Ve&&!Ve.done&&(Ie=qe.return)&&Ie.call(qe)}finally{if(De)throw De.error}}xe+=R.calculateMemSize(be),Ae.content=JSON.stringify(be)}),{packageArr:k,packageLen:xe}},q.prototype.ft=function(k,G){return!!this.listenerList[k]&&typeof G=="function"&&(this.listenerList[k].indexOf(G)==-1&&this.listenerList[k].push(G),!0)},q.prototype.lt=function(k,G){var xe;return!!this.listenerList[k]&&(xe=this.listenerList[k],G?xe.splice(xe.indexOf(G),1):this.listenerList[k]=[],!0)},q.prototype.it=function(k){for(var G=[],xe=1;xe<arguments.length;xe++)G[xe-1]=arguments[xe];this.listenerList[k]&&this.listenerList[k].forEach(function(Ae){try{Ae.apply(void 0,M(G))}catch{}})},ne.ZegoDataReport=q},function(Qe,ne,oe){var fe=this&&this.__read||function(_,E){var w=typeof Symbol=="function"&&_[Symbol.iterator];if(!w)return _;var R,V,ae=w.call(_),q=[];try{for(;(E===void 0||0<E--)&&!(R=ae.next()).done;)q.push(R.value)}catch(k){V={error:k}}finally{try{R&&!R.done&&(w=ae.return)&&w.call(ae)}finally{if(V)throw V.error}}return q},Y=this&&this.__spread||function(){for(var _=[],E=0;E<arguments.length;E++)_=_.concat(fe(arguments[E]));return _},re=(Object.defineProperty(ne,"u",{value:!0}),ne.ZegoService=void 0,oe(0)),K=oe(26),M=oe(29),F=oe(4);function T(_,E,w,R,V){var ae,q,k,G=this;this.bt=_,this.gt=w,this.Ot=R,this.H=V,this.isDestroy=!1,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this._t=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=re.ENUM_NETWORK_STATE.online,this.state=0,this.St=(q=ae=0,k=function(){q=ae=0},{onOpen:function(){ae=performance.now()},onClose:function(){0<ae&&(performance.now()-ae<100?(q++,G.H.logger.info("zt.rzs.wfsc frequently shutdown.")):k())},isOutOfMaxTimes:function(){return 10<=q}}),this.Mt={offline:function(){G.networkState=re.ENUM_NETWORK_STATE.offline},online:function(xe){G.handleNetConnect()}},this.bindWindowListener(),this.networkState=re.ENUM_NETWORK_STATE.online,this.service=new K.LogService(_,w,R,V),this.service.onHbTimeout=function(){G.H.logger.warn("zt.rzs.ohbto hb timeout."),G.socketReconnect(!0,!0)},this.setBps(E),this.reportQueue=new re.Queue}Object.defineProperty(T.prototype,"speed",{get:function(){return this.service.speed},enumerable:!1,configurable:!0}),T.prototype.destroy=function(){this.Et(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),this.reportQueue.clear(),window.removeEventListener("offline",this.Mt.offline),window.removeEventListener("online",this.Mt.online),this.isDestroy=!0},T.prototype.bindWindowListener=function(){window.addEventListener("offline",this.Mt.offline),window.addEventListener("online",this.Mt.online)},T.prototype.handleNetConnect=function(){var _;this.networkState=re.ENUM_NETWORK_STATE.online,this.logType===1?this.socketReconnect():(_=this.url,this.url="",this.setLogServer(_)),this.netWorkFail=!1},T.prototype.setLogServer=function(_){try{return _.startsWith("wss:")||_.startsWith("ws:")?(this.logType=1,this.jt(_)):_.startsWith("https:")||_.startsWith("http:")?(this.logType=2,this.Tt(_)):this.logType=0,!0}catch{return!1}},T.prototype.setLogUrlParams=function(_){this.logParams=_},T.prototype.jt=function(_){var E,w=this;this.url!=_&&(this.url=_)&&(this.Et(),this.logParams.id_name)&&(this.St.isOutOfMaxTimes()?(this.H.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."),this.state=0):(this.state=1,E=_+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(E),this.H.logger.info("zt.rzs.owsls socket start "+_),this.service.openHandler(function(){w.service.onPush(),w.service.startCheck(),w.H.logger.info("zt.rzs.owsls socket open"),w.openHandler(),w.St.onOpen()}),this.service.closeHandler(function(R){w.H.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(R.code||R)),w.state=0,w.service.closeSocket(),w.St.onClose(),w.service.url&&w.H.keepLive&&w.socketReconnect(!1)}),this.service.errorHandler(function(R){w.H.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(R.code||R)),w.state=0,w.service.closeSocket(),w.service.url&&w.H.keepLive&&w.socketReconnect(!1)})))},T.prototype.Et=function(){this.service.closeSocket(!0),this.Nt&&(clearTimeout(this.Nt),this.Nt=void 0)},T.prototype.Tt=function(_){(this.url=_)&&this.At()},T.prototype.At=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},T.prototype.Rt=function(_,E,w,R){this.bt===re.ZEGO_ENV.BROWSER?this.It(_,E,w,R):this.SendHttpsLogWeChatMini(_,E,w,R)},T.prototype.It=function(_,E,w,R){var V=this,ae=(_=JSON.stringify({body:{data:_}}),new XMLHttpRequest);ae.onreadystatechange=function(){if(ae.readyState==4)if(ae.status==200){if(ae.responseText.length!=0)try{var q=JSON.parse(ae.responseText).interval;typeof q=="number"&&V.logUploadInterval!==q&&V.Tt(V.url),w&&w()}catch{R&&R()}}else R&&R()},ae.open("POST",this.url,!0),ae.send(_)},T.prototype.SendHttpsLogWeChatMini=function(_,E,w,R){var V=this;_={appid:this.logParams.appid+"",timestamp:new Date().getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:_})},wx.request({url:this.url,data:JSON.stringify(_),method:"POST",success:function(ae){ae.data.length!=0&&(typeof(ae=ae&&ae.data&&ae.data.interval)=="number"&&V.logUploadInterval!==ae&&V.Tt(V.url),w)&&w()},fail:function(ae){R&&R()}})},T.prototype.openHandler=function(){this.state=2,this.startReport()},T.prototype.setPostSucCallback=function(_,E){this.postSucCallbackList[_]=E},T.prototype.setPostFailCallback=function(_,E){this.postFailCallbackList[_]=E},T.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},T.prototype.report=function(_,E,w,R){this.packageLen++,this.packagesDataSize+=E,this.reportQueue.enqueue({reportDatas:_,dataLen:E,product:w}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport(R)},T.prototype.setBps=function(_){this.tokenBucket=new M.TokenBucket(F.BUCKET_CONFIG.bucketSize,_/8,"sec")},T.prototype.startReport=function(_){var E,w,R,V,ae=this;this.isDestroy||this.logType===1&&this.socketReconnect()||0<this.reportQueue.size()&&(E=this.reportQueue.dequeue(),w=E.reportDatas,R=E.dataLen,V=E.product,_?this.sendReport(w,R,V):this.tokenBucket.removeTokens(R,function(){ae.sendReport(w,R,V)}))},T.prototype.kt=function(){if(this.failCount<=0)return!1;this.failCount==1&&(this.failStartTime=Date.now());var _=(Date.now()-this.failStartTime)/1e3;return this.failCount>=F.FAIL_COUNT&&_>F.FAIL_TIME||this.failCount>=F.FAIL_MAX_COUNT},T.prototype.sendReport=function(_,E,w){var R=this;this.reportData(_,E,w,function(){R.failCount=0,R.failStartTime=0,R.packageLen--,R.packagesDataSize-=E,R.postSucCallbackList[w]&&R.postSucCallbackList[w](_,E,w)},function(V){var ae;R.reportQueue.enqueue({reportDatas:_,dataLen:E,product:w}),R.failCount++,R.kt()?(R.netWorkFail=!0,ae=R.decodeReportQueue(),Object.keys(R.postFailCallbackList).forEach(function(q){R.postFailCallbackList[w](ae[q])})):R.startReport()})},T.prototype.resumeReport=function(){this.netWorkFail===!0&&this.networkState===re.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},T.prototype.reportData=function(_,E,w,R,V){var ae=this,q=[];_.forEach(function(k){q.push(JSON.parse(k.content))}),this.logType==1?this.networkState===re.ENUM_NETWORK_STATE.offline?V&&V(re.errorList.BROKEN):this.service.sendMessage("report",q,R,function(k){var G;ae.state===0&&k===re.SOCKET_DISCONNECT&&(G=ae.url,ae.url="",ae.setLogServer(G)),V&&V(k)}):this.logType==2&&this.Rt(q,E,R,function(){V&&V()})},T.prototype.unsigned2signed=function(_){var E=parseInt(_,10);if(256<E)return E%256;for(var w=[];0<E;)w.push(E%2!=0?1:0),E=Number(E/2);for(w.reverse();w.length<8;)w.unshift(0);var R="";if((w=w.join("")).substr(0,1)==1){for(var V=1;V<w.length;V++)w.substr(V,1)==1?R+=0:R+=1;return"-"+(parseInt(R,2)+1)}for(V=0;V<w.length;V++)R+=w.substr(V,1);return parseInt(R,2)},T.prototype.decodeReportQueue=function(){for(var _={},E=this.reportQueue.size(),w=0;w<E;w++){var R=this.reportQueue.dequeue(),V=R.reportDatas,ae=R.dataLen;_[R=R.product]||(_[R]=[]),_[R]=Y(_[R],V),this.reportQueue.enqueue({reportDatas:V,dataLen:ae,product:R})}return _},T.prototype.readReportQueueData=function(){for(var _=[],E=this.reportQueue.size(),w=0;w<E;w++){var R=this.reportQueue.dequeue().reportDatas;_.push.apply(_,Y(R))}return _},T.prototype.socketReconnect=function(_,E){var w=this,R=(_===void 0&&(_=!0),(E=E!==void 0&&E)||this.state===0);return this.Nt&&!_||R&&(_&&this.Nt&&(clearTimeout(this.Nt),this.Nt=void 0),this.Nt||(this.Nt=setTimeout(function(){var V;!w.isDestroy&&(w.Nt&&(clearTimeout(w.Nt),w.Nt=void 0),E||w.state===0)&&(V=w.url,w.url="",w.setLogServer(V))},_?0:5e3))),R},ne.ZegoService=T},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.LogService=void 0;var fe=oe(27),Y=oe(4),re=oe(0);function K(M,F,T,_){this.bt=M,this.gt=F,this.Ot=T,this.H=_,this.Dt=new fe.ZegoSocketService(this.bt,this.gt,this.Ot,this.H),this.xt=0,this.Pt={},this.Bt=void 0,this.checkHbTimer=void 0}Object.defineProperty(K.prototype,"url",{get:function(){return this.Ut},enumerable:!1,configurable:!0}),Object.defineProperty(K.prototype,"speed",{get:function(){return this.Dt.speed},enumerable:!1,configurable:!0}),K.prototype.zt=function(M){var F,T,_=this,E=this.Dt.sendCommandMap[M.messageId||((E=M==null?void 0:M.data)==null?void 0:E.message_id)];E!=null&&(T=E.v,delete this.Dt.sendCommandMap[M.messageId||((F=M==null?void 0:M.data)==null?void 0:F.message_id)],this.Dt.sendCommandList.remove(E),M.code===0?setTimeout(function(){T&&T.success!=null&&T.success(M,_.xt)},0):setTimeout(function(){T&&T.error!=null&&T.error(M,_.xt)},0))},K.prototype.onPush=function(){var M=this;this.Dt.onMessage=function(F){M.H.keepLive&&(M.Bt=performance.now(),M.startHbTimer()),M.zt(F)}},K.prototype.closeHandler=function(M){this.Dt.closeHandler(function(F){M(F)})},K.prototype.openHandler=function(M){var F=this;this.Dt.openHandler(function(){F.H.keepLive&&(F.Bt=performance.now(),F.startHbTimer()),M&&M()})},K.prototype.errorHandler=function(M){this.Dt.errorHandler(function(F){M(F)})},K.prototype.Lt=function(M){return{Protocol:"req",cmd:M,appid:123,seq:++this.xt,session_id:""}},K.prototype.startCheck=function(){this.Dt.startCheck()},K.prototype.stopCheck=function(){this.Dt.stopCheck()},K.prototype.isDisConnect=function(){return!this.Dt||this.Dt.isDisConnect()},K.prototype.createSocket=function(M){this.Dt.createSocket(M),this.Pt={},this.Ut=M},K.prototype.closeSocket=function(M){M===void 0&&(M=!1),this.Bt=void 0,this.clearHbTimer(),this.Dt.closeSocket(),M&&(this.Ut=void 0)},K.prototype.sendMessage=function(M,F,T,_,E){return this.Dt.isDisConnect()?(_&&_(re.SOCKET_DISCONNECT),0):(E=E||this.Lt(M),this.Dt.sendMessage(E,F,T,_,{timeOut:1e3*Y.DEFAULT_CONFIG.netTimeout}))},K.prototype.on=function(M,F){this.Pt[M]=F},K.prototype.clearHbTimer=function(){this.checkHbTimer&&(clearTimeout(this.checkHbTimer),this.checkHbTimer=void 0)},K.prototype.startHbTimer=function(){var M=this;this.clearHbTimer(),this.Dt.isDisConnect()||(this.Bt!==void 0&&15e3<performance.now()-this.Bt?this.Ut&&this.onHbTimeout():this.checkHbTimer=setTimeout(function(){M.Dt.isDisConnect()||(M.sendMessage("report",[]),M.startHbTimer())},5e3))},K.prototype.onHbTimeout=function(){},ne.LogService=K},function(Qe,ne,oe){var fe=this&&this.__assign||function(){return(fe=Object.assign||function(F){for(var T,_=1,E=arguments.length;_<E;_++)for(var w in T=arguments[_])Object.prototype.hasOwnProperty.call(T,w)&&(F[w]=T[w]);return F}).apply(this,arguments)},Y=(Object.defineProperty(ne,"u",{value:!0}),ne.ZegoSocketService=void 0,oe(28)),re=oe(0),K=oe(11);function M(F,T,_,E){this.gt=T,this.Ot=_,this.H=E,this.Jt=null,this.sendCommandList=new re.LinkedList,this.sendCommandMap={},this.qt=100,this.Ct=3e4,this.Ft=2e3,this.Mt={},this.ENV=F,this.Y=new K.SpeedUtil("tracer upload")}Object.defineProperty(M.prototype,"speed",{get:function(){return this.Y.speed},enumerable:!1,configurable:!0}),M.prototype.createSocket=function(F){var T=this;this.Jt=Y.createZegoWebSocket(F,this.ENV,this.H.proxyCtrl),this.Jt.onclose=function(_){T.Mt.close&&T.Mt.close(_)},this.Jt.onerror=function(_){T.Mt.error&&T.Mt.error(_)},this.Jt.binaryType="arraybuffer",this.Y.start(3e3)},M.prototype.closeSocket=function(){this.Jt&&(this.Jt.onclose=null,this.Jt.onerror=null,this.Jt.close(),this.Jt=null,this.Y.stop())},M.prototype.isDisConnect=function(){return!this.Jt||this.Jt.readyState!==1},M.prototype.sendMessage=function(F,T,_,E,w){w===void 0&&(w={timeOut:6e3});var R=fe(fe({},this.H.processData),{time_upload:Date.now()});return R={data:T={message_id:F.seq,product:this.gt,s:JSON.stringify({speed_detail:T,process:R})},seq:F.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:w.timeOut,success:_,error:E},w=this.sendCommandList.push(R),this.sendCommandMap[R.seq]=w,this.Jt&&this.Ot!=="pb"&&(_=JSON.stringify(T),this.H.W.debug("zt.zss.sm upload data: "+_),E=this.H.deflate(_),this.Y.add(8*_.length),this.Jt.send(E)),F.seq},M.prototype.Wt=function(F){for(var T=F.getFirst();T!=null;)F.remove(T),T.v&&T.v.error&&setTimeout(function(){T&&T.v&&T.v.error&&T.v.error(re.errorList.TIMEOUT,T.v.data.message_id,T.v.data.s)},0),T=F.getFirst()},M.prototype.Xt=function(F,T){for(var _=F.getFirst(),E=Date.parse(new Date+""),w=0;!(_==null||_.v&&_.v.sendTime+_.v.timeOut>E||(_.v&&delete T[_.v.data.message_id],F.remove(_),!(_.v&&_.v.error==null||_.v&&_.v.sendTime+this.Ct<E)&&_&&_.v&&_.v.error&&_.v.error(re.errorList.TIMEOUT,_.v.data.message_id,_.v.data.s),++w>=this.qt));)_=F.getFirst()},M.prototype.startCheck=function(){var F=this;this.Xt(this.sendCommandList,this.sendCommandMap),this.Kt=setTimeout(function(){F.startCheck()},this.Ft)},M.prototype.stopCheck=function(){this.Wt(this.sendCommandList),clearTimeout(this.Kt)},M.prototype.openHandler=function(F){var T=this;this.Jt&&(this.Jt.onopen=function(_){T.responseHandler(),F(_)})},M.prototype.responseHandler=function(){var F=this;this.Jt&&(this.Jt.onmessage=function(T){T=typeof T.data=="string"?JSON.parse(T.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(T.data))),F.onMessage(T)})},M.prototype.closeHandler=function(F){this.Mt.close=F},M.prototype.errorHandler=function(F){this.Mt.error=F},M.prototype.onMessage=function(F){},ne.ZegoSocketService=M},function(Qe,ne,oe){Object.defineProperty(ne,"u",{value:!0}),ne.createZegoWebSocket=ne.ZegoWeiXinMiniWebSocket=void 0;var fe=oe(0),Y=(re.prototype.init=function(){var K=this;this.Gt&&(this.readyState=0,this.Gt.onOpen(function(M){K.readyState=K.Gt.readyState,typeof K.onopen=="function"&&(K.onopen(M),K.Gt.onClose(function(F){K.readyState=K.Gt.readyState,typeof K.onclose=="function"&&K.onclose(F)}),K.Gt.onMessage(function(F){typeof K.onmessage=="function"&&K.onmessage(F)}))}),this.Gt.onError(function(M){K.readyState=K.Gt.readyState,typeof K.onerror=="function"&&K.onerror(M)}))},re.prototype.onopen=function(K){},re.prototype.onerror=function(K){},re.prototype.onclose=function(K){},re.prototype.onmessage=function(K){},re.prototype.send=function(K){this.Gt&&this.Gt.send({data:K})},re.prototype.close=function(){this.Gt&&this.Gt.close()},re);function re(K,M){this.url=K,this.readyState=3,this.Gt=wx.connectSocket({url:K}),this.init()}ne.ZegoWeiXinMiniWebSocket=Y,ne.createZegoWebSocket=function(K,M,F){return M%2===fe.ZEGO_ENV.BROWSER?(M=K,F?F.createSocket(M,1):new WebSocket(M)):new Y(K)}},function(Qe,ne,oe){function fe(Y,re,K,M){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=Y,this.tokensPerInterval=re,typeof K=="string")switch(K){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+K)}else this.interval=K;this.parentBucket=M,this.content=0,this.lastDrip=+new Date}Object.defineProperty(ne,"u",{value:!0}),ne.TokenBucket=void 0,fe.prototype.removeTokens=function(Y,re){var K=this;return this.bucketSize?Y>this.bucketSize?(setTimeout(re.bind(null,"Requested tokens "+Y+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),Y>this.content?M():this.parentBucket?this.parentBucket.removeTokens(Y,function(F,T){return F?re(F,null):Y>K.content?M():(K.content-=Y,void re(null,Math.min(T,K.content)))}):(this.content-=Y,setTimeout(re.bind(null,null,this.content),0),!0)):(setTimeout(re.bind(null,null,Y,Number.POSITIVE_INFINITY),0),!0);function M(){var F=Math.ceil(K.interval/K.tokensPerInterval*(Y-K.content));return setTimeout(function(){K.removeTokens(Y,re)},F),!1}},fe.prototype.tryRemoveTokens=function(Y){if(this.bucketSize){if(Y>this.bucketSize||(this.drip(),Y>this.content)||this.parentBucket&&!this.parentBucket.tryRemoveTokens(Y))return!1;this.content-=Y}return!0},fe.prototype.drip=function(){var Y,re;this.tokensPerInterval?(re=+new Date,Y=Math.max(re-this.lastDrip,0),this.lastDrip=re,re=Y*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+re,this.bucketSize)):this.content=this.bucketSize},ne.TokenBucket=fe},function(Qe,ne,oe){var fe=this&&this.__awaiter||function(E,w,R,V){return new(R=R||Promise)(function(ae,q){function k(Ae){try{xe(V.next(Ae))}catch(De){q(De)}}function G(Ae){try{xe(V.throw(Ae))}catch(De){q(De)}}function xe(Ae){var De;Ae.done?ae(Ae.value):((De=Ae.value)instanceof R?De:new R(function(Ie){Ie(De)})).then(k,G)}xe((V=V.apply(E,w||[])).next())})},Y=this&&this.__generator||function(E,w){var R,V,ae,q={label:0,sent:function(){if(1&ae[0])throw ae[1];return ae[1]},trys:[],ops:[]},k={next:G(0),throw:G(1),return:G(2)};return typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function G(xe){return function(Ae){var De=[xe,Ae];if(R)throw new TypeError("Generator is already executing.");for(;q;)try{if(R=1,V&&(ae=2&De[0]?V.return:De[0]?V.throw||((ae=V.return)&&ae.call(V),0):V.next)&&!(ae=ae.call(V,De[1])).done)return ae;switch(V=0,(De=ae?[2&De[0],ae.value]:De)[0]){case 0:case 1:ae=De;break;case 4:return q.label++,{value:De[1],done:!1};case 5:q.label++,V=De[1],De=[0];continue;case 7:De=q.ops.pop(),q.trys.pop();continue;default:if(!(ae=0<(ae=q.trys).length&&ae[ae.length-1])&&(De[0]===6||De[0]===2)){q=0;continue}if(De[0]===3&&(!ae||De[1]>ae[0]&&De[1]<ae[3]))q.label=De[1];else if(De[0]===6&&q.label<ae[1])q.label=ae[1],ae=De;else{if(!(ae&&q.label<ae[2])){ae[2]&&q.ops.pop(),q.trys.pop();continue}q.label=ae[2],q.ops.push(De)}}De=w.call(E,q)}catch(Ie){De=[6,Ie],V=0}finally{R=ae=0}if(5&De[0])throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}}},re=this&&this.__importDefault||function(E){return E&&E.u?E:{default:E}},K=(Object.defineProperty(ne,"u",{value:!0}),ne.ZegoStoreHandler=void 0,oe(12)),M=oe(5),F=oe(4),T=re(oe(13));function _(E,w,R,V,ae,q,k){this._=E,this.Ht=w,this.Yt=R,this.Vt=V,this.Zt=ae,this.H=q,this.gt=k,this.storeSize=0,this.storeTime=0,this.storeDelPer=F.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.storesKeys="",this.transStores=[],this.store=K.createZegoStore(E,R.env,w),this.commonStore=K.createZegoStore("data_common",R.env,"reporter")}Object.defineProperty(_.prototype,"Qt",{get:function(){return"z_t_"+this.gt+"_"+this.Yt.appID},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"$t",{get:function(){return"z_store_keys"},enumerable:!1,configurable:!0}),_.prototype.init=function(){return fe(this,void 0,void 0,function(){var E,w;return Y(this,function(R){switch(R.label){case 0:return R.trys.push([0,6,,7]),this.setCommonStoreState(),[4,this.transferStoreData()];case 1:return R.sent(),[4,this.commonStore.getItem(this._+this.interSymbol+this.Ht)];case 2:return(E=R.sent())?[3,4]:[4,this.commonStore.setItem(this._+this.interSymbol+this.Ht,w={storeSize:this.storeSize,lock:0,pros:1})];case 3:return R.sent(),[3,5];case 4:w=typeof E=="string"?JSON.parse(E):E,this.storeSize=w.storeSize,R.label=5;case 5:return[3,7];case 6:return R.sent(),[3,7];case 7:return[2]}})})},_.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},_.prototype.setCommonStoreState=function(){var E=this,w=(this.getStorage(this.$t)||"").split(";");this.transStores=w.filter(function(R){return R.includes(E.Yt.appID+"")&&R.includes(E.gt)}),w=w.filter(function(R){return!R.includes(E.Yt.appID+"")||!R.includes(E.gt)}),this.storesKeys=w.join(";")},_.prototype.resetCommonStore=function(){return fe(this,void 0,void 0,function(){return Y(this,function(E){switch(E.label){case 0:return this.saveStorage(this.$t,this.storesKeys+(0<this.storesKeys.length?";":"")+this._+this.interSymbol+this.Ht),[4,this.commonStore.setItem(this._+this.interSymbol+this.Ht,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return E.sent(),[2]}})})},_.prototype.transferStoreData=function(){return fe(this,void 0,void 0,function(){var E,w,R,V,ae=this;return Y(this,function(q){switch(q.label){case 0:return[4,this.commonStore.keys()];case 1:E=q.sent(),w=function(k){var G,xe,Ae,De,Ie,be,qe,Ve;return Y(this,function(pe){switch(pe.label){case 0:return(G=E[k])===R._+R.interSymbol+R.Ht?[3,9]:[4,R.commonStore.getItem(G)];case 1:return(xe=typeof(xe=pe.sent())=="string"?JSON.parse(xe):xe).lock||xe.pros&&!R.transStores.includes(G)?[3,9]:(De=G.split(R.interSymbol),[4,(Ie=K.createZegoStore(Ae=De[0],R.Yt.env,De=De[1])).keys()]);case 2:return(be=pe.sent()).length!=0?[3,3]:[3,8];case 3:return xe.lock=1,[4,R.commonStore.setItem(G,xe)];case 4:pe.sent(),qe=function(j){var B,nt,he;return Y(this,function(it){switch(it.label){case 0:return[4,Ie.getItem(B=be[j])];case 1:return nt=it.sent(),B.indexOf("pending")!==-1?nt&&JSON.parse(nt).forEach(function(wt){return fe(ae,void 0,void 0,function(){return Y(this,function(Ee){switch(Ee.label){case 0:return[4,this.storeData(wt)];case 1:return Ee.sent(),[2]}})})}):(he=M.analyzeKey(B),R.storeData({level:he.level,timestamp:he.timestamp,seq:he=he.seq,content:nt})),setTimeout(function(){return fe(ae,void 0,void 0,function(){return Y(this,function(wt){switch(wt.label){case 0:return[4,Ie.removeItem(B)];case 1:return wt.sent(),[2]}})})},300),[2]}})},Ve=0,pe.label=5;case 5:return Ve<be.length?[5,qe(Ve)]:[3,8];case 6:pe.sent(),pe.label=7;case 7:return Ve++,[3,5];case 8:R.drops.push({name:Ae,storeName:De}),pe.label=9;case 9:return[2]}})},R=this,V=0,q.label=2;case 2:return V<E.length?[5,w(V)]:[3,5];case 3:q.sent(),q.label=4;case 4:return V++,[3,2];case 5:return this.transportStorageData(),setTimeout(function(){return fe(ae,void 0,void 0,function(){var k,G,xe;return Y(this,function(Ae){switch(Ae.label){case 0:k=0,Ae.label=1;case 1:if(!(k<this.drops.length))return[3,7];G=(xe=this.drops[k]).name,xe=xe.storeName,Ae.label=2;case 2:return Ae.trys.push([2,5,,6]),[4,this.dropInstance(G,xe)];case 3:return Ae.sent(),[4,this.commonStore.removeItem(G+this.interSymbol+xe)];case 4:case 5:return Ae.sent(),[3,6];case 6:return k++,[3,1];case 7:return[2]}})})},1e3),[2]}})})},_.prototype.dropInstance=function(E,w){return new Promise(function(R,V){T.default.dropInstance({name:E+":"+w}).then(function(){R()}).catch(function(ae){V(ae)})})},_.prototype.setDropCallBack=function(E){this.dropCallBack=E},_.prototype.storeData=function(E){var w=this;return new Promise(function(R,V){return fe(w,void 0,void 0,function(){var ae,q,k,G,xe=this;return Y(this,function(Ae){switch(Ae.label){case 0:q=E.content,k=(ae=E.level)+"_"+E.timestamp+"_"+E.seq,Ae.label=1;case 1:return Ae.trys.push([1,3,,4]),[4,this.store.getItem(k)];case 2:return Ae.sent()?(R(),[2]):[3,4];case 3:return Ae.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(E),[2];if(G=M.calculateMemSize(k)+M.calculateMemSize(q),this.Zt.totalDBSize-G<=0)return this.dropDBData(ae,k,q).then(function(){xe.droping=!1,xe.bufferDump()}).catch(function(De){}),R(),[2];Ae.label=5;case 5:return Ae.trys.push([5,8,,9]),[4,this.store.setItem(k,q)];case 6:return Ae.sent(),this.storeSize+=G,this.Zt.totalDBSize-=G,[4,this.ti()];case 7:return Ae.sent(),R(),[3,9];case 8:return Ae.sent().name==="QuotaExceededError"&&this.dropDBData(ae,k,q).then(function(){xe.droping=!1,xe.bufferDump()}).catch(function(De){}),[3,9];case 9:return[2]}})})})},_.prototype.loadPendingData=function(){return fe(this,void 0,void 0,function(){var E=this;return Y(this,function(w){switch(w.label){case 0:return[4,this.store.keys()];case 1:return w.sent().forEach(function(R){return fe(E,void 0,void 0,function(){var V,ae=this;return Y(this,function(q){switch(q.label){case 0:return R.indexOf("pending")===-1?[3,3]:[4,this.store.getItem(R)];case 1:return(V=q.sent())?(JSON.parse(V).forEach(function(k){return fe(ae,void 0,void 0,function(){return Y(this,function(G){switch(G.label){case 0:return[4,this.storeData(k)];case 1:return G.sent(),[2]}})})}),[4,this.store.removeItem(R)]):[3,3];case 2:q.sent(),q.label=3;case 3:return[2]}})})}),[2]}})})},_.prototype.storePendingData=function(E){return fe(this,void 0,void 0,function(){return Y(this,function(w){switch(w.label){case 0:return[4,this.store.setItem("pending"+new Date().getTime(),JSON.stringify(E))];case 1:return w.sent(),[2]}})})},_.prototype.bufferDump=function(){return fe(this,void 0,void 0,function(){var E;return Y(this,function(w){switch(w.label){case 0:return(E=this.bufferData.pop())?[4,this.storeData(E)]:[3,2];case 1:w.sent(),this.bufferDump(),w.label=2;case 2:return[2]}})})},_.prototype.dropDBData=function(E,w,R){return fe(this,void 0,void 0,function(){var V=this;return Y(this,function(ae){return this.droping=!0,[2,new Promise(function(q,k){return fe(V,void 0,void 0,function(){var G,xe,Ae,De,Ie;return Y(this,function(be){switch(be.label){case 0:return be.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(G=be.sent()).reverse(),xe=Math.ceil(G.length*this.storeDelPer),Ae=0,be.label=2;case 2:return Ae<xe?[4,this.store.getItem(G[Ae])]:[3,7];case 3:return(De=be.sent())==null?[3,6]:[4,this.store.removeItem(G[Ae])];case 4:return be.sent(),Ie=M.calculateMemSize(G[Ae])+M.calculateMemSize(De),this.Zt.totalDBSize+=Ie,this.storeSize-=Ie,[4,this.ti()];case 5:be.sent(),this.dropCallBack(De),be.label=6;case 6:return Ae++,[3,2];case 7:return[4,this.store.setItem(w,R)];case 8:return be.sent(),this.storeSize+=M.calculateMemSize(w)+M.calculateMemSize(R),[4,this.ti()];case 9:return be.sent(),q(),[3,11];case 10:return Ie=be.sent(),k(Ie),[3,11];case 11:return[2]}})})})]})})},_.prototype.removeDataItem=function(E){var w=this;return new Promise(function(R,V){return fe(w,void 0,void 0,function(){var ae,q,k;return Y(this,function(G){switch(G.label){case 0:ae=(ae=E.level)+"_"+E.timestamp+"_"+E.seq,G.label=1;case 1:return G.trys.push([1,6,,7]),[4,this.store.getItem(ae)];case 2:return(q=G.sent())?[4,this.store.removeItem(ae)]:[3,5];case 3:return G.sent(),k=M.calculateMemSize(this.Yt.env==1?JSON.parse(q):q),k=M.calculateMemSize(ae)+k,this.storeSize-=k,this.Zt.totalDBSize+=k,this.Vt.DB_O_DONE+=k,[4,this.ti()];case 4:G.sent(),R(),G.label=5;case 5:return[3,7];case 6:return k=G.sent(),V(k),[3,7];case 7:return[2]}})})})},_.prototype.ti=function(){return fe(this,void 0,void 0,function(){return Y(this,function(E){switch(E.label){case 0:return E.trys.push([0,4,,5]),[4,this.commonStore.getItem(this._+this.interSymbol+this.Ht)];case 1:return E.sent()?[4,this.commonStore.setItem(this._+this.interSymbol+this.Ht,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:E.sent(),E.label=3;case 3:return[3,5];case 4:return E.sent(),[3,5];case 5:return[2]}})})},_.prototype.readStoreDataItem=function(){var E=this;return new Promise(function(w,R){return fe(E,void 0,void 0,function(){var V,ae,q,k;return Y(this,function(G){switch(G.label){case 0:return G.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return V=G.sent(),[4,this.store.getItem(V[0])];case 2:return ae=G.sent(),q=M.analyzeKey(V[0]),w({level:k=q.level,timestamp:q.timestamp,seq:q.seq,content:ae}),[3,4];case 3:return k=G.sent(),R(k),[3,4];case 4:return[2]}})})})},_.prototype.loadDBData=function(E,w,R,V){var ae=this;return new Promise(function(q,k){return fe(ae,void 0,void 0,function(){var G,xe,Ae,De,Ie,be,qe,Ve,pe,j;return Y(this,function(B){switch(B.label){case 0:return B.trys.push([0,6,,7]),[4,this.store.keys()];case 1:G=B.sent(),xe=[],be=Ie=De=Ae=0,B.label=2;case 2:return be<G.length?V(G[be])?[3,4]:[4,this.store.getItem(G[be])]:[3,5];case 3:if((qe=B.sent())==null)return[3,4];if(Ve=M.analyzeKey(G[be]),xe.push({level:pe=Ve.level,timestamp:j=Ve.timestamp,seq:Ve=Ve.seq,content:qe,key:G[be]}),pe=M.calculateMemSize(qe),De+=pe,E<=(Ae+=pe)&&(Ae=0,Ie++),w<=Ie&&R<=De)return[3,5];B.label=4;case 4:return be++,[3,2];case 5:return q({datas:xe,len:De}),[3,7];case 6:return j=B.sent(),k(j),[3,7];case 7:return[2]}})})})},_.prototype.sortKeys=function(E,w){w===void 0&&(w=!1),E.sort(function(R,V){return R=R.split("_"),+(V=V.split("_"))[0]-+R[0]||+V[1]-+R[1]||+V[2]-+R[2]}),w&&E.reverse()},_.prototype.saveStorage=function(E,w){try{localStorage.setItem(E,w)}catch{this.H.W.debug("storage set err")}},_.prototype.getStorage=function(E){try{return localStorage.getItem(E)}catch{this.H.W.debug("storage get err")}},_.prototype.saveDataToStorage=function(E){try{this.saveStorage(this.Qt+"_"+E.level+"_"+E.timestamp+"_"+E.seq,E.content)}catch(w){this.H.W.debug("saveDataToStorage "+JSON.stringify(w))}},_.prototype.transportStorageData=function(){for(var E=[],w=0;w<localStorage.length;w++){var R,V,ae,q,k=localStorage.key(w);this.H.W.debug("transportStorageData "+k),k!=null&&k.startsWith(this.Qt)&&(ae=k.replace(this.Qt+"_",""),R=(ae=M.analyzeKey(ae)).level,V=ae.timestamp,ae=ae.seq,typeof(q=this.getStorage(k))=="string"&&this.storeData({level:R,timestamp:V,seq:ae,content:q}),E.push(k))}setTimeout(function(){for(var G=0;G<E.length;G++)localStorage.removeItem(E[G])},100)},ne.ZegoStoreHandler=_},function(Qe,ne,oe){var fe=oe(32),Y=oe(33).Buffer;function re(K){return function(M){if(Y.isBuffer(M))return M.length;switch(typeof M){case"string":return M.length*fe.STRING;case"boolean":return fe.BOOLEAN;case"number":return fe.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(M)?Symbol.keyFor(M).length*fe.STRING:(M.toString().length-8)*fe.STRING;case"object":if(Array.isArray(M))return M.map(re(K)).reduce(function(V,ae){return V+ae},0);var F=K,T=M;if(T==null)return 0;for(var _=0,E=(V=>{var ae,q=[];for(ae in V)q.push(ae);return Object.getOwnPropertySymbols&&(V=Object.getOwnPropertySymbols(V),Array.prototype.push.apply(q,V)),q})(T),w=0;w<E.length;w++){var R=E[w];if(typeof T[R]=="object"&&T[R]!==null){if(F.has(T[R]))continue;F.add(T[R])}_+=re(F)(R);try{_+=re(F)(T[R])}catch(V){V instanceof RangeError&&(_=0)}}return _;default:return 0}}}Qe.exports=function(K){return re(new WeakSet)(K)}},function(Qe,ne){Qe.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(Qe,ne,oe){(function(fe){var Y=oe(35),re=oe(36),K=oe(37);function M(){return T.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function F(Ee,Oe){if(M()<Oe)throw new RangeError("Invalid typed array length");return T.TYPED_ARRAY_SUPPORT?(Ee=new Uint8Array(Oe)).__proto__=T.prototype:(Ee=Ee===null?new T(Oe):Ee).length=Oe,Ee}function T(Ee,Oe,rt){if(!(T.TYPED_ARRAY_SUPPORT||this instanceof T))return new T(Ee,Oe,rt);if(typeof Ee!="number")return _(this,Ee,Oe,rt);if(typeof Oe=="string")throw new Error("If encoding is specified then the first argument must be a string");return w(this,Ee)}function _(Ee,Oe,rt,me){if(typeof Oe=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&Oe instanceof ArrayBuffer){var Se=Ee,ge=Oe,ve=rt;if(ve<0||ge.byteLength<ve)throw new RangeError("'offset' is out of bounds");if(ge.byteLength<ve+(me||0))throw new RangeError("'length' is out of bounds");return ge=ve===void 0&&me===void 0?new Uint8Array(ge):me===void 0?new Uint8Array(ge,ve):new Uint8Array(ge,ve,me),T.TYPED_ARRAY_SUPPORT?(Se=ge).__proto__=T.prototype:Se=R(Se,ge),Se}if(typeof Oe!="string"){if(ve=Ee,T.isBuffer(me=Oe))return(ve=F(ve,ge=0|V(me.length))).length!==0&&me.copy(ve,0,0,ge),ve;if(me){if(typeof ArrayBuffer<"u"&&me.buffer instanceof ArrayBuffer||"length"in me)return typeof me.length!="number"||(ge=me.length)!=ge?F(ve,0):R(ve,me);if(me.type==="Buffer"&&K(me.data))return R(ve,me.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(Se=Ee,me=Oe,T.isEncoding(Ee=typeof(Ee=rt)=="string"&&Ee!==""?Ee:"utf8"))return(me=(Se=F(Se,Oe=0|ae(me,Ee))).write(me,Ee))!==Oe?Se.slice(0,me):Se;throw new TypeError('"encoding" must be a valid string encoding')}function E(Ee){if(typeof Ee!="number")throw new TypeError('"size" argument must be a number');if(Ee<0)throw new RangeError('"size" argument must not be negative')}function w(Ee,Oe){if(E(Oe),Ee=F(Ee,Oe<0?0:0|V(Oe)),!T.TYPED_ARRAY_SUPPORT)for(var rt=0;rt<Oe;++rt)Ee[rt]=0;return Ee}function R(Ee,Oe){var rt=Oe.length<0?0:0|V(Oe.length);Ee=F(Ee,rt);for(var me=0;me<rt;me+=1)Ee[me]=255&Oe[me];return Ee}function V(Ee){if(M()<=Ee)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M().toString(16)+" bytes");return 0|Ee}function ae(Ee,Oe){if(T.isBuffer(Ee))return Ee.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Ee)||Ee instanceof ArrayBuffer))return Ee.byteLength;var rt=(Ee=typeof Ee!="string"?""+Ee:Ee).length;if(rt===0)return 0;for(var me=!1;;)switch(Oe){case"ascii":case"latin1":case"binary":return rt;case"utf8":case"utf-8":case void 0:return he(Ee).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*rt;case"hex":return rt>>>1;case"base64":return it(Ee).length;default:if(me)return he(Ee).length;Oe=(""+Oe).toLowerCase(),me=!0}}function q(Ee,Oe,rt){var me=Ee[Oe];Ee[Oe]=Ee[rt],Ee[rt]=me}function k(Ee,Oe,rt,me,Se){if(Ee.length===0)return-1;if(typeof rt=="string"?(me=rt,rt=0):2147483647<rt?rt=2147483647:rt<-2147483648&&(rt=-2147483648),rt=+rt,(rt=(rt=isNaN(rt)?Se?0:Ee.length-1:rt)<0?Ee.length+rt:rt)>=Ee.length){if(Se)return-1;rt=Ee.length-1}else if(rt<0){if(!Se)return-1;rt=0}if(typeof Oe=="string"&&(Oe=T.from(Oe,me)),T.isBuffer(Oe))return Oe.length===0?-1:G(Ee,Oe,rt,me,Se);if(typeof Oe=="number")return Oe&=255,T.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?(Se?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(Ee,Oe,rt):G(Ee,[Oe],rt,me,Se);throw new TypeError("val must be string, number or Buffer")}function G(Ee,Oe,rt,me,Se){var ge=1,ve=Ee.length,ee=Oe.length;if(me!==void 0&&((me=String(me).toLowerCase())==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(Ee.length<2||Oe.length<2)return-1;ve/=ge=2,ee/=2,rt/=2}function ze(J,He){return ge===1?J[He]:J.readUInt16BE(He*ge)}if(Se)for(var Je=-1,yt=rt;yt<ve;yt++)if(ze(Ee,yt)===ze(Oe,Je===-1?0:yt-Je)){if(yt-(Je=Je===-1?yt:Je)+1===ee)return Je*ge}else Je!==-1&&(yt-=yt-Je),Je=-1;else for(yt=rt=ve<rt+ee?ve-ee:rt;0<=yt;yt--){for(var xt=!0,Ye=0;Ye<ee;Ye++)if(ze(Ee,yt+Ye)!==ze(Oe,Ye)){xt=!1;break}if(xt)return yt}return-1}function xe(Ee,Oe,rt,me){return wt((Se=>{for(var ge=[],ve=0;ve<Se.length;++ve)ge.push(255&Se.charCodeAt(ve));return ge})(Oe),Ee,rt,me)}function Ae(Ee,Oe,rt){rt=Math.min(Ee.length,rt);for(var me=[],Se=Oe;Se<rt;){var ge,ve,ee,ze,Je=Ee[Se],yt=null,xt=239<Je?4:223<Je?3:191<Je?2:1;if(Se+xt<=rt)switch(xt){case 1:Je<128&&(yt=Je);break;case 2:(192&(ge=Ee[Se+1]))==128&&127<(ze=(31&Je)<<6|63&ge)&&(yt=ze);break;case 3:ve=Ee[Se+2],(192&(ge=Ee[Se+1]))==128&&(192&ve)==128&&2047<(ze=(15&Je)<<12|(63&ge)<<6|63&ve)&&(ze<55296||57343<ze)&&(yt=ze);break;case 4:ve=Ee[Se+2],ee=Ee[Se+3],(192&(ge=Ee[Se+1]))==128&&(192&ve)==128&&(192&ee)==128&&65535<(ze=(15&Je)<<18|(63&ge)<<12|(63&ve)<<6|63&ee)&&ze<1114112&&(yt=ze)}yt===null?(yt=65533,xt=1):65535<yt&&(me.push((yt-=65536)>>>10&1023|55296),yt=56320|1023&yt),me.push(yt),Se+=xt}var Ye=me,J=Ye.length;if(J<=De)return String.fromCharCode.apply(String,Ye);for(var He="",Le=0;Le<J;)He+=String.fromCharCode.apply(String,Ye.slice(Le,Le+=De));return He}ne.Buffer=T,ne.SlowBuffer=function(Ee){return T.alloc(+(Ee=+Ee!=Ee?0:Ee))},ne.INSPECT_MAX_BYTES=50,T.TYPED_ARRAY_SUPPORT=fe.TYPED_ARRAY_SUPPORT!==void 0?fe.TYPED_ARRAY_SUPPORT:(()=>{try{var Ee=new Uint8Array(1);return Ee.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ee.foo()===42&&typeof Ee.subarray=="function"&&Ee.subarray(1,1).byteLength===0}catch{return!1}})(),ne.kMaxLength=M(),T.poolSize=8192,T.ii=function(Ee){return Ee.__proto__=T.prototype,Ee},T.from=function(Ee,Oe,rt){return _(null,Ee,Oe,rt)},T.TYPED_ARRAY_SUPPORT&&(T.prototype.__proto__=Uint8Array.prototype,T.__proto__=Uint8Array,typeof Symbol<"u")&&Symbol.species&&T[Symbol.species]===T&&Object.defineProperty(T,Symbol.species,{value:null,configurable:!0}),T.alloc=function(Ee,Oe,rt){return E(Ee),Ee<=0||Oe===void 0?F(null,Ee):typeof rt=="string"?F(null,Ee).fill(Oe,rt):F(null,Ee).fill(Oe)},T.allocUnsafe=function(Ee){return w(null,Ee)},T.allocUnsafeSlow=function(Ee){return w(null,Ee)},T.isBuffer=function(Ee){return!(Ee==null||!Ee.ni)},T.compare=function(Ee,Oe){if(!T.isBuffer(Ee)||!T.isBuffer(Oe))throw new TypeError("Arguments must be Buffers");if(Ee===Oe)return 0;for(var rt=Ee.length,me=Oe.length,Se=0,ge=Math.min(rt,me);Se<ge;++Se)if(Ee[Se]!==Oe[Se]){rt=Ee[Se],me=Oe[Se];break}return rt<me?-1:me<rt?1:0},T.isEncoding=function(Ee){switch(String(Ee).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(Ee,Oe){if(!K(Ee))throw new TypeError('"list" argument must be an Array of Buffers');if(Ee.length===0)return T.alloc(0);if(Oe===void 0)for(Se=Oe=0;Se<Ee.length;++Se)Oe+=Ee[Se].length;for(var rt=T.allocUnsafe(Oe),me=0,Se=0;Se<Ee.length;++Se){var ge=Ee[Se];if(!T.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(rt,me),me+=ge.length}return rt},T.byteLength=ae,T.prototype.ni=!0,T.prototype.swap16=function(){var Ee=this.length;if(Ee%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Oe=0;Oe<Ee;Oe+=2)q(this,Oe,Oe+1);return this},T.prototype.swap32=function(){var Ee=this.length;if(Ee%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Oe=0;Oe<Ee;Oe+=4)q(this,Oe,Oe+3),q(this,Oe+1,Oe+2);return this},T.prototype.swap64=function(){var Ee=this.length;if(Ee%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Oe=0;Oe<Ee;Oe+=8)q(this,Oe,Oe+7),q(this,Oe+1,Oe+6),q(this,Oe+2,Oe+5),q(this,Oe+3,Oe+4);return this},T.prototype.toString=function(){var Ee=0|this.length;return Ee==0?"":arguments.length===0?Ae(this,0,Ee):(function(Oe,rt,me){var Se,ge,ve=!1;if((rt=rt===void 0||rt<0?0:rt)>this.length||(me=me===void 0||me>this.length?this.length:me)<=0||(me>>>=0)<=(rt>>>=0))return"";for(Oe=Oe||"utf8";;)switch(Oe){case"hex":var ee=me,ze=this.length;(!ee||ee<0||ze<ee)&&(ee=ze);for(var Je="",yt=He=!(He=rt)||He<0?0:He;yt<ee;++yt)Je+=(ge=this[yt])<16?"0"+ge.toString(16):ge.toString(16);return Je;case"utf8":case"utf-8":return Ae(this,rt,me);case"ascii":ze=rt;for(var xt=me,Ye="",J=(xt=Math.min(this.length,xt),ze);J<xt;++J)Ye+=String.fromCharCode(127&this[J]);return Ye;case"latin1":case"binary":for(var He=rt,Le=me,Ue="",_t=(Le=Math.min(this.length,Le),He);_t<Le;++_t)Ue+=String.fromCharCode(this[_t]);return Ue;case"base64":return st=this,Se=me,(Dt=rt)===0&&Se===st.length?Y.fromByteArray(st):Y.fromByteArray(st.slice(Dt,Se));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var st=rt,Dt=me,qt=this.slice(st,Dt),Lt="",ut=0;ut<qt.length;ut+=2)Lt+=String.fromCharCode(qt[ut]+256*qt[ut+1]);return Lt;default:if(ve)throw new TypeError("Unknown encoding: "+Oe);Oe=(Oe+"").toLowerCase(),ve=!0}}).apply(this,arguments)},T.prototype.equals=function(Ee){if(T.isBuffer(Ee))return this===Ee||T.compare(this,Ee)===0;throw new TypeError("Argument must be a Buffer")},T.prototype.inspect=function(){var Ee="",Oe=ne.INSPECT_MAX_BYTES;return 0<this.length&&(Ee=this.toString("hex",0,Oe).match(/.{2}/g).join(" "),this.length>Oe)&&(Ee+=" ... "),"<Buffer "+Ee+">"},T.prototype.compare=function(Ee,Oe,rt,me,Se){if(!T.isBuffer(Ee))throw new TypeError("Argument must be a Buffer");if(rt===void 0&&(rt=Ee?Ee.length:0),me===void 0&&(me=0),Se===void 0&&(Se=this.length),(Oe=Oe===void 0?0:Oe)<0||rt>Ee.length||me<0||Se>this.length)throw new RangeError("out of range index");if(Se<=me&&rt<=Oe)return 0;if(Se<=me)return-1;if(rt<=Oe)return 1;if(this===Ee)return 0;for(var ge=(Se>>>=0)-(me>>>=0),ve=(rt>>>=0)-(Oe>>>=0),ee=Math.min(ge,ve),ze=this.slice(me,Se),Je=Ee.slice(Oe,rt),yt=0;yt<ee;++yt)if(ze[yt]!==Je[yt]){ge=ze[yt],ve=Je[yt];break}return ge<ve?-1:ve<ge?1:0},T.prototype.includes=function(Ee,Oe,rt){return this.indexOf(Ee,Oe,rt)!==-1},T.prototype.indexOf=function(Ee,Oe,rt){return k(this,Ee,Oe,rt,!0)},T.prototype.lastIndexOf=function(Ee,Oe,rt){return k(this,Ee,Oe,rt,!1)},T.prototype.write=function(Ee,Oe,rt,me){if(Oe===void 0)me="utf8",rt=this.length,Oe=0;else if(rt===void 0&&typeof Oe=="string")me=Oe,rt=this.length,Oe=0;else{if(!isFinite(Oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Oe|=0,isFinite(rt)?(rt|=0,me===void 0&&(me="utf8")):(me=rt,rt=void 0)}var Se=this.length-Oe;if((rt===void 0||Se<rt)&&(rt=Se),0<Ee.length&&(rt<0||Oe<0)||Oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");me=me||"utf8";for(var ge,ve,ee,ze,Je,yt=!1;;)switch(me){case"hex":var xt,Ye=Ee,J=rt,He=(xt=Number(Oe)||0,this.length-xt);if((!J||He<(J=Number(J)))&&(J=He),(He=Ye.length)%2!=0)throw new TypeError("Invalid hex string");He/2<J&&(J=He/2);for(var Le=0;Le<J;++Le){var Ue=parseInt(Ye.substr(2*Le,2),16);if(isNaN(Ue))return Le;this[xt+Le]=Ue}return Le;case"utf8":case"utf-8":return ve=rt,wt(he(Ee,(ge=this).length-(He=Oe)),ge,He,ve);case"ascii":case"latin1":case"binary":return xe(this,Ee,Oe,rt);case"base64":return ge=this,ve=Oe,ze=rt,wt(it(Ee),ge,ve,ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Je=rt,wt(((_t,st)=>{for(var Dt,qt,Lt=[],ut=0;ut<_t.length&&!((st-=2)<0);++ut)qt=(Dt=_t.charCodeAt(ut))>>8,Lt.push(Dt%256),Lt.push(qt);return Lt})(Ee,(ee=this).length-(ze=Oe)),ee,ze,Je);default:if(yt)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),yt=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var De=4096;function Ie(Ee,Oe,rt){if(Ee%1!=0||Ee<0)throw new RangeError("offset is not uint");if(rt<Ee+Oe)throw new RangeError("Trying to access beyond buffer length")}function be(Ee,Oe,rt,me,Se,ge){if(!T.isBuffer(Ee))throw new TypeError('"buffer" argument must be a Buffer instance');if(Se<Oe||Oe<ge)throw new RangeError('"value" argument is out of bounds');if(rt+me>Ee.length)throw new RangeError("Index out of range")}function qe(Ee,Oe,rt,me){Oe<0&&(Oe=65535+Oe+1);for(var Se=0,ge=Math.min(Ee.length-rt,2);Se<ge;++Se)Ee[rt+Se]=(Oe&255<<8*(me?Se:1-Se))>>>8*(me?Se:1-Se)}function Ve(Ee,Oe,rt,me){Oe<0&&(Oe=4294967295+Oe+1);for(var Se=0,ge=Math.min(Ee.length-rt,4);Se<ge;++Se)Ee[rt+Se]=Oe>>>8*(me?Se:3-Se)&255}function pe(Ee,Oe,rt,me){if(rt+me>Ee.length)throw new RangeError("Index out of range");if(rt<0)throw new RangeError("Index out of range")}function j(Ee,Oe,rt,me,Se){return Se||pe(Ee,0,rt,4),re.write(Ee,Oe,rt,me,23,4),rt+4}function B(Ee,Oe,rt,me,Se){return Se||pe(Ee,0,rt,8),re.write(Ee,Oe,rt,me,52,8),rt+8}T.prototype.slice=function(Ee,Oe){var rt=this.length;if((Ee=~~Ee)<0?(Ee+=rt)<0&&(Ee=0):rt<Ee&&(Ee=rt),(Oe=Oe===void 0?rt:~~Oe)<0?(Oe+=rt)<0&&(Oe=0):rt<Oe&&(Oe=rt),Oe<Ee&&(Oe=Ee),T.TYPED_ARRAY_SUPPORT)(Se=this.subarray(Ee,Oe)).__proto__=T.prototype;else for(var me=Oe-Ee,Se=new T(me,void 0),ge=0;ge<me;++ge)Se[ge]=this[ge+Ee];return Se},T.prototype.readUIntLE=function(Ee,Oe,rt){Ee|=0,Oe|=0,rt||Ie(Ee,Oe,this.length);for(var me=this[Ee],Se=1,ge=0;++ge<Oe&&(Se*=256);)me+=this[Ee+ge]*Se;return me},T.prototype.readUIntBE=function(Ee,Oe,rt){Ee|=0,Oe|=0,rt||Ie(Ee,Oe,this.length);for(var me=this[Ee+--Oe],Se=1;0<Oe&&(Se*=256);)me+=this[Ee+--Oe]*Se;return me},T.prototype.readUInt8=function(Ee,Oe){return Oe||Ie(Ee,1,this.length),this[Ee]},T.prototype.readUInt16LE=function(Ee,Oe){return Oe||Ie(Ee,2,this.length),this[Ee]|this[Ee+1]<<8},T.prototype.readUInt16BE=function(Ee,Oe){return Oe||Ie(Ee,2,this.length),this[Ee]<<8|this[Ee+1]},T.prototype.readUInt32LE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),(this[Ee]|this[Ee+1]<<8|this[Ee+2]<<16)+16777216*this[Ee+3]},T.prototype.readUInt32BE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),16777216*this[Ee]+(this[Ee+1]<<16|this[Ee+2]<<8|this[Ee+3])},T.prototype.readIntLE=function(Ee,Oe,rt){Ee|=0,Oe|=0,rt||Ie(Ee,Oe,this.length);for(var me=this[Ee],Se=1,ge=0;++ge<Oe&&(Se*=256);)me+=this[Ee+ge]*Se;return(Se*=128)<=me&&(me-=Math.pow(2,8*Oe)),me},T.prototype.readIntBE=function(Ee,Oe,rt){Ee|=0,Oe|=0,rt||Ie(Ee,Oe,this.length);for(var me=Oe,Se=1,ge=this[Ee+--me];0<me&&(Se*=256);)ge+=this[Ee+--me]*Se;return(Se*=128)<=ge&&(ge-=Math.pow(2,8*Oe)),ge},T.prototype.readInt8=function(Ee,Oe){return Oe||Ie(Ee,1,this.length),128&this[Ee]?-1*(255-this[Ee]+1):this[Ee]},T.prototype.readInt16LE=function(Ee,Oe){return Oe||Ie(Ee,2,this.length),32768&(Oe=this[Ee]|this[Ee+1]<<8)?4294901760|Oe:Oe},T.prototype.readInt16BE=function(Ee,Oe){return Oe||Ie(Ee,2,this.length),32768&(Oe=this[Ee+1]|this[Ee]<<8)?4294901760|Oe:Oe},T.prototype.readInt32LE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),this[Ee]|this[Ee+1]<<8|this[Ee+2]<<16|this[Ee+3]<<24},T.prototype.readInt32BE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),this[Ee]<<24|this[Ee+1]<<16|this[Ee+2]<<8|this[Ee+3]},T.prototype.readFloatLE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),re.read(this,Ee,!0,23,4)},T.prototype.readFloatBE=function(Ee,Oe){return Oe||Ie(Ee,4,this.length),re.read(this,Ee,!1,23,4)},T.prototype.readDoubleLE=function(Ee,Oe){return Oe||Ie(Ee,8,this.length),re.read(this,Ee,!0,52,8)},T.prototype.readDoubleBE=function(Ee,Oe){return Oe||Ie(Ee,8,this.length),re.read(this,Ee,!1,52,8)},T.prototype.writeUIntLE=function(Ee,Oe,rt,me){Ee=+Ee,Oe|=0,rt|=0,me||be(this,Ee,Oe,rt,Math.pow(2,8*rt)-1,0);var Se=1,ge=0;for(this[Oe]=255&Ee;++ge<rt&&(Se*=256);)this[Oe+ge]=Ee/Se&255;return Oe+rt},T.prototype.writeUIntBE=function(Ee,Oe,rt,me){Ee=+Ee,Oe|=0,rt|=0,me||be(this,Ee,Oe,rt,Math.pow(2,8*rt)-1,0);var Se=rt-1,ge=1;for(this[Oe+Se]=255&Ee;0<=--Se&&(ge*=256);)this[Oe+Se]=Ee/ge&255;return Oe+rt},T.prototype.writeUInt8=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,1,255,0),T.TYPED_ARRAY_SUPPORT||(Ee=Math.floor(Ee)),this[Oe]=255&Ee,Oe+1},T.prototype.writeUInt16LE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[Oe]=255&Ee,this[Oe+1]=Ee>>>8):qe(this,Ee,Oe,!0),Oe+2},T.prototype.writeUInt16BE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,2,65535,0),T.TYPED_ARRAY_SUPPORT?(this[Oe]=Ee>>>8,this[Oe+1]=255&Ee):qe(this,Ee,Oe,!1),Oe+2},T.prototype.writeUInt32LE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[Oe+3]=Ee>>>24,this[Oe+2]=Ee>>>16,this[Oe+1]=Ee>>>8,this[Oe]=255&Ee):Ve(this,Ee,Oe,!0),Oe+4},T.prototype.writeUInt32BE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,4,4294967295,0),T.TYPED_ARRAY_SUPPORT?(this[Oe]=Ee>>>24,this[Oe+1]=Ee>>>16,this[Oe+2]=Ee>>>8,this[Oe+3]=255&Ee):Ve(this,Ee,Oe,!1),Oe+4},T.prototype.writeIntLE=function(Ee,Oe,rt,me){Ee=+Ee,Oe|=0,me||be(this,Ee,Oe,rt,(me=Math.pow(2,8*rt-1))-1,-me);var Se=0,ge=1,ve=0;for(this[Oe]=255&Ee;++Se<rt&&(ge*=256);)Ee<0&&ve===0&&this[Oe+Se-1]!==0&&(ve=1),this[Oe+Se]=(Ee/ge|0)-ve&255;return Oe+rt},T.prototype.writeIntBE=function(Ee,Oe,rt,me){Ee=+Ee,Oe|=0,me||be(this,Ee,Oe,rt,(me=Math.pow(2,8*rt-1))-1,-me);var Se=rt-1,ge=1,ve=0;for(this[Oe+Se]=255&Ee;0<=--Se&&(ge*=256);)Ee<0&&ve===0&&this[Oe+Se+1]!==0&&(ve=1),this[Oe+Se]=(Ee/ge|0)-ve&255;return Oe+rt},T.prototype.writeInt8=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,1,127,-128),T.TYPED_ARRAY_SUPPORT||(Ee=Math.floor(Ee)),this[Oe]=255&(Ee=Ee<0?255+Ee+1:Ee),Oe+1},T.prototype.writeInt16LE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[Oe]=255&Ee,this[Oe+1]=Ee>>>8):qe(this,Ee,Oe,!0),Oe+2},T.prototype.writeInt16BE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,2,32767,-32768),T.TYPED_ARRAY_SUPPORT?(this[Oe]=Ee>>>8,this[Oe+1]=255&Ee):qe(this,Ee,Oe,!1),Oe+2},T.prototype.writeInt32LE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,4,2147483647,-2147483648),T.TYPED_ARRAY_SUPPORT?(this[Oe]=255&Ee,this[Oe+1]=Ee>>>8,this[Oe+2]=Ee>>>16,this[Oe+3]=Ee>>>24):Ve(this,Ee,Oe,!0),Oe+4},T.prototype.writeInt32BE=function(Ee,Oe,rt){return Ee=+Ee,Oe|=0,rt||be(this,Ee,Oe,4,2147483647,-2147483648),Ee<0&&(Ee=4294967295+Ee+1),T.TYPED_ARRAY_SUPPORT?(this[Oe]=Ee>>>24,this[Oe+1]=Ee>>>16,this[Oe+2]=Ee>>>8,this[Oe+3]=255&Ee):Ve(this,Ee,Oe,!1),Oe+4},T.prototype.writeFloatLE=function(Ee,Oe,rt){return j(this,Ee,Oe,!0,rt)},T.prototype.writeFloatBE=function(Ee,Oe,rt){return j(this,Ee,Oe,!1,rt)},T.prototype.writeDoubleLE=function(Ee,Oe,rt){return B(this,Ee,Oe,!0,rt)},T.prototype.writeDoubleBE=function(Ee,Oe,rt){return B(this,Ee,Oe,!1,rt)},T.prototype.copy=function(Ee,Oe,rt,me){if(rt=rt||0,me||me===0||(me=this.length),Oe>=Ee.length&&(Oe=Ee.length),(me=0<me&&me<rt?rt:me)===rt||Ee.length===0||this.length===0)return 0;if((Oe=Oe||0)<0)throw new RangeError("targetStart out of bounds");if(rt<0||rt>=this.length)throw new RangeError("sourceStart out of bounds");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length);var Se,ge=(me=Ee.length-Oe<me-rt?Ee.length-Oe+rt:me)-rt;if(this===Ee&&rt<Oe&&Oe<me)for(Se=ge-1;0<=Se;--Se)Ee[Se+Oe]=this[Se+rt];else if(ge<1e3||!T.TYPED_ARRAY_SUPPORT)for(Se=0;Se<ge;++Se)Ee[Se+Oe]=this[Se+rt];else Uint8Array.prototype.set.call(Ee,this.subarray(rt,rt+ge),Oe);return ge},T.prototype.fill=function(Ee,Oe,rt,me){if(typeof Ee=="string"){var Se;if(typeof Oe=="string"?(me=Oe,Oe=0,rt=this.length):typeof rt=="string"&&(me=rt,rt=this.length),Ee.length===1&&(Se=Ee.charCodeAt(0))<256&&(Ee=Se),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!T.isEncoding(me))throw new TypeError("Unknown encoding: "+me)}else typeof Ee=="number"&&(Ee&=255);if(Oe<0||this.length<Oe||this.length<rt)throw new RangeError("Out of range index");if(!(rt<=Oe))if(Oe>>>=0,rt=rt===void 0?this.length:rt>>>0,typeof(Ee=Ee||0)=="number")for(ee=Oe;ee<rt;++ee)this[ee]=Ee;else for(var ge=T.isBuffer(Ee)?Ee:he(new T(Ee,me).toString()),ve=ge.length,ee=0;ee<rt-Oe;++ee)this[ee+Oe]=ge[ee%ve];return this};var nt=/[^+\/0-9A-Za-z-_]/g;function he(Ee,Oe){Oe=Oe||1/0;for(var rt,me=Ee.length,Se=null,ge=[],ve=0;ve<me;++ve){if(55295<(rt=Ee.charCodeAt(ve))&&rt<57344){if(!Se){if(56319<rt){-1<(Oe-=3)&&ge.push(239,191,189);continue}if(ve+1===me){-1<(Oe-=3)&&ge.push(239,191,189);continue}Se=rt;continue}if(rt<56320){-1<(Oe-=3)&&ge.push(239,191,189),Se=rt;continue}rt=65536+(Se-55296<<10|rt-56320)}else Se&&-1<(Oe-=3)&&ge.push(239,191,189);if(Se=null,rt<128){if(--Oe<0)break;ge.push(rt)}else if(rt<2048){if((Oe-=2)<0)break;ge.push(rt>>6|192,63&rt|128)}else if(rt<65536){if((Oe-=3)<0)break;ge.push(rt>>12|224,rt>>6&63|128,63&rt|128)}else{if(!(rt<1114112))throw new Error("Invalid code point");if((Oe-=4)<0)break;ge.push(rt>>18|240,rt>>12&63|128,rt>>6&63|128,63&rt|128)}}return ge}function it(Ee){return Y.toByteArray((Oe=>{var rt;if((Oe=((rt=Oe).trim?rt.trim():rt.replace(/^\s+|\s+$/g,"")).replace(nt,"")).length<2)return"";for(;Oe.length%4!=0;)Oe+="=";return Oe})(Ee))}function wt(Ee,Oe,rt,me){for(var Se=0;Se<me&&!(Se+rt>=Oe.length||Se>=Ee.length);++Se)Oe[Se+rt]=Ee[Se];return Se}}).call(this,oe(34))},function(Qe,ne){var oe=(function(){return this})();try{oe=oe||new Function("return this")()}catch{typeof window=="object"&&(oe=window)}Qe.exports=oe},function(Qe,ne,oe){ne.byteLength=function(_){return 3*((_=T(_))[0]+(_=_[1]))/4-_},ne.toByteArray=function(_){for(var E,w=T(_),R=w[0],V=new re(3*(R+(w=w[1]))/4-w),ae=0,q=0<w?R-4:R,k=0;k<q;k+=4)E=Y[_.charCodeAt(k)]<<18|Y[_.charCodeAt(k+1)]<<12|Y[_.charCodeAt(k+2)]<<6|Y[_.charCodeAt(k+3)],V[ae++]=E>>16&255,V[ae++]=E>>8&255,V[ae++]=255&E;return w===2&&(E=Y[_.charCodeAt(k)]<<2|Y[_.charCodeAt(k+1)]>>4,V[ae++]=255&E),w===1&&(E=Y[_.charCodeAt(k)]<<10|Y[_.charCodeAt(k+1)]<<4|Y[_.charCodeAt(k+2)]>>2,V[ae++]=E>>8&255,V[ae++]=255&E),V},ne.fromByteArray=function(_){for(var E,w=_.length,R=w%3,V=[],ae=0,q=w-R;ae<q;ae+=16383)V.push(((k,G)=>{for(var xe,Ae=[],De=ae;De<G;De+=3)Ae.push(fe[(xe=(k[De]<<16&16711680)+(k[De+1]<<8&65280)+(255&k[De+2]))>>18&63]+fe[xe>>12&63]+fe[xe>>6&63]+fe[63&xe]);return Ae.join("")})(_,q<ae+16383?q:ae+16383));return R==1?V.push(fe[(E=_[w-1])>>2]+fe[E<<4&63]+"=="):R==2&&V.push(fe[(E=(_[w-2]<<8)+_[w-1])>>10]+fe[E>>4&63]+fe[E<<2&63]+"="),V.join("")};for(var fe=[],Y=[],re=typeof Uint8Array<"u"?Uint8Array:Array,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=0,F=K.length;M<F;++M)fe[M]=K[M],Y[K.charCodeAt(M)]=M;function T(_){var E=_.length;if(0<E%4)throw new Error("Invalid string. Length must be a multiple of 4");return E=(_=(_=_.indexOf("="))===-1?E:_)===E?0:4-_%4,[_,E]}Y[45]=62,Y[95]=63},function(Qe,ne){ne.read=function(oe,fe,Y,re,K){var M,F,T=8*K-re-1,_=(1<<T)-1,E=_>>1,w=-7,R=Y?K-1:0,V=Y?-1:1;for(K=oe[fe+R],R+=V,M=K&(1<<-w)-1,K>>=-w,w+=T;0<w;M=256*M+oe[fe+R],R+=V,w-=8);for(F=M&(1<<-w)-1,M>>=-w,w+=re;0<w;F=256*F+oe[fe+R],R+=V,w-=8);if(M===0)M=1-E;else{if(M===_)return F?NaN:1/0*(K?-1:1);F+=Math.pow(2,re),M-=E}return(K?-1:1)*F*Math.pow(2,M-re)},ne.write=function(oe,fe,Y,re,K,M){var F,T,_=8*M-K-1,E=(1<<_)-1,w=E>>1,R=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=re?0:M-1,ae=re?1:-1;for(M=fe<0||fe===0&&1/fe<0?1:0,fe=Math.abs(fe),isNaN(fe)||fe===1/0?(T=isNaN(fe)?1:0,F=E):(F=Math.floor(Math.log(fe)/Math.LN2),fe*(re=Math.pow(2,-F))<1&&(F--,re*=2),2<=(fe+=1<=F+w?R/re:R*Math.pow(2,1-w))*re&&(F++,re/=2),E<=F+w?(T=0,F=E):1<=F+w?(T=(fe*re-1)*Math.pow(2,K),F+=w):(T=fe*Math.pow(2,w-1)*Math.pow(2,K),F=0));8<=K;oe[Y+V]=255&T,V+=ae,T/=256,K-=8);for(F=F<<K|T,_+=K;0<_;oe[Y+V]=255&F,V+=ae,F/=256,_-=8);oe[Y+V-ae]|=128*M}},function(Qe,ne){var oe={}.toString;Qe.exports=Array.isArray||function(fe){return oe.call(fe)=="[object Array]"}},function(Qe,ne,oe){var fe=this&&this.__read||function(F,T){var _=typeof Symbol=="function"&&F[Symbol.iterator];if(!_)return F;var E,w,R=_.call(F),V=[];try{for(;(T===void 0||0<T--)&&!(E=R.next()).done;)V.push(E.value)}catch(ae){w={error:ae}}finally{try{E&&!E.done&&(_=R.return)&&_.call(R)}finally{if(w)throw w.error}}return V},Y=this&&this.__spread||function(){for(var F=[],T=0;T<arguments.length;T++)F=F.concat(fe(arguments[T]));return F},re=(Object.defineProperty(ne,"u",{value:!0}),ne.PendingQueue=void 0,oe(0)),K=oe(5);function M(F,T,_,E){var w=this;this.ri=F,this.gt=T,this.Zt=_,this.H=E,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,F.forEach(function(R){w.cacheMap.set(R,new re.Queue)})}M.prototype.enqueue=function(F,T){(T=this.cacheMap.get(T))&&!T.all().find(function(_){return _.content==F.content})&&(T.enqueue(F),T=K.calculateMemSize(F.content),this.pendingDataSize+=T,this.size++,this.Zt.totalAvailCache-=T,this.enCallback)&&this.enCallback(this.byteLength,this.size,this.pendingDataSize)},M.prototype.dequeue=function(F){return F=(F=this.cacheMap.get(F))==null?void 0:F.dequeue(),this.size--,this.deCallback&&this.deCallback(),F},M.prototype.findInQueue=function(F){var T=(T=this.cacheMap.get(F.level))==null?void 0:T.all();return T==null?void 0:T.find(function(_){return _.key===F.key})},M.prototype.readReportData=function(F){var T=Y(this.cacheMap.entries());return T=this.readData(T,F,!0),this.reset(),{totalLen:T.totalLen,reportDataArr:T.resArr}},M.prototype.readStoreData=function(F){F=Math.ceil(this.pendingDataSize*F);var T=Y(this.cacheMap.entries()).reverse();return T=this.readData(T,F,!1),this.refresh(T.totalLen),{totalLen:T.totalLen,storeArr:T.resArr}},M.prototype.readData=function(F,T,_){var E=[],w=0;e:for(var R=0;R<F.length;R++)for(var V=fe(F[R],2),ae=V[0],q=V[1];q.size();){var k=this.dequeue(ae);if(E.push(k),T<(w+=K.calculateMemSize(k.content)))break e}return{totalLen:w,resArr:E}},M.prototype.decodeReportData=function(F){var T=this;F.forEach(function(_){T.enqueue(_,_.level)})},M.prototype.setListener=function(F){this.enCallback=F.enCallback,this.deCallback=F.deCallback},M.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},M.prototype.refresh=function(F){this.pendingDataSize-=F,this.Zt.totalAvailCache+=F},M.prototype.reset=function(){this.byteLength=0},ne.PendingQueue=M},function(Qe,ne,oe){var fe=this&&this.__awaiter||function(M,F,T,_){return new(T=T||Promise)(function(E,w){function R(q){try{ae(_.next(q))}catch(k){w(k)}}function V(q){try{ae(_.throw(q))}catch(k){w(k)}}function ae(q){var k;q.done?E(q.value):((k=q.value)instanceof T?k:new T(function(G){G(k)})).then(R,V)}ae((_=_.apply(M,F||[])).next())})},Y=this&&this.__generator||function(M,F){var T,_,E,w={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]},R={next:V(0),throw:V(1),return:V(2)};return typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function V(ae){return function(q){var k=[ae,q];if(T)throw new TypeError("Generator is already executing.");for(;w;)try{if(T=1,_&&(E=2&k[0]?_.return:k[0]?_.throw||((E=_.return)&&E.call(_),0):_.next)&&!(E=E.call(_,k[1])).done)return E;switch(_=0,(k=E?[2&k[0],E.value]:k)[0]){case 0:case 1:E=k;break;case 4:return w.label++,{value:k[1],done:!1};case 5:w.label++,_=k[1],k=[0];continue;case 7:k=w.ops.pop(),w.trys.pop();continue;default:if(!(E=0<(E=w.trys).length&&E[E.length-1])&&(k[0]===6||k[0]===2)){w=0;continue}if(k[0]===3&&(!E||k[1]>E[0]&&k[1]<E[3]))w.label=k[1];else if(k[0]===6&&w.label<E[1])w.label=E[1],E=k;else{if(!(E&&w.label<E[2])){E[2]&&w.ops.pop(),w.trys.pop();continue}w.label=E[2],w.ops.push(k)}}k=F.call(M,w)}catch(G){k=[6,G],_=0}finally{T=E=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}}},re=(Object.defineProperty(ne,"u",{value:!0}),ne.loadJS=void 0,oe(40));function K(M,F,T){return(M=re.decrypt(M,F))&&re.hashMd5(M)===T?M:""}ne.loadJS=function(M,F,T,_,E,w,R){var V=this;return new Promise(function(ae,q){return fe(V,void 0,void 0,function(){var k,G,xe,Ae,De;return Y(this,function(Ie){switch(Ie.label){case 0:if(k="dy",M)return[3,7];Ie.label=1;case 1:return Ie.trys.push([1,5,,6]),[4,F.getItem("code")];case 2:return G=Ie.sent(),[4,F.getItem("key")];case 3:return xe=Ie.sent(),[4,F.getItem("hash")];case 4:Ae=Ie.sent();var be=K(G,xe,Ae)||w,qe=k,Ve=R,pe=document.getElementsByTagName("HEAD").item(0),j=document.createElement("script");j.language="javascript",j.type="text/javascript",j.id=qe,j.param=Ve;try{j.appendChild(document.createTextNode(be))}catch{j.text=be}return pe.appendChild(j),ae(),[3,6];case 5:return Ie.sent(),q(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{De=new ActiveXObject("Msxml2.XMLHTTP")}catch{De=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(De=new XMLHttpRequest);return De.open("GET",T,!0),De.send(null),De.onreadystatechange=function(){return fe(this,void 0,void 0,function(){return Y(this,function(B){switch(B.label){case 0:if(De.readyState!=4)return[3,10];if(!(200<=De.status&&De.status<300||De.status==0||De.status==304))return[3,8];B.label=1;case 1:return B.trys.push([1,6,,7]),K(De.responseText,_,E)?[4,F.setItem("code",De.responseText)]:[3,5];case 2:return B.sent(),[4,F.setItem("key",_)];case 3:return B.sent(),[4,F.setItem("hash",E)];case 4:B.sent(),B.label=5;case 5:return ae(),[3,7];case 6:return B.sent(),q(),[3,7];case 7:return[2];case 8:return q(),[2];case 9:return[3,11];case 10:case 11:return[2]}})})},[2]}})})})}},function(Qe,ne,oe){var fe=this&&this.__importDefault||function(M){return M&&M.u?M:{default:M}},Y=(Object.defineProperty(ne,"u",{value:!0}),ne.hashMd5=ne.decrypt=void 0,fe(oe(41))),re=fe(oe(42)),K=fe(oe(43));ne.decrypt=function(M,F){var T="";try{T=re.default.decrypt(M,F).toString(K.default)}catch{}return T},ne.hashMd5=function(M){return Y.default(M).toString()}},function(Qe,ne){Qe.exports=P},function(Qe,ne){Qe.exports=Pe},function(Qe,ne){Qe.exports=ke},function(Qe,ne,oe){function fe(){this.logLevel=ne.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(ne,"u",{value:!0}),ne.ZegoLog=ne.ENUM_LOG_LEVEL=void 0,ne.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},fe.prototype.setLogLevel=function(Y){return(Y=ne.ENUM_LOG_LEVEL[Y])!==void 0&&(this.logLevel=Y,!0)},fe.prototype.debug=function(){for(var Y=[],re=0;re<arguments.length;re++)Y[re]=arguments[re];var K=Y.join(" ");this.logLevel!==ne.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=ne.ENUM_LOG_LEVEL.DEBUG&&console.debug(K)},fe.prototype.log=function(){for(var Y=[],re=0;re<arguments.length;re++)Y[re]=arguments[re];var K=Y.join(" ");this.logLevel!==ne.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=ne.ENUM_LOG_LEVEL.INFO&&console.log(K)},fe.prototype.info=function(){for(var Y=[],re=0;re<arguments.length;re++)Y[re]=arguments[re];var K=Y.join(" ");this.logLevel!==ne.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=ne.ENUM_LOG_LEVEL.INFO&&console.info(K)},fe.prototype.warn=function(){for(var Y=[],re=0;re<arguments.length;re++)Y[re]=arguments[re];var K=Y.join(" ");this.logLevel!==ne.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=ne.ENUM_LOG_LEVEL.WARN&&console.warn(K)},fe.prototype.error=function(){for(var Y=[],re=0;re<arguments.length;re++)Y[re]=arguments[re];var K=Y.join(" ");this.logLevel!==ne.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=ne.ENUM_LOG_LEVEL.ERROR&&console.error(K)},ne.ZegoLog=fe},function(Qe,ne,oe){function fe(Y){this.keepLive=!0,this.logger=Y,this.W=Y}Object.defineProperty(ne,"u",{value:!0}),ne.StateCenter=void 0,fe.prototype.isLogin=function(){return!0},ne.StateCenter=fe},function(Qe,ne,oe){var fe=this&&this.__read||function(M,F){var T=typeof Symbol=="function"&&M[Symbol.iterator];if(!T)return M;var _,E,w=T.call(M),R=[];try{for(;(F===void 0||0<F--)&&!(_=w.next()).done;)R.push(_.value)}catch(V){E={error:V}}finally{try{_&&!_.done&&(T=w.return)&&T.call(w)}finally{if(E)throw E.error}}return R},Y=this&&this.__spread||function(){for(var M=[],F=0;F<arguments.length;F++)M=M.concat(fe(arguments[F]));return M},re=(Object.defineProperty(ne,"u",{value:!0}),ne.DynamicCode=void 0,oe(3));function K(){this.init()}K.prototype.init=function(){window.dyObj={}},K.prototype.runExecution=function(M,F,T){M=new(Function.bind.apply(Function,Y([void 0],M,[T])));try{M.apply(void 0,Y(F))}catch(_){re.log.error(_)}},ne.DynamicCode=K}],tt={},ce.m=Ne,ce.c=tt,ce.d=function(Qe,ne,oe){ce.o(Qe,ne)||Object.defineProperty(Qe,ne,{enumerable:!0,get:oe})},ce.r=function(Qe){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Qe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Qe,"u",{value:!0})},ce.t=function(Qe,ne){if(1&ne&&(Qe=ce(Qe)),8&ne||4&ne&&typeof Qe=="object"&&Qe&&Qe.u)return Qe;var oe=Object.create(null);if(ce.r(oe),Object.defineProperty(oe,"default",{enumerable:!0,value:Qe}),2&ne&&typeof Qe!="string")for(var fe in Qe)ce.d(oe,fe,(function(Y){return Qe[Y]}).bind(null,fe));return oe},ce.n=function(Qe){var ne=Qe&&Qe.u?function(){return Qe.default}:function(){return Qe};return ce.d(ne,"a",ne),ne},ce.o=function(Qe,ne){return Object.prototype.hasOwnProperty.call(Qe,ne)},ce.p="",ce(ce.s=14);function ce(Qe){var ne;return(tt[Qe]||(ne=tt[Qe]={i:Qe,l:!1,exports:{}},Ne[Qe].call(ne.exports,ne,ne.exports,ce),ne.l=!0,ne)).exports}var Ne,tt})(Z(6361),Z(4636),Z(955),Z(5178))},955:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),Z(754),Z(4636),Z(9506),Z(7165),(function(){var P=I,Pe=P.lib.BlockCipher,ke=P.algo,ce=[],Ne=[],tt=[],Qe=[],ne=[],oe=[],fe=[],Y=[],re=[],K=[];(function(){for(var T=[],_=0;_<256;_++)T[_]=_<128?_<<1:_<<1^283;var E=0,w=0;for(_=0;_<256;_++){var R=w^w<<1^w<<2^w<<3^w<<4;ce[E]=R=R>>>8^255&R^99,Ne[R]=E;var V,ae=T[E],q=T[ae],k=T[q];tt[E]=(V=257*T[R]^16843008*R)<<24|V>>>8,Qe[E]=V<<16|V>>>16,ne[E]=V<<8|V>>>24,oe[E]=V,fe[R]=(V=16843009*k^65537*q^257*ae^16843008*E)<<24|V>>>8,Y[R]=V<<16|V>>>16,re[R]=V<<8|V>>>24,K[R]=V,E?(E=ae^T[T[T[k^ae]]],w^=T[T[w]]):E=w=1}})();var M=[0,1,2,4,8,16,32,64,128,27,54],F=ke.AES=Pe.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var T=this._keyPriorReset=this._key,_=T.words,E=T.sigBytes/4,w=4*((this._nRounds=E+6)+1),R=this._keySchedule=[],V=0;V<w;V++)V<E?R[V]=_[V]:(k=R[V-1],V%E?E>6&&V%E==4&&(k=ce[k>>>24]<<24|ce[k>>>16&255]<<16|ce[k>>>8&255]<<8|ce[255&k]):(k=ce[(k=k<<8|k>>>24)>>>24]<<24|ce[k>>>16&255]<<16|ce[k>>>8&255]<<8|ce[255&k],k^=M[V/E|0]<<24),R[V]=R[V-E]^k);for(var ae=this._invKeySchedule=[],q=0;q<w;q++){if(V=w-q,q%4)var k=R[V];else k=R[V-4];ae[q]=q<4||V<=4?k:fe[ce[k>>>24]]^Y[ce[k>>>16&255]]^re[ce[k>>>8&255]]^K[ce[255&k]]}}},encryptBlock:function(T,_){this._doCryptBlock(T,_,this._keySchedule,tt,Qe,ne,oe,ce)},decryptBlock:function(T,_){var E=T[_+1];T[_+1]=T[_+3],T[_+3]=E,this._doCryptBlock(T,_,this._invKeySchedule,fe,Y,re,K,Ne),E=T[_+1],T[_+1]=T[_+3],T[_+3]=E},_doCryptBlock:function(T,_,E,w,R,V,ae,q){for(var k=this._nRounds,G=T[_]^E[0],xe=T[_+1]^E[1],Ae=T[_+2]^E[2],De=T[_+3]^E[3],Ie=4,be=1;be<k;be++){var qe=w[G>>>24]^R[xe>>>16&255]^V[Ae>>>8&255]^ae[255&De]^E[Ie++],Ve=w[xe>>>24]^R[Ae>>>16&255]^V[De>>>8&255]^ae[255&G]^E[Ie++],pe=w[Ae>>>24]^R[De>>>16&255]^V[G>>>8&255]^ae[255&xe]^E[Ie++],j=w[De>>>24]^R[G>>>16&255]^V[xe>>>8&255]^ae[255&Ae]^E[Ie++];G=qe,xe=Ve,Ae=pe,De=j}qe=(q[G>>>24]<<24|q[xe>>>16&255]<<16|q[Ae>>>8&255]<<8|q[255&De])^E[Ie++],Ve=(q[xe>>>24]<<24|q[Ae>>>16&255]<<16|q[De>>>8&255]<<8|q[255&G])^E[Ie++],pe=(q[Ae>>>24]<<24|q[De>>>16&255]<<16|q[G>>>8&255]<<8|q[255&xe])^E[Ie++],j=(q[De>>>24]<<24|q[G>>>16&255]<<16|q[xe>>>8&255]<<8|q[255&Ae])^E[Ie++],T[_]=qe,T[_+1]=Ve,T[_+2]=pe,T[_+3]=j},keySize:8});P.AES=Pe._createHelper(F)})(),I.AES)},1025:function(ot,Re,Z){var I,P;ot.exports=(I=Z(9021),P=I.enc.Utf8,void(I.algo.HMAC=I.lib.Base.extend({init:function(Pe,ke){Pe=this._hasher=new Pe.init,typeof ke=="string"&&(ke=P.parse(ke));var ce=Pe.blockSize,Ne=4*ce;ke.sigBytes>Ne&&(ke=Pe.finalize(ke)),ke.clamp();for(var tt=this._oKey=ke.clone(),Qe=this._iKey=ke.clone(),ne=tt.words,oe=Qe.words,fe=0;fe<ce;fe++)ne[fe]^=1549556828,oe[fe]^=909522486;tt.sigBytes=Qe.sigBytes=Ne,this.reset()},reset:function(){var Pe=this._hasher;Pe.reset(),Pe.update(this._iKey)},update:function(Pe){return this._hasher.update(Pe),this},finalize:function(Pe){var ke=this._hasher,ce=ke.finalize(Pe);return ke.reset(),ke.finalize(this._oKey.clone().concat(ce))}})))},1290:function(ot,Re,Z){Z.d(Re,{BBG:function(){return I},Bnp:function(){return it},BsE:function(){return ut},CLV:function(){return Rn},CcO:function(){return ee},E8q:function(){return xe},EPo:function(){return Ti},E_I:function(){return sr},Eb9:function(){return Br},Ehk:function(){return He},FGD:function(){return _n},FSV:function(){return _},GV2:function(){return jn},HGP:function(){return wn},HHW:function(){return Ne},I2V:function(){return J},I8R:function(){return ue},IGr:function(){return Cn},IRO:function(){return Q},ISq:function(){return mr},Ifp:function(){return rt},JFd:function(){return eo},JGn:function(){return Le},JX$:function(){return en},Jli:function(){return me},K15:function(){return Lt},K4A:function(){return ne},K74:function(){return It},KBL:function(){return Ge},KWc:function(){return Ae},KY4:function(){return M},Kw2:function(){return Bi},LBe:function(){return ft},La0:function(){return be},Lji:function(){return vi},Loj:function(){return qt},M9m:function(){return E},MDS:function(){return ar},MSI:function(){return vt},N$A:function(){return Gn},NYT:function(){return Rt},Nw2:function(){return Mr},O2K:function(){return B},OKY:function(){return G},OYv:function(){return $t},Ox5:function(){return ti},Q4K:function(){return ge},Q4y:function(){return nr},Q9_:function(){return Un},QRg:function(){return Ie},QU$:function(){return Yt},Qld:function(){return Je},QpU:function(){return Vt},Qu8:function(){return q},R46:function(){return Or},RM$:function(){return $e},Rbr:function(){return gi},Rfl:function(){return Ye},RnN:function(){return hi},SK:function(){return an},SKc:function(){return no},SPm:function(){return R},Szn:function(){return ke},Tk2:function(){return Be},TlX:function(){return Zn},Toj:function(){return xi},UY3:function(){return oi},V9q:function(){return Y},VMq:function(){return he},VdQ:function(){return Ut},W0Q:function(){return $n},W8t:function(){return go},WaK:function(){return De},Wgj:function(){return P},WuQ:function(){return Sn},XLj:function(){return qe},XO3:function(){return w},XQ0:function(){return Pe},XR3:function(){return Dt},Y9k:function(){return Tn},YNv:function(){return L},YOg:function(){return qr},Ywv:function(){return Vr},ZIe:function(){return T},Ze2:function(){return Vn},_2$:function(){return ur},_ny:function(){return mt},aSL:function(){return ze},amU:function(){return Mn},aww:function(){return Ui},b9b:function(){return yt},bp1:function(){return li},bzn:function(){return Ar},c2i:function(){return Pn},cDv:function(){return _r},cIs:function(){return lr},cuT:function(){return ui},d0o:function(){return Ue},d8C:function(){return xt},d9R:function(){return Xe},de8:function(){return Se},dk2:function(){return fe},dnG:function(){return re},dw7:function(){return Jn},fcT:function(){return qn},fgh:function(){return pe},fjj:function(){return Dr},fkL:function(){return ae},gPJ:function(){return bt},gkP:function(){return tt},hkn:function(){return kn},iMZ:function(){return Pt},ibZ:function(){return gr},ifL:function(){return Wt},it$:function(){return F},ivM:function(){return Gt},kEb:function(){return St},kEs:function(){return mi},kNG:function(){return ie},kVV:function(){return Ii},kc8:function(){return K},kkS:function(){return Te},lWs:function(){return Ee},mLk:function(){return ce},mMR:function(){return Sr},msE:function(){return k},n9B:function(){return wt},n9u:function(){return ve},nkr:function(){return Wr},ny0:function(){return _t},oLS:function(){return V},p1K:function(){return dt},qPT:function(){return st},rGc:function(){return Qe},rS5:function(){return j},rp8:function(){return Qr},ruA:function(){return Gr},s1U:function(){return oe},sk8:function(){return ir},t6w:function(){return On},u7D:function(){return Nn},v$W:function(){return di},vBC:function(){return nt},wQ8:function(){return ci},wT7:function(){return Xn},x_Q:function(){return ln},xcT:function(){return je},xcY:function(){return _i},y4U:function(){return Nt},z3d:function(){return Ve},zC0:function(){return Oe},zUi:function(){return Wn},z_2:function(){return Nr},zub:function(){return Ji}});var I="zc.0",P="zc.1",Pe="zc.csr",ke="zc.cs",ce="zc.ds",Ne="zc.hvc.0",tt="zc.sps.0",Qe="zc.sps.1",ne="zc.sps.0.0",oe="zc.spsr.0.0",fe="zc.sps.1.0",Y="zc.spsr.1.0",re="zc.smsi.0",K="zc.opsu",M="zc.opur",F="zc.sao",T="zc.stoto",_="zc.psh.0",E="zc.psh.1",w="zc.tsh.rngn.0",R="zc.tsh.rngn.1",V="zc.tsh.dgnb",ae="zc.sc.al",q="zc.s.cmt",k="zc.s.sss",G="zsc.ssgn",xe="zsc.ccgl",Ae="zsc.ccns",De="zsc.ucgl",Ie="zc.p.0.sp.0",be="zc.p.ps",qe="zc.p.0.ocpss",Ve="zc.p.cps.0",pe="zc.p.0.ocos",j="zc.p.0.oslds",B="zc.p.0.ogrd",nt="zc.p.0.orpe",he="zc.p.0.orci.1",it="zc.p.0.oic",wt="zc.p.0.ocsc",Ee="zc.p.0.oicsc",Oe="zc.p.0.rp",rt="zc.p.0.spqt",me="zc.p.0.upq",Se="zc.p.0.orrs",ge="zc.p.0.orcs",ve="zc.p.0.sci",ee="zc.p.0.psr",ze="zc.p.0.sp.1",Je="zc.p.0.od",yt="zc.p.0.ssl.0",xt="zc.p.0.ssl.1",Ye="zc.p.0.heb",J="zc.p.0.ss",He="zc.p.0.rgn",Le="zc.p.0.sgn",Ue="zc.p.0.hdgn",_t="zc.p.0.sb.0",st="zc.p.0.scd",Dt="zc.p.0.scg",qt="zc.p.0.rsi",Lt="zc.p.0.croic",ut="zc.p.0.tc",Yt="zc.p.1.sp.0",wn="zc.p.ocpss.1",Rn="zc.p.cps.1",jn="zc.p.hcsws.1",Mn="zc.p.ocos.1",Pn="zc.p.oslds.1",ci="zc.p.ormd.1",Nr="zc.p.orpe.1",nr="zc.p.orci.1.1",Nn="zc.p.oic.1",_r="zc.p.ocsc.1",$n="zc.p.oicsc.1",Dr="zc.p.opcsc.1",Gr="zc.p.rp.1",Or="zc.p.spqt.1",mi="zc.p.upq.1",Ar="zc.p.gs.1",sr="zc.p.orrs.1",kn="zc.p.orcs.1",Jn="zc.p.orss.1",Mr="zc.p.ogrs.1",ar="zc.p.gvc",oi="zc.p.sci.1",gi="zc.p.psr.1",go="zc.p.1.sp.1",xi="zc.p.od.1",ui="zc.p.ssl.1",no="zc.p.ssl.1.1",Ui="zc.p.1.nqi",vi="zc.p.1.rgn",Br="zc.p.1.sgn",ur="zc.p.1.hdgn",Qr="zc.p.1.scd",qr="zc.p.1.scg",Bi="zc.p.1.oce",Vn="zc.p.1.smsbpm",mr="zc.p.1.sms",lr="zc.p.1.mst",ti="zc.p.1.spsf",Q="zc.p.1.rsi",dt="zc.p.1.croic",Be="zc.uslq",Te="zc.sr.uud",$e="zc.hpqd.pl",Ge="zc.hpqd.pu",mt="zc.hcid.pu",vt="zc.sr.sd",St="zc.sr.cisn",It="zc.sr.chdtr",Nt="zc.sr.sprd",Gt="zc.sr.rrp.0",Ut="zc.sr.ccptr",Wt="zc.sr.srptc.0",an="zc.sr.sct.0",en="zc.sr.csi.0",Cn="zc.sr.cic.0",Un="zc.sr.cnia.0",On="zc.p.scv",Xn="zc.sh.msbss",Zn="zc.sh.ms",Sr="zc.sh.psl",gr="zc.srs",ir="zc.irs",Ti="zc.ssh",eo="zc.s.nqga",_i="zc.ups.0",Vr="zc.p.0.gqs",li="zc.p.1.gqs",di="zc.crh.a.0",Wr="zc.ctcc.a.0",Wn="zc.hrh.smt.0",Ji="zc.hrh.smt.1",hi="zc.hrh.grdbc",Ii="zc.vam.rv",ie="zc.vam.iwg",L="zc.vam.vam",ue="zc.svc",je="zc.sac",Xe="zc.rp",ft="zc.emo",bt="zc.asi",Rt="zc.mpsv.0",Pt="zc.mpsa.0",Vt="zc.mm",$t="zc.mpsv.1",ln="zc.mpsa.1",qn="zc.mapa.1",Tn="zc.mapv.1",Sn="zc.at",_n="zc.rt",Gn="zc.ht"},1350:function(ot,Re,Z){Z.d(Re,{E:function(){return Pe}});var I=function(ke,ce,Ne,tt){return new(Ne||(Ne=Promise))(function(Qe,ne){function oe(re){try{Y(tt.next(re))}catch(K){ne(K)}}function fe(re){try{Y(tt.throw(re))}catch(K){ne(K)}}function Y(re){var K;re.done?Qe(re.value):(K=re.value,K instanceof Ne?K:new Ne(function(M){M(K)})).then(oe,fe)}Y((tt=tt.apply(ke,[])).next())})},P=function(ke,ce){var Ne,tt,Qe,ne,oe={label:0,sent:function(){if(1&Qe[0])throw Qe[1];return Qe[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},typeof Symbol=="function"&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(Y){return function(re){return(function(K){if(Ne)throw new TypeError("Generator is already executing.");for(;ne&&(ne=0,K[0]&&(oe=0)),oe;)try{if(Ne=1,tt&&(Qe=2&K[0]?tt.return:K[0]?tt.throw||((Qe=tt.return)&&Qe.call(tt),0):tt.next)&&!(Qe=Qe.call(tt,K[1])).done)return Qe;switch(tt=0,Qe&&(K=[2&K[0],Qe.value]),K[0]){case 0:case 1:Qe=K;break;case 4:return oe.label++,{value:K[1],done:!1};case 5:oe.label++,tt=K[1],K=[0];continue;case 7:K=oe.ops.pop(),oe.trys.pop();continue;default:if(Qe=oe.trys,!((Qe=Qe.length>0&&Qe[Qe.length-1])||K[0]!==6&&K[0]!==2)){oe=0;continue}if(K[0]===3&&(!Qe||K[1]>Qe[0]&&K[1]<Qe[3])){oe.label=K[1];break}if(K[0]===6&&oe.label<Qe[1]){oe.label=Qe[1],Qe=K;break}if(Qe&&oe.label<Qe[2]){oe.label=Qe[2],oe.ops.push(K);break}Qe[2]&&oe.ops.pop(),oe.trys.pop();continue}K=ce.call(ke,oe)}catch(M){K=[6,M],tt=0}finally{Ne=Qe=0}if(5&K[0])throw K[1];return{value:K[0]?K[1]:void 0,done:!0}})([Y,re])}}},Pe=(function(){function ke(){this.isFirstNode=!0,this.isLastNode=!0,this.hasAnother=!1}return ke.prototype.connect=function(ce){return I(this,void 0,void 0,function(){return P(this,function(Ne){switch(Ne.label){case 0:return this.next=ce,this.output?[4,ce.setInput(this.output)]:[3,2];case 1:Ne.sent(),Ne.label=2;case 2:return[2,ce]}})})},ke.prototype.disconnect=function(ce){return I(this,void 0,void 0,function(){return P(this,function(Ne){switch(Ne.label){case 0:return this.next?[4,this.next.setInput(null,ce)]:[3,2];case 1:Ne.sent(),this.next=void 0,Ne.label=2;case 2:return[2]}})})},ke.prototype.setNodePos=function(ce,Ne,tt){ce!==void 0&&(this.isFirstNode=ce),Ne!==void 0&&(this.isLastNode=Ne),typeof tt=="boolean"&&(this.hasAnother=!tt)},ke})()},2638:function(ot,Re,Z){Z.d(Re,{Am:function(){return Ae},B7:function(){return j},B8:function(){return me},Bl:function(){return it},D2:function(){return he},Dg:function(){return K},EA:function(){return Ve},EN:function(){return Ee},Es:function(){return Ie},F1:function(){return ce},FV:function(){return _},Hb:function(){return Qe},Kk:function(){return V},Ks:function(){return tt},LO:function(){return M},Lx:function(){return w},Mo:function(){return G},NI:function(){return qe},NP:function(){return q},T_:function(){return ae},UP:function(){return pe},UV:function(){return De},X5:function(){return re},Xb:function(){return Y},ZV:function(){return R},b3:function(){return wt},bD:function(){return ke},d7:function(){return T},di:function(){return E},eZ:function(){return Oe},ey:function(){return B},h7:function(){return rt},jZ:function(){return k},ku:function(){return be},qP:function(){return nt},qt:function(){return Pe},t0:function(){return P.t0},uv:function(){return F},wN:function(){return xe},wl:function(){return ve},xb:function(){return fe}});var I,P=Z(3052),Pe="3.11.0",ke="2025-10-24 20:49:13",ce=void 0;(function(ee){ee[ee.debug=0]="debug",ee[ee.info=1]="info",ee[ee.warn=2]="warn",ee[ee.error=3]="error",ee[ee.report=99]="report",ee[ee.disable=100]="disable"})(I||(I={}));var Ne,tt,Qe;(function(ee){ee[ee.disable=0]="disable",ee[ee.websocket=1]="websocket",ee[ee.https=2]="https"})(Ne||(Ne={})),(function(ee){ee[ee.SDKProject_ZegoWebRTC=6]="SDKProject_ZegoWebRTC",ee[ee.SDKProject_ZegoMiniProgram=7]="SDKProject_ZegoMiniProgram"})(tt||(tt={})),(function(ee){ee[ee.UDP=0]="UDP",ee[ee.RTMP=1]="RTMP",ee[ee.FLV=2]="FLV",ee[ee.HLS=3]="HLS",ee[ee.WEBRTC=4]="WEBRTC"})(Qe||(Qe={}));var ne,oe,fe={disconnected:0,connecting:1,connected:2},Y=1,re=2,K=3,M=256,F=1024,T=1e3,_=1,E=50,w=1,R=3600,V=52e6,ae={waiting_url:1,tryPublish:2,update_info:3,publishing:4,stop:5,retryPublish:6},q={liveNone:0,liveBegin:2001,liveEnd:2002,liveUpdate:2003},k=101,G=(ne=1,function(){return ne++}),xe=(function(){var ee=1;return function(){return ee++}})();(function(ee){ee[ee.ClientType_None=0]="ClientType_None",ee[ee.ClientType_H5=1]="ClientType_H5",ee[ee.ClientType_SmallPragram=2]="ClientType_SmallPragram",ee[ee.ClientType_Webrtc=3]="ClientType_Webrtc"})(oe||(oe={}));var Ae,De,Ie,be,qe,Ve,pe,j,B,nt,he,it,wt,Ee={added:12001,deleted:12002,updated:12003},Oe={start:0,error:1,retry:2},rt={start:0,error:1,retry:2,stop:3};(function(ee){ee[ee.Default=0]="Default",ee[ee.Extranet=1]="Extranet",ee[ee.Intranet=2]="Intranet"})(Ae||(Ae={})),(function(ee){ee[ee.logout=0]="logout",ee[ee.trylogin=1]="trylogin",ee[ee.login=2]="login"})(De||(De={})),(function(ee){ee[ee.logout=0]="logout",ee[ee.trylogin=1]="trylogin",ee[ee.login=2]="login",ee[ee.reconnect=3]="reconnect"})(Ie||(Ie={})),(function(ee){ee[ee.stop=0]="stop",ee[ee.start=1]="start"})(be||(be={})),(function(ee){ee[ee.CDN=0]="CDN",ee[ee.RTC=1]="RTC",ee[ee.L3=2]="L3",ee[ee.DG=3]="DG"})(qe||(qe={})),(function(ee){ee[ee.useAnalyzer=0]="useAnalyzer",ee[ee.useWorklet=1]="useWorklet"})(Ve||(Ve={})),(function(ee){ee[ee.Default=3]="Default",ee[ee.StandardVideoCall=4]="StandardVideoCall",ee[ee.HighVideoCall=5]="HighVideoCall",ee[ee.StandardChatroom=6]="StandardChatroom",ee[ee.HighQualityChatroom=7]="HighQualityChatroom",ee[ee.Broadcast=8]="Broadcast",ee[ee.Karaoke=9]="Karaoke",ee[ee.UNKNOWN=100]="UNKNOWN"})(pe||(pe={})),(function(ee){ee.WIN32="WIN32",ee.MAC="Mac",ee.ANDROID="Android",ee.LINUX="Linux",ee.IOS="iOS",ee.Harmony="Harmony",ee.UNKNOWN="WTF"})(j||(j={})),(function(ee){ee.CDN="cdn",ee.L3="l3",ee.RTC="rtc"})(B||(B={})),(function(ee){ee[ee.RTC=0]="RTC",ee[ee.CDN=1]="CDN",ee[ee.L3=2]="L3",ee[ee.DG=3]="DG",ee[ee.CUSTOM=5]="CUSTOM"})(nt||(nt={})),(function(ee){ee[ee.offline=0]="offline",ee[ee.online=1]="online"})(he||(he={})),(function(ee){ee[ee.MinQuality=0]="MinQuality",ee[ee.DieQuality=0]="DieQuality",ee[ee.PoorMinQuality=1]="PoorMinQuality",ee[ee.MiddleMinQuality=30]="MiddleMinQuality",ee[ee.GoodMinQuality=60]="GoodMinQuality",ee[ee.ExcellentMinQuality=85]="ExcellentMinQuality",ee[ee.MaxQuality=100]="MaxQuality"})(it||(it={})),(function(ee){ee[ee.Unknown=-1]="Unknown",ee[ee.Excellent=0]="Excellent",ee[ee.Good=1]="Good",ee[ee.Middle=2]="Middle",ee[ee.Poor=3]="Poor",ee[ee.Die=4]="Die"})(wt||(wt={}));var me,Se,ge=(function(){function ee(ze,Je){ze===void 0&&(ze=null),Je===void 0&&(Je=null),this.next=null,this.prev=null,this._id=ze,this._data=Je}return Object.defineProperty(ee.prototype,"id",{get:function(){return this._id?this._id:null},set:function(ze){this._id=ze},enumerable:!1,configurable:!0}),Object.defineProperty(ee.prototype,"data",{get:function(){return this._data},set:function(ze){this._data=ze},enumerable:!1,configurable:!0}),ee.prototype.hasNext=function(){return this.next&&this.next.id},ee.prototype.hasPrev=function(){return this.prev&&this.prev.id},ee})(),ve=(function(){function ee(){this.start=new ge,this.end=new ge,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return ee.prototype.insertBefore=function(ze,Je){var yt=new ge(this._idCounter,Je);return yt.next=ze,yt.prev=ze.prev,ze.prev&&(ze.prev.next=yt),ze.prev=yt,++this._idCounter,++this._numNodes,yt},ee.prototype.addLast=function(ze){return this.insertBefore(this.end,ze)},ee.prototype.add=function(ze){return this.addLast(ze)},ee.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},ee.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},ee.prototype.size=function(){return this._numNodes},ee.prototype.getFromFirst=function(ze){var Je=0,yt=this.start.next;if(ze>=0)for(;Je<ze&&yt!==null;)yt=yt.next,++Je;else yt=null;if(yt===null)throw"Index out of bounds.";return yt},ee.prototype.get=function(ze){return ze===0?this.getFirst():ze===this._numNodes-1?this.getLast():this.getFromFirst(ze)},ee.prototype.remove=function(ze){return ze.prev&&(ze.prev.next=ze.next),ze.next&&(ze.next.prev=ze.prev),--this._numNodes,ze},ee.prototype.removeFirst=function(){var ze=null;return this._numNodes>0&&this.start.next&&(ze=this.remove(this.start.next)),ze},ee.prototype.removeLast=function(){var ze=null;return this._numNodes>0&&this.end.prev&&(ze=this.remove(this.end.prev)),ze},ee.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},ee.prototype.each=function(ze){for(var Je=this.start;Je.hasNext();)ze(Je=Je.next)},ee.prototype.find=function(ze){for(var Je=this.start,yt=!1,xt=null;Je.hasNext()&&!yt;)ze(Je=Je.next)&&(xt=Je,yt=!0);return xt},ee.prototype.map=function(ze){for(var Je=this.start,yt=[];Je.hasNext();)ze(Je=Je.next)&&yt.push(Je);return yt},ee.prototype.push=function(ze){return this.addLast(ze)},ee.prototype.unshift=function(ze){this.insertBefore(this._numNodes>0?this.start.next:this.end,ze)},ee.prototype.pop=function(){return this.removeLast()},ee.prototype.shift=function(){return this.removeFirst()},ee})();(function(ee){ee.ONLY_BASELINE="only_baseline",ee.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first",ee.HIGH_PROFILE_FIRST="high_profile_first"})(me||(me={})),(function(ee){ee[ee.None=0]="None",ee[ee.Vocalist=1]="Vocalist",ee[ee.BackingSinging=2]="BackingSinging"})(Se||(Se={}))},2799:function(ot,Re,Z){var I;I=(P,Pe)=>(()=>{var ke={955:function(Qe,ne,oe){var fe;Qe.exports=(fe=oe(21),oe(754),oe(636),oe(506),oe(165),(function(){var Y=fe,re=Y.lib.BlockCipher,K=Y.algo,M=[],F=[],T=[],_=[],E=[],w=[],R=[],V=[],ae=[],q=[];(function(){for(var xe=[],Ae=0;Ae<256;Ae++)xe[Ae]=Ae<128?Ae<<1:Ae<<1^283;var De=0,Ie=0;for(Ae=0;Ae<256;Ae++){var be=Ie^Ie<<1^Ie<<2^Ie<<3^Ie<<4;M[De]=be=be>>>8^255&be^99,F[be]=De;var qe=xe[De],Ve=xe[qe],pe=xe[Ve],j=257*xe[be]^16843008*be;T[De]=j<<24|j>>>8,_[De]=j<<16|j>>>16,E[De]=j<<8|j>>>24,w[De]=j,R[be]=(j=16843009*pe^65537*Ve^257*qe^16843008*De)<<24|j>>>8,V[be]=j<<16|j>>>16,ae[be]=j<<8|j>>>24,q[be]=j,De?(De=qe^xe[xe[xe[pe^qe]]],Ie^=xe[xe[Ie]]):De=Ie=1}})();var k=[0,1,2,4,8,16,32,64,128,27,54],G=K.AES=re.extend({t:function(){if(!this.i||this.u!==this.h){for(var xe=this.u=this.h,Ae=xe.words,De=xe.sigBytes/4,Ie=4*((this.i=De+6)+1),be=this._=[],qe=0;qe<Ie;qe++)qe<De?be[qe]=Ae[qe]:(j=be[qe-1],qe%De?De>6&&qe%De==4&&(j=M[j>>>24]<<24|M[j>>>16&255]<<16|M[j>>>8&255]<<8|M[255&j]):(j=M[(j=j<<8|j>>>24)>>>24]<<24|M[j>>>16&255]<<16|M[j>>>8&255]<<8|M[255&j],j^=k[qe/De|0]<<24),be[qe]=be[qe-De]^j);for(var Ve=this.l=[],pe=0;pe<Ie;pe++){if(qe=Ie-pe,pe%4)var j=be[qe];else j=be[qe-4];Ve[pe]=pe<4||qe<=4?j:R[M[j>>>24]]^V[M[j>>>16&255]]^ae[M[j>>>8&255]]^q[M[255&j]]}}},encryptBlock:function(xe,Ae){this.v(xe,Ae,this._,T,_,E,w,M)},decryptBlock:function(xe,Ae){var De=xe[Ae+1];xe[Ae+1]=xe[Ae+3],xe[Ae+3]=De,this.v(xe,Ae,this.l,R,V,ae,q,F),De=xe[Ae+1],xe[Ae+1]=xe[Ae+3],xe[Ae+3]=De},v:function(xe,Ae,De,Ie,be,qe,Ve,pe){for(var j=this.i,B=xe[Ae]^De[0],nt=xe[Ae+1]^De[1],he=xe[Ae+2]^De[2],it=xe[Ae+3]^De[3],wt=4,Ee=1;Ee<j;Ee++){var Oe=Ie[B>>>24]^be[nt>>>16&255]^qe[he>>>8&255]^Ve[255&it]^De[wt++],rt=Ie[nt>>>24]^be[he>>>16&255]^qe[it>>>8&255]^Ve[255&B]^De[wt++],me=Ie[he>>>24]^be[it>>>16&255]^qe[B>>>8&255]^Ve[255&nt]^De[wt++],Se=Ie[it>>>24]^be[B>>>16&255]^qe[nt>>>8&255]^Ve[255&he]^De[wt++];B=Oe,nt=rt,he=me,it=Se}Oe=(pe[B>>>24]<<24|pe[nt>>>16&255]<<16|pe[he>>>8&255]<<8|pe[255&it])^De[wt++],rt=(pe[nt>>>24]<<24|pe[he>>>16&255]<<16|pe[it>>>8&255]<<8|pe[255&B])^De[wt++],me=(pe[he>>>24]<<24|pe[it>>>16&255]<<16|pe[B>>>8&255]<<8|pe[255&nt])^De[wt++],Se=(pe[it>>>24]<<24|pe[B>>>16&255]<<16|pe[nt>>>8&255]<<8|pe[255&he])^De[wt++],xe[Ae]=Oe,xe[Ae+1]=rt,xe[Ae+2]=me,xe[Ae+3]=Se},keySize:8});Y.AES=re.p(G)})(),fe.AES)},165:function(Qe,ne,oe){var fe;Qe.exports=(fe=oe(21),oe(506),void(fe.lib.Cipher||(function(){var Y=fe,re=Y.lib,K=re.Base,M=re.WordArray,F=re.BufferedBlockAlgorithm,T=Y.enc,_=T.Base64,E=Y.algo.EvpKDF,w=re.Cipher=F.extend({cfg:K.extend(),createEncryptor:function(Ie,be){return this.create(this.S,Ie,be)},createDecryptor:function(Ie,be){return this.create(this.T,Ie,be)},init:function(Ie,be,qe){this.cfg=this.cfg.extend(qe),this.C=Ie,this.h=be,this.reset()},reset:function(){F.reset.call(this),this.t()},process:function(Ie){return this.m(Ie),this.O()},finalize:function(Ie){return Ie&&this.m(Ie),this.R()},keySize:4,ivSize:4,S:1,T:2,p:(function(){function Ie(be){return typeof be=="string"?De:xe}return function(be){return{encrypt:function(qe,Ve,pe){return Ie(Ve).encrypt(be,qe,Ve,pe)},decrypt:function(qe,Ve,pe){return Ie(Ve).decrypt(be,qe,Ve,pe)}}}})()}),R=(re.StreamCipher=w.extend({R:function(){return this.O(!0)},blockSize:1}),Y.mode={}),V=re.BlockCipherMode=K.extend({createEncryptor:function(Ie,be){return this.Encryptor.create(Ie,be)},createDecryptor:function(Ie,be){return this.Decryptor.create(Ie,be)},init:function(Ie,be){this.A=Ie,this.P=be}}),ae=R.CBC=(function(){var Ie=V.extend();function be(qe,Ve,pe){var j,B=this.P;B?(j=B,this.P=void 0):j=this.I;for(var nt=0;nt<pe;nt++)qe[Ve+nt]^=j[nt]}return Ie.Encryptor=Ie.extend({processBlock:function(qe,Ve){var pe=this.A,j=pe.blockSize;be.call(this,qe,Ve,j),pe.encryptBlock(qe,Ve),this.I=qe.slice(Ve,Ve+j)}}),Ie.Decryptor=Ie.extend({processBlock:function(qe,Ve){var pe=this.A,j=pe.blockSize,B=qe.slice(Ve,Ve+j);pe.decryptBlock(qe,Ve),be.call(this,qe,Ve,j),this.I=B}}),Ie})(),q=(Y.pad={}).Pkcs7={pad:function(Ie,be){for(var qe=4*be,Ve=qe-Ie.sigBytes%qe,pe=Ve<<24|Ve<<16|Ve<<8|Ve,j=[],B=0;B<Ve;B+=4)j.push(pe);var nt=M.create(j,Ve);Ie.concat(nt)},unpad:function(Ie){Ie.sigBytes-=255&Ie.words[Ie.sigBytes-1>>>2]}},k=(re.BlockCipher=w.extend({cfg:w.cfg.extend({mode:ae,padding:q}),reset:function(){var Ie;w.reset.call(this);var be=this.cfg,qe=be.iv,Ve=be.mode;this.C==this.S?Ie=Ve.createEncryptor:(Ie=Ve.createDecryptor,this.N=1),this.D&&this.D.M==Ie?this.D.init(this,qe&&qe.words):(this.D=Ie.call(Ve,this,qe&&qe.words),this.D.M=Ie)},H:function(Ie,be){this.D.processBlock(Ie,be)},R:function(){var Ie,be=this.cfg.padding;return this.C==this.S?(be.pad(this.U,this.blockSize),Ie=this.O(!0)):(Ie=this.O(!0),be.unpad(Ie)),Ie},blockSize:4}),re.CipherParams=K.extend({init:function(Ie){this.mixIn(Ie)},toString:function(Ie){return(Ie||this.formatter).stringify(this)}})),G=(Y.format={}).OpenSSL={stringify:function(Ie){var be=Ie.ciphertext,qe=Ie.salt;return(qe?M.create([1398893684,1701076831]).concat(qe).concat(be):be).toString(_)},parse:function(Ie){var be,qe=_.parse(Ie),Ve=qe.words;return Ve[0]==1398893684&&Ve[1]==1701076831&&(be=M.create(Ve.slice(2,4)),Ve.splice(0,4),qe.sigBytes-=16),k.create({ciphertext:qe,salt:be})}},xe=re.SerializableCipher=K.extend({cfg:K.extend({format:G}),encrypt:function(Ie,be,qe,Ve){Ve=this.cfg.extend(Ve);var pe=Ie.createEncryptor(qe,Ve),j=pe.finalize(be),B=pe.cfg;return k.create({ciphertext:j,key:qe,iv:B.iv,algorithm:Ie,mode:B.mode,padding:B.padding,blockSize:Ie.blockSize,formatter:Ve.format})},decrypt:function(Ie,be,qe,Ve){return Ve=this.cfg.extend(Ve),be=this.G(be,Ve.format),Ie.createDecryptor(qe,Ve).finalize(be.ciphertext)},G:function(Ie,be){return typeof Ie=="string"?be.parse(Ie,this):Ie}}),Ae=(Y.kdf={}).OpenSSL={execute:function(Ie,be,qe,Ve){Ve||(Ve=M.random(8));var pe=E.create({keySize:be+qe}).compute(Ie,Ve),j=M.create(pe.words.slice(be),4*qe);return pe.sigBytes=4*be,k.create({key:pe,iv:j,salt:Ve})}},De=re.PasswordBasedCipher=xe.extend({cfg:xe.cfg.extend({kdf:Ae}),encrypt:function(Ie,be,qe,Ve){var pe=(Ve=this.cfg.extend(Ve)).kdf.execute(qe,Ie.keySize,Ie.ivSize);Ve.iv=pe.iv;var j=xe.encrypt.call(this,Ie,be,pe.key,Ve);return j.mixIn(pe),j},decrypt:function(Ie,be,qe,Ve){Ve=this.cfg.extend(Ve),be=this.G(be,Ve.format);var pe=Ve.kdf.execute(qe,Ie.keySize,Ie.ivSize,be.salt);return Ve.iv=pe.iv,xe.decrypt.call(this,Ie,be,pe.key,Ve)}})})()))},21:function(Qe,ne,oe){var fe;Qe.exports=(fe=fe||(function(Y){var re;if(typeof window<"u"&&window.crypto&&(re=window.crypto),typeof self<"u"&&self.crypto&&(re=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(re=globalThis.crypto),!re&&typeof window<"u"&&window.msCrypto&&(re=window.msCrypto),!re&&oe.g!==void 0&&oe.g.crypto&&(re=oe.g.crypto),!re)try{re=oe(477)}catch{}var K=function(){if(re){if(typeof re.getRandomValues=="function")try{return re.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof re.randomBytes=="function")try{return re.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},M=Object.create||(function(){function G(){}return function(xe){var Ae;return G.prototype=xe,Ae=new G,G.prototype=null,Ae}})(),F={},T=F.lib={},_=T.Base={extend:function(G){var xe=M(this);return G&&xe.mixIn(G),xe.hasOwnProperty("init")&&this.init!==xe.init||(xe.init=function(){xe.$super.init.apply(this,arguments)}),xe.init.prototype=xe,xe.$super=this,xe},create:function(){var G=this.extend();return G.init.apply(G,arguments),G},init:function(){},mixIn:function(G){for(var xe in G)G.hasOwnProperty(xe)&&(this[xe]=G[xe]);G.hasOwnProperty("toString")&&(this.toString=G.toString)},clone:function(){return this.init.prototype.extend(this)}},E=T.WordArray=_.extend({init:function(G,xe){G=this.words=G||[],this.sigBytes=xe??4*G.length},toString:function(G){return(G||R).stringify(this)},concat:function(G){var xe=this.words,Ae=G.words,De=this.sigBytes,Ie=G.sigBytes;if(this.clamp(),De%4)for(var be=0;be<Ie;be++)xe[De+be>>>2]|=(Ae[be>>>2]>>>24-be%4*8&255)<<24-(De+be)%4*8;else for(var qe=0;qe<Ie;qe+=4)xe[De+qe>>>2]=Ae[qe>>>2];return this.sigBytes+=Ie,this},clamp:function(){var G=this.words,xe=this.sigBytes;G[xe>>>2]&=4294967295<<32-xe%4*8,G.length=Y.ceil(xe/4)},clone:function(){var G=_.clone.call(this);return G.words=this.words.slice(0),G},random:function(G){for(var xe=[],Ae=0;Ae<G;Ae+=4)xe.push(K());return new E.init(xe,G)}}),w=F.enc={},R=w.Hex={stringify:function(G){for(var xe=G.words,Ae=G.sigBytes,De=[],Ie=0;Ie<Ae;Ie++){var be=xe[Ie>>>2]>>>24-Ie%4*8&255;De.push((be>>>4).toString(16)),De.push((15&be).toString(16))}return De.join("")},parse:function(G){for(var xe=G.length,Ae=[],De=0;De<xe;De+=2)Ae[De>>>3]|=parseInt(G.substr(De,2),16)<<24-De%8*4;return new E.init(Ae,xe/2)}},V=w.Latin1={stringify:function(G){for(var xe=G.words,Ae=G.sigBytes,De=[],Ie=0;Ie<Ae;Ie++)De.push(String.fromCharCode(xe[Ie>>>2]>>>24-Ie%4*8&255));return De.join("")},parse:function(G){for(var xe=G.length,Ae=[],De=0;De<xe;De++)Ae[De>>>2]|=(255&G.charCodeAt(De))<<24-De%4*8;return new E.init(Ae,xe)}},ae=w.Utf8={stringify:function(G){try{return decodeURIComponent(escape(V.stringify(G)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(G){return V.parse(unescape(encodeURIComponent(G)))}},q=T.BufferedBlockAlgorithm=_.extend({reset:function(){this.U=new E.init,this.k=0},m:function(G){typeof G=="string"&&(G=ae.parse(G)),this.U.concat(G),this.k+=G.sigBytes},O:function(G){var xe,Ae=this.U,De=Ae.words,Ie=Ae.sigBytes,be=this.blockSize,qe=Ie/(4*be),Ve=(qe=G?Y.ceil(qe):Y.max((0|qe)-this.N,0))*be,pe=Y.min(4*Ve,Ie);if(Ve){for(var j=0;j<Ve;j+=be)this.H(De,j);xe=De.splice(0,Ve),Ae.sigBytes-=pe}return new E.init(xe,pe)},clone:function(){var G=_.clone.call(this);return G.U=this.U.clone(),G},N:0}),k=(T.Hasher=q.extend({cfg:_.extend(),init:function(G){this.cfg=this.cfg.extend(G),this.reset()},reset:function(){q.reset.call(this),this.t()},update:function(G){return this.m(G),this.O(),this},finalize:function(G){return G&&this.m(G),this.R()},blockSize:16,p:function(G){return function(xe,Ae){return new G.init(Ae).finalize(xe)}},V:function(G){return function(xe,Ae){return new k.HMAC.init(G,Ae).finalize(xe)}}}),F.algo={});return F})(Math),fe)},754:function(Qe,ne,oe){var fe;Qe.exports=(fe=oe(21),(function(){var Y=fe.lib.WordArray;function re(K,M,F){for(var T=[],_=0,E=0;E<M;E++)if(E%4){var w=F[K.charCodeAt(E-1)]<<E%4*2|F[K.charCodeAt(E)]>>>6-E%4*2;T[_>>>2]|=w<<24-_%4*8,_++}return Y.create(T,_)}fe.enc.Base64={stringify:function(K){var M=K.words,F=K.sigBytes,T=this.B;K.clamp();for(var _=[],E=0;E<F;E+=3)for(var w=(M[E>>>2]>>>24-E%4*8&255)<<16|(M[E+1>>>2]>>>24-(E+1)%4*8&255)<<8|M[E+2>>>2]>>>24-(E+2)%4*8&255,R=0;R<4&&E+.75*R<F;R++)_.push(T.charAt(w>>>6*(3-R)&63));var V=T.charAt(64);if(V)for(;_.length%4;)_.push(V);return _.join("")},parse:function(K){var M=K.length,F=this.B,T=this.Y;if(!T){T=this.Y=[];for(var _=0;_<F.length;_++)T[F.charCodeAt(_)]=_}var E=F.charAt(64);if(E){var w=K.indexOf(E);w!==-1&&(M=w)}return re(K,M,T)},B:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})(),fe.enc.Base64)},178:function(Qe,ne,oe){Qe.exports=oe(21).enc.Utf8},506:function(Qe,ne,oe){var fe,Y,re,K,M,F,T;Qe.exports=(T=oe(21),oe(471),oe(25),Y=(fe=T).lib,K=Y.WordArray,F=(M=fe.algo).EvpKDF=(re=Y.Base).extend({cfg:re.extend({keySize:4,hasher:M.MD5,iterations:1}),init:function(_){this.cfg=this.cfg.extend(_)},compute:function(_,E){for(var w,R=this.cfg,V=R.hasher.create(),ae=K.create(),q=ae.words,k=R.keySize,G=R.iterations;q.length<k;){w&&V.update(w),w=V.update(_).finalize(E),V.reset();for(var xe=1;xe<G;xe++)w=V.finalize(w),V.reset();ae.concat(w)}return ae.sigBytes=4*k,ae}}),fe.EvpKDF=function(_,E,w){return F.create(w).compute(_,E)},T.EvpKDF)},25:function(Qe,ne,oe){var fe,Y,re;Qe.exports=(Y=(fe=oe(21)).lib.Base,re=fe.enc.Utf8,void(fe.algo.HMAC=Y.extend({init:function(K,M){K=this.L=new K.init,typeof M=="string"&&(M=re.parse(M));var F=K.blockSize,T=4*F;M.sigBytes>T&&(M=K.finalize(M)),M.clamp();for(var _=this.j=M.clone(),E=this.q=M.clone(),w=_.words,R=E.words,V=0;V<F;V++)w[V]^=1549556828,R[V]^=909522486;_.sigBytes=E.sigBytes=T,this.reset()},reset:function(){var K=this.L;K.reset(),K.update(this.q)},update:function(K){return this.L.update(K),this},finalize:function(K){var M=this.L,F=M.finalize(K);return M.reset(),M.finalize(this.j.clone().concat(F))}})))},636:function(Qe,ne,oe){var fe;Qe.exports=(fe=oe(21),(function(Y){var re=fe,K=re.lib,M=K.WordArray,F=K.Hasher,T=re.algo,_=[];(function(){for(var q=0;q<64;q++)_[q]=4294967296*Y.abs(Y.sin(q+1))|0})();var E=T.MD5=F.extend({t:function(){this.F=new M.init([1732584193,4023233417,2562383102,271733878])},H:function(q,k){for(var G=0;G<16;G++){var xe=k+G,Ae=q[xe];q[xe]=16711935&(Ae<<8|Ae>>>24)|4278255360&(Ae<<24|Ae>>>8)}var De=this.F.words,Ie=q[k+0],be=q[k+1],qe=q[k+2],Ve=q[k+3],pe=q[k+4],j=q[k+5],B=q[k+6],nt=q[k+7],he=q[k+8],it=q[k+9],wt=q[k+10],Ee=q[k+11],Oe=q[k+12],rt=q[k+13],me=q[k+14],Se=q[k+15],ge=De[0],ve=De[1],ee=De[2],ze=De[3];ge=w(ge,ve,ee,ze,Ie,7,_[0]),ze=w(ze,ge,ve,ee,be,12,_[1]),ee=w(ee,ze,ge,ve,qe,17,_[2]),ve=w(ve,ee,ze,ge,Ve,22,_[3]),ge=w(ge,ve,ee,ze,pe,7,_[4]),ze=w(ze,ge,ve,ee,j,12,_[5]),ee=w(ee,ze,ge,ve,B,17,_[6]),ve=w(ve,ee,ze,ge,nt,22,_[7]),ge=w(ge,ve,ee,ze,he,7,_[8]),ze=w(ze,ge,ve,ee,it,12,_[9]),ee=w(ee,ze,ge,ve,wt,17,_[10]),ve=w(ve,ee,ze,ge,Ee,22,_[11]),ge=w(ge,ve,ee,ze,Oe,7,_[12]),ze=w(ze,ge,ve,ee,rt,12,_[13]),ee=w(ee,ze,ge,ve,me,17,_[14]),ge=R(ge,ve=w(ve,ee,ze,ge,Se,22,_[15]),ee,ze,be,5,_[16]),ze=R(ze,ge,ve,ee,B,9,_[17]),ee=R(ee,ze,ge,ve,Ee,14,_[18]),ve=R(ve,ee,ze,ge,Ie,20,_[19]),ge=R(ge,ve,ee,ze,j,5,_[20]),ze=R(ze,ge,ve,ee,wt,9,_[21]),ee=R(ee,ze,ge,ve,Se,14,_[22]),ve=R(ve,ee,ze,ge,pe,20,_[23]),ge=R(ge,ve,ee,ze,it,5,_[24]),ze=R(ze,ge,ve,ee,me,9,_[25]),ee=R(ee,ze,ge,ve,Ve,14,_[26]),ve=R(ve,ee,ze,ge,he,20,_[27]),ge=R(ge,ve,ee,ze,rt,5,_[28]),ze=R(ze,ge,ve,ee,qe,9,_[29]),ee=R(ee,ze,ge,ve,nt,14,_[30]),ge=V(ge,ve=R(ve,ee,ze,ge,Oe,20,_[31]),ee,ze,j,4,_[32]),ze=V(ze,ge,ve,ee,he,11,_[33]),ee=V(ee,ze,ge,ve,Ee,16,_[34]),ve=V(ve,ee,ze,ge,me,23,_[35]),ge=V(ge,ve,ee,ze,be,4,_[36]),ze=V(ze,ge,ve,ee,pe,11,_[37]),ee=V(ee,ze,ge,ve,nt,16,_[38]),ve=V(ve,ee,ze,ge,wt,23,_[39]),ge=V(ge,ve,ee,ze,rt,4,_[40]),ze=V(ze,ge,ve,ee,Ie,11,_[41]),ee=V(ee,ze,ge,ve,Ve,16,_[42]),ve=V(ve,ee,ze,ge,B,23,_[43]),ge=V(ge,ve,ee,ze,it,4,_[44]),ze=V(ze,ge,ve,ee,Oe,11,_[45]),ee=V(ee,ze,ge,ve,Se,16,_[46]),ge=ae(ge,ve=V(ve,ee,ze,ge,qe,23,_[47]),ee,ze,Ie,6,_[48]),ze=ae(ze,ge,ve,ee,nt,10,_[49]),ee=ae(ee,ze,ge,ve,me,15,_[50]),ve=ae(ve,ee,ze,ge,j,21,_[51]),ge=ae(ge,ve,ee,ze,Oe,6,_[52]),ze=ae(ze,ge,ve,ee,Ve,10,_[53]),ee=ae(ee,ze,ge,ve,wt,15,_[54]),ve=ae(ve,ee,ze,ge,be,21,_[55]),ge=ae(ge,ve,ee,ze,he,6,_[56]),ze=ae(ze,ge,ve,ee,Se,10,_[57]),ee=ae(ee,ze,ge,ve,B,15,_[58]),ve=ae(ve,ee,ze,ge,rt,21,_[59]),ge=ae(ge,ve,ee,ze,pe,6,_[60]),ze=ae(ze,ge,ve,ee,Ee,10,_[61]),ee=ae(ee,ze,ge,ve,qe,15,_[62]),ve=ae(ve,ee,ze,ge,it,21,_[63]),De[0]=De[0]+ge|0,De[1]=De[1]+ve|0,De[2]=De[2]+ee|0,De[3]=De[3]+ze|0},R:function(){var q=this.U,k=q.words,G=8*this.k,xe=8*q.sigBytes;k[xe>>>5]|=128<<24-xe%32;var Ae=Y.floor(G/4294967296),De=G;k[15+(xe+64>>>9<<4)]=16711935&(Ae<<8|Ae>>>24)|4278255360&(Ae<<24|Ae>>>8),k[14+(xe+64>>>9<<4)]=16711935&(De<<8|De>>>24)|4278255360&(De<<24|De>>>8),q.sigBytes=4*(k.length+1),this.O();for(var Ie=this.F,be=Ie.words,qe=0;qe<4;qe++){var Ve=be[qe];be[qe]=16711935&(Ve<<8|Ve>>>24)|4278255360&(Ve<<24|Ve>>>8)}return Ie},clone:function(){var q=F.clone.call(this);return q.F=this.F.clone(),q}});function w(q,k,G,xe,Ae,De,Ie){var be=q+(k&G|~k&xe)+Ae+Ie;return(be<<De|be>>>32-De)+k}function R(q,k,G,xe,Ae,De,Ie){var be=q+(k&xe|G&~xe)+Ae+Ie;return(be<<De|be>>>32-De)+k}function V(q,k,G,xe,Ae,De,Ie){var be=q+(k^G^xe)+Ae+Ie;return(be<<De|be>>>32-De)+k}function ae(q,k,G,xe,Ae,De,Ie){var be=q+(G^(k|~xe))+Ae+Ie;return(be<<De|be>>>32-De)+k}re.MD5=F.p(E),re.HmacMD5=F.V(E)})(Math),fe.MD5)},471:function(Qe,ne,oe){var fe,Y,re,K,M,F,T;Qe.exports=(Y=(fe=T=oe(21)).lib,re=Y.WordArray,M=[],F=fe.algo.SHA1=(K=Y.Hasher).extend({t:function(){this.F=new re.init([1732584193,4023233417,2562383102,271733878,3285377520])},H:function(_,E){for(var w=this.F.words,R=w[0],V=w[1],ae=w[2],q=w[3],k=w[4],G=0;G<80;G++){if(G<16)M[G]=0|_[E+G];else{var xe=M[G-3]^M[G-8]^M[G-14]^M[G-16];M[G]=xe<<1|xe>>>31}var Ae=(R<<5|R>>>27)+k+M[G];Ae+=G<20?1518500249+(V&ae|~V&q):G<40?1859775393+(V^ae^q):G<60?(V&ae|V&q|ae&q)-1894007588:(V^ae^q)-899497514,k=q,q=ae,ae=V<<30|V>>>2,V=R,R=Ae}w[0]=w[0]+R|0,w[1]=w[1]+V|0,w[2]=w[2]+ae|0,w[3]=w[3]+q|0,w[4]=w[4]+k|0},R:function(){var _=this.U,E=_.words,w=8*this.k,R=8*_.sigBytes;return E[R>>>5]|=128<<24-R%32,E[14+(R+64>>>9<<4)]=Math.floor(w/4294967296),E[15+(R+64>>>9<<4)]=w,_.sigBytes=4*E.length,this.O(),this.F},clone:function(){var _=K.clone.call(this);return _.F=this.F.clone(),_}}),fe.SHA1=K.p(F),fe.HmacSHA1=K.V(F),T.SHA1)},994:Qe=>{Qe.exports=P},788:Qe=>{Qe.exports=Pe},477:()=>{}},ce={};function Ne(Qe){var ne=ce[Qe];if(ne!==void 0)return ne.exports;var oe=ce[Qe]={exports:{}};return ke[Qe].call(oe.exports,oe,oe.exports,Ne),oe.exports}Ne.n=Qe=>{var ne=Qe&&Qe.J?()=>Qe.default:()=>Qe;return Ne.d(ne,{a:ne}),ne},Ne.d=(Qe,ne)=>{for(var oe in ne)Ne.o(ne,oe)&&!Ne.o(Qe,oe)&&Object.defineProperty(Qe,oe,{enumerable:!0,get:ne[oe]})},Ne.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),Ne.o=(Qe,ne)=>Object.prototype.hasOwnProperty.call(Qe,ne),Ne.r=Qe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Qe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Qe,"J",{value:!0})};var tt={};return(()=>{var Qe,ne,oe,fe,Y,re,K,M,F,T,_,E,w,R,V,ae,q,k,G;Ne.r(tt),Ne.d(tt,{BrokenType:()=>qe,BusinessService:()=>R,ConnectedType:()=>be,DisconnectedType:()=>Ie,Method:()=>De,Mode:()=>ae,NET_ACCESS_CONFIG:()=>ar,NetAgentHttpRequest:()=>Vr,NetAgentPCRequest:()=>Zn,ZegoConnectionAgent:()=>Ii}),(function(ie){ie[ie.Normal=0]="Normal",ie[ie.Private=1]="Private"})(Qe||(Qe={})),(function(ie){ie[ie.IPv4Only=0]="IPv4Only",ie[ie.IPv4Prefer=1]="IPv4Prefer",ie[ie.IPv6Prefer=2]="IPv6Prefer"})(ne||(ne={})),(function(ie){ie[ie.Default=0]="Default",ie[ie.Detail=1]="Detail"})(oe||(oe={})),(function(ie){ie[ie.IPv4=0]="IPv4",ie[ie.IPv6=1]="IPv6"})(fe||(fe={})),(function(ie){ie[ie.unreachable=0]="unreachable",ie[ie.unknown=1]="unknown",ie[ie.reachable=2]="reachable"})(Y||(Y={})),(function(ie){ie[ie.probed=0]="probed",ie[ie.noProbe=1]="noProbe",ie[ie.probing=2]="probing"})(re||(re={})),(function(ie){ie[ie.fail=0]="fail",ie[ie.connecting=1]="connecting",ie[ie.success=2]="success",ie[ie.timeout=3]="timeout"})(K||(K={})),(function(ie){ie[ie.WebSocket=0]="WebSocket",ie[ie.WebTransport=1]="WebTransport"})(M||(M={})),(function(ie){ie[ie.CONNECTING=0]="CONNECTING",ie[ie.OPEN=1]="OPEN",ie[ie.CLOSING=2]="CLOSING",ie[ie.CLOSED=3]="CLOSED"})(F||(F={})),(function(ie){ie[ie.offline=0]="offline",ie[ie.online=1]="online"})(T||(T={})),(function(ie){ie[ie.PB=0]="PB",ie[ie.JSON=1]="JSON"})(_||(_={})),(function(ie){ie[ie.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",ie[ie.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",ie[ie.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",ie[ie.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",ie[ie.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",ie[ie.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",ie[ie.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",ie[ie.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",ie[ie.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",ie[ie.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",ie[ie.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",ie[ie.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",ie[ie.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",ie[ie.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",ie[ie.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",ie[ie.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",ie[ie.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",ie[ie.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",ie[ie.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",ie[ie.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",ie[ie.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",ie[ie.MSG_TYPE_HTTP_REQUEST2=33]="MSG_TYPE_HTTP_REQUEST2",ie[ie.MSG_TYPE_REDIRECT2=34]="MSG_TYPE_REDIRECT2",ie[ie.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2=35]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2",ie[ie.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2=36]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2",ie[ie.MSG_TYPE_GET_SVRADDR_REQUEST=39]="MSG_TYPE_GET_SVRADDR_REQUEST",ie[ie.MSG_TYPE_GET_SVRADDR_RESPONSE=40]="MSG_TYPE_GET_SVRADDR_RESPONSE"})(E||(E={})),(function(ie){ie[ie.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",ie[ie.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",ie[ie.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",ie[ie.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",ie[ie.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",ie[ie.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",ie[ie.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",ie[ie.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",ie[ie.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",ie[ie.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",ie[ie.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",ie[ie.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",ie[ie.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",ie[ie.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",ie[ie.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE"})(w||(w={})),(function(ie){ie[ie.SERVICE_UNSET=0]="SERVICE_UNSET",ie[ie.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",ie[ie.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",ie[ie.SERVICE_MIX=3]="SERVICE_MIX",ie[ie.SERVICE_ZEUS=4]="SERVICE_ZEUS",ie[ie.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",ie[ie.SERVICE_L3=6]="SERVICE_L3",ie[ie.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",ie[ie.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",ie[ie.SERVICE_ZIM=9]="SERVICE_ZIM",ie[ie.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",ie[ie.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",ie[ie.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",ie[ie.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",ie[ie.SERVICE_QUALITY=14]="SERVICE_QUALITY",ie[ie.SERVICE_SECURITY=15]="SERVICE_SECURITY",ie[ie.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",ie[ie.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",ie[ie.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",ie[ie.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",ie[ie.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",ie[ie.SERVICE_CDN=21]="SERVICE_CDN",ie[ie.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",ie[ie.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",ie[ie.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",ie[ie.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",ie[ie.SERVICE_ECHO=26]="SERVICE_ECHO",ie[ie.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",ie[ie.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR"})(R||(R={})),(function(ie){ie[ie.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",ie[ie.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",ie[ie.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET"})(V||(V={})),(function(ie){ie[ie.Mode_UNSET=0]="Mode_UNSET",ie[ie.MODE_ONLINE=1]="MODE_ONLINE",ie[ie.MODE_TEST=2]="MODE_TEST",ie[ie.MODE_ALPHA=3]="MODE_ALPHA"})(ae||(ae={})),(function(ie){ie[ie.HTTP=0]="HTTP",ie[ie.PC=1]="PC",ie[ie.OTHER=2]="OTHER"})(q||(q={})),(function(ie){ie[ie.NONE=0]="NONE",ie[ie.BROKEN=1]="BROKEN",ie[ie.DISCONNECT=2]="DISCONNECT"})(k||(k={})),(function(ie){ie[ie.CONNECTED=0]="CONNECTED",ie[ie.DISCONNECT=1]="DISCONNECT",ie[ie.BROKEN=2]="BROKEN"})(G||(G={}));var xe,Ae,De,Ie,be,qe,Ve,pe=[w.ACCESSHUB_INVALID_APPID,w.ACCESSHUB_INVALID_SIGNATURE];(function(ie){ie[ie.offline=0]="offline",ie[ie.online=1]="online"})(xe||(xe={})),(function(ie){ie[ie.ACTION_RESERVED=0]="ACTION_RESERVED",ie[ie.ACTION_DISPATCH=1]="ACTION_DISPATCH",ie[ie.ACTION_RETRY=2]="ACTION_RETRY",ie[ie.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",ie[ie.ACTION_ABORT=4]="ACTION_ABORT",ie[ie.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",ie[ie.ACTION_IDLE=6]="ACTION_IDLE"})(Ae||(Ae={})),(function(ie){ie[ie.METHOD_UNSET=0]="METHOD_UNSET",ie[ie.METHOD_GET=1]="METHOD_GET",ie[ie.METHOD_POST=2]="METHOD_POST",ie[ie.METHOD_PUT=3]="METHOD_PUT",ie[ie.METHOD_PATCH=4]="METHOD_PATCH",ie[ie.METHOD_DELETE=5]="METHOD_DELETE",ie[ie.METHOD_HEAD=6]="METHOD_HEAD",ie[ie.METHOD_OPTIONS=7]="METHOD_OPTIONS"})(De||(De={})),(function(ie){ie[ie.CLOSE=0]="CLOSE",ie[ie.TEMP=1]="TEMP",ie[ie.TIMEOUT=2]="TIMEOUT"})(Ie||(Ie={})),(function(ie){ie[ie.AUTO=0]="AUTO",ie[ie.MANUAL=1]="MANUAL"})(be||(be={})),(function(ie){ie[ie.EMPTY=0]="EMPTY",ie[ie.CLOSE=1]="CLOSE"})(qe||(qe={})),(function(ie){ie[ie.single=0]="single",ie[ie.detail=1]="detail"})(Ve||(Ve={}));var j={2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception",33:"http_request2",34:"redirect2",35:"accesshub_dispatch_request2",36:"accesshub_dispatch_response2",39:"get_svraddr_request",40:"get_svraddr_response"},B=Ne(994);const nt=B.default||B;var he=Ne(788),it=Ne(788);const wt=Ne(994);(it=it.default||it).util.Long=wt.default||wt,it.util.Long.fromBits=it.util.Long.fromBits||function(){return 0};for(var Ee=it.roots,Oe=it.types?it.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},rt=it.types?it.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},me=Object.keys(Oe),Se={$:function(ie){return Se[ie]?Se[ie].call(this):Ee[ie].decode?Ee[ie].decode(this,this.uint32()):Se.$.call(this,"int32")}},ge={$:function(ie,L,ue){var je=Oe[ie];return je===void 0?Ee[ie].encode?(this.uint32(ue<<3|2).fork(),Ee[ie].encode(L,this).ldelim()):ge.$.call(this,"int32",L,ue):ge[ie].call(this.uint32(ue<<3|je),L)}},ve=0;ve<me.length;ve++)Se[me[ve]]=it.Reader.prototype[me[ve]],ge[me[ve]]=it.Writer.prototype[me[ve]];(function ie(L,ue,je,Xe){for(var ft=0,bt=Object.keys(L);ft<bt.length;ft++){var Rt=bt[ft];L[Rt].$m&&Object.keys(L[Rt].$m).every(function(Pt){return Number(Pt)})?je[Rt]=(function(Pt,Vt){function $t(_n){for(var Gn in Pt){var cr=Pt[Gn];cr[1].charAt(0)==="{"?this[cr[0]]={}:cr[1].charAt(0)!=="["&&cr[1].charAt(0)!=="<"||(this[cr[0]]=[])}if(_n)for(var Ur=Object.keys(_n),Hr=0;Hr<Ur.length;++Hr)_n[Ur[Hr]]!=null&&(this[Ur[Hr]]=_n[Ur[Hr]])}var ln={};for(var qn in Pt){var Tn=Pt[qn],Sn=Tn[1];Sn.charAt(0)==="{"?($t.prototype[Tn[0]]=it.util.emptyObject,ln[Sn]={$m:Sn.substring(1).split(",").map(function(_n,Gn){return[`$${Gn+1}`,_n,null]}).reduce(function(_n,Gn,cr){return _n[cr+1]=Gn,_n},{})}):$t.prototype[Tn[0]]=Sn.charAt(0)==="["||Sn.charAt(0)==="<"?it.util.emptyArray:Sn==="bytes"?it.util.newBuffer([]):Tn[2]&&Tn[2].hasOwnProperty("low")&&Tn[2].hasOwnProperty("high")?it.util.Long.fromBits(Tn[2].low,Tn[2].high,Tn[2].unsigned):Tn[2]}return $t.create=function(_n){return new $t(_n)},$t.decode=function(_n,Gn){_n instanceof it.Reader||(_n=it.Reader.create(_n));for(var cr=Gn===void 0?_n.len:_n.pos+Gn,Ur=new $t;_n.pos<cr;){var Hr=_n.uint32(),Jr=Hr>>>3;if(Jr>0&&Pt[Jr]){var Er=Pt[Jr][0],Kr=Pt[Jr][1];if(Kr.charAt(0)==="{"){Ur[Er]===it.util.emptyObject&&(Ur[Er]={});var Go=$t.$namespace[Kr].decode(_n,_n.uint32());Ur[Er][Go.$1]=Go.$2}else if(Kr.charAt(0)==="["||Kr.charAt(0)==="<")if(Kr=Kr.substring(1),Ur[Er]&&Ur[Er].length||(Ur[Er]=[]),rt[Kr=Se[Kr]||Ee[Kr].decode?Kr:"int32"]!==void 0&&(7&Hr)==2)for(var $o=_n.uint32()+_n.pos;_n.pos<$o;)Ur[Er].push(Se.$.call(_n,Kr));else Ur[Er].push(Se.$.call(_n,Kr));else Ur[Er]=Se.$.call(_n,Kr)}else _n.skipType(7&Hr)}return Ur},$t.encode=function(_n,Gn){for(var cr in Gn||(Gn=it.Writer.create()),Pt){var Ur=Pt[cr][0],Hr=Pt[cr][1];if(Hr.charAt(0)==="{"){if(_n[Ur]!=null&&_n.hasOwnProperty(Ur))for(var Jr=0,Er=Object.keys(_n[Ur]);Jr<Er.length;++Jr)Gn.uint32(cr<<3|2).fork(),$t.$namespace[Hr].encode({$1:Er[Jr],$2:_n[Ur][Er[Jr]]},Gn).ldelim()}else if(Hr.charAt(0)==="["||Hr.charAt(0)==="<"){var Kr=Hr.charAt(0)==="<";Hr=Hr.substring(1);var Go=_n[Ur];if(Go!=null&&Go.length)if(Hr=Oe[Hr]!==void 0||Ee[Hr].encode?Hr:"int32",Kr&&rt[Hr]!==void 0){for(Gn.uint32(cr<<3|2).fork(),Jr=0;Jr<Go.length;Jr++)ge[Hr].call(Gn,Go[Jr]);Gn.ldelim()}else for(Jr=0;Jr<Go.length;Jr++)ge.$.call(Gn,Hr,Go[Jr],cr)}else _n[Ur]!=null&&_n.hasOwnProperty(Ur)&&ge.$.call(Gn,Hr,_n[Ur],cr)}return Gn},Object.keys(ln).length&&($t.$namespace=ie(ln,ue+"."+Vt,$t.$namespace||{},!0)),$t})(L[Rt].$m,Rt):L[Rt].$s?je[Rt]=(function(Pt,Vt){function $t(ln,qn,Tn){it.rpc.Service.call(this,ln,qn,Tn)}return($t.prototype=Object.create(it.rpc.Service.prototype)).constructor=$t,$t.create=function(ln,qn,Tn){return new $t(ln,qn,Tn)},Object.keys(Pt).forEach(function(ln){var qn=Pt[ln];function Tn(Sn,_n){return this.rpcCall(Tn,Ee[qn[0]],Ee[qn[1]],Sn,_n)}Object.defineProperty(Tn,"name",{value:ln}),Object.defineProperty(Tn,"path",{value:`${ue}.${Vt}`}),$t.prototype[ln]=Tn}),$t})(L[Rt].$s,Rt):L[Rt].$e&&Object.values(L[Rt].$e).every(function(Pt){return Number(Pt)===Pt})&&(je[Rt]=(function(Pt){for(var Vt=Object.keys(Pt),$t={},ln=0;ln<Vt.length;ln++)$t[$t[Vt[ln]]=Pt[Vt[ln]]]=Vt[ln];return $t})(L[Rt].$e)),je[Rt]&&!Xe&&(Ee[`${ue}.${Rt}`]=je[Rt]),delete L[Rt].$m,delete L[Rt].$s,delete L[Rt].$e,je[Rt]=ie(L[Rt],ue?`${ue}.${Rt}`:Rt,je[Rt]||{})}return je})({zego_connection:{proto_accesshub:{AccesshubAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","zego_connection.proto_accesshub.IPV6Addr",null],3:["quic_port","uint32",0],4:["wss_port","uint32",0]}},AccesshubDispatchGroup:{$m:{1:["group","string",""],2:["quic_nodes","<string",null],3:["mtcp_nodes","<string",null],4:["wss_nodes","<string",null]}},AccesshubDispatchGroup2:{$m:{1:["group","string",""],2:["nodes","<zego_connection.proto_accesshub.AccesshubAddr",null],3:["nodes_dual","<zego_connection.proto_accesshub.AccesshubAddr",null],4:["weight","uint32",0],5:["gid","uint32",0]}},AccesshubDispatchRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","zego_connection.proto_accesshub.SdkType",0],7:["zegoconn_version","uint32",0],8:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],9:["device_id","string",""],10:["client_ip","string",""],11:["geofencing_type","uint32",0],12:["geofencings","[uint32",null],13:["addr_type","uint32",0],14:["net_mode","uint32",0],15:["dispatch_tag","uint32",0]}},AccesshubDispatchResponse2:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","zego_connection.proto_accesshub.AccesshubDispatchResponseData2",null]}},AccesshubDispatchResponseData2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["rand","string",""],3:["secret","string",""],4:["groups","<zego_connection.proto_accesshub.AccesshubDispatchGroup2",null],5:["wss_groups","<zego_connection.proto_accesshub.WssAccesshubDispatchGroup",null],6:["ttl","uint32",0],7:["http3_groups","<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup",null],8:["wss_v6_groups","<zego_connection.proto_accesshub.WssAccesshubDispatchGroup",null],9:["http3_v6_groups","<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup",null]}},BackendConnType:{$e:{BACKEND_CONN_TYPE_UNSET:0,BACKEND_CONN_TYPE_TCP:1,BACKEND_CONN_TYPE_WSS:2}},CheckServiceAreaRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","zego_connection.proto_accesshub.SdkType",0],7:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["device_id","string",""],10:["user_agent","string",""],11:["language","string",""],12:["timezone","string",""],13:["carrier","string",""],14:["dns_result","zego_connection.proto_accesshub.IPAddr",null]}},CheckServiceAreaResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","zego_connection.proto_accesshub.CheckServiceAreaResponseData",null]}},CheckServiceAreaResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},CloseConnection:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["action","int32",0]},Action:{$e:{ACTION_RESERVED:0,ACTION_DISPATCH:1,ACTION_RETRY:2,ACTION_NEXT_NODE:3,ACTION_ABORT:4,ACTION_NEXT_GROUP:5,ACTION_IDLE:6}}},ConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},ErrorCode:{$e:{OK:0,DISPATCH_NO_AVAILABLE_NODE:1e4,DISPATCH_INTERNAL_ERROR:10001,DISPATCH_INVALID_FRAME:10002,DISPATCH_UNMARSHAL:10003,DISPATCH_MSGTYPE:10004,DISPATCH_MARSHAL:10005,DISPATCH_TOO_FREQUENTLY:10006,DISPATCH_EMPTY_GEOFENCING:10007,ACCESSHUB_INVALID_FRAME:2e4,ACCESSHUB_NEED_ENCRYPT:20001,ACCESSHUB_DECRYPT:20002,ACCESSHUB_MSGTYPE:20003,ACCESSHUB_UNMARSHAL:20004,ACCESSHUB_TIMEOUT:20005,ACCESSHUB_CONNECT:20006,ACCESSHUB_BROKEN:20007,ACCESSHUB_INTERNAL_ERROR:20008,ACCESSHUB_MARSHAL:20009,ACCESSHUB_UNSUPPORTED_SERVICE:20010,ACCESSHUB_TOO_FREQUENTLY:20011,ACCESSHUB_INVALID_APPID:20012,ACCESSHUB_HB_TIMEOUT:20013,ACCESSHUB_INVALID_SIGNATURE:20014,ACCESSHUB_AUTH_FAILED:20015,ACCESSHUB_UNSUPPORTED_INTERFACE:20016,ACCESSHUB_EMPTY_GEOFENCING:20017,ACCESSHUB_ACCESS_DENIED:20018,ACCESSHUB_SPECIAL_CUSTOMER:20019,ACCESSHUB_IDLE_CONNECTION:20020,ACCESSHUB_APPID_OFFLINE:20021,ACCESSHUB_GET_STREAM_FAILED:3e4,ACCESSHUB_GET_CONN_FAILED:30001,ACCESSHUB_DO_HTTP_REQUEST_FAILED:30002,ACCESSHUB_UNMARSHAL_HB_FAILED:30003,ACCESSHUB_DO_BACKEND_DISPATCH_FAILED:30004}},GeoFencing:{$e:{CN:2,NA:3,EU:4,AS:5,IN:6,NCN:7}},GeoFencingType:{$e:{NONE:0,UNION:1,EXCLUDE:2}},GetAppConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["config_key","string",""],7:["ts","uint64",{low:0,high:0,unsigned:!0}],8:["signature","bytes",[]],9:["lite_sign","string",""],10:["token","string",""],11:["sdk_type","zego_connection.proto_accesshub.SdkType",0],12:["zegoconn_version","uint32",0],13:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],14:["device_id","string",""],15:["etag","uint32",0],16:["is_special_customer","uint32",0]}},GetAppConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","zego_connection.proto_accesshub.GetAppConfigResponseData",null]}},GetAppConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["data","bytes",[]],3:["ts","uint64",{low:0,high:0,unsigned:!0}],4:["etag","uint32",0]}},GetConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["zegoconn_version","uint32",0],8:["sdk_type","zego_connection.proto_accesshub.SdkType",0],9:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],10:["device_id","string",""],11:["mode_no","zego_connection.proto_accesshub.Mode",0],12:["geofencing_type","uint32",0],13:["geofencings","[uint32",null],14:["dispatch_tag","uint32",0]}},GetConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","zego_connection.proto_accesshub.GetConfigResponseData",null]}},GetConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["quic_hb_interval","uint32",0],3:["quic_hb_timeout","uint32",0],4:["logic_hb_interval","uint32",0],5:["logic_hb_timeout","uint32",0],6:["pc_establish_timeout","uint32",0],7:["sdk_link_detect_interval","uint32",0],8:["sdk_link_detect_duration","uint32",0],9:["client_outer_ip","string",""],10:["ntp_time","uint64",{low:0,high:0,unsigned:!0}],11:["root_rsa_certs_ver","uint32",0],12:["geofencing_id","uint32",0],13:["svraddr_ver","uint32",0],14:["root_ecc_certs_ver","uint32",0]}},GetSvraddrRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","zego_connection.proto_accesshub.SdkType",0],7:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["device_id","string",""],10:["geofencing_type","uint32",0],11:["geofencings","[uint32",null],12:["addr_type","uint32",0],13:["dispatch_tag","uint32",0]}},GetSvraddrResponse:{$m:{1:["code","int32",0],2:["msg","string",""],3:["data","zego_connection.proto_accesshub.GetSvraddrResponseData",null]}},GetSvraddrResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["geofencing_id","uint32",0],3:["svraddr_ver","uint32",0],4:["anycast_ips","<zego_connection.proto_accesshub.IPAddr",null],5:["zegons_domain","string",""],6:["zegons_ips","<zego_connection.proto_accesshub.IPAddr",null],7:["accesshub_domain","string",""],8:["accesshub_ips","<zego_connection.proto_accesshub.IPAddr",null],9:["logreport_domain","string",""],10:["logreport_ips","<zego_connection.proto_accesshub.IPAddr",null],11:["detaillog_domain","string",""],12:["detaillog_ips","<zego_connection.proto_accesshub.IPAddr",null],13:["stunsvr_domain","string",""],14:["stunsvr_ips","<zego_connection.proto_accesshub.IPAddr",null],15:["zimfile_domain","string",""],16:["zimfile_ips","<zego_connection.proto_accesshub.IPAddr",null],17:["accesshub_sni","string",""],18:["detectsvr_domain","string",""],19:["accesscube_domain","string",""],20:["wslog_domain","string",""],21:["wslog_ips","<zego_connection.proto_accesshub.IPAddr",null],22:["http3_domain","string",""],23:["accesshub_v6_domain","string",""],24:["http3_v6_domain","string",""],25:["logreport_v6_domain","string",""],26:["detaillog_v6_domain","string",""]}},HBRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}]}},HBResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}],3:["ntp_time","uint64",{low:0,high:0,unsigned:!0}]}},Http3AccesshubDispatchGroup:{$m:{1:["group","string",""],2:["host","string",""]}},HTTPRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["stick","string",""],8:["service","string",""],9:["location","string",""],10:["method","string",""],11:["headers","<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader",null],12:["body","bytes",[]],13:["ack","bool",!1],14:["mode_no","zego_connection.proto_accesshub.Mode",0],15:["service_no","zego_connection.proto_accesshub.Service",0],16:["method_no","zego_connection.proto_accesshub.Method",0],17:["sdk_type","zego_connection.proto_accesshub.SdkType",0],18:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],19:["zegoconn_version","uint32",0],20:["device_id","string",""],21:["reduce_resp_header","uint32",0]},HTTPHeader:{$m:{1:["name","string",""],2:["val","string",""]}}},HTTPRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","zego_connection.proto_accesshub.SdkType",0],7:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["headers","<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader",null],10:["method","zego_connection.proto_accesshub.Method",0],11:["interface_id","uint32",0],12:["res_id","string",""],13:["params","string",""],14:["body","bytes",[]],15:["ack","bool",!1],16:["device_id","string",""],17:["ts","uint64",{low:0,high:0,unsigned:!0}],18:["signature","bytes",[]],19:["token","string",""],20:["lite_sign","string",""],21:["reduce_resp_header","uint32",0]}},HTTPRequestAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},HTTPRequestDroped:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["reason","int32",0],3:["msg","string",""]}},HTTPResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["headers","<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader",null],3:["status_code","int32",0],4:["body","bytes",[]]}},IPAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","zego_connection.proto_accesshub.IPV6Addr",null]}},IPV6Addr:{$m:{1:["high","fixed64",{low:0,high:0,unsigned:!1}],2:["low","fixed64",{low:0,high:0,unsigned:!1}]}},MessageType:{$e:{MSG_TYPE_EMPTY:0,MSG_TYPE_CONNECTION_CLOSED:1,MSG_TYPE_STREAM_CLOSED:2,MSG_TYPE_CLOSE_CONNECTION:3,MSG_TYPE_HTTP_REQUEST:4,MSG_TYPE_HTTP_RESPONSE:5,MSG_TYPE_HTTP_REQUEST_DROPED:6,MSG_TYPE_PROXY_CONNECT:7,MSG_TYPE_PROXY_CONNECTED:8,MSG_TYPE_PROXY_CONNECTION_CLOSED:9,MSG_TYPE_PROXY_SEND_DATA:10,MSG_TYPE_PROXY_RECV_DATA:11,MSG_TYPE_HB_REQUEST:12,MSG_TYPE_HB_RESPONSE:13,MSG_TYPE_GET_CONFIG_REQUEST:14,MSG_TYPE_GET_CONFIG_RESPONSE:15,MSG_TYPE_HTTP_REQUEST_ACK:16,MSG_TYPE_PC_UPWARD_MESSAGE:17,MSG_TYPE_PC_UPWARD_MESSAGE_ACK:18,MSG_TYPE_PC_ESTABLISHED:19,MSG_TYPE_PC_BROKEN:20,MSG_TYPE_PC_DOWNWARD_MESSAGE:21,MSG_TYPE_REDIRECT:22,MSG_TYPE_GET_APPCONFIG_REQUEST:23,MSG_TYPE_GET_APPCONFIG_RESPONSE:24,MSG_TYPE_PUSH_APPCONFIG:25,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST:26,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE:27,MSG_TYPE_GET_IM_CONFIG_REQUEST:28,MSG_TYPE_GET_IM_CONFIG_RESPONSE:29,MSG_TYPE_PUSH_EXCEPTION:30,MSG_TYPE_RESOLVE_DOMAIN_REQUEST:31,MSG_TYPE_RESOLVE_DOMAIN_RESPONSE:32,MSG_TYPE_HTTP_REQUEST2:33,MSG_TYPE_REDIRECT2:34,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2:35,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2:36,MSG_TYPE_GET_ROOTCERTS_REQUEST:37,MSG_TYPE_GET_ROOTCERTS_RESPONSE:38,MSG_TYPE_GET_SVRADDR_REQUEST:39,MSG_TYPE_GET_SVRADDR_RESPONSE:40,MSG_TYPE_CHECK_SERVICEAREA_REQUEST:41,MSG_TYPE_CHECK_SERVICEAREA_RESPONSE:42,MSG_TYPE_UA_DISPATCH_REQUEST:50,MSG_TYPE_UA_DISPATCH_RESPONSE:51,MSG_TYPE_UA_ECHO_REQUEST:52,MSG_TYPE_UA_ECHO_RESPONSE:53,MSG_TYPE_NODE_REGISTER_REQUEST:100,MSG_TYPE_NODE_REGISTER_RESPONSE:101,MSG_TYPE_NODE_HB_REQUEST:102,MSG_TYPE_NODE_HB_RESPONSE:103}},Method:{$e:{METHOD_UNSET:0,METHOD_GET:1,METHOD_POST:2,METHOD_PUT:3,METHOD_PATCH:4,METHOD_DELETE:5,METHOD_HEAD:6,METHOD_OPTIONS:7}},Mode:{$e:{Mode_UNSET:0,MODE_ONLINE:1,MODE_TEST:2,MODE_ALPHA:3}},PCBroken:{$m:{}},PCDownwardMessage:{$m:{1:["payload","bytes",[]],2:["wss_message_type","uint32",0],3:["ts","uint64",{low:0,high:0,unsigned:!0}]}},PCEstablished:{$m:{1:["elapse","uint32",0],2:["from","uint32",0]}},PCUpwardMessage:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","zego_connection.proto_accesshub.Mode",0],5:["id_name","string",""],6:["service_no","zego_connection.proto_accesshub.Service",0],7:["ack","bool",!1],8:["payload","bytes",[]],9:["sdk_type","zego_connection.proto_accesshub.SdkType",0],10:["wss_message_type","uint32",0],11:["wss_path","string",""],12:["wss_raw_query","string",""],13:["zegoconn_version","uint32",0],14:["zegoconn_run_env","zego_connection.proto_accesshub.ZegoconnRunEnv",0],15:["backend_conn_type","zego_connection.proto_accesshub.BackendConnType",0],16:["device_id","string",""],17:["geofencing_type","uint32",0],18:["geofencings","[uint32",null],19:["addr_type","uint32",0],20:["net_mode","uint32",0]}},PCUpwardMessageAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},ProxyConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""],3:["connected","int32",0]}},PushAppConfig:{$m:{1:["config_key","string",""],2:["data","bytes",[]]}},PushException:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["txid","uint64",{low:0,high:0,unsigned:!0}]}},Redirect2:{$m:{1:["rand","string",""],2:["secret","string",""],3:["groups","<zego_connection.proto_accesshub.AccesshubDispatchGroup2",null],4:["wss_groups","<zego_connection.proto_accesshub.WssAccesshubDispatchGroup",null],5:["ttl","uint32",0],6:["http3_groups","<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup",null],7:["wss_v6_groups","<zego_connection.proto_accesshub.WssAccesshubDispatchGroup",null],8:["http3_v6_groups","<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup",null]}},SdkType:{$e:{SDK_TYPE_UNSET:0,SDK_TYPE_NATIVE:1,SDK_TYPE_WSS_WEB:3,SDK_TYPE_ZIM_WEB:4}},Service:{$e:{SERVICE_UNSET:0,SERVICE_MEDIAGW:1,SERVICE_LIVEROOM:2,SERVICE_MIX:3,SERVICE_ZEUS:4,SERVICE_ZPUSH:5,SERVICE_L3:6,SERVICE_TALKLINE:7,SERVICE_EDUSUITE:8,SERVICE_ZIM:9,SERVICE_ClOUD_SETTING:10,SERVICE_ZEUSHB:11,SERVICE_USER_LOGIC:12,SERVICE_UNIFYDISPATCH:13,SERVICE_QUALITY:14,SERVICE_SECURITY:15,SERVICE_KTVCPR:16,SERVICE_SWITCH4LIVEROOM:17,SERVICE_WEBRTC_SIGNAL:18,SERVICE_L3_WEBRTC_SIGNAL:19,SERVICE_VIDEOCPR:20,SERVICE_CDN:21,SERVICE_CLOUDRECORD:22,SERVICE_INNER_ECHO:23,SERVICE_OUTER_ECHO:24,SERVICE_LOCALHOST_ECHO:25,SERVICE_ECHO:26,SERVICE_DOCSERVICE:27,SERVICE_AUTHSVR:28,SERVICE_WEBLIVEROOM:29,SERVICE_WHITEBOARD:30,SERVICE_METAWORLD:31,SERVICE_ZEGOLAND:32}},StreamClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},WssAccesshubDispatchGroup:{$m:{1:["group","string",""],2:["host","string",""],3:["main_domain","string",""]}},ZegoconnRunEnv:{$e:{ZEGOCONN_RUN_ENV_UNSET:0,ZEGOCONN_RUN_ENV_BROWSER:1,ZEGOCONN_RUN_ENV_APPLET:2}}},proto_initconfig:{AppConfig:{$m:{1:["test_id","int32",0],2:["domain","string",""],3:["flexible_domain","string",""],4:["replace_flexible_domain","string",""]}},InitConfig:{$m:{1:["app_config","zego_connection.proto_initconfig.AppConfig",null],4:["speedlog_config","zego_connection.proto_initconfig.SpeedlogConfig",null],5:["media_config","zego_connection.proto_initconfig.MediaConfig",null],9:["log_config","zego_connection.proto_initconfig.LogConfig",null]}},LogConfig:{$m:{1:["ws_log","int32",0]}},MediaConfig:{$m:{1:["play_config","zego_connection.proto_initconfig.MediaPlayConfig",null],2:["publish_config","zego_connection.proto_initconfig.MediaPublishConfig",null]}},MediaPlayConfig:{$m:{5:["resource_info","<zego_connection.proto_initconfig.MediaResourceInfo",null],16:["transcoding","zego_connection.proto_initconfig.TranscodingConfig",null],19:["enable_codec_template","int32",0],20:["codec_template_postfix_pattern","string",""]}},MediaPublishConfig:{$m:{2:["resource_info","<zego_connection.proto_initconfig.MediaResourceInfo",null],5:["enable_subject_segmentation","int32",0],6:["object_segmentation_platform","int32",0]}},MediaResourceInfo:{$m:{1:["resource_type","zego_connection.proto_initconfig.ResourceType",0],2:["service_info","<zego_connection.proto_initconfig.MediaServiceProtocolInfo",null]}},MediaServiceProtocolInfo:{$m:{1:["config_id","string",""],2:["protocol","zego_connection.proto_initconfig.ProtocolType",0],3:["url_template","string",""],4:["resolve_type","zego_connection.proto_initconfig.ResolveType",0],5:["push_cdn_authentication","int32",0],6:["cdn_quic_version","<int32",null]}},ProtocolType:{$e:{UDP:0,RTMP:1,FLV:2,HLS:3,WEBRTC:4}},ResolveType:{$e:{LOCAL_DNS:0,DISPATCH:1}},ResourceType:{$e:{CDN:0,RTC:1,L3:2,CDN_PLUS:3,CDN_PLUS_BACKUP:4}},SpeedlogConfig:{$m:{1:["report_count","int32",0],2:["report_retry_interval","int32",0],3:["push_quality_sample_count","int32",0],4:["pull_quality_sample_count","int32",0],5:["hardware_report_cycle","int32",0],6:["room_user_max_count","int32",0],7:["room_stream_max_count","int32",0],8:["charge_info_report_cycle","int32",0],9:["charge_info_report_mode","int32",0],10:["disable_report_pull","<zego_connection.proto_initconfig.ResourceType",null],11:["report_max_bytes","int32",0],12:["push_quality_report_freq","int32",0],13:["pull_quality_report_freq","int32",0],14:["charge_info_report_no_playing","int32",0]}},TranscodingConfig:{$m:{1:["video_codec_h264","string",""]}}}}},"",Ee,!1);const ee=Ee.zego_connection;var ze=function(){return ze=Object.assign||function(ie){for(var L,ue=1,je=arguments.length;ue<je;ue++)for(var Xe in L=arguments[ue])Object.prototype.hasOwnProperty.call(L,Xe)&&(ie[Xe]=L[Xe]);return ie},ze.apply(this,arguments)};he.util.Long=nt,he.configure();var Je,yt=(function(){function ie(L){var ue;this.stateCenter=L,this.W=ee,this.K=((ue={})[E.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],ue[E.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],ue[E.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],ue[E.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],ue[E.MSG_TYPE_HTTP_REQUEST2]=["proto_accesshub","HTTPRequest2"],ue[E.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],ue[E.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],ue[E.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],ue[E.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],ue[E.MSG_TYPE_GET_SVRADDR_REQUEST]=["proto_accesshub","GetSvraddrRequest"],ue[E.MSG_TYPE_GET_SVRADDR_RESPONSE]=["proto_accesshub","GetSvraddrResponse"],ue[E.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HTTPRequestAck"],ue[E.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],ue[E.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],ue[E.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],ue[E.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],ue[E.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],ue[E.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],ue[E.MSG_TYPE_REDIRECT2]=["proto_accesshub","Redirect2"],ue[E.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],ue[E.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],ue[E.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],ue[E.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],ue[E.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],ue[E.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2]=["proto_accesshub","AccesshubDispatchRequest2"],ue[E.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2]=["proto_accesshub","AccesshubDispatchResponse2"],ue[E.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],ue)}return ie.prototype.encodeRequest=function(L,ue,je,Xe){var ft,bt=this.K[L],Rt=this.Z(this.W[bt[0]][bt[1]],ue),Pt=Rt.length,Vt=13;return this.stateCenter.appInfo.model===Qe.Private?((ft=new Uint8Array(13+Pt))[0]=172,ft[1]=0,ft[2]=0,ft.set(new Uint8Array(Int32Array.from([je]).buffer).reverse(),3),ft[7]=L>>8,ft[8]=L-(ft[2]<<8),ft.set(new Uint8Array(Int32Array.from([Pt]).buffer).reverse(),9)):Xe===M.WebTransport?((ft=new Uint8Array(9+Pt))[0]=175,ft[1]=0,ft[2]=L>>8,ft[3]=L-(ft[2]<<8),ft.set(new Uint8Array(Int32Array.from([Pt]).buffer).reverse(),4),ft[8]=0,Vt=9):((ft=new Uint8Array(13+Pt))[0]=175,ft[1]=0,ft[2]=L>>8,ft[3]=L-(ft[2]<<8),ft.set(new Uint8Array(Int32Array.from([Pt]).buffer).reverse(),4),ft.set(new Uint8Array(Int32Array.from([je]).buffer).reverse(),8),ft[12]=0),ft.set(Rt,Vt),ft},ie.prototype.decodeResponse=function(L,ue){var je,Xe,ft,bt=13,Rt=0;if(this.stateCenter.appInfo.model===Qe.Private)je=(L[7]<<8)+L[8],ft=(Xe=new DataView(L.buffer)).getUint32(3),Rt=Xe.getUint32(9);else if(ue===M.WebTransport){if(L.length<9)return[0,0,null,0];if(je=(L[2]<<8)+L[3],ft=0,bt=9,Rt=L[4]*Math.pow(256,3)+L[5]*Math.pow(256,2)+256*L[6]+L[7],L.length-bt<Rt)return[0,0,null,0]}else je=(L[2]<<8)+L[3],Rt=(Xe=new DataView(L.buffer)).getUint32(4),ft=Xe.getUint32(8);var Pt=bt+Rt,Vt=L.slice(bt,Pt);return[ft,je,this.decodeBody(Vt,je),Pt]},ie.prototype.decodeBody=function(L,ue){try{var je=this.K[ue];return this.X(this.W[je[0]][je[1]],L)}catch{return{code:1}}},ie.prototype.decodeConfigMessage=function(L){return this.X(this.W.proto_initconfig.InitConfig,L)},ie.prototype.Z=function(L,ue){return L.encode(new L(ue)).finish()},ie.prototype.X=function(L,ue){return ze({},L.decode(ue))},ie})(),xt=(function(){function ie(L,ue){L===void 0&&(L=null),ue===void 0&&(ue=null),this.next=null,this.prev=null,this.tt=L,this.U=ue}return Object.defineProperty(ie.prototype,"id",{get:function(){return this.tt?this.tt:null},set:function(L){this.tt=L},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"data",{get:function(){return this.U},set:function(L){this.U=L},enumerable:!1,configurable:!0}),ie.prototype.hasNext=function(){return this.next&&this.next.id},ie.prototype.hasPrev=function(){return this.prev&&this.prev.id},ie})(),Ye=(function(){function ie(){this.start=new xt,this.end=new xt,this.it=1,this.nt=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}return ie.prototype.insertBefore=function(L,ue){var je=new xt(this.it,ue);return je.next=L,je.prev=L.prev,L.prev&&(L.prev.next=je),L.prev=je,++this.it,++this.nt,je},ie.prototype.addLast=function(L){return this.insertBefore(this.end,L)},ie.prototype.add=function(L){return this.addLast(L)},ie.prototype.getFirst=function(){return this.nt===0?null:this.start.next},ie.prototype.getLast=function(){return this.nt===0?null:this.end.prev},ie.prototype.size=function(){return this.nt},ie.prototype.getFromFirst=function(L){var ue=0,je=this.start.next;if(L>=0)for(;ue<L&&je!==null;)je=je.next,++ue;else je=null;if(je===null)throw"Index out of bounds.";return je},ie.prototype.get=function(L){return L===0?this.getFirst():L===this.nt-1?this.getLast():this.getFromFirst(L)},ie.prototype.remove=function(L){return L.prev&&(L.prev.next=L.next),L.next&&(L.next.prev=L.prev),--this.nt,L},ie.prototype.removeFirst=function(){var L=null;return this.nt>0&&this.start.next&&(L=this.remove(this.start.next)),L},ie.prototype.removeLast=function(){var L=null;return this.nt>0&&this.end.prev&&(L=this.remove(this.end.prev)),L},ie.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this.nt=0,this.it=1},ie.prototype.each=function(L){for(var ue=this.start;ue.hasNext();)L(ue=ue.next)},ie.prototype.forEach=function(L){for(var ue=this.start;ue.hasNext()&&!L(ue=ue.next););},ie.prototype.find=function(L){for(var ue=this.start,je=!1,Xe=null;ue.hasNext()&&!je;)L(ue=ue.next)&&(Xe=ue,je=!0);return Xe},ie.prototype.map=function(L){for(var ue=this.start,je=[];ue.hasNext();)L(ue=ue.next)&&je.push(ue);return je},ie.prototype.push=function(L){return this.addLast(L)},ie.prototype.unshift=function(L){this.insertBefore(this.nt>0?this.start.next:this.end,L)},ie.prototype.pop=function(){return this.removeLast()},ie.prototype.shift=function(){return this.removeFirst()},ie})(),J="zn.zca.gc",He="zn.zca.oce",Le="zn.zca.gac",Ue="zn.zca.rd",_t="zn.zca.cc",st="zn.zca.ir.0",Dt="zn.sai.0",qt="zn.shq.0",Lt="zn.nab.gsa",ut="zn.nab.du",Yt="zn.nab.gac",wn="zn.nhb.s",Rn="zn.rlh.at",jn="zn.rlh.sm",Mn="zn.wl.cs.0",Pn="zn.wl.om",ci="zn.wl.h3.g",Nr="zn.wl.h3.t.2",nr="zn.wl.h3.s",Nn="zn.wl.h3.s.0",_r="zn.wl.sls",$n="zn.wl.sidr",Dr="zn.wl.c.0",Gr="zn.wl.gbi.0",Or="zn.sm.cs.0",mi="zn.sm.bsh",Ar="zn.sm.cps",sr="zn.napr.sr",kn="zn.napr.ope",Jn="zn.nahr.sr",Mr="zn.nahr.sr2",ar={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:ae.MODE_ONLINE,sdkType:3,connectVer:33,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1,model:Qe.Normal},oi="0c9e6e0f8c0a8f4e",gi=2e4,go=Ne(955),xi=Ne.n(go),ui=Ne(178),no=Ne.n(ui),Ui=new TextDecoder("utf-8"),vi=new TextEncoder,Br=function(ie){return vi.encode(ie)},ur=function(ie){return Ui.decode(ie)},Qr=function(){return new Promise(function(ie,L){ie(Math.random())})};function qr(ie,L,ue){var je=(function(ft,bt){try{return localStorage.getItem(bt)}catch{}})(0,"".concat(ie,"_").concat(ue,"_").concat(L));if(!je)return null;var Xe=(function(ft,bt){try{return xi().decrypt(ft,bt).toString(no())}catch{return""}})(je,oi);return Xe&&JSON.parse(Xe)||null}function Bi(ie,L,ue,je,Xe){var ft=je;if(Xe){var bt=qr(ie,L,ue);bt&&(ft=Object.assign(bt,je))}var Rt,Pt,Vt=JSON.stringify(ft);L===0&&(Rt=JSON.stringify(ft),Pt=oi,Vt=xi().encrypt(Rt,Pt).toString()),(function($t,ln,qn){try{localStorage.setItem(ln,qn)}catch{}})(0,"".concat(ie,"_").concat(ue,"_").concat(L),Vt)}function Vn(ie){return ie!=null&&ie.includes("https")?1:3}(function(ie){ie[ie.NotSupport=0]="NotSupport",ie[ie.LinkFailed=1]="LinkFailed",ie[ie.CreateStreamFailed=2]="CreateStreamFailed",ie[ie.WriteDataFailed=3]="WriteDataFailed",ie[ie.ReadDataFailed=4]="ReadDataFailed",ie[ie.GetConfigFailed=5]="GetConfigFailed",ie[ie.NoUseableHttp3Server=6]="NoUseableHttp3Server",ie[ie.ClosedTooOften=7]="ClosedTooOften",ie[ie.LinkTimeout=8]="LinkTimeout",ie[ie.Unknown=100]="Unknown"})(Je||(Je={}));var mr,lr={code:1100002,msg:"network timeout."},ti={code:1100004,msg:"net agent timeout"},Q={code:1100006},dt={code:1100007,msg:"the user breaks the network connection"},Be=1100009,Te=1100011,$e={code:1100012,msg:"the socket is idle"};(function(ie){ie[ie.BROWSER=0]="BROWSER",ie[ie.WEIXINMINI=1]="WEIXINMINI"})(mr||(mr={}));var Ge=(function(){function ie(L,ue){this.url=L,this.readyState=F.CLOSED,this.et=wx.connectSocket({url:L}),this.init()}return ie.prototype.init=function(){var L=this;this.et&&(this.readyState=F.CONNECTING,this.et.onOpen(function(ue){L.readyState=L.et.readyState,typeof L.onopen=="function"&&(L.onopen(ue),L.et.onClose(function(je){L.readyState=L.et.readyState,typeof L.onclose=="function"&&L.onclose(je)}),L.et.onMessage(function(je){typeof L.onmessage=="function"&&L.onmessage(je)}))}),this.et.onError(function(ue){L.readyState=L.et.readyState,typeof L.onerror=="function"&&L.onerror(ue)}))},ie.prototype.onopen=function(L){},ie.prototype.onerror=function(L){},ie.prototype.onclose=function(L){},ie.prototype.onmessage=function(L){},ie.prototype.send=function(L,ue,je,Xe){L instanceof Uint8Array&&(L=new Uint8Array(L).buffer),this.et&&this.et.send({data:L})},ie.prototype.close=function(){this.et&&this.et.close()},ie})(),mt=(function(){function ie(L){L===void 0&&(L=""),this.st=L,this.count=0,this.isStarting=!1,this.timer=0,this.lastLogTime=0,this.speed=0,this.lastTime=0}return ie.prototype.add=function(L){this.isStarting&&(this.count+=L)},ie.prototype.stop=function(){return this.isStarting=!1,this.reset()},ie.prototype.start=function(L){var ue=this;L===void 0&&(L=0),this.isStarting=!0,this.count=0,clearInterval(this.timer),L&&(this.timer=window.setInterval(function(){ue.speed=ue.count/L,ue.count=0},L))},ie.prototype.reset=function(){this.count=0,clearInterval(this.timer),this.timer=0,this.speed=0},ie})(),vt=(function(){function ie(){this.ot={}}return ie.prototype.addEventHandler=function(L,ue){if(this.ot[L]||(this.ot[L]=[]),typeof ue!="function")throw new Error("Params callBack is not a Function");return this.ot[L]&&this.ot[L].indexOf(ue)==-1&&this.ot[L].push(ue),!0},ie.prototype.removeEventHandler=function(L,ue){return!!this.ot[L]&&(this.ot[L]=ue?this.ot[L].filter(function(je){return je!==ue}):[],!0)},ie.prototype.emit=function(L){for(var ue=[],je=1;je<arguments.length;je++)ue[je-1]=arguments[je];this.ot[L]&&this.ot[L].forEach(function(Xe){try{Xe.apply(void 0,ue)}catch(ft){console.error('Fail to execute callback of event "'.concat(L,'" : ').concat(ft))}})},ie})(),St=function(ie,L,ue,je){return new(ue||(ue=Promise))(function(Xe,ft){function bt(Vt){try{Pt(je.next(Vt))}catch($t){ft($t)}}function Rt(Vt){try{Pt(je.throw(Vt))}catch($t){ft($t)}}function Pt(Vt){var $t;Vt.done?Xe(Vt.value):($t=Vt.value,$t instanceof ue?$t:new ue(function(ln){ln($t)})).then(bt,Rt)}Pt((je=je.apply(ie,[])).next())})},It=function(ie,L){var ue,je,Xe,ft,bt={label:0,sent:function(){if(1&Xe[0])throw Xe[1];return Xe[1]},trys:[],ops:[]};return ft={next:Rt(0),throw:Rt(1),return:Rt(2)},typeof Symbol=="function"&&(ft[Symbol.iterator]=function(){return this}),ft;function Rt(Pt){return function(Vt){return(function($t){if(ue)throw new TypeError("Generator is already executing.");for(;ft&&(ft=0,$t[0]&&(bt=0)),bt;)try{if(ue=1,je&&(Xe=2&$t[0]?je.return:$t[0]?je.throw||((Xe=je.return)&&Xe.call(je),0):je.next)&&!(Xe=Xe.call(je,$t[1])).done)return Xe;switch(je=0,Xe&&($t=[2&$t[0],Xe.value]),$t[0]){case 0:case 1:Xe=$t;break;case 4:return bt.label++,{value:$t[1],done:!1};case 5:bt.label++,je=$t[1],$t=[0];continue;case 7:$t=bt.ops.pop(),bt.trys.pop();continue;default:if(!((Xe=(Xe=bt.trys).length>0&&Xe[Xe.length-1])||$t[0]!==6&&$t[0]!==2)){bt=0;continue}if($t[0]===3&&(!Xe||$t[1]>Xe[0]&&$t[1]<Xe[3])){bt.label=$t[1];break}if($t[0]===6&&bt.label<Xe[1]){bt.label=Xe[1],Xe=$t;break}if(Xe&&bt.label<Xe[2]){bt.label=Xe[2],bt.ops.push($t);break}Xe[2]&&bt.ops.pop(),bt.trys.pop();continue}$t=L.call(ie,bt)}catch(ln){$t=[6,ln],je=0}finally{ue=Xe=0}if(5&$t[0])throw $t[1];return{value:$t[0]?$t[1]:void 0,done:!0}})([Pt,Vt])}}};const Nt=(function(){function ie(L){this.rt=L,this.readyState=F.CLOSED,this.ct=null,this.ut=[],this.ht=[],this.ft={}}return ie.isSupport=function(){var L,ue;return window&&!!window.WebTransport&&!!(!((ue=(L=window.WebTransport)===null||L===void 0?void 0:L.prototype)===null||ue===void 0)&&ue.createBidirectionalStream)},ie.prototype.getStreamByID=function(L){return this.ut.find(function(ue){return ue.streamID===L})||null},ie.prototype.startConnect=function(L){var ue=this;try{this.ct=new WebTransport(L),this.readyState=F.CONNECTING,this.ct.ready.then(function(je){ue.readyState=F.OPEN,ue.onopen(je),ue.onTransportClosed()}).catch(function(je){ue.readyState=F.CLOSED,ue._t(Je.LinkFailed,je),ue.close()})}catch(je){this.readyState=F.CLOSED,this._t(Je.NotSupport,je)}},ie.prototype.onTransportClosed=function(){return St(this,void 0,void 0,function(){var L;return It(this,function(ue){switch(ue.label){case 0:return ue.trys.push([0,2,,3]),[4,this.ct.closed];case 1:return ue.sent(),this.readyState!==F.CLOSED&&this.onclose&&this.onclose({code:0,message:"server-side h3 closed"}),[3,3];case 2:return L=ue.sent(),this.readyState!==F.CLOSED&&this.onclose&&this.onclose(L),[3,3];case 3:return this.readyState=F.CLOSED,this.ct=null,this.ut=[],this.ht=[],this.ft={},[2]}})})},ie.prototype.onopen=function(L){},ie.prototype.onerror=function(L){},ie.prototype.onclose=function(L){},ie.prototype.onmessage=function(L,ue){},ie.prototype.onBackToWebSocket=function(L,ue){},ie.prototype._t=function(L,ue){this.ct&&this.onBackToWebSocket(L,ue)},ie.prototype.send=function(L,ue,je,Xe){var ft;return St(this,void 0,void 0,function(){var bt,Rt=this;return It(this,function(Pt){switch(Pt.label){case 0:return this.ct&&ue?(bt=this.getStreamByID(ue))!=null&&bt.stream?[3,2]:bt!=null&&bt.isCreating?(this.ht.push({msg:L,streamID:ue,type:je,streamType:Xe}),[2]):[4,this.createStream(Xe,ue)]:[2];case 1:bt=Pt.sent(),Pt.label=2;case 2:if(bt&&(bt!=null&&bt.stream))try{(ft=bt==null?void 0:bt.writer)===null||ft===void 0||ft.write(L).then(function(){je===E.MSG_TYPE_STREAM_CLOSED&&Rt.closeStream(bt.streamID),Rt.ht=Rt.ht.filter(function(Vt){var $t;return Vt.streamID!==ue||(($t=bt==null?void 0:bt.writer)===null||$t===void 0||$t.write(Vt.msg).then(function(){}).catch(function(ln){Rt.rt.info("zn.zwt.s.0 unsend write fail ".concat(ln==null?void 0:ln.message))}),je===E.MSG_TYPE_STREAM_CLOSED&&Rt.closeStream(Vt.streamID),!1)})}).catch(function(Vt){var $t;Rt.rt.info("zn.zwt.s.0 write fail ".concat(Vt==null?void 0:Vt.message)),(($t=Vt==null?void 0:Vt.message)===null||$t===void 0?void 0:$t.indexOf("Connection lost"))===-1&&(Rt._t(Je.WriteDataFailed,Vt),Rt.close())})}catch(Vt){this._t(Je.WriteDataFailed,Vt),this.close()}return[2]}})})},ie.prototype.close=function(){return St(this,void 0,void 0,function(){var L,ue,je=this;return It(this,function(Xe){return this.readyState=F.CLOSED,this.ct&&(L=Object.values(this.ft),ue=function(){var ft;(ft=je.ct)===null||ft===void 0||ft.close(),je.ct=null,je.ft={}},L.length>0?Promise.all(L).then(function(){ue()}).catch(function(ft){ue()}):ue()),this.ut=[],this.ht=[],[2]})})},ie.prototype.createStream=function(L,ue){return St(this,void 0,void 0,function(){var je,Xe,ft;return It(this,function(bt){switch(bt.label){case 0:if(!this.ct)return[2,null];(je=this.getStreamByID(ue))||this.ut.push(je={streamID:ue,streamType:L,stream:null,writer:null,reader:null,isCreating:!0}),bt.label=1;case 1:return bt.trys.push([1,3,,4]),[4,this.ct.createBidirectionalStream()];case 2:return Xe=bt.sent(),je.stream=Xe,je.writer=Xe.writable.getWriter(),je.reader=Xe.readable.getReader(),je.isCreating=!1,this.initReader(je.reader,je.streamID),[2,je];case 3:return ft=bt.sent(),this._t(Je.CreateStreamFailed,ft),this.close(),[3,4];case 4:return[2,null]}})})},ie.prototype.closeStream=function(L){var ue;return St(this,void 0,void 0,function(){var je,Xe;return It(this,function(ft){switch(ft.label){case 0:if(je=this.getStreamByID(L),this.ut=this.ut.filter(function(bt){return bt.streamID!==L}),!(je!=null&&je.stream))return[3,4];ft.label=1;case 1:return ft.trys.push([1,3,,4]),je.stream.writable.locked&&((ue=je.writer)===null||ue===void 0||ue.releaseLock()),Xe=je.stream.writable.close(),this.ft[L]=Xe,[4,Xe];case 2:return ft.sent(),delete this.ft[L],[3,4];case 3:return ft.sent(),[3,4];case 4:return[2]}})})},ie.prototype.initReader=function(L,ue){var je,Xe;return St(this,void 0,void 0,function(){var ft,bt,Rt,Pt,Vt;return It(this,function($t){switch($t.label){case 0:$t.label=1;case 1:return $t.trys.push([1,3,,4]),[4,L.read()];case 2:return ft=$t.sent(),bt=ft.value,Rt=ft.done,Pt=this.getStreamByID(ue),Rt||!Pt?(this.rt.info("zn.zwt.rd h3 stream not found ".concat(ue," ").concat(!!Rt," ").concat(!Pt)),this.closeStream(ue),L.releaseLock(),[2]):(this.onmessage&&this.onmessage(bt,Pt.streamID),[3,4]);case 3:return Vt=$t.sent(),((je=Vt==null?void 0:Vt.message)===null||je===void 0?void 0:je.indexOf("RESET_STREAM"))!==-1?(this.ut=this.ut.filter(function(ln){return ln.streamID!==ue}),[2]):(((Xe=Vt==null?void 0:Vt.message)===null||Xe===void 0?void 0:Xe.indexOf("closed"))===-1&&(this.rt.warn("zn.zwt.rd error ".concat(Vt==null?void 0:Vt.message)),this._t(Je.ReadDataFailed,Vt),this.close()),[2]);case 4:return[3,0];case 5:return[2]}})})},ie})();var Gt,Ut=(function(){function ie(L,ue,je){this.lt=L,this.rt=ue,this.proxyCtrl=je,this.dt=null,this.server="",this.type=M.WebSocket,this.vt=null,this.retryTimer=null,this.ENV=L.env,this.eventManager=new vt,this.Et=new mt("connection send")}return Object.defineProperty(ie.prototype,"speed",{get:function(){return this.Et.speed},enumerable:!1,configurable:!0}),ie.prototype.createSocket=function(L,ue,je){var Xe=this;this.rt.info("zn.nss.0 ".concat(L," ").concat(je)),this.server=L,this.type=ue,this.type===M.WebTransport?(this.dt=new Nt(this.rt),this.dt.onBackToWebSocket=function(ft,bt){Xe.type===M.WebTransport&&(Xe.resetConnectTimer(),Xe.onBackToWebSocket&&Xe.onBackToWebSocket(ft,bt))},this.dt.startConnect(L)):(this.type=M.WebSocket,this.dt=(function(ft,bt,Rt){return bt%2===mr.BROWSER?(function(Pt,Vt){return Vt?Vt.createSocket(Pt,0):new WebSocket(Pt)})(ft,Rt):new Ge(ft)})(L,this.ENV%2,this.proxyCtrl)),this.bindSocketHandler(),this.startConnectCheck(je)},ie.prototype.bindSocketHandler=function(){var L=this;this.dt&&(this.dt.onopen=function(ue){var je;L.type===M.WebSocket&&(L.dt.binaryType="arraybuffer"),L.responseHandler(),L.resetConnectTimer(),(je=L.Et)===null||je===void 0||je.start(3e3),L.eventManager.emit("open",ue)},this.dt.onclose=function(ue){var je;L.resetConnectTimer(),(je=L.Et)===null||je===void 0||je.stop(),L.eventManager.emit("close",ue)},this.dt.onerror=function(ue){L.resetConnectTimer(),L.eventManager.emit("error",ue)})},ie.prototype.startConnectCheck=function(L){var ue=this;this.resetConnectTimer(),this.vt=setTimeout(function(){ue.type===M.WebTransport&&ue.lt.networkState===T.online?(ue.resetConnectTimer(),ue.onBackToWebSocket&&ue.onBackToWebSocket(Je.LinkTimeout,{message:"connect timeout"})):ue.eventManager.emit("timeout")},L)},ie.prototype.resetConnectTimer=function(){this.vt&&(clearTimeout(this.vt),this.vt=null)},ie.prototype.responseHandler=function(){var L=this;this.dt&&(this.dt.onmessage=function(ue,je,Xe){var ft=ue;L.type===M.WebSocket&&(ft=typeof ue.data=="string"?JSON.parse(ue.data):ue.data),L.eventManager.emit("message",ft,je,Xe)})},ie.prototype.closeSocket=function(){var L;this.dt&&(this.dt.onclose=null,this.dt.onerror=null,this.dt.close(),this.dt=null,(L=this.Et)===null||L===void 0||L.stop()),this.resetConnectTimer()},ie.prototype.isNotConnected=function(){return!this.dt||this.dt.readyState!==F.OPEN},ie.prototype.sendMessage=function(L,ue,je,Xe){this.isNotConnected()||this.dt&&(this.Et.add(8*L.byteLength),this.dt.send(L,ue,je,Xe))},ie.prototype.onBackToWebSocket=function(L,ue){},ie.prototype.closeStream=function(L){var ue;this.type===M.WebTransport&&((ue=this.dt)===null||ue===void 0||ue.closeStream(L))},ie.prototype.hasStream=function(L){var ue,je;return this.type===M.WebTransport&&!!(!((je=(ue=this.dt)===null||ue===void 0?void 0:ue.getStreamByID(L))===null||je===void 0)&&je.stream)},ie.prototype.on=function(L,ue){return this.eventManager.addEventHandler(L,ue)},ie.prototype.off=function(L,ue){this.eventManager.removeEventHandler(L,ue)},ie})(),Wt=(function(){function ie(L,ue,je){this.lt=L,this.gt=ue,this.proxyCtrl=je,this.ipStackRules=[],this.St=null,this.Tt=re.noProbe,this.Ct=2}return Object.defineProperty(ie.prototype,"bt",{get:function(){var L=this.lt.customConfig,ue=L.accesshubBypassConnectTime;return typeof ue=="number"&&ue!==0?ue:L.probeByPassStrategy===oe.Default||L.ipStackMode===ne.IPv4Prefer?3e3:500},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"isIpv4Prefer",{get:function(){return this.lt.customConfig.ipStackMode===ne.IPv4Prefer},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.lt.logger},enumerable:!1,configurable:!0}),ie.prototype.createSockets=function(L,ue){var je=this;this.Ot.info("".concat(Or," call ").concat(JSON.stringify(L)," ").concat(JSON.stringify(ue))),this.Tt=re.noProbe;var Xe=this.lt.isIpStackDetected?1e4:gi;this.Ot.info("".concat(Or," interval ").concat(Xe)),L!=null&&L.server&&(this.Rt=L,this.At||(this.At=new Ut(this.lt,this.Ot,this.proxyCtrl)),this.bindServiceHandler(this.At,this.Rt),this.At.createSocket(L.server,L.linkType,Xe)),ue!=null&&ue.server?(this.Pt=ue,this.It||(this.It=new Ut(this.lt,this.Ot,this.proxyCtrl)),this.Ot.info("".concat(Ar," bypass time ").concat(this.bt)),this.St=setTimeout(function(){je.bindServiceHandler(je.It,je.Pt),je.It.createSocket(ue.server,ue.linkType,gi)},this.bt)):this.onIPStackDetection({ipStackType:this.Rt.ipStackType===fe.IPv4?fe.IPv6:fe.IPv4,detection:Y.unreachable}),this.Tt=re.probing},ie.prototype.bindServiceHandler=function(L,ue){var je=this;this.Ot.info("".concat(mi," call ").concat(ue.server));var Xe=function(bt){je.onIPStackDetection({ipStackType:ue.ipStackType,detection:bt})},ft=function(bt,Rt){var Pt=performance.now();if(je.Ot.info("".concat(mi," fail ").concat(ue.server," ").concat(bt," ").concat(Rt.massage?JSON.stringify(Rt.massage):JSON.stringify(Rt.code))),!(Pt-ue.failTime<100)){var Vt;if(ue.failTime=Pt,ue.tryCount++,je.isIpv4Prefer&&ue.ipStackType===fe.IPv6&&je.lt.retryLevel===Ve.single&&je.Rt.svrConnectState===K.success)je.Ot.info("".concat(mi," only retry once"));else if(je.gt.Nt==re.probing&&ue.tryCount<je.Ct)return je.Ot.info("".concat(mi," server ").concat(ue.server," retry ").concat(ue.tryCount)),L.retryTimer&&(clearTimeout(L.retryTimer),L.retryTimer=null),void(L.retryTimer=setTimeout(function(){L.createSocket(ue.server,ue.linkType,gi)},3e3));(Rt==null?void 0:Rt.code)===Q.code?(Vt=Y.unknown,ue.svrConnectState=K.timeout):(Vt=Y.unreachable,ue.svrConnectState=K.fail),Xe(Vt),je.removeServiceListener(L),L.closeSocket(),je.checkProbeState()}};L.off("open"),L.on("open",function(){je.Ot.info("".concat(mi," ").concat(ue.server," open ").concat(re[je.Tt])),ue.svrConnectState=K.success,Xe(Y.reachable),je.Tt===re.probing?(je.Tt=re.probed,je.removeServiceListener(L),je.onSocketOpen&&je.onSocketOpen(L,ue)):je.onNextSocketOpen&&je.onNextSocketOpen(L,ue),je.lt.customConfig.probeByPassStrategy===oe.Default&&je.isIpv4Prefer&&ue.ipStackType===fe.IPv4&&je.St&&je.clearByPassProbe()}),L.off("close"),L.on("close",function(bt){ft("close",bt)}),L.off("error"),L.on("error",function(bt){ft("error",bt)}),L.off("timeout"),L.on("timeout",function(){ft("timeout",Q)}),L.onBackToWebSocket=function(bt,Rt){if(je.lt.networkState===T.online){var Pt={message:Rt.message||""};je.Ot.info("".concat(mi," back to wss reason: ").concat(bt," ").concat(Pt.message)),Pt.message.includes("Connection lost")?ft("error",Pt):(L.closeSocket(),ue.backToWss=!0,ue.backToWssInfo={reason:bt,error:Pt},je.checkIfBackToWss())}else ft("error",Rt)}},ie.prototype.checkProbeState=function(){var L,ue;((L=this.Rt)===null||L===void 0?void 0:L.svrConnectState)!==void 0&&[K.fail,K.timeout].includes(this.Rt.svrConnectState)&&(!this.Pt||((ue=this.Pt)===null||ue===void 0?void 0:ue.svrConnectState)!==void 0&&[K.fail,K.timeout].includes(this.Pt.svrConnectState))&&(this.Ot.info("".concat(Ar," sockets fail")),this.onSocketsFail&&this.onSocketsFail())},ie.prototype.checkIfBackToWss=function(){var L,ue,je,Xe,ft,bt,Rt,Pt;this.Rt&&this.Rt.backToWss&&(this.onSocketBackToWebSocket&&this.onSocketBackToWebSocket(this.Rt,((ue=(L=this.Rt)===null||L===void 0?void 0:L.backToWssInfo)===null||ue===void 0?void 0:ue.reason)||Je.Unknown,((Xe=(je=this.Rt)===null||je===void 0?void 0:je.backToWssInfo)===null||Xe===void 0?void 0:Xe.error)||{}),this.Pt&&this.Pt.backToWss&&this.onSocketBackToWebSocket&&this.onSocketBackToWebSocket(this.Pt,((bt=(ft=this.Pt)===null||ft===void 0?void 0:ft.backToWssInfo)===null||bt===void 0?void 0:bt.reason)||Je.Unknown,((Pt=(Rt=this.Pt)===null||Rt===void 0?void 0:Rt.backToWssInfo)===null||Pt===void 0?void 0:Pt.error)||{}))},ie.prototype.removeServiceListener=function(L){L.off("open"),L.off("close"),L.off("error"),L.off("timeout"),L.onBackToWebSocket=function(){},L.retryTimer&&(clearTimeout(L.retryTimer),L.retryTimer=null)},ie.prototype.stopTask=function(){this.Tt==re.probing&&this.destroySockets()},ie.prototype.destroySockets=function(){var L;this.Ot.info("".concat("zn.sm.ds.0"," call")),this.At&&(this.removeServiceListener(this.At),this.At.closeSocket()),this.It&&(this.removeServiceListener(this.It),(L=this.It)===null||L===void 0||L.closeSocket()),this.clearByPassProbe()},ie.prototype.clearByPassProbe=function(){this.St&&(clearTimeout(this.St),this.St=null)},ie.prototype.onSocketOpen=function(L,ue){},ie.prototype.onNextSocketOpen=function(L,ue){},ie.prototype.onSocketBackToWebSocket=function(L,ue,je){},ie.prototype.onSocketsFail=function(){},ie.prototype.onIPStackDetection=function(L){},ie})(),an=function(){return an=Object.assign||function(ie){for(var L,ue=1,je=arguments.length;ue<je;ue++)for(var Xe in L=arguments[ue])Object.prototype.hasOwnProperty.call(L,Xe)&&(ie[Xe]=L[Xe]);return ie},an.apply(this,arguments)},en=function(ie,L,ue){for(var je,Xe=0,ft=L.length;Xe<ft;Xe++)!je&&Xe in L||(je||(je=Array.prototype.slice.call(L,0,Xe)),je[Xe]=L[Xe]);return ie.concat(je||Array.prototype.slice.call(L))},Cn=(function(){function ie(L,ue,je){var Xe,ft=this;this.Dt=L,this.lt=ue,this.proxyCtrl=je,this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer="",this.ipStackRules=[],this.urlIndex=0,this.http3Servers=[],this.byPassUrlIndex=0,this.Nt=re.noProbe,this.serversGroup={wss:[],http3:[],wssV6:[],http3V6:[]},this.unUpdateMsgTimeTypes=[E.MSG_TYPE_HB_REQUEST,E.MSG_TYPE_HB_RESPONSE,E.MSG_TYPE_GET_CONFIG_REQUEST,E.MSG_TYPE_GET_CONFIG_RESPONSE,E.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,E.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2,E.MSG_TYPE_GET_SVRADDR_REQUEST,E.MSG_TYPE_GET_SVRADDR_RESPONSE,E.MSG_TYPE_GET_APPCONFIG_REQUEST,E.MSG_TYPE_GET_APPCONFIG_RESPONSE,E.MSG_TYPE_CLOSE_CONNECTION],this.netLinkState=0,this.sendCommandList=new Ye,this.unSendCommandList=new Ye,this.sendCommandMap={},this.unSendCommandMap={},this.yt=100,this.wt=15e3,this.zt=1e3,this.Mt=5e3,this.connectInterval=1e4,this.connectRsp={},this.unlogTypes=[12,13],this.tryServers=[],this.connectStartTime=0,this.isTestedWebTransport=((Xe={})[fe.IPv4]=!1,Xe[fe.IPv6]=!1,Xe),this.msgCache={},this.Ht=0,this.bt=500,this.Ut="",this.Gt=function(){var bt,Rt;ft.Ot.info("zn.wl.ssoh.0 server connected: ".concat((bt=ft.socketService)===null||bt===void 0?void 0:bt.server," open time: ").concat(Date.now()-ft.Ht)),ft.socketService&&ft.connectServer!==((Rt=ft.socketService)===null||Rt===void 0?void 0:Rt.server)&&(ft.connectServer=ft.socketService.server,ft.tryServers.pop(),ft.tryServers.push(ft.connectServer)),ft.netLinkState!==2&&ft.kt()},this.Vt=function(bt){ft.closeCallback("close",bt)},this.Bt=function(bt){ft.closeCallback("error",bt)},this.Yt=function(){var bt;ft.Ot.info(Mn+" timeout"),ft.Lt(1,ft.connectServer,Q.code),(bt=ft.$t)===null||bt===void 0||bt.call(ft,!0,{code:Q.code,msg:""}),ft.netLinkState=0,ft.connectRsp.fail&&ft.connectRsp.fail()},this.onUpdateMsgTimeChanged=void 0,this.updatedMsgTime=Date.now(),this.socketDetectManager=new Wt(this.lt,this,this.proxyCtrl),this.socketDetectManager.onSocketOpen=function(bt,Rt){ft.Ot.info("".concat(Dr," main server ").concat(Rt.server," open socket")),ft.socketService=bt,ft.setIPStackDetectedInfo(Rt),ft.bindSocketServiceEvent(),ft.Gt()},this.socketDetectManager.onIPStackDetection=function(bt){ft.Ot.info("".concat(Dr," ip stack detection ").concat(JSON.stringify(bt))),ft.xt(bt)},this.socketDetectManager.onNextSocketOpen=function(bt,Rt){ft.Ot.info("".concat(Dr," next server ").concat(Rt.server," open socket")),ft.getByPassIp(bt,Rt)},this.socketDetectManager.onSocketBackToWebSocket=function(bt,Rt,Pt){var Vt,$t={message:Pt.message||""};if(ft.Ot.info("".concat(Dr," backToWss reason: ").concat(Rt,", error: ").concat($t.message)),ft.lt.enableHttp3){var ln=bt.server,qn=bt.ipStackType,Tn=ft.jt(qn),Sn=qr(Tn,ft.lt.env,ft.lt.appID);if(ft.Ot.info("".concat(Dr," backToWss server: ").concat(ln," stack: ").concat(qn)),ft.lt.enableHttp3=!1,Sn){var _n=!1;if(Object.keys(Sn).find(function(cr){return cr===ln})){var Gn=Sn[ln].time;Date.now()-Gn>864e5&&(_n=!0)}else _n=!0;_n&&(ft.Ot.info("".concat(Dr," backToWss http3 fail")),Bi(Tn,ft.lt.env,ft.lt.appID,((Vt={})[ln]={status:!1,time:Rt===Je.LinkTimeout?0:Date.now()},Vt),!0))}ft.closeSocket(),ft.netLinkState=0,ft.clearMessageList(ft.sendCommandList,ft.sendCommandMap),ft.clearMessageList(ft.unSendCommandList,ft.unSendCommandMap),ft.Lt(1,ft.connectServer,Te,Rt,$t),ft._t&&ft._t(Rt,$t)}},this.socketDetectManager.onSocketsFail=function(){ft.Ot.info("".concat(Dr," socket fail")),ft.Nt=re.noProbe,ft.netLinkState=0,ft.connectRsp.fail&&ft.connectRsp.fail()}}return Object.defineProperty(ie.prototype,"linkServerStorageKey",{get:function(){return this.jt(this.lt.currentIpStackType)},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"byPassStackType",{get:function(){return this.lt.currentIpStackType===fe.IPv4?fe.IPv6:fe.IPv4},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.lt.logger},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"speed",{get:function(){var L,ue;return(ue=(L=this.socketService)===null||L===void 0?void 0:L.speed)!==null&&ue!==void 0?ue:0},enumerable:!1,configurable:!0}),ie.prototype.setIPStackDetectedInfo=function(L){this.lt.isIpStackDetected=!0;var ue=L.ipStackType;this.lt.currentIpStackType=ue,ue===fe.IPv4?(this.servers=this.serversGroup.wss,this.http3Servers=this.serversGroup.http3):(this.servers=this.serversGroup.wssV6,this.http3Servers=this.serversGroup.http3V6)},Object.defineProperty(ie.prototype,"HBHandler",{set:function(L){this.qt=L},enumerable:!1,configurable:!0}),ie.prototype.initEvent=function(L,ue,je,Xe,ft,bt){this.Ft=L,this.$t=ue,this.Jt=je,this.Wt=Xe,this._t=ft,this.Qt=bt},ie.prototype.onSocketClose=function(){},ie.prototype.setServers=function(L,ue,je,Xe){L===void 0&&(L=[]),ue===void 0&&(ue=[]),je===void 0&&(je=[]),Xe===void 0&&(Xe=[]),this.Ot.info("".concat("zn.wl.ss"," ").concat(JSON.stringify(L)," ").concat(JSON.stringify(ue)," ").concat(JSON.stringify(je)," ").concat(JSON.stringify(Xe))),this.serversGroup.wss=L,this.serversGroup.http3=ue,this.serversGroup.wssV6=je,this.serversGroup.http3V6=Xe,this.urlIndex=0,this.ipStackRules.length>0&&this.setLinkServers()},ie.prototype.setHttp3Servers=function(L,ue){this.Ot.info("".concat("zn.wl.shs"," ").concat(JSON.stringify(L)," ").concat(JSON.stringify(ue))),(L==null?void 0:L.length)>0&&(this.serversGroup.http3=L),(ue==null?void 0:ue.length)>0&&(this.serversGroup.http3V6=ue),this.ipStackRules.length>0&&this.setLinkServers()},ie.prototype.setIpStrategy=function(L){L.length>0&&(this.Ot.info("".concat("zn.wl.sis"," rules: ").concat(JSON.stringify(L))),this.ipStackRules=L,this.setLinkServers())},ie.prototype.setLinkServers=function(){this.ipStackRules.length>0&&this.ipStackRules[0]===fe.IPv6?(this.Ot.info("".concat(_r," set ipv6")),this.servers=this.serversGroup.wssV6,this.http3Servers=this.serversGroup.http3V6,this.lt.currentIpStackType=fe.IPv6):(this.Ot.info("".concat(_r," set ipv4")),this.servers=this.serversGroup.wss,this.http3Servers=this.serversGroup.http3,this.lt.currentIpStackType=fe.IPv4)},ie.prototype.isNeedTestWebTransport=function(L,ue){return!!this.isEnableHttp3()&&(L==null?void 0:L.length)!==0&&!this.isTestedWebTransport[ue]},ie.prototype.destroySocket=function(L,ue){this.Ot.info("zn.wl.ds.0 call "+L),this.closeSocket(),L!==k.NONE&&(ue&&this.Lt(1,this.connectServer,ue==null?void 0:ue.code),this.$t&&this.$t(L===k.BROKEN,ue,this.tryServers))},ie.prototype.refreshServers=function(L){this.servers=en(en([],L,!0),this.servers)},ie.prototype.isEnableHttp3=function(){return!!this.lt.enableHttp3&&!!this.lt.customConfig.enableHttp3&&this.lt.appInfo.model!==Qe.Private&&!this.proxyCtrl},ie.prototype.connectSocket=function(L,ue,je){var Xe,ft,bt=this;if(L===void 0&&(L=!0),this.Ot.info(Mn+" call"),!this.servers||!(!((Xe=this.servers)===null||Xe===void 0)&&Xe.length))return this.Ot.warn(Mn+" no servers"),!1;this.connectRsp.suc=ue;var Rt=!1;this.connectRsp.fail=function(){je&&(Rt?bt.Ot.info(Mn+" fail cb has exec"):(je(),Rt=!0))},L&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.closeSocket(),this.connectStartTime=Date.now(),this.Lt(0),this.netLinkState=1,this.Ht=Date.now();var Pt=this.getConnectServers(),Vt=Pt.mainSvrInfo,$t=Pt.byPassSvrInfo;return this.Nt===re.noProbe?(this.Ot.info("".concat(Mn," probe")),this.socketDetectManager.createSockets(Vt,$t),this.Nt=re.probing):(this.Ot.info("".concat(Mn," createSocket")),(ft=this.socketService)===null||ft===void 0||ft.createSocket(Vt.server,Vt.linkType,1e4)),this.connectServer=Vt.server,this.tryServers.push(this.connectServer),this.Jt&&this.Jt(!0),!0},ie.prototype.Lt=function(L,ue,je,Xe,ft){},ie.prototype.getServersByStackType=function(L){var ue,je;return L===fe.IPv4?(ue=this.serversGroup.wss,je=this.serversGroup.http3):(ue=this.serversGroup.wssV6,je=this.serversGroup.http3V6),[ue,je]},ie.prototype.getConnectServers=function(){var L,ue=this.Kt(this.servers,this.http3Servers,this.lt.currentIpStackType,this.urlIndex,"main");if(this.ipStackRules.length>1){var je=this.getServersByStackType(this.byPassStackType),Xe=je[0];(Xe==null?void 0:Xe.length)>0&&(L=this.Kt(Xe,je[1],this.byPassStackType,this.byPassUrlIndex,"bypass"))}return{mainSvrInfo:ue,byPassSvrInfo:L}},ie.prototype.Kt=function(L,ue,je,Xe,ft){var bt,Rt="",Pt=M.WebSocket;return this.Ot.info(Mn+" "+ft+" enableHttp3:"+this.isEnableHttp3()),(bt=this.isEnableHttp3()?this.getUseableHttp3Server(ue,je):"").length>0&&(Pt=M.WebTransport,Rt=bt,this.Ot.info("".concat(Mn," h3 connect ").concat(ft," server ").concat(Rt))),bt||(Pt=M.WebSocket,Rt=L[Xe],this.Ot.info("".concat(Mn," wss connect ").concat(ft," server ").concat(Rt))),{server:Rt,linkType:Pt,ipStackType:je,tryCount:0,failTime:0}},ie.prototype.xt=function(L){this.Ot.info("".concat($n," ").concat(JSON.stringify(L)));var ue=L.ipStackType,je=L.detection,Xe=!1;ue===fe.IPv4?(this.lt.linkIpStackDetection.IPv4!==je&&(Xe=!0),this.lt.linkIpStackDetection.IPv4=je):ue===fe.IPv6&&(this.lt.linkIpStackDetection.IPv6!==je&&(Xe=!0),this.lt.linkIpStackDetection.IPv6=je),Xe&&(this.Ot.info("".concat($n," res ").concat(JSON.stringify(this.lt.linkIpStackDetection))),this.Qt(an({},this.lt.linkIpStackDetection)));var ft=this.lt.linkIpStackDetection;this.Nt===re.probing&&ft.IPv4!==Y.unknown&&ft.IPv6!==Y.unknown&&(this.Nt=re.probed)},ie.prototype.getByPassIp=function(L,ue){var je=this,Xe=Date.now(),ft=ue.server,bt=ue.linkType,Rt=ue.ipStackType;L==null||L.on("message",function(Vt){var $t,ln;try{if(Date.now()-Xe>je.connectInterval)je.Ot.info("".concat(Gr," failed:").concat(ft," reason:").concat(Je.LinkTimeout," time:").concat(Date.now()-Xe,"ms"));else{var qn=new Uint8Array(Vt),Tn=je.Dt.decodeResponse(qn,bt),Sn=Tn[2];if(Tn[1]===E.MSG_TYPE_GET_CONFIG_RESPONSE&&Sn.code===0){je.Ot.info("".concat(Gr," success:").concat(ft," time: ").concat(Date.now()-Xe,"ms")),!(($t=Sn.data)===null||$t===void 0)&&$t.client_outer_ip&&(je.lt.byPassClientIP=(ln=Sn.data)===null||ln===void 0?void 0:ln.client_outer_ip);var _n=je.getServersByStackType(Rt),Gn=_n[1];bt===M.WebSocket&&je.isNeedTestWebTransport(Gn,Rt)&&je.testWebTransport(Gn,Rt)}je.Qt(an({},je.lt.linkIpStackDetection)),je.socketDetectManager.removeServiceListener(L),L.off("message"),L.closeSocket()}}catch(cr){je.Ot.info("".concat(Gr," failed:").concat(ft," reason:").concat(Je.GetConfigFailed," error:").concat(JSON.stringify(cr),"  time:").concat(Date.now()-Xe,"ms"))}});var Pt=this.Zt(bt);L==null||L.sendMessage(Pt.buf,Pt.streamID,Pt.type,q.OTHER)},ie.prototype.closeCallback=function(L,ue){var je;this.Ot.info("".concat("zn.wl.cc.0"," ").concat(L," ").concat(JSON.stringify(ue)));var Xe=((je=this.socketService)===null||je===void 0?void 0:je.type)===M.WebTransport?"zn.wl.bse.h3":"zn.wl.bse.wss";this.Ot.warn("".concat(Xe," ").concat(L," ").concat(JSON.stringify(ue.code?ue.code:ue))),this.Xt(ue)},ie.prototype.Xt=function(L){var ue=(L==null?void 0:L.code)||Q.code;this.Lt(1,this.connectServer,ue),this.$t&&this.$t(!0,{code:ue,msg:""}),this.netLinkState=0,this.connectRsp.fail&&this.connectRsp.fail()},ie.prototype.bindSocketServiceEvent=function(){var L=this;this.socketService?(this.socketService.on("open",this.Gt.bind(this)),this.socketService.on("close",this.Vt.bind(this)),this.socketService.on("error",this.Bt.bind(this)),this.socketService.on("timeout",this.Yt.bind(this)),this.socketService.onBackToWebSocket=function(ue,je){var Xe,ft={message:je.message||""};if(L.Ot.info(Nn+" call reason:"+ue+" error:"+ft.message+" h3 "+L.lt.enableHttp3+" service: "+!!L.socketService),L.lt.networkState===T.online)if(ft.message.includes("Connection lost"))L.closeCallback("error",ft);else{if(!L.lt.enableHttp3||!L.socketService)return;L.Ot.info(nr+" server ".concat(L.socketService.server," fail")),L.lt.enableHttp3=!1;var bt=qr(L.linkServerStorageKey,L.lt.env,L.lt.appID);if(bt){var Rt=!1;if(Object.keys(bt).find(function(Vt){return Vt===L.socketService.server})){var Pt=bt[L.socketService.server].time;Date.now()-Pt>864e5&&(Rt=!0)}else Rt=!0;Rt&&(L.Ot.info(nr+" http3 fail"),Bi(L.linkServerStorageKey,L.lt.env,L.lt.appID,((Xe={})[L.socketService.server]={status:!1,time:ue===Je.LinkTimeout?0:Date.now()},Xe),!0))}L.closeSocket(),L.netLinkState=0,L.clearMessageList(L.sendCommandList,L.sendCommandMap),L.clearMessageList(L.unSendCommandList,L.unSendCommandMap),L.Lt(1,L.connectServer,Te,ue,ft),L._t&&L._t(ue,ft)}else L.closeCallback("error",ft)}):this.Ot.warn(Nn+" no service")},ie.prototype.removeSocketServiceEvent=function(){this.Ot.info("zn.wl.rsse.0 call ".concat(!!this.socketService)),this.socketService&&(this.socketService.off("open"),this.socketService.off("close"),this.socketService.off("error"),this.socketService.off("timeout"),this.socketService.off("message"),this.socketService=null)},ie.prototype.releaseSocketDetectTask=function(){this.Ot.info("zn.wl.rsdt.0 call"),this.socketDetectManager&&this.socketDetectManager.stopTask(),this.closeSocket(),this.netLinkState=0},ie.prototype.kt=function(){this.Ot.info("zn.wl.osso.0 call"),this.connectRsp.suc&&this.connectRsp.suc(),this.netLinkState=2,this.Lt(1,this.connectServer,0),this.Ft&&this.Ft(this.tryServers,0),this.tryServers=[],this.checkUnSendMsgs(this.unSendCommandList,this.unSendCommandMap),this.onMessage()},ie.prototype.closeSocket=function(){var L,ue,je=(L=this.socketService)===null||L===void 0?void 0:L.isNotConnected();return this.Ot.info("zn.wl.cs.1"+" call ".concat(je," ").concat(this.netLinkState)),!(je&&this.netLinkState===0||((ue=this.socketService)===null||ue===void 0||ue.closeSocket(),this.netLinkState=0,this.onSocketClose&&this.onSocketClose(),0))},ie.prototype.release=function(){this.socketDetectManager.destroySockets(),this.stopCheck(),this.sendCommandList=new Ye,this.unSendCommandList=new Ye,this.sendCommandMap={},this.unSendCommandMap={},this.msgCache={}},ie.prototype.isConnect=function(){return this.netLinkState===2},ie.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isNotConnected()},ie.prototype.isConnecting=function(){return this.netLinkState===1},ie.prototype.setState=function(L){this.netLinkState=L},ie.prototype.sendMessage=function(L,ue,je,Xe,ft,bt,Rt,Pt,Vt){var $t,ln,qn;Xe===void 0&&(Xe=!0),ft===void 0&&(ft=null),bt===void 0&&(bt=null),Rt===void 0&&(Rt=null),Pt===void 0&&(Pt={}),(Pt.timeout===void 0||Pt.timeout<=0)&&(Pt.timeout=this.Mt),Pt.isInSendMap===void 0&&(Pt.isInSendMap=!0),Pt.isMsgCache===void 0&&(Pt.isMsgCache=!0),this.txid++;var Tn={appid:this.lt.appID,biz_type:0,mode_no:this.lt.appInfo.mode,sdk_type:ar.sdkType,zegoconn_run_env:this.lt.env===0?V.ZEGOCONN_RUN_ENV_BROWSER:V.ZEGOCONN_RUN_ENV_APPLET,zegoconn_version:this.lt.appInfo.connVer};!(($t=this.lt.appInfo)===null||$t===void 0)&&$t.deviceID&&(Tn.device_id=this.lt.appInfo.deviceID),((ln=this.socketService)===null||ln===void 0?void 0:ln.type)===M.WebTransport&&(!((qn=this.socketService)===null||qn===void 0)&&qn.hasStream(ue)||(Xe=!0));var Sn=an({id_name:this.lt.userId},Xe?Tn:{}),_n=an(an({txid:this.txid},Sn),je),Gn=Date.now(),cr={data:_n,txid:this.txid,sendTime:Gn,streamID:ue,type:L,timeOut:Gn+Pt.timeout,ack:je.ack,success:ft,error:bt,ackFunc:Rt,isSend:!0,isCheck:L!==E.MSG_TYPE_PC_UPWARD_MESSAGE,extras:Pt.extras,streamType:Vt};if(Pt.isInSendMap){var Ur=this.sendCommandList.push(cr);this.sendCommandMap[this.txid]=Ur,!this.ti&&this.startCheck()}if(!(_n.service===10||_n.interface_id===14)&&this.unUpdateMsgTimeTypes.includes(L)||(this.updatedMsgTime=Date.now(),this.onUpdateMsgTimeChanged&&this.onUpdateMsgTimeChanged(this.updatedMsgTime)),this.unlogTypes.indexOf(L)===-1&&this.Ot.info("zn.wl.sm type: "+L+"-"+j[L]+" streamID: "+ue+" txid: "+this.txid+" no1: ".concat(Xe)),this.isConnect())this.sendUint8Data(L,_n,ue,Vt);else if(Pt.isMsgCache){cr.isSend=!1;var Hr=this.unSendCommandList.push(cr);this.unSendCommandMap[this.txid]=Hr}},ie.prototype.checkUnSendMsgs=function(L,ue){var je=this;L.forEach(function(Xe){return!Xe||(L.remove(Xe),!!Xe.U&&(delete ue[Xe.U.txid],Xe.U.isSend===!1&&Xe.U.type&&Xe.U.streamID&&Xe.U.data&&(je.sendUint8Data(Xe.U.type,Xe.U.data,Xe.U.streamID,Xe.U.streamType),Xe.U.isSend=!0),!1))})},ie.prototype.clearUnsentMsgs=function(L){var ue=this;this.unSendCommandList.forEach(function(je){var Xe;((Xe=je==null?void 0:je.U)===null||Xe===void 0?void 0:Xe.streamID)===L&&(ue.unSendCommandList.remove(je),delete ue.unSendCommandMap[je.U.txid])})},ie.prototype.ii=function(L){return L.buffer.slice(L.byteOffset,L.byteLength+L.byteOffset)},ie.prototype.sendUint8Data=function(L,ue,je,Xe){var ft,bt,Rt=this.Dt.encodeRequest(L,ue,je,this.socketService.type);(ft=this.socketService)===null||ft===void 0||ft.sendMessage(this.ii(Rt),je,L,Xe),(bt=this.qt)===null||bt===void 0||bt.startHB()},ie.prototype.notifyMessage=function(L,ue,je,Xe){var ft;L!=null&&L.txid&&nt.isLong(L.txid)&&L.txid.toNumber&&(L.txid=L.txid.toNumber()),this.unUpdateMsgTimeTypes.includes(ue)||(this.updatedMsgTime=Date.now(),this.onUpdateMsgTimeChanged&&this.onUpdateMsgTimeChanged(this.updatedMsgTime));var bt=(L==null?void 0:L.txid)||((ft=L==null?void 0:L.data)===null||ft===void 0?void 0:ft.txid);if(this.unlogTypes.indexOf(ue)===-1){var Rt=bt?", txid: ".concat(bt):"";this.Ot.info(Pn+" streamID: ".concat(Xe,", msgType: ").concat(ue,"-").concat(j[ue])+Rt)}bt&&this.isRspMsg(bt)?this.handleSendCommandMsgRsp(ue,bt,L,{size:je}):this.Wt(Xe,ue,L,{size:je})},ie.prototype.onMessage=function(){var L=this;this.msgCache={},this.socketService&&(this.socketService.off("message"),this.socketService.on("message",function(ue,je){var Xe;L.lt.lastRecvMsgTime=Date.now();var ft,bt=new Uint8Array(ue),Rt=L.msgCache[je];if(Rt){var Pt=new Uint8Array(Rt.data.byteLength+bt.byteLength);Pt.set(Rt.data,0),Pt.set(bt,Rt.data.byteLength),bt=Pt,ft=Rt.streamID,delete L.msgCache[je]}for(;bt.byteLength;){var Vt=L.Dt.decodeResponse(bt,L.socketService.type),$t=Vt[0],ln=Vt[1],qn=Vt[2],Tn=Vt[3];if(ft=$t===0?je:$t,!(Tn>0)){L.msgCache[je]={streamID:je,data:bt};break}Tn>bt.byteLength&&L.Ot.warn(Pn+" streamID: ".concat(ft,", msg decode error, ").concat(bt.byteLength," ").concat(Tn)),bt=bt.slice(Tn,bt.byteLength),((Xe=L.socketService)===null||Xe===void 0?void 0:Xe.type)===M.WebSocket&&ln===E.MSG_TYPE_GET_CONFIG_RESPONSE&&L.isNeedTestWebTransport(L.http3Servers,L.lt.currentIpStackType)&&L.testWebTransport(L.http3Servers,L.lt.currentIpStackType),L.notifyMessage(qn,ln,Tn,ft)}}))},ie.prototype.isRspMsg=function(L){return this.sendCommandMap[L]!==void 0},ie.prototype.startCheck=function(){var L=this;this.ni(this.sendCommandList,this.sendCommandMap,this.unSendCommandList,this.unSendCommandMap),this.ti=setTimeout(function(){L.startCheck()},this.zt)},ie.prototype.stopCheck=function(){this.ei(this.sendCommandList),this.ti&&(clearTimeout(this.ti),this.ti=null)},ie.prototype.ni=function(L,ue,je,Xe){var ft=this,bt=Date.now(),Rt=0;L.forEach(function(Pt){if(!Pt)return!0;if(!Pt.U)return!1;if(Pt.U.timeOut<=bt){L.remove(Pt),delete ue[Pt.U.txid];var Vt=Xe[Pt.U.txid];if(Vt&&(je.remove(Vt),delete Xe[Pt.U.txid]),!(Pt.U.error==null||Pt.U.sendTime+ft.wt<bt)){var $t=Pt.U.error;Pt.U.isCheck&&$t&&$t({},Pt.U.txid,lr)}if(++Rt>=ft.yt)return!0}return!1})},ie.prototype.ei=function(L){L.forEach(function(ue){if(!ue)return!0;if(L.remove(ue),!ue.U)return!1;if(ue.U.isSend&&ue.U.error){var je=ue.U.error,Xe=ue.U.txid;ue.U.isCheck&&setTimeout(function(){je({},Xe,lr)},0)}return!1})},ie.prototype.clearMessageList=function(L,ue){L.forEach(function(je){if(!je)return!0;if(L.remove(je),!je.U)return!1;if(je.U.error){var Xe=je.U.error,ft=je.U.txid;je.U.isCheck&&setTimeout(function(){ue[je.U.txid]&&delete ue[je.U.txid],Xe({},ft,lr)},0)}return!1})},ie.prototype.handleSendCommandMsgRsp=function(L,ue,je,Xe){var ft=this.sendCommandMap[ue];if(ft!=null){var bt=ft.U;bt!=null&&bt.ack||(delete this.sendCommandMap[ue],this.sendCommandList.remove(ft)),je.code&&je.code!==0?bt&&bt.error!=null&&(bt.error(je,ue),bt.success=null,bt.error=null):L===E.MSG_TYPE_PUSH_EXCEPTION?(je.code=je.reason,je.message=je.msg,delete je.reason,delete je.msg,bt&&bt.error!=null&&(bt.error(je,ue),bt.success=null,bt.error=null)):L===E.MSG_TYPE_HTTP_REQUEST_ACK?bt&&bt.ackFunc!=null&&bt.ackFunc(je,ue):bt&&bt.success!=null&&(bt.success(je,ue,Xe),bt.success=null,bt.error=null)}},ie.prototype._t=function(L,ue){},ie.prototype.Qt=function(L){},ie.prototype.jt=function(L){return L===fe.IPv4?"z_net_http3_servers_status":"z_net_http3_v6_servers_status"},ie.prototype.Zt=function(L){var ue,je;this.txid++;var Xe={appid:this.lt.appID,biz_type:0,mode_no:this.lt.appInfo.mode,sdk_type:ar.sdkType,zegoconn_run_env:this.lt.env===0?V.ZEGOCONN_RUN_ENV_BROWSER:V.ZEGOCONN_RUN_ENV_APPLET,zegoconn_version:this.lt.appInfo.connVer};!((ue=this.lt.appInfo)===null||ue===void 0)&&ue.deviceID&&(Xe.device_id=(je=this.lt.appInfo)===null||je===void 0?void 0:je.deviceID);var ft=an({id_name:this.lt.userId},Xe),bt=this.lt.appInfo.geoFencing,Rt=an(an({txid:this.txid},ft),{geofencing_type:bt==null?void 0:bt.type,geofencings:bt==null?void 0:bt.list}),Pt=E.MSG_TYPE_GET_CONFIG_REQUEST,Vt=Date.now(),$t=this.Dt.encodeRequest(Pt,Rt,Vt,L);return{buf:this.ii($t),streamID:Vt,type:Pt}},ie.prototype.getUseableHttp3Server=function(L,ue){var je="",Xe=qr(this.jt(ue),this.lt.env,this.lt.appID);if(this.Ot.info(ci+" cache:"+JSON.stringify(Xe)),Xe)for(var ft=0,bt=Object.keys(Xe);ft<bt.length;ft++){var Rt=bt[ft];if(Xe[Rt].status&&L.includes(Rt)){je=Rt;break}}return this.Ot.info(ci+" "+je),je},ie.prototype.si=function(L,ue){if(!L.length)return[];var je=L,Xe=qr(ue,this.lt.env,this.lt.appID);if(Xe){for(var ft=0,bt=Object.keys(Xe);ft<bt.length;ft++){var Rt=bt[ft];if(L.includes(Rt)){var Pt=Xe[Rt].time;Date.now()-Pt>864e5&&delete Xe[Rt]}else delete Xe[Rt]}Bi(ue,this.lt.env,this.lt.appID,Xe),je=L.filter(function(Vt){return!Xe[Vt]})}return Array.from(new Set(je))},ie.prototype.testWebTransport=function(L,ue){this.isTestedWebTransport[ue]=!0;var je=this.jt(ue),Xe=this.si(L,je);this.Ot.info("zn.wl.h3.t servers:"+JSON.stringify(Xe)+" ip "+ue),this.startTestHttp3Server(Xe,je)},ie.prototype.startTestHttp3Server=function(L,ue){var je=this;if(L.length){var Xe=L.shift();this.Ot.info("zn.wl.h3.t.0 start:"+Xe);var ft=new Nt(this.Ot),bt=Date.now();ft.onBackToWebSocket=function(Rt){var Pt;je.Ot.info("".concat(Nr," failed:").concat(Xe," reason:").concat(Rt," time:").concat(Date.now()-bt,"ms")),Bi(ue,je.lt.env,je.lt.appID,((Pt={})[Xe]={status:!1,time:Date.now()},Pt),!0),je.startTestHttp3Server(L,ue)},ft.onopen=function(Rt){var Pt=je.Zt(M.WebTransport);ft.send(Pt.buf,Pt.streamID,Pt.type,q.OTHER)},ft.onmessage=function(Rt){var Pt,Vt;try{if(Date.now()-bt>je.connectInterval)je.Ot.info("".concat(Nr," failed:").concat(Xe," reason:").concat(Je.LinkTimeout," time:").concat(Date.now()-bt,"ms"));else{var $t=new Uint8Array(Rt),ln=je.Dt.decodeResponse($t,M.WebTransport);if(ln[1]===E.MSG_TYPE_GET_CONFIG_RESPONSE&&ln[2].code===0)return je.Ot.info("".concat("zn.wl.h3.t.1"," success:").concat(Xe," time: ").concat(Date.now()-bt,"ms storageKey: ").concat(ue)),Bi(ue,je.lt.env,je.lt.appID,((Pt={})[Xe]={status:!0,time:Date.now()},Pt),!0),void ft.close()}}catch(qn){je.Ot.info("".concat(Nr," failed:").concat(Xe," reason:").concat(Je.GetConfigFailed," error:").concat(JSON.stringify(qn),"  time:").concat(Date.now()-bt,"ms"))}ft.close(),ft=null,Bi(ue,je.lt.env,je.lt.appID,((Vt={})[Xe]={status:!1,time:Date.now()},Vt),!0),je.startTestHttp3Server(L,ue)},ft.startConnect(Xe)}},ie})(),Un=(function(){function ie(L,ue,je){this.oi=L,this.Dt=ue,this.stateCenter=je}return Object.defineProperty(ie.prototype,"appInfo",{get:function(){return this.stateCenter.appInfo},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.stateCenter.logger},enumerable:!1,configurable:!0}),ie.prototype.getConfig=function(L,ue){this.Ot.info("zn.nab.gc call");var je=this.oi.getFreeStream(q.OTHER),Xe=this.appInfo.geoFencing;je.sendMessage(E.MSG_TYPE_GET_CONFIG_REQUEST,{geofencing_type:Xe==null?void 0:Xe.type,geofencings:Xe==null?void 0:Xe.list,dispatch_tag:this.stateCenter.customConfig.dispatchTag},L,ue)},ie.prototype.dispatchURL=function(L,ue){var je=this;this.Ot.info(ut+" call");var Xe=this.oi.getFreeStream(q.OTHER),ft=this.appInfo.geoFencing;Xe.sendMessage(E.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,{geofencing_type:ft==null?void 0:ft.type,geofencings:ft==null?void 0:ft.list,dispatch_tag:this.stateCenter.customConfig.dispatchTag,addr_type:this.stateCenter.customConfig.ipStackMode===0?0:1},function(bt){je.Ot.info(ut+" suc "),L&&L(bt)},function(bt,Rt,Pt){je.Ot.info(ut+" fail"),ue&&ue(Pt||bt)})},ie.prototype.getAppConfig=function(L,ue,je,Xe,ft,bt){var Rt=this;return new Promise(function(Pt,Vt){Rt.Ot.info(Yt+" call");var $t={id_name:ue,config_key:L,token:je,mode_no:Rt.appInfo.mode,etag:ft,is_special_customer:bt!=null&&bt.isSpecial?1:0},ln=function(qn,Tn,Sn){if(Sn)return Rt.Ot.error(Yt+" fail "+JSON.stringify(Sn)),void Vt(Sn);if(qn.code===0){Rt.Ot.info(Yt+" suc");var _n=Rt.decodeConfigMessage(qn.data.data);Pt({code:0,data:_n,etag:qn.data.etag})}else Rt.Ot.error(Yt+" fail "+qn.code),Vt({code:qn.code})};Rt.oi.getFreeStream(q.OTHER).sendMessage(E.MSG_TYPE_GET_APPCONFIG_REQUEST,$t,ln,ln,null,{timeout:Xe})})},ie.prototype.decodeConfigMessage=function(L){return this.Dt.decodeConfigMessage(L)},ie.prototype.getSvrAddr=function(){var L=this;return new Promise(function(ue,je){L.Ot.info("".concat(Lt," call"));var Xe=L.oi.getFreeStream(q.OTHER),ft=L.appInfo.geoFencing;Xe.sendMessage(E.MSG_TYPE_GET_SVRADDR_REQUEST,{geofencing_type:ft==null?void 0:ft.type,geofencings:ft==null?void 0:ft.list,dispatch_tag:L.stateCenter.customConfig.dispatchTag,addr_type:L.stateCenter.customConfig.ipStackMode===0?0:2},function(bt){L.Ot.info("".concat(Lt," suc")),ue(bt)},function(bt,Rt,Pt){L.Ot.info("".concat(Lt," fail")),je(Pt||bt)})})},ie})();(function(ie){ie.Lazy="lazy",ie.Periodic="periodic"})(Gt||(Gt={}));var On=(function(){function ie(L,ue){this.oi=L,this.lt=ue,this.ri=null,this.ci=5,this.ui=10,this.hi=0,this.ai=0,this.fi=0,this.mode=Gt.Lazy}return Object.defineProperty(ie.prototype,"_i",{get:function(){return this.oi.getHbStream()},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.lt.logger},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"li",{get:function(){var L=this.lt.lastRecvMsgTime;return!!L&&Date.now()-L>1e3*this.ci},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"di",{get:function(){var L=this.fi;return!!L&&Date.now()-L>1e3*this.ui},enumerable:!1,configurable:!0}),ie.prototype.init=function(L){this.Ot.info("zn.nhb.ii call. "),L.data.logic_hb_interval>=1&&L.data.logic_hb_interval<=10&&(this.ci=L.data.logic_hb_interval),L.data.logic_hb_timeout>=3&&L.data.logic_hb_timeout<=30&&(this.ui=L.data.logic_hb_timeout),this.ai=0,this.hi=this.ui/this.ci,this.startHB()},ie.prototype.startHB=function(){var L=this;if(this._i){var ue=this.li;if(this.Ot.debug("zn.nhb.rs call "+ue),!ue&&this.fi&&(this.Ot.info(wn+" stop check."),this.fi=0),this.ri!==null){if(ue||this.mode===Gt.Periodic)return;clearTimeout(this.ri)}var je=this.ri=setTimeout(function(){L.ri===je&&(L.ri=null),L.li&&!L.fi&&(L.Ot.info(wn+" start check."),L.fi=Date.now()),L.di&&(L.Ot.warn(wn+" over max hb timeout. "),L.onHBTimeout&&L.onHBTimeout()),L.Ei()},1e3*this.ci)}},ie.prototype.Ei=function(){var L=this;if(this._i){this.Ot.debug(wn+" call "+this.ai++);var ue=new Date().getTime(),je=function(ft,bt,Rt){var Pt=new Date().getTime()-ue;if(L.Ot.debug(wn+" hb callback "+Pt),Rt&&(Rt==null?void 0:Rt.code)!==0)L.Ot.warn(wn+" fail "+JSON.stringify(Rt));else{if(L.fi&&(L.Ot.info(wn+" hb rsp to stop check."),L.fi=0),ft==null?void 0:ft.ntp_time){var Vt=ft.ntp_time,$t=typeof Vt=="number"?Vt:Vt.toNumber(),ln=new Date().getTime();L.lt.appInfo.env===0&&L.lt.updateNTP(ue,$t,ln)}L.ai=0}},Xe={ts:Date.now()};this._i.sendMessage(E.MSG_TYPE_HB_REQUEST,Xe,je,je,null)}},ie.prototype.onHBTimeout=function(){},ie.prototype.stop=function(){this.ri&&(clearTimeout(this.ri),this.ri=null),this.ai=0},ie})(),Xn=function(){return Xn=Object.assign||function(ie){for(var L,ue=1,je=arguments.length;ue<je;ue++)for(var Xe in L=arguments[ue])Object.prototype.hasOwnProperty.call(L,Xe)&&(ie[Xe]=L[Xe]);return ie},Xn.apply(this,arguments)},Zn=(function(){function ie(L,ue,je,Xe,ft,bt){this.Ot=L,this.pi=ue,this.oi=je,this.gi=Xe,this.lt=ft,this.Si=bt,this.connectState=G.DISCONNECT,this.lastConnectState=G.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.pcEmitState=-1,this.Ti=null,this.eventManager=new vt,this.Si&&(this.Si.isMsgCache=!1)}return Object.defineProperty(ie.prototype,"service",{get:function(){return this.pi},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"netPcStream",{get:function(){return this.Ti||this.createPcStream()},enumerable:!1,configurable:!0}),ie.prototype.createPcStream=function(){var L=this.oi.createStream(q.PC);return this.Ti=L,L.onPushEvent=this.onPushEvent.bind(this),L},ie.prototype.sendRequest=function(L,ue,je,Xe){var ft,bt,Rt,Pt,Vt,$t,ln=this;this.Ti||this.Ot.info(sr+" create pc ".concat(this.pi," ").concat(this.netPcStream.StreamID));var qn=L.payload;!((ft=this.Si)===null||ft===void 0)&&ft.encode&&(qn=Br(L.payload));var Tn={service_no:this.pi,ack:L.ack,payload:qn,wss_message_type:(Rt=(bt=this.Si)===null||bt===void 0?void 0:bt.messageType)!==null&&Rt!==void 0?Rt:ar.wssMessageType,wss_path:(Pt=this.Si)===null||Pt===void 0?void 0:Pt.path,wss_raw_query:(Vt=this.Si)===null||Vt===void 0?void 0:Vt.query,zegoconn_version:ar.connectVer,addr_type:this.lt.customConfig.ipStackMode===0?0:1};this.netPcStream.isConnect()||(this.Ot.info(sr+" pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(E.MSG_TYPE_PC_UPWARD_MESSAGE,Tn,function(){ln.Ot.info(sr+" suc"),je&&je()},function(Sn){ln.Ot.error(sr+" fail"),ue&&ue(Sn)},null,{isInSendMap:typeof L.isInSendMap=="boolean"&&L.isInSendMap,extras:Xe,isMsgCache:($t=this.Si)===null||$t===void 0?void 0:$t.isMsgCache})},ie.prototype.onPushEvent=function(L,ue,je){var Xe;switch(this.Ot.info(kn+" msgType: ".concat(L)),L){case E.MSG_TYPE_PC_ESTABLISHED:this.netPcStream.isFirst=!1,this.pcEstablished(ue,this.netPcStream.StreamID);break;case E.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case E.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.Ot.info(kn+" ".concat(this.pi," down ").concat((ue==null?void 0:ue.ts)&&ue.ts.toNumber&&ue.ts.toNumber()||ue.ts));var ft=ue.payload;!((Xe=this.Si)===null||Xe===void 0)&&Xe.encode&&(ft=ur(ue.payload)),this.eventManager.emit("downLoadMessage",ft,je);break;case E.MSG_TYPE_PUSH_EXCEPTION:this.Ot.info(kn+" ".concat(this.pi," exception ").concat(JSON.stringify(ue))),this.eventManager.emit("exception",ue,je)}},ie.prototype.on=function(L,ue){return this.eventManager.addEventHandler(L,ue)},ie.prototype.off=function(L,ue){this.eventManager.removeEventHandler(L,ue)},ie.prototype.pcEstablished=function(L,ue){this.Ot.info("zn.napr.pe call "+JSON.stringify(L)),this.setConnectState(G.CONNECTED);var je=be.MANUAL;this.lastConnectState===G.BROKEN&&this.connectState===G.CONNECTED&&(je=be.AUTO),this.stateChanged(G.CONNECTED,je,void 0,{proxy_link_sources:L==null?void 0:L.from,connect_stream:ue}),this.brokenTimer&&clearTimeout(this.brokenTimer)},ie.prototype.pcBroken=function(){var L=this;this.Ot.info("zn.napr.pb call"),this.setConnectState(G.BROKEN),this.stateChanged(G.BROKEN),this.brokenTimer=setTimeout(function(){L.stateChanged(G.DISCONNECT,Ie.TEMP,void 0,{code:Be})},1e3*this.gi)},ie.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},ie.prototype.Ci=function(L,ue,je){var Xe;this.Ot.info("zn.napr.cr"+" close pc ".concat(this.pi," ").concat(((Xe=this.Ti)===null||Xe===void 0?void 0:Xe.StreamID)||-1," ").concat(L," ").concat(this.connectState," ").concat(ue," ").concat(je||"")),this.connectState===G.DISCONNECT&&L!=="disconnected"||(this.Ti&&(this.Ti.closeStream(0,""),this.Ti.destroyed(),this.Ti=null),this.resetBrokenTimer(),L==="broken"?this.stateChanged(G.BROKEN,je,void 0,{code:ue}):L==="disconnected"&&this.stateChanged(G.DISCONNECT,void 0,void 0,{code:ue}),this.setConnectState(G.DISCONNECT))},ie.prototype.closePc=function(L,ue){this.connectState!==G.DISCONNECT&&this.Ci("broken",L,ue)},ie.prototype.closeRequest=function(){this.Ci("disconnected",0,Ie.CLOSE)},ie.prototype.setConnectState=function(L){this.connectState!==L&&(this.lastConnectState=this.connectState,this.connectState=L)},ie.prototype.reportEvent=function(L,ue){this.eventManager.emit(L,Xn({service_no:this.pi},ue))},ie.prototype.stateChanged=function(L,ue,je,Xe){this.Ot.info("zn.napr.sc ".concat(L," ").concat(ue," ").concat(JSON.stringify(je))),this.pcEmitState===L?this.Ot.info("zn.napr.sc same"):(this.pcEmitState=L,L===G.BROKEN?(this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent",Xe)):L===G.DISCONNECT?(this.eventManager.emit("disconnected",ue,{code:je==null?void 0:je.code}),this.reportEvent("pcDisconnectedEvent",Xe)):L===G.CONNECTED&&(this.eventManager.emit("connected",ue),this.reportEvent("pcConnectedEvent",Xe)))},ie})(),Sr=(function(){function ie(L,ue){this.oi=L,this.lt=ue,this.pcStreamRequests=[],this.pcEstablishTimeout=ar.pcEstablishTimeout}return Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.lt.logger},enumerable:!1,configurable:!0}),ie.prototype.getRequest=function(L,ue){var je=new Zn(this.Ot,L,this.oi,this.pcEstablishTimeout,this.lt,ue);return this.pcStreamRequests.push(je),je},ie.prototype.updateConnectState=function(L,ue,je){this.Ot.info("zn.naprm.ucs call "+L+" "+ue),this.pcStreamRequests.forEach(function(Xe){Xe.stateChanged(L,ue,je,{code:(je==null?void 0:je.code)||0})})},ie.prototype.closePCs=function(L,ue){this.pcStreamRequests.forEach(function(je){je.closePc(L,ue)})},ie.prototype.setEstablishTimeout=function(L){this.pcEstablishTimeout=L},ie})(),gr=(function(){function ie(L,ue){this.Ot=L,this.lt=ue,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.bi=1,this.mi=0,this.Oi=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90,this.h3ClosedTimes=[],this.retryIPMaxTimes=2}return ie.prototype.initLink=function(L){this.link=L},ie.prototype.startMaxTime=function(){var L=this;this.Ot.info(jn+" call"),this.maxTimer||(this.Ot.info(jn+" start max timer"),this.maxTimer=setTimeout(function(){L.Ot.warn(jn+" over max time ".concat(L.RETRY_MAX_TIME,"s, stop retry")),L.isOverTime=!0,L.link.destroySocket(k.NONE),L.stopMaxTime(),L.invalid(),L.onactive(!1,ti)},1e3*this.RETRY_MAX_TIME))},ie.prototype.stopMaxTime=function(){this.Ot.info("zn.rlh.sm.1 call"),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},ie.prototype.active=function(L,ue,je){var Xe=this;if(ue===void 0&&(ue=!1),je===void 0&&(je=!1),this.Ot.info(Rn+" call "+L+" "+ue+" "+je+" "+this.bi),this.lt.isDestroyed)return!1;if(this.retryTimer)return this.Ot.info(Rn+" has actived, ignore"),!1;var ft=this.lt.networkState==T.offline;if(ft){if(this.Ot.info(Rn+" check if really offline. "+this.mi),this.mi>=this.Oi)return this.Ot.warn(Rn+" network is broken, stop retry"),!1}else this.mi=0;if(this.link.isConnecting()&&!je)return this.Ot.info(Rn+" link is connecting, ignore"),!1;if(this.isOverTime)return this.Ot.info(Rn+" retry over time, stop retry"),!1;if(this.bi>this.retryIPMaxTimes)return this.invalid(),this.onRetryBeyondLimit(),!1;var bt=function(){Xe.Ot.info(Rn+" interval "+Xe.Ri),Xe.retryTimer=setTimeout(function(){ue||Xe.link.destroySocket(k.BROKEN),Xe.link.connectSocket(L,function(){Xe.Ot.info(Rn+" suc"),Xe.lt.networkState=T.online,Xe.stopMaxTime(),Xe.invalid(),Xe.onactive(!0)},function(){var Pt,Vt;if(((Vt=Xe.link.socketService)===null||Vt===void 0?void 0:Vt.type)===M.WebTransport&&Xe.lt.networkState===T.online&&(Xe.h3ClosedTimes.push(Date.now()),Xe.h3ClosedTimes.length===3)){if(Xe.h3ClosedTimes[2]-Xe.h3ClosedTimes[0]<=15e3)return Xe.h3ClosedTimes=[],Xe.Ot.info(nr+" reason:"+Je.ClosedTooOften+" error:Links break too often"),Bi(Xe.link.linkServerStorageKey,Xe.lt.env,Xe.lt.appID,((Pt={})[Xe.link.connectServer]={status:!1,time:Date.now()},Pt),!0),Xe.lt.enableHttp3=!1,!Xe.maxTimer&&Xe.startMaxTime(),void Xe.active(!1,!0);Xe.h3ClosedTimes.shift()}Xe.Ot.info(Rn+" fail"),!Xe.maxTimer&&Xe.startMaxTime(),Xe.active(!0,!1,!0)}),Xe.retryTimer&&clearTimeout(Xe.retryTimer),Xe.retryTimer=null,ft?Xe.mi++:Xe.bi++},ue?0:1e3*Xe.Ri)};if(this.bi==1)Qr().then(function(Pt){Xe.Ri=Math.floor(Pt*(1-Xe.RETRY_START_TIME_INTERVAL)+Xe.RETRY_START_TIME_INTERVAL),bt()}).catch(function(){Xe.Ri=.5*Xe.RETRY_START_TIME_INTERVAL,bt()});else{var Rt=Math.pow(2,Math.round(this.bi/this.RETRY_CONTINUE_COUNT+1));this.Ri=Rt>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:Rt,bt()}return!0},ie.prototype.onactive=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue]},ie.prototype.onRetryBeyondLimit=function(){},ie.prototype.init=function(L,ue,je,Xe){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,typeof L=="number"&&L<3600&&(this.RETRY_MAX_TIME=L),typeof ue=="number"&&(this.RETRY_START_TIME_INTERVAL=ue),typeof je=="number"&&(this.RETRY_CONTINUE_COUNT=je),typeof Xe=="number"&&(this.RETRY_MAX_TIME_INTERVAL=Xe)},ie.prototype.invalid=function(){this.Ot.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.bi=1,this.mi=0},ie})(),ir=(function(){function ie(){this.networkState=T.online,this.appInfo={appID:0,env:0,mode:ar.modeNo,model:ar.model,connVer:ar.connectVer},this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.byPassClientIP="",this.timeOffset=0,this.networkRTT=0,this.enableHttp3=!1,this.isDestroyed=!1,this.lastRecvMsgTime=0,this.customConfig={enableHttp3:!1,ipStackMode:1,probeByPassStrategy:0},this.linkIpStackDetection={IPv4:Y.unknown,IPv6:Y.unknown},this.isIpStackDetected=!1,this.currentIpStackType=fe.IPv4,this.ipList={ipv4:[],ipv6:[]},this.enableHttp3=Nt.isSupport()}return Object.defineProperty(ie.prototype,"appID",{get:function(){return this.appInfo.appID},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"env",{get:function(){return this.appInfo.env},enumerable:!1,configurable:!0}),ie.prototype.updateNTP=function(L,ue,je){if(!(L>je)){var Xe=je-L;this.timeOffset=Math.round((ue-L+(ue-je))/2);var ft=Math.round(ue+Xe/2);(!this.networkRTT||Xe<this.networkRTT)&&(this.networkRTT=Xe,this.ntpTimeInfo={performanceTime:Math.round(performance.now()),ntp:ft})}},ie})(),Ti=(function(){function ie(){this.level=1}return ie.prototype.setLogLevel=function(L){var ue;return this.level=(ue=eo[L])!==null&&ue!==void 0?ue:this.level,!0},ie.prototype.log=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue];if(!(this.level>1)){var je=L.join(" ");console.log(je)}},ie.prototype.debug=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue];if(!(this.level>0)){var je=L.join(" ");console.debug(je)}},ie.prototype.info=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue];if(!(this.level>1)){var je=L.join(" ");console.info(je)}},ie.prototype.warn=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue];if(!(this.level>2)){var je=L.join(" ");console.warn(je)}},ie.prototype.error=function(){for(var L=[],ue=0;ue<arguments.length;ue++)L[ue]=arguments[ue];if(!(this.level>3)){var je=L.join(" ");console.error(je)}},ie})(),eo={debug:0,info:1,warn:2,error:3,report:99,disable:100},_i=function(){return _i=Object.assign||function(ie){for(var L,ue=1,je=arguments.length;ue<je;ue++)for(var Xe in L=arguments[ue])Object.prototype.hasOwnProperty.call(L,Xe)&&(ie[Xe]=L[Xe]);return ie},_i.apply(this,arguments)},Vr=(function(){function ie(L,ue,je){this.Ot=L,this.oi=ue,this.pi=je}return Object.defineProperty(ie.prototype,"netHttpStream",{get:function(){return this.oi.getFreeStream(q.HTTP)},enumerable:!1,configurable:!0}),ie.prototype.sendRequest=function(L,ue,je,Xe,ft){var bt=this,Rt=L.disableLog,Pt={service_no:this.pi,ack:L.ack,headers:L.headers,body:Br(JSON.stringify(L.body)),id_name:L.idName,method_no:L.method_no,stick:L.stick,location:L.location,reduce_resp_header:L.reduceRspHeaders?1:0};this.netHttpStream.sendMessage(E.MSG_TYPE_HTTP_REQUEST,Pt,function(Vt){var $t=(Vt==null?void 0:Vt.headers).find(function(Tn){return(Tn==null?void 0:Tn.name)==="Content-Encoding"});if(($t==null?void 0:$t.val)==="gzip")!Rt&&bt.Ot.info(Jn+" gzip");else if(Vt.body){var ln=ur(Vt.body);Vt.body=ln}var qn=_i(_i({},Vt),{body:void 0});!Rt&&bt.Ot.info(Jn+" suc "+JSON.stringify(qn)),ue&&ue(Vt)},function(Vt,$t,ln){!Rt&&bt.Ot.error(Jn+" fail"),je&&je(ln||Vt)},function(Vt){!Rt&&bt.Ot.error(Jn+" ack"),Xe&&Xe(Vt)},ft)},ie.prototype.sendRequest2=function(L,ue,je,Xe,ft){var bt=this,Rt=L.format===1?Br(JSON.stringify(L.body)):L.body,Pt={ack:L.ack,body:Rt,id_name:L.idName,method:L.method,interface_id:L.interfaceID,token:L.token,reduce_resp_header:L.reduceRspHeaders?1:0};L.headers&&(Pt.headers=L.headers),L.resID&&(Pt.res_id=L.resID),L.urlParams&&(Pt.params=L.urlParams),L.mode&&(Pt.mode=L.mode),this.netHttpStream.sendMessage(E.MSG_TYPE_HTTP_REQUEST2,Pt,function(Vt,$t){var ln=(Vt==null?void 0:Vt.headers).find(function(Sn){return(Sn==null?void 0:Sn.name)==="Content-Encoding"});if(Vt.status_code===200){if((ln==null?void 0:ln.val)==="gzip")bt.Ot.info(Mr+" gzip");else if(Vt.body&&L.format===1)try{Tn=ur(Vt.body),Vt.body=Tn}catch(Sn){bt.Ot.info(Mr+" decode "+JSON.stringify(Sn))}var qn=_i(_i({},Vt),{body:void 0});bt.Ot.info(Mr+" suc "+JSON.stringify(qn)),ue&&ue(Vt,$t)}else{try{var Tn=ur(Vt.body);Vt.body=Tn}catch(Sn){bt.Ot.info(Mr+" status "+Vt.status_code+" "+JSON.stringify(Sn))}je&&je(Vt)}},function(Vt,$t,ln){bt.Ot.error(Mr+" fail"),je&&je(ln||Vt)},function(Vt){bt.Ot.error(Mr+" ack"),Xe&&Xe(Vt)},ft)},ie})(),li=(function(){function ie(L,ue,je){this.type=L,this.Ai=ue,this.gt=je,this.isFree=!1,this.isFirst=!0,this.timestamp=0,this.id=Date.now()}return Object.defineProperty(ie.prototype,"StreamID",{get:function(){return this.Ai},enumerable:!1,configurable:!0}),ie.prototype.Pi=function(){this.timestamp=Date.now()},ie.prototype.refresh=function(L){this.Ai=L,this.isFirst=!0,this.Pi()},ie.prototype.sendMessage=function(L,ue,je,Xe,ft,bt){var Rt=this;je===void 0&&(je=null),Xe===void 0&&(Xe=null),ft===void 0&&(ft=null),bt===void 0&&(bt={timeout:5e3,isInSendMap:!0}),this.isFree=!1,this.Pi();var Pt=this.Ai;this.gt.sendMessage(L,Pt,ue,this.isFirst,function(Vt,$t,ln){Rt.type!==q.PC&&(Rt.isFree=!0,Rt.Pi()),Rt.isFirst&&Pt===Rt.StreamID&&(Rt.isFirst=!1),je&&je(Vt,ln)},function(Vt,$t,ln){Rt.type!==q.PC&&(Rt.isFree=!0,Rt.Pi()),(ln==null?void 0:ln.code)===1100002?Rt.destroyed():Rt.isFirst&&Pt===Rt.StreamID&&(Rt.isFirst=!1),Xe&&Xe(Vt,$t,ln)},ft,bt,this.type)},ie.prototype.onPushEvent=function(L,ue,je){},ie.prototype.closeStream=function(L,ue){this.gt.sendMessage(E.MSG_TYPE_STREAM_CLOSED,this.Ai,{code:L,msg:ue},void 0,void 0,void 0,void 0,{isInSendMap:!1},this.type)},ie.prototype.destroyed=function(){var L,ue;((ue=(L=this.gt)===null||L===void 0?void 0:L.socketService)===null||ue===void 0?void 0:ue.type)===M.WebTransport&&this.gt.socketService.closeStream(this.Ai),this.onDestroyed()},ie.prototype.isConnect=function(){return this.gt.isConnect()},ie.prototype.onDestroyed=function(){},ie})(),di=function(ie,L,ue){if(ue||arguments.length===2)for(var je,Xe=0,ft=L.length;Xe<ft;Xe++)!je&&Xe in L||(je||(je=Array.prototype.slice.call(L,0,Xe)),je[Xe]=L[Xe]);return ie.concat(je||Array.prototype.slice.call(L))},Wr=(function(){function ie(L,ue){var je=this;this.gt=L,this.lt=ue,this.streamID=1,this.pcStreams=[],this.streams=[],this.gt.onSocketClose=function(){je.refreshAllStream()}}return Object.defineProperty(ie.prototype,"Ot",{get:function(){return this.lt.logger},enumerable:!1,configurable:!0}),ie.prototype.destroy=function(){this.clearStreams()},ie.prototype.createStream=function(L){var ue=this,je=this.getNextStreamID(),Xe=new li(L,je,this.gt);return L===q.PC?this.pcStreams.push(Xe):this.streams.push(Xe),Xe.onDestroyed=function(){L===q.PC?ue.pcStreams=ue.pcStreams.filter(function(ft){return ft.StreamID!==je}):ue.streams=ue.streams.filter(function(ft){return ft.StreamID!==je})},Xe},ie.prototype.getHbStream=function(){var L=this;if(this.hbStream)return this.hbStream;var ue=new li(q.OTHER,this.getNextStreamID(),this.gt);return ue.onDestroyed=function(){L.hbStream=void 0},this.hbStream=ue,ue},ie.prototype.getFreeStream=function(L){if(L!==q.PC){var ue=this.streams.find(function(je){return je.isFree&&je.type!==q.PC});if(ue)return ue.isFree=!1,ue}return this.createStream(L)},ie.prototype.onPushEvent=function(L,ue,je,Xe){var ft=this.pcStreams.find(function(bt){return bt.StreamID===L});ft&&ft.onPushEvent(ue,je,Xe)},ie.prototype.getNextStreamID=function(){return this.streamID=this.streamID+2,this.streamID},ie.prototype.refreshAllStream=function(){var L=this;this.Ot.info("zn.sm.ras call"),di(di(di([],this.streams,!0),this.pcStreams,!0),[this.hbStream],!1).forEach(function(ue){return ue==null?void 0:ue.refresh(L.getNextStreamID())})},ie.prototype.clearStreams=function(){this.streams=[],this.pcStreams=[],this.hbStream=void 0},ie})(),Wn=function(){return Wn=Object.assign||function(ie){for(var L,ue=1,je=arguments.length;ue<je;ue++)for(var Xe in L=arguments[ue])Object.prototype.hasOwnProperty.call(L,Xe)&&(ie[Xe]=L[Xe]);return ie},Wn.apply(this,arguments)},Ji=function(ie,L,ue){for(var je,Xe=0,ft=L.length;Xe<ft;Xe++)!je&&Xe in L||(je||(je=Array.prototype.slice.call(L,0,Xe)),je[Xe]=L[Xe]);return ie.concat(je||Array.prototype.slice.call(L))};function hi(ie,L){return L===void 0&&(L="setAppInfo"),Error("Failed to execute ".concat(ie," before ").concat(L,"."))}var Ii=(function(){function ie(L){var ue=this;this.proxyCtrl=L,this.Ii=null,this.connectServers=[],this.http3Servers=[],this.wssV6Servers=[],this.http3V6Servers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.linkMsgMaxInterval=90,this.connectedTime=0,this.connectid="",this.reportSeq=1,this.connectSeq=0,this.Ni=0,this.listenNetworkState=!0,this.defaultConnectServers=[],this.Di=0,this.lastLinkConnectState=0,this._t=function(je,Xe){ue.logger.warn("zn.zca.btws h333 back to ws. ".concat(je)),ue.$t(!0,{code:Te,msg:(Xe==null?void 0:Xe.message)||JSON.stringify(Xe)}),ue.yi()},this.Qt=function(je){var Xe=ue.stateCenter.ipList;ue.stateCenter.clientIP&&ue.wi(ue.stateCenter.clientIP),ue.stateCenter.byPassClientIP&&ue.wi(ue.stateCenter.byPassClientIP);var ft={linkConnectDetection:je};(Xe.ipv4.length>0||Xe.ipv6.length>0)&&(ft.ipList=Xe),ue.eventManager.emit("ipDetection",ft)},this.Ft=function(je,Xe){if(ue.linkConnectState=2,ue.zi(),ue.appInfo.env===0){var ft=ue.reportSeq++;ue.eventManager.emit("dispatchEvent",ft,"start"),ue.Mi().then(function(bt){var Rt,Pt,Vt=bt.servers,$t=bt.http3Servers,ln=bt.http3Domains,qn=bt.wssV6Servers,Tn=bt.http3V6Servers,Sn=bt.wssV6Domains,_n=bt.http3V6Domains,Gn=bt.domains.map(function(Jr){return Jr.host}),cr=ln.map(function(Jr){return Jr.host}),Ur=Sn.map(function(Jr){return Jr.host}),Hr=_n.map(function(Jr){return Jr.host});ue.http3Servers&&ue.http3Servers.length||(ue.http3Servers=$t,(Rt=ue.zegoLink)===null||Rt===void 0||Rt.setHttp3Servers($t,[])),ue.http3V6Servers&&ue.http3V6Servers.length||(ue.http3V6Servers=Tn,(Pt=ue.zegoLink)===null||Pt===void 0||Pt.setHttp3Servers([],Tn)),ue.eventManager.emit("dispatchEvent",ft,"end",{servers:Vt,domains:Gn,http3Servers:$t,http3Domains:cr,wssV6Domains:Ur,http3V6Domains:Hr}),Vt.length>0&&ue.eventManager.emit("dispatchResultUpdate",{servers:Vt,http3Servers:$t,domains:Gn,http3Domains:cr,wssV6Servers:qn,http3V6Servers:Tn})}).catch(function(bt){}),ue.Hi().then(function(bt){ue.eventManager.emit("svrAddrResultUpdate",{accesshub_domain:bt.accesshub_domain,logreport_domain:bt.logreport_domain,detaillog_domain:bt.detaillog_domain,geofencing_id:bt.geofencing_id,accesshub_v6_domain:bt.accesshub_v6_domain,http3_v6_domain:bt.http3_v6_domain,logreport_v6_domain:bt.logreport_v6_domain,detaillog_v6_domain:bt.detaillog_v6_domain})}).catch(function(bt){})}ue.eventManager.emit("connected"),ue.Ui(je,Xe)},this.Jt=function(){ue.logger.info(He+" call"),ue.linkConnectState=1},this.$t=function(je,Xe,ft){ue.logger.info("zn.zca.ode"+" ".concat(je," ").concat(JSON.stringify(Xe)));var bt=ue.linkConnectState;ue.linkConnectState=0,je?ue.Gi(Xe==null?void 0:Xe.code,Ie.TEMP):(bt===1&&ft&&ue.Ui(ft,Xe==null?void 0:Xe.code),bt!==0&&(ue.eventManager.emit("disconnected"),ue.netAgentPCRequestMgr.updateConnectState(G.DISCONNECT,Ie.CLOSE,Xe),ue.ki((Xe==null?void 0:Xe.code)||0)))},this.Wt=function(je,Xe,ft,bt){switch(Xe){case E.MSG_TYPE_REDIRECT:case E.MSG_TYPE_REDIRECT2:ue.Vi(ft);break;case E.MSG_TYPE_CLOSE_CONNECTION:ue.Bi(ft);break;case E.MSG_TYPE_PC_BROKEN:case E.MSG_TYPE_PC_ESTABLISHED:case E.MSG_TYPE_PC_DOWNWARD_MESSAGE:case E.MSG_TYPE_PUSH_EXCEPTION:ue.streamManager.onPushEvent(je,Xe,ft,bt);break;case E.MSG_TYPE_PUSH_APPCONFIG:ue.businessRequestMgr.decodeConfigMessage(ft.data)}},this.logger=new Ti,this.stateCenter=new ir,this.stateCenter.logger=this.logger,this.protobuf=new yt(this.stateCenter),this.eventManager=new vt,this.zegoLink=new Cn(this.protobuf,this.stateCenter,this.proxyCtrl),this.Yi(),this.streamManager=new Wr(this.zegoLink,this.stateCenter),this.businessRequestMgr=new Un(this.streamManager,this.protobuf,this.stateCenter),this.zegoLink.HBHandler=this.netHeartBeatHandler=new On(this.streamManager,this.stateCenter),this.netAgentPCRequestMgr=new Sr(this.streamManager,this.stateCenter),this.zegoLink.initEvent(this.Ft,this.$t,this.Jt,this.Wt,this._t,this.Qt),this.zegoLink.onUpdateMsgTimeChanged=function(je){ue.Li()},this.Li(),this.$i()}return ie.prototype.Yi=function(){var L=this;this.zegoLink.Lt=function(ue,je,Xe,ft,bt){if(L.Ni==0&&ue==0){var Rt=L.reportSeq++;L.Ni=Rt,L.eventManager.emit("onceConnectEvent",Rt,"start")}else if(L.Ni!=0&&ue==1){var Pt=Vn(je);L.eventManager.emit("onceConnectEvent",L.Ni,"end",{server:je,error:Xe,connect_type:Pt,h3_reason:ft,message:bt==null?void 0:bt.message}),L.Ni=0}}},Object.defineProperty(ie.prototype,"speed",{get:function(){return this.zegoLink.speed},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"isDestroy",{get:function(){return this.stateCenter.isDestroyed},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"xi",{get:function(){return this.stateCenter.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"connectIPStackType",{get:function(){return this.stateCenter.currentIpStackType},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"linkConnectState",{get:function(){return this.Di},set:function(L){this.lastLinkConnectState=this.Di,this.Di=L},enumerable:!1,configurable:!0}),Object.defineProperty(ie.prototype,"appInfo",{get:function(){return this.stateCenter.appInfo},enumerable:!1,configurable:!0}),ie.prototype.init=function(){if(this.isDestroy)throw Error("instance have destroyed, invalid call")},ie.prototype.unInit=function(){this.zegoLink.release()},ie.prototype.setAppInfo=function(L){var ue=Dt+" ".concat(JSON.stringify(L)," ; ");if(this.stateCenter.appID>0)this.logger.warn(Dt+" appInfo has exist, appID: ".concat(this.stateCenter.appID));else{if(L.appID<=0)throw Error("setAppInfo, invalid appID: ".concat(L.appID));this.stateCenter.appInfo=Wn(Wn({},this.stateCenter.appInfo),L),navigator&&(this.stateCenter.networkState=navigator.onLine?T.online:T.offline,ue+=" oline: ".concat(navigator.onLine)),L.env===0?this.ji():L.env===1&&this.qi(),this.logger.info(ue)}},ie.prototype.checkAndConnect=function(L){if(!this.stateCenter.appID)throw hi(L,"setAppInfo");if(this.connectServers.length<=0)throw hi(L,"setNetAgentDefaultServers or setDispatchConnectServers");if(this.isDestroy)throw Error("instance have destroyed, invalid call");this.retryLinkHandler||this.yi()},ie.prototype.setUserInfo=function(L){this.stateCenter.userId=L},ie.prototype.setSettingConfig=function(L){this.logger.info("zn.zca.ssc"+" ".concat(JSON.stringify(L))),L.enableHttp3!==void 0&&(this.stateCenter.customConfig.enableHttp3=L.enableHttp3,Nt.isSupport()),L.dispatchTag!==void 0&&(this.stateCenter.customConfig.dispatchTag=L.dispatchTag),L.ipStackMode!==void 0&&(this.stateCenter.customConfig.ipStackMode=L.ipStackMode),L.accesshubBypassConnectTime!==void 0&&(this.stateCenter.customConfig.accesshubBypassConnectTime=L.accesshubBypassConnectTime),L.probeByPassStrategy!==void 0&&(this.stateCenter.customConfig.probeByPassStrategy=L.probeByPassStrategy)},ie.prototype.setNetAgentDefaultServers=function(L,ue){ue===void 0&&(ue=[]),this.connectServers.length===0&&(this.connectServers=Ji([],L)),this.wssV6Servers.length===0&&ue.length!==0&&(this.wssV6Servers=Ji([],ue))},ie.prototype.setNetAgentSpecifiedServers=function(L){throw Error("not support")},ie.prototype.setBackupDomains=function(L){throw Error("not support")},ie.prototype.setDispatchConnectServers=function(L,ue,je,Xe){ue===void 0&&(ue=[]),je===void 0&&(je=[]),Xe===void 0&&(Xe=[]),L.length>0&&(this.connectServers=Ji([],L)),ue.length>0&&(this.http3Servers=Ji([],ue)),je.length>0&&(this.wssV6Servers=Ji([],je)),Xe.length>0&&(this.http3V6Servers=Ji([],Xe)),this.stateCenter.appID>0&&this.yi()},ie.prototype.startHttpRequest=function(L,ue,je,Xe,ft){var bt=this;if(this.checkAndConnect("startHttpRequest"),ft&&typeof(ft==null?void 0:ft.timeout)=="number"&&((ft==null?void 0:ft.timeout)<1e3||(ft==null?void 0:ft.timeout)>1e4))throw Error("timeout must between 1 and 10 second");var Rt=this.reportSeq++;this.eventManager.emit("requestEvent",Rt,"start"),this.isConnect()||(this.logger.info(qt+" link is not connect"),this.innerReconnect()),new Vr(this.logger,this.streamManager,L.service).sendRequest(L,function(Pt){bt.eventManager.emit("requestEvent",Rt,"end",{na_req_location:L.location,status_code:Pt.status_code,err_code:0}),ue&&ue(Pt)},function(Pt){bt.eventManager.emit("requestEvent",Rt,"end",{na_req_location:L.location,err_code:Pt.code||0}),je&&je(Pt)},Xe,ft)},ie.prototype.startHttpRequest2=function(L,ue,je,Xe,ft){var bt=this;this.checkAndConnect("startHttpRequest2");var Rt=this.reportSeq++;this.eventManager.emit("requestEvent",Rt,"start"),this.isConnect()||(this.logger.info(qt+" link is not connect"),this.innerReconnect()),new Vr(this.logger,this.streamManager).sendRequest2(L,function(Pt,Vt){bt.eventManager.emit("requestEvent",Rt,"end",{na_req_interface:L.interfaceID,status_code:Pt.status_code,err_code:0}),ue&&ue(Pt,Vt)},function(Pt){bt.eventManager.emit("requestEvent",Rt,"end",{na_req_interface:L.interfaceID,err_code:Pt.code||0}),je&&je(Pt)},Xe,ft)},ie.prototype.getAppConfigByAgent=function(L,ue,je,Xe,ft){if(this.checkAndConnect("getAppConfigByAgent"),!this.stateCenter.userId)throw hi("getAppConfigByAgent","setUserInfo");return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.innerReconnect()),this.Fi(L,this.stateCenter.userId,ue,je,Xe,ft)},ie.prototype.getPCRequest=function(L,ue){var je=this;if(!this.stateCenter.appInfo)throw hi("getPCRequest");var Xe=this.netAgentPCRequestMgr.getRequest(L,ue);return Xe.on("disconnected",function(ft){je.logger.warn("zn.zca.gpr "+L+" disconnect "+ft),ft===Ie.TEMP&&(je.Gi(Be),je.Ji())}),Xe.on("connectStart",function(){je.innerReconnect()}),Xe},ie.prototype.connectUa=function(){this.checkAndConnect("connectUa"),this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.Wi(!0))},ie.prototype.destroyConnect=function(L){this.logger.info("zn.zca.dc.0 call"),this.Qi(L)},ie.prototype.destroy=function(){this.logger.info("zn.zca.dy.0 call"),this.destroyConnect(this.linkConnectState===1?dt:void 0),this.Ii&&clearTimeout(this.Ii),this.retryLinkHandler&&this.retryLinkHandler.invalid(),this.retryLinkHandler&&this.retryLinkHandler.stopMaxTime(),this.zegoLink.onUpdateMsgTimeChanged=void 0,this.stateCenter.isDestroyed=!0,this.streamManager.destroy(),this.zegoLink.release()},ie.prototype.isConnect=function(){return this.zegoLink.isConnect()},ie.prototype.isDisConnect=function(){return this.zegoLink.isDisConnect()},ie.prototype.on=function(L,ue){return this.logger.debug("zn.zca.o.0 "+L),!!this.eventManager.addEventHandler(L,ue)},ie.prototype.off=function(L,ue){this.logger.debug("zn.zca.o.1 "+L),this.eventManager.removeEventHandler(L,ue)},ie.prototype.setLogger=function(L){this.logger=L,this.stateCenter.logger=L},ie.prototype.setAccess=function(L){this.stateCenter.useNetAgent=L},ie.prototype.getVersion=function(){return"1.2.10"},ie.prototype.reconnectUA=function(){this.retryLinkHandler&&(this.retryLinkHandler.startMaxTime(),this.Gi(),this.Wi(!1,Ve.detail))},ie.prototype.$i=function(){var L=this;this.netHeartBeatHandler.onHBTimeout=function(){L.eventManager.emit("heartBeatTimeout")}},ie.prototype.ji=function(){var L=this;this.listenNetworkState&&(window.addEventListener("offline",function(){L.Ki()}),window.addEventListener("online",function(){L.Zi()}))},ie.prototype.qi=function(){var L=this;wx.onNetworkStatusChange(function(ue){ue.isConnected?L.Zi():L.Ki()})},ie.prototype.Zi=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=T.online,this.xi&&this.Xi()},ie.prototype.Ki=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=T.offline,this.xi&&this.tn()},ie.prototype.Li=function(){var L=this;this.stateCenter.useNetAgent&&(this.Ii&&clearTimeout(this.Ii),this.Ii=setTimeout(function(){L.logger.info("zn.zca.clm interval: "+L.linkMsgMaxInterval+" ; start time:"+L.zegoLink.updatedMsgTime),L.Qi($e)},1e3*this.linkMsgMaxInterval))},ie.prototype.yi=function(){var L=this;this.connectServers.length<=0?this.logger.error(He+" #### not server url"):(this.zegoLink.setServers(this.connectServers,this.http3Servers,this.wssV6Servers,this.http3V6Servers),this.retryLinkHandler||(this.retryLinkHandler=new gr(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(ue,je){je===ti&&(L.eventManager.emit("disconnected",je),L.ki((je==null?void 0:je.code)||0),L.netAgentPCRequestMgr.updateConnectState(G.DISCONNECT,Ie.TIMEOUT,je))},this.retryLinkHandler.onRetryBeyondLimit=function(){L.Wi(!0)},this.Wi(!0))},ie.prototype.Wi=function(L,ue){ue===void 0&&(ue=Ve.single),this.logger.info("zn.cna.cbd call"),this.zegoLink.releaseSocketDetectTask(),this.resetIPDetection();var je=this.getIpConnectRule();this.logger.info("zn.cna.cbd rules "+JSON.stringify(je)),this.stateCenter.retryLevel=ue,this.zegoLink.setIpStrategy(je),this.Ji(!1,L)},ie.prototype.resetIPDetection=function(){this.stateCenter.linkIpStackDetection={IPv4:Y.unknown,IPv6:Y.unknown},this.stateCenter.ipList={ipv4:[],ipv6:[]},this.stateCenter.clientIP="",this.stateCenter.byPassClientIP="",this.stateCenter.isIpStackDetected=!1,this.zegoLink.Nt=re.noProbe,this.zegoLink.removeSocketServiceEvent()},ie.prototype.wi=function(L){var ue=(function(bt){return(function(Rt){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(Rt)})(bt)?fe.IPv4:(function(Rt){var Pt=Rt.trim().replace(/^$$|$$$/g,"");return/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(:[0-9a-fA-F]{1,4}){1,7}|[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){1,7}:|::([0-9a-fA-F]{1,4}:){0,6}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:)$/.test(Pt)})(bt)?fe.IPv6:-1})(L),je=this.stateCenter.ipList,Xe=je.ipv4,ft=je.ipv6;ue===fe.IPv4?!Xe.includes(L)&&Xe.push(L):ue===fe.IPv6&&!ft.includes(L)&&ft.push(L)},ie.prototype.Qi=function(L){var ue;this.netHeartBeatHandler&&this.netHeartBeatHandler.stop(),(ue=this.retryLinkHandler)===null||ue===void 0||ue.invalid(),this.zegoLink&&this.zegoLink.destroySocket(k.DISCONNECT,L)},ie.prototype.zi=function(){var L=this,ue=new Date().getTime(),je=function(Xe,ft,bt){var Rt,Pt;if(bt)return L.logger.info(J+" fail "+JSON.stringify(bt)),void(((Pt=L.zegoLink.socketService)===null||Pt===void 0?void 0:Pt.type)===M.WebTransport&&L.stateCenter.networkState===T.online&&(L.logger.info(nr+" reason:"+Je.GetConfigFailed+" error: get config error "),L.stateCenter.enableHttp3=!1,Bi(L.zegoLink.linkServerStorageKey,L.stateCenter.env,L.stateCenter.appID,((Rt={})[L.zegoLink.connectServer]={status:!1,time:Date.now()},Rt),!0),L._t(Je.GetConfigFailed,"get config error")));Xe.code===0?(L.logger.info(J+" suc "+JSON.stringify(Xe)),L.nn(Xe,ue)):L.logger.info(J+" fail "+JSON.stringify(Xe))};this.businessRequestMgr.getConfig(je,je)},ie.prototype.nn=function(L,ue){var je,Xe;if(this.netHeartBeatHandler.init(L),this.netAgentPCRequestMgr.setEstablishTimeout(L.data.pc_establish_timeout),!((je=L==null?void 0:L.data)===null||je===void 0)&&je.client_outer_ip&&(this.stateCenter.clientIP=L.data.client_outer_ip,this.stateCenter.ipList.ipv4.length===0&&this.stateCenter.ipList.ipv6.length===0&&(this.stateCenter.clientIP&&this.wi(this.stateCenter.clientIP),this.eventManager.emit("ipDetection",{ipList:this.stateCenter.ipList}))),(Xe=L==null?void 0:L.data)===null||Xe===void 0?void 0:Xe.ntp_time){var ft=L.data.ntp_time,bt=typeof ft=="number"?ft:ft.toNumber(),Rt=new Date().getTime();this.stateCenter.appInfo.env===0&&this.stateCenter.updateNTP(ue,bt,Rt)}this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset,geofencingID:L.data.geofencing_id})},ie.prototype.Mi=function(){var L=this;return new Promise(function(ue,je){L.businessRequestMgr.dispatchURL(function(Xe){var ft,bt=Xe.data,Rt=bt.wss_groups,Pt=bt.http3_groups,Vt=bt.wss_v6_groups,$t=bt.http3_v6_groups;L.logger.info("".concat(ut," wss_groups: ").concat(JSON.stringify(Rt)," http3_groups:").concat(JSON.stringify(Pt)," wss_v6_groups:").concat(JSON.stringify(Vt)," http3_v6_groups:").concat(JSON.stringify($t)));var ln=Rt.some(function($o){return $o.host.includes("geo")}),qn=Pt.some(function($o){return $o.host.includes("geo")}),Tn=Vt==null?void 0:Vt.some(function($o){return $o.host.includes("geo")}),Sn=$t==null?void 0:$t.some(function($o){return $o.host.includes("geo")}),_n=(ft=L.appInfo)===null||ft===void 0?void 0:ft.geoFencing,Gn=_n||ln?Rt:L.en(Rt),cr=_n||qn?Pt:L.en(Pt),Ur=_n||Tn?Vt:L.en(Vt),Hr=_n||Sn?$t:L.en($t),Jr=L.sn(Gn),Er=L.sn(cr,"https"),Kr=L.sn(Ur),Go=L.sn(Hr,"https");ue({servers:Jr,http3Servers:Er,wssV6Servers:Kr,http3V6Servers:Go,domains:Gn,http3Domains:cr,wssV6Domains:Ur,http3V6Domains:Hr})},function(Xe){je(Xe)})})},ie.prototype.Hi=function(){var L=this;return new Promise(function(ue,je){L.businessRequestMgr.getSvrAddr().then(function(Xe){var ft=Xe.code,bt=Xe.msg,Rt=Xe.data;if(ft===0){var Pt=Rt.accesshub_domain,Vt=Rt.logreport_domain,$t=Rt.detaillog_domain,ln=Rt.accesshub_v6_domain,qn=Rt.http3_v6_domain,Tn=Rt.logreport_v6_domain,Sn=Rt.detaillog_v6_domain,_n=Rt.geofencing_id;L.logger.info("".concat(Lt," domains: ").concat(Pt," ").concat(Vt," ").concat($t," ").concat(ln," ").concat(qn," ").concat(Tn," ").concat(Sn)),ue({accesshub_domain:Pt,logreport_domain:Vt,detaillog_domain:$t,geofencing_id:_n,accesshub_v6_domain:ln,http3_v6_domain:qn,logreport_v6_domain:Tn,detaillog_v6_domain:Sn})}else je({code:ft,msg:bt})}).catch(function(Xe){je(Xe)})})},ie.prototype.sn=function(L,ue){return ue===void 0&&(ue=ar.scheme),Array.isArray(L)&&L.length>0?L.map(function(je){return ue+"://"+je.host+"/"+ar.location}):[]},ie.prototype.en=function(L){var ue=Ji([],L);return ue.filter(function(je){return!!je.host})},ie.prototype.Fi=function(L,ue,je,Xe,ft,bt){var Rt=this;return new Promise(function(Pt,Vt){typeof ue=="string"&&typeof je=="string"?Rt.businessRequestMgr.getAppConfig(L,ue,je,Xe,ft,bt).then(function($t){Pt(Wn(Wn({},$t),{retryCount:Rt.getAppConfigFailCount}))}).catch(function($t){if(Rt.logger.error(Le+" "+JSON.stringify($t)),pe.indexOf($t.code)>-1){var ln=Rt.getAppConfigFailCount;return Rt.getAppConfigFailCount=0,void Vt(Wn(Wn({},$t),{retryCount:ln}))}Rt.getAppConfigFailCount++,($t.code===20008||$t.code===1100002)&&Rt.getAppConfigFailCount<3?Rt.Fi(L,ue,je,ft).then(function(qn){return Pt(qn)}).catch(function(qn){return Vt(qn)}):(ln=Rt.getAppConfigFailCount,Rt.getAppConfigFailCount=0,Vt(Wn(Wn({},$t),{retryCount:ln})))}):Rt.logger.error(Le+" userID or token must be string")})},ie.prototype.ki=function(L){var ue=new Date().getTime()-this.connectedTime;this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:ue,server:this.zegoLink.connectServer,connectid:this.connectid,error:L})},ie.prototype.Vi=function(L){var ue=L.wss_groups,je=L.http3_groups,Xe=L.wss_v6_groups,ft=L.http3_v6_groups;this.logger.info("".concat(Ue," wss_groups: ").concat(JSON.stringify(ue)," http3_groups:").concat(JSON.stringify(je)," wss_v6_groups:").concat(JSON.stringify(Xe)," http3_v6_groups:").concat(JSON.stringify(ft)));var bt=this.sn(ue),Rt=this.sn(je,"https"),Pt=this.sn(Xe),Vt=this.sn(ft,"https");bt&&Array.isArray(bt)&&bt.length>0?(this.Gi(1100010),this.stateCenter.specified&&(this.logger.info(Ue+" specified"),bt=this.specifiedServers),this.zegoLink.setServers(bt,Rt,Pt,Vt),this.Ji(!1,!0)):this.logger.warn(Ue+" wss_groups null")},ie.prototype.Bi=function(L){var ue=this;switch(this.logger.info(_t+" ".concat(L.reason," ").concat(L.msg," ").concat(L.action)),L.action){case Ae.ACTION_DISPATCH:var je=this.reportSeq++;this.eventManager.emit("dispatchEvent",je,"start"),this.Mi().then(function(Xe){var ft=Xe.servers,bt=Xe.domains,Rt=Xe.http3Servers,Pt=Xe.http3Domains,Vt=Xe.wssV6Servers,$t=Xe.http3V6Servers,ln=Xe.wssV6Domains,qn=Xe.http3V6Domains;if(ue.eventManager.emit("dispatchEvent",je,"end",{domains:bt.map(function(Sn){return Sn.host}),http3Domains:Pt.map(function(Sn){return Sn.host}),wssV6Domains:ln.map(function(Sn){return Sn.host}),http3V6Domains:qn.map(function(Sn){return Sn.host}),reason:"ConnectClosed"}),Array.isArray(ft)&&ft.length>0){ue.eventManager.emit("dispatchResultUpdate",{servers:ft,http3Servers:Rt,domains:bt.map(function(Sn){return Sn.host}),http3Domains:Pt.map(function(Sn){return Sn.host}),wssV6Servers:Vt,http3V6Servers:$t});var Tn=ue.stateCenter.specified?ue.specifiedServers:ft;ue.Gi(L.reason),ue.zegoLink.setServers(Tn,Rt,Vt,$t),ue.Ji(!1,!0)}}).catch(function(Xe){ue.logger.info(_t+" dispatch fail")});break;case Ae.ACTION_IDLE:L.reason===20020&&(this.Gi(L.reason),this.Ji(!1));break;case Ae.ACTION_RETRY:this.Gi(L.reason),this.Ji(!1);break;case Ae.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(L.reason),this.eventManager.emit("broken",qe.CLOSE),this.Ji()}},ie.prototype.Xi=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.Wi(!1,Ve.detail))},ie.prototype.tn=function(){this.Gi(1100003),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(0))},ie.prototype.innerReconnect=function(){this.logger.info(st+" call ".concat(!!this.retryLinkHandler)),this.isDestroy?this.logger.info(st+" destroy"):this.retryLinkHandler&&(this.retryLinkHandler.startMaxTime(),this.Ji())},ie.prototype.Ji=function(L,ue){var je;!((je=this.retryLinkHandler)===null||je===void 0)&&je.active(L,ue)&&this.rn()},ie.prototype.rn=function(){if(this.connectSeq===0){var L=this.reportSeq++;this.connectSeq=L,this.eventManager.emit("connectedEvent",L,"start")}},ie.prototype.Ui=function(L,ue){var je,Xe=this;this.connectedTime=new Date().getTime(),(function(ft,bt,Rt,Pt){return new(Rt||(Rt=Promise))(function(Vt,$t){function ln(Sn){try{Tn(Pt.next(Sn))}catch(_n){$t(_n)}}function qn(Sn){try{Tn(Pt.throw(Sn))}catch(_n){$t(_n)}}function Tn(Sn){var _n;Sn.done?Vt(Sn.value):(_n=Sn.value,_n instanceof Rt?_n:new Rt(function(Gn){Gn(_n)})).then(ln,qn)}Tn((Pt=Pt.apply(ft,[])).next())})})(void 0,void 0,void 0,function(){var ft,bt,Rt,Pt,Vt,$t;return(function(ln,qn){var Tn,Sn,_n,Gn,cr={label:0,sent:function(){if(1&_n[0])throw _n[1];return _n[1]},trys:[],ops:[]};return Gn={next:Ur(0),throw:Ur(1),return:Ur(2)},typeof Symbol=="function"&&(Gn[Symbol.iterator]=function(){return this}),Gn;function Ur(Hr){return function(Jr){return(function(Er){if(Tn)throw new TypeError("Generator is already executing.");for(;Gn&&(Gn=0,Er[0]&&(cr=0)),cr;)try{if(Tn=1,Sn&&(_n=2&Er[0]?Sn.return:Er[0]?Sn.throw||((_n=Sn.return)&&_n.call(Sn),0):Sn.next)&&!(_n=_n.call(Sn,Er[1])).done)return _n;switch(Sn=0,_n&&(Er=[2&Er[0],_n.value]),Er[0]){case 0:case 1:_n=Er;break;case 4:return cr.label++,{value:Er[1],done:!1};case 5:cr.label++,Sn=Er[1],Er=[0];continue;case 7:Er=cr.ops.pop(),cr.trys.pop();continue;default:if(!((_n=(_n=cr.trys).length>0&&_n[_n.length-1])||Er[0]!==6&&Er[0]!==2)){cr=0;continue}if(Er[0]===3&&(!_n||Er[1]>_n[0]&&Er[1]<_n[3])){cr.label=Er[1];break}if(Er[0]===6&&cr.label<_n[1]){cr.label=_n[1],_n=Er;break}if(_n&&cr.label<_n[2]){cr.label=_n[2],cr.ops.push(Er);break}_n[2]&&cr.ops.pop(),cr.trys.pop();continue}Er=qn.call(ln,cr)}catch(Kr){Er=[6,Kr],Sn=0}finally{Tn=_n=0}if(5&Er[0])throw Er[1];return{value:Er[0]?Er[1]:void 0,done:!0}})([Hr,Jr])}}})(this,function(ln){switch(ln.label){case 0:ft="0123456789".split(""),bt=[],je=ft.length,Rt=0,ln.label=1;case 1:return Rt<16?[4,Qr()]:[3,4];case 2:Pt=ln.sent(),bt[Rt]=ft[0|Pt*je],ln.label=3;case 3:return Rt++,[3,1];case 4:return[3,9];case 5:Vt=void 0,bt[8]=bt[13]=bt[18]=bt[23]="-",bt[14]="4",Rt=0,ln.label=6;case 6:return Rt<36?bt[Rt]?[3,8]:[4,Qr()]:[3,9];case 7:$t=ln.sent(),Vt=0|16*$t,bt[Rt]=ft[Rt==19?3&Vt|8:Vt],ln.label=8;case 8:return Rt++,[3,6];case 9:return[2,bt.join("")]}})}).then(function(ft){Xe.connectid=ft;var bt=Vn(L[0]),Rt=Vn(Xe.zegoLink.connectServer);Xe.eventManager.emit("connectedEvent",Xe.connectSeq,"end",{first_connect_type:bt,connect_type:Rt,count:L.length,connectid:Xe.connectid,server:Xe.zegoLink.connectServer,error:ue}),Xe.connectSeq=0})},ie.prototype.Gi=function(L,ue){L===void 0&&(L=0),this.logger.info("zn.zca.dc.1 call"),this.netAgentPCRequestMgr.closePCs(L,ue),this.zegoLink.closeSocket(),this.linkConnectState=0,this.eventManager.emit("broken"),this.lastLinkConnectState===2&&this.linkConnectState===0&&this.ki(L)},ie.prototype.getNetworkTimeInfo=function(){var L=Date.now()+this.stateCenter.timeOffset,ue=Math.round(this.stateCenter.networkRTT/2),je=this.stateCenter.ntpTimeInfo;if(je){var Xe=performance.now()-je.performanceTime;L=Math.round(je.ntp+Xe)}return{timestamp:L,maxDeviation:ue}},ie.prototype.setHeartBeatMode=function(L){var ue=this.netHeartBeatHandler.mode;ue!==L&&(this.logger.info("zn.shbm"+" change mode from ".concat(ue," to ").concat(L)),this.netHeartBeatHandler.mode=L)},ie.prototype.setLogLevel=function(L){return this.logger.setLogLevel(L)},ie.prototype.getIpConnectRule=function(){var L,ue,je=[];if(this.proxyCtrl)je.push(fe.IPv4);else{var Xe=((L=this.connectServers)===null||L===void 0?void 0:L.length)!==0,ft=((ue=this.wssV6Servers)===null||ue===void 0?void 0:ue.length)!==0;switch(this.stateCenter.customConfig.ipStackMode){case 0:default:Xe&&je.push(fe.IPv4);break;case 1:Xe&&je.push(fe.IPv4),ft&&je.push(fe.IPv6);break;case 2:ft&&je.push(fe.IPv6),Xe&&je.push(fe.IPv4)}je.length===0&&je.push(fe.IPv4)}return je},ie})()})(),tt})(),ot.exports=I(Z(6994),Z(3788))},3052:function(ot,Re,Z){Z.d(Re,{AF:function(){return K},D2:function(){return ne},GG:function(){return oe},I2:function(){return I},OQ:function(){return Ne},UV:function(){return tt},XV:function(){return fe},Xs:function(){return Y},b$:function(){return Pe},t0:function(){return Qe},t3:function(){return ke},zD:function(){return re}});var I,P,Pe="NORMAL";(function(M){M[M.SWITCH_ONE=1]="SWITCH_ONE",M[M.SWITCH_TWO=2]="SWITCH_TWO"})(I||(I={})),(function(M){M[M.ZegoGeoFenceTypeNone=0]="ZegoGeoFenceTypeNone",M[M.ZegoGeoFenceTypeInclude=1]="ZegoGeoFenceTypeInclude",M[M.ZegoGeoFenceTypeExclude=2]="ZegoGeoFenceTypeExclude"})(P||(P={}));var ke,ce,Ne={ROOM_SESSION_ID_ERR:1000000152};(function(M){M[M.TT_NONE=0]="TT_NONE",M[M.TT_PC=1]="TT_PC",M[M.TT_IOS=2]="TT_IOS",M[M.TT_ANDROID=3]="TT_ANDROID",M[M.TT_MAC=4]="TT_MAC",M[M.TT_LINUX=5]="TT_LINUX",M[M.TT_WEB=6]="TT_WEB",M[M.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",M[M.TT_UNKNOWN=32]="TT_UNKNOWN"})(ke||(ke={})),(function(M){M[M.disconnected=0]="disconnected",M[M.connecting=1]="connecting",M[M.connected=2]="connected"})(ce||(ce={}));var tt,Qe,ne,oe;(function(M){M[M.logout=0]="logout",M[M.trylogin=1]="trylogin",M[M.login=2]="login"})(tt||(tt={})),(function(M){M[M.I=0]="I",M[M.H=10]="H",M[M.M=100]="M",M[M.L=1e3]="L"})(Qe||(Qe={})),(function(M){M[M.offline=0]="offline",M[M.online=1]="online"})(ne||(ne={})),(function(M){M[M.NT_NONE=0]="NT_NONE",M[M.NT_LINE=1]="NT_LINE",M[M.NT_WIFI=2]="NT_WIFI",M[M.NT_2G=3]="NT_2G",M[M.NT_3G=4]="NT_3G",M[M.NT_4G=5]="NT_4G",M[M.NT_UNKNOWN=32]="NT_UNKNOWN"})(oe||(oe={}));var fe=3e3,Y=3e4,re=1e5,K={MESSAGE:""}},3509:function(ot,Re,Z){Z.d(Re,{AudioMix:function(){return De}});var I="zc.pe.0",P="zc.pe.1",Pe="zc.aep",ke="zc.sev",ce="zc.sma.0",Ne="zc.sma.1",tt="zc.mb",Qe="zc.smb",ne="zc.p.0.pe.0",oe="zc.p.0.pe.1",fe="zc.p.0.re",Y="zc.p.0.se",re="zc.p.0.sma.0",K="zc.smav",M="zc.p.0.mb",F="zc.p.0.smav",T=Z(8627),_=Z(5794),E=Z(6493),w=(function(){function Ie(be,qe,Ve,pe,j){this.an=be,this.ac=qe,this.localStream=Ve,this.destination=pe,this.rtcViewer=j,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return Ie.prototype.playEffect=function(be,qe,Ve,pe,j){var B=this;this.isMixAudio!==!0?this.audioBuffer?(this.startOffset=be||0,this.loop=qe||!1,this.replace=Ve||!1,this.effectEndedCallBack=j,this.mixEffect(this.audioBuffer,function(){B.buffSource.loop=!!qe,be?B.buffSource.start(0,be/1e3):B.buffSource.start(0),(0,E.HR)()&&(0,_.r)(),B.startTimes=Date.now(),B.effectEndedListener=B.effectEndedHandler.bind(B),B.buffSource.addEventListener("ended",B.effectEndedListener),pe&&pe()})):this.an.error("amu.pe.1 no audio buffer found"):this.an.warn("amu.pe.1 audio is mixing")},Ie.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},Ie.prototype.playRealTimeEffect=function(be){var qe=this;this.mixEffect(be,function(){qe.buffSource&&qe.buffSource.start(0),qe.buffSource&&qe.buffSource.addEventListener("ended",function(){qe.audioBufferList.shift(),qe.audioBufferList.length>0&&qe.isMixAudio&&qe.playRealTimeEffect(qe.audioBufferList[0])})})},Ie.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.an.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},Ie.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.an.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},Ie.prototype.mixEffect=function(be,qe){this.localStream?(this.gainNode=this.ac.createGain(),this.delayNode=this.ac.createDelay(1),this.delayNode.delayTime.value=0,this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=be,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&qe()):this.an.error("amu.me.0 localStream can not be found")},Ie.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var be=this.destination.stream.getAudioTracks()[0],qe=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==be&&(this.micTrack?qe.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.an.warn("amu.rt.0 origin track not fonud"),qe.includes(be)||(this.localStream.addTrack(be),this.rtcViewer&&this.rtcViewer.setAudio(be))),this.isMixAudio=!0,!0},Ie.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},Ie.prototype.stopMixingAudio=function(be){return be===void 0&&(be=!1),this.paused?(this.an.info("amu.sma.1 audioEffect is paused"),!be&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.audioBufferList=[],!be&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.an.error("amu.sma.1 localStream can not be found"),!1):(this.an.warn("amu.sma.1 no mixing audio found"),!0)},Ie.prototype.getProcess=function(){var be=Date.now();return this.paused&&(be=this.pauseTimes),(be-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},Ie.prototype.seekTo=function(be){be===void 0&&(be=0),this.startOffset=be,this.paused?this.resumeOffset=be:(this.stopMixingAudio(!0),this.playEffect(be,this.loop,this.replace,void 0,this.effectEndedCallBack))},Ie.prototype.mixingBuffer=function(be,qe){var Ve=this;this.isMixAudio!==!0||this.audioBufferList.length!=0||this.isMixingBuffer!=0?(this.ac.resume(),this.ac.decodeAudioData(be,function(pe){Ve.audioBufferList.push(pe),Ve.audioBufferList.length==1&&Ve.playRealTimeEffect(Ve.audioBufferList[0]),Ve.isMixingBuffer=!0,qe&&qe()},function(pe){Ve.an.error("amu.mb.0 "+pe),qe&&qe({code:T.S6t.code,message:T.S6t.message+" "+pe})})):this.an.error("amu.mb.0 audio is mixing")},Ie.prototype.setMixingAudioVolume=function(be){return this.gainNode?(console.error("ktv setVolume",be),this.gainNode.gain.value=be,!0):(this.an.error("amu.sma.2 no mixing audio found"),!1)},Ie.prototype.setDelay=function(be){return this.delayNode?(this.an.info("amu.sma.2 set delay: "+be),this.delayNode.delayTime.value=be,!0):(this.an.warn("amu.sma.2 no mixing audio found"),!1)},Ie})(),R=(function(){function Ie(be,qe,Ve,pe,j,B,nt){nt===void 0&&(nt=1);var he=this;this.an=be,this.acMgr=qe,this.localStream=Ve,this.browser=pe,this.destination=j,this.rtcViewer=B,this.volumeFactor=nt,this.isMixAudio=!1,this.maxDelay=1,this.audioCurrentTimer=null,this.audioResumedTimer=null,this.audioEl=null,this.eventHandler={volumechange:function(it){var wt=it.target;wt&&he.audioNode&&he.isMediaElSrc&&(wt.muted||wt.paused?(he.an.info("amu.sma.0 ".concat(he.id," ").concat(it==null?void 0:it.type,": audio muted disconnect")),he.audioNode.disconnect()):(he.an.info("amu.sma.0 ".concat(he.id," ").concat(it==null?void 0:it.type,": audio is connected")),he.audioNode.connect(he.gainNode)))},canplay:function(it){var wt=it.target;wt&&!he.isMediaElSrc&&he.isMixAudio&&(he.an.info("amu.sma.1 ".concat(he.id," ").concat(wt.id," canplay, remixing audio")),he.stopMixingAudio(),he.startMixingAudio(wt))}},this.isMediaElSrc=!1,this.volume=1,this.delay=0,this.id=Date.now()%1e5+Math.floor(10*Math.random()),be.info("amu.sma.0 ".concat(this.id," init audio mix"))}return Object.defineProperty(Ie.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Ie.prototype.startMixingAudio=function(be){if(this.isMixAudio)return this.an.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.an.error("amu.sma.0 localStream can not be found"),!1;var qe;be.captureStream=be.captureStream||be.mozCaptureStream||be.webkitCaptureStream,this.isMixAudio=!0,this.gainNode||(this.gainNode=this.ac.createGain(),this.setMixingAudioVolume()),this.delayNode||(this.delayNode=this.ac.createDelay(this.maxDelay),this.an.info("amu.sma.1 ".concat(this.id," init set delay: ")+this.delay),this.delayNode.delayTime.value=this.delay);var Ve=this.browser==="safari";this.isMediaElSrc=!0;try{var pe=this.acMgr.getMediaElementRenderer(be);if(!pe)return!1;this.audioNode=pe.getMixNode().mixOutputNode,this.audioEl=be}catch(nt){qe=nt}be.addEventListener("volumechange",this.eventHandler.volumechange),be.addEventListener("pause",this.eventHandler.volumechange),be.addEventListener("play",this.eventHandler.volumechange);var j=this.getBrowserInfo(),B=!1;return Ve&&(j==null?void 0:j.sysVer)==="10.15.6"&&(j==null?void 0:j.ver)==="13.1.2"&&(B=!0),B&&(this.audioResumedTimer=setInterval(function(){be.currentTime=be.currentTime+.45},6e3)),qe?(this.an.info("amu.sma.1 ".concat(this.id," create source failed: ")+qe),!0):(this.audioNode&&(this.audioNode.connect(this.gainNode),this.an.info("amu.sma.1 ".concat(this.id," mix audio success."))),this.replaceTrack())},Ie.prototype.getBrowserInfo=function(){var be,qe={},Ve=(0,E.$t)().toLowerCase();be=(Ve.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),qe.sysVer=be;var pe=Ve.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return pe&&(qe.browser=pe[1].replace(/version/,"'safari"),qe.ver=pe[2]),qe},Ie.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var be=this.destination.stream.getAudioTracks()[0],qe=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==be&&(this.micTrack?qe.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.an.warn("amu.rt.1 origin track not fonud"),qe.includes(be)||(this.localStream.addTrack(be),this.rtcViewer&&this.rtcViewer.setAudio(be))),!0},Ie.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioEl&&(this.audioEl.removeEventListener("volumechange",this.eventHandler.volumechange),this.audioEl.removeEventListener("pause",this.eventHandler.volumechange),this.audioEl.removeEventListener("play",this.eventHandler.volumechange),this.audioEl.removeEventListener("canplay",this.eventHandler.canplay),this.audioEl=null),this.audioNode&&(this.audioNode.disconnect(),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.an.info("amu.sma.1 ".concat(this.id," stop mix audio success.")),!0):(this.an.error("amu.sma.1 localStream can not be found"),!1):(this.an.warn("amu.sma.1 no mixing audio found"),!0)},Ie.prototype.setMixingAudioVolume=function(be,qe){if(be===void 0?be=this.volume:this.volume=be,qe===void 0?qe=this.volumeFactor:this.volumeFactor=qe,!this.gainNode)return this.an.error("amu.sma.2 no mixing audio found"),!1;var Ve=be*this.volumeFactor;return this.an.info("amu.sma.2 "+this.id+" set volume: "+Ve),this.gainNode.gain.value=Ve,!0},Ie.prototype.setDelay=function(be){return this.delayNode?(be/=1e3,!isNaN(be)&&(be>this.maxDelay&&(be=this.maxDelay),be<0&&(be=0),this.an.info("amu.sma.1 ".concat(this.id," set delay: ")+be),this.delayNode.delayTime.value=be,this.delay=be,!0)):(this.an.warn("amu.sma.1 no mixing audio found"),!1)},Ie})(),V=Z(4872),ae=(function(){function Ie(be){this.mn=be,this.audioDestNode=void 0,this._audioMixList=[],this._arrayBufferMap={},this._effectList=[],this.volumeFactor=1}return Object.defineProperty(Ie.prototype,"delay",{get:function(){return this.pn.engineConfig.mixingAudioDelay+this.pn.engineConfig.baseMixingAudioDelay},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"an",{get:function(){return this.mn.logger},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"_localStream",{get:function(){return this.mn.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"gn",{get:function(){return this.mn.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"pn",{get:function(){return this.mn.stateCenter},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"acMgr",{get:function(){return this.mn.acMgr},enumerable:!1,configurable:!0}),Ie.prototype.startMixingAudio=function(be){var qe=this;if(this.an.info(re+" call"),!this._localStream)return this.an.error(re+" localStream not found"),!1;var Ve=!0;return be.forEach(function(pe){if(qe._audioMixList.find(function(nt){return nt.media==pe}))qe.an.warn(re+" mix audio already exist");else if(qe._localStream){qe.gn.soundLevelDelegate&&qe.mn.stopSoundLevel();var j=qe.createDestNode(),B=new R(qe.an,qe.acMgr,qe._localStream,qe.pn.browser,j,qe.mn.rtcViewer,qe.volumeFactor);qe._audioMixList.push({audioMix:B,media:pe}),B.startMixingAudio(pe)||(Ve=!1),B.setDelay(qe.delay),qe.gn.soundLevelDelegate&&qe.mn.startSoundLevel()}}),Ve},Ie.prototype.stopMixingAudio=function(be){var qe=this;return this.an.info("zc.p.0.sma.1 call"),be?be.forEach(function(Ve){for(var pe=0;pe<qe._audioMixList.length;pe++)if(qe._audioMixList[pe].media==Ve){qe._audioMixList[pe].audioMix.stopMixingAudio()&&qe._audioMixList.splice(pe--,1);break}}):(this._audioMixList.forEach(function(Ve){return Ve.audioMix.stopMixingAudio()}),this._audioMixList=[]),!0},Ie.prototype.setVolumeFactor=function(be){this.an.info(F+" set factor: "+be),isNaN(be)&&this.an.error(F+" set factor failed"),this.volumeFactor=be,this._audioMixList.forEach(function(qe){qe.audioMix.setMixingAudioVolume(void 0,be)})},Ie.prototype.setMixingAudioVolume=function(be,qe){this.an.info(F+" call");var Ve=this._audioMixList.find(function(pe){return pe.media===qe});return Ve?(Ve.audioMix.setMixingAudioVolume(be),this.an.info(F+" call success"),!0):(this.an.error(F+" audio is not mixing"),!1)},Ie.prototype.playEffect=function(be,qe,Ve,pe){var j=this;if(this.an.info(ne+" call"),this._localStream)if(this._effectList.find(function(it){return it.effectID==be.effectID&&it.audioBuffer==qe}))this.an.warn(ne+" effect already exist ");else{this.gn.soundLevelDelegate&&this.mn.stopSoundLevel();var B=this.createDestNode(),nt=new w(this.an,this.ac,this._localStream,B,this.mn.rtcViewer);nt.audioBuffer=qe;var he={processor:nt,effectID:be.effectID,audioBuffer:qe};this._effectList.push(he),nt.playEffect(be.playTime,be.loop,!1,function(){Ve&&Ve()},function(){for(var it=[],wt=0;wt<arguments.length;wt++)it[wt]=arguments[wt];j._effectList=j._effectList.filter(function(Ee){return Ee!==he}),pe&&pe.apply(void 0,it)}),this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),this.an.info(ne+" play effect "+be.effectID+" success")}else this.an.warn(ne+" stream not found")},Ie.prototype.pauseEffect=function(be){var qe=this._effectList.find(function(Ve){return Ve.effectID==be});if(qe)this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),qe.processor.pauseEffect(),this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),this.an.info(oe+" pause "+be+" success");else{if(!(0,V.TE)(be))return this.an.error(oe+" effect not found"),!1;this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._effectList.forEach(function(Ve){return Ve.processor.pauseEffect()}),this.gn.soundLevelDelegate&&this.mn.startSoundLevel()}return!0},Ie.prototype.resumeEffect=function(be){var qe=this._effectList.find(function(pe){return pe.effectID==be});if(qe){this.gn.soundLevelDelegate&&this.mn.stopSoundLevel();var Ve=qe.processor.resumeEffect();return this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),this.an.info(fe+" resume "+be+" success"),Ve}return(0,V.TE)(be)?(this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._effectList.forEach(function(pe){return pe.processor.resumeEffect()}),this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),!0):(this.an.error(fe+" no effect found"),!1)},Ie.prototype.stopEffect=function(be){var qe=this._effectList.find(function(Ve){return Ve.effectID==be});if(qe)this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),qe.processor.stopMixingAudio(),this._effectList=this._effectList.filter(function(Ve){return Ve!==qe}),this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),this.an.info(Y+" pause "+be+" success");else{if(!(0,V.TE)(be))return this.an.error(Y+" effect not found"),!1;this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._effectList.forEach(function(Ve){return Ve.processor.stopMixingAudio()}),this._effectList=[],this.gn.soundLevelDelegate&&this.mn.startSoundLevel()}return!0},Ie.prototype.setEffectVolume=function(be,qe,Ve){var pe=this._effectList.find(function(j){return j.effectID==qe});if(pe)pe.processor.setMixingAudioVolume(be),pe.processor.setDelay(Ve||1e-7),this.an.info("zp.sev.0 set volume "+qe+" success");else{if(!(0,V.TE)(qe))return this.an.error("zp.sev.0 effect not found"),!1;this._effectList.forEach(function(j){return j.processor.setMixingAudioVolume(be)})}return!0},Ie.prototype.mixingBuffer=function(be,qe,Ve){var pe=this;if(this.an.info(M+" call"),this._localStream)if(this._arrayBufferMap[be])this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._arrayBufferMap[be].mixingBuffer(qe,function(){pe.gn.soundLevelDelegate&&pe.mn.startSoundLevel(),Ve&&Ve()});else{this.gn.soundLevelDelegate&&this.mn.stopSoundLevel();var j=this.createDestNode(),B=new w(this.an,this.ac,this._localStream,j,this.mn.rtcViewer);this._arrayBufferMap[be]=B,B.mixingBuffer(qe,function(){pe.gn.soundLevelDelegate&&pe.mn.startSoundLevel(),Ve&&Ve()})}},Ie.prototype.stopMixingBuffer=function(be){if(be&&this._arrayBufferMap[be])return this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._arrayBufferMap[be].stopMixingBuffer(),delete this._arrayBufferMap[be],this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),!0;if((0,V.TE)(be)){for(var qe in this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),this._arrayBufferMap)this._arrayBufferMap[qe].stopMixingBuffer();return this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),!0}return this.an.warn(M+" arrayBuffer no found"),!1},Ie.prototype.getEffectProgress=function(be){var qe=this._effectList.find(function(Ve){return Ve.effectID==be});return qe?qe.processor.getProcess():(this.an.error(Pe+"  effect not found"),0)},Ie.prototype.seekAudioEffect=function(be,qe){var Ve=this._effectList.find(function(pe){return pe.effectID==be});return Ve?(this.gn.soundLevelDelegate&&this.mn.stopSoundLevel(),Ve.processor.seekTo(qe),this.gn.soundLevelDelegate&&this.mn.startSoundLevel(),!0):(this.an.error(Pe+" effect not found"),!1)},Ie.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},Ie.prototype.createDestNode=function(){var be=null,qe=this.mn.createDestNode(this._localStream);return this.mn.audioNodeQueue||((be=this.mn.createSrcNode()).disconnect(),be.connect(qe)),qe},Ie.prototype.setMixingDelay=function(be){this._audioMixList.forEach(function(qe){qe.audioMix.setDelay(be)})},Ie})(),q=Z(8866),k=Z(327),G=function(Ie,be,qe,Ve){return new(qe||(qe=Promise))(function(pe,j){function B(it){try{he(Ve.next(it))}catch(wt){j(wt)}}function nt(it){try{he(Ve.throw(it))}catch(wt){j(wt)}}function he(it){var wt;it.done?pe(it.value):(wt=it.value,wt instanceof qe?wt:new qe(function(Ee){Ee(wt)})).then(B,nt)}he((Ve=Ve.apply(Ie,[])).next())})},xe=function(Ie,be){var qe,Ve,pe,j,B={label:0,sent:function(){if(1&pe[0])throw pe[1];return pe[1]},trys:[],ops:[]};return j={next:nt(0),throw:nt(1),return:nt(2)},typeof Symbol=="function"&&(j[Symbol.iterator]=function(){return this}),j;function nt(he){return function(it){return(function(wt){if(qe)throw new TypeError("Generator is already executing.");for(;j&&(j=0,wt[0]&&(B=0)),B;)try{if(qe=1,Ve&&(pe=2&wt[0]?Ve.return:wt[0]?Ve.throw||((pe=Ve.return)&&pe.call(Ve),0):Ve.next)&&!(pe=pe.call(Ve,wt[1])).done)return pe;switch(Ve=0,pe&&(wt=[2&wt[0],pe.value]),wt[0]){case 0:case 1:pe=wt;break;case 4:return B.label++,{value:wt[1],done:!1};case 5:B.label++,Ve=wt[1],wt=[0];continue;case 7:wt=B.ops.pop(),B.trys.pop();continue;default:if(pe=B.trys,!((pe=pe.length>0&&pe[pe.length-1])||wt[0]!==6&&wt[0]!==2)){B=0;continue}if(wt[0]===3&&(!pe||wt[1]>pe[0]&&wt[1]<pe[3])){B.label=wt[1];break}if(wt[0]===6&&B.label<pe[1]){B.label=pe[1],pe=wt;break}if(pe&&B.label<pe[2]){B.label=pe[2],B.ops.push(wt);break}pe[2]&&B.ops.pop(),B.trys.pop();continue}wt=be.call(Ie,B)}catch(Ee){wt=[6,Ee],Ve=0}finally{qe=pe=0}if(5&wt[0])throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}})([he,it])}}},Ae=(function(){function Ie(be,qe,Ve,pe,j,B){var nt=this;this.an=be,this.dataReport=qe,this.pn=Ve,this.gn=pe,this.ac=j,this.rtcModules=B,this.buffer=null,this.blank=null,this.mixingDelay=0,(0,E.nr)()&&this.blank==null&&this.buffer==null&&(this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start()),this.rtcModules.bindListener("_engineConfigUpdate",function(he){var it=he.mixingAudioDelay+he.baseMixingAudioDelay;isNaN(it)||it===nt.mixingDelay||(nt.an.info("zc.am.mdu delay update:"+it+", origin:"+nt.mixingDelay),nt.mixingDelay=it,nt.gn.previewStreamList.forEach(function(wt){wt.audioMixManager&&wt.audioMixManager.setMixingDelay(it)}))})}return Ie.prototype.preloadEffect=function(be,qe,Ve){if(this.checkPreviewer(I,{effectID:be},{effectID:!0}))if(qe&&(0,V.QP)(qe)){if(this.pn.audioEffectBuffer[be])return this.an.warn(I+" audio buffer already exists"),void(Ve&&Ve());this.an.info(I+" start preload effect"),this._preloadEffect(this.ac,be,qe,Ve)}else this.an.error(I+" params error")},Ie.prototype.checkPreviewer=function(be,qe,Ve){qe===void 0&&(qe={});var pe=!!(Ve!=null&&Ve.effectID),j=!!(Ve!=null&&Ve.streamID),B=!!(Ve!=null&&Ve.previewer),nt=qe.effectID,he=qe.streamID,it=he&&((0,V.QP)(he)?he:(0,k.L)(he,this.an));if((j||it)&&!(0,V.QP)(it)&&!(0,V.dr)(it))return this.an.error(be+" stream type error"),!1;if(pe&&!nt)return this.an.error(be+" effectID required"),!1;if(nt&&!(0,V.QP)(nt))return this.an.error(be+" effectID type error"),!1;if(B){var wt=this.gn.getPreviewer(it);return wt||((0,V.QP)(it)?this.an.error(be+" stream is not publishing",{streamid:it}):this.an.error(be+" stream doesn't exist"),!1)}return!0},Ie.prototype.getEffectDuration=function(be){if(!this.checkPreviewer(Pe,{effectID:be},{effectID:!0}))return 0;var qe=this.pn.audioEffectBuffer[be];return qe?qe.duration?Math.floor(1e3*qe.duration):0:(this.an.error(Pe+" effect not found"),0)},Ie.prototype.getEffectProgress=function(be,qe){var Ve=this.checkPreviewer(Pe,{streamID:be,effectID:qe},{effectID:!0,streamID:!0,previewer:!0});return(0,V.dd)(Ve)?0:this.getAudioManager(Ve).getEffectProgress(qe)},Ie.prototype.seekAudioEffect=function(be,qe,Ve){if(Ve<0)return this.an.error(Pe+" param time error "),!1;var pe=this.checkPreviewer(Pe,{streamID:be,effectID:qe},{effectID:!0,streamID:!0,previewer:!0});return!(0,V.dd)(pe)&&this.getAudioManager(pe).seekAudioEffect(qe,Ve)},Ie.prototype.playEffect=function(be,qe,Ve){return G(this,void 0,void 0,function(){var pe,j,B,nt,he=this;return xe(this,function(it){switch(it.label){case 0:return pe=(0,k.L)(be.stream,this.an)||be.streamID,j=be.path,this.checkPreviewer(P,{streamID:pe,effectID:B=be.effectID},{streamID:!0,effectID:!0})?(nt=this.pn.audioEffectBuffer[B],j?nt?(this.an.warn(P+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new q.l3(function(wt,Ee){he.preloadEffect(B,j,function(Oe){Oe?(he.an.error(P+" preload audio effect failed"),Ee(Oe)):wt(void 0)})})];case 2:it.sent(),it.label=3;case 3:return[3,5];case 4:if(!nt)return this.an.error(P+" audio effect doesn't exists"),[2];it.label=5;case 5:return this._playEffect(be,qe,Ve),[2]}})})},Ie.prototype.pauseEffect=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this._pauseEffect(Ve,qe)},Ie.prototype.resumeEffect=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this._resumeEffect(Ve,qe)},Ie.prototype.stopEffect=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this._stopEffect(Ve,qe)},Ie.prototype.unloadEffect=function(be){return!!this.checkPreviewer("zc.ue",{effectID:be},{effectID:!0})&&(delete this.pn.audioEffectBuffer[be],!0)},Ie.prototype.setEffectVolume=function(be,qe,Ve,pe){if(!(0,V.Cs)(qe)||qe<0||qe>200)return this.an.error(ke+" volume must be a number between 0 and 200"),!1;var j=(0,V.QP)(be)?be:(0,k.L)(be,this.an),B=this.checkPreviewer(ke,{streamID:j,effectID:Ve},{streamID:!0,previewer:!0});return!(0,V.dd)(B)&&this.getAudioManager(B).setEffectVolume(qe/100,Ve,pe)},Ie.prototype.startMixingAudio=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this.an.info(ce+" call "+Ve),Ve?qe?(this.an.info(ce+" end "+Ve),Array.isArray(qe)&&qe.length!==0&&qe.every(function(pe){return(0,V.Si)(pe)})?this.bn(Ve,qe):(this.an.error(ce+" audio list param type error"),!1)):(this.an.error(ce+" no audio"),!1):(this.an.error(ce+" stream not found"),!1)},Ie.prototype.stopMixingAudio=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return Ve?Array.isArray(qe)&&qe.length!==0||(0,V.TE)(qe)?this._stopMixingAudio(Ve,qe):(this.an.error(Ne+" audio param type error"),!1):(this.an.error(Ne+" stream not found"),!1)},Ie.prototype.mixingBuffer=function(be,qe,Ve,pe){var j=(0,V.QP)(be)?be:(0,k.L)(be,this.an);this.an.info(tt+" call streamID: "+JSON.stringify(j)+" sourceID:"+qe),j?qe&&(0,V.QP)(qe)?(this._mixingBuffer(j,qe,Ve,pe),this.an.info(tt+" end")):this.an.error(tt+" param source id format error"):this.an.error(tt+" param streamid format error")},Ie.prototype.stopMixingBuffer=function(be,qe){var Ve=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this._stopMixingBuffer(Ve,qe)},Ie.prototype.setMixingAudioVolume=function(be,qe,Ve){if(this.an.info(K+" call"),!be)return this.an.error(K+" stream not found"),!1;if(!(0,V.Cs)(qe)||qe<0||qe>200)return this.an.error(K+" volume must be a number between 0 and 200"),!1;if(!Ve||!(0,V.Si)(Ve))return this.an.error(K+" no audio"),!1;var pe=(0,V.QP)(be)?be:(0,k.L)(be,this.an);return this._setMixingAudioVolume(pe,qe,Ve)},Ie.prototype.getSoundLevel=function(be,qe,Ve){var pe="zc.gsl";(0,q.rA)(this.an,pe);var j=this.gn.getCloudSoundInterval();try{var B=this.gn.createSoundLevel(this.ac,be,this.gn.soundLevelInterval,j,function(nt){qe(nt)});this.pn.audioStreamList[be.id]={mic:B.mic,script:B.soundMeter}}catch(nt){Ve(nt)}(0,q.EK)(this.an,pe)},Ie.prototype.stopSoundLevel=function(be){this.an.info("zc.ssl call");var qe=this.pn.audioStreamList[be.id];qe.mic.disconnect(),qe.script.destroy(),delete this.pn.audioStreamList[be.id]},Ie.prototype._preloadEffect=function(be,qe,Ve,pe){var j=this,B=new XMLHttpRequest;B.open("GET",Ve,!0),B.setRequestHeader("Range","none"),B.responseType="arraybuffer",B.onload=function(){if(B.status==200||B.status==304)be.decodeAudioData(B.response,function(he){j.an.info("zc.pe.0 effect '".concat(qe,"' preload success")),j.pn.audioEffectBuffer[qe]=he,pe&&pe()},function(he){j.an.error("zc.pe.0 effect '".concat(qe,"' preload fail. ")+he),pe&&pe(he)});else{var nt=B.statusText;j.an.error("zc.pe.0 effect '".concat(qe,"' preload fail.")+nt),pe&&pe(nt)}},B.send()},Ie.prototype._playEffect=function(be,qe,Ve){var pe=(0,k.L)(be.stream,this.an)||be.streamID,j=this.pn.audioEffectBuffer[be.effectID];if(j){var B=this.checkPreviewer(P,{streamID:pe,effectID:be.effectID},{streamID:!0,effectID:!0,previewer:!0});(0,V.dd)(B)||this.getAudioManager(B).playEffect(be,j,qe,Ve)}else this.an.error(P+" no audio buffer found")},Ie.prototype._pauseEffect=function(be,qe){var Ve=this.checkPreviewer("zc.pe.2",{streamID:be,effectID:qe},{streamID:!0,previewer:!0});return!(0,V.dd)(Ve)&&this.getAudioManager(Ve).pauseEffect(qe)},Ie.prototype._resumeEffect=function(be,qe){var Ve=this.checkPreviewer("zc.re",{streamID:be,effectID:qe},{streamID:!0,previewer:!0});return!(0,V.dd)(Ve)&&this.getAudioManager(Ve).resumeEffect(qe)},Ie.prototype._stopEffect=function(be,qe){var Ve=this.checkPreviewer("zc.se",{streamID:be,effectID:qe},{streamID:!0,previewer:!0});return!(0,V.dd)(Ve)&&this.getAudioManager(Ve).stopEffect(qe)},Ie.prototype._setMixingAudioVolume=function(be,qe,Ve){var pe=this.gn.getPreviewer(be);return pe?this.getAudioManager(pe).setMixingAudioVolume(qe/100,Ve):(this.an.error("zc.sma.2 publisher doesn't exist"),!1)},Ie.prototype.bn=function(be,qe){var Ve=this.gn.getPreviewer(be);return Ve?this.getAudioManager(Ve).startMixingAudio(qe):((0,V.QP)(be)?this.an.error("zc.sma.0 "+be+" stream is not publishing"):this.an.error("zc.sma.0 stream doesn't exist"),!1)},Ie.prototype._stopMixingAudio=function(be,qe){var Ve=this.gn.getPreviewer(be);return Ve?this.getAudioManager(Ve).stopMixingAudio(qe):(this.an.error("zc.sma.0 stream doesn't exist"),!1)},Ie.prototype._mixingBuffer=function(be,qe,Ve,pe){var j=this.checkPreviewer(Qe,{streamID:be,effectID:qe},{effectID:!0,streamID:!0,previewer:!0});(0,V.dd)(j)||((0,V.SY)(Ve)?this.getAudioManager(j).mixingBuffer(qe,Ve,pe):this.an.error("zc.mb.0 array buffer not found"))},Ie.prototype._stopMixingBuffer=function(be,qe){var Ve=this.checkPreviewer(Qe,{streamID:be,effectID:qe},{effectID:!0,streamID:!0,previewer:!0});return!(0,V.dd)(Ve)&&this.getAudioManager(Ve).stopMixingBuffer(qe)},Ie.prototype.getAudioManager=function(be){var qe=be.audioMixManager;return qe||(qe=new ae(be),this.pn.engineConfig.choirRole===1&&qe.setVolumeFactor(.6),be.audioMixManager=qe),qe},Ie})(),De={type:"AudioMix",install:function(Ie){Object.defineProperty(Ie.prototype,"initAudioMix",{value:function(){this.audioMixModule=new Ae(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac,this)}})}}},3788:function(ot){ot.exports=C},4636:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),(function(P){var Pe=I,ke=Pe.lib,ce=ke.WordArray,Ne=ke.Hasher,tt=Pe.algo,Qe=[];(function(){for(var K=0;K<64;K++)Qe[K]=4294967296*P.abs(P.sin(K+1))|0})();var ne=tt.MD5=Ne.extend({_doReset:function(){this._hash=new ce.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(K,M){for(var F=0;F<16;F++){var T=M+F,_=K[T];K[T]=16711935&(_<<8|_>>>24)|4278255360&(_<<24|_>>>8)}var E=this._hash.words,w=K[M+0],R=K[M+1],V=K[M+2],ae=K[M+3],q=K[M+4],k=K[M+5],G=K[M+6],xe=K[M+7],Ae=K[M+8],De=K[M+9],Ie=K[M+10],be=K[M+11],qe=K[M+12],Ve=K[M+13],pe=K[M+14],j=K[M+15],B=E[0],nt=E[1],he=E[2],it=E[3];B=oe(B,nt,he,it,w,7,Qe[0]),it=oe(it,B,nt,he,R,12,Qe[1]),he=oe(he,it,B,nt,V,17,Qe[2]),nt=oe(nt,he,it,B,ae,22,Qe[3]),B=oe(B,nt,he,it,q,7,Qe[4]),it=oe(it,B,nt,he,k,12,Qe[5]),he=oe(he,it,B,nt,G,17,Qe[6]),nt=oe(nt,he,it,B,xe,22,Qe[7]),B=oe(B,nt,he,it,Ae,7,Qe[8]),it=oe(it,B,nt,he,De,12,Qe[9]),he=oe(he,it,B,nt,Ie,17,Qe[10]),nt=oe(nt,he,it,B,be,22,Qe[11]),B=oe(B,nt,he,it,qe,7,Qe[12]),it=oe(it,B,nt,he,Ve,12,Qe[13]),he=oe(he,it,B,nt,pe,17,Qe[14]),B=fe(B,nt=oe(nt,he,it,B,j,22,Qe[15]),he,it,R,5,Qe[16]),it=fe(it,B,nt,he,G,9,Qe[17]),he=fe(he,it,B,nt,be,14,Qe[18]),nt=fe(nt,he,it,B,w,20,Qe[19]),B=fe(B,nt,he,it,k,5,Qe[20]),it=fe(it,B,nt,he,Ie,9,Qe[21]),he=fe(he,it,B,nt,j,14,Qe[22]),nt=fe(nt,he,it,B,q,20,Qe[23]),B=fe(B,nt,he,it,De,5,Qe[24]),it=fe(it,B,nt,he,pe,9,Qe[25]),he=fe(he,it,B,nt,ae,14,Qe[26]),nt=fe(nt,he,it,B,Ae,20,Qe[27]),B=fe(B,nt,he,it,Ve,5,Qe[28]),it=fe(it,B,nt,he,V,9,Qe[29]),he=fe(he,it,B,nt,xe,14,Qe[30]),B=Y(B,nt=fe(nt,he,it,B,qe,20,Qe[31]),he,it,k,4,Qe[32]),it=Y(it,B,nt,he,Ae,11,Qe[33]),he=Y(he,it,B,nt,be,16,Qe[34]),nt=Y(nt,he,it,B,pe,23,Qe[35]),B=Y(B,nt,he,it,R,4,Qe[36]),it=Y(it,B,nt,he,q,11,Qe[37]),he=Y(he,it,B,nt,xe,16,Qe[38]),nt=Y(nt,he,it,B,Ie,23,Qe[39]),B=Y(B,nt,he,it,Ve,4,Qe[40]),it=Y(it,B,nt,he,w,11,Qe[41]),he=Y(he,it,B,nt,ae,16,Qe[42]),nt=Y(nt,he,it,B,G,23,Qe[43]),B=Y(B,nt,he,it,De,4,Qe[44]),it=Y(it,B,nt,he,qe,11,Qe[45]),he=Y(he,it,B,nt,j,16,Qe[46]),B=re(B,nt=Y(nt,he,it,B,V,23,Qe[47]),he,it,w,6,Qe[48]),it=re(it,B,nt,he,xe,10,Qe[49]),he=re(he,it,B,nt,pe,15,Qe[50]),nt=re(nt,he,it,B,k,21,Qe[51]),B=re(B,nt,he,it,qe,6,Qe[52]),it=re(it,B,nt,he,ae,10,Qe[53]),he=re(he,it,B,nt,Ie,15,Qe[54]),nt=re(nt,he,it,B,R,21,Qe[55]),B=re(B,nt,he,it,Ae,6,Qe[56]),it=re(it,B,nt,he,j,10,Qe[57]),he=re(he,it,B,nt,G,15,Qe[58]),nt=re(nt,he,it,B,Ve,21,Qe[59]),B=re(B,nt,he,it,q,6,Qe[60]),it=re(it,B,nt,he,be,10,Qe[61]),he=re(he,it,B,nt,V,15,Qe[62]),nt=re(nt,he,it,B,De,21,Qe[63]),E[0]=E[0]+B|0,E[1]=E[1]+nt|0,E[2]=E[2]+he|0,E[3]=E[3]+it|0},_doFinalize:function(){var K=this._data,M=K.words,F=8*this._nDataBytes,T=8*K.sigBytes;M[T>>>5]|=128<<24-T%32;var _=P.floor(F/4294967296),E=F;M[15+(T+64>>>9<<4)]=16711935&(_<<8|_>>>24)|4278255360&(_<<24|_>>>8),M[14+(T+64>>>9<<4)]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8),K.sigBytes=4*(M.length+1),this._process();for(var w=this._hash,R=w.words,V=0;V<4;V++){var ae=R[V];R[V]=16711935&(ae<<8|ae>>>24)|4278255360&(ae<<24|ae>>>8)}return w},clone:function(){var K=Ne.clone.call(this);return K._hash=this._hash.clone(),K}});function oe(K,M,F,T,_,E,w){var R=K+(M&F|~M&T)+_+w;return(R<<E|R>>>32-E)+M}function fe(K,M,F,T,_,E,w){var R=K+(M&T|F&~T)+_+w;return(R<<E|R>>>32-E)+M}function Y(K,M,F,T,_,E,w){var R=K+(M^F^T)+_+w;return(R<<E|R>>>32-E)+M}function re(K,M,F,T,_,E,w){var R=K+(F^(M|~T))+_+w;return(R<<E|R>>>32-E)+M}Pe.MD5=Ne._createHelper(ne),Pe.HmacMD5=Ne._createHmacHelper(ne)})(Math),I.MD5)},4872:function(ot,Re,Z){function I(_){return typeof _=="number"}function P(_){return typeof _=="string"}function Pe(_){return typeof _=="boolean"}function ke(_){return _===void 0}function ce(_){return _!==null&&_ instanceof Object}function Ne(_){return _===null}function tt(_){return typeof _=="function"}function Qe(_){return _ instanceof Array}function ne(_){return _ instanceof Float32Array}function oe(_){return _ instanceof Int16Array}function fe(_){return _ instanceof Uint8Array}function Y(_){return _ instanceof MediaStream}function re(_){return _ instanceof HTMLElement}function K(_){return _ instanceof HTMLMediaElement}function M(_){return _ instanceof ArrayBuffer}function F(_){return(_.startsWith("preset-id://")||_.startsWith("http")||_.startsWith("https"))&&(_.endsWith(".jpg")||_.endsWith(".jpeg")||_.endsWith(".png"))}function T(_){return I(_)&&_!==0}Z.d(Re,{$C:function(){return F},C9:function(){return Qe},Cp:function(){return oe},Cs:function(){return I},G0:function(){return fe},JO:function(){return tt},QP:function(){return P},SY:function(){return M},Si:function(){return K},TE:function(){return ke},dd:function(){return Pe},dr:function(){return Y},j5:function(){return ne},kb:function(){return T},qi:function(){return re},uy:function(){return Ne},w:function(){return ce}})},4883:function(ot,Re,Z){ot.exports=(function(I,P,Pe,ke,ce){return tt=[function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),oe.SETTINGFETCHHANDLER_FETCHSETTING=oe.SETTINGCACHEHANDLER_STORE_SETTING=oe.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC=oe.SETTINGCACHEHANDLER_GET_CACHE_SETTING=oe.SETTING_POLLING_SETTING=oe.SETTING_GET_CLOUD_SETTING=oe.SETTING__FETCH_SETTING=oe.SETTING_FETCH_SETTING=oe.SETTING_INIT=oe.constRUCTOR=void 0,oe.constRUCTOR="zs.0",oe.SETTING_INIT="zs.ii.0",oe.SETTING_FETCH_SETTING="zs.fs.0",oe.SETTING__FETCH_SETTING="zs.fs.1",oe.SETTING_GET_CLOUD_SETTING="zs.gcs.0",oe.SETTING_POLLING_SETTING="zs.ps.0",oe.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",oe.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC="zs.sch.gcss.0",oe.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",oe.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(ne,oe,fe){var Y=this&&this.__read||function(_,E){var w=typeof Symbol=="function"&&_[Symbol.iterator];if(!w)return _;var R,V,ae=w.call(_),q=[];try{for(;(E===void 0||0<E--)&&!(R=ae.next()).done;)q.push(R.value)}catch(k){V={error:k}}finally{try{R&&!R.done&&(w=ae.return)&&w.call(ae)}finally{if(V)throw V.error}}return q},re=this&&this.__spread||function(){for(var _=[],E=0;E<arguments.length;E++)_=_.concat(Y(arguments[E]));return _},K=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}},M=(Object.defineProperty(oe,"__esModule",{value:!0}),oe.decryptStores=oe.encryptStores=oe.decodeString=oe.generateUUID=oe.checkValidNumber=oe.analyzeKey=oe.getCurrentTime=oe.getBrowser=void 0,K(fe(13))),F=K(fe(14));oe.getBrowser=function(){var _=window.navigator.userAgent,E=window.ActiveXObject!=null&&_.indexOf("MSIE")!=-1,w=_.indexOf("Firefox")!=-1,R=window.opr!=null,V=_.indexOf("Chrome")&&window.chrome,ae=_.indexOf("Safari")!=-1&&_.indexOf("Version")!=-1;return _=_.toLowerCase().match(/MicroMessenger/i)&&_.toLowerCase().match(/MicroMessenger/i)[0]==="micromessenger",E?"IE":w?"FIREFOX":R?"OPERA":V?"CHROME":ae?"SAFARI":_?"WEIXIN":"UNKOWN"};var T=["00","01","02","03","04","05","06","07","08","09"];oe.getCurrentTime=function(){var _=new Date;return[_.getFullYear()+"/",(T[_.getMonth()+1]||_.getMonth()+1)+"/",(T[_.getDate()]||_.getDate())+" ",(T[_.getHours()]||_.getHours())+":",(T[_.getMinutes()]||_.getMinutes())+":",T[_.getSeconds()]||_.getSeconds(),"."+_.getTime()%1e3].join("")},oe.analyzeKey=function(_){return _=_.split("_"),{level:Number(_[0]),timestamp:_[1],seq:_[2]}},oe.checkValidNumber=function(_,E,w){return E=E||1,w=w||1e4,typeof _=="number"&&_%1==0&&E<=_&&_<=w},oe.generateUUID=function(_){if((_=_===void 0?0:_)===0)try{w=localStorage.getItem("z_deviceID")}catch{}else wx.getStorageSync("z_deviceID");if(!w){var E=new Date().getTime(),w="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(R){var V=(E+16*Math.random())%16|0;return E=Math.floor(E/16),(R=="x"?V:3&V|8).toString(36)});if(_===0)try{localStorage.setItem("z_deviceID",w)}catch{}else wx.setStorageSync("z_deviceID",w)}return w},oe.decodeString=function(_){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,re(Array.from(_)))))},oe.encryptStores=function(_,E){return M.default.encrypt(_,E).toString()},oe.decryptStores=function(_,E){try{return M.default.decrypt(_,E).toString(F.default)}catch{return""}}},function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),oe.AUTH_FAIL=oe.MULTI_FILE_NOT_EXIST=oe.INFLATE_DATA_FAIL=oe.FILE_REQUEST_FAIL=oe.NOT_INIT=void 0,oe.NOT_INIT={code:1001,msg:"not init"},oe.FILE_REQUEST_FAIL={code:1002,msg:"fetch request fail"},oe.INFLATE_DATA_FAIL={code:1003,msg:"inflate fail"},oe.MULTI_FILE_NOT_EXIST={code:1004,msg:"get multi file fail"},oe.AUTH_FAIL={code:1005,msg:"auth failed"}},function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),fe=(fe=fe(4)).default||fe,oe.default=fe},function(ne,oe){ne.exports=I},function(ne,oe){ne.exports=P},function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),oe.INIT_CONFIG=void 0,oe.INIT_CONFIG={env:0,compress:!0,p_version:1,unify:!0}},function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),oe.ZegoSetting=void 0;var Y=fe(8);Object.defineProperty(oe,"ZegoSetting",{enumerable:!0,get:function(){return Y.ZegoSetting}})},function(ne,oe,fe){var Y=this&&this.__assign||function(){return(Y=Object.assign||function(q){for(var k,G=1,xe=arguments.length;G<xe;G++)for(var Ae in k=arguments[G])Object.prototype.hasOwnProperty.call(k,Ae)&&(q[Ae]=k[Ae]);return q}).apply(this,arguments)},re=this&&this.__awaiter||function(q,k,G,xe){return new(G=G||Promise)(function(Ae,De){function Ie(Ve){try{qe(xe.next(Ve))}catch(pe){De(pe)}}function be(Ve){try{qe(xe.throw(Ve))}catch(pe){De(pe)}}function qe(Ve){var pe;Ve.done?Ae(Ve.value):((pe=Ve.value)instanceof G?pe:new G(function(j){j(pe)})).then(Ie,be)}qe((xe=xe.apply(q,k||[])).next())})},K=this&&this.__generator||function(q,k){var G,xe,Ae,De={label:0,sent:function(){if(1&Ae[0])throw Ae[1];return Ae[1]},trys:[],ops:[]},Ie={next:be(0),throw:be(1),return:be(2)};return typeof Symbol=="function"&&(Ie[Symbol.iterator]=function(){return this}),Ie;function be(qe){return function(Ve){var pe=[qe,Ve];if(G)throw new TypeError("Generator is already executing.");for(;De;)try{if(G=1,xe&&(Ae=2&pe[0]?xe.return:pe[0]?xe.throw||((Ae=xe.return)&&Ae.call(xe),0):xe.next)&&!(Ae=Ae.call(xe,pe[1])).done)return Ae;switch(xe=0,(pe=Ae?[2&pe[0],Ae.value]:pe)[0]){case 0:case 1:Ae=pe;break;case 4:return De.label++,{value:pe[1],done:!1};case 5:De.label++,xe=pe[1],pe=[0];continue;case 7:pe=De.ops.pop(),De.trys.pop();continue;default:if(!(Ae=0<(Ae=De.trys).length&&Ae[Ae.length-1])&&(pe[0]===6||pe[0]===2)){De=0;continue}if(pe[0]===3&&(!Ae||pe[1]>Ae[0]&&pe[1]<Ae[3]))De.label=pe[1];else if(pe[0]===6&&De.label<Ae[1])De.label=Ae[1],Ae=pe;else{if(!(Ae&&De.label<Ae[2])){Ae[2]&&De.ops.pop(),De.trys.pop();continue}De.label=Ae[2],De.ops.push(pe)}}pe=k.call(q,De)}catch(j){pe=[6,j],xe=0}finally{G=Ae=0}if(5&pe[0])throw pe[1];return{value:pe[0]?pe[1]:void 0,done:!0}}}},M=(Object.defineProperty(oe,"__esModule",{value:!0}),oe.ZegoSetting=void 0,fe(2)),F=fe(9),T=fe(10),_=fe(11),E=fe(15),w=fe(6),R=fe(1),V=fe(0);function ae(){this.u=[],this.h={},this.v={},this.g=null,this._=300,this.O=!1,this.j=0,this.S=!1,this.log=new T.ZegoLog}Object.defineProperty(ae.prototype,"envVariable",{get:function(){return Object.assign({},this.h,this.v)},enumerable:!1,configurable:!0}),ae.prototype.init=function(q){var k,G=this;return q.pollingFreq&&!R.checkValidNumber(q.pollingFreq)?(this.log.error(V.SETTING_INIT+" pollingFreq must be integer number"),!1):q.inflate?(this.D=Object.assign({},w.INIT_CONFIG,q),this.N(),this.I=new E.SettingFetchHandler(this.D,this.log),this.I.setDataReport(this.D.reportNotify),q=Math.round(60*Math.random()),this.log.info(V.SETTING_INIT+" delay "+q),this.M&&(clearTimeout(this.M),this.M=null),this.D.pollingFreq&&60<=this.D.pollingFreq&&(this._=this.D.pollingFreq),this.M=setTimeout(function(){G.T(1e3*G._,!1)},1e3*q),this.R=new _.SettingCacheHandler("setting_"+(this.D.online?"online_":"test_")+(q=this.D.product||this.D.productNum)+"_"+this.D.appID,this.log,this.D),[0,1,2,3,4,5].includes(q)&&(k=F.ProductMap[q])&&(q===1&&this.R.dropOldStore("setting_"+(this.D.online?"online_":"test_")+"undefined_"+this.D.appID),this.R.dropOldStore("setting_"+(this.D.online?"online_":"test_")+k+"_"+this.D.appID)),(q=this.D)!=null&&q.unify&&this.D.connection&&(q=(k=this.D)==null?void 0:k.connection)!=null&&q.on("connected",function(){G.I.checkUnSendMsgs(G.I.unSendCommandList)}),this.C(),this.O=!0):(this.log.error(V.SETTING_INIT+" need input pako inflate function"),!1)},ae.prototype.uninit=function(){this.g&&(clearTimeout(this.g),this.g=null)},ae.prototype.setEnvVariable=function(q,k){this.v[q]=String(k)},ae.prototype.getEnvVariable=function(q){return this.envVariable[q]},ae.prototype.setEnvVariables=function(q){var k=this;Object.keys(q).forEach(function(G){typeof q[G]!="string"&&typeof q[G]!="number"&&k.log.error("zs.sev env "+G+" type error"),k.v[G]=String(q[G])})},ae.prototype.getEnvVariables=function(){return this.envVariable},ae.prototype.enablePolling=function(q,k){var G=this;k?k.forEach(function(xe){var Ae=G.u.find(function(De){return De.fileName===xe});Ae&&(Ae.needPolling=q)}):this.u.forEach(function(xe){return xe.needPolling=q})},ae.prototype.setToken=function(q){this.P!==q&&this.C(),this.P=q},ae.prototype.setUserID=function(q){this.q!==q&&this.C(),this.q=q},ae.prototype.getSettingCache=function(q){return re(this,void 0,void 0,function(){var k,G;return K(this,function(xe){switch(xe.label){case 0:return this.O?(k=this.u.find(function(Ae){return Ae.fileName===q}))?[2,Promise.resolve({setting:k.setting,versions:k.versions})]:[3,1]:[2,Promise.reject(M.NOT_INIT)];case 1:return[4,this.R.getCacheSetting(q)];case 2:return(k=xe.sent())&&(this.u.find(function(Ae){return Ae.fileName===q})||this.u.push({fileName:q,fetchedTime:0,needPolling:!1,setting:k.setting,versions:k.versions}),G={setting:k.setting,versions:k.versions}),[2,Promise.resolve(G)]}})})},ae.prototype.fetchSetting=function(q,k,G){return k===void 0&&(k={}),G===void 0&&(G=!0),this.log.info(V.SETTING_FETCH_SETTING+" call "+q),this.O?(this.activePolling(),0<Object.keys(k).length?(this.log.info(V.SETTING_FETCH_SETTING+" get file with params"),this.A(q,Y(Y({},this.envVariable),k))):(k=this.u.find(function(xe){return xe.fileName===q}))?(this.log.info(V.SETTING_FETCH_SETTING+" file exist"),new Date().getTime()-k.fetchedTime<1e3*this._?(this.log.info(V.SETTING_FETCH_SETTING+" fetch time interval in freq"),k.needPolling=G,Promise.resolve({setting:k.setting,versions:k.versions})):this.k(q,k,G)):(this.log.info(V.SETTING_FETCH_SETTING+" file not found"),this.k(q,k,G))):Promise.reject(M.NOT_INIT)},ae.prototype.fetchMultiSetting=function(q,k,G){var xe=this;return k===void 0&&(k={}),G===void 0&&(G=!0),this.log.info(V.SETTING_FETCH_SETTING+" call "+JSON.stringify(q)),this.O?(this.activePolling(),0<Object.keys(k).length?(this.log.info(V.SETTING_FETCH_SETTING+" get file with params"),this.A(q,Y(Y({},this.envVariable),k))):new Promise(function(Ae,De){var Ie={},be=[];if(q.forEach(function(qe){return re(xe,void 0,void 0,function(){var Ve;return K(this,function(pe){return(Ve=this.u.find(function(j){return j.fileName===qe}))&&new Date().getTime()-Ve.fetchedTime<1e3*this._?(this.log.info(V.SETTING_FETCH_SETTING+" fetch time interval in freq"),Ie[qe]={setting:Ve.setting,versions:Ve.versions}):be.push(qe),[2]})})}),!(0<be.length))return Ae(Ie);xe.A(be,xe.envVariable).then(function(qe){return xe.J(qe,G),Object.assign(Ie,qe),Ae(Ie)}).catch(function(qe){be.forEach(function(Ve){return re(xe,void 0,void 0,function(){var pe;return K(this,function(j){switch(j.label){case 0:return(pe=this.u.find(function(B){return B.fileName==Ve}))?pe.fetchedTime=new Date().getTime():this.u.find(function(B){return B.fileName===Ve})||this.u.push({fileName:Ve,fetchedTime:new Date().getTime(),needPolling:G,setting:{},versions:{}}),[4,this.R.getCacheSetting(Ve)];case 1:return pe=j.sent(),Ie[Ve]={setting:pe.setting,versions:pe.versions},[2]}})})}),0<Object.keys(Ie).length?Ae(Ie):De(qe)})})):(this.log.info(V.SETTING_FETCH_SETTING+" not init"),Promise.reject(M.NOT_INIT))},ae.prototype.setOptions=function(q){q&&typeof q.unify=="boolean"&&(this.D.unify=q.unify,this.I.setOptions(this.D))},ae.prototype.setLog=function(q){this.log=q},ae.prototype.A=function(q,k){var G=this;return new Promise(function(xe,Ae){return re(G,void 0,void 0,function(){var De,Ie,be,qe,Ve,pe,j,B,nt,he=this;return K(this,function(it){switch(it.label){case 0:if(it.trys.push([0,6,,7]),this.S)return this.log.warn(V.SETTING_GET_CLOUD_SETTING+" check fail"),Ae(M.AUTH_FAIL),[2];Ie=(De=q instanceof Array)?q:[q],be=[],qe={},Ve=function(wt){return wt=wt.map(function(Ee){return he.R.getCacheSetting(Ee)}),Promise.all(wt)},it.label=1;case 1:return it.trys.push([1,3,,4]),[4,Ve(Ie)];case 2:return pe=it.sent(),Ie.forEach(function(wt,Ee){var Oe=typeof(Oe=(Oe=pe[Ee].versions)==null?void 0:Oe.hash)=="string"?new Uint8Array(Oe.split(",").map(function(rt){return parseInt(rt)})):new Uint8Array;be.push({file_name:wt,hash:Oe,g_version:(Oe=pe[Ee].versions)==null?void 0:Oe.g_version}),qe[wt]=pe[Ee]}),[3,4];case 3:return it.sent(),Ie.forEach(function(wt){be.push({file_name:wt})}),[3,4];case 4:return[4,this.I.fetchSetting(be,k,this.P,this.q,!1)];case 5:return nt=it.sent(),j=nt.data,nt=nt.polling_interval,this.j=0,this.log.info(V.SETTING_GET_CLOUD_SETTING+" suc"),typeof nt=="number"&&5<=nt&&this._!==60*nt&&(this.log.warn(V.SETTING_GET_CLOUD_SETTING+" polling interval change"),this._=60*nt,this.uninit(),this.activePolling()),De?(B={},q.forEach(function(wt){var Ee;((Ee=j[wt])==null?void 0:Ee.code)==0&&(j[wt].hashChange?(he.log.info(V.SETTING_GET_CLOUD_SETTING+" file "+wt+" changed"),B[wt]={setting:(Ee=j[wt])==null?void 0:Ee.data,versions:(Ee=j[wt])==null?void 0:Ee.versions}):qe[wt]&&(B[wt]={setting:(Ee=qe[wt])==null?void 0:Ee.setting,versions:(Ee=qe[wt])==null?void 0:Ee.versions}))}),0<Object.keys(B).length?xe(B):Ae(M.MULTI_FILE_NOT_EXIST)):((nt=j[q])==null?void 0:nt.code)===0&&(nt=j[q])!=null&&nt.data?xe({setting:(nt=j[q])==null?void 0:nt.data,versions:(nt=j[q])==null?void 0:nt.versions}):Ae({code:(nt=j[q])==null?void 0:nt.code,msg:(nt=j[q])==null?void 0:nt.message}),[3,7];case 6:return nt=it.sent(),this.log.error(V.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(nt)),(nt==null?void 0:nt.code)!==21002&&(nt==null?void 0:nt.status_code)!==401||(this.j+=1),2<=this.j&&(this.S=!0),Ae(nt),[3,7];case 7:return[2]}})})})},ae.prototype.J=function(q,k){var G=this;Object.keys(q).forEach(function(xe){var Ae=((Ae=G.u.find(function(De){return De.fileName==xe}))?(Ae.fetchedTime=new Date().getTime(),Ae.setting=q[xe].setting,Ae.versions=q[xe].versions,Ae.needPolling=k):G.u.find(function(De){return De.fileName===xe})||G.u.push({fileName:xe,fetchedTime:new Date().getTime(),needPolling:k,setting:q[xe].setting,versions:q[xe].versions}),xe);G.R.storeSetting(Ae,q[xe])})},ae.prototype.k=function(q,k,G){var xe=this;return new Promise(function(Ae,De){xe.log.info(V.SETTING__FETCH_SETTING+" call"),xe.A(q,xe.envVariable).then(function(Ie){k?(k.fetchedTime=new Date().getTime(),k.setting=Ie.setting,k.versions=Ie.versions,k.needPolling=G):xe.u.find(function(be){return be.fileName===q})||xe.u.push({fileName:q,fetchedTime:new Date().getTime(),needPolling:G,setting:Ie.setting,versions:Ie.versions}),xe.R.storeSetting(q,Ie),Ae(Ie),xe.log.info(V.SETTING__FETCH_SETTING+" call suc")}).catch(function(Ie){return re(xe,void 0,void 0,function(){var be,qe;return K(this,function(Ve){switch(Ve.label){case 0:k?k.fetchedTime=new Date().getTime():this.u.find(function(pe){return pe.fileName===q})||this.u.push({fileName:q,fetchedTime:new Date().getTime(),needPolling:G,setting:{},versions:{}}),be=q,Ve.label=1;case 1:return Ve.trys.push([1,3,,4]),[4,this.R.getCacheSetting(be)];case 2:return qe=Ve.sent(),Ae(qe),[3,4];case 3:return Ve.sent(),De(Ie),[3,4];case 4:return this.log.info(V.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}})})})})},ae.prototype.N=function(){var q;this.D.env==0?(this.h.userAgent=navigator.userAgent,this.h.platform=navigator.platform,this.h.browser=R.getBrowser(),this.h.deviceid=R.generateUUID()):this.D.env==1&&(q=wx.getSystemInfoSync(),this.h.brand=q.brand,this.h.model=q.model,this.h.system=q.system,this.h.platform=q.platform,this.h.wechatVersion=q.version,this.h.wechatSDKVersion=q.SDKVersion,this.h.deviceid=R.generateUUID(this.D.env))},ae.prototype.T=function(q,k){return k===void 0&&(k=!0),re(this,void 0,void 0,function(){var G,xe,Ae,De,Ie=this;return K(this,function(be){switch(be.label){case 0:if(this.log.info(V.SETTING_POLLING_SETTING+" call "+q+" "+k),G=q,k){if(xe=[],this.u.forEach(function(qe){var Ve,pe;qe.needPolling&&(pe=typeof((Ve=qe.versions)==null?void 0:Ve.hash)=="string"?new Uint8Array((Ve=qe.versions)==null?void 0:Ve.hash.split(",").map(function(j){return parseInt(j)})):new Uint8Array,xe.push({file_name:qe.fileName,hash:pe,g_version:qe.versions.g_version}))}),!this.S)return[3,1];this.log.warn(V.SETTING_GET_CLOUD_SETTING+" has checked fail")}return[3,7];case 1:if(!(0<xe.length))return[3,6];be.label=2;case 2:return be.trys.push([2,4,,5]),[4,this.I.fetchSetting(xe,this.envVariable,this.P,this.q)];case 3:return De=be.sent(),Ae=De.data,De=De.polling_interval,this.log.info(V.SETTING_POLLING_SETTING+" fetch suc"),this.j=0,typeof De=="number"&&5<=De&&this._!==60*De&&(this.log.warn(V.SETTING_POLLING_SETTING+" polling interval change"),this._=60*De,G=1e3*this._),this.u.forEach(function(qe){return re(Ie,void 0,void 0,function(){var Ve,pe,j,B,nt,he,it,wt,Ee;return K(this,function(Oe){switch(Oe.label){case 0:return qe.fetchedTime=new Date().getTime(),Ve=qe.fileName,Ee=(B=Ae[qe.fileName]).code,it=B.data,wt=B.versions,pe=B.message,j=B.hashChange,B&&Ee===0&&it?(B=JSON.stringify(it),nt=JSON.stringify(qe.setting),he={setting:it,versions:wt,code:Ee,message:pe},j&&nt!==B&&(this.log.info(V.SETTING_POLLING_SETTING+" "+qe.fileName+" setting changed"),qe.setting=he.setting,qe.versions=he.versions,this.D.pollingNotify(qe.fileName,he)),[4,this.R.getCacheSetting(Ve)]):[3,2];case 1:it=Oe.sent(),wt=JSON.stringify(it),Ee=JSON.stringify(he),j&&wt!==Ee&&this.R.storeSetting(Ve,he),Oe.label=2;case 2:return[2]}})})}),[3,5];case 4:return De=be.sent(),this.log.error(V.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(De)),(De==null?void 0:De.code)!==21002&&(De==null?void 0:De.status_code)!==401||(this.j+=1),2<=this.j&&(this.S=!0),[3,5];case 5:return[3,7];case 6:this.log.info(V.SETTING_POLLING_SETTING+" polling no file"),be.label=7;case 7:return this.g&&clearTimeout(this.g),this.g=setTimeout(function(){Ie.T(G)},G),[2]}})})},ae.prototype.activePolling=function(){this.g||this.T(1e3*this._)},ae.prototype.C=function(){this.j=0,this.S=!1},oe.ZegoSetting=ae},function(ne,oe,fe){var Y;Object.defineProperty(oe,"__esModule",{value:!0}),oe.ProductMap=oe.Product=oe.SOCKET_DISCONNECT=oe.ENUM_REMOTE_TYPE=oe.ZEGO_BROWSER_TYPE=oe.ZEGO_ENV=oe.PROTO_VERSION=void 0,oe.PROTO_VERSION="1.1.8",(Y=oe.ZEGO_ENV||(oe.ZEGO_ENV={}))[Y.BROWSER=0]="BROWSER",Y[Y.WEIXINMINI=1]="WEIXINMINI",(Y=oe.ZEGO_BROWSER_TYPE||(oe.ZEGO_BROWSER_TYPE={}))[Y.IE=0]="IE",Y[Y.FIREFOX=1]="FIREFOX",Y[Y.CHROME=2]="CHROME",Y[Y.SAFARI=3]="SAFARI",Y[Y.OPERA=4]="OPERA",Y[Y.WEIXIN=5]="WEIXIN",Y[Y.WEIXINMINI=6]="WEIXINMINI",Y[Y.UNKOWN=7]="UNKOWN",(Y=oe.ENUM_REMOTE_TYPE||(oe.ENUM_REMOTE_TYPE={}))[Y.DISABLE=0]="DISABLE",Y[Y.WEBSOCKET=1]="WEBSOCKET",Y[Y.HTTPS=2]="HTTPS",oe.SOCKET_DISCONNECT=-1,(Y=oe.Product||(oe.Product={}))[Y.RTC=0]="RTC",Y[Y.WEB_RTC=1]="WEB_RTC",Y[Y.ZIM=2]="ZIM",Y[Y.ROOM_KIT=3]="ROOM_KIT",Y[Y.DOC_SHARE=4]="DOC_SHARE",Y[Y.WHITE_BOARD=5]="WHITE_BOARD",Y[Y.SELF_CHECK=999]="SELF_CHECK",Y[Y.TEST_ANOOUS=1e3]="TEST_ANOOUS",oe.ProductMap={0:"rtc_sdk_native",1:"Web_SDK",2:"ZIM",3:"roomkitWeb",4:"docsshare",5:"WhiteBoard"}},function(ne,oe,fe){function Y(){}Object.defineProperty(oe,"__esModule",{value:!0}),oe.ZegoLog=void 0,Y.prototype.log=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join(" ");console.log(M)},Y.prototype.debug=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join(" ");console.debug(M)},Y.prototype.info=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join(" ");console.info(M)},Y.prototype.warn=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join(" ");console.warn(M)},Y.prototype.error=function(){for(var re=[],K=0;K<arguments.length;K++)re[K]=arguments[K];var M=re.join(" ");console.error(M)},oe.ZegoLog=Y},function(ne,oe,fe){var Y=this&&this.__awaiter||function(w,R,V,ae){return new(V=V||Promise)(function(q,k){function G(De){try{Ae(ae.next(De))}catch(Ie){k(Ie)}}function xe(De){try{Ae(ae.throw(De))}catch(Ie){k(Ie)}}function Ae(De){var Ie;De.done?q(De.value):((Ie=De.value)instanceof V?Ie:new V(function(be){be(Ie)})).then(G,xe)}Ae((ae=ae.apply(w,R||[])).next())})},re=this&&this.__generator||function(w,R){var V,ae,q,k={label:0,sent:function(){if(1&q[0])throw q[1];return q[1]},trys:[],ops:[]},G={next:xe(0),throw:xe(1),return:xe(2)};return typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function xe(Ae){return function(De){var Ie=[Ae,De];if(V)throw new TypeError("Generator is already executing.");for(;k;)try{if(V=1,ae&&(q=2&Ie[0]?ae.return:Ie[0]?ae.throw||((q=ae.return)&&q.call(ae),0):ae.next)&&!(q=q.call(ae,Ie[1])).done)return q;switch(ae=0,(Ie=q?[2&Ie[0],q.value]:Ie)[0]){case 0:case 1:q=Ie;break;case 4:return k.label++,{value:Ie[1],done:!1};case 5:k.label++,ae=Ie[1],Ie=[0];continue;case 7:Ie=k.ops.pop(),k.trys.pop();continue;default:if(!(q=0<(q=k.trys).length&&q[q.length-1])&&(Ie[0]===6||Ie[0]===2)){k=0;continue}if(Ie[0]===3&&(!q||Ie[1]>q[0]&&Ie[1]<q[3]))k.label=Ie[1];else if(Ie[0]===6&&k.label<q[1])k.label=q[1],q=Ie;else{if(!(q&&k.label<q[2])){q[2]&&k.ops.pop(),k.trys.pop();continue}k.label=q[2],k.ops.push(Ie)}}Ie=R.call(w,k)}catch(be){Ie=[6,be],ae=0}finally{V=q=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}}},K=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}},M=(Object.defineProperty(oe,"__esModule",{value:!0}),oe.SettingCacheHandler=void 0,K(fe(12))),F=fe(0),T=fe(1),_="0c9e6e0f8c0a8f4e";function E(w,R,V){this._storeName=w,this._log=R}E.prototype.getStore=function(){this.store||(this.store=M.default.createInstance({name:this._storeName}))},E.prototype.getCacheSetting=function(w){return Y(this,void 0,void 0,function(){var R,V;return re(this,function(ae){switch(ae.label){case 0:if(this._log.info(F.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call "+w),R=void 0,!(V=localStorage.getItem(this._storeName+"_"+w)))return[3,1];if(V=T.decryptStores(V,_))try{R=JSON.parse(V),this._log.info(F.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC+" res "+w)}catch(q){this._log.info(F.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC+" fail "+w+" "+(q==null?void 0:q.message))}return[3,3];case 1:return this._log.info(F.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" get cache from db "+w),this.getStore(),[4,this.store.getItem(w)];case 2:R=ae.sent(),ae.label=3;case 3:return this._log.info(F.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" res "+w),[2,R]}})})},E.prototype.storeSetting=function(w,R){return Y(this,void 0,void 0,function(){var V;return re(this,function(ae){switch(ae.label){case 0:this._log.info(F.SETTINGCACHEHANDLER_STORE_SETTING+" call "+w),ae.label=1;case 1:return ae.trys.push([1,2,,4]),V=JSON.stringify(R),V=T.encryptStores(V,_),localStorage.setItem(this._storeName+"_"+w,V),[3,4];case 2:return V=ae.sent(),this._log.info(F.SETTINGCACHEHANDLER_STORE_SETTING+" fail "+w+" "+(V==null?void 0:V.message)),localStorage.removeItem(this._storeName+"_"+w),this._log.info(F.SETTINGCACHEHANDLER_STORE_SETTING+" set data to db "+w),this.getStore(),[4,this.store.setItem(w,R)];case 3:return ae.sent(),[3,4];case 4:return[2]}})})},E.prototype.dropOldStore=function(w){M.default.dropInstance({name:w}).then(function(){console.debug("Dropped ",w)}).catch(function(R){console.warn(R)})},oe.SettingCacheHandler=E},function(ne,oe){ne.exports=Pe},function(ne,oe){ne.exports=ke},function(ne,oe){ne.exports=ce},function(ne,oe,fe){var Y,re,K=this&&this.__assign||function(){return(K=Object.assign||function(q){for(var k,G=1,xe=arguments.length;G<xe;G++)for(var Ae in k=arguments[G])Object.prototype.hasOwnProperty.call(k,Ae)&&(q[Ae]=k[Ae]);return q}).apply(this,arguments)},M=this&&this.__importDefault||function(q){return q&&q.__esModule?q:{default:q}},F=(Object.defineProperty(oe,"__esModule",{value:!0}),oe.SettingFetchHandler=void 0,fe(16)),T=fe(1),_=fe(17),E=fe(6),w=M(fe(3)),R=fe(0),V=fe(2);function ae(q,k){this._options=q,this._log=k,this.seq=0,this.userID="",this.unSendCommandList=new F.LinkedList,this.testNetPackageSize=!1,this.protobuf=new _.CloudSettingProtoBuf}(Y=Y||{})[Y.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",(M=re=re||{})[M.METHOD_UNSET=0]="METHOD_UNSET",M[M.METHOD_GET=1]="METHOD_GET",M[M.METHOD_POST=2]="METHOD_POST",ae.prototype.setOptions=function(q){this._options=q},ae.prototype.setDataReport=function(q){this.W=q},ae.prototype.setUserID=function(q){this.userID=q},ae.prototype.fetchSetting=function(q,k,G,xe,Ae){var De=this;return Ae===void 0&&(Ae=!0),new Promise(function(Ie,be){function qe(Oe){var rt,me=Oe.code,Se=Oe.data,ge=Oe.polling_interval;Oe=Oe.reportData,De._log.info(R.SETTINGFETCHHANDLER_FETCHSETTING+" suc "+me),Se&&(rt=[],Object.keys(Se).forEach(function(ve){var ee;rt.push({name:ve,code:Se[ve].code,message:(ee=Se[ve])==null?void 0:ee.message,versions:JSON.stringify((ee=Se[ve])==null?void 0:ee.versions),content:JSON.stringify((ee=Se[ve])==null?void 0:ee.data)})})),De.W&&De.W(nt,"request_end",{code:me,reportData:Oe,params:B,requestKV:j,files:rt,polling:Ae}),Ie({data:Se,polling_interval:ge})}function Ve(Oe){var rt=Oe.code,me=Oe.msg,Se=Oe.status_code;Oe=Oe.reportData,De._log.warn(R.SETTINGFETCHHANDLER_FETCHSETTING+" fail "+rt),De.W&&De.W(nt,"request_end",{code:rt,params:B,requestKV:j,reportData:Oe,polling:Ae}),be({code:rt,msg:me,status_code:Se})}var pe={product:De._options.product,files:q.map(function(Oe){return Oe.file_name}),param:K(K({},k),{deviceid:void 0}),appid:De._options.appID,token:G,id_name:xe,timestamp:new Date().getTime(),biztype:0,deviceid:k.deviceid||T.generateUUID(De._options.env),compress:!1,mode:De._options.online?"online":"test"},j=pe.param,B={appid:pe.appid,token:pe.token,id_name:pe.id_name,deviceid:pe.deviceid},nt=De.seq++;if(De.W&&De.W(nt,"request_start",{polling:Ae}),!De._options.connection)throw Error("connection required");if(De._options.productNum!==void 0){var he,it=[];for(he in pe.param)pe.param[he]!==void 0&&it.push({key:he,value:pe.param[he]});var wt={product:De._options.productNum,response_compress:E.INIT_CONFIG.compress?0:1,files:q,param_list:it,p_version:E.INIT_CONFIG.p_version},Ee=(De._log.info(R.SETTINGFETCHHANDLER_FETCHSETTING+" files "+JSON.stringify(wt.files)+" compress "+wt.response_compress),De._options.online?1:2);De.sendCloudPBRequest(xe,wt,G,Ee,qe,Ve)}else De.sendCloudRequest(xe,pe,"/cloud-setting/get",function(Oe){qe(Oe)},function(Oe){Ve(Oe)})})},ae.prototype.sendCloudRequest=function(q,k,G,xe,Ae,De,Ie){var be=this,qe=(De===void 0&&(De=3),Ie===void 0&&(Ie=[]),new Date().getTime());this.sendNetAgentHttpRequest({service:Y.SERVICE_ClOUD_SETTING,body:k,ack:!1,idName:q,method_no:re.METHOD_POST,location:G},function(Ve){var pe,j,B,nt,he;(Ve==null?void 0:Ve.status_code)===200?(pe=(nt=JSON.parse(Ve.body)).code,j=nt.message,B=nt.data,nt=nt.polling_interval,he=new Date().getTime()-qe,Ie.push({timestamp:qe,url:G,error:pe,duration:he}),pe===0?xe({code:pe,msg:j,data:B,polling_interval:nt,reportData:Ie}):Ae({code:pe,msg:j,reportData:Ie})):(he=new Date().getTime()-qe,Ie.push({timestamp:qe,url:G,error:Ve==null?void 0:Ve.status_code,duration:he}),0<De?(De--,be.sendCloudRequest(q,k,G,xe,Ae,De,Ie)):Ae(K(K({},V.FILE_REQUEST_FAIL),{reportData:Ie})))},function(Ve){var pe=new Date().getTime()-qe;Ie.push({timestamp:qe,url:G,error:Ve.code,duration:pe}),!be._options.connection||(pe=be._options.connection)!=null&&pe.isDestroy?Ae(K(K({},V.FILE_REQUEST_FAIL),{reportData:Ie,status_code:Ve==null?void 0:Ve.status_code})):0<De?(De--,be.sendCloudRequest(q,k,G,xe,Ae,De,Ie)):Ae(K(K({},V.FILE_REQUEST_FAIL),{reportData:Ie}))},null,{timeout:4e3})},ae.prototype.sendNetAgentHttpRequest=function(q,k,G,xe,Ae){q={param:q,suc:k,err:G,ack:xe,option:Ae},(k=this._options.connection)!=null&&k.isConnect()?this.sendNetUintData(q):this.unSendCommandList.push(q)},ae.prototype.sendNetUintData=function(q){var k;(k=this._options.connection)!=null&&k.startHttpRequest(q.param,q.suc,q.err,q.ack,q.option)},ae.prototype.checkUnSendMsgs=function(q){for(var k=q.getFirst();k!=null;)q.remove(k),k._data&&k._data.param&&this.sendNetUintData(k._data),k=q.getFirst()},ae.prototype.sendCloudPBRequest=function(q,k,G,xe,Ae,De,Ie,be){var qe,Ve=this,pe=(Ie===void 0&&(Ie=3),be===void 0&&(be=[]),new Date().getTime()),j=this.protobuf.encodeCloudSettingReq(k);(qe=this._options.connection)!=null&&qe.startHttpRequest2({interfaceID:14,body:j,ack:!1,idName:q,method:re.METHOD_POST,token:G,mode:xe,reduceRspHeaders:!0},function(B,nt){if((B==null?void 0:B.status_code)===200){var he=Ve.protobuf.decodeCloudSettingRsp(B.body),it=he.message,wt=he.polling_interval,Ee=he.code||0,Oe=(w.default.isLong(Ee)&&(Ee=Ee.toNumber()),new Date().getTime()-pe);if(be.push({timestamp:pe,error:Ee,duration:Oe}),Ee===0){for(var rt={},me=0;me<he.file_response.length;me++){var Se=(Je=he.file_response[me]).message,ge=Je.file_name,ve=Je.hash,ee=Je.g_version,ze=Je.json_data,Je=(Ve._log.info(R.SETTINGFETCHHANDLER_FETCHSETTING+" file rsp "+ge+" "+ee+" "+ve.toString()),Je.code||0),yt=(w.default.isLong(Je)&&(Je=Je.toNumber()),{}),xt="";if(0<(ve==null?void 0:ve.byteLength)&&0<(ze==null?void 0:ze.byteLength))try{var Ye=k.response_compress===0?Ve._options.inflate(ze,{to:"string"}):T.decodeString(ze);yt=JSON.parse(Ye),xt=ve.toString()}catch(J){Ve._log.info(R.SETTINGFETCHHANDLER_FETCHSETTING+" decode fail "+(J==null?void 0:J.message)?J.message:JSON.stringify(J))}rt[ge]={code:Je,message:Se,versions:{hash:xt,g_version:ee},data:yt,hashChange:ve.byteLength===0?0:1}}Ae({code:Ee,msg:it,data:rt,polling_interval:wt,reportData:be})}else De({code:Ee,msg:it,reportData:be})}else Oe=new Date().getTime()-pe,be.push({timestamp:pe,error:B==null?void 0:B.status_code,duration:Oe}),0<Ie?(Ie--,Ve.sendCloudPBRequest(q,k,G,xe,Ae,De,Ie,be)):De(K(K({},V.FILE_REQUEST_FAIL),{reportData:be,status_code:B==null?void 0:B.status_code}))},function(B){var nt=new Date().getTime()-pe;be.push({timestamp:pe,error:B.code,duration:nt}),Ve._options.connection&&((nt=Ve._options.connection)==null||!nt.isDestroy)&&0<Ie?(Ie--,Ve.sendCloudPBRequest(q,k,G,xe,Ae,De,Ie,be)):De(K(K({},V.FILE_REQUEST_FAIL),{reportData:be,status_code:B==null?void 0:B.status_code}))},null,{timeout:4e3,extras:{protoCmd:"GetCloudSettingConfigRequest"}})},oe.SettingFetchHandler=fe=ae},function(ne,oe,fe){Object.defineProperty(oe,"__esModule",{value:!0}),oe.LinkedList=oe.ListNode=void 0,Object.defineProperty(re.prototype,"id",{get:function(){return this._id||null},set:function(M){this._id=M},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"data",{get:function(){return this._data},set:function(M){this._data=M},enumerable:!1,configurable:!0}),re.prototype.hasNext=function(){return this.next&&this.next.id},re.prototype.hasPrev=function(){return this.prev&&this.prev.id};var Y=re;function re(M,F){M===void 0&&(M=null),F===void 0&&(F=null),this.next=null,this.prev=null,this._id=M,this._data=F}function K(){this.start=new Y,this.end=new Y,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}oe.ListNode=Y,K.prototype.insertBefore=function(M,F){return(F=new Y(this._idCounter,F)).next=M,F.prev=M.prev,M.prev&&(M.prev.next=F),M.prev=F,++this._idCounter,++this._numNodes,F},K.prototype.addLast=function(M){return this.insertBefore(this.end,M)},K.prototype.add=function(M){return this.addLast(M)},K.prototype.getFirst=function(){return this._numNodes===0?null:this.start.next},K.prototype.getLast=function(){return this._numNodes===0?null:this.end.prev},K.prototype.size=function(){return this._numNodes},K.prototype.getFromFirst=function(M){var F=0,T=this.start.next;if(0<=M)for(;F<M&&T!==null;)T=T.next,++F;else T=null;if(T===null)throw"Index out of bounds.";return T},K.prototype.get=function(M){return M===0?this.getFirst():M===this._numNodes-1?this.getLast():this.getFromFirst(M)},K.prototype.remove=function(M){return M.prev&&(M.prev.next=M.next),M.next&&(M.next.prev=M.prev),--this._numNodes,M},K.prototype.removeFirst=function(){var M=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):M},K.prototype.removeLast=function(){var M=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):M},K.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},K.prototype.each=function(M){for(var F=this.start;F.hasNext();)M(F=F.next)},K.prototype.find=function(M){for(var F=this.start,T=!1,_=null;F.hasNext()&&!T;)M(F=F.next)&&(_=F,T=!0);return _},K.prototype.map=function(M){for(var F=this.start,T=[];F.hasNext();)M(F=F.next)&&T.push(F);return T},K.prototype.push=function(M){return this.addLast(M)},K.prototype.unshift=function(M){this.insertBefore(0<this._numNodes?this.start.next:this.end,M)},K.prototype.pop=function(){return this.removeLast()},K.prototype.shift=function(){return this.removeFirst()},oe.LinkedList=K},function(ne,oe,fe){var Y=this&&this.__createBinding||(Object.create?function(E,w,R,V){V===void 0&&(V=R),Object.defineProperty(E,V,{enumerable:!0,get:function(){return w[R]}})}:function(E,w,R,V){E[V=V===void 0?R:V]=w[R]}),re=this&&this.__setModuleDefault||(Object.create?function(E,w){Object.defineProperty(E,"default",{enumerable:!0,value:w})}:function(E,w){E.default=w}),K=this&&this.__importStar||function(E){if(E&&E.__esModule)return E;var w={};if(E!=null)for(var R in E)R!=="default"&&Object.hasOwnProperty.call(E,R)&&Y(w,E,R);return re(w,E),w},M=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}},F=(Object.defineProperty(oe,"__esModule",{value:!0}),oe.CloudSettingProtoBuf=void 0,M(fe(3))),T=(K=K(fe(5)),M(fe(18)).default.cloudsetting);function _(){}K.util.Long=F.default,K.configure(),_.prototype.encodeCloudSettingReq=function(E){var w=T.GetCloudSettingConfigRequest;return E=w.create(E),w.encode(E).finish()},_.prototype.decodeCloudSettingRsp=function(E){return T.GetCloudSettingConfigResponse.decode(E)},oe.CloudSettingProtoBuf=_},function(ne,oe,fe){fe.r(oe);var Y=fe(5);fe=fe(4),(Y=Y.default||Y).util.Long=fe.default||fe;let re=Y.util.Long.fromBits||function(){return 0};for(var K=Y.roots,M=Y.types?Y.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},F=Y.types?Y.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},T=Object.keys(M),_={$:function(R){return _[R]?_[R].call(this):K[R].decode?K[R].decode(this,this.uint32()):_.$.call(this,"int32")}},E={$:function(R,V,ae){var q=M[R];return q===void 0?K[R].encode?(this.uint32(ae<<3|2).fork(),K[R].encode(V,this).ldelim()):E.$.call(this,"int32",V,ae):E[R].call(this.uint32(ae<<3|q),V)}},w=0;w<T.length;w++)_[T[w]]=Y.Reader.prototype[T[w]],E[T[w]]=Y.Writer.prototype[T[w]];(function R(V,ae,q,k){for(var G=0,xe=Object.keys(V);G<xe.length;G++){var Ae=xe[G];if(V[Ae].$m&&Object.keys(V[Ae].$m).every(function(De){return Number(De)})){if(q[Ae])throw Error(`nested type ${q}.${Ae} has already exist`);q[Ae]=((De,Ie)=>{function be(B){for(var nt in De)(nt=De[nt])[1].charAt(0)==="{"?this[nt[0]]={}:nt[1].charAt(0)!=="["&&nt[1].charAt(0)!=="<"||(this[nt[0]]=[]);if(B)for(var he=Object.keys(B),it=0;it<he.length;++it)B[he[it]]!=null&&(this[he[it]]=B[he[it]])}var qe,Ve={};for(qe in De){var pe=De[qe],j=pe[1];j.charAt(0)==="{"?(be.prototype[pe[0]]=Y.util.emptyObject,Ve[j]={$m:j.substring(1).split(",").map(function(B,nt){return["$"+(nt+1),B,null]}).reduce(function(B,nt,he){return B[he+1]=nt,B},{})}):be.prototype[pe[0]]=j.charAt(0)==="["||j.charAt(0)==="<"?Y.util.emptyArray:j==="bytes"?Y.util.newBuffer([]):pe[2]&&pe[2].hasOwnProperty("low")&&pe[2].hasOwnProperty("high")?re(pe[2].low,pe[2].high,pe[2].unsigned):pe[2]}return be.create=function(B){return new be(B)},be.decode=function(B,nt){B instanceof Y.Reader||(B=Y.Reader.create(B));for(var he=nt===void 0?B.len:B.pos+nt,it=new be;B.pos<he;){var wt=B.uint32();if(0<(rt=wt>>>3)&&De[rt]){var Ee=De[rt][0];if((Oe=De[rt][1]).charAt(0)==="{")it[Ee]===Y.util.emptyObject&&(it[Ee]={}),rt=be.$namespace[Oe].decode(B,B.uint32()),it[Ee][rt.$1]=rt.$2;else if(Oe.charAt(0)==="["||Oe.charAt(0)==="<"){Oe=Oe.substring(1),it[Ee]&&it[Ee].length||(it[Ee]=[]);var Oe,rt=!_[Oe]&&!K[Oe].decode;if(F[Oe=rt?"int32":Oe]!==void 0&&(7&wt)==2)for(var me=B.uint32()+B.pos;B.pos<me;)it[Ee].push(_.$.call(B,Oe));else it[Ee].push(_.$.call(B,Oe))}else it[Ee]=_.$.call(B,Oe)}else B.skipType(7&wt)}return it},be.encode=function(B,nt){for(var he in nt=nt||Y.Writer.create(),De){var it=De[he][0];if((me=De[he][1]).charAt(0)==="{"){if(B[it]!=null&&B.hasOwnProperty(it))for(var wt=0,Ee=Object.keys(B[it]);wt<Ee.length;++wt)nt.uint32(he<<3|2).fork(),be.$namespace[me].encode({$1:Ee[wt],$2:B[it][Ee[wt]]},nt).ldelim()}else if(me.charAt(0)==="["||me.charAt(0)==="<"){var Oe=me.charAt(0)==="<",rt=(me=me.substring(1),B[it]);if(rt!=null&&rt.length){var me=M[me]!==void 0||K[me].encode?me:"int32";if(Oe&&F[me]!==void 0){for(nt.uint32(he<<3|2).fork(),wt=0;wt<rt.length;wt++)E[me].call(nt,rt[wt]);nt.ldelim()}else for(wt=0;wt<rt.length;wt++)E.$.call(nt,me,rt[wt],he)}}else B[it]!=null&&B.hasOwnProperty(it)&&E.$.call(nt,me,B[it],he)}return nt},Object.keys(Ve).length&&(be.$namespace=R(Ve,ae+"."+Ie,be.$namespace||{},!0)),be})(V[Ae].$m,Ae)}else V[Ae].$s?q[Ae]=((De,Ie)=>{function be(qe,Ve,pe){Y.rpc.Service.call(this,qe,Ve,pe)}return((be.prototype=Object.create(Y.rpc.Service.prototype)).constructor=be).create=function(qe,Ve,pe){return new be(qe,Ve,pe)},Object.keys(De).forEach(function(qe){var Ve=De[qe];function pe(j,B){return this.rpcCall(pe,K[Ve[0]],K[Ve[1]],j,B)}Object.defineProperty(pe,"name",{value:qe}),Object.defineProperty(pe,"path",{value:ae+"."+Ie}),be.prototype[qe]=pe}),be})(V[Ae].$s,Ae):V[Ae].$e&&Object.values(V[Ae].$e).every(function(De){return Number(De)===De})&&(q[Ae]=(De=>{for(var Ie=Object.keys(De),be={},qe=0;qe<Ie.length;qe++)be[be[Ie[qe]]=De[Ie[qe]]]=Ie[qe];return be})(V[Ae].$e));q[Ae]&&!k&&(K[ae+"."+Ae]=q[Ae]),delete V[Ae].$m,delete V[Ae].$s,delete V[Ae].$e,q[Ae]=R(V[Ae],ae?ae+"."+Ae:Ae,q[Ae]||{})}return q})({cloudsetting:{cloudsetting:{CloudSettingFileResponse:{$m:{1:["code","int64",{low:0,high:0,unsigned:!1}],2:["message","string",""],3:["file_name","string",""],4:["global_version","string",""],5:["version","string",""],6:["app_version","string",""],7:["json_data","bytes",[]],8:["hash","bytes",[]],9:["g_version","uint32",0]}},File:{$m:{1:["file_name","string",""],2:["hash","bytes",[]],3:["g_version","uint32",0]}},GetCloudSettingConfigRequest:{$m:{1:["product","cloudsetting.cloudsetting.Product",0],2:["response_compress","int32",0],3:["file_list","<string",null],4:["param_list","<cloudsetting.cloudsetting.Param",null],5:["files","<cloudsetting.cloudsetting.File",null],6:["p_version","uint32",0]}},GetCloudSettingConfigResponse:{$m:{1:["code","int64",{low:0,high:0,unsigned:!1}],2:["message","string",""],3:["polling_interval","int32",0],4:["file_response","<cloudsetting.cloudsetting.CloudSettingFileResponse",null]}},Param:{$m:{1:["key","string",""],2:["value","string",""]}},Product:{$e:{RTC:0,WEB_RTC:1,ZIM:2,ROOM_KIT:3,DOC_SHARE:4,WHITE_BOARD:5,SELF_CHECK:999,TEST_ANOOUS:1e3}}}}},"",K,!1),Y.util.global.cloudsetting=K.cloudsetting,oe.default=K.cloudsetting}],Qe={},Ne.m=tt,Ne.c=Qe,Ne.d=function(ne,oe,fe){Ne.o(ne,oe)||Object.defineProperty(ne,oe,{enumerable:!0,get:fe})},Ne.r=function(ne){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ne,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ne,"__esModule",{value:!0})},Ne.t=function(ne,oe){if(1&oe&&(ne=Ne(ne)),8&oe||4&oe&&typeof ne=="object"&&ne&&ne.__esModule)return ne;var fe=Object.create(null);if(Ne.r(fe),Object.defineProperty(fe,"default",{enumerable:!0,value:ne}),2&oe&&typeof ne!="string")for(var Y in ne)Ne.d(fe,Y,(function(re){return ne[re]}).bind(null,Y));return fe},Ne.n=function(ne){var oe=ne&&ne.__esModule?function(){return ne.default}:function(){return ne};return Ne.d(oe,"a",oe),oe},Ne.o=function(ne,oe){return Object.prototype.hasOwnProperty.call(ne,oe)},Ne.p="",Ne(Ne.s=7);function Ne(ne){var oe;return(Qe[ne]||(oe=Qe[ne]={i:ne,l:!1,exports:{}},tt[ne].call(oe.exports,oe,oe.exports,Ne),oe.l=!0,oe)).exports}var tt,Qe})(Z(6994),Z(3788),Z(6361),Z(955),Z(5178))},4908:function(ot,Re,Z){Z.d(Re,{$7:function(){return Ui},$9:function(){return ci},$H:function(){return $e},$Q:function(){return mr},$g:function(){return nt},AJ:function(){return qe},AW:function(){return qt},B$:function(){return ce},BY:function(){return Q},Bc:function(){return Dr},CK:function(){return Nr},Cp:function(){return Je},D1:function(){return Mr},E$:function(){return yt},EV:function(){return Gr},F:function(){return Or},FQ:function(){return $n},Fv:function(){return Te},GV:function(){return mi},HF:function(){return ti},Hu:function(){return sr},Io:function(){return Br},J8:function(){return Ee},Jd:function(){return _r},Jv:function(){return G},KG:function(){return be},KZ:function(){return wt},Kt:function(){return lr},Lk:function(){return Ue},MJ:function(){return ge},Mc:function(){return ur},Mu:function(){return R},Mw:function(){return Mn},N7:function(){return Y},Nr:function(){return De},ON:function(){return ve},Of:function(){return go},Og:function(){return E},Oq:function(){return fe},Ov:function(){return Rn},Pe:function(){return wn},RI:function(){return qr},S2:function(){return ar},Sb:function(){return vi},TW:function(){return Dt},Ux:function(){return Pn},V0:function(){return st},Vz:function(){return xe},We:function(){return Oe},Wg:function(){return k},Xk:function(){return _t},YO:function(){return q},Yu:function(){return Pe},Z1:function(){return M},_F:function(){return Lt},_T:function(){return Ae},_g:function(){return Yt},_u:function(){return kn},aH:function(){return Nn},aT:function(){return Ve},bs:function(){return gi},ch:function(){return w},co:function(){return He},e7:function(){return oe},eH:function(){return re},eU:function(){return Qe},er:function(){return j},es:function(){return Vn},fF:function(){return it},fj:function(){return jn},fn:function(){return Ye},fo:function(){return V},gf:function(){return he},i6:function(){return Ne},iJ:function(){return xi},k1:function(){return ee},kA:function(){return Le},kn:function(){return Jn},lZ:function(){return Be},li:function(){return Bi},nO:function(){return ne},ns:function(){return ui},ny:function(){return me},oI:function(){return B},oW:function(){return pe},oe:function(){return Qr},oq:function(){return tt},ov:function(){return rt},pR:function(){return oi},pT:function(){return K},r2:function(){return nr},rH:function(){return J},rP:function(){return Se},r_:function(){return _},tH:function(){return Ge},tI:function(){return xt},tp:function(){return T},v2:function(){return ae},vB:function(){return Ar},vW:function(){return ke},wH:function(){return ut},w_:function(){return dt},wd:function(){return no},x6:function(){return ze},xp:function(){return F},zF:function(){return Ie}});var I=Z(8627),P=Z(5095),Pe="/sdk/init",ke={event:Pe,error:{_n:I.ZEp},system_info:P.tK,servers:P.yp},ce={event:"/sdk/login"},Ne={event:"listener"},tt={event:Pe},Qe={event:"/sdk/create_stream",error:{yn:I.OrZ,wn:I.LLz,Sn:I.t85,En:I.yK,In:I.L8E,Rn:I.FB3,Tn:I.mrK,Cn:I.zs3,An:I.Be2,zn:I.JSm},stream_type:P.tK,screen:P.Gq,camera:P.Gq,custom:P.Gq,preview_conf:P.Gq,media_stream_id:P.tK},ne={event:"/sdk/create_zego_stream",local_stream_id:P.tK,stream_options:P.Gq},oe={event:"/sdk/start_capture_mic",local_stream_id:P.tK,stream_options:P.Gq},fe={event:"/sdk/start_capture_camera",local_stream_id:P.tK,stream_options:P.Gq},Y={event:"/sdk/start_capture_camera_mic",local_stream_id:P.tK,stream_options:P.Gq},re={event:"/sdk/start_capture_custom_audio",local_stream_id:P.tK,stream_options:P.Gq},K={event:"/sdk/start_capture_custom_video",local_stream_id:P.tK,stream_options:P.Gq},M={event:"/sdk/start_capture_custom_video_audio",local_stream_id:P.tK,stream_options:P.Gq},F={event:"/sdk/start_capture_screen_video",local_stream_id:P.tK,stream_options:P.Gq},T={event:"/sdk/start_capture_screen_video_audio",local_stream_id:P.tK,stream_options:P.Gq},_={event:"/sdk/update_publish_stream",local_stream_id:P.tK,update_type:P.Tr},E={event:"/sdk/start_publish",error:{Dn:I.LLz,Nn:I.Q9p,Pn:I.xfZ,Mn:I.gSF,xn:I.PA0,jn:I.fzq,qn:I.f43,Ln:I.qvY,Bn:I.S4u,Un:I.SRE,Gn:I.Xxx,Jn:I.g9p,Fn:I.jZ$,Hn:I.$wo,Vn:I.SmZ,Qn:I.VU9,Yn:I.MrD,Kn:I.ZpF,Zn:I.iei,Xn:I.aa2,Wn:I.HCP,$n:I.dg1,te:I._68,ie:I.kbF,ne:I.kOd,ee:I.WP4,re:I.JDv,se:I.Q3v,ue:I.RBR,ae:I.NCg,ce:I.xbZ,he:I.OdW,fe:I.sJH,le:I.MrS},urls:P.yp,server_url:P.tK,publish_option:P.Gq,message:P.tK,stream_id:P.tK,stream_sid:P.Tr,room_id:P.tK,video_en_codec_id:P.Tr,cap_w:P.Tr,cap_h:P.Tr,w:P.Tr,h:P.Tr,video_en_fps:P.Tr,video_en_bps:P.Tr,audio_c_channel_count:P.Tr,audio_en_bps:P.Tr,aec_level:P.Tr,ans_level:P.Tr,agc:P.yS,traffic_control_min_video_bitrate:{bitrate:P.Tr,mode:P.Tr},cap_volume:P.Tr,enable_camera:P.yS,enable_mic:P.yS,video_activate:P.yS,audio_activate:P.yS,gw_version:P.Tr,is_dual_stream:P.Tr,is_mini:P.yS,is_peer:P.yS},w={event:"/publish/start",is_peer:P.yS,reason:P.tK,url:P.tK,ip:P.tK,peer_id:P.Tr,source_type:P.tK,net_protocol:P.tK,wait_consume:P.Tr,dispatch_consume:P.Tr,signal_consume:P.Tr,is_dual_stream:P.Tr,is_mini:P.yS,mini_error:P.Tr,port:P.Tr},R={event:"/publish/rtc_dispatch",ip_mode:P.Tr,gw_nodes:P.yp,ip_infos:P.Gq,ip_v6_infos:P.Gq},V={event:"/publish/restart",stream_id:P.tK,server_url:P.tK,reason_code:P.Tr,is_dual_stream:P.Tr,is_mini:P.yS,mini_error:P.Tr},ae={event:"/sdk/publish",room_id:P.tK,room_sid_string:P.tK,retry_btime:P.Tr,max_retry_interval:P.Tr,fail_cnt:P.Tr,continuous_fail_cnt:P.Tr,probe_ip_cnt:P.Tr,valid_probe_ip_cnt:P.Tr,poor_quality_retry_cnt:P.Tr,use_resource_type:P.yp,probe_not_trigger_retry_info:P.Gq,stop_reason:P.tK,child_error:P.Tr,try_time:P.Tr,try_cnt:P.Tr,server_url:P.tK,publish_begin_time:P.Tr,publish_state_time:P.Tr,bitrate:P.Tr,h:P.Tr,w:P.Tr,cap_w:P.Tr,cap_h:P.Tr,fps:P.Tr,use_na:P.Tr,env:P.Tr,webrtc_sid:P.Tr,stream_id:P.tK,itemtype:P.tK,total_d:P.Tr,valid_d:P.Tr,tempbroken_cnt:P.Tr},q={event:"/sdk/api/publish_video_c_size",webrtc_sid:P.Tr,w:P.Tr,h:P.Tr},k={event:"/sdk/play_video_size_changed",webrtc_sid:P.Tr,w:P.Tr,h:P.Tr},G={event:"/rtc/publish",tryidx:P.Tr,url:P.tK,ip:P.tK,net_protocol:P.tK,lsttime:P.Tr,denied_info:P.tK,dispatch_external_ip:P.tK,total_stat:P.Gq,room_id:P.tK,room_sid_string:P.tK,resource_type:P.tK,protocol:P.tK,stop_reason:P.tK,try_time:P.Tr},xe={event:"/sdk/stop_publish",error:{wn:I.LLz},stream_id:P.tK,stream_sid:P.Tr,room_id:P.tK},Ae={event:"/rtc/publish_stream_state_error"},De={event:"/sdk/start_play",error:{de:I.d49,ve:I.ann,me:I.clM,pe:I.J79,ge:I.S4u,be:I.RfS,_e:I.Q9p,ye:I.xfZ,we:I.gSF,Se:I.PA0,Ee:I.b1q,ke:I.RZs,Oe:I.XHx,Ie:I.cMG,Re:I.zML,Te:I.ekj,Vn:I.dqB,Qn:I.gHA,Kn:I.MK1,Yn:I.dXc,Zn:I.hje,Xn:I.Zws,Wn:I.SB8,te:I.B3d,$n:I.wxm,Ce:I.Arx,ne:I.lgu,ee:I.Tij,Ae:I.pWJ,ze:I.MuX,De:I.I4J,he:I.OdW,Ne:I.ckD,Me:I.hYx,xe:I.T_8},room_id:P.tK,urls:P.yp,server_url:P.tK,video_layer:P.Tr,play_option:P.Gq,message:P.tK,stream_id:P.tK,stream_sid:P.Tr,resource_mode:P.Tr,src:P.tK,video_codec_id:P.tK,room_sid_string:P.tK,is_multi:P.yS,audio_activate:P.yS,video_activate:P.yS,gw_version:P.Tr,use_na:P.Tr,biz_product:P.Tr,is_peer:P.yS,is_mini:P.yS},Ie={event:"/play/start",tryidx:P.Tr,is_peer:P.yS,reason:P.tK,url:P.tK,ip:P.tK,port:P.Tr,peer_id:P.Tr,source_type:P.tK,net_protocol:P.tK,wait_consume:P.Tr,dispatch_consume:P.Tr,signal_consume:P.Tr,biz_product:P.Tr,is_mini:P.yS},be={event:"/play/rtc_dispatch",ip_mode:P.Tr,gw_nodes:P.yp,ip_infos:P.Gq,ip_v6_infos:P.Gq},qe={event:"/play/l3_dispatch",ip_mode:P.Tr,gw_nodes:P.yp,ip_infos:P.Gq,ip_v6_infos:P.Gq},Ve={event:"/play/restart",stream_id:P.tK,server_url:P.tK,reason_code:P.Tr,ip:P.tK,is_mini:P.yS},pe={event:"/sdk/play",audio_cumulative_break_time:P.Tr,audio_cumulative_decode_time:P.Tr,video_cumulative_break_time:P.Tr,video_cumulative_decode_time:P.Tr,l3_a_break_time:P.Tr,l3_a_decode_time:P.Tr,l3_v_break_time:P.Tr,l3_v_decode_time:P.Tr,rtc_a_break_time:P.Tr,rtc_a_decode_time:P.Tr,rtc_v_break_time:P.Tr,rtc_v_decode_time:P.Tr,fft_audio:P.Tr,fft_video:P.Tr,room_id:P.tK,room_sid_string:P.tK,retry_btime:P.Tr,max_retry_interval:P.Tr,use_na:P.Tr,fail_cnt:P.Tr,continuous_fail_cnt:P.Tr,probe_ip_cnt:P.Tr,valid_probe_ip_cnt:P.Tr,poor_quality_retry_cnt:P.Tr,probe_not_trigger_retry_info:P.Gq,use_resource_type:P.yp,stop_reason:P.tK,child_error:P.Tr,try_time:P.Tr,try_cnt:P.Tr,webrtc_sid:P.Tr,itemtype:P.tK,server_url:P.tK,play_begin_time:P.Tr,play_state_time:P.Tr,play_state_cnt:P.Tr,first_frame_time:P.Tr,protocol:P.tK,dispatch_external_ip:P.tK,total_stat:P.Gq,w:P.Tr,h:P.Tr,abrc:P.Tr,vbrc:P.Tr,vinfo:P.Gq,total_d:P.Tr,valid_d:P.Tr,tempbroken_cnt:P.Tr},j={event:"/rtc/play",tryidx:P.Tr,url:P.tK,ip:P.tK,stream_id:P.tK,room_id:P.tK,room_sid_string:P.tK,net_protocol:P.tK,lsttime:P.Tr,denied_info:P.tK,stop_reason:P.tK,dispatch_external_ip:P.tK,env:P.Tr,resource_type:P.tK,protocol:P.tK,total_stat:P.Gq,vinfo:P.Gq,try_time:P.Tr},B={event:"/sdk/stop_play",error:{wn:I.LLz},room_id:P.tK,stream_id:P.tK,webrtc_sid:P.Tr,stream_sid:P.Tr,biz_product:P.Tr},nt={event:"/rtc/play_stream_state_error"},he={event:"/device/list",error:{yn:I.OrZ,je:I.s_m},dev_list:P.Gq,dev_kind:P.tK},it={event:"/device/audio_device_changed",error:{yn:I.OrZ,je:I.s_m},interrupt:P.Tr,device:P.tK,device_name:P.tK},wt={event:"/device/video_device_changed",error:{yn:I.OrZ,je:I.s_m},interrupt:P.Tr,device:P.tK,device_name:P.tK},Ee={event:"/sdk/check_system",capability:P.Gq},Oe={event:"/sdk/remote_camera_update",stream_id:P.tK,camera_status:P.tK,status_code:P.Tr},rt={event:"/sdk/remote_mic_update",stream_id:P.tK,mic_status:P.tK,status_code:P.Tr},me={event:"/sdk/destroy_stream",error:{qe:I.S5f},stop_reason:P.tK},Se={event:"/device/api/audio_output",device:P.tK,device_name:P.tK,reason_type:P.tK},ge={event:"/liveroom/recv_stream_update_info",stream_update_type:P.tK,stream_seq:P.Tr,stream_list:P.Gq,error:{Le:I.sVF}},ve={event:"/liveroom/send_stream_update_info",stream_update_type:P.tK,stream_extra_info:P.tK,stream_id:P.tK,send_seq:P.Tr,use_na:P.Tr},ee={event:"/liveroom/get_current_stream_list",room_id:P.tK,room_sid_string:P.tK,stream_seq:P.Tr,stream_size:P.Tr,stream_list:P.Gq,use_ua:P.Tr,error:{wn:I.LLz,NOT_LOGIN:I.S4u}},ze={event:"/sdk/net_first_video_frame",webrtc_sid:P.Tr,fft_consumed:P.Gq,resource_type:P.tK,reliability:P.Tr,push_consumed:P.Tr,prepare_recv_consumed:P.Tr,connected_consumed:P.Tr,protocol:P.tK,biz_product:P.Tr,dev_changed:P.yS},Je={event:"/sdk/net_first_audio_frame",webrtc_sid:P.Tr,fft_consumed:P.Gq,resource_type:P.tK,reliability:P.Tr,push_consumed:P.Tr,prepare_recv_consumed:P.Tr,connected_consumed:P.Tr,protocol:P.tK,biz_product:P.Tr,dev_changed:P.yS},yt={event:"/app/lifecycle",state:P.tK},xt={event:"/sdk/publish_volume_changed",old_cap_volume:P.Tr,cap_volume:P.Tr,change_duration:P.Tr,error:{wn:I.ZEp}},Ye={event:"/sdk/listener"},J={event:"/sdk/network_change",current_client_ip:P.tK,last_client_ip:P.tK},He={event:"/sdk/network_first_ntp_sync",ntp_source:P.Tr,ntp_offset:P.Tr},Le={event:"/sdk/net_probe",net_quality:P.Tr,node_list:P.yp},Ue={event:"/sdk/net_probe_result",is_switch:P.yS,is_publish:P.yS,stream_id:P.tK,result:P.Tr,node:P.tK,net_quality:P.Tr,probe_net_quality:P.Tr},_t={event:"/cloud_setting/cache",files:P.Gq},st={event:"/cdn/play",protocol:P.tK,tryidx:P.Tr,url:P.tK,stop_reason:P.tK,biz_product:P.Tr},Dt={event:"/l3/play",protocol:P.tK,tryidx:P.Tr,url:P.tK,stop_reason:P.tK,biz_product:P.Tr,try_time:P.Tr},qt={event:"/sdk/play_src_changed",last_src:P.tK,src:P.tK,biz_product:P.Tr},Lt={event:"/publish/create_offer",sdp:P.tK,stream_type:P.tK,is_mini:P.yS,is_dual_stream:P.Tr},ut={event:"/publish/set_local_sdp",sdp:P.tK,stream_type:P.tK,is_mini:P.yS,is_dual_stream:P.Tr},Yt={event:"/publish/create_session",sdp:P.tK,is_mini:P.yS,gw_nodes:P.yp,gw_nodes_ttl:P.Tr,gw_version:P.Tr,webrtc_sid:P.Tr},wn={event:"/publish/set_remote_sdp",sdp:P.tK,is_mini:P.yS,webrtc_sid:P.Tr,is_dual_stream:P.Tr},Rn={event:"/publish/ice_connected",webrtc_sid:P.Tr},jn={event:"/publish/rtc_publish_event",event_state:P.Tr,webrtc_sid:P.Tr},Mn={event:"/rtc/play_event_message",event_state:P.Tr,webrtc_sid:P.Tr},Pn={event:"/rtc/recv_close_session",err_info:P.Gq},ci={event:"/rtc/recv_reset_session"},Nr={event:"/rtc/ice_connection_state_changed",ice_state:P.tK},nr={event:"/publish/send_media_desc",webrtc_sid:P.Tr,remote_sdp:P.tK},Nn={event:"/publish/send_ice_candidate",candidate_info:P.Gq},_r={event:"/play/create_offer",sdp:P.tK,is_mini:P.yS,stream_type:P.tK},$n={event:"/play/set_local_sdp",sdp:P.tK,is_mini:P.yS,stream_type:P.tK},Dr={event:"/play/create_session",sdp:P.tK,is_mini:P.yS,gw_nodes:P.yp,gw_nodes_ttl:P.Tr,gw_version:P.Tr,webrtc_sid:P.Tr},Gr={event:"/play/set_remote_sdp",sdp:P.tK,is_mini:P.yS,webrtc_sid:P.Tr},Or={event:"/play/ice_connected",webrtc_sid:P.Tr},mi={event:"/play/send_media_desc",webrtc_sid:P.Tr,remote_sdp:P.tK},Ar={event:"/play/send_ice_candidate",candidate_info:P.Gq},sr={event:"/zegoconn/connect"},kn={event:"/sdk/net_ip_stack",ipv4:P.tK,ipv6:P.tK},Jn={event:"/sdk/media_login_req"},Mr={event:"/zegoconn/proxy_connect",service_no:P.Tr,proxy_link_sources:P.Tr,recv_time:P.Tr,connect_stream:P.Tr},ar={event:"/zegoconn/proxy_broken",service_no:P.Tr},oi={event:"/zegoconn/proxy_disconnect",service_no:P.Tr},gi={event:"/rtc/exception_update",stream:P.tK,code:P.Tr,message:P.tK},go={event:"/sdk/publish_target",error:{wn:I.ZEp,Be:I.xU2,Ue:I.S4u,Ge:I.I7C,Je:I.HO9,Fe:I.aUw,He:I.Oy0}},xi={event:"/mss/pushadd",error:{wn:I.ZEp},stream_id:P.tK,url:P.tK},ui={event:"/mss/pushdel",error:{wn:I.ZEp},stream_id:P.tK,url:P.tK},no={event:"/sdk/set_video_config",error:{wn:I.ZEp,qe:I.S5f},video_params:P.Gq,video_conf:P.Gq},Ui={event:"/sdk/set_audio_config",error:{wn:I.ZEp,qe:I.S5f},audio_params:P.Gq,audio_conf:P.Gq},vi={event:"/sdk/api/publish_video_en_size",w:P.Tr,h:P.Tr},Br={event:"/sdk/api/publish_video_en_bps",bitrate:P.Tr},ur={event:"/sdk/api/publish_video_en_fps",fps:P.Tr},Qr={event:"/sdk/replace_track",error:{wn:I.ZEp},track_kind:P.tK},qr={event:"/device/api/video_c",error:{wn:I.ZEp,Ve:I.ckg,qe:I.S5f,Qe:I.jut},device:P.tK,device_name:P.tK,facing_mode:P.tK},Bi={event:"/device/api/audio_c",error:{wn:I.ZEp,Ve:I.ckg,qe:I.S5f},device:P.tK,device_name:P.tK},Vn={event:"/sdk/play_content_changed",webrtc_sid:P.Tr,video_activate:P.yS,audio_activate:P.yS,video_layer:P.Tr},mr={event:"/sdk/mute_publish_video",mute_type:P.Tr,retain:P.yS},lr={event:"/sdk/mute_publish_audio",mute_type:P.Tr},ti={event:"/device/enable_mic",enable:P.yS,stream_list:P.Gq},Q={event:"/device/enable_camera",enable:P.yS,stream_list:P.Gq},dt={event:"/sdk/mute_play_video",mute_type:P.Tr},Be={event:"/sdk/mute_play_audio",mute_type:P.Tr},Te={event:"/liveroom/send_stream_extra_info",error:{wn:I.ZEp,Ye:I.PTE,Ue:I.S4u,Be:I.xU2,Ke:I.m6U,_zpg_kExtraInfoNull:I.PTE,_zpg_kExtraInfoTooLong:I.V2t},stream_id:P.tK,send_seq:P.Tr,stream_extra_info:P.Gq,room_id:P.tK,room_sid_string:P.tK,use_na:P.Tr},$e={event:"/active/sei",action:P.Tr,info_type:P.Tr},Ge=["sdp","remote_sdp"]},5095:function(ot,Re,Z){Z.d(Re,{Gq:function(){return I},Tr:function(){return ke},tK:function(){return P},yS:function(){return ce},yp:function(){return Pe}});var I=function(Ne){return Ne},P=function(Ne){return Ne},Pe=function(Ne){return Ne},ke=function(Ne){return Ne},ce=function(Ne){return Ne}},5178:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),I.enc.Utf8)},5471:function(ot,Re,Z){var I,P,Pe,ke,ce,Ne,tt;ot.exports=(tt=Z(9021),Pe=(P=(I=tt).lib).WordArray,ce=[],Ne=I.algo.SHA1=(ke=P.Hasher).extend({_doReset:function(){this._hash=new Pe.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Qe,ne){for(var oe=this._hash.words,fe=oe[0],Y=oe[1],re=oe[2],K=oe[3],M=oe[4],F=0;F<80;F++){if(F<16)ce[F]=0|Qe[ne+F];else{var T=ce[F-3]^ce[F-8]^ce[F-14]^ce[F-16];ce[F]=T<<1|T>>>31}var _=(fe<<5|fe>>>27)+M+ce[F];_+=F<20?1518500249+(Y&re|~Y&K):F<40?1859775393+(Y^re^K):F<60?(Y&re|Y&K|re&K)-1894007588:(Y^re^K)-899497514,M=K,K=re,re=Y<<30|Y>>>2,Y=fe,fe=_}oe[0]=oe[0]+fe|0,oe[1]=oe[1]+Y|0,oe[2]=oe[2]+re|0,oe[3]=oe[3]+K|0,oe[4]=oe[4]+M|0},_doFinalize:function(){var Qe=this._data,ne=Qe.words,oe=8*this._nDataBytes,fe=8*Qe.sigBytes;return ne[fe>>>5]|=128<<24-fe%32,ne[14+(fe+64>>>9<<4)]=Math.floor(oe/4294967296),ne[15+(fe+64>>>9<<4)]=oe,Qe.sigBytes=4*ne.length,this._process(),this._hash},clone:function(){var Qe=ke.clone.call(this);return Qe._hash=this._hash.clone(),Qe}}),I.SHA1=ke._createHelper(Ne),I.HmacSHA1=ke._createHmacHelper(Ne),tt.SHA1)},5733:function(ot){ot.exports=D},5772:function(ot,Re,Z){Z.d(Re,{BeautyEffect:function(){return rt}});var I=Z(8627),P=Z(8866),Pe=Z(4872),ke=Z(327),ce=function(me,Se,ge,ve){return new(ge||(ge=Promise))(function(ee,ze){function Je(Ye){try{xt(ve.next(Ye))}catch(J){ze(J)}}function yt(Ye){try{xt(ve.throw(Ye))}catch(J){ze(J)}}function xt(Ye){var J;Ye.done?ee(Ye.value):(J=Ye.value,J instanceof ge?J:new ge(function(He){He(J)})).then(Je,yt)}xt((ve=ve.apply(me,[])).next())})},Ne=function(me,Se){var ge,ve,ee,ze,Je={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ze={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function yt(xt){return function(Ye){return(function(J){if(ge)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,J[0]&&(Je=0)),Je;)try{if(ge=1,ve&&(ee=2&J[0]?ve.return:J[0]?ve.throw||((ee=ve.return)&&ee.call(ve),0):ve.next)&&!(ee=ee.call(ve,J[1])).done)return ee;switch(ve=0,ee&&(J=[2&J[0],ee.value]),J[0]){case 0:case 1:ee=J;break;case 4:return Je.label++,{value:J[1],done:!1};case 5:Je.label++,ve=J[1],J=[0];continue;case 7:J=Je.ops.pop(),Je.trys.pop();continue;default:if(ee=Je.trys,!((ee=ee.length>0&&ee[ee.length-1])||J[0]!==6&&J[0]!==2)){Je=0;continue}if(J[0]===3&&(!ee||J[1]>ee[0]&&J[1]<ee[3])){Je.label=J[1];break}if(J[0]===6&&Je.label<ee[1]){Je.label=ee[1],ee=J;break}if(ee&&Je.label<ee[2]){Je.label=ee[2],Je.ops.push(J);break}ee[2]&&Je.ops.pop(),Je.trys.pop();continue}J=Se.call(me,Je)}catch(He){J=[6,He],ve=0}finally{ge=ee=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}})([xt,Ye])}}},tt="zc.p.0.sbe.3",Qe=(function(){function me(Se){this.an=Se,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0}return me.prototype.startRecordBeautyEffectOutput=function(Se){return ce(this,void 0,void 0,function(){var ge,ve,ee,ze=this;return Ne(this,function(Je){switch(Je.label){case 0:return ge=6,this.recordID?(this.an.warn(tt+" detector is already recording"),[2,{result:!0}]):(ve=new Date().getTime(),this.recordID=ve,this.targetFrameRate=Se,this.recordedFrameCount=0,this.recordingDuration=ge,[4,new P.l3(function(yt){window.setTimeout(yt,1e3*ze.recordingDuration)})]);case 1:return Je.sent(),this.recordID!==ve?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,ee=this.recordedFrameCount/ge,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.an.warn(tt+" detect effect overload: current fps: "+ee),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:ee}]):(this.an.info(tt+" detect effect current fps: "+ee),[2,{result:!0}]))}})})},me.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0},me.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},me})();function ne(me){for(var Se=me,ge="",ve=0;ve<Se.length;ve++){var ee=Se.charCodeAt(ve),ze=ee;ee>=65&&ee<=90&&(ze=(ee-65-13+26)%26+65),ee>=97&&ee<=122&&(ze=(ee-97-13+26)%26+97),ge+=String.fromCharCode(ze)}return ge}var oe,fe=(function(){function me(Se,ge,ve){this.gl=Se,this.width=ge,this.height=ve,this.type="baseShader",this.program=null,this.program=null}return me.prototype.setEffectConfig=function(Se){},me.prototype.setConstUniforms=function(){},me.prototype.resetResolution=function(Se,ge){this.width=Se||this.width,this.height=ge||this.height},me.prototype.render=function(){},me.prototype.renderPreTextures=function(Se,ge,ve){},me.prototype.makeProgram=function(Se,ge){var ve=this.gl,ee=ne(Se),ze=ne(ge),Je=this.makeShader(ee,ve.VERTEX_SHADER),yt=this.makeShader(ze,ve.FRAGMENT_SHADER),xt=ve.createProgram();return ve.attachShader(xt,Je),ve.attachShader(xt,yt),ve.linkProgram(xt),ve.getProgramParameter(xt,ve.LINK_STATUS),xt},me.prototype.release=function(){},me.prototype.makeShader=function(Se,ge){var ve=this.gl,ee=ve.createShader(ge);return ve.shaderSource(ee,Se),ve.compileShader(ee),ve.getShaderParameter(ee,ve.COMPILE_STATUS),ee},me})(),Y=`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez uvtuc sybng grkOyheJvqguBssfrg;
havsbez uvtuc sybng grkOyheUrvtugBssfrg;
inelvat irp2 i_grkpbbeq0;
inelvat irp4 grkgherFuvsg_1;
inelvat irp4 grkgherFuvsg_2;
inelvat irp4 grkgherFuvsg_3;
inelvat irp4 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;

  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;

  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);
  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);
  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);
}`,re=`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
inelvat uvtuc irp4 grkgherFuvsg_1;
inelvat uvtuc irp4 grkgherFuvsg_2;
inelvat uvtuc irp4 grkgherFuvsg_3;
inelvat uvtuc irp4 grkgherFuvsg_4;
ibvq znva(ibvq) { 
  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;
  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;
  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); 
}`,K=(oe=function(me,Se){return oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ge,ve){ge.__proto__=ve}||function(ge,ve){for(var ee in ve)Object.prototype.hasOwnProperty.call(ve,ee)&&(ge[ee]=ve[ee])},oe(me,Se)},function(me,Se){if(typeof Se!="function"&&Se!==null)throw new TypeError("Class extends value "+String(Se)+" is not a constructor or null");function ge(){this.constructor=me}oe(me,Se),me.prototype=Se===null?Object.create(Se):(ge.prototype=Se.prototype,new ge)}),M=(function(me){function Se(ge,ve,ee){var ze=me.call(this,ge,ve,ee)||this;return ze.width=ve,ze.height=ee,ze.type="BlurShader",ze.blurXProgram=null,ze.blurYProgram=null,ze.diffProgram=null,ze.uIntensity=null,ze.smoothIntensity=.5,ze.blurTextureList=[],ze.blurBufferList=[],ze.blurXProgram=ze.makeProgram(Y,re),ze.setBorderBlurProgram(ze.blurXProgram,1/(ve||1),0),ze.blurYProgram=ze.makeProgram(Y,re),ze.setBorderBlurProgram(ze.blurYProgram,0,1/(ee||1)),ze.diffProgram=ze.makeProgram(`nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez zng4 hCZIZngevk;
inelvat irp2 i_grkpbbeq0;
ibvq znva()
{
  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
}`,`cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
ibvq znva(ibvq) {
  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  irp4 qvssPbybe = vPbybe - zrnaPbybe;
  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);
  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);
  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);
  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);
}`),ze.setDiffBlurProgram(ze.diffProgram),ze.program=ze.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
inelvat irp2 i_grkpbbeq0;
havsbez sybng jvqguBssfrg;
havsbez sybng urvtugBssfrg;
inelvat irp2 grkgherFuvsg_1;
inelvat irp2 grkgherFuvsg_2;
inelvat irp2 grkgherFuvsg_3;
inelvat irp2 grkgherFuvsg_4;
ibvq znva()
{
  ty_Cbfvgvba = nCbfvgvba;
  i_grkpbbeq0 = nGrkPbbeqvangr.kl;
  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));
  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));
  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));
}
`,`
cerpvfvba zrqvhzc sybng;
havsbez fnzcyre2Q hGrkgher;
inelvat irp2 i_grkpbbeq0;
havsbez fnzcyre2Q oyheGrkgher;
havsbez fnzcyre2Q oyheQvssGrkgher;
havsbez ybjc sybng oyheNycun;
ibvq znva(ibvq) {
  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);
  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);
  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);
  ybjc sybng nycun = oyheNycun * 1.0;
  ybjc sybng gurgn = 0.1;
  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);
  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);
  zrqvhzc sybng xZva = 0.1;
  ybjc irp3 erfhygPbybe;
  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;
  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);
  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));
  ty_SentPbybe = irp4(erfhygPbybe,1.0);
}`),ze.initBlurBuffer(),ze}return K(Se,me),Se.prototype.setEffectConfig=function(ge){isNaN(ge.smoothIntensity)||(this.smoothIntensity=ge.smoothIntensity/100)},Se.prototype.render=function(){this.gl.uniform1f(this.uIntensity,this.smoothIntensity)},Se.prototype.initBlurBuffer=function(){var ge=this,ve=this.gl;this.blurTextureList.forEach(function(yt){var xt;yt&&((xt=ge.gl)===null||xt===void 0||xt.deleteTexture(yt))}),this.blurBufferList.forEach(function(yt){var xt;yt&&((xt=ge.gl)===null||xt===void 0||xt.deleteFramebuffer(yt))}),this.blurTextureList=[],this.blurBufferList=[];for(var ee=0;ee<3;ee++){var ze=ve.createTexture();if(!ze)return;ve.bindTexture(ve.TEXTURE_2D,ze),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,!0),ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,this.width,this.height,0,ve.RGBA,ve.UNSIGNED_BYTE,null);var Je=ve.createFramebuffer();if(!Je)return;ve.bindFramebuffer(ve.FRAMEBUFFER,Je),ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,ze,0),this.blurTextureList.push(ze),this.blurBufferList.push(Je)}},Se.prototype.renderPreTextures=function(ge,ve,ee){var ze=this,Je=this.gl,yt=[0,1,0],xt=[1,1,2];[this.blurXProgram,this.blurYProgram,this.diffProgram].forEach(function(Ye,J){if(Ye){Je.useProgram(Ye);var He=Je.getUniformLocation(Ye,"uTexture");Je.uniform1i(He,yt[J]);var Le=Je.createBuffer();Je.bindBuffer(Je.ARRAY_BUFFER,Le),Je.bufferData(Je.ARRAY_BUFFER,new Float32Array(ge),Je.STATIC_DRAW);var Ue=Je.createBuffer();Je.bindBuffer(Je.ELEMENT_ARRAY_BUFFER,Ue),Je.bufferData(Je.ELEMENT_ARRAY_BUFFER,new Uint16Array(ve),Je.STATIC_DRAW);var _t=Je.getAttribLocation(Ye,"aPosition");Je.enableVertexAttribArray(_t),Je.vertexAttribPointer(_t,3,Je.FLOAT,!1,0,0);var st=Je.createBuffer();Je.bindBuffer(Je.ARRAY_BUFFER,st),Je.bufferData(Je.ARRAY_BUFFER,new Float32Array(ee),Je.STATIC_DRAW);var Dt=Je.getAttribLocation(Ye,"aTexCoordinate");Je.enableVertexAttribArray(Dt),Je.vertexAttribPointer(Dt,2,Je.FLOAT,!1,0,0),Je.bindFramebuffer(Je.FRAMEBUFFER,ze.blurBufferList[J]),Je.clearColor(0,0,0,1),Je.clear(Je.COLOR_BUFFER_BIT),Je.drawElements(Je.TRIANGLES,6,Je.UNSIGNED_SHORT,0),Je.activeTexture(Je.TEXTURE0+xt[J]),Je.bindTexture(Je.TEXTURE_2D,ze.blurTextureList[J])}})},Se.prototype.setConstUniforms=function(){var ge=this.width,ve=this.height,ee=this.program;if(ee){var ze=this.gl;ze.useProgram(ee);var Je=ze.getUniformLocation(ee,"widthOffset");ze.uniform1f(Je,1/ge);var yt=ze.getUniformLocation(ee,"heightOffset");ze.uniform1f(yt,1/ve),this.uIntensity=ze.getUniformLocation(ee,"blurAlpha"),ze.uniform1f(this.uIntensity,this.smoothIntensity);var xt=ze.getUniformLocation(ee,"blurTexture");ze.uniform1i(xt,1);var Ye=ze.getUniformLocation(ee,"blurDiffTexture");ze.uniform1i(Ye,2)}},Se.prototype.resetResolution=function(ge,ve){this.width=ge||this.width,this.height=ve||this.height,this.blurXProgram&&this.setBorderBlurProgram(this.blurXProgram,1/(ge||1),0),this.blurYProgram&&this.setBorderBlurProgram(this.blurYProgram,0,1/(ve||1)),this.setConstUniforms(),this.initBlurBuffer()},Se.prototype.setBorderBlurProgram=function(ge,ve,ee){var ze=this.gl;ze.useProgram(ge);var Je=ze.getUniformLocation(ge,"texBlurWidthOffset");ze.uniform1f(Je,ve);var yt=ze.getUniformLocation(ge,"texBlurHeightOffset");ze.uniform1f(yt,ee)},Se.prototype.setDiffBlurProgram=function(ge){var ve=this.gl;ve.useProgram(ge);var ee=ve.getUniformLocation(ge,"blurTexture");ve.uniform1i(ee,1)},Se})(fe),F=(function(){var me=function(Se,ge){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ee){ve.__proto__=ee}||function(ve,ee){for(var ze in ee)Object.prototype.hasOwnProperty.call(ee,ze)&&(ve[ze]=ee[ze])},me(Se,ge)};return function(Se,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ve(){this.constructor=Se}me(Se,ge),Se.prototype=ge===null?Object.create(ge):(ve.prototype=ge.prototype,new ve)}})(),T=(function(me){function Se(ge,ve,ee){var ze=me.call(this,ge,ve,ee)||this;return ze.width=ve,ze.height=ee,ze.type="LightShader",ze.uLightIntensity=null,ze.uRedIntensity=null,ze.whitenIntensity=.5,ze.rosyIntensity=.5,ze.program=ze.makeProgram(`cerpvfvba uvtuc sybng;
nggevohgr irp2 nGrkPbbeqvangr;
nggevohgr irp4 nCbfvgvba;
havsbez zng4 hCZIZngevk;
inelvat irp2 iGrkPbbeq;
ibvq znva() {
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    iGrkPbbeq = nGrkPbbeqvangr;
}`,`cerpvfvba uvtuc sybng;
inelvat irp2 iGrkPbbeq;
havsbez fnzcyre2Q hGrkgher;
havsbez sybng vagrafvgl;
havsbez sybng ebflVagrafvgl;
irp3 oevtugarffNaqPbagenfg(irp3 pbybe){
  sybng v = vagrafvgl * 1.0;
  sybng CV = 3.1415926;
  sybng O = 0.12 * v;
  sybng p = 0.1 * v;
  sybng x = gna((45. + 44. * p) / 180.0 * CV);
  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;
  erghea pbybe;
}
ibvq znva() {
  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);
  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);
  ty_SentPbybe = grkgherPbybe;
}`),ze}return F(Se,me),Se.prototype.setEffectConfig=function(ge){isNaN(ge.whitenIntensity)||(this.whitenIntensity=ge.whitenIntensity/100),isNaN(ge.rosyIntensity)||(this.rosyIntensity=ge.rosyIntensity/100)},Se.prototype.render=function(){var ge=this.gl;ge.uniform1f(this.uLightIntensity,this.whitenIntensity),ge.uniform1f(this.uRedIntensity,this.rosyIntensity)},Se.prototype.setConstUniforms=function(){var ge=this.program;if(ge){var ve=this.gl;ve.useProgram(ge),this.uLightIntensity=ve.getUniformLocation(ge,"intensity"),ve.uniform1f(this.uLightIntensity,this.whitenIntensity),this.uRedIntensity=ve.getUniformLocation(ge,"rosyIntensity"),ve.uniform1f(this.uRedIntensity,this.rosyIntensity);var ee=ve.getUniformLocation(ge,"uPMVMatrix");ve.uniformMatrix4fv(ee,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},Se})(fe),_=(function(){var me=function(Se,ge){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ee){ve.__proto__=ee}||function(ve,ee){for(var ze in ee)Object.prototype.hasOwnProperty.call(ee,ze)&&(ve[ze]=ee[ze])},me(Se,ge)};return function(Se,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ve(){this.constructor=Se}me(Se,ge),Se.prototype=ge===null?Object.create(ge):(ve.prototype=ge.prototype,new ve)}})(),E=function(me,Se,ge,ve){return new(ge||(ge=Promise))(function(ee,ze){function Je(Ye){try{xt(ve.next(Ye))}catch(J){ze(J)}}function yt(Ye){try{xt(ve.throw(Ye))}catch(J){ze(J)}}function xt(Ye){var J;Ye.done?ee(Ye.value):(J=Ye.value,J instanceof ge?J:new ge(function(He){He(J)})).then(Je,yt)}xt((ve=ve.apply(me,[])).next())})},w=function(me,Se){var ge,ve,ee,ze,Je={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ze={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function yt(xt){return function(Ye){return(function(J){if(ge)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,J[0]&&(Je=0)),Je;)try{if(ge=1,ve&&(ee=2&J[0]?ve.return:J[0]?ve.throw||((ee=ve.return)&&ee.call(ve),0):ve.next)&&!(ee=ee.call(ve,J[1])).done)return ee;switch(ve=0,ee&&(J=[2&J[0],ee.value]),J[0]){case 0:case 1:ee=J;break;case 4:return Je.label++,{value:J[1],done:!1};case 5:Je.label++,ve=J[1],J=[0];continue;case 7:J=Je.ops.pop(),Je.trys.pop();continue;default:if(ee=Je.trys,!((ee=ee.length>0&&ee[ee.length-1])||J[0]!==6&&J[0]!==2)){Je=0;continue}if(J[0]===3&&(!ee||J[1]>ee[0]&&J[1]<ee[3])){Je.label=J[1];break}if(J[0]===6&&Je.label<ee[1]){Je.label=ee[1],ee=J;break}if(ee&&Je.label<ee[2]){Je.label=ee[2],Je.ops.push(J);break}ee[2]&&Je.ops.pop(),Je.trys.pop();continue}J=Se.call(me,Je)}catch(He){J=[6,He],ve=0}finally{ge=ee=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}})([xt,Ye])}}},R=(function(me){function Se(ge,ve,ee){var ze=me.call(this,ge,ve,ee)||this;return ze.width=ve,ze.height=ee,ze.type="LowLightShader",ze.uIntensity=null,ze.lowlightEnhancement=!1,ze.lutTex=null,ze.lutImg=null,ze.lutTexIdx=10,ze.uLutTex=null,ze.program=ze.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng grkryJvqgu;
havsbez sybng grkryUrvtug;
inelvat irp2 grkgherPbbeqvangr[9];
inelvat irp2 grkgherPbbeqvangr2;
havsbez zng4 hCZIZngevk;
ibvq znva(){
    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;
    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);
    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);
    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);
    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);
    
    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;
    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;
    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;
    
    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;
    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;
    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;
    
    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;
    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;
    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;
}
`,`cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 grkgherPbbeqvangr[9];
inelvat uvtuc irp2 grkgherPbbeqvangr2;
havsbez fnzcyre2Q hGrkgher;
havsbez fnzcyre2Q vachgVzntrGrkgher2;
havsbez uvtuc zng3 zngLHIgbETO;
havsbez uvtuc zng3 zngETOgbLHI;
havsbez sybng hVagrafvgl;
pbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);
irp4 eto2lhi(irp4 vachgETO) {
    irp3 bhgchgLHI;
    bhgchgLHI = zngETOgbLHI * vachgETO.eto;
    bhgchgLHI -= pbzcIrp;
    erghea irp4(pynzc(bhgchgLHI,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgETO.n);
}
irp2 fnghengvba(irp2 bet, sybng snpgbe) {
    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,
                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);
    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));
}
irp4 lhi2eto(irp4 vachgLHI) {
    irp3 bhgchgETO;
    vachgLHI.eto += pbzcIrp;
    bhgchgETO = zngLHIgbETO * vachgLHI.eto;
    erghea irp4(pynzc(bhgchgETO,
                        irp3(0.0, 0.0, 0.0),
                        irp3(1.0, 1.0, 1.0)),
                        vachgLHI.n);
}
ibvq znva(){
    irp4 lhi[9];
    sbe(vag v = 0; v < 9; v++){
        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));
    }
    sybng fzbbguL = 0.0;
    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;
    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;
    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;
    fzbbguL = fzbbguL / 16.0;
    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;
    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);
    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));
}
`),ze}return _(Se,me),Se.prototype.setEffectConfig=function(ge){this.lowlightEnhancement=ge.lowlightEnhancement===1},Se.prototype.release=function(){this.gl.deleteTexture(this.lutTex)},Se.prototype.render=function(){var ge=this.gl;ge.uniform1f(this.uIntensity,this.lowlightEnhancement?.6:0);var ve=this,ee=ve.program,ze=ve.width,Je=ve.height,yt=ve.lutTex;if(ee){var xt=ge.getUniformLocation(ee,"texelWidth");ge.uniform1f(xt,1/ze);var Ye=ge.getUniformLocation(ee,"texelHeight");ge.uniform1f(Ye,1/Je),ge.activeTexture(ge.TEXTURE0+this.lutTexIdx),ge.bindTexture(ge.TEXTURE_2D,yt)}},Se.prototype.setConstUniforms=function(){return E(this,void 0,void 0,function(){var ge,ve,ee,ze,Je,yt,xt,Ye,J,He,Le=this;return w(this,function(Ue){switch(Ue.label){case 0:return ge=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],ve=[1,1,1,0,-.344,1.772,1.402,-.714,0],ee=[.298973,-.168721,.500019,.58706,-.331298,-.41873,.113967,.500019,-.081289],(ze=this.program)?((Je=this.gl).useProgram(ze),this.uIntensity=Je.getUniformLocation(ze,"uIntensity"),yt=Je.getUniformLocation(ze,"matYUVtoRGB"),Je.uniformMatrix3fv(yt,!1,ve),xt=Je.getUniformLocation(ze,"matRGBtoYUV"),Je.uniformMatrix3fv(xt,!1,ee),Ye=Je.getUniformLocation(ze,"uPMVMatrix"),Je.uniformMatrix4fv(Ye,!1,ge),J=Je.getUniformLocation(ze,"inputImageTexture2"),He=this,[4,new P.l3(function(_t){var st=Je.createTexture(),Dt=Le.lutTexIdx,qt=Le.lutImg;qt||(qt=new Image),qt.onload=function(){Je.useProgram(ze),Le.lutImg=qt,Je.activeTexture(Je.TEXTURE0+Dt),Je.bindTexture(Je.TEXTURE_2D,st),Je.pixelStorei(Je.UNPACK_FLIP_Y_WEBGL,!1),Je.texImage2D(Je.TEXTURE_2D,0,Je.LUMINANCE,Je.LUMINANCE,Je.UNSIGNED_BYTE,qt),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_S,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_WRAP_T,Je.CLAMP_TO_EDGE),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MIN_FILTER,Je.NEAREST),Je.texParameteri(Je.TEXTURE_2D,Je.TEXTURE_MAG_FILTER,Je.NEAREST),Je.uniform1i(J,Dt),st&&_t(st)},qt.src=`
data:image/png;base64,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`})]):[2];case 1:return He.lutTex=Ue.sent(),[2]}})})},Se})(fe),V=(function(){var me=function(Se,ge){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ee){ve.__proto__=ee}||function(ve,ee){for(var ze in ee)Object.prototype.hasOwnProperty.call(ee,ze)&&(ve[ze]=ee[ze])},me(Se,ge)};return function(Se,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ve(){this.constructor=Se}me(Se,ge),Se.prototype=ge===null?Object.create(ge):(ve.prototype=ge.prototype,new ve)}})(),ae=(function(me){function Se(ge,ve,ee){var ze=me.call(this,ge,ve,ee)||this;return ze.width=ve,ze.height=ee,ze.type="SharpnessShader",ze.uIntensity=null,ze.sharpenIntensity=.5,ze.program=ze.makeProgram(`
nggevohgr irp4 nCbfvgvba;
nggevohgr irp4 nGrkPbbeqvangr;
havsbez sybng vzntrJvqguSnpgbe;
havsbez sybng vzntrUrvtugSnpgbe;
havsbez sybng funecarff; 
inelvat irp2 iGrkPbbeq;
inelvat irp2 yrsgGrkgherPbbeqvangr;
inelvat irp2 evtugGrkgherPbbeqvangr;
inelvat irp2 gbcGrkgherPbbeqvangr;
inelvat irp2 obggbzGrkgherPbbeqvangr;
inelvat sybng pragreZhygvcyvre;
inelvat sybng rqtrZhygvcyvre;
ibvq znva() {
  ty_Cbfvgvba = nCbfvgvba;
  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);
  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);
  iGrkPbbeq = nGrkPbbeqvangr.kl;
  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;
  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;
  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;
  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;
  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;
  rqtrZhygvcyvre = funecarff;
}
`,`
cerpvfvba uvtuc sybng;
inelvat uvtuc irp2 iGrkPbbeq;
inelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;
inelvat uvtuc irp2 evtugGrkgherPbbeqvangr;
inelvat uvtuc irp2 gbcGrkgherPbbeqvangr;
inelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;
inelvat uvtuc sybng pragreZhygvcyvre;
inelvat uvtuc sybng rqtrZhygvcyvre;
havsbez fnzcyre2Q hGrkgher;
ibvq znva() {
  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);
  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;
  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;
  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;
  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);
}`),ze}return V(Se,me),Se.prototype.setEffectConfig=function(ge){isNaN(ge.sharpenIntensity)||(this.sharpenIntensity=ge.sharpenIntensity/100)},Se.prototype.render=function(){this.gl.uniform1f(this.uIntensity,.5*this.sharpenIntensity)},Se.prototype.resetResolution=function(ge,ve){this.width=ge||this.width,this.height=ve||this.height,this.setConstUniforms()},Se.prototype.setConstUniforms=function(){var ge=this.width,ve=this.height,ee=this.program;if(ee){var ze=this.gl;ze.useProgram(ee);var Je=ze.getUniformLocation(ee,"imageWidthFactor");ze.uniform1f(Je,1/ge);var yt=ze.getUniformLocation(ee,"imageHeightFactor");ze.uniform1f(yt,1/ve),this.uIntensity=ze.getUniformLocation(ee,"sharpness"),ze.uniform1f(this.uIntensity,.5*this.sharpenIntensity)}},Se})(fe),q=function(me,Se,ge,ve){return new(ge||(ge=Promise))(function(ee,ze){function Je(Ye){try{xt(ve.next(Ye))}catch(J){ze(J)}}function yt(Ye){try{xt(ve.throw(Ye))}catch(J){ze(J)}}function xt(Ye){var J;Ye.done?ee(Ye.value):(J=Ye.value,J instanceof ge?J:new ge(function(He){He(J)})).then(Je,yt)}xt((ve=ve.apply(me,[])).next())})},k=function(me,Se){var ge,ve,ee,ze,Je={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ze={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function yt(xt){return function(Ye){return(function(J){if(ge)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,J[0]&&(Je=0)),Je;)try{if(ge=1,ve&&(ee=2&J[0]?ve.return:J[0]?ve.throw||((ee=ve.return)&&ee.call(ve),0):ve.next)&&!(ee=ee.call(ve,J[1])).done)return ee;switch(ve=0,ee&&(J=[2&J[0],ee.value]),J[0]){case 0:case 1:ee=J;break;case 4:return Je.label++,{value:J[1],done:!1};case 5:Je.label++,ve=J[1],J=[0];continue;case 7:J=Je.ops.pop(),Je.trys.pop();continue;default:if(ee=Je.trys,!((ee=ee.length>0&&ee[ee.length-1])||J[0]!==6&&J[0]!==2)){Je=0;continue}if(J[0]===3&&(!ee||J[1]>ee[0]&&J[1]<ee[3])){Je.label=J[1];break}if(J[0]===6&&Je.label<ee[1]){Je.label=ee[1],ee=J;break}if(ee&&Je.label<ee[2]){Je.label=ee[2],Je.ops.push(J);break}ee[2]&&Je.ops.pop(),Je.trys.pop();continue}J=Se.call(me,Je)}catch(He){J=[6,He],ve=0}finally{ge=ee=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}})([xt,Ye])}}},G="zc.p.0.sbe.2",xe={errorCode:I.QYE.code,extendedData:I.QYE.message},Ae=(function(){function me(Se,ge){this.an=Se,this.vcMgr=ge,this.gl=null,this.shouldClear=!0,this.effectConfig={sharpenIntensity:.5,whitenIntensity:.5,rosyIntensity:.5,smoothIntensity:.5,lowlightEnhancement:0},this._originResolution={width:0,height:0},this._shaderList=[],this._frameBufferList=[],this.Ze=[],this.Xe=null,this.isNoInput=!0,this.failedTimes=0,this.onRenderError=function(ve){},this.enableBeauty=!1}return me.prototype.setEnableBeauty=function(Se){this.enableBeauty=!!Se},me.prototype.handleInitError=function(){this.failedTimes++,this.failedTimes>30&&(this.failedTimes=0,this.an.error(G+" get webgl context failed"),this.onRenderError(xe))},me.prototype.init=function(Se,ge){return q(this,void 0,void 0,function(){var ve,ee,ze,Je,yt,xt,Ye,J,He;return k(this,function(Le){switch(Le.label){case 0:return this.vcMgr?(ze=(ve=this.vcMgr).gl,Je=ve.originWidth,yt=ve.originHeight,(ee=ve.canvasEl)&&ze&&Je&&yt?(this._canvasEl=ee,this.gl=ze,this.initGL(Se=Se||Je,ge=ge||yt),this.Xe?[4,(xt=new R(this.gl,Se,ge)).setConstUniforms()]:(this.an.error(G+" input texture not found"),this.handleInitError(),[2])):(this.handleInitError(),[2])):(this.handleInitError(),[2]);case 1:return Le.sent(),(Ye=new M(this.gl,Se,ge)).setConstUniforms(),(J=new T(this.gl,Se,ge)).setConstUniforms(),(He=new ae(this.gl,Se,ge)).setConstUniforms(),this._shaderList=[xt,Ye,J,He],this.setEffectConfig(this.effectConfig),[2]}})})},me.prototype.render=function(Se){return q(this,void 0,void 0,function(){var ge,ve,ee,ze,Je=this;return k(this,function(yt){switch(yt.label){case 0:return(ge=this.gl)&&this._canvasEl&&!ge.isContextLost()?[3,4]:this._canvasEl?(this.an.warn(G+" gl lost, restart effect"),this.release(),[4,this.init(Se.videoWidth,Se.videoHeight)]):[3,2];case 1:return yt.sent(),[3,3];case 2:this.an.error(G+" canvas lost"),this.onRenderError(xe),yt.label=3;case 3:return[2];case 4:return(this._originResolution.height!==Se.videoHeight||this._originResolution.width!==Se.videoWidth)&&(Math.abs(this._originResolution.height-Se.videoHeight)>2||Math.abs(this._originResolution.width-Se.videoWidth)>2)?Se.videoHeight===0||Se.videoWidth===0?[2]:(this._canvasEl.width=Se.videoWidth,this._canvasEl.height=Se.videoHeight,Se.setAttribute("width",Se.videoWidth.toString()),Se.setAttribute("height",Se.videoHeight.toString()),!this.gl||this.gl.isContextLost()?[3,5]:(this.an.info(G+" resolution changed to ".concat(Se.videoWidth,"x").concat(Se.videoHeight,", reset resolution.")),this.resetResolution(Se.videoWidth,Se.videoHeight),this._shaderList.forEach(function(xt){xt.resetResolution(Se.videoWidth,Se.videoHeight)}),[3,7])):[3,7];case 5:return this.an.warn(G+" resolution changed and gl context lost, restart effect"),this.release(),[4,this.init(Se.videoWidth,Se.videoHeight)];case 6:yt.sent(),yt.label=7;case 7:return ve=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],ee=[0,1,2,0,2,3],ze=[0,0,1,0,1,1,0,1],ge.viewport(0,0,Se.width,Se.height),ge.activeTexture(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,this.Xe),this.isNoInput&&ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,ge.RGBA,ge.UNSIGNED_BYTE,Se),this._shaderList.forEach(function(xt,Ye){var J=xt.program;if(J){xt.renderPreTextures&&xt.renderPreTextures(ve,ee,ze),ge.useProgram(J),xt.render();var He=ge.getUniformLocation(J,"uTexture"),Le=ge.createBuffer();ge.bindBuffer(ge.ARRAY_BUFFER,Le),ge.bufferData(ge.ARRAY_BUFFER,new Float32Array(ve),ge.STATIC_DRAW);var Ue=ge.createBuffer();ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,Ue),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,new Uint16Array(ee),ge.STATIC_DRAW);var _t=ge.getAttribLocation(J,"aPosition");ge.enableVertexAttribArray(_t),ge.vertexAttribPointer(_t,3,ge.FLOAT,!1,0,0);var st=ge.createBuffer();ge.bindBuffer(ge.ARRAY_BUFFER,st),ge.bufferData(ge.ARRAY_BUFFER,new Float32Array(ze),ge.STATIC_DRAW);var Dt=ge.getAttribLocation(J,"aTexCoordinate");ge.enableVertexAttribArray(Dt),ge.vertexAttribPointer(Dt,2,ge.FLOAT,!1,0,0);var qt=Ye===Je._shaderList.length-1?null:Je.Ze[Ye];ge.bindFramebuffer(ge.FRAMEBUFFER,Ye===Je._shaderList.length-1?null:Je._frameBufferList[Ye]),Je.shouldClear&&(ge.clearColor(0,0,0,1),ge.clear(ge.COLOR_BUFFER_BIT)),ge.drawElements(ge.TRIANGLES,6,ge.UNSIGNED_SHORT,0),ge.activeTexture(ge.TEXTURE0),qt&&ge.bindTexture(ge.TEXTURE_2D,qt),ge.uniform1i(He,0)}}),[2]}})})},me.prototype.setEffectConfig=function(Se){var ge=this;isNaN(Se.sharpenIntensity)||(this.effectConfig.sharpenIntensity=Se.sharpenIntensity),isNaN(Se.whitenIntensity)||(this.effectConfig.whitenIntensity=Se.whitenIntensity),isNaN(Se.rosyIntensity)||(this.effectConfig.rosyIntensity=Se.rosyIntensity),isNaN(Se.smoothIntensity)||(this.effectConfig.smoothIntensity=Se.smoothIntensity),isNaN(Se.lowlightEnhancement)||(this.effectConfig.lowlightEnhancement=Se.lowlightEnhancement),this._shaderList.forEach(function(ve){ve.setEffectConfig(ge.effectConfig)})},me.prototype.release=function(){var Se=this;this._shaderList.forEach(function(ge){var ve;ge.program&&((ve=Se.gl)===null||ve===void 0||ve.deleteProgram(ge.program))}),this.Ze.forEach(function(ge){var ve;ge&&((ve=Se.gl)===null||ve===void 0||ve.deleteTexture(ge))}),this._frameBufferList.forEach(function(ge){var ve;ge&&((ve=Se.gl)===null||ve===void 0||ve.deleteFramebuffer(ge))}),this._shaderList.forEach(function(ge){ge.release()}),this._shaderList=[],this.Ze=[],this._frameBufferList=[]},me.prototype.initGL=function(Se,ge){var ve=this.gl;if(!ve)return this.an.error(G+" webgl context not found");this.isNoInput&&(this.Xe=ve.createTexture(),ve.bindTexture(ve.TEXTURE_2D,this.Xe),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR));for(var ee=0;4>ee;ee++){var ze=ve.createTexture();if(!ze)return this.an.warn(G+" create texture failed");ve.bindTexture(ve.TEXTURE_2D,ze),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.CLAMP_TO_EDGE),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,Se,ge,0,ve.RGBA,ve.UNSIGNED_BYTE,null);var Je=ve.createFramebuffer();if(!Je)return this.an.warn(G+" create frame buffer failed");ve.bindFramebuffer(ve.FRAMEBUFFER,Je),ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_2D,ze,0),this.Ze.push(ze),this._frameBufferList.push(Je)}ve.viewport(0,0,Se,ge),this._originResolution.width=Se,this._originResolution.height=ge},me.prototype.setInputInfo=function(Se,ge){if(this.isNoInput=Se,ge){var ve=ge.texture;ve&&(this.Xe=ve)}},me.prototype.resetResolution=function(Se,ge){var ve,ee=this.gl;if(!ee)return this.an.warn(G+" can not find webgl context");for(var ze=0;ze<this.Ze.length;ze++)ee.bindTexture(ee.TEXTURE_2D,this.Ze[ze]),ee.texImage2D(ee.TEXTURE_2D,0,ee.RGBA,Se,ge,0,ee.RGBA,ee.UNSIGNED_BYTE,null);(ve=this.vcMgr)===null||ve===void 0||ve.resetResolution(Se,ge),this.onResolutionChange(),ee.viewport(0,0,Se,ge),this._originResolution.width=Se,this._originResolution.height=ge},me.prototype.onResolutionChange=function(){},me})(),De=Z(1350),Ie=(function(){var me=function(Se,ge){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ve,ee){ve.__proto__=ee}||function(ve,ee){for(var ze in ee)Object.prototype.hasOwnProperty.call(ee,ze)&&(ve[ze]=ee[ze])},me(Se,ge)};return function(Se,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Class extends value "+String(ge)+" is not a constructor or null");function ve(){this.constructor=Se}me(Se,ge),Se.prototype=ge===null?Object.create(ge):(ve.prototype=ge.prototype,new ve)}})(),be=function(me,Se,ge,ve){return new(ge||(ge=Promise))(function(ee,ze){function Je(Ye){try{xt(ve.next(Ye))}catch(J){ze(J)}}function yt(Ye){try{xt(ve.throw(Ye))}catch(J){ze(J)}}function xt(Ye){var J;Ye.done?ee(Ye.value):(J=Ye.value,J instanceof ge?J:new ge(function(He){He(J)})).then(Je,yt)}xt((ve=ve.apply(me,[])).next())})},qe=function(me,Se){var ge,ve,ee,ze,Je={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ze={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function yt(xt){return function(Ye){return(function(J){if(ge)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,J[0]&&(Je=0)),Je;)try{if(ge=1,ve&&(ee=2&J[0]?ve.return:J[0]?ve.throw||((ee=ve.return)&&ee.call(ve),0):ve.next)&&!(ee=ee.call(ve,J[1])).done)return ee;switch(ve=0,ee&&(J=[2&J[0],ee.value]),J[0]){case 0:case 1:ee=J;break;case 4:return Je.label++,{value:J[1],done:!1};case 5:Je.label++,ve=J[1],J=[0];continue;case 7:J=Je.ops.pop(),Je.trys.pop();continue;default:if(ee=Je.trys,!((ee=ee.length>0&&ee[ee.length-1])||J[0]!==6&&J[0]!==2)){Je=0;continue}if(J[0]===3&&(!ee||J[1]>ee[0]&&J[1]<ee[3])){Je.label=J[1];break}if(J[0]===6&&Je.label<ee[1]){Je.label=ee[1],ee=J;break}if(ee&&Je.label<ee[2]){Je.label=ee[2],Je.ops.push(J);break}ee[2]&&Je.ops.pop(),Je.trys.pop();continue}J=Se.call(me,Je)}catch(He){J=[6,He],ve=0}finally{ge=ee=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}})([xt,Ye])}}},Ve={errorCode:I.zgL.code,extendedData:I.zgL.message},pe="zc.p.0.sbe.1",j=(function(me){function Se(ge,ve,ee,ze){var Je=me.call(this)||this;return Je.an=ge,Je.preview=ee,Je.pn=ze,Je.kind="video",Je._enabled=!1,Je.effectTrack=null,Je.lastRenderTime=0,Je.renderCount=0,Je.tr=0,Je.stateFlag={base:!1,lowLight:!1},Je.isStarting=!1,Je.animationFrameId=0,Je.fps=15,Je.detector=new Qe(ge),Je.lastRenderTime=0,Je.manager=new Ae(ge,Je.vcMgr),Je.manager.onRenderError=function(yt){yt.errorCode===1103072&&Je.stopEffect(),Je.onError(yt)},Je.manager.onResolutionChange=function(){},Je.setVcMgrInfo(),Je}return Ie(Se,me),Object.defineProperty(Se.prototype,"enabled",{get:function(){return this._enabled},set:function(ge){this._enabled=ge},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"output",{get:function(){return{track:this._output||this.input||null}},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"vcMgr",{get:function(){return this.preview.vcMgr},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"ir",{get:function(){return this.pn.browser},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"options",{get:function(){return this.manager.effectConfig||{}},enumerable:!1,configurable:!0}),Se.prototype.setBeautyEffectOptions=function(ge,ve){return ve===void 0&&(ve={}),be(this,void 0,void 0,function(){return qe(this,function(ee){switch(ee.label){case 0:return ge&&this.manager.setEffectConfig(ve),this.enabled===ge?[3,5]:(this.manager.setEnableBeauty(ge),this.enabled!==ge&&this.an.info(pe+" effect enabled "+ge+"; options: "+JSON.stringify(ve)),this.enabled=ge,ge?[4,this.startEffect()]:[3,2]);case 1:return ee.sent(),[3,4];case 2:return[4,this.stopEffect()];case 3:ee.sent(),ee.label=4;case 4:ee.label=5;case 5:return[2]}})})},Se.prototype.startEffect=function(ge){return ge===void 0&&(ge=!0),be(this,void 0,void 0,function(){var ve,ee=this;return qe(this,function(ze){switch(ze.label){case 0:return this.isStarting=!0,this.an.info(pe+" call start effect"),this.input?(ve=this,[4,this.startWebGLProcessor().catch(function(Je){throw ee.stopEffect(),Je})]):(this.an.error(pe+" start effect failed, input track is null"),[2]);case 1:return ve.effectTrack=ze.sent(),this.startEffectTask(ge),[4,new P.l3(function(Je){ee.waitForOutputTrack=function(){ee.waitForOutputTrack=void 0,Je(void 0)}})];case 2:return ze.sent(),this.an.info(pe+" start effect success"),[2]}})})},Se.prototype.startEffectTask=function(ge){var ve,ee=this;ge===void 0&&(ge=!0),this.enabled=!0,this.detector.startRecordBeautyEffectOutput(this.fps).then(function(ze){!ze.result&&ee.onError&&ee.onError(Ve,{targetFPS:ze.targetFPS,currentFPS:ze.currentFPS})}),ge&&((ve=this.vcMgr)===null||ve===void 0||ve.setRenderTask(!0,"beauty")),this.isStarting=!1},Se.prototype.stopEffect=function(ge){var ve,ee;return ge===void 0&&(ge=!0),be(this,void 0,void 0,function(){var ze=this;return qe(this,function(Je){return this.enabled=!1,this.an.info(pe+" call stop effect"),ge&&((ve=this.vcMgr)===null||ve===void 0||ve.setRenderTask(!1,"beauty")),(ee=this.vcMgr)===null||ee===void 0||ee.off("renderFrame"),this.detector.stopRecordBeautyEffectOutput(),this.manager.release(),this.renderCount=0,this.removeDomTimer===void 0&&(this.removeDomTimer=window.setTimeout(function(){ze.enabled===!1&&ze.destroy()},18e4)),[2]})})},Se.prototype.destroy=function(){this.an.info(pe+" destroy hidden elements"),this.canvasEl&&this.canvasEl.remove(),this.videoEl&&this.videoEl.remove(),this.videoEl=this.canvasEl=void 0,this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0)},Se.prototype.startWebGLProcessor=function(){var ge;return be(this,void 0,void 0,function(){return qe(this,function(ve){switch(ve.label){case 0:return this.an.info(pe+" start webgl processor"),this.removeDomTimer&&(clearTimeout(this.removeDomTimer),this.removeDomTimer=void 0),[4,this.videoRendering()];case 1:return ve.sent(),this.setVcMgrInfo(),[2,(ge=this.vcMgr)===null||ge===void 0?void 0:ge.getCanvasTrack()]}})})},Se.prototype.setInput=function(ge,ve){var ee,ze,Je,yt,xt,Ye;return be(this,void 0,void 0,function(){var J,He,Le=this;return qe(this,function(Ue){return this.an.info(pe+" input call"),J=!1,ge!=null&&ge.track&&(He=!1,this.trackWidth===((ee=this.vcMgr)===null||ee===void 0?void 0:ee.originWidth)&&this.trackHeight===((ze=this.vcMgr)===null||ze===void 0?void 0:ze.originHeight)||(He=!0,this.an.info(pe+" input track wh change")),!He&&this.input===(ge==null?void 0:ge.track)||this.ir!=="safari"||(this.an.info(pe+" input track change"),this.effectTrack=null,this.stopEffect(!1),J=!0),this.input=ge==null?void 0:ge.track,this.trackWidth=(Je=this.vcMgr)===null||Je===void 0?void 0:Je.originWidth,this.trackHeight=(yt=this.vcMgr)===null||yt===void 0?void 0:yt.originHeight),ge&&(this.manager.setInputInfo(this.isFirstNode,ge.frameInfo),(xt=this.vcMgr)===null||xt===void 0||xt.off("renderFrame"),(Ye=this.vcMgr)===null||Ye===void 0||Ye.on("renderFrame",function(){Le.renderOutput()}),J&&this.startEffect()),this.tr==1&&(this.setVcMgrInfo(),this.tr=0,this.startEffect()),[2]})})},Se.prototype.renderOutput=function(){this.renderCount++,this.manager.render(this.videoEl),this.detector.addFrame(),this.renderCount>=3&&this.updateOutput(this.effectTrack)},Se.prototype.setVcMgrInfo=function(){var ge;if(this.vcMgr&&(!((ge=this.vcMgr)===null||ge===void 0)&&ge.inited)){var ve=this.vcMgr,ee=ve.canvasEl,ze=ve.videoEl,Je=ve.originWidth,yt=ve.originHeight;ze&&(this.videoEl=ze),ee&&(this.canvasEl=ee,this.manager.setInputInfo(this.isFirstNode),this.manager.init(Je,yt))}},Se.prototype.videoRendering=function(){return be(this,void 0,void 0,function(){var ge=this;return qe(this,function(ve){return[2,new Promise(function(ee,ze){var Je;ge.vcMgr&&!(!((Je=ge.vcMgr)===null||Je===void 0)&&Je.inited)?(ge.vcMgr.onInited=function(){ee()},ge.vcMgr.onRenderFail=function(yt){ge.tr=1,ze(yt)}):ee()})]})})},Se.prototype.removeInput=function(){return be(this,void 0,void 0,function(){return qe(this,function(ge){switch(ge.label){case 0:return this.input=void 0,[4,this.stopEffect()];case 1:return ge.sent(),[2]}})})},Se.prototype.updateOutput=function(ge){return be(this,void 0,void 0,function(){return qe(this,function(ve){switch(ve.label){case 0:return this._output===ge?[3,3]:(this._output=ge,this.onOutputChange?[4,this.onOutputChange(this._output)]:[3,2]);case 1:ve.sent(),ve.label=2;case 2:ve.label=3;case 3:return this.waitForOutputTrack&&this.waitForOutputTrack(),[2]}})})},Se.prototype.onOutputChange=function(ge){var ve;return be(this,void 0,void 0,function(){return qe(this,function(ee){switch(ee.label){case 0:return[4,(ve=this.next)===null||ve===void 0?void 0:ve.setInput({track:ge||this.input||null})];case 1:return ee.sent(),[2]}})})},Se.prototype.onError=function(ge,ve){},Se})(De.E),B=j,nt=function(){return nt=Object.assign||function(me){for(var Se,ge=1,ve=arguments.length;ge<ve;ge++)for(var ee in Se=arguments[ge])Object.prototype.hasOwnProperty.call(Se,ee)&&(me[ee]=Se[ee]);return me},nt.apply(this,arguments)},he=function(me,Se,ge,ve){return new(ge||(ge=Promise))(function(ee,ze){function Je(Ye){try{xt(ve.next(Ye))}catch(J){ze(J)}}function yt(Ye){try{xt(ve.throw(Ye))}catch(J){ze(J)}}function xt(Ye){var J;Ye.done?ee(Ye.value):(J=Ye.value,J instanceof ge?J:new ge(function(He){He(J)})).then(Je,yt)}xt((ve=ve.apply(me,[])).next())})},it=function(me,Se){var ge,ve,ee,ze,Je={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return ze={next:yt(0),throw:yt(1),return:yt(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze;function yt(xt){return function(Ye){return(function(J){if(ge)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,J[0]&&(Je=0)),Je;)try{if(ge=1,ve&&(ee=2&J[0]?ve.return:J[0]?ve.throw||((ee=ve.return)&&ee.call(ve),0):ve.next)&&!(ee=ee.call(ve,J[1])).done)return ee;switch(ve=0,ee&&(J=[2&J[0],ee.value]),J[0]){case 0:case 1:ee=J;break;case 4:return Je.label++,{value:J[1],done:!1};case 5:Je.label++,ve=J[1],J=[0];continue;case 7:J=Je.ops.pop(),Je.trys.pop();continue;default:if(ee=Je.trys,!((ee=ee.length>0&&ee[ee.length-1])||J[0]!==6&&J[0]!==2)){Je=0;continue}if(J[0]===3&&(!ee||J[1]>ee[0]&&J[1]<ee[3])){Je.label=J[1];break}if(J[0]===6&&Je.label<ee[1]){Je.label=ee[1],ee=J;break}if(ee&&Je.label<ee[2]){Je.label=ee[2],Je.ops.push(J);break}ee[2]&&Je.ops.pop(),Je.trys.pop();continue}J=Se.call(me,Je)}catch(He){J=[6,He],ve=0}finally{ge=ee=0}if(5&J[0])throw J[1];return{value:J[0]?J[1]:void 0,done:!0}})([xt,Ye])}}},wt="zc.p.0.sbe.0",Ee={setBeautyEffect:function(me,Se,ge,ve){var ee=this;return ve===void 0&&(ve=!0),new P.l3(function(ze,Je){var yt,xt,Ye=(0,ke.L)(me,ee.logger);if(!(0,Pe.dr)(Ye))return ee.logger.error(wt+" localStream not found"),void Je({errorCode:1100001,extendedData:" localStream no found"});var J=function(_t){ze(_t)},He=ee.streamCenter.checkPreview(Ye);if(!He)return ee.logger.error("zc.sbe.0 preview no found"),void J({errorCode:I.fzq.code,extendedData:I.fzq.message});var Le=((yt=He.videoEffect)===null||yt===void 0?void 0:yt.stateFlag)||{base:!1,lowLight:!1};if(ve)!(Se=!!Se)&&Le.lowLight?ge={sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:Le.lowLight?1:0}:Se&&(ge=nt({lowlightEnhancement:Le.lowLight?1:0},ge)),Le.base=Se;else{var Ue=ge.lowlightEnhancement;ge=!((xt=He.videoEffect)===null||xt===void 0)&&xt.enabled||Ue!==1?{lowlightEnhancement:Ue}:{sharpenIntensity:0,whitenIntensity:0,rosyIntensity:0,smoothIntensity:0,lowlightEnhancement:Ue},Le.lowLight=Ue===1}He.setBeautyEffect(Le.base||Le.lowLight,ge,Le).then(function(){J({errorCode:0,extendedData:""})}).catch(function(_t){Je({errorCode:_t.errorCode||_t.code||-1,extendedData:_t.extendedData||_t.message||_t.toString()})})})},setLowlightEnhance:function(me,Se){return this.setBeautyEffect(me,!0,{lowlightEnhancement:Se},!1)}},Oe={setBeautyEffect:function(me,Se,ge){var ve;return he(this,void 0,void 0,function(){var ee,ze,Je,yt=this;return it(this,function(xt){switch(xt.label){case 0:if(!this.videoTrack)return this.logger.error(wt+" video track no found"),[2];if((0,Pe.TE)(WebGLRenderingContext))throw{errorCode:ee=I.QYE.code,extendedData:ze=I.QYE.message};return Je=function(){var Ye;try{(Ye=yt.vcMgr)===null||Ye===void 0||Ye.init(yt.videoTrack)}catch(J){if(J.code==1001)throw{errorCode:ee,extendedData:ze}}},B?(this.videoEffect||(Je(),this.videoEffect=new B(this.logger,this.videoTrack,this,this.stateCenter),this.videoEffect.onError=function(Ye,J){yt.stateCenter.actionListener("beautyEffectError",yt.localStream,Ye.errorCode,Ye.extendedData,J)}),me?this.videoNodeQueue.isConnected(this.videoEffect)?[3,4]:this.videoTrack&&((ve=this.vcMgr)===null||ve===void 0?void 0:ve.renderTrack)!==this.videoTrack?[4,this.videoNodeQueue.replaceNewSourceByTrack(this.videoTrack)]:[3,2]:[3,5]):[3,9];case 1:xt.sent(),xt.label=2;case 2:return[4,this.videoNodeQueue.pushBack(this.videoEffect)];case 3:xt.sent(),xt.label=4;case 4:return[3,7];case 5:return[4,this.videoNodeQueue.remove(this.videoEffect)];case 6:xt.sent(),xt.label=7;case 7:return[4,this.videoEffect.setBeautyEffectOptions(me,Se)];case 8:return xt.sent(),this.videoEffect.stateFlag=ge,[3,10];case 9:this.logger.error(wt+" beauty effect module no found"),xt.label=10;case 10:return[2]}})})}},rt={type:"BeautyEffect",install:function(me,Se){for(var ge in Oe)Object.defineProperty(Se.prototype,ge,{value:Oe[ge],writable:!1});for(var ge in Ee)Object.defineProperty(me.prototype,ge,{value:Ee[ge],writable:!1})}}},5794:function(ot,Re,Z){function I(){var P=document.createElement("audio");P.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=",P.play(),setTimeout(function(){P.pause(),P.remove()},1e3)}Z.d(Re,{r:function(){return I}})},5830:function(ot,Re,Z){Z.d(Re,{StreamCDN:function(){return Ve}});var I,P=Z(8627),Pe=Z(4908),ke=Z(4872),ce=Z(1290),Ne=Z(8866),tt=function(pe,j,B,nt){return new(B||(B=Promise))(function(he,it){function wt(rt){try{Oe(nt.next(rt))}catch(me){it(me)}}function Ee(rt){try{Oe(nt.throw(rt))}catch(me){it(me)}}function Oe(rt){var me;rt.done?he(rt.value):(me=rt.value,me instanceof B?me:new B(function(Se){Se(me)})).then(wt,Ee)}Oe((nt=nt.apply(pe,[])).next())})},Qe=function(pe,j){var B,nt,he,it,wt={label:0,sent:function(){if(1&he[0])throw he[1];return he[1]},trys:[],ops:[]};return it={next:Ee(0),throw:Ee(1),return:Ee(2)},typeof Symbol=="function"&&(it[Symbol.iterator]=function(){return this}),it;function Ee(Oe){return function(rt){return(function(me){if(B)throw new TypeError("Generator is already executing.");for(;it&&(it=0,me[0]&&(wt=0)),wt;)try{if(B=1,nt&&(he=2&me[0]?nt.return:me[0]?nt.throw||((he=nt.return)&&he.call(nt),0):nt.next)&&!(he=he.call(nt,me[1])).done)return he;switch(nt=0,he&&(me=[2&me[0],he.value]),me[0]){case 0:case 1:he=me;break;case 4:return wt.label++,{value:me[1],done:!1};case 5:wt.label++,nt=me[1],me=[0];continue;case 7:me=wt.ops.pop(),wt.trys.pop();continue;default:if(he=wt.trys,!((he=he.length>0&&he[he.length-1])||me[0]!==6&&me[0]!==2)){wt=0;continue}if(me[0]===3&&(!he||me[1]>he[0]&&me[1]<he[3])){wt.label=me[1];break}if(me[0]===6&&wt.label<he[1]){wt.label=he[1],he=me;break}if(he&&wt.label<he[2]){wt.label=he[2],wt.ops.push(me);break}he[2]&&wt.ops.pop(),wt.trys.pop();continue}me=j.call(pe,wt)}catch(Se){me=[6,Se],nt=0}finally{B=he=0}if(5&me[0])throw me[1];return{value:me[0]?me[1]:void 0,done:!0}})([Oe,rt])}}},ne=(function(){function pe(j,B){this.an=j,this.pn=B,this.attempt=0,this.rr=.3,this.sr=4.8,this.ur=0,this.retryTimer=null,this.maxTimer=null,this.isOverTime=!1,this.RETRY_MAX_TIME=60}return pe.prototype.setRetryRule=function(j){switch(this.ur=j,j){case 1:this.rr=.3,this.sr=32;break;case 0:this.rr=.3,this.sr=4.8}},pe.prototype.getRetryDelayByCount=function(j){return tt(this,void 0,void 0,function(){var B,nt,he,it;return Qe(this,function(wt){switch(wt.label){case 0:return B=this.ur===1?j+2:j<2?0:j,nt=Math.min(this.sr,this.rr*Math.pow(2,B)),[4,(0,Ne.UY)()];case 1:return he=wt.sent(),it=Math.floor(he*(1e3*nt+1)),this.an.info("".concat(ce.RnN," ").concat(this.attempt," ").concat(nt," ").concat(it)),[2,it]}})})},pe.prototype.initCallback=function(j,B){this.sucCallBack=j,this.failCallBack=B},pe.prototype.startMaxTime=function(){var j,B=this;this.an.info("".concat(ce.zUi," ").concat((j=this.requestInfo)===null||j===void 0?void 0:j.streamID," call")),this.maxTimer?this.an.warn("".concat(ce.zUi," max timer")):(this.maxTimer=setTimeout(function(){var nt;B.an.warn("".concat(ce.zUi," ").concat((nt=B.requestInfo)===null||nt===void 0?void 0:nt.streamID," over max time ").concat(B.RETRY_MAX_TIME,"s, stop retry")),B.isOverTime=!0,B.requestFail(B._err)},1e3*this.RETRY_MAX_TIME),this.an.info("".concat(ce.zUi," maxTimer=").concat(this.maxTimer)))},pe.prototype.invalid=function(){this.clearRetryTimer(),this.attempt=0},pe.prototype.clearRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},pe.prototype.requestFail=function(j){this.invalid(),this.stopMaxTime(),this.failCallBack&&(this.failCallBack(j),this.resetCallback())},pe.prototype.stopMaxTime=function(){this.an.info("".concat(ce.zub," stop max timer")),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},pe.prototype.resetCallback=function(){this.sucCallBack=void 0,this.failCallBack=void 0},pe})(),oe=(I=function(pe,j){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,nt){B.__proto__=nt}||function(B,nt){for(var he in nt)Object.prototype.hasOwnProperty.call(nt,he)&&(B[he]=nt[he])},I(pe,j)},function(pe,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");function B(){this.constructor=pe}I(pe,j),pe.prototype=j===null?Object.create(j):(B.prototype=j.prototype,new B)}),fe=(function(pe){function j(B,nt,he){var it=pe.call(this,B,nt)||this;return it.an=B,it.pn=nt,it.ar=he,it.RETRY_MAX_TIME=8,it}return oe(j,pe),j.prototype.initReqParams=function(B,nt){this.streamId=B,this.cdnPushConfig=nt},j.prototype.active=function(B){var nt=this;if(B===void 0&&(B=!1),this.retryTimer)this.an.warn("".concat(ce.v$W," was actived, ignore"));else if(this.isOverTime)this.an.warn("".concat(ce.v$W," retry over time, stop retry"));else{var he=function(){nt.clearRetryTimer(),nt.ar.sendCDNRequest(nt.streamId,nt.cdnPushConfig,function(it,wt){var Ee=it.body;nt.invalid(),nt.stopMaxTime(),nt.sucCallBack&&(nt.sucCallBack&&nt.sucCallBack(Ee,wt),nt.resetCallback())},function(it){nt._err=it;var wt=it.status_code;nt.isOverTime?nt.requestFail(it):((wt===429||wt>=500&&wt<600)&&nt.setRetryRule(1),nt.active())}),B||nt.attempt++};B?he():this.getRetryDelayByCount(this.attempt).then(function(it){nt.retryTimer=setTimeout(he,it)})}},j})(ne),Y=Z(3788);const re=Z(6994);(Y=Y.default||Y).util.Long=re.default||re,Y.util.Long.fromBits=Y.util.Long.fromBits||function(){return 0};for(var K=Y.roots,M=Y.types?Y.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},F=Y.types?Y.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},T=Object.keys(M),_={$:function(pe){return _[pe]?_[pe].call(this):K[pe].decode?K[pe].decode(this,this.uint32()):_.$.call(this,"int32")}},E={$:function(pe,j,B){var nt=M[pe];return nt===void 0?K[pe].encode?(this.uint32(B<<3|2).fork(),K[pe].encode(j,this).ldelim()):E.$.call(this,"int32",j,B):E[pe].call(this.uint32(B<<3|nt),j)}},w=0;w<T.length;w++)_[T[w]]=Y.Reader.prototype[T[w]],E[T[w]]=Y.Writer.prototype[T[w]];(function pe(j,B,nt,he){for(var it=0,wt=Object.keys(j);it<wt.length;it++){var Ee=wt[it];if(j[Ee].$m&&Object.keys(j[Ee].$m).every(function(Oe){return Number(Oe)})){if(nt[Ee])throw Error(`nested type ${nt}.${Ee} has already exist`);nt[Ee]=(function(Oe,rt){function me(ze){for(var Je in Oe){var yt=Oe[Je];yt[1].charAt(0)==="{"?this[yt[0]]={}:yt[1].charAt(0)!=="["&&yt[1].charAt(0)!=="<"||(this[yt[0]]=[])}if(ze)for(var xt=Object.keys(ze),Ye=0;Ye<xt.length;++Ye)ze[xt[Ye]]!=null&&(this[xt[Ye]]=ze[xt[Ye]])}var Se={};for(var ge in Oe){var ve=Oe[ge],ee=ve[1];ee.charAt(0)==="{"?(me.prototype[ve[0]]=Y.util.emptyObject,Se[ee]={$m:ee.substring(1).split(",").map(function(ze,Je){return[`$${Je+1}`,ze,null]}).reduce(function(ze,Je,yt){return ze[yt+1]=Je,ze},{})}):me.prototype[ve[0]]=ee.charAt(0)==="["||ee.charAt(0)==="<"?Y.util.emptyArray:ee==="bytes"?Y.util.newBuffer([]):ve[2]&&ve[2].hasOwnProperty("low")&&ve[2].hasOwnProperty("high")?Y.util.Long.fromBits(ve[2].low,ve[2].high,ve[2].unsigned):ve[2]}return me.create=function(ze){return new me(ze)},me.decode=function(ze,Je){ze instanceof Y.Reader||(ze=Y.Reader.create(ze));for(var yt=Je===void 0?ze.len:ze.pos+Je,xt=new me;ze.pos<yt;){var Ye=ze.uint32(),J=Ye>>>3;if(J>0&&Oe[J]){var He=Oe[J][0],Le=Oe[J][1];if(Le.charAt(0)==="{"){xt[He]===Y.util.emptyObject&&(xt[He]={});var Ue=me.$namespace[Le].decode(ze,ze.uint32());xt[He][Ue.$1]=Ue.$2}else if(Le.charAt(0)==="["||Le.charAt(0)==="<")if(Le=Le.substring(1),xt[He]&&xt[He].length||(xt[He]=[]),F[Le=!_[Le]&&!K[Le].decode?"int32":Le]!==void 0&&(7&Ye)==2)for(var _t=ze.uint32()+ze.pos;ze.pos<_t;)xt[He].push(_.$.call(ze,Le));else xt[He].push(_.$.call(ze,Le));else xt[He]=_.$.call(ze,Le)}else ze.skipType(7&Ye)}return xt},me.encode=function(ze,Je){for(var yt in Je||(Je=Y.Writer.create()),Oe){var xt=Oe[yt][0],Ye=Oe[yt][1];if(Ye.charAt(0)==="{"){if(ze[xt]!=null&&ze.hasOwnProperty(xt))for(var J=0,He=Object.keys(ze[xt]);J<He.length;++J)Je.uint32(yt<<3|2).fork(),me.$namespace[Ye].encode({$1:He[J],$2:ze[xt][He[J]]},Je).ldelim()}else if(Ye.charAt(0)==="["||Ye.charAt(0)==="<"){var Le=Ye.charAt(0)==="<";Ye=Ye.substring(1);var Ue=ze[xt];if(Ue!=null&&Ue.length)if(Ye=M[Ye]===void 0&&!K[Ye].encode?"int32":Ye,Le&&F[Ye]!==void 0){for(Je.uint32(yt<<3|2).fork(),J=0;J<Ue.length;J++)E[Ye].call(Je,Ue[J]);Je.ldelim()}else for(J=0;J<Ue.length;J++)E.$.call(Je,Ye,Ue[J],yt)}else ze[xt]!=null&&ze.hasOwnProperty(xt)&&E.$.call(Je,Ye,ze[xt],yt)}return Je},Object.keys(Se).length&&(me.$namespace=pe(Se,B+"."+rt,me.$namespace||{},!0)),me})(j[Ee].$m,Ee)}else j[Ee].$s?nt[Ee]=(function(Oe,rt){function me(Se,ge,ve){Y.rpc.Service.call(this,Se,ge,ve)}return(me.prototype=Object.create(Y.rpc.Service.prototype)).constructor=me,me.create=function(Se,ge,ve){return new me(Se,ge,ve)},Object.keys(Oe).forEach(function(Se){var ge=Oe[Se];function ve(ee,ze){return this.rpcCall(ve,K[ge[0]],K[ge[1]],ee,ze)}Object.defineProperty(ve,"name",{value:Se}),Object.defineProperty(ve,"path",{value:`${B}.${rt}`}),me.prototype[Se]=ve}),me})(j[Ee].$s,Ee):j[Ee].$e&&Object.values(j[Ee].$e).every(function(Oe){return Number(Oe)===Oe})&&(nt[Ee]=(function(Oe){for(var rt=Object.keys(Oe),me={},Se=0;Se<rt.length;Se++)me[me[rt[Se]]=Oe[rt[Se]]]=rt[Se];return me})(j[Ee].$e));nt[Ee]&&!he&&(K[`${B}.${Ee}`]=nt[Ee]),delete j[Ee].$m,delete j[Ee].$s,delete j[Ee].$e,nt[Ee]=pe(j[Ee],B?`${B}.${Ee}`:Ee,nt[Ee]||{})}return nt})({media:{proto_media:{MediaServerCommonResponse:{$m:{1:["code","uint32",0],2:["message","string",""]}},NotifySdkNeedStreamRequest:{$m:{1:["request_seq","uint32",0],2:["stream_id","string",""],3:["playAddr","string",""],4:["transCodecId","int32",0],5:["transCodecSuffix","string",""],6:["cdnType","int32",0],7:["retry","int32",0]}},NotifySdkNeedStreamResponse:{$m:{1:["request_seq","uint32",0],2:["response","media.proto_media.MediaServerCommonResponse",null],3:["transCodecSuffix","string",""],4:["action","int32",0],5:["action_delay","int32",0],6:["ttl","int32",0]}},RelayPublishCdnRequest:{$m:{1:["request_seq","uint32",0],2:["request_cmd","int32",0],3:["streamid","string",""],4:["cdn_server","string",""],5:["publish_timeout","uint32",0],6:["request_seq_v2","uint64",{low:0,high:0,unsigned:!0}]}},RelayPublishCdnResponse:{$m:{1:["request_seq","uint32",0],2:["response","media.proto_media.MediaServerCommonResponse",null],3:["request_seq_v2","uint64",{low:0,high:0,unsigned:!0}]}}}}},"",K,!1);var R=K.media,V=Z(3788),ae=Z.n(V),q=Z(7202);ae().util.Long=q.A,ae().configure();var k,G=R.proto_media,xe=(function(){function pe(){}return pe.prototype.encodeRelayPublishCdnReq=function(j){var B=G.RelayPublishCdnRequest.create(j);return G.RelayPublishCdnRequest.encode(B).finish()},pe.prototype.decodeRelayPublishCdnRsp=function(j){var B=G.RelayPublishCdnResponse.decode(j);return B.request_seq_v2&&q.A.isLong(B.request_seq_v2)&&(B.request_seq_v2=B.request_seq_v2.toNumber()),B},pe.prototype.encodeNotifySdkNeedStreamReq=function(j){var B=G.NotifySdkNeedStreamRequest.create(j);return G.NotifySdkNeedStreamRequest.encode(B).finish()},pe.prototype.decodeNotifySdkNeedStreamRsp=function(j){return G.NotifySdkNeedStreamResponse.decode(j)},pe})(),Ae=(function(){var pe=function(j,B){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,he){nt.__proto__=he}||function(nt,he){for(var it in he)Object.prototype.hasOwnProperty.call(he,it)&&(nt[it]=he[it])},pe(j,B)};return function(j,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function nt(){this.constructor=j}pe(j,B),j.prototype=B===null?Object.create(B):(nt.prototype=B.prototype,new nt)}})(),De=(function(pe){function j(B,nt,he){var it=pe.call(this,B,nt)||this;return it.an=B,it.pn=nt,it.ar=he,it.RETRY_MAX_TIME=90,it}return Ae(j,pe),j.prototype.initReqParams=function(B,nt){this.streamID=B,this.transCodecConfig=nt},j.prototype.active=function(B){var nt=this;if(B===void 0&&(B=!1),this.an.info("".concat(ce.nkr," call")),this.retryTimer)this.an.warn("".concat(ce.nkr," was active, ignore"));else if(this.isOverTime)this.an.warn("".concat(ce.nkr," retry over time, stop retry"));else{var he=function(){nt.clearRetryTimer(),nt.ar.sendNotifySdkNeedStreamHttpRes(nt.streamID,nt.transCodecConfig,function(it,wt){var Ee=it.body;nt.invalid(),nt.stopMaxTime(),nt.sucCallBack&&(nt.sucCallBack&&nt.sucCallBack(Ee,wt),nt.resetCallback())},function(it){nt._err=it;var wt=it.status_code;nt.isOverTime?nt.requestFail(it):((wt===429||wt>=500&&wt<600)&&nt.setRetryRule(1),nt.active())}),B||nt.attempt++};B?he():this.getRetryDelayByCount(this.attempt).then(function(it){nt.retryTimer=setTimeout(he,it)})}},j})(ne);(function(pe){pe[pe.I=0]="I",pe[pe.H=10]="H",pe[pe.M=100]="M",pe[pe.L=1e3]="L"})(k||(k={}));var Ie={},be={_sendCDNPublishByAccessHub:function(pe,j,B,nt){var he=this;this.mediaProtoBuf||(this.mediaProtoBuf=new xe);var it=new fe(this.logger,this.stateCenter,this);it.initReqParams(pe,j);var wt=function(Ee,Oe){try{var rt=he.mediaProtoBuf.decodeRelayPublishCdnRsp(Ee);he.logger.info("zb.sh.pt rsp decode ".concat(JSON.stringify(rt)));var me=(rt==null?void 0:rt.response)||{};return{code:me.code,msg:me.message}}catch{return{code:-1}}};it.initCallback(function(Ee,Oe){var rt=wt(Ee),me=rt.code,Se=rt.msg;me&&me!=0?(he.logger.error("zb.sh.pt "+j.type+" error code: "+me+" "+Se),nt(me===5004?P.yTe:P.Oy0," cmd: ".concat(j.type," ").concat(me," ").concat(Se))):(he.logger.info("zb.sh.pt "+j.type+" success"),B&&B({errorCode:0,extendedData:""}))},function(Ee){var Oe=Ee.status_code,rt=Ee.body,me=Ee.code,Se=Ee.msg,ge=JSON.parse(JSON.stringify(Pe.Of.error.He)),ve="";if(me)ge={code:me,msg:Se},ve=Se;else if(Oe===200)he.logger.info("zb.sh.pt error: "),ge=Pe.Of.error.He,ve="cmd: ".concat(j.type);else{var ee="";if((0,ke.QP)(rt))ee=rt;else{var ze=wt(rt);ee=ze.code+" "+ze.msg}ve="request media server fail, error: "+Oe+" "+ee}he.logger.error("zb.sh.pt "+ve),nt&&nt(ge,ve)}),it.startMaxTime(),it.active(!0)},sendCDNRequest:function(pe,j,B,nt){var he=this,it=j.type==="addpush"?1:2,wt={request_seq:this.stateCenter.cdnSeq++,request_cmd:it,streamid:pe,cdn_server:j.pushUrl,request_seq_v2:this.stateCenter.cdnSeqV2++};this.logger.info("zb.sh.scpba "+JSON.stringify(wt));var Ee=this.mediaProtoBuf.encodeRelayPublishCdnReq(wt);this.sendHttpPBRequest({interfaceID:6,resID:this.stateCenter.appid+"/"+pe},Ee,function(Oe,rt){he.logger.info("zb.sh.pt receive message "+(Oe==null?void 0:Oe.status_code)),B&&B(Oe,rt)},function(Oe){nt&&nt(Oe)},{timeout:4e3})},_publishTarget:function(pe,j,B){this.logger.info("zb.sh.pt call");var nt=pe.streamID;this.stateCenter.testEnvironment&&(nt="zegotest-"+this.stateCenter.appid+"-"+pe.streamID),this._sendCDNPublishByAccessHub(nt,pe,j,B)},notifySdkNeedStream:function(pe,j,B,nt){var he=this;this.mediaProtoBuf||(this.mediaProtoBuf=new xe);var it=new De(this.logger,this.stateCenter,this);return it.initReqParams(pe,j),it.initCallback(function(wt){try{var Ee=he.mediaProtoBuf.decodeNotifySdkNeedStreamRsp(wt);he.logger.info("zb.sh.nsns receive message:"+JSON.stringify(Ee));var Oe=(Ee==null?void 0:Ee.response)||{},rt=Oe.code;rt&&rt!=0?nt({code:rt,message:Oe.message||""},Ee):B&&B(Ee)}catch(me){me({code:-1})}},function(wt){he.logger.error("zb.sh.nsns err:"+JSON.stringify(wt)),nt&&nt(wt)}),it.startMaxTime(),it.active(!0),it},sendNotifySdkNeedStreamHttpRes:function(pe,j,B,nt){this.mediaProtoBuf||(this.mediaProtoBuf=new xe);var he=j.playAddr,it=j.transCodecID,wt=j.transCodecSuffix,Ee=j.retry,Oe={request_seq:this.stateCenter.cdnSeq++,stream_id:pe,playAddr:he,transCodecId:it,transCodecSuffix:wt,cdnType:0,retry:Ee};this.logger.info("zb.sh.nsns request body:"+JSON.stringify(Oe));var rt=this.mediaProtoBuf.encodeNotifySdkNeedStreamReq(Oe);this.sendHttpPBRequest({interfaceID:19,resID:this.stateCenter.appid+"/"+pe},rt,function(me,Se){B&&B(me,Se)},function(me){nt&&nt(me)},{timeout:4e3})}},qe=(function(){function pe(j,B,nt,he){this.an=j,this.dataReport=B,this.gn=nt,this.pn=he,this.screenShotReady=!1}return Object.defineProperty(pe.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),pe.prototype.publishTarget=function(j){var B=this,nt="";switch(j.type){case"addpush":nt=Pe.iJ.event;break;case"delpush":case"clearpush":nt=Pe.ns.event}var he=this.cr.createSpan(k.H,{key:Pe.Og.event,par:j.streamID},{key:""},nt);return he.setAttributes({url:Pe.ns.url(j.pushUrl)}),new Ne.l3(function(it,wt){var Ee=function(rt,me){B.an.error("zb.pt "+(me||rt.message)),B.cr.setError(he,rt,me),wt({errorCode:rt.code,extendedData:rt.message+(me?" "+me:"")})};if(["addpush","delpush","clearpush"].indexOf(j.type)==-1)return B.an.error("zb.sh.pt cdn push type error"),void Ee(P.rBJ,"type error");if(j.streamID&&(0,ke.QP)(j.streamID))if(j.pushUrl&&(0,ke.QP)(j.pushUrl))if(B.pn.publishStreamList[j.streamID]){var Oe=B.gn.getRoomByStreamID(j.streamID);Oe?Oe.streamHandler._publishTarget(j,function(rt){he.end(),it(rt)},Ee):Ee(Pe.Of.error.Ue)}else Ee(Pe.Of.error.Be);else Ee(Pe.Of.error.wn,"push url error");else Ee(Pe.Of.error.wn,"stream id type error")})},pe})(),Ve={type:"StreamCDN",install:function(pe,j,B){for(var nt in Object.defineProperty(j.prototype,"initStreamCDN",{value:function(){this.streamCDNModule=new qe(this.logger,this.dataReport,this.streamCenter,this.stateCenter)},writable:!1}),Ie)Object.defineProperty(pe.prototype,nt,{value:Ie[nt],writable:!1});for(var nt in be)Object.defineProperty(B.prototype,nt,{value:be[nt],writable:!1})}}},6361:function(ot){ot.exports=O},6440:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),(function(){if(typeof ArrayBuffer=="function"){var P=I.lib.WordArray,Pe=P.init,ke=P.init=function(ce){if(ce instanceof ArrayBuffer&&(ce=new Uint8Array(ce)),(ce instanceof Int8Array||typeof Uint8ClampedArray<"u"&&ce instanceof Uint8ClampedArray||ce instanceof Int16Array||ce instanceof Uint16Array||ce instanceof Int32Array||ce instanceof Uint32Array||ce instanceof Float32Array||ce instanceof Float64Array)&&(ce=new Uint8Array(ce.buffer,ce.byteOffset,ce.byteLength)),ce instanceof Uint8Array){for(var Ne=ce.byteLength,tt=[],Qe=0;Qe<Ne;Qe++)tt[Qe>>>2]|=ce[Qe]<<24-Qe%4*8;Pe.call(this,tt,Ne)}else Pe.apply(this,arguments)};ke.prototype=P}})(),I.lib.WordArray)},6493:function(ot,Re,Z){Z.d(Re,{$t:function(){return P},Fr:function(){return Y},H8:function(){return ne},HR:function(){return ce},UN:function(){return K},Wu:function(){return Ne},_Z:function(){return tt},aR:function(){return Pe},e8:function(){return fe},gm:function(){return oe},hL:function(){return re},hU:function(){return M},m0:function(){return ke},nr:function(){return Qe}});var I=Z(2638);function P(){return navigator.userAgent||""}function Pe(){return navigator.platform.match(/iPhone|iPod|iPad|ios/i)!==null}function ke(){return P().match(/Android|android/i)!==null}function ce(){return P().match(/OpenHarmony|HarmonyOS/i)!==null}function Ne(){return ce()&&P().match(/ArkWeb/i)!==null}function tt(){var F,T=navigator.userAgent,_=T.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(_[1])?{name:"IE",version:(F=/\brv[ :]+([\d\.]+)/g.exec(T)||[])[1]||""}:_[1]==="Chrome"&&(F=T.match(/\bOPR|Edge\/([\d\.]+)/))!=null?{name:"Opera",version:F[1]}:(_=_[2]?[_[1],_[2]]:[navigator.appName,navigator.appVersion,"-?"],(F=T.match(/version\/([\d+\.]+)/i))!=null&&_.splice(1,1,F[1]),{name:_[0],version:_[1]})}function Qe(){return tt().name.toLowerCase()=="safari"}function ne(){return tt().name.toLowerCase()=="chrome"}function oe(){return tt().name.toLowerCase()=="firefox"}function fe(){return ne()&&!!navigator.userAgent.toLocaleLowerCase().match(/redmi\snote\s8/)}function Y(){var F=P();return!!(F.match(/Mobi/i)||F.match(/Android/i)||F.match(/iPhone/i))}function re(){var F,T;return!!(!((T=(F=P())===null||F===void 0?void 0:F.toLowerCase())===null||T===void 0)&&T.match(/MicroMessenger/i))}function K(){var F=P().toLowerCase().match(/cpu iphone os (.*?) like mac os/);return F&&F[1]||""}function M(){return Pe()?I.B7.IOS:ke()?I.B7.ANDROID:navigator.platform.match(/Mac|Mac68K|MacPPC|MacIntel/i)!==null?I.B7.MAC:navigator.platform.match("Win32")!==null&&P().match(/WOW64|Win64|x86_64|x86-64|x64;|amd64|AMD64|x64_64/i)===null?I.B7.WIN32:ce()?I.B7.Harmony:I.B7.UNKNOWN}},6794:function(ot){ot.exports=(function(){function Re(Z,I,P){function Pe(Ne,tt){if(!I[Ne]){if(!Z[Ne]){if(ke)return ke(Ne,!0);var Qe=new Error("Cannot find module '"+Ne+"'");throw Qe.code="MODULE_NOT_FOUND",Qe}var ne=I[Ne]={exports:{}};Z[Ne][0].call(ne.exports,function(oe){return Pe(Z[Ne][1][oe]||oe)},ne,ne.exports,Re,Z,I,P)}return I[Ne].exports}for(var ke=void 0,ce=0;ce<P.length;ce++)Pe(P[ce]);return Pe}return Re})()({1:[function(Re,Z,I){var P=(0,Re("./adapter_factory.js").adapterFactory)({window});Z.exports=P},{"./adapter_factory.js":2}],2:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.adapterFactory=ne;var P=Qe(Re("./utils")),Pe=Qe(Re("./chrome/chrome_shim")),ke=Qe(Re("./edge/edge_shim")),ce=Qe(Re("./firefox/firefox_shim")),Ne=Qe(Re("./safari/safari_shim")),tt=Qe(Re("./common_shim"));function Qe(oe){if(oe&&oe.__esModule)return oe;var fe={};if(oe!=null)for(var Y in oe)Object.prototype.hasOwnProperty.call(oe,Y)&&(fe[Y]=oe[Y]);return fe.default=oe,fe}function ne(){var oe=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).window,fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},Y=P.log,re=P.detectBrowser(oe),K={browserDetails:re,commonShim:tt,extractVersion:P.extractVersion,disableLog:P.disableLog,disableWarnings:P.disableWarnings};switch(re.browser){case"chrome":if(!Pe||!Pe.shimPeerConnection||!fe.shimChrome)return Y("Chrome shim is not included in this adapter release."),K;Y("adapter.js shimming chrome."),K.browserShim=Pe,Pe.shimGetUserMedia(oe),Pe.shimMediaStream(oe),Pe.shimPeerConnection(oe),Pe.shimOnTrack(oe),Pe.shimAddTrackRemoveTrack(oe),Pe.shimGetSendersWithDtmf(oe),Pe.shimGetStats(oe),Pe.shimSenderReceiverGetStats(oe),Pe.fixNegotiationNeeded(oe),tt.shimRTCIceCandidate(oe),tt.shimConnectionState(oe),tt.shimMaxMessageSize(oe),tt.shimSendThrowTypeError(oe),tt.removeAllowExtmapMixed(oe);break;case"firefox":if(!ce||!ce.shimPeerConnection||!fe.shimFirefox)return Y("Firefox shim is not included in this adapter release."),K;Y("adapter.js shimming firefox."),K.browserShim=ce,ce.shimGetUserMedia(oe),ce.shimPeerConnection(oe),ce.shimOnTrack(oe),ce.shimRemoveStream(oe),ce.shimSenderGetStats(oe),ce.shimReceiverGetStats(oe),ce.shimRTCDataChannel(oe),tt.shimRTCIceCandidate(oe),tt.shimConnectionState(oe),tt.shimMaxMessageSize(oe),tt.shimSendThrowTypeError(oe);break;case"edge":if(!ke||!ke.shimPeerConnection||!fe.shimEdge)return Y("MS edge shim is not included in this adapter release."),K;Y("adapter.js shimming edge."),K.browserShim=ke,ke.shimGetUserMedia(oe),ke.shimGetDisplayMedia(oe),ke.shimPeerConnection(oe),ke.shimReplaceTrack(oe),tt.shimMaxMessageSize(oe),tt.shimSendThrowTypeError(oe);break;case"safari":if(!Ne||!fe.shimSafari)return Y("Safari shim is not included in this adapter release."),K;Y("adapter.js shimming safari."),K.browserShim=Ne,Ne.shimRTCIceServerUrls(oe),Ne.shimCreateOfferLegacy(oe),Ne.shimCallbacksAPI(oe),Ne.shimLocalStreamsAPI(oe),Ne.shimRemoteStreamsAPI(oe),Ne.shimTrackEventTransceiver(oe),Ne.shimGetUserMedia(oe),tt.shimRTCIceCandidate(oe),tt.shimMaxMessageSize(oe),tt.shimSendThrowTypeError(oe),tt.removeAllowExtmapMixed(oe);break;default:Y("Unsupported browser!")}return K}},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=I.shimGetUserMedia=void 0;var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},Pe=Re("./getusermedia");Object.defineProperty(I,"shimGetUserMedia",{enumerable:!0,get:function(){return Pe.shimGetUserMedia}});var ke=Re("./getdisplaymedia");Object.defineProperty(I,"shimGetDisplayMedia",{enumerable:!0,get:function(){return ke.shimGetDisplayMedia}}),I.shimMediaStream=tt,I.shimOnTrack=Qe,I.shimGetSendersWithDtmf=ne,I.shimGetStats=oe,I.shimSenderReceiverGetStats=fe,I.shimAddTrackRemoveTrackWithNative=Y,I.shimAddTrackRemoveTrack=re,I.shimPeerConnection=K,I.fixNegotiationNeeded=M;var ce=Ne(Re("../utils.js"));function Ne(F){if(F&&F.__esModule)return F;var T={};if(F!=null)for(var _ in F)Object.prototype.hasOwnProperty.call(F,_)&&(T[_]=F[_]);return T.default=F,T}function tt(F){F.MediaStream=F.MediaStream||F.webkitMediaStream}function Qe(F){if((F===void 0?"undefined":P(F))==="object"&&F.RTCPeerConnection&&!("ontrack"in F.RTCPeerConnection.prototype)){Object.defineProperty(F.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(_){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=_)},enumerable:!0,configurable:!0});var T=F.RTCPeerConnection.prototype.setRemoteDescription;F.RTCPeerConnection.prototype.setRemoteDescription=function(){var _=this;return this._ontrackpoly||(this._ontrackpoly=function(E){E.stream.addEventListener("addtrack",function(w){var R=void 0;R=F.RTCPeerConnection.prototype.getReceivers?_.getReceivers().find(function(ae){return ae.track&&ae.track.id===w.track.id}):{track:w.track};var V=new Event("track");V.track=w.track,V.receiver=R,V.transceiver={receiver:R},V.streams=[E.stream],_.dispatchEvent(V)}),E.stream.getTracks().forEach(function(w){var R=void 0;R=F.RTCPeerConnection.prototype.getReceivers?_.getReceivers().find(function(ae){return ae.track&&ae.track.id===w.id}):{track:w};var V=new Event("track");V.track=w,V.receiver=R,V.transceiver={receiver:R},V.streams=[E.stream],_.dispatchEvent(V)})},this.addEventListener("addstream",this._ontrackpoly)),T.apply(this,arguments)}}else ce.wrapPeerConnectionEvent(F,"track",function(_){return _.transceiver||Object.defineProperty(_,"transceiver",{value:{receiver:_.receiver}}),_})}function ne(F){if((F===void 0?"undefined":P(F))==="object"&&F.RTCPeerConnection&&!("getSenders"in F.RTCPeerConnection.prototype)&&"createDTMFSender"in F.RTCPeerConnection.prototype){var T=function(ae,q){return{track:q,get dtmf(){return this._dtmf===void 0&&(this._dtmf=q.kind==="audio"?ae.createDTMFSender(q):null),this._dtmf},_pc:ae}};if(!F.RTCPeerConnection.prototype.getSenders){F.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var _=F.RTCPeerConnection.prototype.addTrack;F.RTCPeerConnection.prototype.addTrack=function(ae,q){var k=_.apply(this,arguments);return k||(k=T(this,ae),this._senders.push(k)),k};var E=F.RTCPeerConnection.prototype.removeTrack;F.RTCPeerConnection.prototype.removeTrack=function(ae){E.apply(this,arguments);var q=this._senders.indexOf(ae);q!==-1&&this._senders.splice(q,1)}}var w=F.RTCPeerConnection.prototype.addStream;F.RTCPeerConnection.prototype.addStream=function(ae){var q=this;this._senders=this._senders||[],w.apply(this,[ae]),ae.getTracks().forEach(function(k){q._senders.push(T(q,k))})};var R=F.RTCPeerConnection.prototype.removeStream;F.RTCPeerConnection.prototype.removeStream=function(ae){var q=this;this._senders=this._senders||[],R.apply(this,[ae]),ae.getTracks().forEach(function(k){var G=q._senders.find(function(xe){return xe.track===k});G&&q._senders.splice(q._senders.indexOf(G),1)})}}else if((F===void 0?"undefined":P(F))==="object"&&F.RTCPeerConnection&&"getSenders"in F.RTCPeerConnection.prototype&&"createDTMFSender"in F.RTCPeerConnection.prototype&&F.RTCRtpSender&&!("dtmf"in F.RTCRtpSender.prototype)){var V=F.RTCPeerConnection.prototype.getSenders;F.RTCPeerConnection.prototype.getSenders=function(){var ae=this,q=V.apply(this,[]);return q.forEach(function(k){return k._pc=ae}),q},Object.defineProperty(F.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this._dtmf=this.track.kind==="audio"?this._pc.createDTMFSender(this.track):null),this._dtmf}})}}function oe(F){if(F.RTCPeerConnection){var T=F.RTCPeerConnection.prototype.getStats;F.RTCPeerConnection.prototype.getStats=function(_,E,w){var R=this,V=arguments;if(arguments.length>0&&typeof _=="function")return T.apply(this,arguments);if(T.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return T.apply(this,[]);var ae=function(k){var G={};return k.result().forEach(function(xe){var Ae={id:xe.id,timestamp:xe.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[xe.type]||xe.type};xe.names().forEach(function(De){Ae[De]=xe.stat(De)}),G[Ae.id]=Ae}),G},q=function(k){return new Map(Object.keys(k).map(function(G){return[G,k[G]]}))};return arguments.length>=2?T.apply(this,[function(k){V[1](q(ae(k)))},arguments[0]]):new Promise(function(k,G){T.apply(R,[function(xe){k(q(ae(xe)))},G])}).then(E,w)}}}function fe(F){if((F===void 0?"undefined":P(F))==="object"&&F.RTCPeerConnection&&F.RTCRtpSender&&F.RTCRtpReceiver){if(!("getStats"in F.RTCRtpSender.prototype)){var T=F.RTCPeerConnection.prototype.getSenders;T&&(F.RTCPeerConnection.prototype.getSenders=function(){var R=this,V=T.apply(this,[]);return V.forEach(function(ae){return ae._pc=R}),V});var _=F.RTCPeerConnection.prototype.addTrack;_&&(F.RTCPeerConnection.prototype.addTrack=function(){var R=_.apply(this,arguments);return R._pc=this,R}),F.RTCRtpSender.prototype.getStats=function(){var R=this;return this._pc.getStats().then(function(V){return ce.filterStats(V,R.track,!0)})}}if(!("getStats"in F.RTCRtpReceiver.prototype)){var E=F.RTCPeerConnection.prototype.getReceivers;E&&(F.RTCPeerConnection.prototype.getReceivers=function(){var R=this,V=E.apply(this,[]);return V.forEach(function(ae){return ae._pc=R}),V}),ce.wrapPeerConnectionEvent(F,"track",function(R){return R.receiver._pc=R.srcElement,R}),F.RTCRtpReceiver.prototype.getStats=function(){var R=this;return this._pc.getStats().then(function(V){return ce.filterStats(V,R.track,!1)})}}if("getStats"in F.RTCRtpSender.prototype&&"getStats"in F.RTCRtpReceiver.prototype){var w=F.RTCPeerConnection.prototype.getStats;F.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof F.MediaStreamTrack){var R=arguments[0],V=void 0,ae=void 0,q=void 0;return this.getSenders().forEach(function(k){k.track===R&&(V?q=!0:V=k)}),this.getReceivers().forEach(function(k){return k.track===R&&(ae?q=!0:ae=k),k.track===R}),q||V&&ae?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):V?V.getStats():ae?ae.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return w.apply(this,arguments)}}}}function Y(F){F.RTCPeerConnection.prototype.getLocalStreams=function(){var R=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(V){return R._shimmedLocalStreams[V][0]})};var T=F.RTCPeerConnection.prototype.addTrack;F.RTCPeerConnection.prototype.addTrack=function(R,V){if(!V)return T.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var ae=T.apply(this,arguments);return this._shimmedLocalStreams[V.id]?this._shimmedLocalStreams[V.id].indexOf(ae)===-1&&this._shimmedLocalStreams[V.id].push(ae):this._shimmedLocalStreams[V.id]=[V,ae],ae};var _=F.RTCPeerConnection.prototype.addStream;F.RTCPeerConnection.prototype.addStream=function(R){var V=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},R.getTracks().forEach(function(k){if(V.getSenders().find(function(G){return G.track===k}))throw new DOMException("Track already exists.","InvalidAccessError")});var ae=this.getSenders();_.apply(this,arguments);var q=this.getSenders().filter(function(k){return ae.indexOf(k)===-1});this._shimmedLocalStreams[R.id]=[R].concat(q)};var E=F.RTCPeerConnection.prototype.removeStream;F.RTCPeerConnection.prototype.removeStream=function(R){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[R.id],E.apply(this,arguments)};var w=F.RTCPeerConnection.prototype.removeTrack;F.RTCPeerConnection.prototype.removeTrack=function(R){var V=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},R&&Object.keys(this._shimmedLocalStreams).forEach(function(ae){var q=V._shimmedLocalStreams[ae].indexOf(R);q!==-1&&V._shimmedLocalStreams[ae].splice(q,1),V._shimmedLocalStreams[ae].length===1&&delete V._shimmedLocalStreams[ae]}),w.apply(this,arguments)}}function re(F){if(F.RTCPeerConnection){var T=ce.detectBrowser(F);if(F.RTCPeerConnection.prototype.addTrack&&T.version>=65)return Y(F);var _=F.RTCPeerConnection.prototype.getLocalStreams;F.RTCPeerConnection.prototype.getLocalStreams=function(){var k=this,G=_.apply(this);return this._reverseStreams=this._reverseStreams||{},G.map(function(xe){return k._reverseStreams[xe.id]})};var E=F.RTCPeerConnection.prototype.addStream;F.RTCPeerConnection.prototype.addStream=function(k){var G=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},k.getTracks().forEach(function(Ae){if(G.getSenders().find(function(De){return De.track===Ae}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[k.id]){var xe=new F.MediaStream(k.getTracks());this._streams[k.id]=xe,this._reverseStreams[xe.id]=k,k=xe}E.apply(this,[k])};var w=F.RTCPeerConnection.prototype.removeStream;F.RTCPeerConnection.prototype.removeStream=function(k){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},w.apply(this,[this._streams[k.id]||k]),delete this._reverseStreams[this._streams[k.id]?this._streams[k.id].id:k.id],delete this._streams[k.id]},F.RTCPeerConnection.prototype.addTrack=function(k,G){var xe=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var Ae=[].slice.call(arguments,1);if(Ae.length!==1||!Ae[0].getTracks().find(function(be){return be===k}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(be){return be.track===k}))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var De=this._streams[G.id];if(De)De.addTrack(k),Promise.resolve().then(function(){xe.dispatchEvent(new Event("negotiationneeded"))});else{var Ie=new F.MediaStream([k]);this._streams[G.id]=Ie,this._reverseStreams[Ie.id]=G,this.addStream(Ie)}return this.getSenders().find(function(be){return be.track===k})},["createOffer","createAnswer"].forEach(function(k){var G=F.RTCPeerConnection.prototype[k];F.RTCPeerConnection.prototype[k]=function(){var xe=this,Ae=arguments;return arguments.length&&typeof arguments[0]=="function"?G.apply(this,[function(De){var Ie=ae(xe,De);Ae[0].apply(null,[Ie])},function(De){Ae[1]&&Ae[1].apply(null,De)},arguments[2]]):G.apply(this,arguments).then(function(De){return ae(xe,De)})}});var R=F.RTCPeerConnection.prototype.setLocalDescription;F.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=q(this,arguments[0]),R.apply(this,arguments)):R.apply(this,arguments)};var V=Object.getOwnPropertyDescriptor(F.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(F.RTCPeerConnection.prototype,"localDescription",{get:function(){var k=V.get.apply(this);return k.type===""?k:ae(this,k)}}),F.RTCPeerConnection.prototype.removeTrack=function(k){var G=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!k._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(k._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var xe=void 0;Object.keys(this._streams).forEach(function(Ae){G._streams[Ae].getTracks().find(function(De){return k.track===De})&&(xe=G._streams[Ae])}),xe&&(xe.getTracks().length===1?this.removeStream(this._reverseStreams[xe.id]):xe.removeTrack(k.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ae(k,G){var xe=G.sdp;return Object.keys(k._reverseStreams||[]).forEach(function(Ae){var De=k._reverseStreams[Ae];xe=xe.replace(new RegExp(k._streams[De.id].id,"g"),De.id)}),new RTCSessionDescription({type:G.type,sdp:xe})}function q(k,G){var xe=G.sdp;return Object.keys(k._reverseStreams||[]).forEach(function(Ae){var De=k._reverseStreams[Ae],Ie=k._streams[De.id];xe=xe.replace(new RegExp(De.id,"g"),Ie.id)}),new RTCSessionDescription({type:G.type,sdp:xe})}}function K(F){if(!F.RTCPeerConnection&&F.webkitRTCPeerConnection&&(F.RTCPeerConnection=F.webkitRTCPeerConnection),F.RTCPeerConnection){["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_){var E=F.RTCPeerConnection.prototype[_];F.RTCPeerConnection.prototype[_]=function(){return arguments[0]=new(_==="addIceCandidate"?F.RTCIceCandidate:F.RTCSessionDescription)(arguments[0]),E.apply(this,arguments)}});var T=F.RTCPeerConnection.prototype.addIceCandidate;F.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?T.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}}function M(F){ce.wrapPeerConnectionEvent(F,"negotiationneeded",function(T){if(T.target.signalingState==="stable")return T})}},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(Re,Z,I){function P(Pe,ke){Pe.navigator.mediaDevices&&"getDisplayMedia"in Pe.navigator.mediaDevices||Pe.navigator.mediaDevices&&(typeof ke=="function"?Pe.navigator.mediaDevices.getDisplayMedia=function(ce){return ke(ce).then(function(Ne){var tt=ce.video&&ce.video.width,Qe=ce.video&&ce.video.height;return ce.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:Ne,maxFrameRate:ce.video&&ce.video.frameRate||3}},tt&&(ce.video.mandatory.maxWidth=tt),Qe&&(ce.video.mandatory.maxHeight=Qe),Pe.navigator.mediaDevices.getUserMedia(ce)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=P},{}],5:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0});var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(tt){return typeof tt}:function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt};I.shimGetUserMedia=Ne;var Pe=ke(Re("../utils.js"));function ke(tt){if(tt&&tt.__esModule)return tt;var Qe={};if(tt!=null)for(var ne in tt)Object.prototype.hasOwnProperty.call(tt,ne)&&(Qe[ne]=tt[ne]);return Qe.default=tt,Qe}var ce=Pe.log;function Ne(tt){var Qe=tt&&tt.navigator;if(Qe.mediaDevices){var ne=Pe.detectBrowser(tt),oe=function(M){if((M===void 0?"undefined":P(M))!=="object"||M.mandatory||M.optional)return M;var F={};return Object.keys(M).forEach(function(T){if(T!=="require"&&T!=="advanced"&&T!=="mediaSource"){var _=P(M[T])==="object"?M[T]:{ideal:M[T]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);var E=function(R,V){return R?R+V.charAt(0).toUpperCase()+V.slice(1):V==="deviceId"?"sourceId":V};if(_.ideal!==void 0){F.optional=F.optional||[];var w={};typeof _.ideal=="number"?(w[E("min",T)]=_.ideal,F.optional.push(w),(w={})[E("max",T)]=_.ideal,F.optional.push(w)):(w[E("",T)]=_.ideal,F.optional.push(w))}_.exact!==void 0&&typeof _.exact!="number"?(F.mandatory=F.mandatory||{},F.mandatory[E("",T)]=_.exact):["min","max"].forEach(function(R){_[R]!==void 0&&(F.mandatory=F.mandatory||{},F.mandatory[E(R,T)]=_[R])})}}),M.advanced&&(F.optional=(F.optional||[]).concat(M.advanced)),F},fe=function(M,F){if(ne.version>=61)return F(M);if((M=JSON.parse(JSON.stringify(M)))&&P(M.audio)==="object"){var T=function(R,V,ae){V in R&&!(ae in R)&&(R[ae]=R[V],delete R[V])};T((M=JSON.parse(JSON.stringify(M))).audio,"autoGainControl","googAutoGainControl"),T(M.audio,"noiseSuppression","googNoiseSuppression"),M.audio=oe(M.audio)}if(M&&P(M.video)==="object"){var _=M.video.facingMode;_=_&&((_===void 0?"undefined":P(_))==="object"?_:{ideal:_});var E=ne.version<66;if(_&&(_.exact==="user"||_.exact==="environment"||_.ideal==="user"||_.ideal==="environment")&&(!Qe.mediaDevices.getSupportedConstraints||!Qe.mediaDevices.getSupportedConstraints().facingMode||E)){delete M.video.facingMode;var w=void 0;if(_.exact==="environment"||_.ideal==="environment"?w=["back","rear"]:_.exact!=="user"&&_.ideal!=="user"||(w=["front"]),w)return Qe.mediaDevices.enumerateDevices().then(function(R){var V=(R=R.filter(function(ae){return ae.kind==="videoinput"})).find(function(ae){return w.some(function(q){return ae.label.toLowerCase().includes(q)})});return!V&&R.length&&w.includes("back")&&(V=R[R.length-1]),V&&(M.video.deviceId=_.exact?{exact:V.deviceId}:{ideal:V.deviceId}),M.video=oe(M.video),ce("chrome: "+JSON.stringify(M)),F(M)})}M.video=oe(M.video)}return ce("chrome: "+JSON.stringify(M)),F(M)},Y=function(M){return ne.version>=64?M:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[M.name]||M.name,message:M.message,constraint:M.constraint||M.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},re=function(M,F,T){fe(M,function(_){Qe.webkitGetUserMedia(_,F,function(E){T&&T(Y(E))})})};if(Qe.getUserMedia=re.bind(Qe),Qe.mediaDevices.getUserMedia){var K=Qe.mediaDevices.getUserMedia.bind(Qe.mediaDevices);Qe.mediaDevices.getUserMedia=function(M){return fe(M,function(F){return K(F).then(function(T){if(F.audio&&!T.getAudioTracks().length||F.video&&!T.getVideoTracks().length)throw T.getTracks().forEach(function(_){_.stop()}),new DOMException("","NotFoundError");return T},function(T){return Promise.reject(Y(T))})})}}}}},{"../utils.js":15}],6:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0});var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};I.shimRTCIceCandidate=tt,I.shimMaxMessageSize=Qe,I.shimSendThrowTypeError=ne,I.shimConnectionState=oe,I.removeAllowExtmapMixed=fe;var Pe=Ne(Re("sdp")),ke=ce(Re("./utils"));function ce(Y){if(Y&&Y.__esModule)return Y;var re={};if(Y!=null)for(var K in Y)Object.prototype.hasOwnProperty.call(Y,K)&&(re[K]=Y[K]);return re.default=Y,re}function Ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function tt(Y){if(!(!Y.RTCIceCandidate||Y.RTCIceCandidate&&"foundation"in Y.RTCIceCandidate.prototype)){var re=Y.RTCIceCandidate;Y.RTCIceCandidate=function(K){if((K===void 0?"undefined":P(K))==="object"&&K.candidate&&K.candidate.indexOf("a=")===0&&((K=JSON.parse(JSON.stringify(K))).candidate=K.candidate.substr(2)),K.candidate&&K.candidate.length){var M=new re(K),F=Pe.default.parseCandidate(K.candidate),T=Object.assign(M,F);return T.toJSON=function(){return{candidate:T.candidate,sdpMid:T.sdpMid,sdpMLineIndex:T.sdpMLineIndex,usernameFragment:T.usernameFragment}},T}return new re(K)},Y.RTCIceCandidate.prototype=re.prototype,ke.wrapPeerConnectionEvent(Y,"icecandidate",function(K){return K.candidate&&Object.defineProperty(K,"candidate",{value:new Y.RTCIceCandidate(K.candidate),writable:"false"}),K})}}function Qe(Y){if(!Y.RTCSctpTransport&&Y.RTCPeerConnection){var re=ke.detectBrowser(Y);"sctp"in Y.RTCPeerConnection.prototype||Object.defineProperty(Y.RTCPeerConnection.prototype,"sctp",{get:function(){return this._sctp===void 0?null:this._sctp}});var K=function(E){if(!E||!E.sdp)return!1;var w=Pe.default.splitSections(E.sdp);return w.shift(),w.some(function(R){var V=Pe.default.parseMLine(R);return V&&V.kind==="application"&&V.protocol.indexOf("SCTP")!==-1})},M=function(E){var w=E.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(w===null||w.length<2)return-1;var R=parseInt(w[1],10);return R!=R?-1:R},F=function(E){var w=65536;return re.browser==="firefox"&&(w=re.version<57?E===-1?16384:2147483637:re.version<60?re.version===57?65535:65536:2147483637),w},T=function(E,w){var R=65536;re.browser==="firefox"&&re.version===57&&(R=65535);var V=Pe.default.matchPrefix(E.sdp,"a=max-message-size:");return V.length>0?R=parseInt(V[0].substr(19),10):re.browser==="firefox"&&w!==-1&&(R=2147483637),R},_=Y.RTCPeerConnection.prototype.setRemoteDescription;Y.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,K(arguments[0])){var E=M(arguments[0]),w=F(E),R=T(arguments[0],E),V=void 0;V=w===0&&R===0?Number.POSITIVE_INFINITY:w===0||R===0?Math.max(w,R):Math.min(w,R);var ae={};Object.defineProperty(ae,"maxMessageSize",{get:function(){return V}}),this._sctp=ae}return _.apply(this,arguments)}}}function ne(Y){if(Y.RTCPeerConnection&&"createDataChannel"in Y.RTCPeerConnection.prototype){var re=Y.RTCPeerConnection.prototype.createDataChannel;Y.RTCPeerConnection.prototype.createDataChannel=function(){var M=re.apply(this,arguments);return K(M,this),M},ke.wrapPeerConnectionEvent(Y,"datachannel",function(M){return K(M.channel,M.target),M})}function K(M,F){var T=M.send;M.send=function(){var _=arguments[0];if(M.readyState==="open"&&F.sctp&&(_.length||_.size||_.byteLength)>F.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+F.sctp.maxMessageSize+" bytes)");return T.apply(M,arguments)}}}function oe(Y){if(Y.RTCPeerConnection&&!("connectionState"in Y.RTCPeerConnection.prototype)){var re=Y.RTCPeerConnection.prototype;Object.defineProperty(re,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(re,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(K){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),K&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=K)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(K){var M=re[K];re[K]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(F){var T=F.target;if(T._lastConnectionState!==T.connectionState){T._lastConnectionState=T.connectionState;var _=new Event("connectionstatechange",F);T.dispatchEvent(_)}return F},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),M.apply(this,arguments)}})}}function fe(Y){if(Y.RTCPeerConnection){var re=ke.detectBrowser(Y);if(!(re.browser==="chrome"&&re.version>=71)){var K=Y.RTCPeerConnection.prototype.setRemoteDescription;Y.RTCPeerConnection.prototype.setRemoteDescription=function(M){return M&&M.sdp&&M.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(M.sdp=M.sdp.split(`
`).filter(function(F){return F.trim()!=="a=extmap-allow-mixed"}).join(`
`)),K.apply(this,arguments)}}}}},{"./utils":15,sdp:17}],7:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=I.shimGetUserMedia=void 0;var P=Re("./getusermedia");Object.defineProperty(I,"shimGetUserMedia",{enumerable:!0,get:function(){return P.shimGetUserMedia}});var Pe=Re("./getdisplaymedia");Object.defineProperty(I,"shimGetDisplayMedia",{enumerable:!0,get:function(){return Pe.shimGetDisplayMedia}}),I.shimPeerConnection=ne,I.shimReplaceTrack=oe;var ke=Qe(Re("../utils")),ce=Re("./filtericeservers"),Ne=tt(Re("rtcpeerconnection-shim"));function tt(fe){return fe&&fe.__esModule?fe:{default:fe}}function Qe(fe){if(fe&&fe.__esModule)return fe;var Y={};if(fe!=null)for(var re in fe)Object.prototype.hasOwnProperty.call(fe,re)&&(Y[re]=fe[re]);return Y.default=fe,Y}function ne(fe){var Y=ke.detectBrowser(fe);if(fe.RTCIceGatherer&&(fe.RTCIceCandidate||(fe.RTCIceCandidate=function(M){return M}),fe.RTCSessionDescription||(fe.RTCSessionDescription=function(M){return M}),Y.version<15025)){var re=Object.getOwnPropertyDescriptor(fe.MediaStreamTrack.prototype,"enabled");Object.defineProperty(fe.MediaStreamTrack.prototype,"enabled",{set:function(M){re.set.call(this,M);var F=new Event("enabled");F.enabled=M,this.dispatchEvent(F)}})}fe.RTCRtpSender&&!("dtmf"in fe.RTCRtpSender.prototype)&&Object.defineProperty(fe.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new fe.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),fe.RTCDtmfSender&&!fe.RTCDTMFSender&&(fe.RTCDTMFSender=fe.RTCDtmfSender);var K=(0,Ne.default)(fe,Y.version);fe.RTCPeerConnection=function(M){return M&&M.iceServers&&(M.iceServers=(0,ce.filterIceServers)(M.iceServers,Y.version),ke.log("ICE servers after filtering:",M.iceServers)),new K(M)},fe.RTCPeerConnection.prototype=K.prototype}function oe(fe){fe.RTCRtpSender&&!("replaceTrack"in fe.RTCRtpSender.prototype)&&(fe.RTCRtpSender.prototype.replaceTrack=fe.RTCRtpSender.prototype.setTrack)}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.filterIceServers=ke;var P=Pe(Re("../utils"));function Pe(ce){if(ce&&ce.__esModule)return ce;var Ne={};if(ce!=null)for(var tt in ce)Object.prototype.hasOwnProperty.call(ce,tt)&&(Ne[tt]=ce[tt]);return Ne.default=ce,Ne}function ke(ce,Ne){var tt=!1;return(ce=JSON.parse(JSON.stringify(ce))).filter(function(Qe){if(Qe&&(Qe.urls||Qe.url)){var ne=Qe.urls||Qe.url;Qe.url&&!Qe.urls&&P.deprecated("RTCIceServer.url","RTCIceServer.urls");var oe=typeof ne=="string";return oe&&(ne=[ne]),ne=ne.filter(function(fe){if(fe.indexOf("stun:")===0)return!1;var Y=fe.startsWith("turn")&&!fe.startsWith("turn:[")&&fe.includes("transport=udp");return Y&&!tt?(tt=!0,!0):Y&&!tt}),delete Qe.url,Qe.urls=oe?ne[0]:ne,!!ne.length}})}},{"../utils":15}],9:[function(Re,Z,I){function P(Pe){"getDisplayMedia"in Pe.navigator&&Pe.navigator.mediaDevices&&(Pe.navigator.mediaDevices&&"getDisplayMedia"in Pe.navigator.mediaDevices||(Pe.navigator.mediaDevices.getDisplayMedia=Pe.navigator.getDisplayMedia.bind(Pe.navigator)))}Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=P},{}],10:[function(Re,Z,I){function P(Pe){var ke=Pe&&Pe.navigator,ce=function(tt){return{name:{PermissionDeniedError:"NotAllowedError"}[tt.name]||tt.name,message:tt.message,constraint:tt.constraint,toString:function(){return this.name}}},Ne=ke.mediaDevices.getUserMedia.bind(ke.mediaDevices);ke.mediaDevices.getUserMedia=function(tt){return Ne(tt).catch(function(Qe){return Promise.reject(ce(Qe))})}}Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetUserMedia=P},{}],11:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=I.shimGetUserMedia=void 0;var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re},Pe=Re("./getusermedia");Object.defineProperty(I,"shimGetUserMedia",{enumerable:!0,get:function(){return Pe.shimGetUserMedia}});var ke=Re("./getdisplaymedia");Object.defineProperty(I,"shimGetDisplayMedia",{enumerable:!0,get:function(){return ke.shimGetDisplayMedia}}),I.shimOnTrack=tt,I.shimPeerConnection=Qe,I.shimSenderGetStats=ne,I.shimReceiverGetStats=oe,I.shimRemoveStream=fe,I.shimRTCDataChannel=Y;var ce=Ne(Re("../utils"));function Ne(re){if(re&&re.__esModule)return re;var K={};if(re!=null)for(var M in re)Object.prototype.hasOwnProperty.call(re,M)&&(K[M]=re[M]);return K.default=re,K}function tt(re){(re===void 0?"undefined":P(re))==="object"&&re.RTCTrackEvent&&"receiver"in re.RTCTrackEvent.prototype&&!("transceiver"in re.RTCTrackEvent.prototype)&&Object.defineProperty(re.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Qe(re){var K=ce.detectBrowser(re);if((re===void 0?"undefined":P(re))==="object"&&(re.RTCPeerConnection||re.mozRTCPeerConnection)){!re.RTCPeerConnection&&re.mozRTCPeerConnection&&(re.RTCPeerConnection=re.mozRTCPeerConnection),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_){var E=re.RTCPeerConnection.prototype[_];re.RTCPeerConnection.prototype[_]=function(){return arguments[0]=new(_==="addIceCandidate"?re.RTCIceCandidate:re.RTCSessionDescription)(arguments[0]),E.apply(this,arguments)}});var M=re.RTCPeerConnection.prototype.addIceCandidate;re.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?M.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var F={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},T=re.RTCPeerConnection.prototype.getStats;re.RTCPeerConnection.prototype.getStats=function(_,E,w){return T.apply(this,[_||null]).then(function(R){if(K.version<53&&!E)try{R.forEach(function(V){V.type=F[V.type]||V.type})}catch(V){if(V.name!=="TypeError")throw V;R.forEach(function(ae,q){R.set(q,Object.assign({},ae,{type:F[ae.type]||ae.type}))})}return R}).then(E,w)}}}function ne(re){if((re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection&&re.RTCRtpSender&&(!re.RTCRtpSender||!("getStats"in re.RTCRtpSender.prototype))){var K=re.RTCPeerConnection.prototype.getSenders;K&&(re.RTCPeerConnection.prototype.getSenders=function(){var F=this,T=K.apply(this,[]);return T.forEach(function(_){return _._pc=F}),T});var M=re.RTCPeerConnection.prototype.addTrack;M&&(re.RTCPeerConnection.prototype.addTrack=function(){var F=M.apply(this,arguments);return F._pc=this,F}),re.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function oe(re){if((re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection&&re.RTCRtpSender&&(!re.RTCRtpSender||!("getStats"in re.RTCRtpReceiver.prototype))){var K=re.RTCPeerConnection.prototype.getReceivers;K&&(re.RTCPeerConnection.prototype.getReceivers=function(){var M=this,F=K.apply(this,[]);return F.forEach(function(T){return T._pc=M}),F}),ce.wrapPeerConnectionEvent(re,"track",function(M){return M.receiver._pc=M.srcElement,M}),re.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function fe(re){re.RTCPeerConnection&&!("removeStream"in re.RTCPeerConnection.prototype)&&(re.RTCPeerConnection.prototype.removeStream=function(K){var M=this;ce.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(F){F.track&&K.getTracks().includes(F.track)&&M.removeTrack(F)})})}function Y(re){re.DataChannel&&!re.RTCDataChannel&&(re.RTCDataChannel=re.DataChannel)}},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(Re,Z,I){function P(Pe,ke){Pe.navigator.mediaDevices&&"getDisplayMedia"in Pe.navigator.mediaDevices||Pe.navigator.mediaDevices&&(Pe.navigator.mediaDevices.getDisplayMedia=function(ce){if(!ce||!ce.video){var Ne=new DOMException("getDisplayMedia without video constraints is undefined");return Ne.name="NotFoundError",Ne.code=8,Promise.reject(Ne)}return ce.video===!0?ce.video={mediaSource:ke}:ce.video.mediaSource=ke,Pe.navigator.mediaDevices.getUserMedia(ce)})}Object.defineProperty(I,"__esModule",{value:!0}),I.shimGetDisplayMedia=P},{}],13:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0});var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ne){return typeof Ne}:function(Ne){return Ne&&typeof Symbol=="function"&&Ne.constructor===Symbol&&Ne!==Symbol.prototype?"symbol":typeof Ne};I.shimGetUserMedia=ce;var Pe=ke(Re("../utils"));function ke(Ne){if(Ne&&Ne.__esModule)return Ne;var tt={};if(Ne!=null)for(var Qe in Ne)Object.prototype.hasOwnProperty.call(Ne,Qe)&&(tt[Qe]=Ne[Qe]);return tt.default=Ne,tt}function ce(Ne){var tt=Pe.detectBrowser(Ne),Qe=Ne&&Ne.navigator,ne=Ne&&Ne.MediaStreamTrack;if(Qe.getUserMedia=function(K,M,F){Pe.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),Qe.mediaDevices.getUserMedia(K).then(M,F)},!(tt.version>55&&"autoGainControl"in Qe.mediaDevices.getSupportedConstraints())){var oe=function(K,M,F){M in K&&!(F in K)&&(K[F]=K[M],delete K[M])},fe=Qe.mediaDevices.getUserMedia.bind(Qe.mediaDevices);if(Qe.mediaDevices.getUserMedia=function(K){return(K===void 0?"undefined":P(K))==="object"&&P(K.audio)==="object"&&(K=JSON.parse(JSON.stringify(K)),oe(K.audio,"autoGainControl","mozAutoGainControl"),oe(K.audio,"noiseSuppression","mozNoiseSuppression")),fe(K)},ne&&ne.prototype.getSettings){var Y=ne.prototype.getSettings;ne.prototype.getSettings=function(){var K=Y.apply(this,arguments);return oe(K,"mozAutoGainControl","autoGainControl"),oe(K,"mozNoiseSuppression","noiseSuppression"),K}}if(ne&&ne.prototype.applyConstraints){var re=ne.prototype.applyConstraints;ne.prototype.applyConstraints=function(K){return this.kind==="audio"&&(K===void 0?"undefined":P(K))==="object"&&(K=JSON.parse(JSON.stringify(K)),oe(K,"autoGainControl","mozAutoGainControl"),oe(K,"noiseSuppression","mozNoiseSuppression")),re.apply(this,[K])}}}}},{"../utils":15}],14:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0});var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(re){return typeof re}:function(re){return re&&typeof Symbol=="function"&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};I.shimLocalStreamsAPI=ce,I.shimRemoteStreamsAPI=Ne,I.shimCallbacksAPI=tt,I.shimGetUserMedia=Qe,I.shimConstraints=ne,I.shimRTCIceServerUrls=oe,I.shimTrackEventTransceiver=fe,I.shimCreateOfferLegacy=Y;var Pe=ke(Re("../utils"));function ke(re){if(re&&re.__esModule)return re;var K={};if(re!=null)for(var M in re)Object.prototype.hasOwnProperty.call(re,M)&&(K[M]=re[M]);return K.default=re,K}function ce(re){if((re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection){if("getLocalStreams"in re.RTCPeerConnection.prototype||(re.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in re.RTCPeerConnection.prototype)){var K=re.RTCPeerConnection.prototype.addTrack;re.RTCPeerConnection.prototype.addStream=function(M){var F=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(M)||this._localStreams.push(M),M.getTracks().forEach(function(T){return K.call(F,T,M)})},re.RTCPeerConnection.prototype.addTrack=function(M,F){return F&&(this._localStreams?this._localStreams.includes(F)||this._localStreams.push(F):this._localStreams=[F]),K.call(this,M,F)}}"removeStream"in re.RTCPeerConnection.prototype||(re.RTCPeerConnection.prototype.removeStream=function(M){var F=this;this._localStreams||(this._localStreams=[]);var T=this._localStreams.indexOf(M);if(T!==-1){this._localStreams.splice(T,1);var _=M.getTracks();this.getSenders().forEach(function(E){_.includes(E.track)&&F.removeTrack(E)})}})}}function Ne(re){if((re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection&&("getRemoteStreams"in re.RTCPeerConnection.prototype||(re.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in re.RTCPeerConnection.prototype))){Object.defineProperty(re.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(M){var F=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=M),this.addEventListener("track",this._onaddstreampoly=function(T){T.streams.forEach(function(_){if(F._remoteStreams||(F._remoteStreams=[]),!F._remoteStreams.includes(_)){F._remoteStreams.push(_);var E=new Event("addstream");E.stream=_,F.dispatchEvent(E)}})})}});var K=re.RTCPeerConnection.prototype.setRemoteDescription;re.RTCPeerConnection.prototype.setRemoteDescription=function(){var M=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(F){F.streams.forEach(function(T){if(M._remoteStreams||(M._remoteStreams=[]),!(M._remoteStreams.indexOf(T)>=0)){M._remoteStreams.push(T);var _=new Event("addstream");_.stream=T,M.dispatchEvent(_)}})}),K.apply(M,arguments)}}}function tt(re){if((re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection){var K=re.RTCPeerConnection.prototype,M=K.createOffer,F=K.createAnswer,T=K.setLocalDescription,_=K.setRemoteDescription,E=K.addIceCandidate;K.createOffer=function(R,V){var ae=M.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return V?(ae.then(R,V),Promise.resolve()):ae},K.createAnswer=function(R,V){var ae=F.apply(this,[arguments.length>=2?arguments[2]:arguments[0]]);return V?(ae.then(R,V),Promise.resolve()):ae};var w=function(R,V,ae){var q=T.apply(this,[R]);return ae?(q.then(V,ae),Promise.resolve()):q};K.setLocalDescription=w,K.setRemoteDescription=w=function(R,V,ae){var q=_.apply(this,[R]);return ae?(q.then(V,ae),Promise.resolve()):q},K.addIceCandidate=w=function(R,V,ae){var q=E.apply(this,[R]);return ae?(q.then(V,ae),Promise.resolve()):q}}}function Qe(re){var K=re&&re.navigator;if(K.mediaDevices&&K.mediaDevices.getUserMedia){var M=K.mediaDevices,F=M.getUserMedia.bind(M);K.mediaDevices.getUserMedia=function(T){return F(ne(T))}}!K.getUserMedia&&K.mediaDevices&&K.mediaDevices.getUserMedia&&(K.getUserMedia=(function(T,_,E){K.mediaDevices.getUserMedia(T).then(_,E)}).bind(K))}function ne(re){return re&&re.video!==void 0?Object.assign({},re,{video:Pe.compactObject(re.video)}):re}function oe(re){var K=re.RTCPeerConnection;re.RTCPeerConnection=function(M,F){if(M&&M.iceServers){for(var T=[],_=0;_<M.iceServers.length;_++){var E=M.iceServers[_];!E.hasOwnProperty("urls")&&E.hasOwnProperty("url")?(Pe.deprecated("RTCIceServer.url","RTCIceServer.urls"),(E=JSON.parse(JSON.stringify(E))).urls=E.url,delete E.url,T.push(E)):T.push(M.iceServers[_])}M.iceServers=T}return new K(M,F)},re.RTCPeerConnection.prototype=K.prototype,"generateCertificate"in re.RTCPeerConnection&&Object.defineProperty(re.RTCPeerConnection,"generateCertificate",{get:function(){return K.generateCertificate}})}function fe(re){(re===void 0?"undefined":P(re))==="object"&&re.RTCPeerConnection&&"receiver"in re.RTCTrackEvent.prototype&&!re.RTCTransceiver&&Object.defineProperty(re.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Y(re){var K=re.RTCPeerConnection.prototype.createOffer;re.RTCPeerConnection.prototype.createOffer=function(M){if(M){M.offerToReceiveAudio!==void 0&&(M.offerToReceiveAudio=!!M.offerToReceiveAudio);var F=this.getTransceivers().find(function(_){return _.receiver.track.kind==="audio"});M.offerToReceiveAudio===!1&&F?F.direction==="sendrecv"?F.setDirection?F.setDirection("sendonly"):F.direction="sendonly":F.direction==="recvonly"&&(F.setDirection?F.setDirection("inactive"):F.direction="inactive"):M.offerToReceiveAudio!==!0||F||this.addTransceiver("audio"),M.offerToReceiveVideo!==void 0&&(M.offerToReceiveVideo=!!M.offerToReceiveVideo);var T=this.getTransceivers().find(function(_){return _.receiver.track.kind==="video"});M.offerToReceiveVideo===!1&&T?T.direction==="sendrecv"?T.setDirection?T.setDirection("sendonly"):T.direction="sendonly":T.direction==="recvonly"&&(T.setDirection?T.setDirection("inactive"):T.direction="inactive"):M.offerToReceiveVideo!==!0||T||this.addTransceiver("video")}return K.apply(this,arguments)}}},{"../utils":15}],15:[function(Re,Z,I){Object.defineProperty(I,"__esModule",{value:!0});var P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F};function Pe(F,T,_){return T in F?Object.defineProperty(F,T,{value:_,enumerable:!0,configurable:!0,writable:!0}):F[T]=_,F}I.extractVersion=Ne,I.wrapPeerConnectionEvent=tt,I.disableLog=Qe,I.disableWarnings=ne,I.log=oe,I.deprecated=fe,I.detectBrowser=Y,I.compactObject=re,I.walkStats=K,I.filterStats=M;var ke=!0,ce=!0;function Ne(F,T,_){var E=F.match(T);return E&&E.length>=_&&parseInt(E[_],10)}function tt(F,T,_){if(F.RTCPeerConnection){var E=F.RTCPeerConnection.prototype,w=E.addEventListener;E.addEventListener=function(V,ae){if(V!==T)return w.apply(this,arguments);var q=function(k){var G=_(k);G&&ae(G)};return this._eventMap=this._eventMap||{},this._eventMap[ae]=q,w.apply(this,[V,q])};var R=E.removeEventListener;E.removeEventListener=function(V,ae){if(V!==T||!this._eventMap||!this._eventMap[ae])return R.apply(this,arguments);var q=this._eventMap[ae];return delete this._eventMap[ae],R.apply(this,[V,q])},Object.defineProperty(E,"on"+T,{get:function(){return this["_on"+T]},set:function(V){this["_on"+T]&&(this.removeEventListener(T,this["_on"+T]),delete this["_on"+T]),V&&this.addEventListener(T,this["_on"+T]=V)},enumerable:!0,configurable:!0})}}function Qe(F){return typeof F!="boolean"?new Error("Argument type: "+(F===void 0?"undefined":P(F))+". Please use a boolean."):(ke=F,F?"adapter.js logging disabled":"adapter.js logging enabled")}function ne(F){return typeof F!="boolean"?new Error("Argument type: "+(F===void 0?"undefined":P(F))+". Please use a boolean."):(ce=!F,"adapter.js deprecation warnings "+(F?"disabled":"enabled"))}function oe(){if((typeof window>"u"?"undefined":P(window))==="object"){if(ke)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function fe(F,T){ce&&console.warn(F+" is deprecated, please use "+T+" instead.")}function Y(F){var T=F.navigator,_={browser:null,version:null};if(F===void 0||!F.navigator)return _.browser="Not a browser.",_;if(T.mozGetUserMedia)_.browser="firefox",_.version=Ne(T.userAgent,/Firefox\/(\d+)\./,1);else if(T.webkitGetUserMedia||F.isSecureContext===!1&&F.webkitRTCPeerConnection&&!F.RTCIceGatherer)_.browser="chrome",_.version=Ne(T.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(T.mediaDevices&&T.userAgent.match(/Edge\/(\d+).(\d+)$/))_.browser="edge",_.version=Ne(T.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!F.RTCPeerConnection||!T.userAgent.match(/AppleWebKit\/(\d+)\./))return _.browser="Not a supported browser.",_;_.browser="safari",_.version=Ne(T.userAgent,/AppleWebKit\/(\d+)\./,1)}return _}function re(F){return(F===void 0?"undefined":P(F))!=="object"?F:Object.keys(F).reduce(function(T,_){var E=P(F[_])==="object",w=E?re(F[_]):F[_],R=E&&!Object.keys(w).length;return w===void 0||R?T:Object.assign(T,Pe({},_,w))},{})}function K(F,T,_){T&&!_.has(T.id)&&(_.set(T.id,T),Object.keys(T).forEach(function(E){E.endsWith("Id")?K(F,F.get(T[E]),_):E.endsWith("Ids")&&T[E].forEach(function(w){K(F,F.get(w),_)})}))}function M(F,T,_){var E=_?"outbound-rtp":"inbound-rtp",w=new Map;if(T===null)return w;var R=[];return F.forEach(function(V){V.type==="track"&&V.trackIdentifier===T.id&&R.push(V)}),R.forEach(function(V){F.forEach(function(ae){ae.type===E&&ae.trackId===V.id&&K(F,ae,w)})}),w}},{}],16:[function(Re,Z,I){var P=Re("sdp");function Pe(oe){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[oe.type]||oe.type}function ke(oe,fe,Y,re,K){var M=P.writeRtpDescription(oe.kind,fe);if(M+=P.writeIceParameters(oe.iceGatherer.getLocalParameters()),M+=P.writeDtlsParameters(oe.dtlsTransport.getLocalParameters(),Y==="offer"?"actpass":K||"active"),M+="a=mid:"+oe.mid+`\r
`,M+=oe.rtpSender&&oe.rtpReceiver?`a=sendrecv\r
`:oe.rtpSender?`a=sendonly\r
`:oe.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,oe.rtpSender){var F=oe.rtpSender._initialTrackId||oe.rtpSender.track.id;oe.rtpSender._initialTrackId=F;var T="msid:"+(re?re.id:"-")+" "+F+`\r
`;M+="a="+T,M+="a=ssrc:"+oe.sendEncodingParameters[0].ssrc+" "+T,oe.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+oe.sendEncodingParameters[0].rtx.ssrc+" "+T,M+="a=ssrc-group:FID "+oe.sendEncodingParameters[0].ssrc+" "+oe.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return M+="a=ssrc:"+oe.sendEncodingParameters[0].ssrc+" cname:"+P.localCName+`\r
`,oe.rtpSender&&oe.sendEncodingParameters[0].rtx&&(M+="a=ssrc:"+oe.sendEncodingParameters[0].rtx.ssrc+" cname:"+P.localCName+`\r
`),M}function ce(oe,fe){var Y=!1;return(oe=JSON.parse(JSON.stringify(oe))).filter(function(re){if(re&&(re.urls||re.url)){var K=re.urls||re.url;re.url&&!re.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var M=typeof K=="string";return M&&(K=[K]),K=K.filter(function(F){return F.indexOf("turn:")!==0||F.indexOf("transport=udp")===-1||F.indexOf("turn:[")!==-1||Y?F.indexOf("stun:")===0&&fe>=14393&&F.indexOf("?transport=udp")===-1:(Y=!0,!0)}),delete re.url,re.urls=M?K[0]:K,!!K.length}})}function Ne(oe,fe){var Y={codecs:[],headerExtensions:[],fecMechanisms:[]},re=function(M,F){M=parseInt(M,10);for(var T=0;T<F.length;T++)if(F[T].payloadType===M||F[T].preferredPayloadType===M)return F[T]},K=function(M,F,T,_){var E=re(M.parameters.apt,T),w=re(F.parameters.apt,_);return E&&w&&E.name.toLowerCase()===w.name.toLowerCase()};return oe.codecs.forEach(function(M){for(var F=0;F<fe.codecs.length;F++){var T=fe.codecs[F];if(M.name.toLowerCase()===T.name.toLowerCase()&&M.clockRate===T.clockRate){if(M.name.toLowerCase()==="rtx"&&M.parameters&&T.parameters.apt&&!K(M,T,oe.codecs,fe.codecs))continue;(T=JSON.parse(JSON.stringify(T))).numChannels=Math.min(M.numChannels,T.numChannels),Y.codecs.push(T),T.rtcpFeedback=T.rtcpFeedback.filter(function(_){for(var E=0;E<M.rtcpFeedback.length;E++)if(M.rtcpFeedback[E].type===_.type&&M.rtcpFeedback[E].parameter===_.parameter)return!0;return!1});break}}}),oe.headerExtensions.forEach(function(M){for(var F=0;F<fe.headerExtensions.length;F++){var T=fe.headerExtensions[F];if(M.uri===T.uri){Y.headerExtensions.push(T);break}}}),Y}function tt(oe,fe,Y){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[fe][oe].indexOf(Y)!==-1}function Qe(oe,fe){var Y=oe.getRemoteCandidates().find(function(re){return fe.foundation===re.foundation&&fe.ip===re.ip&&fe.port===re.port&&fe.priority===re.priority&&fe.protocol===re.protocol&&fe.type===re.type});return Y||oe.addRemoteCandidate(fe),!Y}function ne(oe,fe){var Y=new Error(fe);return Y.name=oe,Y.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[oe],Y}Z.exports=function(oe,fe){function Y(T,_){_.addTrack(T),_.dispatchEvent(new oe.MediaStreamTrackEvent("addtrack",{track:T}))}function re(T,_){_.removeTrack(T),_.dispatchEvent(new oe.MediaStreamTrackEvent("removetrack",{track:T}))}function K(T,_,E,w){var R=new Event("track");R.track=_,R.receiver=E,R.transceiver={receiver:E},R.streams=w,oe.setTimeout(function(){T._dispatchEvent("track",R)})}var M=function(T){var _=this,E=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(R){_[R]=E[R].bind(E)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",T=JSON.parse(JSON.stringify(T||{})),this.usingBundle=T.bundlePolicy==="max-bundle",T.rtcpMuxPolicy==="negotiate")throw ne("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(T.rtcpMuxPolicy||(T.rtcpMuxPolicy="require"),T.iceTransportPolicy){case"all":case"relay":break;default:T.iceTransportPolicy="all"}switch(T.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:T.bundlePolicy="balanced"}if(T.iceServers=ce(T.iceServers||[],fe),this._iceGatherers=[],T.iceCandidatePoolSize)for(var w=T.iceCandidatePoolSize;w>0;w--)this._iceGatherers.push(new oe.RTCIceGatherer({iceServers:T.iceServers,gatherPolicy:T.iceTransportPolicy}));else T.iceCandidatePoolSize=0;this._config=T,this.transceivers=[],this._sdpSessionId=P.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(M.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(M.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),M.prototype.onicecandidate=null,M.prototype.onaddstream=null,M.prototype.ontrack=null,M.prototype.onremovestream=null,M.prototype.onsignalingstatechange=null,M.prototype.oniceconnectionstatechange=null,M.prototype.onconnectionstatechange=null,M.prototype.onicegatheringstatechange=null,M.prototype.onnegotiationneeded=null,M.prototype.ondatachannel=null,M.prototype._dispatchEvent=function(T,_){this._isClosed||(this.dispatchEvent(_),typeof this["on"+T]=="function"&&this["on"+T](_))},M.prototype._emitGatheringStateChange=function(){var T=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",T)},M.prototype.getConfiguration=function(){return this._config},M.prototype.getLocalStreams=function(){return this.localStreams},M.prototype.getRemoteStreams=function(){return this.remoteStreams},M.prototype._createTransceiver=function(T,_){var E={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:T,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&this.transceivers.length>0)E.iceTransport=this.transceivers[0].iceTransport,E.dtlsTransport=this.transceivers[0].dtlsTransport;else{var w=this._createIceAndDtlsTransports();E.iceTransport=w.iceTransport,E.dtlsTransport=w.dtlsTransport}return _||this.transceivers.push(E),E},M.prototype.addTrack=function(T,_){if(this._isClosed)throw ne("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var E;if(this.transceivers.find(function(R){return R.track===T}))throw ne("InvalidAccessError","Track already exists.");for(var w=0;w<this.transceivers.length;w++)this.transceivers[w].track||this.transceivers[w].kind!==T.kind||(E=this.transceivers[w]);return E||(E=this._createTransceiver(T.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(_)===-1&&this.localStreams.push(_),E.track=T,E.stream=_,E.rtpSender=new oe.RTCRtpSender(T,E.dtlsTransport),E.rtpSender},M.prototype.addStream=function(T){var _=this;if(fe>=15025)T.getTracks().forEach(function(w){_.addTrack(w,T)});else{var E=T.clone();T.getTracks().forEach(function(w,R){var V=E.getTracks()[R];w.addEventListener("enabled",function(ae){V.enabled=ae.enabled})}),E.getTracks().forEach(function(w){_.addTrack(w,E)})}},M.prototype.removeTrack=function(T){if(this._isClosed)throw ne("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(T instanceof oe.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var _=this.transceivers.find(function(w){return w.rtpSender===T});if(!_)throw ne("InvalidAccessError","Sender was not created by this connection.");var E=_.stream;_.rtpSender.stop(),_.rtpSender=null,_.track=null,_.stream=null,this.transceivers.map(function(w){return w.stream}).indexOf(E)===-1&&this.localStreams.indexOf(E)>-1&&this.localStreams.splice(this.localStreams.indexOf(E),1),this._maybeFireNegotiationNeeded()},M.prototype.removeStream=function(T){var _=this;T.getTracks().forEach(function(E){var w=_.getSenders().find(function(R){return R.track===E});w&&_.removeTrack(w)})},M.prototype.getSenders=function(){return this.transceivers.filter(function(T){return!!T.rtpSender}).map(function(T){return T.rtpSender})},M.prototype.getReceivers=function(){return this.transceivers.filter(function(T){return!!T.rtpReceiver}).map(function(T){return T.rtpReceiver})},M.prototype._createIceGatherer=function(T,_){var E=this;if(_&&T>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var w=new oe.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(w,"state",{value:"new",writable:!0}),this.transceivers[T].bufferedCandidateEvents=[],this.transceivers[T].bufferCandidates=function(R){var V=!R.candidate||Object.keys(R.candidate).length===0;w.state=V?"completed":"gathering",E.transceivers[T].bufferedCandidateEvents!==null&&E.transceivers[T].bufferedCandidateEvents.push(R)},w.addEventListener("localcandidate",this.transceivers[T].bufferCandidates),w},M.prototype._gather=function(T,_){var E=this,w=this.transceivers[_].iceGatherer;if(!w.onlocalcandidate){var R=this.transceivers[_].bufferedCandidateEvents;this.transceivers[_].bufferedCandidateEvents=null,w.removeEventListener("localcandidate",this.transceivers[_].bufferCandidates),w.onlocalcandidate=function(V){if(!(E.usingBundle&&_>0)){var ae=new Event("icecandidate");ae.candidate={sdpMid:T,sdpMLineIndex:_};var q=V.candidate,k=!q||Object.keys(q).length===0;if(k)w.state!=="new"&&w.state!=="gathering"||(w.state="completed");else{w.state==="new"&&(w.state="gathering"),q.component=1,q.ufrag=w.getLocalParameters().usernameFragment;var G=P.writeCandidate(q);ae.candidate=Object.assign(ae.candidate,P.parseCandidate(G)),ae.candidate.candidate=G,ae.candidate.toJSON=function(){return{candidate:ae.candidate.candidate,sdpMid:ae.candidate.sdpMid,sdpMLineIndex:ae.candidate.sdpMLineIndex,usernameFragment:ae.candidate.usernameFragment}}}var xe=P.getMediaSections(E._localDescription.sdp);xe[ae.candidate.sdpMLineIndex]+=k?`a=end-of-candidates\r
`:"a="+ae.candidate.candidate+`\r
`,E._localDescription.sdp=P.getDescription(E._localDescription.sdp)+xe.join("");var Ae=E.transceivers.every(function(De){return De.iceGatherer&&De.iceGatherer.state==="completed"});E.iceGatheringState!=="gathering"&&(E.iceGatheringState="gathering",E._emitGatheringStateChange()),k||E._dispatchEvent("icecandidate",ae),Ae&&(E._dispatchEvent("icecandidate",new Event("icecandidate")),E.iceGatheringState="complete",E._emitGatheringStateChange())}},oe.setTimeout(function(){R.forEach(function(V){w.onlocalcandidate(V)})},0)}},M.prototype._createIceAndDtlsTransports=function(){var T=this,_=new oe.RTCIceTransport(null);_.onicestatechange=function(){T._updateIceConnectionState(),T._updateConnectionState()};var E=new oe.RTCDtlsTransport(_);return E.ondtlsstatechange=function(){T._updateConnectionState()},E.onerror=function(){Object.defineProperty(E,"state",{value:"failed",writable:!0}),T._updateConnectionState()},{iceTransport:_,dtlsTransport:E}},M.prototype._disposeIceAndDtlsTransports=function(T){var _=this.transceivers[T].iceGatherer;_&&(delete _.onlocalcandidate,delete this.transceivers[T].iceGatherer);var E=this.transceivers[T].iceTransport;E&&(delete E.onicestatechange,delete this.transceivers[T].iceTransport);var w=this.transceivers[T].dtlsTransport;w&&(delete w.ondtlsstatechange,delete w.onerror,delete this.transceivers[T].dtlsTransport)},M.prototype._transceive=function(T,_,E){var w=Ne(T.localCapabilities,T.remoteCapabilities);_&&T.rtpSender&&(w.encodings=T.sendEncodingParameters,w.rtcp={cname:P.localCName,compound:T.rtcpParameters.compound},T.recvEncodingParameters.length&&(w.rtcp.ssrc=T.recvEncodingParameters[0].ssrc),T.rtpSender.send(w)),E&&T.rtpReceiver&&w.codecs.length>0&&(T.kind==="video"&&T.recvEncodingParameters&&fe<15019&&T.recvEncodingParameters.forEach(function(R){delete R.rtx}),w.encodings=T.recvEncodingParameters.length?T.recvEncodingParameters:[{}],w.rtcp={compound:T.rtcpParameters.compound},T.rtcpParameters.cname&&(w.rtcp.cname=T.rtcpParameters.cname),T.sendEncodingParameters.length&&(w.rtcp.ssrc=T.sendEncodingParameters[0].ssrc),T.rtpReceiver.receive(w))},M.prototype.setLocalDescription=function(T){var _,E,w=this;if(["offer","answer"].indexOf(T.type)===-1)return Promise.reject(ne("TypeError",'Unsupported type "'+T.type+'"'));if(!tt("setLocalDescription",T.type,w.signalingState)||w._isClosed)return Promise.reject(ne("InvalidStateError","Can not set local "+T.type+" in state "+w.signalingState));if(T.type==="offer")_=P.splitSections(T.sdp),E=_.shift(),_.forEach(function(V,ae){var q=P.parseRtpParameters(V);w.transceivers[ae].localCapabilities=q}),w.transceivers.forEach(function(V,ae){w._gather(V.mid,ae)});else if(T.type==="answer"){_=P.splitSections(w._remoteDescription.sdp),E=_.shift();var R=P.matchPrefix(E,"a=ice-lite").length>0;_.forEach(function(V,ae){var q=w.transceivers[ae],k=q.iceGatherer,G=q.iceTransport,xe=q.dtlsTransport,Ae=q.localCapabilities,De=q.remoteCapabilities;if(!(P.isRejected(V)&&P.matchPrefix(V,"a=bundle-only").length===0||q.rejected)){var Ie=P.getIceParameters(V,E),be=P.getDtlsParameters(V,E);R&&(be.role="server"),w.usingBundle&&ae!==0||(w._gather(q.mid,ae),G.state==="new"&&G.start(k,Ie,R?"controlling":"controlled"),xe.state==="new"&&xe.start(be));var qe=Ne(Ae,De);w._transceive(q,qe.codecs.length>0,!1)}})}return w._localDescription={type:T.type,sdp:T.sdp},w._updateSignalingState(T.type==="offer"?"have-local-offer":"stable"),Promise.resolve()},M.prototype.setRemoteDescription=function(T){var _=this;if(["offer","answer"].indexOf(T.type)===-1)return Promise.reject(ne("TypeError",'Unsupported type "'+T.type+'"'));if(!tt("setRemoteDescription",T.type,_.signalingState)||_._isClosed)return Promise.reject(ne("InvalidStateError","Can not set remote "+T.type+" in state "+_.signalingState));var E={};_.remoteStreams.forEach(function(G){E[G.id]=G});var w=[],R=P.splitSections(T.sdp),V=R.shift(),ae=P.matchPrefix(V,"a=ice-lite").length>0,q=P.matchPrefix(V,"a=group:BUNDLE ").length>0;_.usingBundle=q;var k=P.matchPrefix(V,"a=ice-options:")[0];return _.canTrickleIceCandidates=!!k&&k.substr(14).split(" ").indexOf("trickle")>=0,R.forEach(function(G,xe){var Ae=P.splitLines(G),De=P.getKind(G),Ie=P.isRejected(G)&&P.matchPrefix(G,"a=bundle-only").length===0,be=Ae[0].substr(2).split(" ")[2],qe=P.getDirection(G,V),Ve=P.parseMsid(G),pe=P.getMid(G)||P.generateIdentifier();if(Ie||De==="application"&&(be==="DTLS/SCTP"||be==="UDP/DTLS/SCTP"))_.transceivers[xe]={mid:pe,kind:De,protocol:be,rejected:!0};else{var j,B,nt,he,it,wt,Ee,Oe,rt;!Ie&&_.transceivers[xe]&&_.transceivers[xe].rejected&&(_.transceivers[xe]=_._createTransceiver(De,!0));var me,Se,ge=P.parseRtpParameters(G);Ie||(me=P.getIceParameters(G,V),(Se=P.getDtlsParameters(G,V)).role="client"),Ee=P.parseRtpEncodingParameters(G);var ve=P.parseRtcpParameters(G),ee=P.matchPrefix(G,"a=end-of-candidates",V).length>0,ze=P.matchPrefix(G,"a=candidate:").map(function(xt){return P.parseCandidate(xt)}).filter(function(xt){return xt.component===1});if((T.type==="offer"||T.type==="answer")&&!Ie&&q&&xe>0&&_.transceivers[xe]&&(_._disposeIceAndDtlsTransports(xe),_.transceivers[xe].iceGatherer=_.transceivers[0].iceGatherer,_.transceivers[xe].iceTransport=_.transceivers[0].iceTransport,_.transceivers[xe].dtlsTransport=_.transceivers[0].dtlsTransport,_.transceivers[xe].rtpSender&&_.transceivers[xe].rtpSender.setTransport(_.transceivers[0].dtlsTransport),_.transceivers[xe].rtpReceiver&&_.transceivers[xe].rtpReceiver.setTransport(_.transceivers[0].dtlsTransport)),T.type!=="offer"||Ie)T.type!=="answer"||Ie||(B=(j=_.transceivers[xe]).iceGatherer,nt=j.iceTransport,he=j.dtlsTransport,it=j.rtpReceiver,wt=j.sendEncodingParameters,Oe=j.localCapabilities,_.transceivers[xe].recvEncodingParameters=Ee,_.transceivers[xe].remoteCapabilities=ge,_.transceivers[xe].rtcpParameters=ve,ze.length&&nt.state==="new"&&(!ae&&!ee||q&&xe!==0?ze.forEach(function(xt){Qe(j.iceTransport,xt)}):nt.setRemoteCandidates(ze)),q&&xe!==0||(nt.state==="new"&&nt.start(B,me,"controlling"),he.state==="new"&&he.start(Se)),!Ne(j.localCapabilities,j.remoteCapabilities).codecs.filter(function(xt){return xt.name.toLowerCase()==="rtx"}).length&&j.sendEncodingParameters[0].rtx&&delete j.sendEncodingParameters[0].rtx,_._transceive(j,qe==="sendrecv"||qe==="recvonly",qe==="sendrecv"||qe==="sendonly"),!it||qe!=="sendrecv"&&qe!=="sendonly"?delete j.rtpReceiver:(rt=it.track,Ve?(E[Ve.stream]||(E[Ve.stream]=new oe.MediaStream),Y(rt,E[Ve.stream]),w.push([rt,it,E[Ve.stream]])):(E.default||(E.default=new oe.MediaStream),Y(rt,E.default),w.push([rt,it,E.default]))));else{(j=_.transceivers[xe]||_._createTransceiver(De)).mid=pe,j.iceGatherer||(j.iceGatherer=_._createIceGatherer(xe,q)),ze.length&&j.iceTransport.state==="new"&&(!ee||q&&xe!==0?ze.forEach(function(xt){Qe(j.iceTransport,xt)}):j.iceTransport.setRemoteCandidates(ze)),Oe=oe.RTCRtpReceiver.getCapabilities(De),fe<15019&&(Oe.codecs=Oe.codecs.filter(function(xt){return xt.name!=="rtx"})),wt=j.sendEncodingParameters||[{ssrc:1001*(2*xe+2)}];var Je,yt=!1;qe==="sendrecv"||qe==="sendonly"?(yt=!j.rtpReceiver,it=j.rtpReceiver||new oe.RTCRtpReceiver(j.dtlsTransport,De),yt&&(rt=it.track,Ve&&Ve.stream==="-"||(Ve?(E[Ve.stream]||(E[Ve.stream]=new oe.MediaStream,Object.defineProperty(E[Ve.stream],"id",{get:function(){return Ve.stream}})),Object.defineProperty(rt,"id",{get:function(){return Ve.track}}),Je=E[Ve.stream]):(E.default||(E.default=new oe.MediaStream),Je=E.default)),Je&&(Y(rt,Je),j.associatedRemoteMediaStreams.push(Je)),w.push([rt,it,Je]))):j.rtpReceiver&&j.rtpReceiver.track&&(j.associatedRemoteMediaStreams.forEach(function(xt){var Ye=xt.getTracks().find(function(J){return J.id===j.rtpReceiver.track.id});Ye&&re(Ye,xt)}),j.associatedRemoteMediaStreams=[]),j.localCapabilities=Oe,j.remoteCapabilities=ge,j.rtpReceiver=it,j.rtcpParameters=ve,j.sendEncodingParameters=wt,j.recvEncodingParameters=Ee,_._transceive(_.transceivers[xe],!1,yt)}}}),_._dtlsRole===void 0&&(_._dtlsRole=T.type==="offer"?"active":"passive"),_._remoteDescription={type:T.type,sdp:T.sdp},_._updateSignalingState(T.type==="offer"?"have-remote-offer":"stable"),Object.keys(E).forEach(function(G){var xe=E[G];if(xe.getTracks().length){if(_.remoteStreams.indexOf(xe)===-1){_.remoteStreams.push(xe);var Ae=new Event("addstream");Ae.stream=xe,oe.setTimeout(function(){_._dispatchEvent("addstream",Ae)})}w.forEach(function(De){xe.id===De[2].id&&K(_,De[0],De[1],[xe])})}}),w.forEach(function(G){G[2]||K(_,G[0],G[1],[])}),oe.setTimeout(function(){_&&_.transceivers&&_.transceivers.forEach(function(G){G.iceTransport&&G.iceTransport.state==="new"&&G.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),G.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},M.prototype.close=function(){this.transceivers.forEach(function(T){T.iceTransport&&T.iceTransport.stop(),T.dtlsTransport&&T.dtlsTransport.stop(),T.rtpSender&&T.rtpSender.stop(),T.rtpReceiver&&T.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},M.prototype._updateSignalingState=function(T){this.signalingState=T;var _=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",_)},M.prototype._maybeFireNegotiationNeeded=function(){var T=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,oe.setTimeout(function(){if(T.needNegotiation){T.needNegotiation=!1;var _=new Event("negotiationneeded");T._dispatchEvent("negotiationneeded",_)}},0))},M.prototype._updateIceConnectionState=function(){var T,_={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(w){w.iceTransport&&!w.rejected&&_[w.iceTransport.state]++}),T="new",_.failed>0?T="failed":_.checking>0?T="checking":_.disconnected>0?T="disconnected":_.new>0?T="new":_.connected>0?T="connected":_.completed>0&&(T="completed"),T!==this.iceConnectionState){this.iceConnectionState=T;var E=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",E)}},M.prototype._updateConnectionState=function(){var T,_={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(w){w.iceTransport&&w.dtlsTransport&&!w.rejected&&(_[w.iceTransport.state]++,_[w.dtlsTransport.state]++)}),_.connected+=_.completed,T="new",_.failed>0?T="failed":_.connecting>0?T="connecting":_.disconnected>0?T="disconnected":_.new>0?T="new":_.connected>0&&(T="connected"),T!==this.connectionState){this.connectionState=T;var E=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",E)}},M.prototype.createOffer=function(){var T=this;if(T._isClosed)return Promise.reject(ne("InvalidStateError","Can not call createOffer after close"));var _=T.transceivers.filter(function(ae){return ae.kind==="audio"}).length,E=T.transceivers.filter(function(ae){return ae.kind==="video"}).length,w=arguments[0];if(w){if(w.mandatory||w.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");w.offerToReceiveAudio!==void 0&&(_=w.offerToReceiveAudio===!0?1:w.offerToReceiveAudio===!1?0:w.offerToReceiveAudio),w.offerToReceiveVideo!==void 0&&(E=w.offerToReceiveVideo===!0?1:w.offerToReceiveVideo===!1?0:w.offerToReceiveVideo)}for(T.transceivers.forEach(function(ae){ae.kind==="audio"?--_<0&&(ae.wantReceive=!1):ae.kind==="video"&&--E<0&&(ae.wantReceive=!1)});_>0||E>0;)_>0&&(T._createTransceiver("audio"),_--),E>0&&(T._createTransceiver("video"),E--);var R=P.writeSessionBoilerplate(T._sdpSessionId,T._sdpSessionVersion++);T.transceivers.forEach(function(ae,q){var k=ae.track,G=ae.kind,xe=ae.mid||P.generateIdentifier();ae.mid=xe,ae.iceGatherer||(ae.iceGatherer=T._createIceGatherer(q,T.usingBundle));var Ae=oe.RTCRtpSender.getCapabilities(G);fe<15019&&(Ae.codecs=Ae.codecs.filter(function(Ie){return Ie.name!=="rtx"})),Ae.codecs.forEach(function(Ie){Ie.name==="H264"&&Ie.parameters["level-asymmetry-allowed"]===void 0&&(Ie.parameters["level-asymmetry-allowed"]="1"),ae.remoteCapabilities&&ae.remoteCapabilities.codecs&&ae.remoteCapabilities.codecs.forEach(function(be){Ie.name.toLowerCase()===be.name.toLowerCase()&&Ie.clockRate===be.clockRate&&(Ie.preferredPayloadType=be.payloadType)})}),Ae.headerExtensions.forEach(function(Ie){(ae.remoteCapabilities&&ae.remoteCapabilities.headerExtensions||[]).forEach(function(be){Ie.uri===be.uri&&(Ie.id=be.id)})});var De=ae.sendEncodingParameters||[{ssrc:1001*(2*q+1)}];k&&fe>=15019&&G==="video"&&!De[0].rtx&&(De[0].rtx={ssrc:De[0].ssrc+1}),ae.wantReceive&&(ae.rtpReceiver=new oe.RTCRtpReceiver(ae.dtlsTransport,G)),ae.localCapabilities=Ae,ae.sendEncodingParameters=De}),T._config.bundlePolicy!=="max-compat"&&(R+="a=group:BUNDLE "+T.transceivers.map(function(ae){return ae.mid}).join(" ")+`\r
`),R+=`a=ice-options:trickle\r
`,T.transceivers.forEach(function(ae,q){R+=ke(ae,ae.localCapabilities,"offer",ae.stream,T._dtlsRole),R+=`a=rtcp-rsize\r
`,!ae.iceGatherer||T.iceGatheringState==="new"||q!==0&&T.usingBundle||(ae.iceGatherer.getLocalCandidates().forEach(function(k){k.component=1,R+="a="+P.writeCandidate(k)+`\r
`}),ae.iceGatherer.state==="completed"&&(R+=`a=end-of-candidates\r
`))});var V=new oe.RTCSessionDescription({type:"offer",sdp:R});return Promise.resolve(V)},M.prototype.createAnswer=function(){var T=this;if(T._isClosed)return Promise.reject(ne("InvalidStateError","Can not call createAnswer after close"));if(T.signalingState!=="have-remote-offer"&&T.signalingState!=="have-local-pranswer")return Promise.reject(ne("InvalidStateError","Can not call createAnswer in signalingState "+T.signalingState));var _=P.writeSessionBoilerplate(T._sdpSessionId,T._sdpSessionVersion++);T.usingBundle&&(_+="a=group:BUNDLE "+T.transceivers.map(function(R){return R.mid}).join(" ")+`\r
`),_+=`a=ice-options:trickle\r
`;var E=P.getMediaSections(T._remoteDescription.sdp).length;T.transceivers.forEach(function(R,V){if(!(V+1>E)){if(R.rejected)return R.kind==="application"?_+=R.protocol==="DTLS/SCTP"?`m=application 0 DTLS/SCTP 5000\r
`:"m=application 0 "+R.protocol+` webrtc-datachannel\r
`:R.kind==="audio"?_+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:R.kind==="video"&&(_+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),void(_+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+R.mid+`\r
`);var ae;R.stream&&(R.kind==="audio"?ae=R.stream.getAudioTracks()[0]:R.kind==="video"&&(ae=R.stream.getVideoTracks()[0]),ae&&fe>=15019&&R.kind==="video"&&!R.sendEncodingParameters[0].rtx&&(R.sendEncodingParameters[0].rtx={ssrc:R.sendEncodingParameters[0].ssrc+1}));var q=Ne(R.localCapabilities,R.remoteCapabilities);!q.codecs.filter(function(k){return k.name.toLowerCase()==="rtx"}).length&&R.sendEncodingParameters[0].rtx&&delete R.sendEncodingParameters[0].rtx,_+=ke(R,q,"answer",R.stream,T._dtlsRole),R.rtcpParameters&&R.rtcpParameters.reducedSize&&(_+=`a=rtcp-rsize\r
`)}});var w=new oe.RTCSessionDescription({type:"answer",sdp:_});return Promise.resolve(w)},M.prototype.addIceCandidate=function(T){var _,E=this;return T&&T.sdpMLineIndex===void 0&&!T.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(w,R){if(!E._remoteDescription)return R(ne("InvalidStateError","Can not add ICE candidate without a remote description"));if(T&&T.candidate!==""){var V=T.sdpMLineIndex;if(T.sdpMid){for(var ae=0;ae<E.transceivers.length;ae++)if(E.transceivers[ae].mid===T.sdpMid){V=ae;break}}var q=E.transceivers[V];if(!q)return R(ne("OperationError","Can not add ICE candidate"));if(q.rejected)return w();var k=Object.keys(T.candidate).length>0?P.parseCandidate(T.candidate):{};if(k.protocol==="tcp"&&(k.port===0||k.port===9)||k.component&&k.component!==1)return w();if((V===0||V>0&&q.iceTransport!==E.transceivers[0].iceTransport)&&!Qe(q.iceTransport,k))return R(ne("OperationError","Can not add ICE candidate"));var G=T.candidate.trim();G.indexOf("a=")===0&&(G=G.substr(2)),(_=P.getMediaSections(E._remoteDescription.sdp))[V]+="a="+(k.type?G:"end-of-candidates")+`\r
`,E._remoteDescription.sdp=P.getDescription(E._remoteDescription.sdp)+_.join("")}else for(var xe=0;xe<E.transceivers.length&&(E.transceivers[xe].rejected||(E.transceivers[xe].iceTransport.addRemoteCandidate({}),(_=P.getMediaSections(E._remoteDescription.sdp))[xe]+=`a=end-of-candidates\r
`,E._remoteDescription.sdp=P.getDescription(E._remoteDescription.sdp)+_.join(""),!E.usingBundle));xe++);w()})},M.prototype.getStats=function(T){if(T&&T instanceof oe.MediaStreamTrack){var _=null;if(this.transceivers.forEach(function(w){w.rtpSender&&w.rtpSender.track===T?_=w.rtpSender:w.rtpReceiver&&w.rtpReceiver.track===T&&(_=w.rtpReceiver)}),!_)throw ne("InvalidAccessError","Invalid selector.");return _.getStats()}var E=[];return this.transceivers.forEach(function(w){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(R){w[R]&&E.push(w[R].getStats())})}),Promise.all(E).then(function(w){var R=new Map;return w.forEach(function(V){V.forEach(function(ae){R.set(ae.id,ae)})}),R})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(T){var _=oe[T];if(_&&_.prototype&&_.prototype.getStats){var E=_.prototype.getStats;_.prototype.getStats=function(){return E.apply(this).then(function(w){var R=new Map;return Object.keys(w).forEach(function(V){w[V].type=Pe(w[V]),R.set(V,w[V])}),R})}}});var F=["createOffer","createAnswer"];return F.forEach(function(T){var _=M.prototype[T];M.prototype[T]=function(){var E=arguments;return typeof E[0]=="function"||typeof E[1]=="function"?_.apply(this,[arguments[2]]).then(function(w){typeof E[0]=="function"&&E[0].apply(null,[w])},function(w){typeof E[1]=="function"&&E[1].apply(null,[w])}):_.apply(this,arguments)}}),(F=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(T){var _=M.prototype[T];M.prototype[T]=function(){var E=arguments;return typeof E[1]=="function"||typeof E[2]=="function"?_.apply(this,arguments).then(function(){typeof E[1]=="function"&&E[1].apply(null)},function(w){typeof E[2]=="function"&&E[2].apply(null,[w])}):_.apply(this,arguments)}}),["getStats"].forEach(function(T){var _=M.prototype[T];M.prototype[T]=function(){var E=arguments;return typeof E[1]=="function"?_.apply(this,arguments).then(function(){typeof E[1]=="function"&&E[1].apply(null)}):_.apply(this,arguments)}}),M}},{sdp:17}],17:[function(Re,Z,I){var P={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};P.localCName=P.generateIdentifier(),P.splitLines=function(Pe){return Pe.trim().split(`
`).map(function(ke){return ke.trim()})},P.splitSections=function(Pe){return Pe.split(`
m=`).map(function(ke,ce){return(ce>0?"m="+ke:ke).trim()+`\r
`})},P.getDescription=function(Pe){var ke=P.splitSections(Pe);return ke&&ke[0]},P.getMediaSections=function(Pe){var ke=P.splitSections(Pe);return ke.shift(),ke},P.matchPrefix=function(Pe,ke){return P.splitLines(Pe).filter(function(ce){return ce.indexOf(ke)===0})},P.parseCandidate=function(Pe){for(var ke,ce={foundation:(ke=Pe.indexOf("a=candidate:")===0?Pe.substring(12).split(" "):Pe.substring(10).split(" "))[0],component:parseInt(ke[1],10),protocol:ke[2].toLowerCase(),priority:parseInt(ke[3],10),ip:ke[4],address:ke[4],port:parseInt(ke[5],10),type:ke[7]},Ne=8;Ne<ke.length;Ne+=2)switch(ke[Ne]){case"raddr":ce.relatedAddress=ke[Ne+1];break;case"rport":ce.relatedPort=parseInt(ke[Ne+1],10);break;case"tcptype":ce.tcpType=ke[Ne+1];break;case"ufrag":ce.ufrag=ke[Ne+1],ce.usernameFragment=ke[Ne+1];break;default:ce[ke[Ne]]=ke[Ne+1]}return ce},P.writeCandidate=function(Pe){var ke=[];ke.push(Pe.foundation),ke.push(Pe.component),ke.push(Pe.protocol.toUpperCase()),ke.push(Pe.priority),ke.push(Pe.address||Pe.ip),ke.push(Pe.port);var ce=Pe.type;return ke.push("typ"),ke.push(ce),ce!=="host"&&Pe.relatedAddress&&Pe.relatedPort&&(ke.push("raddr"),ke.push(Pe.relatedAddress),ke.push("rport"),ke.push(Pe.relatedPort)),Pe.tcpType&&Pe.protocol.toLowerCase()==="tcp"&&(ke.push("tcptype"),ke.push(Pe.tcpType)),(Pe.usernameFragment||Pe.ufrag)&&(ke.push("ufrag"),ke.push(Pe.usernameFragment||Pe.ufrag)),"candidate:"+ke.join(" ")},P.parseIceOptions=function(Pe){return Pe.substr(14).split(" ")},P.parseRtpMap=function(Pe){var ke=Pe.substr(9).split(" "),ce={payloadType:parseInt(ke.shift(),10)};return ke=ke[0].split("/"),ce.name=ke[0],ce.clockRate=parseInt(ke[1],10),ce.channels=ke.length===3?parseInt(ke[2],10):1,ce.numChannels=ce.channels,ce},P.writeRtpMap=function(Pe){var ke=Pe.payloadType;Pe.preferredPayloadType!==void 0&&(ke=Pe.preferredPayloadType);var ce=Pe.channels||Pe.numChannels||1;return"a=rtpmap:"+ke+" "+Pe.name+"/"+Pe.clockRate+(ce!==1?"/"+ce:"")+`\r
`},P.parseExtmap=function(Pe){var ke=Pe.substr(9).split(" ");return{id:parseInt(ke[0],10),direction:ke[0].indexOf("/")>0?ke[0].split("/")[1]:"sendrecv",uri:ke[1]}},P.writeExtmap=function(Pe){return"a=extmap:"+(Pe.id||Pe.preferredId)+(Pe.direction&&Pe.direction!=="sendrecv"?"/"+Pe.direction:"")+" "+Pe.uri+`\r
`},P.parseFmtp=function(Pe){for(var ke,ce={},Ne=Pe.substr(Pe.indexOf(" ")+1).split(";"),tt=0;tt<Ne.length;tt++)ce[(ke=Ne[tt].trim().split("="))[0].trim()]=ke[1];return ce},P.writeFmtp=function(Pe){var ke="",ce=Pe.payloadType;if(Pe.preferredPayloadType!==void 0&&(ce=Pe.preferredPayloadType),Pe.parameters&&Object.keys(Pe.parameters).length){var Ne=[];Object.keys(Pe.parameters).forEach(function(tt){Ne.push(Pe.parameters[tt]?tt+"="+Pe.parameters[tt]:tt)}),ke+="a=fmtp:"+ce+" "+Ne.join(";")+`\r
`}return ke},P.parseRtcpFb=function(Pe){var ke=Pe.substr(Pe.indexOf(" ")+1).split(" ");return{type:ke.shift(),parameter:ke.join(" ")}},P.writeRtcpFb=function(Pe){var ke="",ce=Pe.payloadType;return Pe.preferredPayloadType!==void 0&&(ce=Pe.preferredPayloadType),Pe.rtcpFeedback&&Pe.rtcpFeedback.length&&Pe.rtcpFeedback.forEach(function(Ne){ke+="a=rtcp-fb:"+ce+" "+Ne.type+(Ne.parameter&&Ne.parameter.length?" "+Ne.parameter:"")+`\r
`}),ke},P.parseSsrcMedia=function(Pe){var ke=Pe.indexOf(" "),ce={ssrc:parseInt(Pe.substr(7,ke-7),10)},Ne=Pe.indexOf(":",ke);return Ne>-1?(ce.attribute=Pe.substr(ke+1,Ne-ke-1),ce.value=Pe.substr(Ne+1)):ce.attribute=Pe.substr(ke+1),ce},P.parseSsrcGroup=function(Pe){var ke=Pe.substr(13).split(" ");return{semantics:ke.shift(),ssrcs:ke.map(function(ce){return parseInt(ce,10)})}},P.getMid=function(Pe){var ke=P.matchPrefix(Pe,"a=mid:")[0];if(ke)return ke.substr(6)},P.parseFingerprint=function(Pe){var ke=Pe.substr(14).split(" ");return{algorithm:ke[0].toLowerCase(),value:ke[1]}},P.getDtlsParameters=function(Pe,ke){return{role:"auto",fingerprints:P.matchPrefix(Pe+ke,"a=fingerprint:").map(P.parseFingerprint)}},P.writeDtlsParameters=function(Pe,ke){var ce="a=setup:"+ke+`\r
`;return Pe.fingerprints.forEach(function(Ne){ce+="a=fingerprint:"+Ne.algorithm+" "+Ne.value+`\r
`}),ce},P.getIceParameters=function(Pe,ke){var ce=P.splitLines(Pe);return{usernameFragment:(ce=ce.concat(P.splitLines(ke))).filter(function(Ne){return Ne.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:ce.filter(function(Ne){return Ne.indexOf("a=ice-pwd:")===0})[0].substr(10)}},P.writeIceParameters=function(Pe){return"a=ice-ufrag:"+Pe.usernameFragment+`\r
a=ice-pwd:`+Pe.password+`\r
`},P.parseRtpParameters=function(Pe){for(var ke={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},ce=P.splitLines(Pe)[0].split(" "),Ne=3;Ne<ce.length;Ne++){var tt=ce[Ne],Qe=P.matchPrefix(Pe,"a=rtpmap:"+tt+" ")[0];if(Qe){var ne=P.parseRtpMap(Qe),oe=P.matchPrefix(Pe,"a=fmtp:"+tt+" ");switch(ne.parameters=oe.length?P.parseFmtp(oe[0]):{},ne.rtcpFeedback=P.matchPrefix(Pe,"a=rtcp-fb:"+tt+" ").map(P.parseRtcpFb),ke.codecs.push(ne),ne.name.toUpperCase()){case"RED":case"ULPFEC":ke.fecMechanisms.push(ne.name.toUpperCase())}}}return P.matchPrefix(Pe,"a=extmap:").forEach(function(fe){ke.headerExtensions.push(P.parseExtmap(fe))}),ke},P.writeRtpDescription=function(Pe,ke){var ce="";ce+="m="+Pe+" ",ce+=ke.codecs.length>0?"9":"0",ce+=" UDP/TLS/RTP/SAVPF ",ce+=ke.codecs.map(function(tt){return tt.preferredPayloadType!==void 0?tt.preferredPayloadType:tt.payloadType}).join(" ")+`\r
`,ce+=`c=IN IP4 0.0.0.0\r
`,ce+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,ke.codecs.forEach(function(tt){ce+=P.writeRtpMap(tt),ce+=P.writeFmtp(tt),ce+=P.writeRtcpFb(tt)});var Ne=0;return ke.codecs.forEach(function(tt){tt.maxptime>Ne&&(Ne=tt.maxptime)}),Ne>0&&(ce+="a=maxptime:"+Ne+`\r
`),ce+=`a=rtcp-mux\r
`,ke.headerExtensions&&ke.headerExtensions.forEach(function(tt){ce+=P.writeExtmap(tt)}),ce},P.parseRtpEncodingParameters=function(Pe){var ke,ce=[],Ne=P.parseRtpParameters(Pe),tt=Ne.fecMechanisms.indexOf("RED")!==-1,Qe=Ne.fecMechanisms.indexOf("ULPFEC")!==-1,ne=P.matchPrefix(Pe,"a=ssrc:").map(function(re){return P.parseSsrcMedia(re)}).filter(function(re){return re.attribute==="cname"}),oe=ne.length>0&&ne[0].ssrc,fe=P.matchPrefix(Pe,"a=ssrc-group:FID").map(function(re){return re.substr(17).split(" ").map(function(K){return parseInt(K,10)})});fe.length>0&&fe[0].length>1&&fe[0][0]===oe&&(ke=fe[0][1]),Ne.codecs.forEach(function(re){if(re.name.toUpperCase()==="RTX"&&re.parameters.apt){var K={ssrc:oe,codecPayloadType:parseInt(re.parameters.apt,10)};oe&&ke&&(K.rtx={ssrc:ke}),ce.push(K),tt&&((K=JSON.parse(JSON.stringify(K))).fec={ssrc:oe,mechanism:Qe?"red+ulpfec":"red"},ce.push(K))}}),ce.length===0&&oe&&ce.push({ssrc:oe});var Y=P.matchPrefix(Pe,"b=");return Y.length&&(Y=Y[0].indexOf("b=TIAS:")===0?parseInt(Y[0].substr(7),10):Y[0].indexOf("b=AS:")===0?1e3*parseInt(Y[0].substr(5),10)*.95-16e3:void 0,ce.forEach(function(re){re.maxBitrate=Y})),ce},P.parseRtcpParameters=function(Pe){var ke={},ce=P.matchPrefix(Pe,"a=ssrc:").map(function(Qe){return P.parseSsrcMedia(Qe)}).filter(function(Qe){return Qe.attribute==="cname"})[0];ce&&(ke.cname=ce.value,ke.ssrc=ce.ssrc);var Ne=P.matchPrefix(Pe,"a=rtcp-rsize");ke.reducedSize=Ne.length>0,ke.compound=Ne.length===0;var tt=P.matchPrefix(Pe,"a=rtcp-mux");return ke.mux=tt.length>0,ke},P.parseMsid=function(Pe){var ke,ce=P.matchPrefix(Pe,"a=msid:");if(ce.length===1)return{stream:(ke=ce[0].substr(7).split(" "))[0],track:ke[1]};var Ne=P.matchPrefix(Pe,"a=ssrc:").map(function(tt){return P.parseSsrcMedia(tt)}).filter(function(tt){return tt.attribute==="msid"});return Ne.length>0?{stream:(ke=Ne[0].value.split(" "))[0],track:ke[1]}:void 0},P.generateSessionId=function(){return Math.random().toString().substr(2,21)},P.writeSessionBoilerplate=function(Pe,ke,ce){var Ne=ke!==void 0?ke:2;return`v=0\r
o=`+(ce||"thisisadapterortc")+" "+(Pe||P.generateSessionId())+" "+Ne+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},P.writeMediaSection=function(Pe,ke,ce,Ne){var tt=P.writeRtpDescription(Pe.kind,ke);if(tt+=P.writeIceParameters(Pe.iceGatherer.getLocalParameters()),tt+=P.writeDtlsParameters(Pe.dtlsTransport.getLocalParameters(),ce==="offer"?"actpass":"active"),tt+="a=mid:"+Pe.mid+`\r
`,tt+=Pe.direction?"a="+Pe.direction+`\r
`:Pe.rtpSender&&Pe.rtpReceiver?`a=sendrecv\r
`:Pe.rtpSender?`a=sendonly\r
`:Pe.rtpReceiver?`a=recvonly\r
`:`a=inactive\r
`,Pe.rtpSender){var Qe="msid:"+Ne.id+" "+Pe.rtpSender.track.id+`\r
`;tt+="a="+Qe,tt+="a=ssrc:"+Pe.sendEncodingParameters[0].ssrc+" "+Qe,Pe.sendEncodingParameters[0].rtx&&(tt+="a=ssrc:"+Pe.sendEncodingParameters[0].rtx.ssrc+" "+Qe,tt+="a=ssrc-group:FID "+Pe.sendEncodingParameters[0].ssrc+" "+Pe.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return tt+="a=ssrc:"+Pe.sendEncodingParameters[0].ssrc+" cname:"+P.localCName+`\r
`,Pe.rtpSender&&Pe.sendEncodingParameters[0].rtx&&(tt+="a=ssrc:"+Pe.sendEncodingParameters[0].rtx.ssrc+" cname:"+P.localCName+`\r
`),tt},P.getDirection=function(Pe,ke){for(var ce=P.splitLines(Pe),Ne=0;Ne<ce.length;Ne++)switch(ce[Ne]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return ce[Ne].substr(2)}return ke?P.getDirection(ke):"sendrecv"},P.getKind=function(Pe){return P.splitLines(Pe)[0].split(" ")[0].substr(2)},P.isRejected=function(Pe){return Pe.split(" ",2)[1]==="0"},P.parseMLine=function(Pe){var ke=P.splitLines(Pe)[0].substr(2).split(" ");return{kind:ke[0],port:parseInt(ke[1],10),protocol:ke[2],fmt:ke.slice(3).join(" ")}},P.parseOLine=function(Pe){var ke=P.matchPrefix(Pe,"o=")[0].substr(2).split(" ");return{username:ke[0],sessionId:ke[1],sessionVersion:parseInt(ke[2],10),netType:ke[3],addressType:ke[4],address:ke[5]}},P.isValidSDP=function(Pe){if(typeof Pe!="string"||Pe.length===0)return!1;for(var ke=P.splitLines(Pe),ce=0;ce<ke.length;ce++)if(ke[ce].length<2||ke[ce].charAt(1)!=="=")return!1;return!0},typeof Z=="object"&&(Z.exports=P)},{}]},{},[1])(1)},6994:function(ot){ot.exports=b},7165:function(ot,Re,Z){var I;ot.exports=(I=Z(9021),Z(9506),void(I.lib.Cipher||(function(P){var Pe=I,ke=Pe.lib,ce=ke.Base,Ne=ke.WordArray,tt=ke.BufferedBlockAlgorithm,Qe=Pe.enc,ne=Qe.Base64,oe=Pe.algo.EvpKDF,fe=ke.Cipher=tt.extend({cfg:ce.extend(),createEncryptor:function(R,V){return this.create(this._ENC_XFORM_MODE,R,V)},createDecryptor:function(R,V){return this.create(this._DEC_XFORM_MODE,R,V)},init:function(R,V,ae){this.cfg=this.cfg.extend(ae),this._xformMode=R,this._key=V,this.reset()},reset:function(){tt.reset.call(this),this._doReset()},process:function(R){return this._append(R),this._process()},finalize:function(R){return R&&this._append(R),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function R(V){return typeof V=="string"?w:_}return function(V){return{encrypt:function(ae,q,k){return R(q).encrypt(V,ae,q,k)},decrypt:function(ae,q,k){return R(q).decrypt(V,ae,q,k)}}}})()}),Y=(ke.StreamCipher=fe.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),Pe.mode={}),re=ke.BlockCipherMode=ce.extend({createEncryptor:function(R,V){return this.Encryptor.create(R,V)},createDecryptor:function(R,V){return this.Decryptor.create(R,V)},init:function(R,V){this._cipher=R,this._iv=V}}),K=Y.CBC=(function(){var R=re.extend();function V(ae,q,k){var G,xe=this._iv;xe?(G=xe,this._iv=P):G=this._prevBlock;for(var Ae=0;Ae<k;Ae++)ae[q+Ae]^=G[Ae]}return R.Encryptor=R.extend({processBlock:function(ae,q){var k=this._cipher,G=k.blockSize;V.call(this,ae,q,G),k.encryptBlock(ae,q),this._prevBlock=ae.slice(q,q+G)}}),R.Decryptor=R.extend({processBlock:function(ae,q){var k=this._cipher,G=k.blockSize,xe=ae.slice(q,q+G);k.decryptBlock(ae,q),V.call(this,ae,q,G),this._prevBlock=xe}}),R})(),M=(Pe.pad={}).Pkcs7={pad:function(R,V){for(var ae=4*V,q=ae-R.sigBytes%ae,k=q<<24|q<<16|q<<8|q,G=[],xe=0;xe<q;xe+=4)G.push(k);var Ae=Ne.create(G,q);R.concat(Ae)},unpad:function(R){R.sigBytes-=255&R.words[R.sigBytes-1>>>2]}},F=(ke.BlockCipher=fe.extend({cfg:fe.cfg.extend({mode:K,padding:M}),reset:function(){var R;fe.reset.call(this);var V=this.cfg,ae=V.iv,q=V.mode;this._xformMode==this._ENC_XFORM_MODE?R=q.createEncryptor:(R=q.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==R?this._mode.init(this,ae&&ae.words):(this._mode=R.call(q,this,ae&&ae.words),this._mode.__creator=R)},_doProcessBlock:function(R,V){this._mode.processBlock(R,V)},_doFinalize:function(){var R,V=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(V.pad(this._data,this.blockSize),R=this._process(!0)):(R=this._process(!0),V.unpad(R)),R},blockSize:4}),ke.CipherParams=ce.extend({init:function(R){this.mixIn(R)},toString:function(R){return(R||this.formatter).stringify(this)}})),T=(Pe.format={}).OpenSSL={stringify:function(R){var V=R.ciphertext,ae=R.salt;return(ae?Ne.create([1398893684,1701076831]).concat(ae).concat(V):V).toString(ne)},parse:function(R){var V,ae=ne.parse(R),q=ae.words;return q[0]==1398893684&&q[1]==1701076831&&(V=Ne.create(q.slice(2,4)),q.splice(0,4),ae.sigBytes-=16),F.create({ciphertext:ae,salt:V})}},_=ke.SerializableCipher=ce.extend({cfg:ce.extend({format:T}),encrypt:function(R,V,ae,q){q=this.cfg.extend(q);var k=R.createEncryptor(ae,q),G=k.finalize(V),xe=k.cfg;return F.create({ciphertext:G,key:ae,iv:xe.iv,algorithm:R,mode:xe.mode,padding:xe.padding,blockSize:R.blockSize,formatter:q.format})},decrypt:function(R,V,ae,q){return q=this.cfg.extend(q),V=this._parse(V,q.format),R.createDecryptor(ae,q).finalize(V.ciphertext)},_parse:function(R,V){return typeof R=="string"?V.parse(R,this):R}}),E=(Pe.kdf={}).OpenSSL={execute:function(R,V,ae,q,k){if(q||(q=Ne.random(8)),k)G=oe.create({keySize:V+ae,hasher:k}).compute(R,q);else var G=oe.create({keySize:V+ae}).compute(R,q);var xe=Ne.create(G.words.slice(V),4*ae);return G.sigBytes=4*V,F.create({key:G,iv:xe,salt:q})}},w=ke.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:E}),encrypt:function(R,V,ae,q){var k=(q=this.cfg.extend(q)).kdf.execute(ae,R.keySize,R.ivSize,q.salt,q.hasher);q.iv=k.iv;var G=_.encrypt.call(this,R,V,k.key,q);return G.mixIn(k),G},decrypt:function(R,V,ae,q){q=this.cfg.extend(q),V=this._parse(V,q.format);var k=q.kdf.execute(ae,R.keySize,R.ivSize,V.salt,q.hasher);return q.iv=k.iv,_.decrypt.call(this,R,V,k.key,q)}})})()))},7202:function(ot,Re,Z){var I=Z(6994);Re.A=I.default||I},8627:function(ot,Re,Z){Z.d(Re,{$wo:function(){return yt},A1v:function(){return hi},Arx:function(){return no},B3d:function(){return oi},BMv:function(){return bt},Be2:function(){return Pn},E9Y:function(){return w},F$4:function(){return G},FB3:function(){return st},GY7:function(){return en},H6b:function(){return Q},HCP:function(){return Ue},HED:function(){return R},HO9:function(){return q},I4J:function(){return Te},I7C:function(){return jn},J79:function(){return Ne},JDv:function(){return Nr},JSm:function(){return ci},KbN:function(){return Xe},L8E:function(){return Ye},LBO:function(){return mr},LLz:function(){return nt},MK1:function(){return sr},MrD:function(){return Yt},MrS:function(){return pe},MuX:function(){return Be},NCg:function(){return je},NJN:function(){return Wr},O2H:function(){return li},OdW:function(){return $e},OrZ:function(){return he},Oy0:function(){return re},PA0:function(){return tt},PTE:function(){return qe},Q3v:function(){return nr},Q9p:function(){return fe},QYE:function(){return ie},Qo5:function(){return T},R54:function(){return Vr},RBR:function(){return _r},RZs:function(){return Bi},RfS:function(){return Le},S4u:function(){return Pe},S5f:function(){return Qe},S6t:function(){return gr},SB8:function(){return go},SCx:function(){return dt},SQb:function(){return Xn},SRE:function(){return _t},SmZ:function(){return me},Srw:function(){return E},T1C:function(){return Ut},T_8:function(){return Or},TgN:function(){return ft},Tij:function(){return vi},UZK:function(){return M},V2t:function(){return Ve},VEp:function(){return On},VU9:function(){return Se},WP4:function(){return ut},WgV:function(){return Wn},XHx:function(){return ui},Xxx:function(){return De},YDn:function(){return Vn},ZEp:function(){return oe},ZpF:function(){return rt},Zws:function(){return gi},_5H:function(){return ti},_68:function(){return ee},_9F:function(){return Un},_HD:function(){return F},aUw:function(){return xe},aa2:function(){return Je},akY:function(){return ue},akb:function(){return $n},ann:function(){return mi},aq0:function(){return Ii},b1q:function(){return qr},bVX:function(){return j},cGQ:function(){return Ar},cMG:function(){return lr},ckD:function(){return mt},ckg:function(){return eo},clM:function(){return ke},d49:function(){return ce},dNl:function(){return Rt},dU8:function(){return Zn},dXc:function(){return ur},dg1:function(){return ge},dqB:function(){return kn},drM:function(){return St},ekj:function(){return xi},f43:function(){return He},f5Z:function(){return Nt},fFX:function(){return Ti},fzq:function(){return J},g9p:function(){return ae},gHA:function(){return Jn},gSF:function(){return V},hYx:function(){return vt},hje:function(){return ar},iei:function(){return ve},jZ$:function(){return ze},jut:function(){return Ee},kOd:function(){return Lt},kbF:function(){return qt},lgu:function(){return Ui},lph:function(){return K},lwJ:function(){return Ji},m6U:function(){return Rn},mHY:function(){return ne},mrK:function(){return wn},oCq:function(){return Ge},p7L:function(){return an},pGN:function(){return It},pWJ:function(){return Qr},ph7:function(){return di},pn5:function(){return Ie},pzL:function(){return Y},qvY:function(){return Nn},rBJ:function(){return Sr},rV9:function(){return B},sJH:function(){return Oe},sP3:function(){return Cn},sVF:function(){return Ae},s_m:function(){return wt},t85:function(){return xt},tlN:function(){return Gt},ton:function(){return _i},ulL:function(){return _},wxm:function(){return Mr},xU2:function(){return Dt},xbZ:function(){return Dr},xfZ:function(){return k},yK:function(){return it},yTe:function(){return be},z0D:function(){return Gr},zML:function(){return Br},zcJ:function(){return ir},zgL:function(){return L},zgf:function(){return Wt},zs3:function(){return Mn}});var I=Z(8866),P="the user cancels the stream request.",Pe={code:1000002,message:"not login room"},ke={code:1000014,message:"stream ID is too long"},ce={code:1000015,message:"streamID is empty"},Ne={code:1000016,message:"stream ID contains illegal characters"},tt={code:1000017,message:I.Rl},Qe={code:1000018,message:I.qC},ne={code:1001021,message:"set geoFence fail"},oe={code:1100001,message:I.dO},fe={code:1100002,message:"network timeout."},Y={code:1100003,msg:"socket close"},re={code:1100999,message:"unknown server error"},K={code:1101002,message:"get app config fail"},M={code:1101003,message:"Module not imported"},F={code:1101005,message:"signal hb fail"},T={code:1002011,message:"room ID is empty"},_={code:1002012,message:"room ID contains illegal characters"},E={code:1002013,message:"room ID is too long"},w={code:1002099,message:"room inner error"},R={code:1102016,message:"token error"},V={code:1102017,message:"dispatch error"},ae={code:1102018,message:"token expired"},q={code:1102021,message:"biz channel error."},k={code:1102022,message:"dispatch request timeout"},G={code:1102023,message:"connect signal fail"},xe={code:1102024,message:"invalid channel"},Ae={code:1102026,msg:I.fT},De={code:1003025,message:"stream is forbided by media server"},Ie={code:1003028,message:"There are duplicate stream ids in the room"},be={code:1003040,message:"Pushing CDN status failed. It may be an error in the CDN url"},qe={code:1003050,message:"the extra info of the stream is null"},Ve={code:1003051,message:"the extra info of the stream is too long"},pe={code:1003080,message:"browser does not support the codec"},j={code:1003099,message:"publish inner error"},B={code:1003081,message:"B-frames detected in the video stream"},nt={code:1103001,message:I.dO},he={code:1103002,message:"browser do not support"},it={code:1103010,message:"screen fail"},wt={code:1103011,message:"enumerate devices fail"},Ee={code:1103012,message:"use camera device fail"},Oe={code:1103019,message:"publish streams auth fail"},rt={code:1103021,message:"session request fail"},me={code:1103022,message:"create offer error"},Se={code:1103023,message:"setLocalDescription error"},ge={code:1103024,message:"mediaDesc error"},ve={code:1103025,message:"other side offer error"},ee={code:1103026,message:"candidate error"},ze={code:1103027,message:"server session closed"},Je={code:1103028,message:"ice connection error"},yt={code:1103030,message:"negotiation timeout"},xt={code:1103042,message:"screen canceled"},Ye={code:1103043,message:"screen not support"},J={code:1103044,message:I.aw},He={code:1103099,message:"stream is not capturing"},Le={code:1103049,message:"repeated pull same stream"},Ue={code:1103050,message:"websocket disconnected"},_t={code:1103051,message:"publisher retry timeout"},st={code:1103053,message:"https is required"},Dt={code:1103055,message:I.Wk},qt={code:1103056,message:"publish is publishing"},Lt={code:1103058,message:"client ip changed"},ut={code:1103059,message:"ttl over time"},Yt={code:1103060,message:"session request timeout"},wn={code:1103061,message:"get media fail"},Rn={code:1103062,message:"update stream info fail"},jn={code:1103063,message:"publish target no response"},Mn={code:1103064,message:"get device not allowed"},Pn={code:1103065,message:"device is not readable"},ci={code:1103066,message:"device does not meet constraints"},Nr={code:1103067,message:"update sdp time out"},nr={code:1103068,message:"update sdp fail"},Nn={code:1103073,message:"video effect is starting, please operate after video effect is started"},_r={code:1103078,message:"publish stream poor and net probe poor"},$n={code:1103103,message:"remote sdp no candidate "},Dr={code:1103089,message:P},Gr={code:1103093,message:"set audio out put error"},Or={code:1004099,message:"internal exeception"},mi={code:1104001,message:"input parm error"},Ar={code:1104020,message:"dispatch request fail"},sr={code:1104021,message:"session request fail"},kn={code:1104022,message:"create offer error"},Jn={code:1104023,message:"setLocalDescription error"},Mr={code:1104024,message:"mediaDesc error"},ar={code:1104025,message:"other side offer error"},oi={code:1104026,message:"candidate error"},gi={code:1104028,message:"ice connection error"},go={code:1104029,message:"websocket disconnected"},xi={code:1104030,message:"negotiation timeout"},ui={code:1104031,message:"player retry timeout"},no={code:1104032,message:"player is playing"},Ui={code:1104033,message:"client ip changed"},vi={code:1104034,message:"ttl is over time"},Br={code:1104035,message:"reset session push"},ur={code:1104036,message:"session request timeout"},Qr={code:1104037,message:"probe time out"},qr={code:1104038,message:"resource mode is not supported"},Bi={code:1104039,message:"play stream not found"},Vn={code:1104027,message:"server session closed"},mr={code:1004002,message:"play stream not found"},lr={code:1004020,message:"play stream interrupted"},ti={code:1004025,message:"stream is forbided by media server"},Q={code:1004080,message:"browser does not support the codec"},dt={code:1004081,message:"decode video failed"},Be={code:1104041,message:"stream quality poor and net probe poor"},Te={code:1104042,message:P},$e={code:1104043,message:"mini sdp error"},Ge={code:1104044,message:"stream is not playing"},mt={code:1104045,message:"play streams is out limit"},vt={code:1104046,message:"play streams auth fail"},St={code:1104047,message:"remote sdp no candidate "},It={code:1006006,message:"the device is unplugged"},Nt={code:1106007,message:"the microphone may be loose, and audio data collection is abnormal."},Gt={code:1106008,message:"the camera may be loose, and video data collection is abnormal."},Ut={code:1106009,message:"mic track ended."},Wt={code:1106010,message:"camera track ended."},an={code:1000067,message:"Logged in room, setting scenario is not supported"},en={code:1103083,message:"sdp wrong format"},Cn={code:1103084,message:"mini sdp buffer size exceeded"},Un={code:1103085,message:"url size exceeded"},On={code:1103086,message:"this publish stream id is not created by CreateZegoStream"},Xn={code:1103087,message:"the zego stream does not capture audio"},Zn={code:1103088,message:"the zego stream does not capture video"},Sr={code:1103052,message:"publisher cdn push error"},gr={code:1103057,message:"decode audio data fail"},ir={code:1103074,message:"video track is not readable"},Ti={code:1103047,message:"track is not found"},eo={code:1103048,message:I.pt},_i={code:1103029,message:"constraint error"},Vr={code:1103045,message:"video is false"},li={code:1103046,message:"audio is false"},di={code:1103101,message:"only stream which have one track and kind no exist can add track"},Wr={code:1103069,message:"publisher state wrong"},Wn={code:1103070,message:"not support handle track"},Ji={code:1103071,message:"video effect processor is running"},hi={code:1103071,message:"background processor is running"},Ii={code:1103079,message:"replace track fail"},ie={code:1103072,message:"not support beauty effect"},L={code:1103075,message:"beauty effect overload"},ue={code:1103076,message:"audio track is not readable"},je={code:1103100,message:"background process is start, but not subscribe yet"},Xe={code:1017130,message:"get mini sdp error"},ft={code:1017131,message:"parse mini sdp error"},bt={code:1017132,message:"worker is invalid"},Rt={code:1017133,message:"mini trans timeout"}},8754:function(){var ot=(function(){function Re(Q,dt){postMessage({action:Ui,cbn:dt,result:Q})}function Z(Q){var dt=[];return dt[Q-1]=void 0,dt}function I(Q,dt){return ke(Q[0]+dt[0],Q[1]+dt[1])}function P(Q,dt){return(function(Be,Te){var $e,Ge;return $e=Be*Br,Ge=Te,0>Te&&(Ge+=Br),[Ge,$e]})(Math.max(Math.min(Q[1]/Br,2147483647),-2147483648)&Math.max(Math.min(dt[1]/Br,2147483647),-2147483648),tt(Q)&tt(dt))}function Pe(Q,dt){var Be,Te;return Q[0]==dt[0]&&Q[1]==dt[1]?0:(Te=0>dt[1],(Be=0>Q[1])&&!Te?-1:!Be&&Te?1:fe(Q,dt)[1]<0?-1:1)}function ke(Q,dt){var Be,Te;for(Q%=18446744073709552e3,dt=(dt%=18446744073709552e3)-(Be=dt%Br)+(Te=Math.floor(Q/Br)*Br),Q=Q-Te+Be;0>Q;)Q+=Br,dt-=Br;for(;Q>4294967295;)Q-=Br,dt+=Br;for(dt%=18446744073709552e3;dt>9223372032559809e3;)dt-=18446744073709552e3;for(;-9223372036854776e3>dt;)dt+=18446744073709552e3;return[Q,dt]}function ce(Q,dt){return Q[0]==dt[0]&&Q[1]==dt[1]}function Ne(Q){return Q>=0?[Q,0]:[Q+Br,-Br]}function tt(Q){return Q[0]>=2147483648?~~Math.max(Math.min(Q[0]-Br,2147483647),-2147483648):~~Math.max(Math.min(Q[0],2147483647),-2147483648)}function Qe(Q){return 30>=Q?1<<Q:Qe(30)*Qe(Q-30)}function ne(Q,dt){var Be,Te,$e,Ge;if(dt&=63,ce(Q,Qr))return dt?qr:Q;if(0>Q[1])throw Error("Neg");return Ge=Qe(dt),Te=Q[1]*Ge%18446744073709552e3,(Te+=Be=($e=Q[0]*Ge)-$e%Br)>=9223372036854776e3&&(Te-=18446744073709552e3),[$e-=Be,Te]}function oe(Q,dt){var Be;return Be=Qe(dt&=63),ke(Math.floor(Q[0]/Be),Q[1]/Be)}function fe(Q,dt){return ke(Q[0]-dt[0],Q[1]-dt[1])}function Y(Q,dt){return Q.Mc=dt,Q.Lc=0,Q.Yb=dt.length,Q}function re(Q){return Q.Lc>=Q.Yb?-1:255&Q.Mc[Q.Lc++]}function K(Q,dt,Be,Te){return Q.Lc>=Q.Yb?-1:(Te=Math.min(Te,Q.Yb-Q.Lc),E(Q.Mc,Q.Lc,dt,Be,Te),Q.Lc+=Te,Te)}function M(Q){return Q.Mc=Z(32),Q.Yb=0,Q}function F(Q){var dt=Q.Mc;return dt.length=Q.Yb,dt}function T(Q,dt){Q.Mc[Q.Yb++]=dt<<24>>24}function _(Q,dt,Be,Te){E(dt,Be,Q.Mc,Q.Yb,Te),Q.Yb+=Te}function E(Q,dt,Be,Te,$e){for(var Ge=0;$e>Ge;++Ge)Be[Te+Ge]=Q[dt+Ge]}function w(Q,dt,Be,Te,$e){var Ge,mt;if(Pe(Te,ur)<0)throw Error("invalid length "+Te);for(Q.Tb=Te,(function(vt,St){(function(It,Nt){It.ab=Nt;for(var Gt=0;Nt>1<<Gt;++Gt);It.$b=2*Gt})(St,1<<vt.s),St.n=vt.f,(function(It,Nt){var Gt=It.X;It.X=Nt,It.b&&Gt!=It.X&&(It.wb=-1,It.b=null)})(St,vt.m),St.eb=0,St.fb=3,St.Y=2,St.y=3})($e,Ge=ve({})),Ge.Gc=ot.disableEndMark===void 0,(function(vt,St){vt.fc[0]=9*(5*vt.Y+vt.eb)+vt.fb<<24>>24;for(var It=0;4>It;++It)vt.fc[1+It]=vt.ab>>8*It<<24>>24;_(St,vt.fc,0,5)})(Ge,Be),mt=0;64>mt;mt+=8)T(Be,255&tt(oe(Te,mt)));Q.yb=(Ge.W=0,Ge.oc=dt,Ge.pc=0,(function(vt){var St,It;vt.b||(St={},It=4,vt.X||(It=2),(function(Nt,Gt){Nt.qb=Gt>2,Nt.qb?(Nt.w=0,Nt.xb=4,Nt.R=66560):(Nt.w=2,Nt.xb=3,Nt.R=0)})(St,It),vt.b=St),Yt(vt.A,vt.eb,vt.fb),(vt.ab!=vt.wb||vt.Hb!=vt.n)&&(De(vt.b,vt.ab,4096,vt.n,274),vt.wb=vt.ab,vt.Hb=vt.n)})(Ge),Ge.d.Ab=Be,(function(vt){(function(It){It.l=0,It.J=0;for(var Nt=0;4>Nt;++Nt)It.v[Nt]=0})(vt),(function(It){It.mc=qr,It.xc=qr,It.E=-1,It.Jb=1,It.Oc=0})(vt.d),sr(vt.C),sr(vt._),sr(vt.bb),sr(vt.hb),sr(vt.Ub),sr(vt.vc),sr(vt.Sb),(function(It){var Nt,Gt=1<<It.u+It.I;for(Nt=0;Gt>Nt;++Nt)sr(It.V[Nt].tb)})(vt.A);for(var St=0;4>St;++St)sr(vt.K[St].G);_t(vt.$,1<<vt.Y),_t(vt.i,1<<vt.Y),sr(vt.S.G),vt.N=0,vt.jb=0,vt.q=0,vt.s=0})(Ge),ze(Ge),ee(Ge),Ge.$.rb=Ge.n+1-2,ut(Ge.$,1<<Ge.Y),Ge.i.rb=Ge.n+1-2,ut(Ge.i,1<<Ge.Y),Ge.g=qr,(function(vt,St){return vt.cb=St,vt.Z=null,vt.zc=1,vt})({},Ge))}function R(Q,dt,Be){return Q.Nb=M({}),w(Q,Y({},dt),Q.Nb,Ne(dt.length),Be),Q}function V(Q,dt,Be){var Te,$e,Ge,mt,vt="",St=[];for($e=0;5>$e;++$e){if((Ge=re(dt))==-1)throw Error("truncated input");St[$e]=Ge<<24>>24}if(!(function(It,Nt){var Gt,Ut,Wt,an,en,Cn,Un;if(5>Nt.length)return 0;for(Wt=(Un=255&Nt[0])%9,an=(Cn=~~(Un/9))%5,en=~~(Cn/5),Gt=0,Ut=0;4>Ut;++Ut)Gt+=(255&Nt[1+Ut])<<8*Ut;return Gt>99999999||!(function(On,Xn,Zn,Sr){if(Xn>8||Zn>4||Sr>4)return 0;me(On.gb,Zn,Xn);var gr=1<<Sr;return wt(On.Rb,gr),wt(On.sb,gr),On.Dc=gr-1,1})(It,Wt,an,en)?0:(function(On,Xn){return 0>Xn?0:(On.Ob!=Xn&&(On.Ob=Xn,On.nb=Math.max(On.Ob,1),qe(On.B,Math.max(On.nb,4096))),1)})(It,Gt)})(Te=it({}),St))throw Error("corrupted input");for($e=0;64>$e;$e+=8){if((Ge=re(dt))==-1)throw Error("truncated input");(Ge=Ge.toString(16)).length==1&&(Ge="0"+Ge),vt=Ge+""+vt}/^0+$|^f+$/i.test(vt)?Q.Tb=ur:(mt=parseInt(vt,16),Q.Tb=mt>4294967295?ur:Ne(mt)),Q.yb=(function(It,Nt,Gt,Ut){return It.e.Ab=Nt,j(It.B),It.B.cc=Gt,(function(Wt){Wt.B.h=0,Wt.B.o=0,sr(Wt.Gb),sr(Wt.pb),sr(Wt.Zb),sr(Wt.Cb),sr(Wt.Db),sr(Wt.Eb),sr(Wt.kc),(function(en){var Cn,Un;for(Un=1<<en.u+en.I,Cn=0;Un>Cn;++Cn)sr(en.V[Cn].Ib)})(Wt.gb);for(var an=0;4>an;++an)sr(Wt.kb[an].G);rt(Wt.Rb),rt(Wt.sb),sr(Wt.Fb.G),(function(en){en.Bb=0,en.E=-1;for(var Cn=0;5>Cn;++Cn)en.Bb=en.Bb<<8|re(en.Ab)})(Wt.e)})(It),It.U=0,It.ib=0,It.Jc=0,It.Ic=0,It.Qc=0,It.Nc=Ut,It.g=qr,It.jc=0,(function(Wt,an){return Wt.Z=an,Wt.cb=null,Wt.zc=1,Wt})({},It)})(Te,dt,Be,Q.Tb)}function ae(Q,dt){return Q.Nb=M({}),V(Q,Y({},dt),Q.Nb),Q}function q(Q,dt){return Q.c[Q.f+Q.o+dt]}function k(Q,dt,Be,Te){var $e,Ge;for(Q.T&&Q.o+dt+Te>Q.h&&(Te=Q.h-(Q.o+dt)),++Be,Ge=Q.f+Q.o+dt,$e=0;Te>$e&&Q.c[Ge+$e]==Q.c[Ge+$e-Be];++$e);return $e}function G(Q){return Q.h-Q.o}function xe(Q){var dt,Be;if(!Q.T)for(;;){if(!(Be=-Q.f+Q.Kb-Q.h))return;if((dt=K(Q.cc,Q.c,Q.f+Q.h,Be))==-1)return Q.zb=Q.h,Q.f+Q.zb>Q.H&&(Q.zb=Q.H-Q.f),void(Q.T=1);Q.h+=dt,Q.h>=Q.o+Q._b&&(Q.zb=Q.h-Q._b)}}function Ae(Q,dt){Q.f+=dt,Q.zb-=dt,Q.o-=dt,Q.h-=dt}function De(Q,dt,Be,Te,$e){var Ge,mt;1073741567>dt&&(Q.Fc=16+(Te>>1),(function(vt,St,It,Nt){var Gt;vt.Bc=St,vt._b=It,Gt=St+It+Nt,(vt.c==null||vt.Kb!=Gt)&&(vt.c=null,vt.Kb=Gt,vt.c=Z(vt.Kb)),vt.H=vt.Kb-It})(Q,dt+Be,Te+$e,256+~~((dt+Be+Te+$e)/2)),Q.ob=Te,Q.p!=(Ge=dt+1)&&(Q.L=Z(2*(Q.p=Ge))),mt=65536,Q.qb&&(mt=dt-1,mt|=mt>>1,mt|=mt>>2,mt|=mt>>4,mt|=mt>>8,mt>>=1,(mt|=65535)>16777216&&(mt>>=1),Q.Ec=mt,++mt,mt+=Q.R),mt!=Q.rc&&(Q.ub=Z(Q.rc=mt)))}function Ie(Q){var dt;++Q.k>=Q.p&&(Q.k=0),(function(Be){++Be.o,Be.o>Be.zb&&(Be.f+Be.o>Be.H&&(function(Te){var $e,Ge,mt;for((mt=Te.f+Te.o-Te.Bc)>0&&--mt,Ge=Te.f+Te.h-mt,$e=0;Ge>$e;++$e)Te.c[$e]=Te.c[mt+$e];Te.f-=mt})(Be),xe(Be))})(Q),Q.o==1073741823&&(be(Q.L,2*Q.p,dt=Q.o-Q.p),be(Q.ub,Q.rc,dt),Ae(Q,dt))}function be(Q,dt,Be){var Te,$e;for(Te=0;dt>Te;++Te)Be>=($e=Q[Te]||0)?$e=0:$e-=Be,Q[Te]=$e}function qe(Q,dt){(Q.Lb==null||Q.M!=dt)&&(Q.Lb=Z(dt)),Q.M=dt,Q.o=0,Q.h=0}function Ve(Q){var dt=Q.o-Q.h;dt&&(_(Q.cc,Q.Lb,Q.h,dt),Q.o>=Q.M&&(Q.o=0),Q.h=Q.o)}function pe(Q,dt){var Be=Q.o-dt-1;return 0>Be&&(Be+=Q.M),Q.Lb[Be]}function j(Q){Ve(Q),Q.cc=null}function B(Q){return 4>(Q-=2)?Q:3}function nt(Q){return 4>Q?0:10>Q?Q-3:Q-6}function he(Q){if(!Q.zc)throw Error("bad state");return Q.cb?(function(dt){(function(Be,Te,$e,Ge){var mt,vt,St,It,Nt,Gt,Ut,Wt,an,en,Cn,Un,On,Xn,Zn;if(Te[0]=qr,$e[0]=qr,Ge[0]=1,Be.oc&&(Be.b.cc=Be.oc,(function(Sr){Sr.f=0,Sr.o=0,Sr.h=0,Sr.T=0,xe(Sr),Sr.k=0,Ae(Sr,-1)})(Be.b),Be.W=1,Be.oc=null),!Be.pc){if(Be.pc=1,Xn=Be.g,ce(Be.g,qr)){if(!G(Be.b))return void Je(Be,tt(Be.g));He(Be),On=tt(Be.g)&Be.y,kn(Be.d,Be.C,(Be.l<<4)+On,0),Be.l=nt(Be.l),St=q(Be.b,-Be.s),Rn(wn(Be.A,tt(Be.g),Be.J),Be.d,St),Be.J=St,--Be.s,Be.g=I(Be.g,Bi)}if(!G(Be.b))return void Je(Be,tt(Be.g));for(;;){if(Ut=yt(Be,tt(Be.g)),en=Be.mb,On=tt(Be.g)&Be.y,vt=(Be.l<<4)+On,Ut==1&&en==-1)kn(Be.d,Be.C,vt,0),St=q(Be.b,-Be.s),Zn=wn(Be.A,tt(Be.g),Be.J),7>Be.l?Rn(Zn,Be.d,St):(an=q(Be.b,-Be.v[0]-1-Be.s),jn(Zn,Be.d,an,St)),Be.J=St,Be.l=nt(Be.l);else{if(kn(Be.d,Be.C,vt,1),4>en){if(kn(Be.d,Be.bb,Be.l,1),en?(kn(Be.d,Be.hb,Be.l,1),en==1?kn(Be.d,Be.Ub,Be.l,0):(kn(Be.d,Be.Ub,Be.l,1),kn(Be.d,Be.vc,Be.l,en-2))):(kn(Be.d,Be.hb,Be.l,0),kn(Be.d,Be._,vt,Ut==1?0:1)),Ut==1?Be.l=7>Be.l?9:11:(Dt(Be.i,Be.d,Ut-2,On),Be.l=7>Be.l?8:11),It=Be.v[en],en!=0){for(Gt=en;Gt>=1;--Gt)Be.v[Gt]=Be.v[Gt-1];Be.v[0]=It}}else{for(kn(Be.d,Be.bb,Be.l,0),Be.l=7>Be.l?7:10,Dt(Be.$,Be.d,Ut-2,On),Un=Ue(en-=4),Wt=B(Ut),_r(Be.K[Wt],Be.d,Un),Un>=4&&(Cn=en-(mt=(2|1&Un)<<(Nt=(Un>>1)-1)),14>Un?Or(Be.Sb,mt-Un-1,Be.d,Nt,Cn):(Jn(Be.d,Cn>>4,Nt-4),Dr(Be.S,Be.d,15&Cn),++Be.Qb)),It=en,Gt=3;Gt>=1;--Gt)Be.v[Gt]=Be.v[Gt-1];Be.v[0]=It,++Be.Mb}Be.J=q(Be.b,Ut-1-Be.s)}if(Be.s-=Ut,Be.g=I(Be.g,Ne(Ut)),!Be.s){if(Be.Mb>=128&&ze(Be),Be.Qb>=16&&ee(Be),Te[0]=Be.g,$e[0]=Mr(Be.d),!G(Be.b))return void Je(Be,tt(Be.g));if(Pe(fe(Be.g,Xn),[4096,0])>=0)return Be.pc=0,void(Ge[0]=0)}}}})(dt.cb,dt.cb.Xb,dt.cb.uc,dt.cb.Kc),dt.Pb=dt.cb.Xb[0],dt.cb.Kc[0]&&((function(Be){Le(Be),Be.d.Ab=null})(dt.cb),dt.zc=0)})(Q):(function(dt){var Be=(function(Te){var $e,Ge,mt,vt,St,It;if(It=tt(Te.g)&Te.Dc,Ar(Te.e,Te.Gb,(Te.U<<4)+It)){if(Ar(Te.e,Te.Zb,Te.U))mt=0,Ar(Te.e,Te.Cb,Te.U)?(Ar(Te.e,Te.Db,Te.U)?(Ar(Te.e,Te.Eb,Te.U)?(Ge=Te.Qc,Te.Qc=Te.Ic):Ge=Te.Ic,Te.Ic=Te.Jc):Ge=Te.Jc,Te.Jc=Te.ib,Te.ib=Ge):Ar(Te.e,Te.pb,(Te.U<<4)+It)||(Te.U=7>Te.U?9:11,mt=1),mt||(mt=Ee(Te.sb,Te.e,It)+2,Te.U=7>Te.U?8:11);else if(Te.Qc=Te.Ic,Te.Ic=Te.Jc,Te.Jc=Te.ib,mt=2+Ee(Te.Rb,Te.e,It),Te.U=7>Te.U?7:10,(St=nr(Te.kb[B(mt)],Te.e))>=4){if(Te.ib=(2|1&St)<<(vt=(St>>1)-1),14>St)Te.ib+=(function(Nt,Gt,Ut,Wt){var an,en,Cn=1,Un=0;for(en=0;Wt>en;++en)an=Ar(Ut,Nt,Gt+Cn),Cn<<=1,Cn+=an,Un|=an<<en;return Un})(Te.kc,Te.ib-St-1,Te.e,vt);else if(Te.ib+=(function(Nt,Gt){var Ut,Wt,an=0;for(Ut=Gt;Ut!=0;--Ut)Nt.E>>>=1,Nt.Bb-=Nt.E&(Wt=Nt.Bb-Nt.E>>>31)-1,an=an<<1|1-Wt,-16777216&Nt.E||(Nt.Bb=Nt.Bb<<8|re(Nt.Ab),Nt.E<<=8);return an})(Te.e,vt-4)<<4,Te.ib+=(function(Nt,Gt){var Ut,Wt,an=1,en=0;for(Wt=0;Nt.F>Wt;++Wt)Ut=Ar(Gt,Nt.G,an),an<<=1,an+=Ut,en|=Ut<<Wt;return en})(Te.Fb,Te.e),0>Te.ib)return Te.ib==-1?1:-1}else Te.ib=St;if(Pe(Ne(Te.ib),Te.g)>=0||Te.ib>=Te.nb)return-1;(function(Nt,Gt,Ut){var Wt=Nt.o-Gt-1;for(0>Wt&&(Wt+=Nt.M);Ut!=0;--Ut)Wt>=Nt.M&&(Wt=0),Nt.Lb[Nt.o++]=Nt.Lb[Wt++],Nt.o>=Nt.M&&Ve(Nt)})(Te.B,Te.ib,mt),Te.g=I(Te.g,Ne(mt)),Te.jc=pe(Te.B,0)}else $e=(function(Nt,Gt,Ut){return Nt.V[((Gt&Nt.qc)<<Nt.u)+((255&Ut)>>>8-Nt.u)]})(Te.gb,tt(Te.g),Te.jc),Te.jc=7>Te.U?(function(Nt,Gt){var Ut=1;do Ut=Ut<<1|Ar(Gt,Nt.Ib,Ut);while(256>Ut);return Ut<<24>>24})($e,Te.e):(function(Nt,Gt,Ut){var Wt,an,en=1;do if(an=Ut>>7&1,Ut<<=1,Wt=Ar(Gt,Nt.Ib,(1+an<<8)+en),en=en<<1|Wt,an!=Wt){for(;256>en;)en=en<<1|Ar(Gt,Nt.Ib,en);break}while(256>en);return en<<24>>24})($e,Te.e,pe(Te.B,Te.ib)),(function(Nt,Gt){Nt.Lb[Nt.o++]=Gt,Nt.o>=Nt.M&&Ve(Nt)})(Te.B,Te.jc),Te.U=nt(Te.U),Te.g=I(Te.g,Bi);return 0})(dt.Z);if(Be==-1)throw Error("corrupted input");dt.Pb=ur,dt.Pc=dt.Z.g,(Be||Pe(dt.Z.Nc,qr)>=0&&Pe(dt.Z.g,dt.Z.Nc)>=0)&&(Ve(dt.Z.B),j(dt.Z.B),dt.Z.e.Ab=null,dt.zc=0)})(Q),Q.zc}function it(Q){Q.B={},Q.e={},Q.Gb=Z(192),Q.Zb=Z(12),Q.Cb=Z(12),Q.Db=Z(12),Q.Eb=Z(12),Q.pb=Z(192),Q.kb=Z(4),Q.kc=Z(114),Q.Fb=Nr({},4),Q.Rb=Oe({}),Q.sb=Oe({}),Q.gb={};for(var dt=0;4>dt;++dt)Q.kb[dt]=Nr({},6);return Q}function wt(Q,dt){for(;dt>Q.O;++Q.O)Q.ec[Q.O]=Nr({},3),Q.hc[Q.O]=Nr({},3)}function Ee(Q,dt,Be){return Ar(dt,Q.wc,0)?8+(Ar(dt,Q.wc,1)?8+nr(Q.tc,dt):nr(Q.hc[Be],dt)):nr(Q.ec[Be],dt)}function Oe(Q){return Q.wc=Z(2),Q.ec=Z(16),Q.hc=Z(16),Q.tc=Nr({},8),Q.O=0,Q}function rt(Q){sr(Q.wc);for(var dt=0;Q.O>dt;++dt)sr(Q.ec[dt].G),sr(Q.hc[dt].G);sr(Q.tc.G)}function me(Q,dt,Be){var Te,$e;if(Q.V==null||Q.u!=Be||Q.I!=dt)for(Q.I=dt,Q.qc=(1<<dt)-1,Q.u=Be,Q.V=Z($e=1<<Q.u+Q.I),Te=0;$e>Te;++Te)Q.V[Te]=Se({})}function Se(Q){return Q.Ib=Z(768),Q}function ge(Q,dt){var Be,Te,$e,Ge;Q.jb=dt,$e=Q.a[dt].r,Te=Q.a[dt].j;do Q.a[dt].t&&(ci(Q.a[$e]),Q.a[$e].r=$e-1,Q.a[dt].Ac&&(Q.a[$e-1].t=0,Q.a[$e-1].r=Q.a[dt].r2,Q.a[$e-1].j=Q.a[dt].j2)),Be=Te,Te=Q.a[Ge=$e].j,$e=Q.a[Ge].r,Q.a[Ge].j=Be,Q.a[Ge].r=dt,dt=Ge;while(dt>0);return Q.mb=Q.a[0].j,Q.q=Q.a[0].r}function ve(Q){var dt;for(Q.v=Z(4),Q.a=[],Q.d={},Q.C=Z(192),Q.bb=Z(12),Q.hb=Z(12),Q.Ub=Z(12),Q.vc=Z(12),Q._=Z(192),Q.K=[],Q.Sb=Z(114),Q.S=Nn({},4),Q.$=qt({}),Q.i=qt({}),Q.A={},Q.m=[],Q.P=[],Q.lb=[],Q.nc=Z(16),Q.x=Z(4),Q.Q=Z(4),Q.Xb=[qr],Q.uc=[qr],Q.Kc=[0],Q.fc=Z(5),Q.yc=Z(128),Q.vb=0,Q.X=1,Q.D=0,Q.Hb=-1,Q.mb=0,dt=0;4096>dt;++dt)Q.a[dt]={};for(dt=0;4>dt;++dt)Q.K[dt]=Nn({},6);return Q}function ee(Q){for(var dt=0;16>dt;++dt)Q.nc[dt]=Gr(Q.S,dt);Q.Qb=0}function ze(Q){var dt,Be,Te,$e,Ge,mt,vt,St;for($e=4;128>$e;++$e)mt=Ue($e),Q.yc[$e]=mi(Q.Sb,(dt=(2|1&mt)<<(Te=(mt>>1)-1))-mt-1,Te,$e-dt);for(Ge=0;4>Ge;++Ge){for(Be=Q.K[Ge],vt=Ge<<6,mt=0;Q.$b>mt;++mt)Q.P[vt+mt]=$n(Be,mt);for(mt=14;Q.$b>mt;++mt)Q.P[vt+mt]+=(mt>>1)-1-4<<6;for(St=128*Ge,$e=0;4>$e;++$e)Q.lb[St+$e]=Q.P[vt+$e];for(;128>$e;++$e)Q.lb[St+$e]=Q.P[vt+Ue($e)]+Q.yc[$e]}Q.Mb=0}function Je(Q,dt){Le(Q),(function(Te,$e){if(Te.Gc){kn(Te.d,Te.C,(Te.l<<4)+$e,1),kn(Te.d,Te.bb,Te.l,0),Te.l=7>Te.l?7:10,Dt(Te.$,Te.d,0,$e);var Ge=B(2);_r(Te.K[Ge],Te.d,63),Jn(Te.d,67108863,26),Dr(Te.S,Te.d,15)}})(Q,dt&Q.y);for(var Be=0;5>Be;++Be)ar(Q.d)}function yt(Q,dt){var Be,Te,$e,Ge,mt,vt,St,It,Nt,Gt,Ut,Wt,an,en,Cn,Un,On,Xn,Zn,Sr,gr,ir,Ti,eo,_i,Vr,li,di,Wr,Wn,Ji,hi,Ii,ie,L,ue,je,Xe,ft,bt,Rt,Pt,Vt,$t;if(Q.jb!=Q.q)return an=Q.a[Q.q].r-Q.q,Q.mb=Q.a[Q.q].j,Q.q=Q.a[Q.q].r,an;if(Q.q=Q.jb=0,Q.N?(Wt=Q.vb,Q.N=0):Wt=He(Q),Vr=Q.D,2>(eo=G(Q.b)+1))return Q.mb=-1,1;for(eo>273&&(eo=273),ft=0,Nt=0;4>Nt;++Nt)Q.x[Nt]=Q.v[Nt],Q.Q[Nt]=k(Q.b,-1,Q.x[Nt],273),Q.Q[Nt]>Q.Q[ft]&&(ft=Nt);if(Q.Q[ft]>=Q.n)return Q.mb=ft,J(Q,(an=Q.Q[ft])-1),an;if(Wt>=Q.n)return Q.mb=Q.m[Vr-1]+4,J(Q,Wt-1),Wt;if(St=q(Q.b,-1),On=q(Q.b,-Q.v[0]-1-1),2>Wt&&St!=On&&2>Q.Q[ft])return Q.mb=-1,1;if(Q.a[0].Hc=Q.l,Q.a[1].z=lr[Q.C[(Q.l<<4)+(Ii=dt&Q.y)]>>>2]+Pn(wn(Q.A,dt,Q.J),Q.l>=7,On,St),ci(Q.a[1]),Xe=(Xn=lr[2048-Q.C[(Q.l<<4)+Ii]>>>2])+lr[2048-Q.bb[Q.l]>>>2],On==St&&(bt=Xe+(function(ln,qn,Tn){return lr[ln.hb[qn]>>>2]+lr[ln._[(qn<<4)+Tn]>>>2]})(Q,Q.l,Ii),Q.a[1].z>bt&&(Q.a[1].z=bt,(function(ln){ln.j=0,ln.t=0})(Q.a[1]))),2>(Ut=Wt>=Q.Q[ft]?Wt:Q.Q[ft]))return Q.mb=Q.a[1].j,1;Q.a[1].r=0,Q.a[0].bc=Q.x[0],Q.a[0].ac=Q.x[1],Q.a[0].dc=Q.x[2],Q.a[0].lc=Q.x[3],Gt=Ut;do Q.a[Gt--].z=268435455;while(Gt>=2);for(Nt=0;4>Nt;++Nt)if(!(2>(je=Q.Q[Nt]))){L=Xe+Ye(Q,Nt,Q.l,Ii);do Ge=L+Lt(Q.i,je-2,Ii),(Wn=Q.a[je]).z>Ge&&(Wn.z=Ge,Wn.r=0,Wn.j=Nt,Wn.t=0);while(--je>=2)}if(Ti=Xn+lr[Q.bb[Q.l]>>>2],Wt>=(Gt=Q.Q[0]>=2?Q.Q[0]+1:2)){for(li=0;Gt>Q.m[li];)li+=2;for(;Ge=Ti+xt(Q,It=Q.m[li+1],Gt,Ii),(Wn=Q.a[Gt]).z>Ge&&(Wn.z=Ge,Wn.r=0,Wn.j=It+4,Wn.t=0),Gt!=Q.m[li]||(li+=2)!=Vr;++Gt);}for(Be=0;;){if(++Be==Ut)return ge(Q,Be);if(Zn=He(Q),Vr=Q.D,Zn>=Q.n)return Q.vb=Zn,Q.N=1,ge(Q,Be);if(++dt,hi=Q.a[Be].r,Q.a[Be].t?(--hi,Q.a[Be].Ac?(Pt=Q.a[Q.a[Be].r2].Hc,Pt=4>Q.a[Be].j2?7>Pt?8:11:7>Pt?7:10):Pt=Q.a[hi].Hc,Pt=nt(Pt)):Pt=Q.a[hi].Hc,hi==Be-1?Pt=Q.a[Be].j?nt(Pt):7>Pt?9:11:(Q.a[Be].t&&Q.a[Be].Ac?(hi=Q.a[Be].r2,Ji=Q.a[Be].j2,Pt=7>Pt?8:11):Pt=4>(Ji=Q.a[Be].j)?7>Pt?8:11:7>Pt?7:10,Wr=Q.a[hi],4>Ji?Ji?Ji==1?(Q.x[0]=Wr.ac,Q.x[1]=Wr.bc,Q.x[2]=Wr.dc,Q.x[3]=Wr.lc):Ji==2?(Q.x[0]=Wr.dc,Q.x[1]=Wr.bc,Q.x[2]=Wr.ac,Q.x[3]=Wr.lc):(Q.x[0]=Wr.lc,Q.x[1]=Wr.bc,Q.x[2]=Wr.ac,Q.x[3]=Wr.dc):(Q.x[0]=Wr.bc,Q.x[1]=Wr.ac,Q.x[2]=Wr.dc,Q.x[3]=Wr.lc):(Q.x[0]=Ji-4,Q.x[1]=Wr.bc,Q.x[2]=Wr.ac,Q.x[3]=Wr.dc)),Q.a[Be].Hc=Pt,Q.a[Be].bc=Q.x[0],Q.a[Be].ac=Q.x[1],Q.a[Be].dc=Q.x[2],Q.a[Be].lc=Q.x[3],vt=Q.a[Be].z,St=q(Q.b,-1),On=q(Q.b,-Q.x[0]-1-1),Te=vt+lr[Q.C[(Pt<<4)+(Ii=dt&Q.y)]>>>2]+Pn(wn(Q.A,dt,q(Q.b,-2)),Pt>=7,On,St),Sr=0,(gr=Q.a[Be+1]).z>Te&&(gr.z=Te,gr.r=Be,gr.j=-1,gr.t=0,Sr=1),Xe=(Xn=vt+lr[2048-Q.C[(Pt<<4)+Ii]>>>2])+lr[2048-Q.bb[Pt]>>>2],On!=St||Be>gr.r&&!gr.j||gr.z>=(bt=Xe+(lr[Q.hb[Pt]>>>2]+lr[Q._[(Pt<<4)+Ii]>>>2]))&&(gr.z=bt,gr.r=Be,gr.j=0,gr.t=0,Sr=1),!(2>(eo=_i=(_i=G(Q.b)+1)>4095-Be?4095-Be:_i))){if(eo>Q.n&&(eo=Q.n),!Sr&&On!=St&&($t=Math.min(_i-1,Q.n),(Cn=k(Q.b,0,Q.x[0],$t))>=2)){for(Vt=nt(Pt),ir=Te+lr[2048-Q.C[(Vt<<4)+(ie=dt+1&Q.y)]>>>2]+lr[2048-Q.bb[Vt]>>>2],di=Be+1+Cn;di>Ut;)Q.a[++Ut].z=268435455;Ge=ir+(Lt(Q.i,Cn-2,ie)+Ye(Q,0,Vt,ie)),(Wn=Q.a[di]).z>Ge&&(Wn.z=Ge,Wn.r=Be+1,Wn.j=0,Wn.t=1,Wn.Ac=0)}for(Rt=2,ue=0;4>ue;++ue)if(!(2>(en=k(Q.b,-1,Q.x[ue],eo)))){Un=en;do{for(;Be+en>Ut;)Q.a[++Ut].z=268435455;Ge=Xe+(Lt(Q.i,en-2,Ii)+Ye(Q,ue,Pt,Ii)),(Wn=Q.a[Be+en]).z>Ge&&(Wn.z=Ge,Wn.r=Be,Wn.j=ue,Wn.t=0)}while(--en>=2);if(en=Un,ue||(Rt=en+1),_i>en&&($t=Math.min(_i-1-en,Q.n),(Cn=k(Q.b,en,Q.x[ue],$t))>=2)){for(Vt=7>Pt?8:11,ie=dt+en&Q.y,$e=Xe+(Lt(Q.i,en-2,Ii)+Ye(Q,ue,Pt,Ii))+lr[Q.C[(Vt<<4)+ie]>>>2]+Pn(wn(Q.A,dt+en,q(Q.b,en-1-1)),1,q(Q.b,en-1-(Q.x[ue]+1)),q(Q.b,en-1)),Vt=nt(Vt),ir=$e+lr[2048-Q.C[(Vt<<4)+(ie=dt+en+1&Q.y)]>>>2]+lr[2048-Q.bb[Vt]>>>2],di=en+1+Cn;Be+di>Ut;)Q.a[++Ut].z=268435455;Ge=ir+(Lt(Q.i,Cn-2,ie)+Ye(Q,0,Vt,ie)),(Wn=Q.a[Be+di]).z>Ge&&(Wn.z=Ge,Wn.r=Be+en+1,Wn.j=0,Wn.t=1,Wn.Ac=1,Wn.r2=Be,Wn.j2=ue)}}if(Zn>eo){for(Zn=eo,Vr=0;Zn>Q.m[Vr];Vr+=2);Q.m[Vr]=Zn,Vr+=2}if(Zn>=Rt){for(Ti=Xn+lr[Q.bb[Pt]>>>2];Be+Zn>Ut;)Q.a[++Ut].z=268435455;for(li=0;Rt>Q.m[li];)li+=2;for(en=Rt;;++en)if(Ge=Ti+xt(Q,mt=Q.m[li+1],en,Ii),(Wn=Q.a[Be+en]).z>Ge&&(Wn.z=Ge,Wn.r=Be,Wn.j=mt+4,Wn.t=0),en==Q.m[li]){if(_i>en&&($t=Math.min(_i-1-en,Q.n),(Cn=k(Q.b,en,mt,$t))>=2)){for($e=Ge+lr[Q.C[((Vt=7>Pt?7:10)<<4)+(ie=dt+en&Q.y)]>>>2]+Pn(wn(Q.A,dt+en,q(Q.b,en-1-1)),1,q(Q.b,en-(mt+1)-1),q(Q.b,en-1)),Vt=nt(Vt),ir=$e+lr[2048-Q.C[(Vt<<4)+(ie=dt+en+1&Q.y)]>>>2]+lr[2048-Q.bb[Vt]>>>2],di=en+1+Cn;Be+di>Ut;)Q.a[++Ut].z=268435455;Ge=ir+(Lt(Q.i,Cn-2,ie)+Ye(Q,0,Vt,ie)),(Wn=Q.a[Be+di]).z>Ge&&(Wn.z=Ge,Wn.r=Be+en+1,Wn.j=0,Wn.t=1,Wn.Ac=1,Wn.r2=Be,Wn.j2=mt+4)}if((li+=2)==Vr)break}}}}}function xt(Q,dt,Be,Te){var $e=B(Be);return(128>dt?Q.lb[128*$e+dt]:Q.P[($e<<6)+(function(Ge){return 131072>Ge?mr[Ge>>6]+12:134217728>Ge?mr[Ge>>16]+32:mr[Ge>>26]+52})(dt)]+Q.nc[15&dt])+Lt(Q.$,Be-2,Te)}function Ye(Q,dt,Be,Te){var $e;return dt?($e=lr[2048-Q.hb[Be]>>>2],dt==1?$e+=lr[Q.Ub[Be]>>>2]:($e+=lr[2048-Q.Ub[Be]>>>2],$e+=oi(Q.vc[Be],dt-2))):($e=lr[Q.hb[Be]>>>2],$e+=lr[2048-Q._[(Be<<4)+Te]>>>2]),$e}function J(Q,dt){dt>0&&((function(Be,Te){var $e,Ge,mt,vt,St,It,Nt,Gt,Ut,Wt,an,en,Cn,Un,On;do{if(Be.h>=Be.o+Be.ob)Wt=Be.ob;else if(Be.xb>(Wt=Be.h-Be.o)){Ie(Be);continue}for(an=Be.o>Be.p?Be.o-Be.p:0,Ge=Be.f+Be.o,Be.qb?(Be.ub[1023&(On=Vn[255&Be.c[Ge]]^255&Be.c[Ge+1])]=Be.o,Be.ub[1024+(65535&(On^=(255&Be.c[Ge+2])<<8))]=Be.o,It=(On^Vn[255&Be.c[Ge+3]]<<5)&Be.Ec):It=255&Be.c[Ge]^(255&Be.c[Ge+1])<<8,mt=Be.ub[Be.R+It],Be.ub[Be.R+It]=Be.o,Cn=1+(Be.k<<1),Un=Be.k<<1,Gt=Ut=Be.w,$e=Be.Fc;;){if(an>=mt||$e--==0){Be.L[Cn]=Be.L[Un]=0;break}if(vt=(Be.k>=(St=Be.o-mt)?Be.k-St:Be.k-St+Be.p)<<1,Be.c[(en=Be.f+mt)+(Nt=Ut>Gt?Gt:Ut)]==Be.c[Ge+Nt]){for(;++Nt!=Wt&&Be.c[en+Nt]==Be.c[Ge+Nt];);if(Nt==Wt){Be.L[Un]=Be.L[vt],Be.L[Cn]=Be.L[vt+1];break}}(255&Be.c[Ge+Nt])>(255&Be.c[en+Nt])?(Be.L[Un]=mt,mt=Be.L[Un=vt+1],Ut=Nt):(Be.L[Cn]=mt,mt=Be.L[Cn=vt],Gt=Nt)}Ie(Be)}while(--Te!=0)})(Q.b,dt),Q.s+=dt)}function He(Q){var dt=0;return Q.D=(function(Be,Te){var $e,Ge,mt,vt,St,It,Nt,Gt,Ut,Wt,an,en,Cn,Un,On,Xn,Zn,Sr,gr,ir,Ti;if(Be.h>=Be.o+Be.ob)Un=Be.ob;else if(Be.xb>(Un=Be.h-Be.o))return Ie(Be),0;for(Zn=0,On=Be.o>Be.p?Be.o-Be.p:0,Ge=Be.f+Be.o,Xn=1,Gt=0,Ut=0,Be.qb?(Gt=1023&(Ti=Vn[255&Be.c[Ge]]^255&Be.c[Ge+1]),Ut=65535&(Ti^=(255&Be.c[Ge+2])<<8),Wt=(Ti^Vn[255&Be.c[Ge+3]]<<5)&Be.Ec):Wt=255&Be.c[Ge]^(255&Be.c[Ge+1])<<8,mt=Be.ub[Be.R+Wt]||0,Be.qb&&(vt=Be.ub[Gt]||0,St=Be.ub[1024+Ut]||0,Be.ub[Gt]=Be.o,Be.ub[1024+Ut]=Be.o,vt>On&&Be.c[Be.f+vt]==Be.c[Ge]&&(Te[Zn++]=Xn=2,Te[Zn++]=Be.o-vt-1),St>On&&Be.c[Be.f+St]==Be.c[Ge]&&(St==vt&&(Zn-=2),Te[Zn++]=Xn=3,Te[Zn++]=Be.o-St-1,vt=St),Zn!=0&&vt==mt&&(Zn-=2,Xn=1)),Be.ub[Be.R+Wt]=Be.o,gr=1+(Be.k<<1),ir=Be.k<<1,en=Cn=Be.w,Be.w!=0&&mt>On&&Be.c[Be.f+mt+Be.w]!=Be.c[Ge+Be.w]&&(Te[Zn++]=Xn=Be.w,Te[Zn++]=Be.o-mt-1),$e=Be.Fc;;){if(On>=mt||$e--==0){Be.L[gr]=Be.L[ir]=0;break}if(It=(Be.k>=(Nt=Be.o-mt)?Be.k-Nt:Be.k-Nt+Be.p)<<1,Be.c[(Sr=Be.f+mt)+(an=Cn>en?en:Cn)]==Be.c[Ge+an]){for(;++an!=Un&&Be.c[Sr+an]==Be.c[Ge+an];);if(an>Xn&&(Te[Zn++]=Xn=an,Te[Zn++]=Nt-1,an==Un)){Be.L[ir]=Be.L[It],Be.L[gr]=Be.L[It+1];break}}(255&Be.c[Ge+an])>(255&Be.c[Sr+an])?(Be.L[ir]=mt,mt=Be.L[ir=It+1],Cn=an):(Be.L[gr]=mt,mt=Be.L[gr=It],en=an)}return Ie(Be),Zn})(Q.b,Q.m),Q.D>0&&(dt=Q.m[Q.D-2])==Q.n&&(dt+=k(Q.b,dt-1,Q.m[Q.D-1],273-dt)),++Q.s,dt}function Le(Q){Q.b&&Q.W&&(Q.b.cc=null,Q.W=0)}function Ue(Q){return 2048>Q?mr[Q]:2097152>Q?mr[Q>>10]+20:mr[Q>>20]+40}function _t(Q,dt){sr(Q.db);for(var Be=0;dt>Be;++Be)sr(Q.Vb[Be].G),sr(Q.Wb[Be].G);sr(Q.ic.G)}function st(Q,dt,Be,Te,$e){var Ge,mt,vt,St,It;for(Ge=lr[Q.db[0]>>>2],vt=(mt=lr[2048-Q.db[0]>>>2])+lr[Q.db[1]>>>2],St=mt+lr[2048-Q.db[1]>>>2],It=0,It=0;8>It;++It){if(It>=Be)return;Te[$e+It]=Ge+$n(Q.Vb[dt],It)}for(;16>It;++It){if(It>=Be)return;Te[$e+It]=vt+$n(Q.Wb[dt],It-8)}for(;Be>It;++It)Te[$e+It]=St+$n(Q.ic,It-8-8)}function Dt(Q,dt,Be,Te){(function($e,Ge,mt,vt){8>mt?(kn(Ge,$e.db,0,0),_r($e.Vb[vt],Ge,mt)):(mt-=8,kn(Ge,$e.db,0,1),8>mt?(kn(Ge,$e.db,1,0),_r($e.Wb[vt],Ge,mt)):(kn(Ge,$e.db,1,1),_r($e.ic,Ge,mt-8)))})(Q,dt,Be,Te),--Q.sc[Te]==0&&(st(Q,Te,Q.rb,Q.Cc,272*Te),Q.sc[Te]=Q.rb)}function qt(Q){return(function(dt){dt.db=Z(2),dt.Vb=Z(16),dt.Wb=Z(16),dt.ic=Nn({},8);for(var Be=0;16>Be;++Be)dt.Vb[Be]=Nn({},3),dt.Wb[Be]=Nn({},3)})(Q),Q.Cc=[],Q.sc=[],Q}function Lt(Q,dt,Be){return Q.Cc[272*Be+dt]}function ut(Q,dt){for(var Be=0;dt>Be;++Be)st(Q,Be,Q.rb,Q.Cc,272*Be),Q.sc[Be]=Q.rb}function Yt(Q,dt,Be){var Te,$e;if(Q.V==null||Q.u!=Be||Q.I!=dt)for(Q.I=dt,Q.qc=(1<<dt)-1,Q.u=Be,Q.V=Z($e=1<<Q.u+Q.I),Te=0;$e>Te;++Te)Q.V[Te]=Mn({})}function wn(Q,dt,Be){return Q.V[((dt&Q.qc)<<Q.u)+((255&Be)>>>8-Q.u)]}function Rn(Q,dt,Be){var Te,$e,Ge=1;for($e=7;$e>=0;--$e)kn(dt,Q.tb,Ge,Te=Be>>$e&1),Ge=Ge<<1|Te}function jn(Q,dt,Be,Te){var $e,Ge,mt,vt,St=1,It=1;for(Ge=7;Ge>=0;--Ge)$e=Te>>Ge&1,vt=It,St&&(vt+=1+(mt=Be>>Ge&1)<<8,St=mt==$e),kn(dt,Q.tb,vt,$e),It=It<<1|$e}function Mn(Q){return Q.tb=Z(768),Q}function Pn(Q,dt,Be,Te){var $e,Ge,mt=1,vt=7,St=0;if(dt){for(;vt>=0;--vt)if(St+=oi(Q.tb[(1+(Ge=Be>>vt&1)<<8)+mt],$e=Te>>vt&1),mt=mt<<1|$e,Ge!=$e){--vt;break}}for(;vt>=0;--vt)St+=oi(Q.tb[mt],$e=Te>>vt&1),mt=mt<<1|$e;return St}function ci(Q){Q.j=-1,Q.t=0}function Nr(Q,dt){return Q.F=dt,Q.G=Z(1<<dt),Q}function nr(Q,dt){var Be,Te=1;for(Be=Q.F;Be!=0;--Be)Te=(Te<<1)+Ar(dt,Q.G,Te);return Te-(1<<Q.F)}function Nn(Q,dt){return Q.F=dt,Q.G=Z(1<<dt),Q}function _r(Q,dt,Be){var Te,$e,Ge=1;for($e=Q.F;$e!=0;)--$e,kn(dt,Q.G,Ge,Te=Be>>>$e&1),Ge=Ge<<1|Te}function $n(Q,dt){var Be,Te,$e=1,Ge=0;for(Te=Q.F;Te!=0;)--Te,Ge+=oi(Q.G[$e],Be=dt>>>Te&1),$e=($e<<1)+Be;return Ge}function Dr(Q,dt,Be){var Te,$e,Ge=1;for($e=0;Q.F>$e;++$e)kn(dt,Q.G,Ge,Te=1&Be),Ge=Ge<<1|Te,Be>>=1}function Gr(Q,dt){var Be,Te,$e=1,Ge=0;for(Te=Q.F;Te!=0;--Te)Be=1&dt,dt>>>=1,Ge+=oi(Q.G[$e],Be),$e=$e<<1|Be;return Ge}function Or(Q,dt,Be,Te,$e){var Ge,mt,vt=1;for(mt=0;Te>mt;++mt)kn(Be,Q,dt+vt,Ge=1&$e),vt=vt<<1|Ge,$e>>=1}function mi(Q,dt,Be,Te){var $e,Ge,mt=1,vt=0;for(Ge=Be;Ge!=0;--Ge)$e=1&Te,Te>>>=1,vt+=lr[(2047&(Q[dt+mt]-$e^-$e))>>>2],mt=mt<<1|$e;return vt}function Ar(Q,dt,Be){var Te,$e=dt[Be];return(-2147483648^(Te=(Q.E>>>11)*$e))>(-2147483648^Q.Bb)?(Q.E=Te,dt[Be]=$e+(2048-$e>>>5)<<16>>16,-16777216&Q.E||(Q.Bb=Q.Bb<<8|re(Q.Ab),Q.E<<=8),0):(Q.E-=Te,Q.Bb-=Te,dt[Be]=$e-($e>>>5)<<16>>16,-16777216&Q.E||(Q.Bb=Q.Bb<<8|re(Q.Ab),Q.E<<=8),1)}function sr(Q){for(var dt=Q.length-1;dt>=0;--dt)Q[dt]=1024}function kn(Q,dt,Be,Te){var $e,Ge=dt[Be];$e=(Q.E>>>11)*Ge,Te?(Q.xc=I(Q.xc,P(Ne($e),[4294967295,0])),Q.E-=$e,dt[Be]=Ge-(Ge>>>5)<<16>>16):(Q.E=$e,dt[Be]=Ge+(2048-Ge>>>5)<<16>>16),-16777216&Q.E||(Q.E<<=8,ar(Q))}function Jn(Q,dt,Be){for(var Te=Be-1;Te>=0;--Te)Q.E>>>=1,(dt>>>Te&1)==1&&(Q.xc=I(Q.xc,Ne(Q.E))),-16777216&Q.E||(Q.E<<=8,ar(Q))}function Mr(Q){return I(I(Ne(Q.Jb),Q.mc),[4,0])}function ar(Q){var dt,Be=tt((function(Te,$e){var Ge;return Ge=oe(Te,$e&=63),0>Te[1]&&(Ge=I(Ge,ne([2,0],63-$e))),Ge})(Q.xc,32));if(Be!=0||Pe(Q.xc,[4278190080,0])<0){Q.mc=I(Q.mc,Ne(Q.Jb)),dt=Q.Oc;do T(Q.Ab,dt+Be),dt=255;while(--Q.Jb!=0);Q.Oc=tt(Q.xc)>>>24}++Q.Jb,Q.xc=ne(P(Q.xc,[16777215,0]),8)}function oi(Q,dt){return lr[(2047&(Q-dt^-dt))>>>2]}function gi(Q){for(var dt,Be,Te,$e=0,Ge=0,mt=Q.length,vt=[],St=[];mt>$e;++$e,++Ge){if(128&(dt=255&Q[$e]))if((224&dt)==192){if($e+1>=mt||(192&(Be=255&Q[++$e]))!=128)return Q;St[Ge]=(31&dt)<<6|63&Be}else{if((240&dt)!=224||$e+2>=mt||(192&(Be=255&Q[++$e]))!=128||(192&(Te=255&Q[++$e]))!=128)return Q;St[Ge]=(15&dt)<<12|(63&Be)<<6|63&Te}else{if(!dt)return Q;St[Ge]=dt}Ge==16383&&(vt.push(String.fromCharCode.apply(String,St)),Ge=-1)}return Ge>0&&(St.length=Ge,vt.push(String.fromCharCode.apply(String,St))),vt.join("")}function go(Q){var dt,Be,Te,$e=[],Ge=0,mt=Q.length;if(typeof Q=="object")return Q;for((function(vt,St,It,Nt,Gt){var Ut;for(Ut=St;It>Ut;++Ut)Nt[Gt++]=vt.charCodeAt(Ut)})(Q,0,mt,$e,0),Te=0;mt>Te;++Te)(dt=$e[Te])>=1&&127>=dt?++Ge:Ge+=!dt||dt>=128&&2047>=dt?2:3;for(Be=[],Ge=0,Te=0;mt>Te;++Te)(dt=$e[Te])>=1&&127>=dt?Be[Ge++]=dt<<24>>24:!dt||dt>=128&&2047>=dt?(Be[Ge++]=(192|dt>>6&31)<<24>>24,Be[Ge++]=(128|63&dt)<<24>>24):(Be[Ge++]=(224|dt>>12&15)<<24>>24,Be[Ge++]=(128|dt>>6&63)<<24>>24,Be[Ge++]=(128|63&dt)<<24>>24);return Be}function xi(Q){return Q[1]+Q[0]}var ui=1,no=2,Ui=3,vi=typeof setImmediate=="function"?setImmediate:setTimeout,Br=4294967296,ur=[4294967295,-Br],Qr=[0,-9223372036854776e3],qr=[0,0],Bi=[1,0],Vn=(function(){var Q,dt,Be,Te=[];for(Q=0;256>Q;++Q){for(Be=Q,dt=0;8>dt;++dt)1&Be?Be=Be>>>1^-306674912:Be>>>=1;Te[Q]=Be}return Te})(),mr=(function(){var Q,dt,Be,Te=2,$e=[0,1];for(Be=2;22>Be;++Be)for(dt=1<<(Be>>1)-1,Q=0;dt>Q;++Q,++Te)$e[Te]=Be<<24>>24;return $e})(),lr=(function(){var Q,dt,Be,Te=[];for(dt=8;dt>=0;--dt)for(Q=1<<9-dt,Be=1<<9-dt-1;Q>Be;++Be)Te[Be]=(dt<<6)+(Q-Be<<6>>>9-dt-1);return Te})(),ti=(function(){var Q=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(dt){return Q[dt-1]||Q[6]}})();return typeof onmessage>"u"||typeof window<"u"&&window.document!==void 0||(onmessage=function(Q){Q&&Q.gc&&(Q.gc.action==no?ot.decompress(Q.gc.gc,Q.gc.cbn):Q.gc.action==ui&&ot.compress(Q.gc.gc,Q.gc.Rc,Q.gc.cbn))}),{compress:function(Q,dt,Be,Te){var $e,Ge,mt={},vt=Be===void 0&&Te===void 0;if(typeof Be!="function"&&(Ge=Be,Be=Te=0),Te=Te||function(St){return Ge!==void 0?Re(St,Ge):void 0},Be=Be||function(St,It){return Ge!==void 0?postMessage({action:ui,cbn:Ge,result:St,error:It}):void 0},vt){for(mt.c=R({},go(Q),ti(dt));he(mt.c.yb););return F(mt.c.Nb)}try{mt.c=R({},go(Q),ti(dt)),Te(0)}catch(St){return Be(null,St)}vi(function St(){try{for(var It,Nt=new Date().getTime();he(mt.c.yb);)if($e=xi(mt.c.yb.Pb)/xi(mt.c.Tb),new Date().getTime()-Nt>200)return Te($e),vi(St,0),0;Te(1),It=F(mt.c.Nb),vi(Be.bind(null,It),0)}catch(Gt){Be(null,Gt)}},0)},decompress:function(Q,dt,Be){var Te,$e,Ge,mt,vt={},St=dt===void 0&&Be===void 0;if(typeof dt!="function"&&($e=dt,dt=Be=0),Be=Be||function(It){return $e!==void 0?Re(Ge?It:-1,$e):void 0},dt=dt||function(It,Nt){return $e!==void 0?postMessage({action:no,cbn:$e,result:It,error:Nt}):void 0},St){for(vt.d=ae({},Q);he(vt.d.yb););return gi(F(vt.d.Nb))}try{vt.d=ae({},Q),mt=xi(vt.d.Tb),Ge=mt>-1,Be(0)}catch(It){return dt(null,It)}vi(function It(){try{for(var Nt,Gt=0,Ut=new Date().getTime();he(vt.d.yb);)if(++Gt%1e3==0&&new Date().getTime()-Ut>200)return Ge&&(Te=xi(vt.d.yb.Z.g)/mt,Be(Te)),vi(It,0),0;Be(1),Nt=gi(F(vt.d.Nb)),vi(dt.bind(null,Nt),0)}catch(Wt){dt(null,Wt)}},0)}}})();this.G=ot},8866:function(ot,Re,Z){Z.d(Re,{AA:function(){return K},EK:function(){return Y},FP:function(){return ne},M$:function(){return F},OY:function(){return fe},P1:function(){return j},QS:function(){return Ve},Rl:function(){return Ae},UY:function(){return B},VJ:function(){return tt},VU:function(){return Ie},Wk:function(){return xe},aw:function(){return ae},d1:function(){return re},dO:function(){return q},fT:function(){return R},fU:function(){return De},gU:function(){return E},h2:function(){return G},iq:function(){return qe},jy:function(){return T},kP:function(){return _},l3:function(){return Ne},lA:function(){return be},pl:function(){return M},pt:function(){return V},qC:function(){return k},rA:function(){return oe},sb:function(){return Qe},sg:function(){return he},v5:function(){return pe},yo:function(){return nt},zQ:function(){return w}});var I=Z(7202),P=Z(8627),Pe=Z(4872),ke=Z(4908),ce=function(it,wt,Ee){if(arguments.length===2)for(var Oe,rt=0,me=wt.length;rt<me;rt++)!Oe&&rt in wt||(Oe||(Oe=Array.prototype.slice.call(wt,0,rt)),Oe[rt]=wt[rt]);return it.concat(Oe||Array.prototype.slice.call(wt))},Ne=Promise,tt=document;function Qe(it,wt,Ee){Ee===void 0&&(Ee=!0);var Oe=tt.createElement("video");return it&&(Oe.style.width=it+"px;"),wt&&(Oe.style.height=wt+"px;"),Oe.setAttribute("muted",""),Oe.muted=!0,Ee&&(Oe.setAttribute("autoplay",""),Oe.autoplay=!0),Oe.setAttribute("playsinline",""),Oe.setAttribute("webkit-playsinline",""),Oe}function ne(it,wt){var Ee=tt.createElement("canvas");return Ee.width=it,Ee.height=wt,Ee}function oe(it,wt,Ee){Ee===void 0&&(Ee=""),it.info("".concat(wt," call ").concat(Ee))}function fe(it,wt,Ee){Ee===void 0&&(Ee=""),it.info("".concat(wt," end ").concat(Ee))}function Y(it,wt,Ee){Ee===void 0&&(Ee=""),it.info("".concat(wt," success ").concat(Ee))}function re(it,wt){var Ee=(function(Oe){var rt=Oe.reduce(function(me,Se,ge){var ve="".concat(Se," module");return ge==0?ve:ge==Oe.length-1?"".concat(me," and ").concat(ve):"".concat(me,", ").concat(ve)},"");return"should install ".concat(rt)})(it);return console.error(Ee),{errorCode:wt||P.UZK.code,extendedData:Ee}}function K(it,wt){return new Ne(function(Ee,Oe){Oe(re(it,wt))})}function M(it){return I.A.isLong(it)?it.toNumber():0}function F(it,wt){for(var Ee in it){if(I.A.isLong(it[Ee])||(0,Pe.JO)(it[Ee]||(0,Pe.G0)(it[Ee])))return;Array.isArray(it[Ee])?it[Ee].forEach(function(Oe,rt){F(Oe)}):(0,Pe.w)(it[Ee])?F(it[Ee]):it.hasOwnProperty(Ee)||((0,Pe.Cs)(it[Ee])&&(it[Ee]=0),(0,Pe.QP)(it[Ee])&&(it[Ee]=""))}}function T(it){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(it)&&/^[^:/]*$/g.test(it)}function _(it){return/^([0-9a-zA-Z-_])+$/.test(it)}function E(it){return!!(it.startsWith("rtmp://")||it.startsWith("avertp://")||it.startsWith("https://")&&it.endsWith(".flv")||it.startsWith("https://")&&it.endsWith(".m3u8"))}function w(it,wt){return wt==0?(0,Pe.Cs)(it)&&it%1==0&&it>=0:(0,Pe.Cs)(it)&&it%1==0&&it>0}var R="room not exist",V="device is not found",ae="stream is not from zego",q="input param error",k="local stream wrong",G="no preview",xe="publish stream no found",Ae="network is broken";function De(it,wt,Ee,Oe,rt,me,Se){return Se===void 0&&(Se=!1),it.createSpan(wt,{key:rt,bak_key:me,par:Ee},{key:Oe,par:Ee},Oe,Se)}function Ie(it,wt,Ee){for(var Oe in Ee)ke.tH.includes(Oe)&&it>=1&&wt.setAttribute(Oe,Ee[Oe])}function be(it,wt,Ee){wt&&it.setAttributes(wt),it.end(Ee)}function qe(it){return JSON.stringify(it)}function Ve(it){return JSON.parse(it)}function pe(it,wt){for(var Ee=[],Oe=2;Oe<arguments.length;Oe++)Ee[Oe-2]=arguments[Oe];return setTimeout.apply(void 0,ce([it,wt],Ee,!1))}function j(it){return clearTimeout(it)}var B=function(){return new Promise(function(it,wt){it(Math.random())})};function nt(it,wt){return it===void 0&&(it=0),wt||(wt="_zegom{codecid}"),it===0?"_zego264":wt.replace("{codecid}",it+"")}function he(it,wt){var Ee;return wt===void 0&&(wt=100),function(){for(var Oe=[],rt=0;rt<arguments.length;rt++)Oe[rt]=arguments[rt];var me=this;clearTimeout(Ee),Ee=window.setTimeout(function(){it.apply(me,Oe)},wt)}}},8899:function(ot,Re,Z){var I,P,Pe,ke;Z.d(Re,{UF:function(){return Pe},eI:function(){return I},ju:function(){return ke},kf:function(){return P}}),(function(ce){ce[ce.Off=0]="Off",ce[ce.TurningOn=1]="TurningOn",ce[ce.On=2]="On"})(I||(I={})),(function(ce){ce[ce.World=0]="World",ce[ce.Team=1]="Team",ce[ce.SecretTeam=2]="SecretTeam"})(P||(P={})),(function(ce){ce[ce.All=0]="All",ce[ce.World=1]="World",ce[ce.Team=2]="Team"})(Pe||(Pe={})),(function(ce){ce[ce.All=0]="All",ce[ce.World=1]="World",ce[ce.Team=2]="Team"})(ke||(ke={}))},9021:function(ot,Re,Z){var I;ot.exports=(I=I||(function(P,Pe){var ke;if(typeof window<"u"&&window.crypto&&(ke=window.crypto),typeof self<"u"&&self.crypto&&(ke=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(ke=globalThis.crypto),!ke&&typeof window<"u"&&window.msCrypto&&(ke=window.msCrypto),!ke&&Z.g!==void 0&&Z.g.crypto&&(ke=Z.g.crypto),!ke)try{ke=Z(477)}catch{}var ce=function(){if(ke){if(typeof ke.getRandomValues=="function")try{return ke.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof ke.randomBytes=="function")try{return ke.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},Ne=Object.create||(function(){function T(){}return function(_){var E;return T.prototype=_,E=new T,T.prototype=null,E}})(),tt={},Qe=tt.lib={},ne=Qe.Base={extend:function(T){var _=Ne(this);return T&&_.mixIn(T),_.hasOwnProperty("init")&&this.init!==_.init||(_.init=function(){_.$super.init.apply(this,arguments)}),_.init.prototype=_,_.$super=this,_},create:function(){var T=this.extend();return T.init.apply(T,arguments),T},init:function(){},mixIn:function(T){for(var _ in T)T.hasOwnProperty(_)&&(this[_]=T[_]);T.hasOwnProperty("toString")&&(this.toString=T.toString)},clone:function(){return this.init.prototype.extend(this)}},oe=Qe.WordArray=ne.extend({init:function(T,_){T=this.words=T||[],this.sigBytes=_!=Pe?_:4*T.length},toString:function(T){return(T||Y).stringify(this)},concat:function(T){var _=this.words,E=T.words,w=this.sigBytes,R=T.sigBytes;if(this.clamp(),w%4)for(var V=0;V<R;V++)_[w+V>>>2]|=(E[V>>>2]>>>24-V%4*8&255)<<24-(w+V)%4*8;else for(var ae=0;ae<R;ae+=4)_[w+ae>>>2]=E[ae>>>2];return this.sigBytes+=R,this},clamp:function(){var T=this.words,_=this.sigBytes;T[_>>>2]&=4294967295<<32-_%4*8,T.length=P.ceil(_/4)},clone:function(){var T=ne.clone.call(this);return T.words=this.words.slice(0),T},random:function(T){for(var _=[],E=0;E<T;E+=4)_.push(ce());return new oe.init(_,T)}}),fe=tt.enc={},Y=fe.Hex={stringify:function(T){for(var _=T.words,E=T.sigBytes,w=[],R=0;R<E;R++){var V=_[R>>>2]>>>24-R%4*8&255;w.push((V>>>4).toString(16)),w.push((15&V).toString(16))}return w.join("")},parse:function(T){for(var _=T.length,E=[],w=0;w<_;w+=2)E[w>>>3]|=parseInt(T.substr(w,2),16)<<24-w%8*4;return new oe.init(E,_/2)}},re=fe.Latin1={stringify:function(T){for(var _=T.words,E=T.sigBytes,w=[],R=0;R<E;R++)w.push(String.fromCharCode(_[R>>>2]>>>24-R%4*8&255));return w.join("")},parse:function(T){for(var _=T.length,E=[],w=0;w<_;w++)E[w>>>2]|=(255&T.charCodeAt(w))<<24-w%4*8;return new oe.init(E,_)}},K=fe.Utf8={stringify:function(T){try{return decodeURIComponent(escape(re.stringify(T)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(T){return re.parse(unescape(encodeURIComponent(T)))}},M=Qe.BufferedBlockAlgorithm=ne.extend({reset:function(){this._data=new oe.init,this._nDataBytes=0},_append:function(T){typeof T=="string"&&(T=K.parse(T)),this._data.concat(T),this._nDataBytes+=T.sigBytes},_process:function(T){var _,E=this._data,w=E.words,R=E.sigBytes,V=this.blockSize,ae=R/(4*V),q=(ae=T?P.ceil(ae):P.max((0|ae)-this._minBufferSize,0))*V,k=P.min(4*q,R);if(q){for(var G=0;G<q;G+=V)this._doProcessBlock(w,G);_=w.splice(0,q),E.sigBytes-=k}return new oe.init(_,k)},clone:function(){var T=ne.clone.call(this);return T._data=this._data.clone(),T},_minBufferSize:0}),F=(Qe.Hasher=M.extend({cfg:ne.extend(),init:function(T){this.cfg=this.cfg.extend(T),this.reset()},reset:function(){M.reset.call(this),this._doReset()},update:function(T){return this._append(T),this._process(),this},finalize:function(T){return T&&this._append(T),this._doFinalize()},blockSize:16,_createHelper:function(T){return function(_,E){return new T.init(E).finalize(_)}},_createHmacHelper:function(T){return function(_,E){return new F.HMAC.init(T,E).finalize(_)}}}),tt.algo={});return tt})(Math),I)},9506:function(ot,Re,Z){var I,P,Pe,ke,ce,Ne,tt;ot.exports=(tt=Z(9021),Z(5471),Z(1025),ke=(P=(I=tt).lib).WordArray,Ne=(ce=I.algo).EvpKDF=(Pe=P.Base).extend({cfg:Pe.extend({keySize:4,hasher:ce.MD5,iterations:1}),init:function(Qe){this.cfg=this.cfg.extend(Qe)},compute:function(Qe,ne){for(var oe,fe=this.cfg,Y=fe.hasher.create(),re=ke.create(),K=re.words,M=fe.keySize,F=fe.iterations;K.length<M;){oe&&Y.update(oe),oe=Y.update(Qe).finalize(ne),Y.reset();for(var T=1;T<F;T++)oe=Y.finalize(oe),Y.reset();re.concat(oe)}return re.sigBytes=4*M,re}}),I.EvpKDF=function(Qe,ne,oe){return Ne.create(oe).compute(Qe,ne)},tt.EvpKDF)},9674:function(ot,Re,Z){Z.d(Re,{MixStream:function(){return rt}});var I=Z(8627),P={NOT_LOGIN:I.S4u,INPUT_PARAM:I.ZEp,TIMEOUT:I.Q9p,MIXER_NO_SERVICES:{code:1005e3,message:"no mix stream service"},MIXER_TASK_ID_NULL:{code:1005001,message:"mixer task is null"},MIXER_TASK_ID_TOO_LONG:{code:1005002,message:"task ID is too long"},MIXER_TASK_ID_INVALID_CHARACTER:{code:1005003,message:"task ID contains illegal characters"},MIXER_NO_OUTPUT_TARGET:{code:1005005,message:"task configuration does not specify output"},MIXER_OUTPUT_TARGET_INVALID:{code:1005006,message:"stream output target is incorrect"},MIXER_START_REQUEST_ERROR:{code:1005010,message:"start mixer task fail, possibly due to network reasons"},MIXER_STOP_REQUEST_ERROR:{code:1005011,message:"stop mixer task fail, possibly due to network reasons"},MIXER_NOT_OWNER_STOP_MIXER:{code:1005012,message:" maxed task must be stopped by the start user of the task"},MIXER_INPUTLIST_NULL:{code:1005020,message:"Mixed stream task input list is null"},MIXER_OUTPUTLIST_NULL:{code:1005021,message:"Mixed stream task output list is null"},MIXER_VIDEO_CONFIG_INVALID:{code:1005023,message:"invalid mixed stream task video configuration"},MIXER_EXCEED_MAX_INPUT_COUNT:{code:1005025,message:"more than the maximum number of input streams"},MIXER_INPUT_STREAM_NOT_EXISTS:{code:1005026,message:"Input stream does not exist"},MIXER_INPUT_PARAMETERS_ERROR:{code:1005027,message:"mix stream input parameters are wrong"},MIXER_INPUT_LABEL_TOO_LONG:{code:1005028,message:"Input stream label text is too long"},MIXER_OUTPUT_TARGET_TOO_LONG:{code:1005029,message:"Output stream target is too long"},MIXER_EXCEED_MAX_OUTPUT_COUNT:{code:1005030,message:"more than the maximum number of output streams"},MIXER_INPUT_IMAGE_URL_TOO_LONG:{code:1005034,message:"Input stream image url too long"},MIXER_INPUT_IMAGE_FORMAT_WRONG:{code:1005035,message:"Input stream image format wrong"},MIXER_INPUT_IMAGE_GET_FAIL:{code:1005036,message:"Input stream image get fail"},MIXER_AUTHENTICATION_FAILED:{code:1005050,message:"mixed stream authentication failed"},MIXER_WATERMARK_NULL:{code:1005061,mag:"input watermark is null"},MIXER_WATERMARK_PARAMETERS_ERROR:{code:1005062,message:"input watermark parameter is wrong"},MIXER_WATERMARK_URL_INVALID:{code:1005063,message:"illegal input watermark URL"},MIXER_BACKGROUND_IMAGE_URL_INVALID:{code:1005067,message:"illegal input background image URL"},MIXER_REPEAT_INPUT:{code:1005099,message:"mix stream input repeat"},MIXER_INNER_ERROR:{code:1005099,message:"mixer internal error"}},Pe=Z(9728),ke=Z(3788);const ce=Z(6994);(ke=ke.default||ke).util.Long=ce.default||ce,ke.util.Long.fromBits=ke.util.Long.fromBits||function(){return 0};for(var Ne=ke.roots,tt=ke.types?ke.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},Qe=ke.types?ke.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},ne=Object.keys(tt),oe={$:function(me){return oe[me]?oe[me].call(this):Ne[me].decode?Ne[me].decode(this,this.uint32()):oe.$.call(this,"int32")}},fe={$:function(me,Se,ge){var ve=tt[me];return ve===void 0?Ne[me].encode?(this.uint32(ge<<3|2).fork(),Ne[me].encode(Se,this).ldelim()):fe.$.call(this,"int32",Se,ge):fe[me].call(this.uint32(ge<<3|ve),Se)}},Y=0;Y<ne.length;Y++)oe[ne[Y]]=ke.Reader.prototype[ne[Y]],fe[ne[Y]]=ke.Writer.prototype[ne[Y]];(function me(Se,ge,ve,ee){for(var ze=0,Je=Object.keys(Se);ze<Je.length;ze++){var yt=Je[ze];if(Se[yt].$m&&Object.keys(Se[yt].$m).every(function(xt){return Number(xt)})){if(ve[yt])throw Error(`nested type ${ve}.${yt} has already exist`);ve[yt]=(function(xt,Ye){function J(st){for(var Dt in xt){var qt=xt[Dt];qt[1].charAt(0)==="{"?this[qt[0]]={}:qt[1].charAt(0)!=="["&&qt[1].charAt(0)!=="<"||(this[qt[0]]=[])}if(st)for(var Lt=Object.keys(st),ut=0;ut<Lt.length;++ut)st[Lt[ut]]!=null&&(this[Lt[ut]]=st[Lt[ut]])}var He={};for(var Le in xt){var Ue=xt[Le],_t=Ue[1];_t.charAt(0)==="{"?(J.prototype[Ue[0]]=ke.util.emptyObject,He[_t]={$m:_t.substring(1).split(",").map(function(st,Dt){return[`$${Dt+1}`,st,null]}).reduce(function(st,Dt,qt){return st[qt+1]=Dt,st},{})}):J.prototype[Ue[0]]=_t.charAt(0)==="["||_t.charAt(0)==="<"?ke.util.emptyArray:_t==="bytes"?ke.util.newBuffer([]):Ue[2]&&Ue[2].hasOwnProperty("low")&&Ue[2].hasOwnProperty("high")?ke.util.Long.fromBits(Ue[2].low,Ue[2].high,Ue[2].unsigned):Ue[2]}return J.create=function(st){return new J(st)},J.decode=function(st,Dt){st instanceof ke.Reader||(st=ke.Reader.create(st));for(var qt=Dt===void 0?st.len:st.pos+Dt,Lt=new J;st.pos<qt;){var ut=st.uint32(),Yt=ut>>>3;if(Yt>0&&xt[Yt]){var wn=xt[Yt][0],Rn=xt[Yt][1];if(Rn.charAt(0)==="{"){Lt[wn]===ke.util.emptyObject&&(Lt[wn]={});var jn=J.$namespace[Rn].decode(st,st.uint32());Lt[wn][jn.$1]=jn.$2}else if(Rn.charAt(0)==="["||Rn.charAt(0)==="<")if(Rn=Rn.substring(1),Lt[wn]&&Lt[wn].length||(Lt[wn]=[]),Qe[Rn=!oe[Rn]&&!Ne[Rn].decode?"int32":Rn]!==void 0&&(7&ut)==2)for(var Mn=st.uint32()+st.pos;st.pos<Mn;)Lt[wn].push(oe.$.call(st,Rn));else Lt[wn].push(oe.$.call(st,Rn));else Lt[wn]=oe.$.call(st,Rn)}else st.skipType(7&ut)}return Lt},J.encode=function(st,Dt){for(var qt in Dt||(Dt=ke.Writer.create()),xt){var Lt=xt[qt][0],ut=xt[qt][1];if(ut.charAt(0)==="{"){if(st[Lt]!=null&&st.hasOwnProperty(Lt))for(var Yt=0,wn=Object.keys(st[Lt]);Yt<wn.length;++Yt)Dt.uint32(qt<<3|2).fork(),J.$namespace[ut].encode({$1:wn[Yt],$2:st[Lt][wn[Yt]]},Dt).ldelim()}else if(ut.charAt(0)==="["||ut.charAt(0)==="<"){var Rn=ut.charAt(0)==="<";ut=ut.substring(1);var jn=st[Lt];if(jn!=null&&jn.length)if(ut=tt[ut]===void 0&&!Ne[ut].encode?"int32":ut,Rn&&Qe[ut]!==void 0){for(Dt.uint32(qt<<3|2).fork(),Yt=0;Yt<jn.length;Yt++)fe[ut].call(Dt,jn[Yt]);Dt.ldelim()}else for(Yt=0;Yt<jn.length;Yt++)fe.$.call(Dt,ut,jn[Yt],qt)}else st[Lt]!=null&&st.hasOwnProperty(Lt)&&fe.$.call(Dt,ut,st[Lt],qt)}return Dt},Object.keys(He).length&&(J.$namespace=me(He,ge+"."+Ye,J.$namespace||{},!0)),J})(Se[yt].$m,yt)}else Se[yt].$s?ve[yt]=(function(xt,Ye){function J(He,Le,Ue){ke.rpc.Service.call(this,He,Le,Ue)}return(J.prototype=Object.create(ke.rpc.Service.prototype)).constructor=J,J.create=function(He,Le,Ue){return new J(He,Le,Ue)},Object.keys(xt).forEach(function(He){var Le=xt[He];function Ue(_t,st){return this.rpcCall(Ue,Ne[Le[0]],Ne[Le[1]],_t,st)}Object.defineProperty(Ue,"name",{value:He}),Object.defineProperty(Ue,"path",{value:`${ge}.${Ye}`}),J.prototype[He]=Ue}),J})(Se[yt].$s,yt):Se[yt].$e&&Object.values(Se[yt].$e).every(function(xt){return Number(xt)===xt})&&(ve[yt]=(function(xt){for(var Ye=Object.keys(xt),J={},He=0;He<Ye.length;He++)J[J[Ye[He]]=xt[Ye[He]]]=Ye[He];return J})(Se[yt].$e));ve[yt]&&!ee&&(Ne[`${ge}.${yt}`]=ve[yt]),delete Se[yt].$m,delete Se[yt].$s,delete Se[yt].$e,ve[yt]=me(Se[yt],ge?`${ge}.${yt}`:yt,ve[yt]||{})}return ve})({mixstream:{proto_mixstream:{AutoRoomMixOutputStream:{$m:{1:["stream_out_common","mixstream.proto_mixstream.MixOutputStreamCommon",null],2:["audio_channel_cnt","int32",0]}},AutoRoomMixStreamStartRequest:{$m:{1:["request_seq","uint32",0],2:["mix_stream_common","mixstream.proto_mixstream.MixStreamCommon",null],3:["mix_source","string",""],4:["room_id","string",""],5:["task_id","string",""],6:["water_mark","mixstream.proto_mixstream.MixWaterMark",null],7:["output_stream","<mixstream.proto_mixstream.AutoRoomMixOutputStream",null],8:["extra_params","<mixstream.proto_mixstream.MixAdvanceConfig",null],9:["has_recv_buffer_level","bool",!1],10:["recv_buffer_level","sint32",0]}},AutoRoomMixStreamStartResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null]}},AutoRoomMixStreamStopRequest:{$m:{1:["request_seq","uint32",0],2:["task_id","string",""],3:["room_id","string",""]}},AutoRoomMixStreamStopResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null]}},GetMixStreamStatusRequest:{$m:{1:["request_seq","uint32",0],2:["task_id","string",""]}},GetMixStreamStatusResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null],3:["push_url","<mixstream.proto_mixstream.PushUrl",null],4:["version","int32",0],5:["task_id","string",""]}},MixAdvanceConfig:{$m:{1:["key","string",""],2:["value","string",""]}},MixImage:{$m:{1:["url","string",""],2:["display_mode","int32",0]}},MixInputStream:{$m:{1:["stream_input_common","mixstream.proto_mixstream.MixInputStreamCommon",null],2:["volume","int32",0],3:["audio_focus","int32",0],4:["audio_h_angle","int32",0],5:["render_mode","int32",0],6:["corner_radius","uint32",0],7:["label","mixstream.proto_mixstream.MixLabel",null],8:["image","mixstream.proto_mixstream.MixImage",null]}},MixInputStreamCommon:{$m:{1:["stream_id","string",""],2:["sound_level_id","uint32",0],3:["content_control","int32",0],4:["layer_rect","mixstream.proto_mixstream.MixRect",null],5:["stream_url","string",""]}},MixLabel:{$m:{1:["text","string",""],2:["text_left","int32",0],3:["text_top","int32",0],4:["font","mixstream.proto_mixstream.MixLableFont",null]}},MixLableFont:{$m:{1:["font_type","int32",0],2:["font_size","int32",0],3:["font_color","int32",0],4:["font_transparency","int32",0],5:["font_border_color","sint32",0]}},MixOutputStream:{$m:{1:["output_stream_common","mixstream.proto_mixstream.MixOutputStreamCommon",null],2:["video_enc_id","int32",0],3:["video_encode_latency","int32",0],4:["video_encode_profile","int32",0],5:["low_bitrate_hd","int32",0]}},MixOutputStreamCommon:{$m:{1:["is_url","int32",0],2:["target","string",""],3:["video_fps","int32",0],4:["rate_control_mode","int32",0],5:["video_bitrate","int32",0],6:["video_width","int32",0],7:["video_height","int32",0],8:["output_quality","int32",0],9:["audio_bitrate","int32",0],10:["audio_enc_id","int32",0]}},MixRect:{$m:{1:["top","int32",0],2:["left","int32",0],3:["bottom","int32",0],4:["right","int32",0],5:["layer","int32",0]}},MixStartReplyData:{$m:{1:["request_id","string",""],2:["play_infos","<mixstream.proto_mixstream.PlayInfo",null]}},MixStreamCommon:{$m:{1:["user_data","string",""],2:["output_bg_color","int32",0],3:["output_bg_image","string",""],4:["with_sound_level","int32",0],5:["single_stream_pass_through","int32",0],6:["alignment_type","int32",0]}},MixstreamServerCommonResponse:{$m:{1:["code","uint32",0],2:["message","string",""]}},MixStreamStartRequest:{$m:{1:["request_seq","uint32",0],2:["mix_protocol_version","int32",0],3:["task_id","string",""],4:["room_id","string",""],5:["mix_stream_common","mixstream.proto_mixstream.MixStreamCommon",null],6:["audio_channel_cnt","int32",0],7:["audio_mix_mode","int32",0],8:["recv_buffer_level","sint32",0],9:["input_stream","<mixstream.proto_mixstream.MixInputStream",null],10:["water_mark","mixstream.proto_mixstream.MixWaterMark",null],11:["advance_config","<mixstream.proto_mixstream.MixAdvanceConfig",null],12:["output_stream","<mixstream.proto_mixstream.MixOutputStream",null],13:["white_board","mixstream.proto_mixstream.MixWhiteBoard",null],14:["timestamp","int64",{low:0,high:0,unsigned:!1}],15:["check_image_mode","int32",0]}},MixStreamStartResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null],3:["data","mixstream.proto_mixstream.MixStartReplyData",null],4:["error_streamid_list","<string",null]}},MixStreamStopRequest:{$m:{1:["request_seq","uint32",0],2:["task_id","string",""],3:["room_id","string",""],4:["is_url","int32",0],5:["target","string",""],6:["timestamp","int64",{low:0,high:0,unsigned:!1}]}},MixStreamStopResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null]}},MixStreamTaskHbRequest:{$m:{1:["request_seq","uint32",0],2:["task_id","string",""]}},MixStreamTaskHbResponse:{$m:{1:["request_seq","uint32",0],2:["common_response","mixstream.proto_mixstream.MixstreamServerCommonResponse",null],3:["status","uint32",0],4:["hb_interval","uint32",0]}},MixWaterMark:{$m:{1:["image","string",""],2:["layout_rect","mixstream.proto_mixstream.MixRect",null]}},MixWhiteBoard:{$m:{1:["whiteboard_id","uint64",{low:0,high:0,unsigned:!0}],2:["horizontal_ratio","int32",0],3:["vertical_ratio","int32",0],4:["is_ppt_animation","int32",0],5:["layout_rect","mixstream.proto_mixstream.MixRect",null],6:["background_color","int32",0]}},PlayInfo:{$m:{1:["stream_alias","string",""],2:["rtmp_url","string",""],3:["hls_url","string",""],4:["hdl_url","string",""]}},PushUrl:{$m:{1:["status","int32",0],2:["url","string",""],3:["mod_time","int64",{low:0,high:0,unsigned:!1}],4:["reason","int32",0]}}}}},"",Ne,!1);var re,K,M=Ne.mixstream,F=Z(7202);re=M.proto_mixstream,(K=(K=Z(3788)).default||K).util.Long=F.A,K.configure();var T,_=(function(){function me(){}return me.prototype.encodeMixStreamStartReq=function(Se){var ge=re.MixStreamStartRequest.create(Se);return re.MixStreamStartRequest.encode(ge).finish()},me.prototype.decodeMixStreamStartRsp=function(Se){return re.MixStreamStartResponse.decode(Se)},me.prototype.encodeMixStreamStopReq=function(Se){var ge=re.MixStreamStopRequest.create(Se);return re.MixStreamStopRequest.encode(ge).finish()},me.prototype.decodeMixStreamStopRsp=function(Se){return re.MixStreamStopResponse.decode(Se)},me.prototype.encodeGetMixStreamStatusReq=function(Se){var ge=re.GetMixStreamStatusRequest.create(Se);return re.GetMixStreamStatusRequest.encode(ge).finish()},me.prototype.decodeGetMixStreamStatusRsp=function(Se){return re.GetMixStreamStatusResponse.decode(Se)},me.prototype.encodeAutoRoomMixStreamStartReq=function(Se){var ge=re.AutoRoomMixStreamStartRequest.create(Se);return re.AutoRoomMixStreamStartRequest.encode(ge).finish()},me.prototype.decodeAutoRoomMixStreamStartRsp=function(Se){return re.AutoRoomMixStreamStartResponse.decode(Se)},me.prototype.encodeAutoRoomMixStreamStopReq=function(Se){var ge=re.AutoRoomMixStreamStopRequest.create(Se);return re.AutoRoomMixStreamStopRequest.encode(ge).finish()},me.prototype.decodeAutoRoomMixStreamStopRsp=function(Se){return re.AutoRoomMixStreamStopResponse.decode(Se)},me.prototype.encodeMixStreamTaskHbReq=function(Se){var ge=re.MixStreamTaskHbRequest.create(Se);return re.MixStreamTaskHbRequest.encode(ge).finish()},me.prototype.decodeMixStreamTaskHbRsp=function(Se){return re.MixStreamTaskHbResponse.decode(Se)},me})(),E=Z(5095),w={event:"/mix/start_mix",error:{wn:P.INPUT_PARAM,hr:P.MIXER_TASK_ID_NULL,lr:P.MIXER_TASK_ID_TOO_LONG,vr:P.MIXER_TASK_ID_INVALID_CHARACTER,mr:P.MIXER_INPUTLIST_NULL,pr:P.MIXER_OUTPUTLIST_NULL,gr:P.MIXER_OUTPUT_TARGET_INVALID,br:P.MIXER_NO_OUTPUT_TARGET,_r:P.MIXER_OUTPUT_TARGET_TOO_LONG,yr:P.MIXER_START_REQUEST_ERROR,wr:P.MIXER_INNER_ERROR,Sr:P.MIXER_INPUT_LABEL_TOO_LONG,Er:P.MIXER_INPUT_IMAGE_URL_TOO_LONG,kr:P.MIXER_INPUT_IMAGE_FORMAT_WRONG,Or:P.MIXER_WATERMARK_URL_INVALID,Ir:P.MIXER_WATERMARK_PARAMETERS_ERROR,Ue:P.NOT_LOGIN},mix_stream_conf:E.Gq,stop_reason:E.tK},R={event:"/mix/stop_mix",error:{wn:P.INPUT_PARAM,Ue:P.NOT_LOGIN}},V={event:"/mix/config_mix",error:{wn:P.INPUT_PARAM,Rr:P.MIXER_VIDEO_CONFIG_INVALID,Cr:P.MIXER_BACKGROUND_IMAGE_URL_INVALID,Ue:P.NOT_LOGIN},mix_params:E.Gq},ae="/automix/start",q="/automix/stop",k=Z(4872),G=Z(8866),xe=Z(4908),Ae=function(){return Ae=Object.assign||function(me){for(var Se,ge=1,ve=arguments.length;ge<ve;ge++)for(var ee in Se=arguments[ge])Object.prototype.hasOwnProperty.call(Se,ee)&&(me[ee]=Se[ee]);return me},Ae.apply(this,arguments)},De=256,Ie=1024,be=1e4;T=F.A;var qe,Ve=["NO_RELAY","RELAYING","RELAY_REQUESTING","NO_RELAY"],pe={0:"NONE",8:"SERVER_ERROR",9:"HANDSHAKE_FAILED",10:"ACCESS_POINT_ERROR",11:"CREATE_STREAM_FAILED",12:"BAD_NAME",13:"CDN_SERVER_DISCONNECTED",14:"DISCONNECTED",1214:"ALL_INPUT_STREAM_CLOSED",1215:"ALL_INPUT_STREAM_NO_DATA",1230:"SERVER_INTERNAL_ERROR"};function j(me,Se){var ge,ve,ee,ze,Je="",yt=P;return Se.errorCode<2e9&&Se.errorCode>1e9?(ee={1:"MIXER_START_REQUEST_ERROR",2:"MIXER_START_REQUEST_ERROR",3:"MIXER_AUTHENTICATION_FAILED",141:"MIXER_INPUT_IMAGE_FORMAT_WRONG",142:"MIXER_INPUT_IMAGE_GET_FAIL",150:"MIXER_INPUT_STREAM_NOT_EXISTS",151:"MIXER_START_REQUEST_ERROR",152:"MIXER_STOP_REQUEST_ERROR",153:"MIXER_INPUT_PARAMETERS_ERROR",154:"MIXER_EXCEED_MAX_OUTPUT_COUNT",155:"MIXER_INPUT_PARAMETERS_ERROR",156:"MIXER_VIDEO_CONFIG_INVALID",157:"MIXER_NO_SERVICES",158:"MIXER_EXCEED_MAX_INPUT_COUNT",159:"MIXER_START_REQUEST_ERROR",160:"MIXER_NOT_OWNER_STOPMIXER",170:"MIXER_WATERMARK_PARAMETERS_ERROR",171:"MIXER_WATERMARK_NULL",175:"MIXER_REPEAT_INPUT",179:"MIXER_INPUT_LABEL_TOO_LONG",190:"MIXER_START_REQUEST_ERROR"},ze="MIXER_INNER_ERROR",(ve=Se.errorCode-be)>1e9&&ee[ve-1e9]&&(ze=ee[ve-1e9]),ge=yt[Je=ze]):Se.errorCode<1e6&&(ge=me.decodeServerError(Se.errorCode,Se.extendedData),Je=me.getLiveRoomError(Se.errorCode)),{reportErr:ge,actualError:yt[Je]}}(function(me){me[me.I=0]="I",me[me.H=10]="H",me[me.M=100]="M",me[me.L=1e3]="L"})(qe||(qe={}));var B,nt={VIDEO:0,AUDIO:1,VIDEO_ONLY:2},he={"H.264":0,"H.265":3};function it(me){var Se=B.AUDIO_ENC_HE_AAC;switch(me){case Pe.Xk.ZegoAudioCodecIDNormal2:Se=B.AUDIO_ENC_AAC_LC;break;case Pe.Xk.ZegoAudioCodecIDLow3:Se=B.AUDIO_ENC_OPUS;break;default:Se=B.AUDIO_ENC_HE_AAC}return Se}(function(me){me[me.AUDIO_ENC_HE_AAC=0]="AUDIO_ENC_HE_AAC",me[me.AUDIO_ENC_AAC_LC=1]="AUDIO_ENC_AAC_LC",me[me.AUDIO_ENC_MP3=2]="AUDIO_ENC_MP3",me[me.AUDIO_ENC_OPUS=3]="AUDIO_ENC_OPUS",me[me.AUDIO_ENC_SILK=4]="AUDIO_ENC_SILK",me[me.AUDIO_ENC_EVS=5]="AUDIO_ENC_EVS"})(B||(B={}));var wt={},Ee={startMixerTask:function(me){var Se=this;return new G.l3(function(ge,ve){var ee,ze,Je,yt,xt,Ye,J,He,Le,Ue,_t,st,Dt,qt,Lt,ut,Yt,wn,Rn=Se.reporter.createSpan(qe.H,{key:xe.oq.event},{key:w.event,par:me.taskID},w.event,!0),jn={errorCode:P.MIXER_INPUT_PARAMETERS_ERROR.code,extendedData:P.MIXER_INPUT_PARAMETERS_ERROR.message};if(me!=null&&me.inputList.find(function(Vn){return Vn.streamID==null&&(jn.extendedData=jn.extendedData+". streamID should be of string type",!0)}))return Se.reporter.setError(Rn,P.MIXER_INPUT_PARAMETERS_ERROR),void ve(jn);var Mn=me.outputConfig;Mn&&Mn.outputFps&&(Mn.outputFPS=Mn.outputFps);var Pn=function(Vn){var mr=j(Se.stateCenter,Vn),lr=mr.reportErr,ti=mr.actualError;Vn.errorCode===1000010150&&Rn.setAttributes({stop_reason:"UnmatchStreamId"}),Se.reporter.setError(Rn,lr||Vn),Se.reporter.spanEnd({key:w.event,par:me.taskID}),ti&&(Vn.errorCode=ti==null?void 0:ti.code,Vn.extendedData=(ti==null?void 0:ti.message)||""),ve(Vn)},ci=Se.stateCenter.roomList[0];if(ci){var Nr=[];if(!me.noTaskID&&!me.taskID)return Se.logger.error("zb.sh.ums no taskId found"),void Pn({errorCode:w.error.hr.code,extendedData:w.error.hr.message});if(!me.noTaskID&&!(0,k.QP)(me.taskID))return Se.logger.error("zb.rh.lg taskId must be string"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!me.noTaskID&&me.taskID.length>De)return Se.logger.error("zb.sh.ums taskId is too long"),void Pn({errorCode:w.error.lr.code,extendedData:w.error.lr.message});if(!me.noTaskID&&!(0,G.jy)(me.taskID))return Se.logger.error("zb.sh.ums task ID contains illegal characters"),void Pn({errorCode:w.error.vr.code,extendedData:w.error.vr.message});if(!me.inputList||me.inputList.length==0)return Se.logger.error("zb.sh.ums input list wrong"),void Pn({errorCode:w.error.mr.code,extendedData:w.error.mr.message});if(me.inputList.some(function(Vn){return(0,k.w)(Vn)&&!Vn.streamID}))return Se.logger.error("zb.sh.ums input stream is null"),void Pn({errorCode:w.error.mr.code,extendedData:w.error.mr.message});for(var nr=0;nr<me.inputList.length;nr++){var Nn=me.inputList[nr],_r={errorCode:w.error.wn.code,extendedData:w.error.wn.message};if(!(0,k.w)(Nn.layout))return Se.logger.error("zb.sh.ums input layout must be object"),void Pn(_r);var $n=Nn.layout,Dr=$n.bottom,Gr=$n.left,Or=$n.right;if(!((0,G.zQ)($n.top,!1)&&(0,G.zQ)(Dr,!1)&&(0,G.zQ)(Gr,!1)&&(0,G.zQ)(Or,!1)))return Se.logger.error("zb.sh.ums topleftbottomright must be integer number"),void Pn(_r);if(!(0,k.TE)(Nn.renderMode)&&![0,1].includes(Nn.renderMode))return Se.logger.error("zb.sh.ums render_mode is wrong"),void Pn(_r);if((0,k.w)(Nn.imageInfo)){if(!(0,k.QP)(Nn.imageInfo.url))return Se.logger.error("zb.sh.ums image url is require string"),void Pn(_r);if(Nn.imageInfo.url.length>1024)return Se.logger.error("zb.sh.ums input image url length too long"),void Pn({errorCode:w.error.Er.code,extendedData:w.error.Er.message})}if((0,k.w)(Nn.label)){if(!(0,k.QP)((ee=Nn.label)===null||ee===void 0?void 0:ee.text))return Se.logger.error("zb.sh.ums input label text is not string"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message+" label text is not string"});if(((Je=(ze=Nn.label)===null||ze===void 0?void 0:ze.text)===null||Je===void 0?void 0:Je.length)>=300)return Se.logger.error("zb.sh.ums input label text is  too long"),void Pn({errorCode:w.error.Sr.code,extendedData:w.error.Sr.message});var mi=Nn.label,Ar=mi.left,sr=mi.top;if(Ar!==void 0&&!(0,G.zQ)(Ar,!1)||sr!==void 0&&!(0,G.zQ)(sr,!1))return Se.logger.error("zb.sh.ums input label left and top should be integer"),void Pn(_r)}if(Nn.cornerRadius!==void 0&&!(0,k.Cs)(Nn.cornerRadius))return Se.logger.error("zb.sh.ums cornerRadius is wrong"),void Pn(_r);if(Nn.soundLevelID!==void 0&&!(0,G.zQ)(Nn.soundLevelID,!1))return Se.logger.error("zb.sh.ums soundLevelID is wrong"),void Pn(_r);if(Nn.volume!==void 0&&!(0,G.zQ)(Nn.volume,!1))return Se.logger.error("zb.sh.ums volume is wrong"),void Pn(_r)}if(!me.outputList||me.outputList.length==0)return Se.logger.error("zb.sh.ums no output list found"),void Pn({errorCode:w.error.pr.code,extendedData:w.error.pr.message});if(me.outputList.some(function(Vn){return Vn===""||(0,k.w)(Vn)&&!(0,k.QP)(Vn.target)}))return Se.logger.error("zb.sh.ums stream output target is nul"),void Pn({errorCode:w.error.pr.code,extendedData:w.error.pr.message});if(me.outputList.some(function(Vn){return(0,k.QP)(Vn)&&!(0,G.gU)(Vn)&&Vn.length>Ie||(0,k.w)(Vn)&&(0,k.QP)(Vn.target)&&Vn.target.length>Ie}))return Se.logger.error("zb.sh.ums stream output target is too long"),void Pn({errorCode:w.error._r.code,extendedData:w.error._r.message});if(me.outputList.some(function(Vn){return(0,k.QP)(Vn)&&!(0,G.gU)(Vn)&&!(0,G.jy)(Vn)||(0,k.w)(Vn)&&(0,k.QP)(Vn.target)&&!(0,G.gU)(Vn.target)&&!(0,G.jy)(Vn.target)}))return Se.logger.error("zb.sh.ums stream output target is incorrect"),void Pn({errorCode:w.error.gr.code,extendedData:w.error.gr.message});if(!Mn||!(0,k.w)(Mn))return Se.logger.error("zb.sh.ums no output config found"),void Pn({errorCode:w.error.br.code,extendedData:w.error.br.message});if(!Mn.outputBitrate||!(0,G.zQ)(Mn.outputBitrate))return Se.logger.error("zb.sh.ums bitrate param is required and must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!Mn.outputFPS||!(0,G.zQ)(Mn.outputFPS))return Se.logger.error("zb.sh.ums fps param is required and must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!Mn.outputWidth||!(0,G.zQ)(Mn.outputWidth))return Se.logger.error("zb.sh.ums width param is required and must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!Mn.outputHeight||!(0,G.zQ)(Mn.outputHeight))return Se.logger.error("zb.sh.ums height param is required and must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(Mn.outputAudioCodecID!==void 0&&!(0,G.zQ)(Mn.outputAudioCodecID,!1))return Se.logger.error("zb.sh.ums AudioCodecID param must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(Mn.outputAudioBitrate!==void 0&&!(0,G.zQ)(Mn.outputAudioBitrate))return Se.logger.error("zb.sh.ums AudioBitrate param must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(Mn.outputAudioChannels!==void 0&&!(0,G.zQ)(Mn.outputAudioChannels,!1))return Se.logger.error("zb.sh.ums AudioChannels param must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if((0,k.w)(me.watermark)){if(!(0,k.QP)((yt=me.watermark)===null||yt===void 0?void 0:yt.imageURL))return Se.logger.error("zb.sh.ums watermark image type error"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(((xt=me.watermark)===null||xt===void 0?void 0:xt.imageURL)!==""&&!(0,k.$C)((Ye=me.watermark)===null||Ye===void 0?void 0:Ye.imageURL))return Se.logger.error("zb.sh.ums watermark image url invalid"),void Pn({errorCode:w.error.Or.code,extendedData:w.error.Or.message});if(!(0,k.w)((J=me.watermark)===null||J===void 0?void 0:J.layout))return Se.logger.error("zb.sh.ums watermark layout must be object"),void Pn({errorCode:w.error.Ir.code,extendedData:w.error.Ir.message});var kn=(He=me.watermark)===null||He===void 0?void 0:He.layout;if(Dr=kn.bottom,Gr=kn.left,Or=kn.right,!((0,G.zQ)(kn.top,!1)&&(0,G.zQ)(Dr,!1)&&(0,G.zQ)(Gr,!1)&&(0,G.zQ)(Or,!1)))return Se.logger.error("zb.sh.ums watermark topleftbottomright must be integer number"),void Pn({errorCode:w.error.Ir.code,extendedData:w.error.Ir.message})}if((0,k.w)(me.whiteboard)){if(!(0,k.QP)((Le=me.whiteboard)===null||Le===void 0?void 0:Le.whiteboardID))return Se.logger.error("zb.sh.ums whiteboard is required and must be string"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!(0,k.w)((Ue=me.whiteboard)===null||Ue===void 0?void 0:Ue.layout))return Se.logger.error("zb.sh.ums whiteboard layout must be object"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});var Jn=(_t=me.whiteboard)===null||_t===void 0?void 0:_t.layout;if(Dr=Jn.bottom,Gr=Jn.left,Or=Jn.right,!((0,G.zQ)(Jn.top,!1)&&(0,G.zQ)(Dr,!1)&&(0,G.zQ)(Gr,!1)&&(0,G.zQ)(Or,!1)))return Se.logger.error("zb.sh.ums whiteboard topleftbottomright must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});var Mr=me.whiteboard,ar=Mr.horizontalRatio,oi=Mr.verticalRatio,gi=Mr.isPPTAnimation,go=Mr.zOrder,xi=Mr.backgroundColor;if(!(0,k.TE)(ar)&&!(0,G.zQ)(ar))return Se.logger.error("zb.sh.ums horizontalRatio must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!(0,k.TE)(oi)&&!(0,G.zQ)(oi))return Se.logger.error("zb.sh.ums verticalRatio must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!(0,k.TE)(gi)&&!(0,k.dd)(gi))return Se.logger.error("zb.sh.ums isPPTAnimation must be boolean"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!(0,k.TE)(go)&&!(0,G.zQ)(go,!1))return Se.logger.error("zb.sh.ums zOrder must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(!(0,k.TE)(xi)&&!(0,G.zQ)(xi,!1))return Se.logger.error("zb.sh.ums backgroundColor must be integer number"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message})}if(!(0,k.TE)(me.enableSoundLevel)&&!(0,k.dd)(me.enableSoundLevel))return Se.logger.error("zb.sh.ums enableSoundLevel is not bool"),void Pn({errorCode:w.error.wn.code,extendedData:w.error.wn.message});for(nr=0;nr<me.inputList.length;nr++){var ui=me.inputList[nr],no=ui.streamID;Se.stateCenter.testEnvironment&&(no="zegotest-"+Se.stateCenter.appid+"-"+ui.streamID),Nr.push({stream_id:no,content_control:nt[ui.contentType||"VIDEO"]||0,top:(st=ui.layout)===null||st===void 0?void 0:st.top,left:(Dt=ui.layout)===null||Dt===void 0?void 0:Dt.left,bottom:(qt=ui.layout)===null||qt===void 0?void 0:qt.bottom,right:(Lt=ui.layout)===null||Lt===void 0?void 0:Lt.right,render_mode:ui.renderMode,corner_radius:ui.cornerRadius,image:ui.imageInfo,label:ui.label})}var Ui=[];me.outputList.forEach(function(Vn){var mr="";(0,k.QP)(Vn)?mr=Vn:(0,k.w)(Vn)&&Vn.target&&(mr=Vn.target);var lr=0;(mr.startsWith("rtmp://")||mr.startsWith("https://")&&mr.endsWith(".flv")||mr.startsWith("https://")&&mr.endsWith(".m3u8"))&&(lr=1);var ti={target:mr,is_url:lr?"true":"false"};if(me.outputConfig){var Q=me.outputConfig,dt=Q.outputAudioBitrate,Be=Q.outputAudioCodecID;(0,k.Cs)(dt)&&(ti.audio_bitrate=1e3*dt),(0,k.Cs)(Be)&&(ti.audio_enc_id=Be)}if((0,k.w)(Vn)&&Vn.videoConfig){var Te=Vn.videoConfig,$e=Te.bitrate,Ge=Te.encodeProfile,mt=Te.encodeLatency,vt=Te.videoCodecID,St=Te.enableLowBitrateHD;(0,k.Cs)($e)&&(ti.video_bitrate=1e3*$e),(0,k.Cs)(Ge)&&(ti.video_encode_profile=Ge),(0,k.Cs)(mt)&&(ti.video_encode_latency=mt),(0,k.QP)(vt)&&(ti.video_enc_id=vt),(0,k.dd)(St)&&(ti.low_bitrate_hd=St?1:0)}Ui.push(ti)});var vi=Mn,Br={};if(wt){var ur=wt.backgroundImage;(0,k.Cs)(xi=wt.backgroundColor)&&(Br.output_bg_color=xi),(0,k.QP)(ur)&&(Br.output_bg_image=ur)}var Qr={};if(me.watermark){var qr=me.watermark,Bi=qr.layout;Qr.image=qr.imageURL,Qr.layout=Bi}Qr&&(Br.water_mark=Qr),Se.reporter.spanSetAttributes({key:w.event,par:me.taskID},{mix_stream_conf:w.mix_stream_conf(Ae(Ae({fps:vi.outputFPS,bitrate:1e3*vi.outputBitrate,w:vi.outputWidth,h:vi.outputHeight,stream_cnt:Nr.length,mix_task_id:me.taskID},Br),{with_sound_level:me.enableSoundLevel?1:0,bypass:!((ut=me.outputConfig)===null||ut===void 0)&&ut.singleStreamPassThrough?1:0,audio_channel_cnt:(wn=(Yt=me.outputConfig)===null||Yt===void 0?void 0:Yt.outputAudioChannels)!==null&&wn!==void 0?wn:1,input_stream_list:Nr,output_target_list:Ui}))}),ci.streamHandler.updateMixStream(me,wt,function(Vn){Se.reporter.spanEnd({key:w.event,par:me.taskID}),ge(Vn)},Pn)}else Pn({errorCode:w.error.Ue.code,extendedData:w.error.Ue.message})})},setMixerTaskConfig:function(me){var Se=this;return new G.l3(function(ge,ve){var ee,ze=Se.reporter.createSpan(qe.H,{key:xe.oq.event},{key:""},V.event),Je={},yt=function(He){Se.reporter.setError(ze,He),ve(He)};if(me&&me.videoCodec){var xt=me.videoCodec.toLowerCase();if(["vp8","h264","h265"].indexOf(xt)==-1)return Se.logger.error("zb.sh.ums param videoCode error"),yt({errorCode:V.error.Rr.code,extendedData:V.error.Rr.message}),!1;Je.videoCodec=xt}if(me.backgroundColor){if(!(0,G.zQ)(me.backgroundColor))return Se.logger.error("zb.sh.ums param backgroundColor must be integer number"),yt({errorCode:V.error.wn.code,extendedData:V.error.wn.message}),!1;Je.backgroundColor=me.backgroundColor}var Ye=me.backgroundImage;if(Ye){if(!(0,k.QP)(Ye))return Se.logger.error("zb.sh.ums param outputBgImage error"),yt({errorCode:V.error.wn.code,extendedData:V.error.wn.message}),!1;if(!(0,k.$C)(Ye))return Se.logger.error("zb.sh.ums illegal input background image URL"),yt({errorCode:V.error.Cr.code,extendedData:V.error.Cr.message}),!1;Je.backgroundImage=Ye}var J=me&&me.userData;if(J){if(!(0,k.G0)(J))return Se.logger.error("zb.sh.ums param userData required Uint8Array"),yt({errorCode:V.error.wn.code,extendedData:V.error.wn.message}),!1;if(J.byteLength>1e3)return Se.logger.error("zb.sh.ums param userData should shorter than 1000"),yt({errorCode:V.error.wn.code,extendedData:V.error.wn.message}),!1;Je.userData=J}me.extraParams&&(Je.extraParams||(Je.extraParams=[]),(ee=Je.extraParams).push.apply(ee,me.extraParams)),wt=Je,ze.setAttributes({mix_params:V.mix_params(me)}),Se.stateCenter.roomList[0]?(ze.end(),ge({errorCode:0,extendedData:""})):yt({errorCode:V.error.Ue.code,extendedData:V.error.Ue.message})})},stopMixerTask:function(me){var Se=this;return new G.l3(function(ge,ve){var ee=Se.reporter.createSpan(qe.H,{key:xe.oq.event},{key:""},R.event);if(!me||!(0,k.QP)(me)||me.length>De||!(0,G.jy)(me))return Se.logger.error("zb.rh.lg taskID must be string less 256"),Se.reporter.setError(ee,R.error.wn," param taskID error"),void ve({errorCode:R.error.wn.code,extendedData:R.error.wn.message+" param taskID error"});ee.setAttributes({mix_task_id:me});var ze=function(yt){var xt=j(Se.stateCenter,yt),Ye=xt.actualError;Se.reporter.setError(ee,xt.reportErr||yt),Ye&&(yt.errorCode=Ye==null?void 0:Ye.code,yt.extendedData=(Ye==null?void 0:Ye.message)||""),ve(yt)},Je=Se.stateCenter.roomList[0];Je?Je.streamHandler.stopMixStream(me,function(yt){ee.end(),ge(yt)},ze):ze({errorCode:R.error.Ue.code,extendedData:R.error.Ue.message})})},startAutoMixerTask:function(me){var Se=this;return new G.l3(function(ge,ve){var ee,ze,Je=Se.reporter.createSpan(qe.H,{key:xe.oq.event},{key:ae,par:me.taskID},ae,!0),yt=function(J){var He=j(Se.stateCenter,J),Le=He.reportErr;J.errorCode===1000010150&&Je.setAttributes({stop_reason:"UnmatchStreamId"}),Se.reporter.setError(Je,Le||J),Se.reporter.spanEnd({key:ae,par:me.taskID}),ve(J)},xt=Se.stateCenter.roomList[0];if(xt){if(!me.taskID)return Se.logger.error("zb.sh.ums no taskId found"),void yt({errorCode:w.error.hr.code,extendedData:w.error.hr.message});if(!(0,k.QP)(me.taskID))return Se.logger.error("zb.rh.lg taskId must be string"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(me.taskID.length>De)return Se.logger.error("zb.sh.ums taskId is too long"),void yt({errorCode:w.error.lr.code,extendedData:w.error.lr.message});if(!(0,G.jy)(me.taskID))return Se.logger.error("zb.sh.ums task ID contains illegal characters"),void yt({errorCode:w.error.vr.code,extendedData:w.error.vr.message});if(!me.roomID)return Se.logger.error("zb.sh.ums no roomID found"),void yt({errorCode:I.Qo5.code,extendedData:I.Qo5.message});if(!(0,k.QP)(me.roomID))return Se.logger.error("zb.rh.lg roomID must be string"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(me.roomID.length>128)return Se.logger.error("zb.sh.ums roomID is too long"),void yt({errorCode:I.Srw.code,extendedData:I.Srw.message});if(!(0,G.jy)(me.roomID))return Se.logger.error("zb.sh.ums room ID contains illegal characters"),void yt({errorCode:I.ulL.code,extendedData:I.ulL.message});if(!me.outputList||me.outputList.length==0)return Se.logger.error("zb.sh.ums no output list found"),void yt({errorCode:w.error.pr.code,extendedData:w.error.pr.message});if(me.outputList.some(function(J){return(0,k.w)(J)&&!J.target}))return Se.logger.error("zb.sh.ums stream output target is nul"),void yt({errorCode:w.error.pr.code,extendedData:w.error.pr.message});if(me.outputList.some(function(J){return(0,k.w)(J)&&(0,k.QP)(J.target)&&J.target.length>Ie}))return Se.logger.error("zb.sh.ums stream output target is too long"),void yt({errorCode:w.error._r.code,extendedData:w.error._r.message});if(me.outputList.some(function(J){return(0,k.w)(J)&&J.target&&!(0,G.gU)(J.target)&&!(0,G.jy)(J.target)}))return Se.logger.error("zb.sh.ums stream output target is incorrect"),void yt({errorCode:w.error.gr.code,extendedData:w.error.gr.message});if(me.audioConfig){if(((ee=me.audioConfig)===null||ee===void 0?void 0:ee.bitrate)!==void 0&&!(0,G.zQ)((ze=me.audioConfig)===null||ze===void 0?void 0:ze.bitrate))return Se.logger.error("zb.sh.ums audio bitrate param is required and must be integer number"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(me.audioConfig.codecID!==void 0&&!(0,G.zQ)(me.audioConfig.codecID,!1))return Se.logger.error("zb.sh.ums AudioCodecID param must be integer number"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message});if(me.audioConfig.channel!==void 0&&![1,2].includes(me.audioConfig.channel))return Se.logger.error("zb.sh.ums AudioChannels param must be 1 or 2"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message})}if(!(0,k.TE)(me.enableSoundLevel)&&!(0,k.dd)(me.enableSoundLevel))return Se.logger.error("zb.sh.ums enableSoundLevel is not bool"),void yt({errorCode:w.error.wn.code,extendedData:w.error.wn.message});var Ye=[];me.outputList.forEach(function(J){var He=J.target,Le={};if(He.startsWith("rtmp://")||He.startsWith("https://")&&He.endsWith(".flv")||He.startsWith("https://")&&He.endsWith(".m3u8")?Le.url=He:Le.stream=He,J.videoConfig){var Ue=J.videoConfig,_t=Ue.encodeProfile,st=Ue.encodeLatency,Dt=Ue.videoCodecID,qt=Ue.enableLowBitrateHD;(0,k.Cs)(Lt=Ue.bitrate)&&(Le.video_bitrate=1e3*Lt),(0,k.Cs)(_t)&&(Le.video_encode_profile=_t),(0,k.Cs)(st)&&(Le.video_encode_latency=st),(0,k.QP)(Dt)&&(Le.video_enc_id=Dt),(0,k.dd)(qt)&&(Le.low_bitrate_hd=qt?1:0)}if(me.audioConfig){var Lt,ut=me.audioConfig,Yt=ut.channel,wn=ut.codecID;(0,k.Cs)(Lt=ut.bitrate)&&(Le.audio_bitrate=1e3*Lt),(0,k.Cs)(wn)&&(Le.audio_enc_id=wn),(0,k.Cs)(Yt)&&(Le.audio_channel_cnt=Yt)}Ye.push(Le)}),Se.reporter.spanSetAttributes({key:ae,par:me.taskID},{task_id:me.taskID,room_id:me.roomID,with_sound_level:me.enableSoundLevel?1:0,alignment_type:me.streamAlignmentMode||0,recv_buffer_level:me.minPlayStreamBufferLength||0,output_target_list:Ye}),xt.streamHandler.updateAutoMixStream(me,function(J){Se.reporter.spanEnd({key:ae,par:me.taskID}),ge(J)},yt)}else yt({errorCode:w.error.Ue.code,extendedData:w.error.Ue.message})})},stopAutoMixerTask:function(me){var Se=this;return new G.l3(function(ge,ve){var ee=Se.reporter.createSpan(qe.H,{key:xe.oq.event},{key:""},q);if(!me.taskID||!(0,k.QP)(me.taskID)||me.taskID.length>De||!(0,G.jy)(me.taskID))return Se.logger.error("zb.rh.lg taskID must be string less 256"),Se.reporter.setError(ee,R.error.wn," param taskID error"),void ve({errorCode:R.error.wn.code,extendedData:R.error.wn.message+" param taskID error"});ee.setAttributes({task_id:me.taskID,room_id:me.roomID});var ze=function(yt){var xt=j(Se.stateCenter,yt);Se.reporter.setError(ee,xt.reportErr||yt),ve(yt)},Je=Se.stateCenter.roomList[0];Je?Je.streamHandler.stopAutoMixStream(me,function(yt){ee.end(),ge(yt)},ze):ze({errorCode:R.error.Ue.code,extendedData:R.error.Ue.message})})}},Oe={_sendMixStopReqByAccessHub:function(me,Se,ge){var ve=this;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new _),me.timestamp=T.fromInt(Math.ceil(new Date().getTime()/1e3)),this.logger.info("zb.sh.smseba.1 req "+JSON.stringify(me));var ee=this.mixStreamProtoBuf.encodeMixStreamStopReq(me),ze=function(Je,yt){try{var xt=ve.mixStreamProtoBuf.decodeMixStreamStopRsp(Je);(0,G.M$)(xt),ve.logger.info("zb.sh.smseba.1 rsp "+JSON.stringify(me));var Ye=(xt==null?void 0:xt.common_response)||{};return{code:Ye.code,msg:Ye.message}}catch{return{code:-1}}};this.sendMixRequest({interfaceID:16},ee,function(Je,yt){var xt=ze(Je),Ye=xt.code,J=xt.msg;Ye!=0&&Ye!=null||!(0,k.JO)(Se)?ge&&ge({errorCode:Ye,extendedData:J||""}):Se({errorCode:Ye,extendedData:J})},function(Je,yt,xt){var Ye="";if(xt)return xt.code==P.TIMEOUT.code&&(xt=w.error.wr),xt.code&&xt.code===20010&&(xt=JSON.parse(JSON.stringify(P.MIXER_NO_SERVICES))),void(ge&&ge(xt,Ye));xt=w.error.wr;var J="";if((0,k.QP)(yt))J=yt;else{var He=ze(yt);J=He.code+" "+He.msg}ve.logger.error("zb.sh.pt "+(Ye="request media server fail, error: "+Je+" "+J)),ge&&ge(xt,Ye)})},stopMixStream:function(me,Se,ge,ve,ee){var ze=this;this.logger.info("zb.sh.sms call");var Je=this.getStopMixStreamParams(me,ve,ee);this._sendMixStopReqByAccessHub(Je.mixStopReq,function(yt){ze.mixStreamHbList[me]&&(ze.mixStreamHbList[me].timer&&clearTimeout(ze.mixStreamHbList[me].timer),delete ze.mixStreamHbList[me]),Se(yt)},ge)},_sendMixStartReqByAccessHub:function(me,Se,ge,ve){var ee=this;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new _),me.timestamp=T.fromInt(Math.ceil(new Date().getTime()/1e3)),this.logger.info("zb.sh.smseba.0 req "+JSON.stringify(me));var ze=this.mixStreamProtoBuf.encodeMixStreamStartReq(me),Je=function(yt,xt){try{var Ye=ee.mixStreamProtoBuf.decodeMixStreamStartRsp(yt);(0,G.M$)(Ye),ee.logger.info("zb.sh.smseba.0 rsp "+JSON.stringify(Ye));var J=Ye.common_response;return{code:J.code,msg:J.message,data:Ye.data,errStreamList:Ye.error_streamid_list}}catch{return{code:-1}}};this.sendMixRequest({interfaceID:15},ze,function(yt,xt){var Ye=Je(yt),J=Ye.code,He=Ye.data,Le=Ye.errStreamList;if(J===void 0||J==0){var Ue=He.play_infos.map(function(Lt){var ut={rtmpURL:"",hlsURL:"",flvURL:""},Yt=Lt.stream_alias||"";return ee.stateCenter.testEnvironment&&Yt&&Yt.startsWith(Se)&&(Yt=Yt.slice(Se.length)),ut.streamID=Yt,Lt.rtmp_url&&Lt.rtmp_url.length>0&&(ut.rtmpURL=Lt.rtmp_url),Lt.hls_url&&Lt.hls_url.length>0&&(ut.hlsURL=Lt.hls_url),Lt.hdl_url&&Lt.hdl_url.length>0&&(ut.flvURL=Lt.hdl_url),ut});if(He.request_id){ee.mixStreamTaskList[me.task_id]||(ee.mixStreamTaskList[me.task_id]={mixStatusVer:0,requestId:He.request_id}),ee.mixStreamTaskList[me.task_id].requestId=He.request_id;var _t=ee.mixRequestIdList.findIndex(function(Lt){return Lt==He.request_id});_t>-1&&(ee.fetchMixStreamStatus(ee.stateCenter.appid+":"+me.task_id),ee.mixRequestIdList.splice(_t,1))}ge&&ge({errorCode:0,extendedData:JSON.stringify({mixerOutputList:Ue})})}else{var st="",Dt=J+1e9;if(Dt==1000000150&&Le){var qt=Le.map(function(Lt){return ee.stateCenter.testEnvironment&&Lt.startsWith(Se)?Lt.slice(Se.length):Lt})||[];qt.length>0&&(ee.logger.debug("zb.sh.ums not exist streams: "+qt),st=qt.join(","))}ve&&ve({errorCode:ee.stateCenter.getServerError(be+Dt).code,extendedData:st})}},function(yt,xt,Ye){var J="";if(Ye)return Ye.code==P.TIMEOUT.code&&(Ye=w.error.yr),Ye.code&&Ye.code===20010&&(Ye=JSON.parse(JSON.stringify(P.MIXER_NO_SERVICES))),void(ve&&ve(Ye,J));Ye=w.error.wr;var He="";if((0,k.QP)(xt))He=xt;else{var Le=Je(xt);He=Le.code+" "+Le.msg}ee.logger.error("zb.sh.pt "+(J="request media server fail, error: "+yt+" "+He)),ve&&ve(Ye,J)})},getStartMixStreamParams:function(me,Se){var ge,ve,ee=this,ze={request_seq:this.stateCenter.getSeq(),mix_protocol_version:1,task_id:me.taskID,room_id:this.roomID,mix_stream_common:{},input_stream:[],advance_config:[],output_stream:[]},Je=me.outputConfig||{};Je.singleStreamPassThrough&&(0,k.dd)(Je.singleStreamPassThrough)&&(ze.mix_stream_common.single_stream_pass_through=Je.singleStreamPassThrough?1:0);var yt=Se;if(yt&&(yt.videoCodec&&((ge=ze.advance_config)===null||ge===void 0||ge.push({key:"video_encode",value:yt.videoCodec})),yt.backgroundColor&&(ze.mix_stream_common.output_bg_color=yt.backgroundColor),yt.backgroundImage&&(ze.mix_stream_common.output_bg_image=yt.backgroundImage),yt.userData&&(ze.mix_stream_common.user_data=this.stateCenter.uint8arrayToBase64(yt.userData)),yt.extraParams&&((ve=ze.advance_config)===null||ve===void 0||ve.push.apply(ve,yt.extraParams))),me.enableSoundLevel!==void 0&&(ze.mix_stream_common.with_sound_level=me.enableSoundLevel?1:0),me.inputList.forEach(function(st,Dt){var qt,Lt,ut,Yt,wn,Rn,jn,Mn,Pn,ci,Nr,nr,Nn,_r,$n,Dr,Gr,Or,mi,Ar,sr,kn=st.streamID;ee.stateCenter.testEnvironment&&(kn="zegotest-"+ee.stateCenter.appid+"-"+st.streamID);var Jn={stream_input_common:{stream_id:kn,content_control:nt[st.contentType||"VIDEO"]||0,layer_rect:{layer:Dt,top:(qt=st.layout)===null||qt===void 0?void 0:qt.top,left:(Lt=st.layout)===null||Lt===void 0?void 0:Lt.left,bottom:(ut=st.layout)===null||ut===void 0?void 0:ut.bottom,right:(Yt=st.layout)===null||Yt===void 0?void 0:Yt.right}},volume:(wn=st.volume)!==null&&wn!==void 0?wn:100,audio_focus:st.isAudioFocus?1:0,audio_h_angle:-1,render_mode:st.renderMode,corner_radius:st.cornerRadius};if(!((Rn=st.label)===null||Rn===void 0)&&Rn.text){var Mr={font_type:((Mn=(jn=st.label)===null||jn===void 0?void 0:jn.font)===null||Mn===void 0?void 0:Mn.type)||0,font_size:((ci=(Pn=st.label)===null||Pn===void 0?void 0:Pn.font)===null||ci===void 0?void 0:ci.size)||24,font_color:((nr=(Nr=st.label)===null||Nr===void 0?void 0:Nr.font)===null||nr===void 0?void 0:nr.color)||16777215,font_transparency:((_r=(Nn=st.label)===null||Nn===void 0?void 0:Nn.font)===null||_r===void 0?void 0:_r.transparency)||0};Mr.font_border_color=!((Dr=($n=st.label)===null||$n===void 0?void 0:$n.font)===null||Dr===void 0)&&Dr.border?(Or=(Gr=st.label)===null||Gr===void 0?void 0:Gr.font)===null||Or===void 0?void 0:Or.borderColor:-1;var ar={text:(mi=st.label)===null||mi===void 0?void 0:mi.text,text_left:((Ar=st.label)===null||Ar===void 0?void 0:Ar.left)||0,text_top:((sr=st.label)===null||sr===void 0?void 0:sr.top)||0,font:Mr};Jn.label=ar}st.imageInfo&&(Jn.image={url:st.imageInfo.url,display_mode:st.imageInfo.displayMode||0}),st.soundLevelID&&(Jn.stream_input_common.sound_level_id=st.soundLevelID),ze.input_stream.push(Jn)}),me.outputList.forEach(function(st){var Dt,qt,Lt,ut,Yt,wn,Rn,jn,Mn,Pn,ci,Nr,nr,Nn="";(0,k.QP)(st)?Nn=st:(0,k.w)(st)&&st.target?Nn=st.target:ee.logger.error("zb.sh.ums output target required"),(0,G.gU)(Nn)?(Nr=1,nr=Nn):(Nr=0,nr=ee.stateCenter.testEnvironment?"zegotest-"+ee.stateCenter.appid+"-"+Nn:Nn);var _r=Je.outputBitrate;typeof st!="string"&&(!((Dt=st.videoConfig)===null||Dt===void 0)&&Dt.bitrate)&&(_r=(qt=st.videoConfig)===null||qt===void 0?void 0:qt.bitrate);var $n={is_url:Nr,target:nr,video_bitrate:1e3*_r,video_fps:Je.outputFPS,video_width:Je.outputWidth,video_height:Je.outputHeight,output_quality:23};Je.outputAudioCodecID&&($n.audio_enc_id=Je.outputAudioCodecID),yt.videoCodec==="vp8"?$n.audio_enc_id=3:yt.videoCodec!=="h264"&&yt.videoCodec!=="h265"||($n.audio_enc_id=0),Je.outputAudioBitrate&&($n.audio_bitrate=1e3*Je.outputAudioBitrate);var Dr={output_stream_common:$n};typeof st!="string"&&(!((Lt=st.videoConfig)===null||Lt===void 0)&&Lt.videoCodecID&&(Dr.video_enc_id=he[(ut=st.videoConfig)===null||ut===void 0?void 0:ut.videoCodecID]||0),!((Yt=st.videoConfig)===null||Yt===void 0)&&Yt.encodeProfile&&[0,1,2,3].includes((wn=st.videoConfig)===null||wn===void 0?void 0:wn.encodeProfile)&&(Dr.video_encode_profile=(function(Gr){var Or=1;switch(Gr){case Pe.zN.ZegoEncodeProfileDefault:case Pe.zN.ZegoEncodeProfileMain:Or=1;break;case Pe.zN.ZegoEncodeProfileBaseline:Or=0;break;case Pe.zN.ZegoEncodeProfileHigh:Or=2}return Or})((Rn=st.videoConfig)===null||Rn===void 0?void 0:Rn.encodeProfile)),(0,k.Cs)((jn=st.videoConfig)===null||jn===void 0?void 0:jn.encodeLatency)&&(Dr.video_encode_latency=(Mn=st.videoConfig)===null||Mn===void 0?void 0:Mn.encodeLatency),(0,k.dd)((Pn=st.videoConfig)===null||Pn===void 0?void 0:Pn.enableLowBitrateHD)&&(Dr.low_bitrate_hd=!((ci=st.videoConfig)===null||ci===void 0)&&ci.enableLowBitrateHD?1:0)),ze.output_stream.push(Dr)}),me.watermark&&me.watermark.imageURL!==""&&(ze.water_mark={image:me.watermark.imageURL,layout_rect:me.watermark.layout}),me.whiteboard){var xt=me.whiteboard,Ye=xt.horizontalRatio,J=xt.verticalRatio,He=xt.layout,Le=xt.zOrder,Ue=xt.isPPTAnimation,_t=xt.backgroundColor;ze.white_board={whiteboard_id:T.fromString(xt.whiteboardID),horizontal_ratio:Ye||16,vertical_ratio:J||9,is_ppt_animation:Ue===!0?1:0,layout_rect:Ae(Ae({},He),{layer:Le||0}),background_color:_t||4059296768}}return isNaN(me.streamAlignmentMode)||(ze.mix_stream_common.alignment_type=me.streamAlignmentMode),ze.audio_channel_cnt=Je.outputAudioChannels?Je.outputAudioChannels:1,Je.audioMixMode&&(ze.audio_mix_mode=Je.audioMixMode),{mixStartReq:ze}},updateMixStream:function(me,Se,ge,ve){var ee=this;this.logger.info("zb.sh.ums call"),this.logger.info("zb.sh.ums send command");var ze=this.getStartMixStreamParams(me,Se).mixStartReq;return this._sendMixStartReqByAccessHub(ze,"zegotest-"+this.stateCenter.appid+"-",function(Je){ee.startMixHb(me.taskID),ge(Je)},ve),!0},updateAutoMixStream:function(me,Se,ge){var ve=this;this.logger.info("zb.sh.uams.0 call");var ee=me.taskID,ze=me.roomID,Je=me.audioConfig,yt=me.outputList,xt=me.enableSoundLevel,Ye=me.streamAlignmentMode,J=me.minPlayStreamBufferLength;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new _);var He=[];yt.forEach(function(st){var Dt=st.target,qt=0;(Dt.startsWith("rtmp://")||Dt.startsWith("avertp://")||Dt.startsWith("https://")&&Dt.endsWith(".flv")||Dt.startsWith("https://")&&Dt.endsWith(".m3u8"))&&(qt=1),He.push({stream_out_common:{target:Dt,is_url:qt,audio_bitrate:Je!=null&&Je.bitrate?1e3*(Je==null?void 0:Je.bitrate):48e3,audio_enc_id:(0,k.TE)(Je==null?void 0:Je.codecID)?0:it(Je==null?void 0:Je.codecID),video_fps:1,video_bitrate:1,video_width:1,video_height:1},audio_channel_cnt:(Je==null?void 0:Je.channel)||1})});var Le={request_seq:this.stateCenter.getSeq(),mix_stream_common:{with_sound_level:xt?1:0,alignment_type:Ye},room_id:ze,task_id:ee,output_stream:He};(0,k.Cs)(J)&&J>=0&&(Le.has_recv_buffer_level=!0,Le.recv_buffer_level=J),this.logger.info("zb.sh.uams.0 params "+JSON.stringify(Le));var Ue=this.mixStreamProtoBuf.encodeAutoRoomMixStreamStartReq(Le),_t=function(st,Dt){try{var qt=ve.mixStreamProtoBuf.decodeAutoRoomMixStreamStartRsp(st);(0,G.M$)(qt),ve.logger.info("zb.sh.uams.0 rsp "+JSON.stringify(qt));var Lt=qt.common_response;return{code:Lt.code,msg:Lt.message}}catch{return{code:-1}}};return this.sendMixRequest({interfaceID:10},Ue,function(st,Dt){ve.mixSucFun(st,Se,ge,_t,"zb.sh.uams.0")},function(st,Dt,qt){ve.mixFailFun(st,Dt,qt,ge,_t,"zb.sh.uams.0")},6),!0},stopAutoMixStream:function(me,Se,ge){var ve=this,ee=me.taskID,ze=me.roomID,Je={request_seq:this.stateCenter.getSeq(),room_id:ze,task_id:ee};this.logger.info("zb.sh.uams.1 params "+JSON.stringify(Je));var yt=this.mixStreamProtoBuf.encodeAutoRoomMixStreamStopReq(Je),xt=function(Ye,J){try{var He=ve.mixStreamProtoBuf.decodeAutoRoomMixStreamStopRsp(Ye);(0,G.M$)(He),ve.logger.info("zb.sh.smseba.0 rsp "+JSON.stringify(He));var Le=He.common_response;return{code:Le.code,msg:Le.message}}catch{return{code:-1}}};this.sendMixRequest({interfaceID:11},yt,function(Ye,J){ve.mixSucFun(Ye,Se,ge,xt,"zb.sh.uams.1")},function(Ye,J,He){ve.mixFailFun(Ye,J,He,ge,xt,"zb.sh.uams.1")},6)},mixSucFun:function(me,Se,ge,ve,ee,ze){var Je=ve(me,ze),yt=Je.code,xt=Je.msg;yt===void 0||yt===0?(this.logger.info(ee+" suc"),Se&&Se({errorCode:0,extendedData:""})):(this.logger.info(ee+" fail "+yt+" "+xt),ge&&ge({errorCode:this.stateCenter.getServerError(be+(yt+1e9)).code,extendedData:xt}))},mixFailFun:function(me,Se,ge,ve,ee,ze){var Je="";if(ge)return ge.code==P.TIMEOUT.code&&(ge=w.error.wr),ge.code&&ge.code===20010&&(ge=JSON.parse(JSON.stringify(P.MIXER_NO_SERVICES))),void(ve&&ve(ge,Je));ge=w.error.wr;var yt="";if((0,k.QP)(Se))yt=Se;else{var xt=ee(Se);yt=xt.code+" "+xt.msg}Je="request media server fail, error: "+me+" "+yt,this.logger.error("".concat(ze," http fail ").concat(Je)),ve&&ve(ge,Je)},getStopMixStreamParams:function(me,Se,ge){var ve={id_name:this.stateCenter.idName,live_channel:this.roomID,appid:this.stateCenter.appid,version:"3.11.0"},ee={request_seq:this.stateCenter.getSeq(),room_id:this.roomID};if((0,k.QP)(me)&&(ve.task_id=me,ee.task_id=me),Se!=null){var ze=void 0;ve.stream_id=ze=this.stateCenter.testEnvironment?"zegotest-"+this.stateCenter.appid+"-"+Se:Se,ee.is_url=0,ee.target=ze}else ge!=null&&(ve.mixurl=ge,ee.is_url=1,ee.target=ge);return{req_body:ve,mixStopReq:ee}},getMixStreamStatus:function(me){this.logger.info("zb.sh.fmss call");for(var Se=0;Se<me.length;Se++){var ge=me[Se],ve=ge.trans_type.replace("mixpushstatus:",""),ee=ve.replace(this.stateCenter.appid+":",""),ze=this.mixStreamTaskList[ee],Je=JSON.parse(ge.trans_data),yt=Je.request_id;if(ze&&ze.requestId===yt){var xt=parseInt(Je.version);xt<=ze.mixStatusVer&&xt!=1?this.logger.info("zb.sh.fmss data ver is not new"):this.fetchMixStreamStatus(ve)}else this.logger.info("zb.sh.fmss taskId don't exist"),this.mixRequestIdList.push(yt)}},fetchMixStreamStatus:function(me){var Se=this;this.mixStreamProtoBuf||(this.mixStreamProtoBuf=new _);var ge={request_seq:this.stateCenter.getSeq(),task_id:me},ve=this.mixStreamProtoBuf.encodeGetMixStreamStatusReq(ge),ee=me.replace(this.stateCenter.appid+":","");this.sendMixRequest({interfaceID:13},ve,function(ze,Je){var yt=(function(st){try{var Dt=Se.mixStreamProtoBuf.decodeGetMixStreamStatusRsp(st);(0,G.M$)(Dt),Se.logger.info("zb.sh.fmss rsp "+JSON.stringify(Dt));var qt=Dt.common_response;return{code:qt.code,msg:qt.message,push_url:Dt.push_url,request_seq:Dt.request_seq,task_id:Dt.task_id,version:Dt.version}}catch{return{code:-1}}})(ze),xt=yt.code,Ye=yt.msg,J=yt.push_url,He=yt.task_id,Le=yt.version;if(xt!==void 0&&xt!==0||!(0,k.Cs)(Le))Se.logger.warn("zb.sh.fmss fail "+xt+" "+Ye);else{var Ue=Se.mixStreamTaskList[ee];if(!Ue)return void Se.logger.info("zb.sh.fmss taskId don't exist");if(Le<=Ue.mixStatusVer&&Le!=1)return void Se.logger.warn("zb.sh.fmss data ver is not new");Ue.mixStatusVer=Le;var _t=[];J.forEach(function(st){_t.push({url:st.url,state:Ve[st.status],updateReason:pe[st.reason],stateTime:T.isLong(st.mod_time)?st.mod_time.toNumber():st.mod_time})}),Se.stateCenter.actionListener("mixerRelayCDNStateUpdate",He,_t)}},function(ze,Je,yt){Se.logger.warn("zb.sh.fmss http fail "+ze+" "+JSON.stringify(yt))})},startMixHb:function(me){var Se=this;this.logger.info("zb.sh.smh.0 call");var ge={request_seq:this.stateCenter.getSeq(),task_id:"".concat(me)},ve=this.mixStreamProtoBuf.encodeMixStreamTaskHbReq(ge);this.sendMixRequest({interfaceID:12},ve,function(ee,ze){var Je=(function(He){try{var Le=Se.mixStreamProtoBuf.decodeMixStreamTaskHbRsp(He);(0,G.M$)(Le),Se.logger.info("zb.sh.smh.0 rsp "+JSON.stringify(Le));var Ue=Le.common_response;return{code:Ue.code,msg:Ue.message,status:Le.status,hb_interval:Le.hb_interval}}catch{return{code:-1}}})(ee),yt=Je.code,xt=Je.msg,Ye=Je.status,J=Je.hb_interval;yt===void 0||yt===0?(Se.logger.info("zb.sh.smh.0 suc ".concat(Ye," ").concat(J)),(0,k.Cs)(J)&&Ye===0&&(!Se.mixStreamHbList[me]&&(Se.mixStreamHbList[me]={}),Se.mixStreamHbList[me].timer=setTimeout(function(){Se.startMixHb(me)},1e3*J))):Se.logger.info("zb.sh.smh.0 fail ".concat(yt," ").concat(xt))},function(ee,ze,Je){Se.logger.info("zb.sh.smh.0 send err ".concat(ee," ").concat(Je))})}},rt={type:"MixStream",install:function(me,Se){for(var ge in Ee)Object.defineProperty(me.prototype,ge,{value:Ee[ge],writable:!1});for(var ge in Oe)Object.defineProperty(Se.prototype,ge,{value:Oe[ge],writable:!1})}}},9728:function(ot,Re,Z){var I,P,Pe,ke,ce;Z.d(Re,{Xk:function(){return ke},zN:function(){return ce}}),(function(Ne){Ne[Ne.AspectFill=0]="AspectFill",Ne[Ne.AspectFit=1]="AspectFit"})(I||(I={})),(function(Ne){Ne[Ne.ZegoFontTypeSourceHanSans=0]="ZegoFontTypeSourceHanSans",Ne[Ne.ZegoFontTypeAlibabaSans=1]="ZegoFontTypeAlibabaSans",Ne[Ne.ZegoFontTypePangMenZhengDaoTitle=2]="ZegoFontTypePangMenZhengDaoTitle",Ne[Ne.ZegoFontTypeHappyZcool=3]="ZegoFontTypeHappyZcool"})(P||(P={})),(function(Ne){Ne[Ne.ZegoAudioMixModeRaw=0]="ZegoAudioMixModeRaw",Ne[Ne.ZegoAudioMixModeFocused=1]="ZegoAudioMixModeFocused"})(Pe||(Pe={})),(function(Ne){Ne[Ne.ZegoAudioCodecIDNormal=1]="ZegoAudioCodecIDNormal",Ne[Ne.ZegoAudioCodecIDNormal2=2]="ZegoAudioCodecIDNormal2",Ne[Ne.ZegoAudioCodecIDLow3=6]="ZegoAudioCodecIDLow3"})(ke||(ke={})),(function(Ne){Ne[Ne.ZegoEncodeProfileDefault=0]="ZegoEncodeProfileDefault",Ne[Ne.ZegoEncodeProfileBaseline=1]="ZegoEncodeProfileBaseline",Ne[Ne.ZegoEncodeProfileMain=2]="ZegoEncodeProfileMain",Ne[Ne.ZegoEncodeProfileHigh=3]="ZegoEncodeProfileHigh"})(ce||(ce={}))}},_e={};function ye(ot){var Re=_e[ot];if(Re!==void 0)return Re.exports;var Z=_e[ot]={exports:{}};return $[ot].call(Z.exports,Z,Z.exports,ye),Z.exports}ye.n=function(ot){var Re=ot&&ot.__esModule?function(){return ot.default}:function(){return ot};return ye.d(Re,{a:Re}),Re},ye.d=function(ot,Re){for(var Z in Re)ye.o(Re,Z)&&!ye.o(ot,Z)&&Object.defineProperty(ot,Z,{enumerable:!0,get:Re[Z]})},ye.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),ye.o=function(ot,Re){return Object.prototype.hasOwnProperty.call(ot,Re)},ye.r=function(ot){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ot,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ot,"__esModule",{value:!0})};var Fe={};return(function(){ye.r(Fe),ye.d(Fe,{WebRTCUtil:function(){return hr},ZegoExpressEngine:function(){return fd}});var ot,Re,Z=ye(3052),I=ye(2638);(function(s){s[s.CN=2]="CN",s[s.NA=3]="NA",s[s.EU=4]="EU",s[s.AS=5]="AS",s[s.IN=6]="IN",s[s.NCN=7]="NCN"})(ot||(ot={})),(function(s){s[s.ZegoDefined=0]="ZegoDefined",s[s.UserUnregister=1]="UserUnregister"})(Re||(Re={}));var P,Pe,ke;(function(s){s[s.disconnected=0]="disconnected",s[s.connecting=1]="connecting",s[s.connected=2]="connected"})(P||(P={})),(function(s){s[s.tryProbe=0]="tryProbe",s[s.probed=2]="probed"})(Pe||(Pe={})),(function(s){s[s.replaceNew=0]="replaceNew",s[s.changeResolution=1]="changeResolution"})(ke||(ke={}));var ce,Ne={0:{code:1,description:"user_stop_publishing_stream_normal"},1:{code:2,description:"user_heart_beat_timeout"},2:{code:3,description:"user_repeat_login"},3:{code:4,description:"user_kicked_out"},4:{code:5,description:"user_offline"},100:{code:6,description:"remove_by_server"}};(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.CDN=1]="CDN",s[s.RTC=2]="RTC",s[s.L3=3]="L3"})(ce||(ce={}));var tt,Qe;(function(s){s[s.publish_quality=0]="publish_quality",s[s.play_quality=1]="play_quality",s[s.charge=2]="charge"})(tt||(tt={})),(function(s){s[s.low=1]="low",s[s.stantard=2]="stantard",s[s.hight=3]="hight",s[s.custome=4]="custome"})(Qe||(Qe={}));var ne,oe,fe={stop:0,start:1,waiterAnswer:2,sendCandidate:4,iceConnected:5,iceDisconnected:6,iceClosed:7,iceFailed:8};(function(s){s[s.Delete=0]="Delete",s[s.Add=1]="Add"})(ne||(ne={})),(function(s){s[s.captureFpsToLow=1001]="captureFpsToLow",s[s.captureVolumeToLow=1002]="captureVolumeToLow",s[s.sendVideoBitrateToLow=1003]="sendVideoBitrateToLow",s[s.sendFpsToLow=1004]="sendFpsToLow",s[s.sendAudioBitrateToLow=1005]="sendAudioBitrateToLow",s[s.receiveVolumeToLow=1006]="receiveVolumeToLow",s[s.receiveAudioDecodedFail=1007]="receiveAudioDecodedFail",s[s.receiveVideoDecodedFail=1008]="receiveVideoDecodedFail",s[s.receiveVideoFpsDecodedToLow=1009]="receiveVideoFpsDecodedToLow",s[s.renderVideoFpsToLow=1010]="renderVideoFpsToLow",s[s.captureFpsNormal=2001]="captureFpsNormal",s[s.captureVolumeNormal=2002]="captureVolumeNormal",s[s.sendVideoBitrateNormal=2003]="sendVideoBitrateNormal",s[s.sendFpsNormal=2004]="sendFpsNormal",s[s.sendAudioBitrateNormal=2005]="sendAudioBitrateNormal",s[s.receiveVolumeNormal=2006]="receiveVolumeNormal",s[s.receiveAudioDecodedNormal=2007]="receiveAudioDecodedNormal",s[s.receiveVideoDecodedNormal=2008]="receiveVideoDecodedNormal",s[s.receiveVideoFpsDecodedNormal=2009]="receiveVideoFpsDecodedNormal",s[s.renderVideoFpsNormal=2010]="renderVideoFpsNormal"})(oe||(oe={}));var Y,re,K,M;(function(s){s[s.PortraitSegmentation=0]="PortraitSegmentation"})(Y||(Y={})),(function(s){s[s.BASE_LINE=1]="BASE_LINE",s[s.MAIN=2]="MAIN",s[s.HIGH=3]="HIGH"})(re||(re={})),(function(s){s[s.METHOD_UNSET=0]="METHOD_UNSET",s[s.METHOD_GET=1]="METHOD_GET",s[s.METHOD_POST=2]="METHOD_POST",s[s.METHOD_PUT=3]="METHOD_PUT",s[s.METHOD_PATCH=4]="METHOD_PATCH",s[s.METHOD_DELETE=5]="METHOD_DELETE",s[s.METHOD_HEAD=6]="METHOD_HEAD",s[s.METHOD_OPTIONS=7]="METHOD_OPTIONS"})(K||(K={})),(function(s){s[s.SERVICE_UNSET=0]="SERVICE_UNSET",s[s.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",s[s.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",s[s.SERVICE_MIX=3]="SERVICE_MIX",s[s.SERVICE_ZEUS=4]="SERVICE_ZEUS",s[s.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",s[s.SERVICE_L3=6]="SERVICE_L3",s[s.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",s[s.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",s[s.SERVICE_ZIM=9]="SERVICE_ZIM",s[s.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",s[s.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",s[s.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",s[s.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",s[s.SERVICE_QUALITY=14]="SERVICE_QUALITY",s[s.SERVICE_SECURITY=15]="SERVICE_SECURITY",s[s.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",s[s.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",s[s.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",s[s.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",s[s.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",s[s.SERVICE_CDN=21]="SERVICE_CDN",s[s.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",s[s.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",s[s.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",s[s.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",s[s.SERVICE_ECHO=26]="SERVICE_ECHO",s[s.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",s[s.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR"})(M||(M={}));var F,T={width:320,height:240,frameRate:15,bitRate:300},_={width:640,height:480,frameRate:15,bitRate:800},E={width:1280,height:720,frameRate:20,bitRate:1500},w={frameRate:20,bitRate:800},R={frameRate:15,bitRate:1500},V={frameRate:5,bitRate:2e3};(function(s){s[s.IPv4Only=0]="IPv4Only",s[s.IPv4Prefer=1]="IPv4Prefer",s[s.IPv6Prefer=2]="IPv6Prefer"})(F||(F={}));var ae,q,k,G,xe,Ae,De,Ie,be,qe,Ve={0:"IPv4Only",1:"IPv4Prefer",2:"IPv6Prefer"};(function(s){s[s.IPv4=0]="IPv4",s[s.IPv6=1]="IPv6"})(ae||(ae={})),(function(s){s[s.kV4Only=0]="kV4Only",s[s.kV4AndV6=1]="kV4AndV6",s[s.kV6AndV4=2]="kV6AndV4"})(q||(q={})),(function(s){s[s.ZV4Only=0]="ZV4Only",s[s.ZV4Priority=1]="ZV4Priority",s[s.ZV6Priority=2]="ZV6Priority",s[s.ZV6AndV4Priority=3]="ZV6AndV4Priority"})(k||(k={})),(function(s){s[s.unreachable=0]="unreachable",s[s.unknown=1]="unknown",s[s.reachable=2]="reachable"})(G||(G={})),(function(s){s[s.probed=0]="probed",s[s.noProbe=1]="noProbe",s[s.probing=2]="probing"})(xe||(xe={})),(function(s){s[s.LOGOUT=0]="LOGOUT",s[s.TRY_LOGIN=1]="TRY_LOGIN",s[s.LOGIN=2]="LOGIN"})(Ae||(Ae={})),(function(s){s[s.RSP=0]="RSP",s[s.PUSH=1]="PUSH"})(De||(De={})),(function(s){s.Logining="LOGINING",s.Logined="LOGINED",s.LoginFailed="LOGIN_FAILED",s.Reconnecting="RECONNECTING",s.Reconnected="RECONNECTED",s.ReconnectFailed="RECONNECT_FAILED",s.Kickout="KICKOUT",s.Logout="LOGOUT",s.LogoutFailed="LOGOUT_FAILED"})(Ie||(Ie={})),(function(s){s[s.ZegoRoomTransparentMessageModeOnlyClient=0]="ZegoRoomTransparentMessageModeOnlyClient",s[s.ZegoRoomTransparentMessageModeOnlyServer=1]="ZegoRoomTransparentMessageModeOnlyServer",s[s.ZegoRoomTransparentMessageModeClientAndServer=2]="ZegoRoomTransparentMessageModeClientAndServer"})(be||(be={})),(function(s){s[s.ZegoRoomTransparentMessageNormal=0]="ZegoRoomTransparentMessageNormal",s[s.ZegoRoomTransparentMessageSequence=1]="ZegoRoomTransparentMessageSequence"})(qe||(qe={}));var pe={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},SDK_NOT_SPECIAL:{code:1001005,msg:"sdk require special"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},GEO_SET_ERROR:{code:1000018,msg:"geo set error"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},MULTI_ROOM_COUNT_EXCEED:{code:1002037,msg:"login rooms exceeds the upper limit"},ROOM_ROOMID_INCORRECT:{code:1002002,msg:"have not logged in with this room ID"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_EXTRA_INFO_KEY_LIMIT:{code:1002017,msg:"room extra info key exceed the limit"},DIFFERENT_USER_ID:{code:1002018,msg:"In multi-room mode, only the same user id can be used."},NO_PUBLISH_AUTH:{code:1002082,msg:"Token does not have the permission to publish current stream."},USER_HAD_LOGIN_OTHER:{code:1002086,msg:"the user had logined in other device"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID:{code:1002064,msg:"the roomID is used by the login room interface"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},TOKEN_USERID_ERROR:{code:1002077,msg:"the token userid error"},NATIVE_TOKEN_EXPIRED:{code:1002078,msg:"token expire error"},WHITE_BOARD_VERSION_ERROR:{code:1002098,msg:"Mismatch with RTC SDK version, please upgrade ZegoSuperBoard or ZegoWhiteboardView SDK to the latest version"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."},UPLOAD_LOG_ERROR:{code:1102025,msg:"upload zip logs failed"}},j=ye(4908),B=ye(4872),nt=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],he=ye(8866),it=ye(955),wt=ye.n(it),Ee=ye(5178),Oe=ye.n(Ee),rt="TOKEN_ERROR",me="TOKEN_EXPIRED",Se="ROOM_INNER_ERROR";function ge(s,e,t){e.success&&(t[s+"SuccessCallback"]=e.success),e.error&&(t[s+"ErrorCallback"]=e.error)}function ve(s,e){return e[s+"SuccessCallback"]}function ee(s,e,t,n){ge(s,{success:function(r,o){for(var a=[],l=2;l<arguments.length;l++)a[l-2]=arguments[l];(function(d,p,u,v,x){switch(u){case"eventStart":d.eventStart(p,v);break;case"eventEndWithMsgInfo":d.eventEndWithMsgInfo(p,v,x[0]);break;case"addEventMsg":d.addEventMsg(p,v,x[0],x[1]);break;case"addEvent":d.addEvent(p,v);break;case"eventEnd":d.eventEnd(p,v);break;case"addMsgInfo":d.addMsgInfo(p,x[0])}})(e,t,r,o,a)}},n)}function ze(s,e){return{code:s,msg:e||"liveroom error"}}function Je(s,e){delete e[s+"SuccessCallback"],delete e[s+"ErrorCallback"]}function yt(s,e){var t={code:s,message:"server error"};return t.code=s+52e6,e&&(t.message=e),t}function xt(s,e){var t={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:rt,2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:rt,5022:"MULTI_ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return s>2e5&&s<3e5?t[s-2e5]||Se:s<2e5?{50013:"USER_HAD_LOGIN_OTHER",50116:rt,50117:me,50118:rt,50119:rt,50120:rt,50121:rt,50122:rt,50123:me,50124:rt,50125:rt,50126:rt,50127:rt,50128:rt}[s]||t[s]||Se:t[s]||Se}function Ye(s,e,t,n){var r,o=[],a=[],l=[],d=[];t||(t=[]);for(var p=0;p<t.length;p++)if(t[p].anchor_id_name!=s&&t[p].id_name!=s&&t[p].user_id!=s){r=!1;for(var u=0;u<e.length;u++)if(t[p].stream_id===e[u].stream_id){t[p].extra_info!==e[u].extra_info&&l.push(t[p]),JSON.stringify(t[p].stream_attr_opts)!==JSON.stringify(e[u].stream_attr_opts)&&d.push(t[p]),r=!0;break}r||o.push(t[p])}for(var v=0;v<e.length;v++)if(e[v].anchor_id_name!=s&&e[v].id_name!=s&&e[v].user_id!=s){r=!1;for(var x=0;x<t.length;x++)if(e[v].stream_id===t[x].stream_id&&t[x].stream_state!==1){r=!0;break}r||a.push(e[v])}for(e.splice(0),p=0;p<t.length;p++)e.push(t[p]);n(o,a,l,d)}function J(s,e,t){return e=e??1,t=t??1e4,(0,B.Cs)(s)&&s%1==0&&s>=e&&s<=t}function He(s,e){var t,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(e=e||n.length,s)for(t=0;t<s;t++)r[t]=n[0|Math.random()*e];else{var o=void 0;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",t=0;t<36;t++)r[t]||(o=0|16*Math.random(),r[t]=n[t==19?3&o|8:o])}return r.join("")}function Le(s,e,t){return s.push(e),s.length>t&&s.shift(),s.reduce(function(n,r){return n+r})/s.length}function Ue(s){return s<600?97-Math.pow(.09*s,1.1):18*Math.exp(.002*(600-s))}function _t(s,e){if(e)return s<=55?99-Math.pow(.8*s,1.18):I.Bl.PoorMinQuality;var t=100*s;return t<=40?96-Math.pow(t,1.22):I.Bl.PoorMinQuality}function st(s,e,t){if((0,B.TE)(t))return Math.min(Ue(s),_t(e,!0));var n=(function(r){return r<=50?98-Math.pow(r,1.15):I.Bl.PoorMinQuality})(t);return .15*n+.85*Math.min(Ue(s),_t(e,!1))}function Dt(s){return s>=I.Bl.ExcellentMinQuality?I.b3.Excellent:s>=I.Bl.GoodMinQuality?I.b3.Good:s>=I.Bl.MiddleMinQuality?I.b3.Middle:s>=I.Bl.PoorMinQuality?I.b3.Poor:I.b3.Die}function qt(){var s=!!window.RTCRtpScriptTransform;if(!s){var e=!!RTCRtpSender.prototype.createEncodedStreams,t=!1;try{new ReadableStream,t=!0}catch{console.error("Transferable streams are not supported.")}s=e&&t}return s}function Lt(){return typeof RTCPeerConnection.prototype.setConfiguration=="function"}function ut(s){for(var e,t=0,n=s.length,r="";t<n;)e=s.subarray(t,Math.min(t+32768,n)),r+=String.fromCharCode.apply(null,Array.from(e)),t+=32768;return btoa(r)}function Yt(s){var e=[];return s.getTracks().forEach(function(t){e.push(t.kind==="audio"?"mic(".concat(t.id,",").concat(t.label,",").concat(t.muted,",").concat(t.enabled,",").concat(t.readyState,")"):"camera(".concat(t.id,",").concat(t.label,",").concat(t.muted,",").concat(t.enabled,",").concat(t.readyState,")"))}),e.join("|")}function wn(s,e,t,n){var r=n!=null&&n.streamID?" ".concat(n.streamID," "):"";e.info(s.kind==="audio"?t+" mic(".concat(s.id,",").concat(s.label,",").concat(s.muted,",").concat(s.enabled,",").concat(s.readyState,")"):t+" camera(".concat(s.id,",").concat(s.label,",").concat(s.muted,",").concat(s.enabled,",").concat(s.readyState,")"),{streamid:r})}function Rn(s,e){var t={};if(s)for(var n=0,r=Object.keys(s);n<r.length;n++){var o=r[n];e.includes(o)||(t[o]=s[o])}return t}var jn=function(s){var e=0;if(s.length==0)return e;for(var t=0;t<s.length;t++)e=(e<<5)-e+s.charCodeAt(t),e&=e;return e>>>0};function Mn(s,e,t){var n=new Date().getTime(),r=(0,I.wN)(),o="".concat(s,"_").concat(e,"_").concat(t,"_").concat(n,"_").concat(r);return jn(o)}function Pn(s,e){return(s&1<<e)>>e}function ci(){var s=window.navigator.userAgent,e=window.ActiveXObject!=null&&s.indexOf("MSIE")!=-1,t=s.indexOf("Firefox")!=-1,n=window.opr!=null,r=s.indexOf("Chrome")&&window.chrome,o=s.indexOf("Safari")!=-1&&s.indexOf("Version")!=-1;return e?"IE":t?"Firefox":n?"Opera":r?"Chrome":o?"Safari":"Unkown"}function Nr(){var s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((s==null?void 0:s.effectiveType)||(s==null?void 0:s.type)||"unknown").toUpperCase()}function nr(s,e){return wt().encrypt(s,e).toString()}function Nn(s,e){try{return wt().decrypt(s,e).toString(Oe())}catch{return""}}function _r(s,e){try{localStorage.setItem(s,e)}catch{}}function $n(s){try{return localStorage.getItem(s)}catch{}}function Dr(s,e,t,n){return{interResolve:function(r){s.uploadReport(e),t(r)},interReject:function(r,o){var a;o===void 0&&(o=""),(a=r.code<2e9&&r.code>1e9?yt(r.code,r.msg):{code:r.code,message:r.msg})&&s.addMsgInfo(e,{error:a.code,message:a.message+o}),s.uploadReport(e),n({errorCode:r.code||r.errorCode})}}}function Gr(s){return!(!s.startsWith("wss")||s.indexOf("test")===-1||!s.endsWith("ws"))}function Or(s){try{var e=Uint8Array.from((function(r){var o,a,l,d,p,u,v;for(u=r.length,p=0,v="";p<u;){do o=nt[255&r.charCodeAt(p++)];while(p<u&&o==-1);if(o==-1)break;do a=nt[255&r.charCodeAt(p++)];while(p<u&&a==-1);if(a==-1)break;v+=String.fromCharCode(o<<2|(48&a)>>4);do{if((l=255&r.charCodeAt(p++))==61)return v;l=nt[l]}while(p<u&&l==-1);if(l==-1)break;v+=String.fromCharCode((15&a)<<4|(60&l)>>2);do{if((d=255&r.charCodeAt(p++))==61)return v;d=nt[d]}while(p<u&&d==-1);if(d==-1)break;v+=String.fromCharCode((3&l)<<6|d)}return v})(s),function(r){return r.charCodeAt(0)}),t=new DataView(e.buffer),n=void 0;return n=(0,B.JO)(t.getBigInt64)?t.getBigUint64(0):(function(r,o,a){var l=a.getUint32(r,o),d=a.getUint32(r+4,o),p=o?l+Math.pow(2,32)*d:Math.pow(2,32)*l+d;return Number.isSafeInteger(p)||console.warn(p,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),p})(0,!1,t),Number(n>0?n:t.getBigUint64(0,!0))}catch{console.error("token error")}return-1}function mi(s){var e=new Date().getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(r=="x"?o:3&o|8).toString(36)});if(s===0){var n=(function(r){var o=document.createElement("canvas"),a=o.getContext("2d"),l=r;a.textBaseline="top",a.font="14px 'Arial'",a.fillStyle="#f60",a.fillRect(125,1,62,20),a.fillStyle="#069",a.fillText(l,2,15),a.fillStyle="rgba(102, 204, 0, 0.7)",a.fillText(l,4,17);var d=o.toDataURL().replace("data:image/png;base64,",""),p=(function(u){var v,x,U,te="";for(v=0,x=(u+="").length;v<x;v++)te+=(U=u.charCodeAt(v).toString(16)).length<2?"0"+U:U;return te})(atob(d).slice(-16,-12));return p})("hello, zego");t=n+t.slice(8)}return t}function Ar(){var s=Z.GG.NT_UNKNOWN,e="",t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return(e=((t==null?void 0:t.effectiveType)||(t==null?void 0:t.type)||"unknown").toUpperCase()).indexOf("4G")>-1?s=Z.GG.NT_4G:e.indexOf("2G")>-1?s=Z.GG.NT_2G:e.indexOf("3G")>-1?s=Z.GG.NT_3G:e.indexOf("WIFI")>-1?s=Z.GG.NT_WIFI:e.indexOf("LINE")>-1?s=Z.GG.NT_LINE:e.indexOf("NONE")>-1&&(s=Z.GG.NT_NONE),s}var sr,kn,Jn=ye(2799),Mr=1,ar={product:"rtc_web",importLevel:Z.t0.H,levels:[0,10,100,1e3],bps:32e3},oi="0c9e6e0f8c0a8f4e",gi="z_net_access_servers",go="z_net_http3_access_servers",xi="z_net_v6_access_servers",ui="z_net_http3_v6_access_servers",no="z_appconfig",Ui="z_appconfig_etag",vi="z_geos",Br="z_rtc_domains",ur={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],logreportDomain:"weblogger-wss.coolfcloud.com",prefixDomain:"accesshub-wss",rtcLogPath:"zglog/ws",wssV6preFixDomain:"accesshub-wss-v6",normalPriDomains:["coolbcloud.com","coolgcloud.com"],specialDomain:"cooldcloud.com",mode:"online",modeNo:Jn.Mode.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},Qr="weblogger-wss",qr="detaillog-global",Bi=[{id:2,relative_geofencings:[],accesshub:"accesshub-wss-geo-2",wssV6Accesshub:"accesshub-wss-geo-2-v6",logreport:"weblogger-wss-geo-2",detaillog:"detaillog-geo-2"},{id:3,relative_geofencings:[7],accesshub:"accesshub-wss-geo-3",wssV6Accesshub:"accesshub-wss-geo-3-v6",logreport:"weblogger-wss-geo-3",detaillog:"detaillog-geo-3"},{id:4,relative_geofencings:[7],accesshub:"accesshub-wss-geo-4",wssV6Accesshub:"accesshub-wss-geo-4-v6",logreport:"weblogger-wss-geo-4",detaillog:"detaillog-geo-4"},{id:5,relative_geofencings:[7],accesshub:"accesshub-wss-geo-5",wssV6Accesshub:"accesshub-wss-geo-5-v6",logreport:"weblogger-wss-geo-5",detaillog:"detaillog-geo-5"},{id:6,relative_geofencings:[7],accesshub:"accesshub-wss-geo-6",wssV6Accesshub:"accesshub-wss-geo-6-v6",logreport:"weblogger-wss-geo-6",detaillog:"detaillog-geo-6"},{id:7,relative_geofencings:[3,4,5,6,1],accesshub:"accesshub-wss-geo-7",wssV6Accesshub:"accesshub-wss-geo-7-v6",logreport:"weblogger-wss-geo-7",detaillog:"detaillog-geo-7"}],Vn=[2,3,4,5,6],mr="zm.0",lr="zm.wl",ti="zm.slf",Q="zm.lg",dt="zm.lo",Be="zm.sr",Te="zm.fac",$e="zm.fac.tk",Ge="zm.hlu",mt="zm.cna",vt="zm.gsac",St="zm.zpl.url",It="zm.glgf",Nt="zm.scsu",Gt="zm.on",Ut="zm.off",Wt="zm.rntk",an="zm.emr",en="zm.rm.lg",Cn="zm.rm.tl",Un="zm.rm.lgr",On="zm.rm.lo",Xn="zm.rm.rr",Zn="zm.rm.kco",Sr="zm.rm.gwl",gr="zm.hhl",ir="zm.hb.st",Ti="zm.hb.rsp",eo="zm.rrh.hlf",_i="zm.us.ftu",Vr="zm.us.urp",li="zm.us.uph",di="zm.us.mg",Wr="zm.st.at",Wn="ON_LISTENER",Ji="zm.st.ofls",hi="zm.lrh.sm",Ii="zm.lrh.hp",ie="zm.lrh.hsp",L="zm.lrh.gs",ue="zm.lrh.lgi",je="zm.lrh.ful",Xe="zm.lrh.lgo",ft="zm.lrh.sru",bt="zm.lrh.scc",Rt="zm.lrh.hd",Pt="zm.lrh.hb",Vt="zm.tc.ii",$t="zm.nt.od",ln=function(s){return s},qn=function(s){return s},Tn=function(s){return s},Sn=function(s){return s},_n=function(s){return s},Gn={event:"/sdk/init",error:{kInvalidParamError:pe.INPUT_PARAM},system_info:Tn,servers:function(s){return s},is_from_cache:_n,project:Tn,liveroom_version:Tn,biz_type:Sn,lua_md5:Tn,sev_env:Tn,use_na:Sn},cr="listener",Ur="/sdk/set_debug",Hr=Tn,Jr={event:"/sdk/set_log_config",error:{kInvalidParamError:pe.INPUT_PARAM},log_level:function(s){return s},remote_log_level:Tn,log_url:Tn},Er="/log/upload",Kr={event:"/sdk/login",room_id:Tn,room_sid_string:Tn,user_state_update:Sn,max_member_cnt:Sn,message:Tn,token:Tn,svr_env:Tn,server:Tn,try_cnt:Sn,room_mode:Sn,role:Sn,audience_create_room:Sn,liveroom_sid_string:Tn,error:{ROOM_ID_NULL:pe.ROOM_ID_NULL,INPUT_PARAM:pe.INPUT_PARAM,ROOM_ID_TOO_LONG:pe.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:pe.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:pe.USER_ID_NULL,USER_ID_TOO_LONG:pe.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:pe.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:pe.USER_NAME_NULL,USER_NAME_TOO_LONG:pe.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:pe.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:pe.LOGIN_TIMEOUT,INNER_ERROR:pe.ROOM_INNER_ERROR,NETWORK_BROKEN:pe.NETWORK_BROKEN,ROOM_COUNT_EXCEED:pe.ROOM_COUNT_EXCEED,DIFFERENT_USER_ID:pe.DIFFERENT_USER_ID,LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID:pe.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID}},Go="/sdk/sublogin",$o={event:"/zpush/login",sdk_zpush_sessionid_string:Tn},Uu={event:"/liveroom/enter"},wc={event:"/sdk/renew_token",error:{INPUT_PARAM:pe.INPUT_PARAM,NOT_LOGIN:pe.NOT_LOGIN},token:Tn},vh="/zpush/hb_timeout",Qo={event:"/sdk/logout",error:{INPUT_PARAM:pe.INPUT_PARAM,ROOM_ROOMID_INCORRECT:pe.ROOM_ROOMID_INCORRECT},room_id:Tn,room_sid_string:Tn,is_multi:_n,is_send_cmd_net:_n,liveroom_sid_string:Tn,reason:Tn},yh="/switch/logout_user",pd="/liveroom/quit",Xc=Tn,md=Tn,gd="/zpush/multi_logout_user",Pl="/sdk/relogin",Bu={event:"/liveroom/tempbroken"},$c={event:"/sdk/reconnect",room_broken_time:Sn},_a={event:"/sdk/disconnect",valid_d:Sn,total_d:Sn,tempbroken_cnt:Sn},bh="/sdk/kickout",vd=Sn,Gs=Sn,Cc={event:"/liveroom/hb",room_id:Tn,room_sid_string:Tn,interval:Sn,stream_seq:Sn,server_user_seq:Sn,error:{NOT_LOGIN:pe.NOT_LOGIN,HB_TIMEOUT:pe.TIMEOUT}},yd="/liveroom/recv_user_update_info",_h="/sdk/listener",eu={event:"/sdk/enable_multi_room",is_multi:_n,error:{kInvalidParamError:pe.INPUT_PARAM,kAlreadyLoginError:pe.ALREADY_LOGIN}},zu="/cloud_setting/cache",ju=qn,Qs="/cloud_setting/refresh",qu=qn,Rc=qn,fi="/cloud_setting/request",Sh=qn,bd=qn,Nl={event:"/liveroom/get_current_user_list",user_index:Sn,is_time_ascend:_n,use_na:Sn},Ws="/zegoconn/connect",_d=Tn,Sa=Sn,Ea="/zegoconn/create_socket",Sd="/zegoconn/disconnect",Ed=Tn,Td=Tn,Dl=Sn,Vu="/zegoconn/auto_dispatch",nc=ln,xc=ln,Js=ln,Hu=ln,Fu="/zegoconn/request",wd=qn,Ol="/sdk_config/init",rc=qn,Gu=Sn,Qu={event:"/zegoconn/proxy_connect",service_no:Sn,proxy_link_sources:Sn,recv_time:Sn,connect_stream:Sn},Cd={event:"/zegoconn/proxy_broken",service_no:Sn},Rd={event:"/zegoconn/proxy_disconnect",service_no:Sn},Eh=[50116,50118,50119,50120,50121,50122,50124,50125,50126,50127,50128],Ic=(function(){function s(){this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}return s.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,(0,B.Cs)(e)&&e<3600&&(this.RETRY_MAX_TIME=e),(0,B.Cs)(t)&&(this.RETRY_START_TIME_INTERVAL=t),(0,B.Cs)(n)&&(this.RETRY_CONTINUE_COUNT=n),(0,B.Cs)(r)&&(this.RETRY_MAX_TIME_INTERVAL=r)},s.prototype.invalid=function(){this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},s.prototype.isRetrying=function(){return this.retryTimer!==null||this.startRetryTimer!==null||this.maxTimer!==null},s})(),Ft=ye(8627),Lr=(sr=function(s,e){return sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},sr(s,e)},function(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=s}sr(s,e),s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}),Ao=function(s,e,t){if(t||arguments.length===2)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},tu=(function(s){function e(t,n,r){var o=s.call(this)||this;return o.an=t,o.pn=n,o.Ar=r,o.zr=0,o.Dr=0,o.Pr=3,o.Mr="",o.lastError=0,o.loginCompleted=!1,o.loginRoomCallback={},o}return Lr(e,s),Object.defineProperty(e.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),e.prototype.renewLocalToken=function(t,n){this.token=t,this.Ar.token=this.token;var r=new Date().getTime(),o=parseInt(t.substring(0,2)),a=void 0;if(n&&(0,B.Cs)(n))a=1e3*n;else if((0,B.QP)(t)&&o>=3){var l=1e3*Or(t.substring(2));this.an.info("zm.rm.rlt time "+l+" "+r+" "+this.pn.local_time_deviation),a=l-(r-this.pn.local_time_deviation)}a&&this.roomHandler.resetTokenTimer(a),this.an.setTokenInfo(t),this.pn.actionListener("_tokenRenewed",t,this.Ar.roomID)},e.prototype.initRoom=function(t,n,r,o,a){this.roomHandler=t,this.roomID=n,this.renewLocalToken(r),this.user=o,this.config=a},e.prototype.active=function(t,n){var r,o,a,l=this;t===void 0&&(t=!1),this.an.info(en+" retry call "+((r=this.Ar)===null||r===void 0?void 0:r.roomID)+" "+t);var d=!((o=this.loginRoomCallback)===null||o===void 0)&&o.success?Go:Pl;if(this.jr||(this.jr=this.cr.createSpan(I.t0.H,{key:Kr.event,par:this.roomID},{key:d,par:this.roomID},d,!0),this.Mr=d),this.roomHandler.setRunState(Z.UV.trylogin),this.Ar.isMulti&&((a=this.pn.roomModulesList.find(function(x){return!x.isMulti}))===null||a===void 0?void 0:a.runState)!==Z.UV.login)this.an.info(en+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.an.info(en+" has actived, ignore");else{var p=this.pn.networkState==Z.D2.offline;if(p){if(this.an.info(en+" check if really offline. "+this.Dr),this.Dr>=this.Pr)return void this.an.warn(en+" network is broken, stop retry")}else this.Dr=0;if(this.isOverTime)this.an.info(en+" retry over time, stop retry");else{var u=function(){l.an.info(en+" interval "+l.retryActiveInterval),l.retryTimer=setTimeout(function(){l.roomHandler.login(l.roomID,l.token,l.user,l.config,function(x){l.pn.networkState=Z.D2.online,l.handleLoginFinish(x)},function(x,U){l.handleLoginFinish(!1,x,U)},n),l.retryTimer&&clearTimeout(l.retryTimer),l.retryTimer=null,p?l.Dr++:l.retryActiveCount++},t?0:1e3*l.retryActiveInterval)};if(this.retryActiveCount==1)(0,he.UY)().then(function(x){l.retryActiveInterval=Math.floor(x*(1-l.RETRY_START_TIME_INTERVAL)+l.RETRY_START_TIME_INTERVAL),u()}).catch(function(x){l.retryActiveInterval=.5*l.RETRY_START_TIME_INTERVAL,u()});else{var v=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1));this.retryActiveInterval=v>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:v,u()}}}},e.prototype.startMaxTime=function(){var t=this;this.maxTimer||(this.an.info(en+" start max timer"),this.zr===0&&(this.zr=new Date().getTime()),this.maxTimer=setTimeout(function(){var n;t.an.info(en+" over max time ".concat(t.RETRY_MAX_TIME,"s, stop retry")),t.isOverTime=!0,t.roomHandler.resetRoom(),t.zr!==0&&(n=(n=new Date().getTime()-t.zr)>0?n:void 0),t.qr(!1,pe.LOGIN_TIMEOUT),t.jr&&(t.cr.spanEnd({key:t.Mr,par:t.roomID},{error:pe.LOGIN_TIMEOUT.code,message:pe.LOGIN_TIMEOUT.msg,try_time:n}),t.jr=null),t.loginRoomCallback.fail&&(t.loginRoomCallback.fail(pe.LOGIN_TIMEOUT),t.roomHandler.disconnectedHandle(pe.LOGIN_TIMEOUT),t.resetCallBack())},1e3*this.RETRY_MAX_TIME))},e.prototype.stopMaxTime=function(){this.an.info(en+" stop max timer"),this.zr!==0&&(this.zr=0),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.onactive=function(t,n){},e.prototype.retryLoginRoom=function(t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1),!this.maxTimer&&this.startMaxTime(),n&&this.Ar.resetSessionInfo(),this.active(t,r)},e.prototype.handleError=function(t,n){if(this.RETRY_MAX_TIME<3)return!1;var r=t.code;if(n){var o=[200207,200208];if(r>=40001&&r<=40100||r>=50200&&r<=50299||[201002,30019].includes(r))return this.Ar.resetSessionInfo(),!0;var a=Ao(Ao([202002,205030,205035],Eh,!0),[50013],!1);return r===10015?(this.Ar.retryConnect(),!0):!(a!=null&&a.includes(r))&&(!!o.includes(r)||this.Ar.lastRunState==Z.UV.login&&(this.an.warn("zm.rrh.he reset"),this.Ar.resetUserSession(),this.invalid(),!0))}return!0},e.prototype.setLoginRoomCallback=function(t,n){this.loginRoomCallback.success=t,this.loginRoomCallback.fail=n},e.prototype.loginFail=function(t){this.roomHandler.resetRoom(),this.qr(!1,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack())},e.prototype.handleLoginFinish=function(t,n,r){var o;if(this.an.info(eo+" "+t+" "+JSON.stringify(n)),n){if(this.jr){var a=void 0;this.zr!==0&&(a=(a=new Date().getTime()-this.zr)>0?a:void 0),this.cr.spanEnd({key:this.Mr,par:this.roomID},{error:n.code,message:n.msg,try_time:a}),this.jr=null}if(this.handleError(n,r))this.an.info(eo+" retry"),[40001].includes(n.code)?(this.pn.roomModulesList.forEach(function(p){p.userHandler.updateUserDelete(p.roomID)}),this.retryLoginRoom(!1,!1,pe.NETWORK_RECOVERY)):this.retryLoginRoom();else{this.an.info(eo+" reset"),this.roomHandler.resetRoom(),this.qr(t,n);var l=this.Lr(n.code);if(this.loginRoomCallback.fail){this.loginRoomCallback.fail(n);var d="";r&&n.code===Ft.E9Y.code&&(d=JSON.stringify({server_code:l})),this.roomHandler.disconnectedHandle(n,{extendedData:d}),this.resetCallBack()}}}else a=void 0,this.zr!==0&&(a=(a=new Date().getTime()-this.zr)>0?a:void 0),this.qr(t,{code:0,msg:""}),this.jr&&(this.cr.spanEnd({key:this.Mr,par:this.roomID},{room_id:this.roomID,room_sid_string:(o=this.Ar)===null||o===void 0?void 0:o.roomSidString,try_time:a}),this.jr=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(t),this.resetCallBack())},e.prototype.invalid=function(){this.an.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.Dr=0},e.prototype.qr=function(t,n){this.stopMaxTime(),this.invalid(),this.onactive(t,n)},e.prototype.Lr=function(t){return I.Kk+t},e.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0,this.loginCompleted=!0},e.prototype.resetError=function(){this.lastError=0},e})(Ic);(function(s){s.NOT_EMPTY="NOT_EMPTY",s.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",s.TYPE_STRING="TYPE_STRING",s.TYPE_INTEGER="TYPE_INTEGER",s.TYPE_OBJECT="TYPE_OBJECT",s.MAX_LENGTH_10="MAX_LENGTH_10",s.MAX_LENGTH_64="MAX_LENGTH_64",s.MAX_LENGTH_100="MAX_LENGTH_100",s.MAX_LENGTH_128="MAX_LENGTH_128",s.MAX_LENGTH_256="MAX_LENGTH_256",s.MAX_LENGTH_1024="MAX_LENGTH_1024"})(kn||(kn={}));var Po={error:{code:0,msg:"suc"}},ic={NOT_EMPTY:function(s,e,t,n,r){return e===void 0||e===""||e===null?(n.error("".concat(t," ").concat(s," is empty")),r):Po},ILLEGAL_CHARACTERS:function(s,e,t,n,r){return(0,he.jy)(e)?Po:(n.error("".concat(t," ").concat(s," contains illegal characters")),r)},TYPE_STRING:function(s,e,t,n,r){return(0,B.QP)(e)?Po:(n.error("".concat(t," ").concat(s," must be string")),r)},TYPE_INTEGER:function(s,e,t,n,r){return(0,he.zQ)(e,!1)?Po:(n.error("".concat(t," ").concat(s,"  must be integer number")),r)},TYPE_OBJECT:function(s,e,t,n,r){return e&&(0,B.w)(e)?Po:(n.error("".concat(t," ").concat(s,"  must be object")),r)},MAX_LENGTH_10:function(s,e,t,n,r){return e.length>10?(n.error("".concat(t," ").concat(s," is too long")),r):Po},MAX_LENGTH_64:function(s,e,t,n,r){return e.length>64?(n.error("".concat(t," ").concat(s," is too long")),r):Po},MAX_LENGTH_100:function(s,e,t,n,r){return e.length>100?(n.error("".concat(t," ").concat(s," is too long")),r):Po},MAX_LENGTH_128:function(s,e,t,n,r){return e.length>128?(n.error("".concat(t," ").concat(s," is too long")),r):Po},MAX_LENGTH_256:function(s,e,t,n,r){return e.length>256?(n.error("".concat(t," ").concat(s," is too long")),r):Po},MAX_LENGTH_1024:function(s,e,t,n,r){return e.length>1024?(n.error("".concat(t," ").concat(s," is too long")),r):Po}};function nu(s,e){var t=[],n={};for(var r in s)n[s[r].order]=s[r],s[r].key=r;for(var o in n)t.push(n[o]);for(var a=0;a<t.length;a++)for(var l=t[a].rules,d=0;d<l.length;d++){var p={key:t[a].key,value:t[a].value,action:e.action,logger:e.logger},u=p.value,v=l[d].name?""+l[d].name:"";if((u===void 0&&v===kn.NOT_EMPTY||u!==void 0)&&ic[v]){var x=ic[v](p.key,u,p.action,p.logger,l[d]);if(x!=Po)return x}}return Po}var Ps=ye(5733),Ll=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Ml=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Ta=(function(){function s(e,t){this.an=e,this._dataReport=t,this.id="",this._debug=!1,this.appConfigEtag=-1,this.appConfigFetched=!1,this.customSetLogURL=!1,this.requestList={},this.mode=Jn.Mode.MODE_ONLINE,this.connectState="connected",this.testNetPackageSize=!1,this.netGeoFencing={},this.agentIpStackDetection={IPv4:G.unknown,IPv6:G.unknown},this.isFlutter=!1,this.agentConnectIPStackType=ae.IPv4,this.advanceConfig={},this.svrDomains={},this.userListenerList=["roomUserUpdate","roomOnlineUserCountUpdate","IMRecvCustomCommand","IMRecvBroadcastMessage","roomExtraInfoUpdate","IMRecvBarrageMessage","roomStateUpdate","tokenWillExpire","roomStateChanged","recvRoomTransparentMessage"],this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_netAppConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_stopStream:[],roomStateChanged:[],_userTransUpdate:[],_uaHeartBeatTimeout:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[],_beforeSwitchRoom:[],_afterSwitchRoom:[],_experimentalAPICallback:[],recvRoomTransparentMessage:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=Z.D2.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this.Br=!1,this._sdkVersion="unknown",this.Ur=void 0,this.mode=ur.modeNo}return Object.defineProperty(s.prototype,"selectIPStackMode",{get:function(){var e;return this.settingConfig.getSettingWithUserParams("ip_stack_mode",(e=lt.engineOptions)===null||e===void 0?void 0:e.ipStackMode)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,Ps.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,Ps.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,Ps.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.Gr:0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enableWSLog",{get:function(){var e,t;return((t=(e=this.appConfig)===null||e===void 0?void 0:e.log_config)===null||t===void 0?void 0:t.ws_log)===1||this.Br},enumerable:!1,configurable:!0}),s.prototype.getRequestId=function(){return this.idName+"-"+(0,I.Mo)()},s.prototype.actionListener=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=["roomStateChanged","roomExtraInfoUpdate","tokenWillExpire"].includes(e);if(o&&this.listenerList[e]){var a=this.reporter.createSpan(I.t0.H,{key:cr},{key:""},_h);a.setAttributes({listener:e,listener_params:JSON.stringify(n)}),a.end()}o&&this.an.info("zm.al ".concat(e," ").concat(JSON.stringify(n),". pageID: ").concat(lt.pageID," , instID: ").concat(this.id)),this.listenerList[e]&&this.listenerList[e].forEach(function(l){if(t.userListenerList.includes(e))setTimeout(function(){try{l.apply(void 0,n)}catch(d){throw t.an.error(Wr+" "+e+" "+JSON.stringify(d)),d}},0);else try{l.apply(void 0,n)}catch(d){throw t.an.error(Wr+" "+e+" "+JSON.stringify(d)),d}})},s.prototype.onListener=function(e,t){return this.listenerList[e]?(0,B.JO)(t)?(this.listenerList[e].indexOf(t)==-1&&this.listenerList[e].push(t),!0):(this.an.error(Wn+" listener callBack must be funciton"),!1):(this.an.error(Wn+" event "+e+" no found"),!1)},s.prototype.offListener=function(e,t){return this.listenerList[e]?(0,B.JO)(t)?(this.listenerList[e].indexOf(t)!==-1&&(this.listenerList[e]=this.listenerList[e].filter(function(n){return n!==t})),!0):(this.an.error(Ji+" listener callBack must be funciton"),!1):(this.an.error(Ji+" event "+e+" no found"),!1)},Object.defineProperty(s.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),s.prototype.getLogWhiteList=function(e,t){var n,r;return e===void 0&&(e=!1),t===void 0&&(t=5),Ll(this,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le,se=this;return Ml(this,function(We){switch(We.label){case 0:o=""+t,a=(0,he.fU)(this.reporter,I.t0.H,"","/log/whitelist",Gn.event),(0,B.Cs)(l=this.Ur)&&((0,he.P1)(l),this.Ur=void 0),d=((r=(n=this.appConfig)===null||n===void 0?void 0:n.log_config)===null||r===void 0?void 0:r.ws_log)===1,t===5&&(this.an.enableWebSocketLog(d||!this.logDomain),o+=" ; ws_log: ".concat(d)),We.label=1;case 1:return We.trys.push([1,3,,4]),t--,[4,this.an.getWhiteList()];case 2:return p=We.sent(),o+=" ".concat((0,he.iq)(p)),u=!1,v=!1,x=void 0,p.code===0&&1&(U=p.data).type&&(1&U.upload_log_type&&(x=U,u=!0,e?this.an.uploadStorageLog().catch(function(Ke){se.an.warn("".concat(Sr," all zip log upload error: ")+JSON.stringify(Ke)+Ke)}):this.an.makeZipLogSpaceUpload().catch(function(Ke){se.an.warn("".concat(Sr," history zip log upload error: ")+JSON.stringify(Ke)+Ke)})),this.Br=v=!!(64&U.upload_log_type),this.an.enableWebSocketLog(this.enableWSLog||!this.logDomain)),(0,he.lA)(a,{need_retry:!1,need_report:u,need_ws:v,log_type:x==null?void 0:x.upload_log_type,log_start_time:x==null?void 0:x.start_time,log_end_time:x==null?void 0:x.end_time}),[3,4];case 3:return te=We.sent(),o+=" ".concat(te),le=!1,t>0&&(le=!0,this.Ur=(0,he.v5)(function(){se.getLogWhiteList(e,t--)},3e3)),a.setAttributes({need_retry:le}),this.reporter.setError(a,{code:-1,message:""+te}),[3,4];case 4:return this.an.info("".concat(Sr," ").concat(o)),[2]}})})},s})(),Wu=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},kc=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Ul=(function(){function s(e,t,n,r,o){this.an=e,this.pn=t,this._dataReport=n,this.Jr=r,this.Ar=o,this.Hr=null,this.Vr=Z.zD,this.Qr=null,this.Yr=0,this.Kr=!1,this.Zr=0,this.Xr=0,this.Wr=36e5}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.$r=function(){var e=this;this.rs(),this.Qr=setTimeout(function(){e.an.warn("zm.hb.to call. "+e.Vr),e.hbLogout(pe.HEARTBEAT_TIMEOUT),e.cr.createSpan(I.t0.H,{key:Kr.event,par:e.Ar.roomID},{key:""},vh).end()},this.Vr)},s.prototype.rs=function(){this.Qr&&clearTimeout(this.Qr)},s.prototype.init=function(e){var t,n,r,o,a=this;this.Kr=!1,this.Xr=0,this.Zr=0,o=(0,B.kb)((t=e.body)===null||t===void 0?void 0:t.hearbeat_interval)?e.body.hearbeat_interval<Z.XV?Z.XV:e.body.hearbeat_interval:Z.Xs,this.Vr=(0,B.kb)((n=e.body)===null||n===void 0?void 0:n.hearbeat_timeout)?(r=e.body)===null||r===void 0?void 0:r.hearbeat_timeout:Z.zD;var l=Math.floor(Math.random()*o);this.rs(),this.Hr&&clearTimeout(this.Hr),this.Hr=setTimeout(function(){a.start(o)},l),this.Yr++},s.prototype.start=function(e){return Wu(this,void 0,void 0,function(){var t,n,r,o,a=this;return kc(this,function(l){switch(l.label){case 0:return this.an.info(ir+" call"),t=this.cr.createSpan(I.t0.H,{key:Kr.event,par:this.Ar.roomID},{key:""},Cc.event),this.Ar.isLogin()?(n=function(d,p){var u,v,x,U,te=!0;if(d.header&&d.body){if((d.body&&d.body.err_code)!==0){var le=yt(d.body.err_code||d.body.code,d.body.err_message||d.body.message);t.setAttributes({error:le.code,message:le.message+d.body.err_code}),te=!1}}else t.setAttributes({error:d.code>0?d.code:pe.ROOM_INNER_ERROR.code,message:d.msg?d.msg:pe.ROOM_INNER_ERROR}),te=!1;a.ss(d,p),((u=d==null?void 0:d.body)===null||u===void 0?void 0:u.err_code)===0&&t.setAttributes({interval:Cc.interval((v=d==null?void 0:d.body)===null||v===void 0?void 0:v.hearbeat_interval),stream_seq:Cc.stream_seq((x=d==null?void 0:d.body)===null||x===void 0?void 0:x.stream_seq),server_user_seq:Cc.server_user_seq((U=d==null?void 0:d.body)===null||U===void 0?void 0:U.server_user_seq)});var se=!1;te?se=!a.Xr||performance.now()-a.Xr>=a.Wr:se=!0,se&&(a.Xr=performance.now(),t.end())},this.Jr.heartBeat(n,n,this.Ar,this.Vr),this.us=e,r=this.us,this.Yr>=2?[4,(0,he.UY)()]:[3,2]):(this.an.error(ir+" state error"),this.Xr=performance.now(),this.cr.setError(t,Cc.error.NOT_LOGIN),[2]);case 1:return o=l.sent(),r=Math.round(o*(this.us+1)),this.Yr=1,[3,3];case 2:r=this.us,l.label=3;case 3:return this.Qr||this.$r(),this.Hr=setTimeout(function(){a.start(a.us)},r),this.an.info(ir+" call success"),[2]}})})},s.prototype.ss=function(e,t){var n,r;if(e.body&&e.body.err_code&&e.body.err_code!==0)return this.an.error(Ti+" disconnect, server error="+e.body.err_code),e.body.err_code==40001?void 0:e.body.err_code==Z.OQ.ROOM_SESSION_ID_ERR?void this.hbLogout(pe.HEARTBEAT_TIMEOUT):void this.hbLogout(ze(e.body.err_code));if(!e.header||!e.body)return this.an.error(Ti+" disconnect, error="+JSON.stringify(e)+", seq = "+t),void this.hbLogout(e);(0,B.kb)((n=e.body)===null||n===void 0?void 0:n.hearbeat_interval)&&(this.us=e.body.hearbeat_interval,this.us<Z.XV&&(this.us=Z.XV)),(0,B.kb)((r=e.body)===null||r===void 0?void 0:r.hearbeat_timeout)&&(this.Vr=e.body.hearbeat_timeout),this.Zr=new Date().getTime(),this.Kr?this.an.info(Ti+" has reset"):this.$r(),this.heartbeatRspNotiFy(e,this.Ar.roomID),this.an.info(Ti+" call success "+t)},s.prototype.heartbeatRspNotiFy=function(e,t){},s.prototype.hbLogout=function(e){},s.prototype.resetHeartbeat=function(){clearTimeout(this.Hr),this.Hr=null,this.Kr=!0,this.rs(),this.Yr=0,this.Xr=0,this.Zr=0,this.an.info("zm.hb.rst call success")},s})(),Ju={code:1102026,msg:"cancel login"},zn=function(s){return(function(e){var t=unescape||window.unescape;return Uint8Array.from(Array.from(t(encodeURIComponent(e))).map(function(n){return n.charCodeAt(0)}))})(s=s??"")},So=function(s){return(function(e){var t=escape||window.escape;return decodeURIComponent(t(String.fromCharCode.apply(String,Array.from(e))))})(s)};function wa(s){if(typeof TextEncoder<"u")return new TextEncoder().encode(s).length;for(var e=0,t=0;t<s.length;t++){var n=s.charCodeAt(t);e+=n<=127?1:n<=2047?2:n<=65535?3:4}return e}var Ca="DISCONNECTED",ps="CONNECTED",Ku="CONNECTING",ki=ye(7202),Yu=(function(){function s(e,t,n,r,o){this.an=e,this.pn=t,this._dataReport=n,this.Ar=r,this.Jr=o,this.cs=null,this.hs=1e4,this.fs=null,this.ls=0,this.ds=0,this.validTime=0,this.totalTime=0,this.brokenCounts=0,this.vs=0,this.ps=0,this.gs=!1,this.loginCallback={}}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_s",{get:function(){return this.Ar.roomID},enumerable:!1,configurable:!0}),s.prototype.resetTokenTimer=function(e){var t=this;this.an.info("zm.rm.rst  call: "+(e=(e=(e-=3e4)<0?0:e)>2147483647?2147483647:e)),this.fs&&clearTimeout(this.fs),this.fs=setTimeout(function(){t.pn.actionListener("tokenWillExpire",t._s),t.pn.actionListener("roomTokenWillExpire",t._s)},e)},s.prototype.ys=function(){this.fs&&clearTimeout(this.fs),this.fs=null},s.prototype.setRunState=function(e){this.Ar.runState!==e&&(this.Ar.lastRunState=this.Ar.runState,this.Ar.runState=e)},s.prototype.ws=function(){this.cs&&clearTimeout(this.cs),this.cs=null},s.prototype.Ss=function(e){var t,n,r,o,a,l,d,p,u=this.cr.createSpan(I.t0.H,{key:Qo.event,par:this._s},{key:""},this.pn.isMultiRoom?pd:yh);e&&this.Jr.zPushSid==="0"&&(this.Jr.zPushSid=(n=(t=this.Jr)===null||t===void 0?void 0:t.switchSessionID)===null||n===void 0?void 0:n.toString()),this.updateTimes();var v=e?(r=this.Jr)===null||r===void 0?void 0:r.zPushSid:(a=(o=this.Jr)===null||o===void 0?void 0:o.switchSessionID)===null||a===void 0?void 0:a.toString();u.setAttributes({room_id:Qo.room_id((l=this.Ar)===null||l===void 0?void 0:l.roomID),room_sid_string:Qo.room_sid_string((d=this.Ar)===null||d===void 0?void 0:d.roomSidString),liveroom_sid_string:Xc((p=this.Ar)===null||p===void 0?void 0:p.userSidString),sdk_zpush_sessionid_string:md(v),valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),u.end()},s.prototype.resetRoom=function(e){var t,n=this;if(this.an.info(Xn+" call"),this.pn.roomModulesList.length>1&&!e&&(this.Ar.isMulti=!0),this.ws(),this.Ar.sessionExist&&this.Ar.runState!==Z.UV.logout&&!this.Ar.isDisConnect()){var r=function(a){n.ks(a,!n.Ar.isMulti)};this.Jr.logout(this.Ar,r,r)}this.Ss(e),this.setRunState(Z.UV.logout),this.Ar.resetRoomSession(),this.Ar.resetUserSession(),this.Ar.isMulti||(this.pn.userid="",this.an.setSessionInfo(this.pn.appid,this._s,this.Ar.userSidString,this.pn.idName,this.pn.nickName,this.pn.sdKVersion),(t=this.Jr)===null||t===void 0||t.reset()),this.resetRoomCallBack(),this.pn.roomModulesList=this.pn.roomModulesList.filter(function(a){return a!==n.Ar});var o=this.pn.roomModulesList[0];o&&(o.isMulti=!1,o.runState!==Z.UV.login&&o&&o.retryRoom()),this.pn.isMultiRoom&&this.pn.roomModulesList.length===0&&(this.cr.createSpan(I.t0.H,{key:Qo.event,par:this._s},{key:""},gd).end(),this.Jr.zPushSid="0"),this.an.info(Xn+" call success")},s.prototype.resetRoomCallBack=function(){},s.prototype.loginSuccessCallBack=function(e,t){},s.prototype.handlePushKickout=function(e,t,n){var r,o,a,l,d,p=this;this.an.info(Zn+"  call "+JSON.stringify(e));var u=(function(te){var le={code:te,message:"kickout reason = "+te},se={code:63000005,message:"zpush token expired",name:me};switch(te){case 1:return{code:63000001,message:"zpush multiple login kickout",name:"MULTIPLE_LOGIN_KICKOUT"};case 2:return{code:63000002,message:"zpush manual kickout",name:"MANUAL_KICKOUT"};case 4:return se;default:le.code=te,le.message="kickout reason = "+te}return le})(e.body.reason||((r=e.body)===null||r===void 0?void 0:r.kickout_reason)),v=this.cr.createSpan(I.t0.H,{key:Kr.event,par:this._s},{key:""},bh);this.updateTimes(),v.setAttributes({error:(o=pe[u.name||"ROOM_INNER_ERROR"])===null||o===void 0?void 0:o.code,message:u.message,kickout_reason:vd(((a=e.body)===null||a===void 0?void 0:a.reason)||((l=e.body)===null||l===void 0?void 0:l.kickout_reason)),need_relogin:Gs((d=e==null?void 0:e.body)===null||d===void 0?void 0:d.need_relogin),valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),v.end();var x=this.Ar.roomTryHandler;if(x)if(x.onactive=function(te,le){p.an.info(Zn+" onactive"),p.disconnectedHandle(le),p.pn.actionListener("_kickout",le)},e.body.need_relogin&&e.body.need_relogin==1)this.Ar.retryRoom(!1,!0);else{this.setRunState(Z.UV.logout),this.resetRoom(t);var U={};e&&e.body.custom_reason?U.custom_kickout_message=e.body.custom_reason:u.name&&pe[u.name]&&(U.custom_kickout_message=pe[u.name].msg+"; kickout reason: "+(e.body.reason||e.body.kickout_reason)),this.disconnectedHandle(u.name&&pe[u.name]?pe[u.name]:pe.ROOM_INNER_ERROR,{extendedData:JSON.stringify(U),isKickout:!0}),this.pn.actionListener("_kickout",{code:pe.MANUAL_KICKOUT.code,msg:pe.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason})}else this.an.info(Zn+" try handler no found")},s.prototype.handleHbLogout=function(e){var t,n=this,r=this.Ar.roomTryHandler;r&&(r.onactive=function(o,a){n.an.warn(gr+" onactive"),n.transError(a),n.disconnectedHandle(a)},[pe.HEARTBEAT_TIMEOUT.code].includes(e==null?void 0:e.code)||[105,152,2001].includes(e==null?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?[pe.HEARTBEAT_TIMEOUT.code].includes(e.code)?(this.pn.roomModulesList.forEach(function(o){o.roomTryHandler&&(o.roomTryHandler.lastError=pe.NETWORK_RECOVERY.code)}),this.Ar.retryRoom(!1,!1,pe.NETWORK_RECOVERY)):((t=this.Ar.roomTryHandler)===null||t===void 0?void 0:t.lastError)===pe.NETWORK_RECOVERY.code?this.Ar.retryRoom(!1,!1,pe.NETWORK_RECOVERY):this.Ar.retryRoom():[pe.TIMEOUT.code,pe.SOCKET_CLOSE.code].includes(e==null?void 0:e.code)?this.an.warn(gr+" timeout "+(0,he.iq)(e)):(this.an.warn(gr+" unexpected error: ".concat(JSON.stringify(e))),this.logoutByError(e)))},s.prototype.logoutByError=function(e){var t=this.Ar.roomTryHandler;t&&(t.stopMaxTime(),t.invalid(),this.resetRoom(),this.disconnectedHandle(e))},s.prototype.onConnecting=function(e){this._roomStateHandle(Ku,Ie.Logining,e)},s.prototype.disconnectedHandle=function(e,t){if(e&&e.code!==0){this.ys();var n=t!=null&&t.isKickout?Ie.Kickout:Ie.ReconnectFailed;this.transError(e),this._roomStateHandle(Ca,n,e,(t==null?void 0:t.extendedData)||e.msg)}else this._roomStateHandle(ps,Ie.Reconnected,e,t==null?void 0:t.extendedData)},s.prototype.updateTimes=function(){this.updateValidTime(),this.updateTotalTime()},s.prototype.updateValidTime=function(){this.vs&&(this.validTime=this.validTime+Date.now()-this.vs,this.vs=0)},s.prototype.updateTotalTime=function(){this.ps&&(this.totalTime=Date.now()-this.ps)},s.prototype._roomStateHandle=function(e,t,n,r,o){var a,l,d,p,u=this,v=this.Ar.roomID,x=Date.now();if(t&&t==Ie.Reconnecting){if(this.ds++,this.ls===0&&(this.ls=new Date().getTime(),this.roomSpan(Bu,v,t,{error:n,extendedData:r||""})),this.ds===1)return clearTimeout(this.Os),void(this.Os=setTimeout(function(){u.ds===1&&u._roomStateHandle(e,t,n,r,o)},8e3));clearTimeout(this.Os)}this.an.info("zm.rm.scb "+e+" "+JSON.stringify(n)),[ps,Ca].includes(e)&&(this.ds=0,clearTimeout(this.Os),this.gs&&this.brokenCounts++),e!==ps&&this.updateTimes(),t&&[Ie.LoginFailed,Ie.ReconnectFailed].includes(t)&&(t=!((a=this.Ar.roomTryHandler)===null||a===void 0)&&a.loginCompleted?Ie.ReconnectFailed:Ie.LoginFailed),t&&[Ie.Logined,Ie.Reconnected].includes(t)&&(!((l=this.Ar.roomTryHandler)===null||l===void 0)&&l.loginCompleted?t=Ie.Reconnected:(t=Ie.Logined,this.ps=this.ps||x),this.gs=!1,this.vs=x),t&&[Ie.Logining,Ie.Reconnecting].includes(t)&&(t=!((d=this.Ar.roomTryHandler)===null||d===void 0)&&d.loginCompleted?Ie.Reconnecting:Ie.Logining,this.ps&&(this.gs=!0));var U=0;switch(t){case Ie.Reconnecting:break;case Ie.ReconnectFailed:p=_a,this.ls!==0&&(this.ls=0);break;case Ie.Reconnected:p=$c,this.ls!==0&&(U=new Date().getTime()-this.ls,this.ls=0)}if(this.Ar.lastRoomState=this.Ar.roomState,this.Ar.roomState=e,this.Ar.roomReasonState=t,this.Ar.roomState!==this.Ar.lastRoomState){this.pn.actionListener("_roomStateUpdate",v,e,n?n.code:0,r,t,o);var te=(n==null?void 0:n.code)||0;te==Ju.code&&(te=0),this.pn.actionListener("roomStateUpdate",v,e,te,r),this.pn.actionListener("roomStateChanged",v,t,te,r),p&&this.roomSpan(p,v,t,{error:n,extendedData:r||"",brokenTime:U})}e===Ca&&(this.ps=0,this.totalTime=0,this.validTime=0,this.brokenCounts=0)},s.prototype.roomSpan=function(e,t,n,r){var o,a,l=this.cr.createSpan(I.t0.H,{key:Kr.event,par:t},{key:""},e.event);l.setAttributes(n===Ie.Reconnected?{room_broken_time:$c.room_broken_time((r==null?void 0:r.brokenTime)||0)}:{error:((o=r==null?void 0:r.error)===null||o===void 0?void 0:o.code)||0,message:(r==null?void 0:r.extendedData)||""}),e===Bu&&l.setAttributes({last_hb_success_ts:(a=this.Ar.heartBeatHandler)===null||a===void 0?void 0:a.Zr}),e==_a&&l.setAttributes({valid_d:this.validTime,total_d:this.totalTime,tempbroken_cnt:this.brokenCounts}),l.end()},s.prototype.transError=function(e){if(this.an.info("zm.rm.te "+JSON.stringify(e)),e.code!==0&&(e.code<2e9&&e.code>1e9||e.code<1e6)){var t=xt(e.code);t&&pe[t]&&(e.code=pe[t].code,e.msg=pe[t].msg)}},s.prototype.login=function(e,t,n,r,o,a,l){if(this.an.info(en+" call:"+e),this.an.remoteReport(en+" call:"+t),!this.Ar.isMulti&&this.an.setSessionInfo(this.pn.appid,e,"",n.userID,"",this.pn.sdKVersion),r){var d=r.userUpdate,p=r.maxMemberCount;d&&(0,B.dd)(d)&&(this.Ar.userStateUpdate=d),p&&(0,B.Cs)(p)&&(this.Ar.maxMemberCount=p)}if(!this.pn.configOK)return this.an.error(en+" init sdk wrong"),void a(pe.INIT);this.Ar.runState!==Z.UV.trylogin&&this.setRunState(Z.UV.trylogin),this.Ar.isCancelLogin=!1,this.Ar.roomID=e,this.Ar.token=t,this.Ar.thirdToken=t,this.pn.idName=n.userID,this.pn.nickName=n.userName||n.userID,this.loginCallback.success=o,this.loginCallback.fail=a,this.Is=this.Ar.isMulti?Uu:$o,this.cr.createSpan(I.t0.H,{key:Go,bak_key:Pl,par:this._s},{key:this.Is.event,par:this._s},this.Is.event,!0),this.ws(),this.onConnecting(l||{code:0,msg:""}),this.Rs(),this.an.info(en+" call success")},s.prototype.Rs=function(){var e,t,n,r,o=this;if(this.Ar.runState===Z.UV.trylogin)if(this.Ar.isMulti&&this.Ar.isDisConnect())this.an.warn(Cn+" liveroom is not connected");else{var a=function(l,d){o.Ts(l,d)};!((e=this.Jr)===null||e===void 0)&&e.isUaConnect?(this.cr.spanSetAttributes({key:this.Is.event,par:(t=this.Ar)===null||t===void 0?void 0:t.roomID},{sdk_zpush_sessionid_string:(r=(n=this.Jr)===null||n===void 0?void 0:n.switchSessionID)===null||r===void 0?void 0:r.toString()}),this.Jr.login(this.Ar,a,a)):(this.cs=setTimeout(function(){o.an.info(Cn+" over time no response, login timeout"),o.loginCallback.fail&&o.loginCallback.fail(Kr.error.LOGIN_TIMEOUT)},this.hs),this.an.warn(Cn+" ua is not connected")),this.an.info(Cn+" call success")}else this.an.error("zb.rh.tl state error")},s.prototype.Ts=function(e,t){if(this.an.info(Un+" seq: "+t+" "+JSON.stringify(e)),this.Ar.runState===Z.UV.trylogin)if(e.header&&e.body){if(e.header.seq!==t&&this.Ar.isMulti==0)return void this.an.error(Un+" in wrong seq, local="+t+",recv="+e.header.seq);e.body.err_code!==0?(this.an.error(Un+" server error="+e.body.err_code),this.As(e)):(this.an.info(Un+" call success."),this.zs(e))}else this.an.error(Un+" "+JSON.stringify(e)),this.As(e);else this.Ar.isCancelLogin?(this.As(Ju),this.Ar.isCancelLogin=!1):this.an.error(Un+" state error")},s.prototype.As=function(e){this.ws();var t=Kr.error.INNER_ERROR;e.header&&e.body?t=ze(e.body.err_code):e.code&&e.msg&&(t=e),this.cr.spanEnd({key:this.Is.event,par:this._s},{error:t.code,message:t.msg}),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},s.prototype.zs=function(e){var t,n,r,o,a;this.Ar.checkRoomSession(e.body.room_session_id)&&(this.Ar.loginTime=Date.now());var l=this.Ar.lastRunState;this.setRunState(Z.UV.login),this.pn.userid=e.body.user_id,this.Ar.longRoomSid=e.body.room_session_id,this.Ar.longSid=e.body.session_id;var d=((t={})[this._s]={room_sid_string:this.Ar.roomSidString},t);this.cr.setPublicPros(d);var p=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.token_remain_time;this.pn.configRoomAuth=p>0;var u=parseInt(this.Ar.token.substring(0,2));if(e.body.ret_timestamp&&u>=3){var v=new Date().getTime(),x=v-e.body.ret_timestamp;this.pn.local_time_deviation=x<5e3?0:x;var U=p>0?1e3*p:1e3*Or(this.Ar.token.substring(2))-(v-this.pn.local_time_deviation);this.resetTokenTimer(U)}!this.Ar.isMulti&&this.an.setSessionInfo(this.pn.appid,this._s,this.Ar.userSidString,this.pn.idName,this.pn.nickName,this.pn.sdKVersion),this.cr.spanEnd({key:this.Is.event,par:this._s},{room_id:(r=this.Ar)===null||r===void 0?void 0:r.roomID,room_sid_string:(o=this.Ar)===null||o===void 0?void 0:o.roomSidString,zpush_sessionid_string:ki.A.isLong(this.Jr.switchSessionID)?this.Jr.switchSessionID.toString():"0",liveroom_sid_string:(a=this.Ar)===null||a===void 0?void 0:a.userSidString}),this.ws(),this.loginSuccessCallBack(l,e),this._roomStateHandle(ps,Ie.Logined,{code:0,msg:""}),this.pn.getLogWhiteList(),this.loginCallback.success&&this.loginCallback.success(!0)},s.prototype.logout=function(e,t){this.an.info(On+" call");var n={code:0,msg:""};this.Ar.runState!==Z.UV.logout?(this.Ar.runState===Z.UV.trylogin&&(this.Ar.isCancelLogin=!0,n=Ju),this.resetRoom(e),this._roomStateHandle(Ca,Ie.Logout,n,void 0,t),this.ys(),this.an.info(On+" call success")):this.an.warn("zb.rh.lo at logout")},s.prototype.ks=function(e,t){var n;this.an.info(On+" result="+(e.body&&e.body.err_code?e.body.err_code:"-1")),t&&((n=this.Jr)===null||n===void 0||n.closeRequest())},s})(),Zu=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},vo=(function(){function s(e,t,n,r,o){this.an=e,this.pn=t,this._dataReport=n,this.Jr=r,this.Ar=o,this.Ds=!1,this.Ns=[],this.Ps=0,this.Ms=0,this.xs=[],this.js=null,this.qs=3e4,this.Ls=5e3,this.Bs={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}return s.prototype.loginRsp=function(e,t){this.Bs=e.body.anchor_info||this.Bs,this.qs=e.body.userlist_interval||this.qs,this.Ls=e.body.userlist_merge_timeout||this.Ls,e.body.anchor_info&&(this.pn.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.pn.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.pn.actionListener("roomOnlineUserCountUpdate",this.Ar.roomID,e.body.online_count),this.an.info("zm.us.lgr  userStateUpdate "+this.Ar.userStateUpdate),this.Ar.userStateUpdate&&this.Us(t)},s.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.Ps&&this.Ar.userStateUpdate&&!this.js&&(this.an.info("zm.us.pt call update user "+this.Ps+" server "+e.body.server_user_seq),this.js||(this.js={}),this.Gs&&clearTimeout(this.Gs),this.Gs=setTimeout(function(){t.Js()},this.Ls)),this.Ms=e.body.server_user_seq,e.body.online_count!=null&&e.body.online_count!=0&&this.pn.actionListener("roomOnlineUserCountUpdate",this.Ar.roomID,e.body.online_count)},s.prototype.resetUserHandler=function(){this.Ds=!1,this.Fs=0,this.Ns=[],this.Ps=0,this.Ms=0,this.xs=void 0,this.js={},this.Gs=void 0,this.Hs=void 0,this.qs=3e4,this.Ls=5e3,this.Bs={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},s.prototype.Us=function(e){this.Ds?this.an.warn(_i+" is already querying"):(this.Ds=!0,this.Ns=[],this.Vs(0,e||0),this.an.info(_i+" the first time call"))},s.prototype.Vs=function(e,t){var n,r=this,o=function(d){r.Qs(d,t)},a={user_index:e,sort_type:0},l=Nl;this.pn.reporter.createSpan(I.t0.H,{key:Kr.event,par:this.Ar.roomID},{key:l.event,par:this.Ar.roomID},l.event,!0).setAttribute("user_index",l.user_index(e)),(n=this.Jr)===null||n===void 0||n.fetchUserList(a,o,o,this.Ar)},s.prototype.Qs=function(e,t){var n,r,o=this;if(this.pn.reporter.spanEnd({key:Nl.event,par:this.Ar.roomID},{error:((n=e==null?void 0:e.body)===null||n===void 0?void 0:n.err_code)||(e==null?void 0:e.code),message:((r=e==null?void 0:e.body)===null||r===void 0?void 0:r.err_message)||(e==null?void 0:e.msg)}),e.body&&e.body.err_code!=0)return this.Ds=!1,this.Fs=Date.now()+this.qs,void this.an.info(Vr+" fetch error "+e.body.err_code);if(!e.header||!e.body)return this.Ds=!1,this.Fs=Date.now()+this.qs,void this.an.info(Vr+" fetch error "+e);if(this.Ar.userStateUpdate){this.Ns=Zu(Zu([],this.Ns,!0),e.body.user_baseinfos);var a=e.body.ret_user_index;if(a!=e.body.server_user_index)return this.an.info(Vr+" fetch another page"),void this.Vs(a+1,t);this.Ps=e.body.server_user_seq;for(var l=[],d=[],p=0;p<this.Ns.length;p++){var u={userID:this.Ns[p].id_name,userName:this.Ns[p].nick_name,role:this.Ns[p].role};u.role!==4&&(l.push(u),d.push({idName:this.Ns[p].id_name,nickName:this.Ns[p].nick_name,role:this.Ns[p].role}))}this.pn.actionListener("_getTotalUserList",this.Ar.roomID,d),t==Z.UV.login?(this.xs&&(function(v,x,U,te){v.debug("msl.0 call");var le,se=[],We=[];U||(U=[]);for(var Ke=0;Ke<U.length;Ke++){le=!1;for(var Ze=0;Ze<x.length;Ze++)if(U[Ke].userID===x[Ze].userID){le=!0;break}le||se.push(U[Ke])}for(var et=0;et<x.length;et++){le=!1;for(var ht=0;ht<U.length;ht++)if(x[et].userID===U[ht].userID){le=!0;break}le||We.push(x[et])}for(x.splice(0),Ke=0;Ke<U.length;Ke++)x.push(x[Ke]);te(se,We),v.debug("msl.0 call success")})(this.an,this.xs,l,function(v,x){v.length!==0&&o.onUserStateUpdate(o.Ar.roomID,"ADD",v),x.length!==0&&o.onUserStateUpdate(o.Ar.roomID,"DELETE",x)}),this.xs=l):(this.xs=l,l.length!==0&&this.onUserStateUpdate(this.Ar.roomID,"ADD",l)),this.Ds=!1,this.Fs=Date.now()+this.qs,this.Ns=[],this.an.info(Vr+" call success user_list "+l+", count: "+l.length+", seq: "+this.Ps)}else this.an.info(Vr+" not update")},s.prototype.handlePushUserStateUpdateMsg=function(e){var t=this;if(this.an.info(li+" call"),this.Ar.userStateUpdate)if(this.Ps!==e.body.user_list_seq)if(this.Ps+e.body.user_actions.length===e.body.user_list_seq){this.Ps=e.body.user_list_seq;for(var n=[],r=0;r<e.body.user_actions.length;r++){var o={action:e.body.user_actions[r].Action,idName:e.body.user_actions[r].IdName,nickName:e.body.user_actions[r].NickName,role:e.body.user_actions[r].Role,loginTime:e.body.user_actions[r].LoginTime};o.role===4||n.push(o)}this.pn.actionListener("_userStateUpdate",e.body.room_id,n);var a=[],l=[];n.forEach(function(d){var p;d.action==1?a.push({userID:d.idName,userName:d.nickName,role:d.role}):d.action==2&&(!((p=t.xs)===null||p===void 0)&&p.find(function(u){return u.userID===d.idName})?l.push({userID:d.idName,userName:d.nickName,role:d.role}):t.an.info(li+" user "+d.idName+" not exist"))}),this.xs&&(this.xs=this.xs.concat(a).filter(function(d){return!l.some(function(p){return p.userID==d.userID})})),a.length!==0&&this.onUserStateUpdate(e.body.room_id,"ADD",a),l.length!==0&&this.onUserStateUpdate(e.body.room_id,"DELETE",l),this.an.info(li+" call success")}else this.Ys(e.body.user_list_seq,e.body.user_actions);else this.an.warn(li+" user_list_seq is the same with local seq");else this.an.info(li+" userStateUpdate is false")},s.prototype.onUserStateUpdate=function(e,t,n){var r=this,o=n.filter(function(a){return a.userID!==r.pn.idName});o.length!=0&&(o=o.map(function(a){return{userID:a.userID,userName:a.userName}}),this.pn.actionListener("roomUserUpdate",e,t,o))},s.prototype.Ys=function(e,t){var n=this;this.js||(this.an.warn(di+" new merge userlist "+this.Ps+" server "+e),this.js={},this.Gs&&clearTimeout(this.Gs),this.Gs=setTimeout(function(){n.Js()},this.Ls)),this.js[e]=t,this.an.warn(di+"  merge userlist "+this.Ps+" server "+e+" userlist "+t.length)},s.prototype.Zs=function(e){var t=this;this.an.info("zm.us.mg merge userlist "+this.Ps+" userSeqList "+e.join(",")),this.Ps=e[e.length-1],this.Fs=Date.now()+this.qs;var n={};e.forEach(function(l){t.js&&t.js[l].forEach(function(d){n[d.IdName]=d})}),this.js=null;var r=Object.values(n).map(function(l){return{action:l.Action,idName:l.IdName,nickName:l.NickName,role:l.Role,loginTime:l.LoginTime?String(l.LoginTime):""}}).filter(function(l){return l.role!==4});r.sort(function(l,d){return l.loginTime.localeCompare(d.loginTime)});var o=[],a=[];r.forEach(function(l){l.action==1?o.push({userID:l.idName,userName:l.nickName,role:l.role}):l.action==2&&a.push({userID:l.idName,userName:l.nickName,role:l.role})}),this.xs=this.xs&&this.xs.concat(o).filter(function(l){return!a.some(function(d){return d.userID==l.userID})}),o.length!==0&&this.onUserStateUpdate(this.Ar.roomID,"ADD",o),a.length!==0&&this.onUserStateUpdate(this.Ar.roomID,"DELETE",a),this.pn.actionListener("_userStateUpdate",this.Ar.roomID,r)},s.prototype.Js=function(){var e=this,t=Object.keys(this.js).map(function(r){return+r}).sort(function(r,o){return r-o});if(t[t.length-1]-t[0]+1===t.length||t[t.length-1]>=this.Ms)this.Zs(t);else{this.js=null;var n=this.Fs-Date.now();this.an.info("zm.us.mto  fetch merge userlist "+this.Ps+" userSeqList "+t.join(",")+" wait "+n),n>0?(this.Hs&&clearTimeout(this.Hs),this.Hs=setTimeout(function(){e.Us()},n)):this.Us()}},s.prototype.updateUserDelete=function(e){this.xs&&this.xs.length&&(this.onUserStateUpdate(e,"DELETE",this.xs),this.xs=[])},s})(),Ra=(function(){function s(e,t,n,r,o,a){this.roomID=e,this.pn=t,this.an=n,this.dataReport=r,this.rtm=o,this.Jr=a,this.runState=Z.UV.logout,this.lastRunState=Z.UV.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomReasonState=Ie.Logout,this.roomSessionID="0",this.sessionID="0",this.longSid=null,this.longRoomSid=null,this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.userStateUpdate=!1,this.maxMemberCount=0,this.roomName="",this.isCancelLogin=!1,this.roomHandler=new Yu(this.an,this.pn,this.dataReport,this,a),this.heartBeatHandler=new Ul(this.an,this.pn,this.dataReport,this.Jr,this),this.userHandler=new vo(this.an,this.pn,this.dataReport,this.Jr,this),this.initMessageHandler(),this.initLiveHandler(),this.init()}return Object.defineProperty(s.prototype,"logger",{get:function(){return this.an},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stateCenter",{get:function(){return this.pn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"liveRoomHandler",{get:function(){return this.Jr},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sessionExist",{get:function(){return this.longSid!==null||this.sessionID!=="0"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"roomSidString",{get:function(){return this.longRoomSid?this.longRoomSid.toString():"0"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"userSidString",{get:function(){return this.longSid?this.longSid.toString():"0"},enumerable:!1,configurable:!0}),s.prototype.initMessageHandler=function(){},s.prototype.initLiveHandler=function(){},s.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},s.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t,n){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e._HBResponse(t,n)}},s.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,n){var r;e.an.info("zm.lrm.brh login suc "+t),e.heartBeatHandler.init(n),e.Jr.startCheck(),e.userHandler.loginRsp(n,t),e.messageHandler&&e.messageHandler.loginRsp(n),(r=e.roomTryHandler)===null||r===void 0||r.resetError(),e.isMulti||e.Ws(),e.io(n)},this.roomHandler.resetRoomCallBack=function(){e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.Jr&&e.Jr.stopCheck(),e.userHandler.resetUserHandler(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},s.prototype.bindUserHandler=function(){},s.prototype.bindMessageHandler=function(){},s.prototype.bindLiveHandler=function(){},s.prototype._HBResponse=function(e,t){this.pn.actionListener("HBResponse",e,t)},s.prototype.io=function(e){this.pn.actionListener("roomLoginResponse",e)},s.prototype.checkRoomSession=function(e){return this.longRoomSid!==null&&this.longRoomSid.eq(e)},s.prototype.Ws=function(){this.pn.roomModulesList.forEach(function(e){var t=e.roomTryHandler;e.runState!==Z.UV.login&&t&&e.isMulti==1&&(t.onactive=function(n,r){if(r&&r.code!==0){var o=xt(r.code);o&&pe[o]&&(r=pe[o]),e.roomHandler._roomStateHandle("DISCONNECTED",Ie.ReconnectFailed,r,r.msg)}else e.roomHandler._roomStateHandle("CONNECTED",Ie.Reconnected,r)},t.lastError===pe.NETWORK_RECOVERY.code?t.retryLoginRoom(!0,!1,pe.NETWORK_RECOVERY):t.retryLoginRoom())})},s.prototype.isLogin=function(){return this.runState===Z.UV.login},s.prototype.isLogout=function(){return this.runState===Z.UV.logout},s.prototype.isTryLogin=function(){return this.runState===Z.UV.trylogin},s.prototype.isDisConnect=function(){return this.Jr.isDisConnect()},s.prototype.retryConnect=function(){this.an.info("zm.lrm.rc call"),this.resetSessionInfo(),this.Jr.closeRequest()},s.prototype.retryRoom=function(e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1),this.an.info("zm.lrm.rr.0 call retryNow:"+e+" resetSession: "+t+" "+(0,he.iq)(n));var r=this.roomTryHandler;r&&this.rtm.isUaConnect&&r.retryLoginRoom(e,t,n)},s.prototype.resetSessionInfo=function(){var e;this.an.info("zm.lrm.rsi call"),this.resetRoomSession(),this.resetUserSession(),(e=this.Jr)===null||e===void 0||e.reset()},s.prototype.resetRoomSession=function(){this.roomSessionID="0",this.longRoomSid=null},s.prototype.resetUserSession=function(){this.sessionID="0",this.longSid=null},s})(),Xu=ye(4883),Bl=(function(){function s(e){e===void 0&&(e=!1),this.close=!1,this.isLoad=!1,this.callBackList=[],this.close=e,this.close||(this.no=new Xu.ZegoSetting)}return s.prototype.setLog=function(e){var t;(t=this.no)===null||t===void 0||t.setLog(e)},s.prototype.init=function(e){var t;(t=this.no)===null||t===void 0||t.init(e)},s.prototype.setEnvVariable=function(e,t){var n;(n=this.no)===null||n===void 0||n.setEnvVariable(e,t)},s.prototype.getEnvVariables=function(){var e;return(e=this.no)===null||e===void 0?void 0:e.getEnvVariables()},s.prototype.fetchSetting=function(e,t,n){return this.no?this.no.fetchSetting(e,t,n):Promise.resolve()},s.prototype.fetchMultiSetting=function(e,t,n){return this.no?this.no.fetchMultiSetting(e,t,n):Promise.resolve()},s.prototype.setOptions=function(e){var t;return this.close||(t=this.no)===null||t===void 0?void 0:t.setOptions(e)},s.prototype.getSettingCache=function(e){var t;return this.no?(t=this.no)===null||t===void 0?void 0:t.getSettingCache(e):Promise.resolve()},s.prototype.setToken=function(e){var t;(t=this.no)===null||t===void 0||t.setToken(e)},s.prototype.setUserID=function(e){var t;(t=this.no)===null||t===void 0||t.setUserID(e)},s.prototype.activePolling=function(){var e;(e=this.no)===null||e===void 0||e.activePolling()},s.prototype.uninit=function(){var e;(e=this.no)===null||e===void 0||e.uninit()},s.prototype.getEnvVariable=function(e){var t;(t=this.no)===null||t===void 0||t.getEnvVariable(e)},s})(),zl=(function(){function s(e){this.eo=-1,this.ro=3e4,this.so=0,this.ro=e}return s.prototype.trigger=function(){var e,t=performance.now();return this.so++,this.eo===-1?(e={toReport:!0,failCount:this.so},this.eo=t,this.so=0):t-this.eo>this.ro?(e={toReport:!0,failCount:this.so},this.eo=t,this.so=0):e={toReport:!1},e},s})(),es=ye(757),or=ye(6493),No=function(){return No=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},No.apply(this,arguments)},Ac=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},$u=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},oc=(function(){function s(e){this.an=e,this.oo=ar.product,this.uo={},this.ao={},this.isUnload=!1,new es.DynamicCode,this.ho=new es.ZegoTracer(lt.proxyCtrl),this.ho.setSampleConfig({level:I.t0.L}),this.lo=(0,or.hU)()}return Object.defineProperty(s.prototype,"tracer",{get:function(){return this.ho},enumerable:!1,configurable:!0}),s.prototype.init=function(e,t,n){var r=this;this.ho.init({product:this.oo,version:"1.0.0",env:t,appID:e,deviceID:n,importantLevel:ar.importLevel,levels:ar.levels,bps:ar.bps,spanStart:function(o){try{(0,B.JO)(window.scriptSpanStart)&&scriptSpanStart(r.ao,r.ho,o)}catch(a){r.an.warn(Vt+" dy span start "+a)}},spanBeforeEnd:function(o){o.setAttribute("ntype_end",Nr())},spanEnd:function(o,a){try{(0,B.JO)(window.scriptSpanEnd)&&scriptSpanEnd(r.ao,r.ho,o)}catch(l){r.an.warn(Vt+" dy span end "+JSON.stringify(l))}},resources:{product:this.oo,appid:e,device_id:n,console:t==0?"rtc":"ali"},deflate:this.an.deflate})},s.prototype.setConfig=function(e){this.ho.setConfig(e)},s.prototype.loadScript=function(e,t,n,r){return Ac(this,void 0,void 0,function(){var o;return $u(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.ho.loadJs(e,t,n,r,`
function scriptSpanStart(states, tracer, span) {
    
}
function scriptSpanEnd(states, tracer, span) {
    if (span['tags']['msg_content']) {
        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;
        delete span['tags']['msg_content'];
    }
    delete span['tags']['resp'];
    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];
    if (filterSpans.includes(span.name)) {
        console.log(span.name + ' do not report');
        span.droped = true;
    }
}
function scriptInit(states, tracer) {

}

`,{})];case 1:return a.sent(),(0,B.JO)(window.scriptInit)&&scriptInit(this.ao,this.ho),[3,3];case 2:return o=a.sent(),this.an.warn("zm.tc.ls load script fail "+JSON.stringify(o)),[3,3];case 3:return[2]}})})},s.prototype.setReporterInfo=function(e,t){var n=new Map;n.set("userID",e),n.set("token",t),this.ho.startReport(n)},s.prototype.flush=function(e){this.ho.flush(e)},s.prototype.destroy=function(){this.ho.destroy()},s.prototype.setCommonStates=function(e){this.ao=e},s.prototype.setResource=function(e){this.ho.setResource(e)},s.prototype.setCommonAttributes=function(e){this.uo=Object.assign({},this.uo,e)},s.prototype.deleteCommonAttributes=function(e){var t=this;e.forEach(function(n){delete t.uo[n]})},s.prototype.createSpan=function(e,t,n){var r=this.ho.createSpan(e,t,{parent:n});return s.reportCustomerContext>0&&r.setAttributes({customer_context:s.reportCustomerContext}),r.setAttributes(No({ntype:Nr(),os_type:this.lo,error:0,message:""},this.uo)),r},s.prototype.spanEnd=function(e,t,n){e&&t&&e.setAttributes(No({},t)),e&&e.end(n)},s.prototype.spanReport=function(e){e&&e.spanReport()},s.prototype.spanSetAttributes=function(e,t){e&&e.setAttributes(t)},s.prototype.spanAppendAttribute=function(e,t,n){e&&e.appendAttribute(t,n)},s.prototype.setError=function(e,t,n){n===void 0&&(n=""),e.setAttributes({error:t.code||t.errorCode,message:(t.msg||t.message||t.extendedData)+" "+n}),e.end()},s.prototype.setLogger=function(e){this.ho.setLogger(e)},s.prototype.setTimeOffset=function(e){this.ho.setTimeOffset(e)},s.prototype.setUnloadState=function(e){this.isUnload=!0,this.ho.setUnloadState(e)},s.prototype.setNetStateCheck=function(){this.ho.setNetStateCheck()},s.prototype.getUploadStatus=function(){return this.ho.getUnloadStatus()},s.reportCustomerContext=0,s})(),sc=function(){return sc=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},sc.apply(this,arguments)},el=["/sdk/start_publish","/publish/start","/publish/restart"],Ks=["/sdk/start_play","/play/start","/play/restart"],ru=(function(){function s(e){this.an=e,this.do={},this.vo={},this.mo={},this.po=new Map,this.tracerHandler=new oc(e)}return s.setReportCustomerContext=function(e){oc.reportCustomerContext=e},s.prototype.init=function(e,t,n){this.tracerHandler.init(e,t,n)},s.prototype.setConfig=function(e){this.tracerHandler.setConfig(e)},s.prototype.loadScript=function(e,t,n,r){return this.tracerHandler.loadScript(e,t,n,r)},s.prototype.setReporterInfo=function(e,t){this.tracerHandler.setReporterInfo(e,t)},s.prototype.flush=function(e){this.tracerHandler.flush(e)},s.prototype.destroy=function(){this.tracerHandler.destroy(),this.po.clear()},s.prototype.setCommonStates=function(e){this.tracerHandler.setCommonStates(e)},s.prototype.setResource=function(e){this.tracerHandler.setResource(e)},s.prototype.setCommonAttributes=function(e){this.tracerHandler.setCommonAttributes(e)},s.prototype.deleteCommonAttributes=function(e){this.tracerHandler.deleteCommonAttributes(e)},s.prototype.clearRoomSpans=function(e){var t=this;e.forEach(function(n){for(var r in t.do)t.do[r].span==null&&delete t.do[r][n]})},s.prototype.setPublicPros=function(e){this.vo=Object.assign({},this.vo,e)},s.prototype.createSpan=function(e,t,n,r,o){var a,l,d,p;if(t&&t.key&&t.par){var u=t.par1?"_"+t.par1:"";!(d=(a=this.do[t.key])===null||a===void 0?void 0:a[t.par+u])&&t.bak_key&&(d=(l=this.do[t.bak_key])===null||l===void 0?void 0:l[t.par+u])}else t&&!(d=this.do[t.key])&&t.bak_key&&(d=this.do[t.bak_key]);return d||(d=this.do[Gn.event]),p=this.tracerHandler.createSpan(e,r,d),t.key==="/sdk/login"&&(p.setAttribute("room_id",t.par),this.vo[t.par]&&p.setAttributes(this.vo[t.par])),(el.includes(t.key)||Ks.includes(t.key))&&p.setAttribute("stream_id",t.par),el.includes(t.key)&&this.vo["_publish_"+t.par]&&p.setAttributes(this.vo["_publish_"+t.par]),Ks.includes(t.key)&&this.vo["_play_"+t.par]&&p.setAttributes(this.vo["_play_"+t.par]),o&&(n.par?(!this.do[n.key]&&(this.do[n.key]={}),this.do[n.key][n.par+(u=n.par1?"_"+n.par1:"")]=p):this.do[n.key]=p),p},s.prototype.setSpanInMap=function(e,t){t.par?(!this.do[t.key]&&(this.do[t.key]={}),this.do[t.key][t.par+(t.par2?"_"+t.par2:"")]=e):this.do[t.key]=e},s.prototype.spanEnd=function(e,t,n,r){var o;e.par?(o=this.do[e.key]&&this.do[e.key][e.par+(e.par1?"_"+e.par1:"")],this.do[e.key]&&!n&&delete this.do[e.key][e.par]):(o=this.do[e.key],!n&&delete this.do[e.key]),this.tracerHandler.spanEnd(o,t,r)},s.prototype.spanReport=function(e){var t;e.par?(t=this.do[e.key]&&this.do[e.key][e.par+(e.par1?"_"+e.par1:"")],this.do[e.key]&&delete this.do[e.key][e.par]):(t=this.do[e.key],delete this.do[e.key]),this.tracerHandler.spanReport(t)},s.prototype.spanSetAttributes=function(e,t){var n;if(e.par){var r=e.par1?"_"+e.par1:"";!(n=this.do[e.key]&&this.do[e.key][e.par+r])&&e.bak_key&&(n=this.do[e.bak_key]&&this.do[e.bak_key][e.par+r])}else!(n=this.do[e.key])&&e.bak_key&&(n=this.do[e.key]);this.tracerHandler.spanSetAttributes(n,t)},s.prototype.spanAppendAttribute=function(e,t,n){var r;if(e.par){var o=e.par1?"_"+e.par1:"";!(r=this.do[e.key]&&this.do[e.key][e.par+o])&&e.bak_key&&(r=this.do[e.bak_key]&&this.do[e.bak_key][e.par+o])}else!(r=this.do[e.key])&&e.bak_key&&(r=this.do[e.key]);this.tracerHandler.spanAppendAttribute(r,t,n)},s.prototype.setError=function(e,t,n){this.tracerHandler.setError(e,t,n)},s.prototype.setLogger=function(e){this.tracerHandler.setLogger(e)},s.prototype.setTimeOffset=function(e){this.tracerHandler.setTimeOffset(e)},s.prototype.setUnloadState=function(e){this.tracerHandler.setUnloadState(e)},s.prototype.setNetStateCheck=function(){this.tracerHandler.setNetStateCheck()},s.prototype.setAPIErrorReport=function(e,t){this.mo[e]=t},s.prototype.getAPIErrorReport=function(e){return this.mo[e]},s.prototype.takeAPIErrorReport=function(e,t,n,r){if(n){var o=this.po.get(e);o||(o=new zl(n),this.po.set(e,o));var a=o.trigger(),l=a.failCount;if(a.toReport){var d=this.createSpan(I.t0.I,{key:Gn.event},{key:""},e);d.setAttributes(sc({api_fail_count:l},r)),this.setError(d,t)}}},s})(),Ai=ye(3788);const ac=ye(6994);(Ai=Ai.default||Ai).util.Long=ac.default||ac,Ai.util.Long.fromBits=Ai.util.Long.fromBits||function(){return 0};for(var ms=Ai.roots,Eo=Ai.types?Ai.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},iu=Ai.types?Ai.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},ts=Object.keys(Eo),Ns={$:function(s){return Ns[s]?Ns[s].call(this):ms[s].decode?ms[s].decode(this,this.uint32()):Ns.$.call(this,"int32")}},Ys={$:function(s,e,t){var n=Eo[s];return n===void 0?ms[s].encode?(this.uint32(t<<3|2).fork(),ms[s].encode(e,this).ldelim()):Ys.$.call(this,"int32",e,t):Ys[s].call(this.uint32(t<<3|n),e)}},Do=0;Do<ts.length;Do++)Ns[ts[Do]]=Ai.Reader.prototype[ts[Do]],Ys[ts[Do]]=Ai.Writer.prototype[ts[Do]];(function s(e,t,n,r){for(var o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];if(e[l].$m&&Object.keys(e[l].$m).every(function(d){return Number(d)})){if(n[l])throw Error(`nested type ${n}.${l} has already exist`);n[l]=(function(d,p){function u(le){for(var se in d){var We=d[se];We[1].charAt(0)==="{"?this[We[0]]={}:We[1].charAt(0)!=="["&&We[1].charAt(0)!=="<"||(this[We[0]]=[])}if(le)for(var Ke=Object.keys(le),Ze=0;Ze<Ke.length;++Ze)le[Ke[Ze]]!=null&&(this[Ke[Ze]]=le[Ke[Ze]])}var v={};for(var x in d){var U=d[x],te=U[1];te.charAt(0)==="{"?(u.prototype[U[0]]=Ai.util.emptyObject,v[te]={$m:te.substring(1).split(",").map(function(le,se){return[`$${se+1}`,le,null]}).reduce(function(le,se,We){return le[We+1]=se,le},{})}):u.prototype[U[0]]=te.charAt(0)==="["||te.charAt(0)==="<"?Ai.util.emptyArray:te==="bytes"?Ai.util.newBuffer([]):U[2]&&U[2].hasOwnProperty("low")&&U[2].hasOwnProperty("high")?Ai.util.Long.fromBits(U[2].low,U[2].high,U[2].unsigned):U[2]}return u.create=function(le){return new u(le)},u.decode=function(le,se){le instanceof Ai.Reader||(le=Ai.Reader.create(le));for(var We=se===void 0?le.len:le.pos+se,Ke=new u;le.pos<We;){var Ze=le.uint32(),et=Ze>>>3;if(et>0&&d[et]){var ht=d[et][0],gt=d[et][1];if(gt.charAt(0)==="{"){Ke[ht]===Ai.util.emptyObject&&(Ke[ht]={});var Et=u.$namespace[gt].decode(le,le.uint32());Ke[ht][Et.$1]=Et.$2}else if(gt.charAt(0)==="["||gt.charAt(0)==="<")if(gt=gt.substring(1),Ke[ht]&&Ke[ht].length||(Ke[ht]=[]),iu[gt=!Ns[gt]&&!ms[gt].decode?"int32":gt]!==void 0&&(7&Ze)==2)for(var At=le.uint32()+le.pos;le.pos<At;)Ke[ht].push(Ns.$.call(le,gt));else Ke[ht].push(Ns.$.call(le,gt));else Ke[ht]=Ns.$.call(le,gt)}else le.skipType(7&Ze)}return Ke},u.encode=function(le,se){for(var We in se||(se=Ai.Writer.create()),d){var Ke=d[We][0],Ze=d[We][1];if(Ze.charAt(0)==="{"){if(le[Ke]!=null&&le.hasOwnProperty(Ke))for(var et=0,ht=Object.keys(le[Ke]);et<ht.length;++et)se.uint32(We<<3|2).fork(),u.$namespace[Ze].encode({$1:ht[et],$2:le[Ke][ht[et]]},se).ldelim()}else if(Ze.charAt(0)==="["||Ze.charAt(0)==="<"){var gt=Ze.charAt(0)==="<";Ze=Ze.substring(1);var Et=le[Ke];if(Et!=null&&Et.length)if(Ze=Eo[Ze]===void 0&&!ms[Ze].encode?"int32":Ze,gt&&iu[Ze]!==void 0){for(se.uint32(We<<3|2).fork(),et=0;et<Et.length;et++)Ys[Ze].call(se,Et[et]);se.ldelim()}else for(et=0;et<Et.length;et++)Ys.$.call(se,Ze,Et[et],We)}else le[Ke]!=null&&le.hasOwnProperty(Ke)&&Ys.$.call(se,Ze,le[Ke],We)}return se},Object.keys(v).length&&(u.$namespace=s(v,t+"."+p,u.$namespace||{},!0)),u})(e[l].$m,l)}else e[l].$s?n[l]=(function(d,p){function u(v,x,U){Ai.rpc.Service.call(this,v,x,U)}return(u.prototype=Object.create(Ai.rpc.Service.prototype)).constructor=u,u.create=function(v,x,U){return new u(v,x,U)},Object.keys(d).forEach(function(v){var x=d[v];function U(te,le){return this.rpcCall(U,ms[x[0]],ms[x[1]],te,le)}Object.defineProperty(U,"name",{value:v}),Object.defineProperty(U,"path",{value:`${t}.${p}`}),u.prototype[v]=U}),u})(e[l].$s,l):e[l].$e&&Object.values(e[l].$e).every(function(d){return Number(d)===d})&&(n[l]=(function(d){for(var p=Object.keys(d),u={},v=0;v<p.length;v++)u[u[p[v]]=d[p[v]]]=p[v];return u})(e[l].$e));n[l]&&!r&&(ms[`${t}.${l}`]=n[l]),delete e[l].$m,delete e[l].$s,delete e[l].$e,n[l]=s(e[l],t?`${t}.${l}`:l,n[l]||{})}return n})({rtc:{generalpclib:{CmbType:{$e:{CMD_TYPE_BUSINESS_REQUEST:100,CMD_TYPE_BUSINESS_RESPONSE:101}},Header:{$m:{1:["cmd","uint32",0]}}},liveroom_cs_v3:{AddStreamReq:{$m:{1:["stream_id","bytes",[]],2:["stream_title","bytes",[]],3:["stream_type","uint32",0],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["third_token","bytes",[]],8:["censor_mode","uint32",0],9:["need_gather","uint32",0],11:["stream_attr_opts","rtc.liveroom_cs_v3.StreamAttrOptions",null],12:["sdk_custom","bytes",[]]}},AddStreamRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_sid","string",""],4:["stream_ver","uint32",0],5:["stream_nid","uint32",0],6:["token_remain_time","uint32",0]}},AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},BigImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","bytes",[]],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}]}},CapabilityParams:{$m:{1:["video_codec","uint32",0],2:["gop_mode","uint32",0],3:["nego_types","uint32",0]}},CapabilityResult:{$m:{1:["nego_type","uint32",0],2:["video_codec","uint32",0],3:["gop_mode","uint32",0]}},CommonRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},DeleteStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["client_req_seq","uint32",0]}},DeleteStreamRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},EnterRoomReq:{$m:{1:["net_type","uint32",0],2:["conn_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["third_token","bytes",[]],7:["room_create_flag","uint32",0],8:["user_state_flag","uint32",0],9:["user_count_limit","uint32",0],10:["relate_service","string",""],11:["need_gather_stream","uint32",0],12:["callback_data","bytes",[]],13:["service_flags","uint32",0],14:["license_token","bytes",[]],15:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],16:["capabilities","rtc.liveroom_cs_v3.CapabilityParams",null]}},EnterRoomRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["user_id","uint64",{low:0,high:0,unsigned:!0}],5:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],6:["big_im_time_window","uint32",0],7:["liveroom_hb_interval","uint32",0],8:["liveroom_hb_timeout","uint32",0],9:["online_count","uint32",0],10:["anchor_info","rtc.liveroom_cs_v3.AnchorInfo",null],11:["userlist_merge_timeout","uint32",0],12:["userlist_interval","uint32",0],13:["token_remain_time","uint32",0],14:["trans_list_seq","uint32",0],15:["trans_channel_list","<rtc.liveroom_cs_v3.TransChannel",null],16:["stream_count","uint32",0],17:["stream_list_seq","uint32",0],18:["stream_info_list","<rtc.liveroom_cs_v3.StreamInfo",null],19:["stream_fetch_flag","uint32",0],20:["stream_list_push_merge_timeout","uint32",0],21:["stream_list_hb_merge_timeout","uint32",0],22:["relate_result_list","<rtc.liveroom_cs_v3.RelateResult",null],23:["gather_list_seq","uint32",0],24:["gather_info_list","<rtc.liveroom_cs_v3.GatherInfo",null]}},EnumSignalTransmitResult:{$e:{ok:0,version_err:1}},EnumSignalTransparentMsgType:{$e:{SignalTransparentMsgTypeSDK:0,SignalTransparentMsgTypeServer:1,SignalTransparentMsgTypeBoth:2}},GatherInfo:{$m:{1:["gather_id","string",""]}},GetCapabilityReq:{$m:{}},GetCapabilityRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["capability_seq","int64",{low:0,high:0,unsigned:!1}],4:["capability_collection","<rtc.liveroom_cs_v3.CapabilityResult",null]}},GetGatherListReq:{$m:{}},GetGatherListRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["gather_list_seq","uint32",0],3:["gather_info_list","<rtc.liveroom_cs_v3.GatherInfo",null]}},GetImReq:{$m:{1:["msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["sort_type","uint32",0],3:["msg_count","uint32",0]}},GetImRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],3:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<rtc.liveroom_cs_v3.GetImRspImData",null]}},GetImRspImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},GetStreamListReq:{$m:{}},GetStreamListRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["stream_list_seq","uint32",0],3:["stream_info_list","<rtc.liveroom_cs_v3.StreamInfo",null],4:["stream_refresh","uint32",0]}},GetTransReq:{$m:{1:["trans_channel","bytes",[]],2:["trans_list","<rtc.liveroom_cs_v3.GetTransReqTransData",null]}},GetTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetTransRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["trans_list_seq","uint32",0],4:["trans_list","<rtc.liveroom_cs_v3.GetTransRspTransData",null]}},GetTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},GetUserCountReq:{$m:{}},GetUserCountRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["get_interval","int64",{low:0,high:0,unsigned:!1}],3:["user_count","uint32",0],4:["admin_user_count","uint32",0]}},GetUserlistReq:{$m:{1:["sort_type","uint32",0],2:["user_index","uint32",0]}},GetUserlistRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["server_user_seq","uint64",{low:0,high:0,unsigned:!0}],3:["server_user_index","int64",{low:0,high:0,unsigned:!1}],4:["ret_user_index","int64",{low:0,high:0,unsigned:!1}],5:["user_base_info_list","<rtc.liveroom_cs_v3.UserBaseInfo",null]}},GetUserTransReq:{$m:{1:["trans_channel","bytes",[]],2:["user_trans_list","<rtc.liveroom_cs_v3.GetUserTransReqTransData",null]}},GetUserTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetUserTransRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["user_trans_list","<rtc.liveroom_cs_v3.GetUserTransRspTransData",null]}},GetUserTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},HbReq:{$m:{}},HbRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],3:["hb_interval","uint32",0],4:["hb_timeout","uint32",0],5:["stream_seq","uint32",0],6:["user_seq","int64",{low:0,high:0,unsigned:!1}],7:["online_count","uint32",0],8:["big_im_time_window","uint32",0],9:["trans_channel_list","<rtc.liveroom_cs_v3.TransChannel",null],10:["user_trans_channel_list","<rtc.liveroom_cs_v3.TransChannel",null],11:["stream_refresh","uint32",0],12:["trans_list_seq","uint32",0],13:["gather_list_seq","uint32",0],14:["capability_seq","int64",{low:0,high:0,unsigned:!1}]}},ImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},LiveroomSessionInfo:{$m:{1:["RoomId","bytes",[]],2:["UserSessionId","uint64",{low:0,high:0,unsigned:!0}],3:["RoomSessionId","uint64",{low:0,high:0,unsigned:!0}],4:["Role","uint32",0]}},PushBigIm:{$m:{1:["msg_list","<rtc.liveroom_cs_v3.BigImData",null]}},PushCapabilityChange:{$m:{1:["capability_seq","int64",{low:0,high:0,unsigned:!1}],3:["capability_collection","<rtc.liveroom_cs_v3.CapabilityResult",null]}},PushChannelMsg:{$m:{1:["sender_idname","bytes",[]],2:["sender_nickname","bytes",[]],3:["channel_type","uint32",0],4:["msg_type","uint32",0],5:["msg_content","bytes",[]]}},PushIm:{$m:{1:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<rtc.liveroom_cs_v3.ImData",null]}},PushStartGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStopGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStream:{$m:{1:["stream_seq","uint32",0],2:["stream_info_list","<rtc.liveroom_cs_v3.PushStreamInfo",null]}},PushStreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["stream_src","uint32",0],9:["stream_state","uint32",0],10:["stream_type","uint32",0],11:["stream_nid","uint32",0],12:["extra_info","bytes",[]],13:["create_time","int64",{low:0,high:0,unsigned:!1}],14:["close_type","uint32",0],15:["need_gather","uint32",0],17:["stream_attr_opts","rtc.liveroom_cs_v3.StreamAttrOptions",null],18:["sdk_custom","bytes",[]]}},PushTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_type","bytes",[]],5:["trans_data","bytes",[]],6:["trans_seq","uint32",0],7:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],8:["trans_channel","bytes",[]],9:["trans_list_seq","uint32",0]}},PushTransparentMsg:{$m:{1:["msg_data","bytes",[]],2:["client_seq","uint64",{low:0,high:0,unsigned:!0}],3:["sender_idname","bytes",[]],4:["sender_nickname","bytes",[]]}},PushUserInfoUpdated:{$m:{1:["server_user_seq","int64",{low:0,high:0,unsigned:!1}],2:["user_action_list","<rtc.liveroom_cs_v3.UserAction",null]}},PushUserKickout:{$m:{1:["id_name","bytes",[]],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["kickout_reason","int32",0],4:["custom_reason","bytes",[]]}},PushUserLogReport:{$m:{}},PushUserTokenExpire:{$m:{1:["token","string",""],2:["stop_stream_info","rtc.liveroom_cs_v3.StopStream",null]}},PushUserTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_channel","bytes",[]],6:["trans_seq_list","<rtc.liveroom_cs_v3.PushUserTransInfo",null]}},PushUserTransInfo:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_seq","uint32",0]}},QuitRoomReq:{$m:{}},QuitRoomRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},RenewTokenReq:{$m:{1:["token","string",""]}},RenewTokenRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["token_remain_time","uint32",0],3:["stop_stream_id_list","<bytes",null]}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SendBigImReq:{$m:{1:["msg_list","<rtc.liveroom_cs_v3.SendBigImReqMsgData",null]}},SendBigImReqMsgData:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}],5:["msg_client_id","bytes",[]]}},SendBigImRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["big_im_time_window","uint32",0],3:["msg_list","<rtc.liveroom_cs_v3.SendBigImRspMsgData",null]}},SendBigImRspMsgData:{$m:{1:["msg_id","bytes",[]],2:["msg_client_id","bytes",[]]}},SendChannelMsgReq:{$m:{1:["channel_type","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["to_user_list","<bytes",null]}},SendChannelMsgRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SendImReq:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SendImRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["msg_id","uint64",{low:0,high:0,unsigned:!0}]}},SetTransReq:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_local_seq","uint32",0],4:["trans_channel","bytes",[]]}},SetTransRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["trans_type","bytes",[]],3:["trans_seq","uint32",0],4:["trans_list_seq","uint32",0],5:["trans_channel","bytes",[]]}},SetUserAttrReq:{$m:{1:["use_data_channel","uint32",0],2:["is_modify_use_data_channel","bool",!1],3:["user_type","uint32",0],4:["is_modify_user_type","bool",!1]}},SetUserAttrRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalLiveCustomReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SignalLiveCustomRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalLiveInviteReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SignalLiveInviteRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalLiveRequestReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SignalLiveRequestRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalLiveResultReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SignalLiveResultRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalLiveStopReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<rtc.liveroom_cs_v3.ToUser",null]}},SignalLiveStopRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},SignalTransmitReq:{$m:{1:["to_user_list","<bytes",null],2:["transmit_data","bytes",[]]}},SignalTransmitResult:{$m:{1:["to_user","bytes",[]],2:["result","rtc.liveroom_cs_v3.EnumSignalTransmitResult",0]}},SignalTransmitRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["result","<rtc.liveroom_cs_v3.SignalTransmitResult",null]}},SignalTransparentMsgReq:{$m:{1:["msg_type","rtc.liveroom_cs_v3.EnumSignalTransparentMsgType",0],2:["msg_data","bytes",[]],3:["to_user_list","<bytes",null],4:["client_seq","uint64",{low:0,high:0,unsigned:!0}]}},SignalTransparentMsgRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null]}},StopStream:{$m:{1:["stream_id_list","<bytes",null]}},StreamAttrOptions:{$m:{1:["stream_resource","sint32",0],2:["stream_codec","sint32",0],3:["play_mode","uint32",0],4:["forbid_play_expire_time","int64",{low:0,high:0,unsigned:!1}],5:["censor_flag","int32",0]}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["create_time","int64",{low:0,high:0,unsigned:!1}],9:["stream_src","uint32",0],10:["stream_state","uint32",0],11:["stream_type","uint32",0],12:["stream_nid","uint32",0],13:["extra_info","bytes",[]],14:["need_gather","uint32",0],16:["stream_attr_opts","rtc.liveroom_cs_v3.StreamAttrOptions",null],17:["sdk_custom","bytes",[]]}},ToUser:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}]}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<rtc.liveroom_cs_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}},UpdateStreamAttrReq:{$m:{1:["stream_id","bytes",[]],2:["client_req_seq","uint32",0],3:["update_flag","uint32",0],5:["stream_attr_opts","rtc.liveroom_cs_v3.StreamAttrOptions",null],6:["sdk_custom","bytes",[]]}},UpdateStreamAttrRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0]}},UpdateStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["stream_title","bytes",[]],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["nick_name","bytes",[]]}},UpdateStreamRsp:{$m:{1:["rsp_head","rtc.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},UserAction:{$m:{1:["action","uint32",0],2:["id_name","bytes",[]],3:["nick_name","bytes",[]],4:["role","uint32",0],5:["login_time","int64",{low:0,high:0,unsigned:!1}]}},UserBaseInfo:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0]}}},logreport:{ChargeInfo:{$m:{1:["is_publishing","uint32",0],2:["play_stream_resolution_infos","<rtc.logreport.ResolutionInfo",null],3:["play_max_audio_bitrate","uint32",0],4:["no_playing","uint32",0],5:["p2p_charge_info","rtc.logreport.P2PChargeInfo",null],6:["sample_time_offset","uint32",0],7:["play_l3_stream_resolution_infos","<rtc.logreport.ResolutionInfo",null],8:["play_l3_max_audio_bitrate","uint32",0]}},ChargeInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["timestamp_diff_flag","uint32",0],4:["timestamp_diff","uint32",0],5:["room_id","string",""],6:["play_iframe","uint32",0],100:["infos","<rtc.logreport.ChargeInfo",null]}},DynQualityEvent:{$m:{1:["seq_no","string",""],2:["num","uint32",0],3:["dyn_quality_infos","<rtc.logreport.DynQualityInfos",null],4:["device_id","string",""],5:["latitude","uint32",0],6:["longitude","uint32",0],7:["country","string",""],8:["region","string",""],9:["city","string",""],10:["isp","string",""],11:["ve_mode","uint32",0]}},DynQualityInfo:{$m:{1:["time","uint64",{low:0,high:0,unsigned:!0}],2:["plr","uint32",0],3:["rtt","uint32",0],4:["score","uint32",0],5:["sample_time","uint32",0]}},DynQualityInfos:{$m:{1:["timestamp_offset_begin","uint64",{low:0,high:0,unsigned:!0}],2:["timestamp_offset_end","uint64",{low:0,high:0,unsigned:!0}],3:["server_ip","string",""],4:["infos","<rtc.logreport.DynQualityInfo",null],5:["network_type","uint32",0],6:["stream_id","string",""]}},HardwareInfo:{$m:{1:["sys_cpu_used","uint32",0],2:["app_cpu_used","uint32",0],3:["sys_mem_used","uint32",0],4:["app_mem_used","uint32",0],5:["sample_time_offset","uint32",0]}},HardwareInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["infos","<rtc.logreport.HardwareInfo",null],4:["sys_mem_total","uint32",0]}},NoBillingEvent:{$m:{1:["platform_info","string",""],2:["room_id","string",""]}},P2PChargeInfo:{$m:{1:["media_inc","uint64",{low:0,high:0,unsigned:!0}],2:["data_inc","uint64",{low:0,high:0,unsigned:!0}]}},PlayQualityInfo:{$m:{1:["audio_bitrate","uint32",0],2:["video_bitrate","uint32",0],3:["video_network_fps","uint32",0],4:["audio_break_count","uint32",0],5:["video_break_count","uint32",0],6:["downlink_plr","uint32",0],7:["peer_to_peer_plr","uint32",0],8:["peer_to_peer_delay","uint32",0],9:["audio_network_fps","uint32",0],10:["audio_break_duration","uint32",0],11:["video_break_duration","uint32",0],12:["audio_break_rate","uint32",0],13:["video_break_rate","uint32",0],14:["audio_break_cancel","uint32",0],15:["video_break_cancel","uint32",0],16:["rtt","uint32",0],17:["rendered_sound_level","uint32",0],18:["audio_break_cancel_duration","uint32",0],19:["video_break_cancel_duration","uint32",0],20:["audio_decode_time","uint32",0],21:["video_decode_time","uint32",0],22:["real_sampling_interval","uint32",0],23:["mos","int32",0],24:["audio_decode_fps","uint32",0],25:["video_decode_fps","uint32",0],26:["video_frames_decoded","uint32",0],27:["video_frames_dropped","uint32",0],28:["quality","int32",0],29:["evaluation_quality","int32",0],30:["break_stat_duration","uint32",0],31:["sample_time_offset","uint32",0],32:["peer_to_peer_net_delay","uint32",0],33:["audio_render_fps","uint32",0],34:["video_render_fps","uint32",0],35:["video_frame_interval_standard_deviation","uint32",0],100:["sample_time_window","uint32",0]}},PlayQualityInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["stream_id","string",""],4:["session_id","uint32",0],5:["video_width","uint32",0],6:["video_height","uint32",0],7:["ipv4","uint32",0],8:["ipv6","string",""],9:["resource_type","uint32",0],10:["infos","<rtc.logreport.PlayQualityInfo",null],11:["room_id","string",""],13:["session","string",""],14:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],15:["protocol_type","uint32",0],16:["product","uint32",0],17:["resource_flag","uint32",0]}},PublishQualityInfo:{$m:{1:["audio_bitrate","uint32",0],2:["video_bitrate","uint32",0],3:["video_capture_fps","uint32",0],4:["video_network_fps","uint32",0],5:["uplink_plr","uint32",0],6:["rtt","uint32",0],7:["audio_network_fps","uint32",0],8:["captured_sound_level","uint32",0],9:["quality","uint32",0],10:["sample_time_offset","uint32",0],11:["tc_setting_audio_bitrate","uint32",0],12:["tc_setting_video_bitrate","uint32",0],13:["audio_capture_fps","uint32",0],14:["video_encode_fps","uint32",0],100:["sample_time_window","uint32",0]}},PublishQualityInfos:{$m:{1:["timestamp_offset_begin","uint32",0],2:["timestamp_offset_end","uint32",0],3:["stream_id","string",""],4:["session_id","uint32",0],5:["video_width","uint32",0],6:["video_height","uint32",0],7:["ipv4","uint32",0],8:["ipv6","string",""],9:["resource_type","uint32",0],10:["infos","<rtc.logreport.PublishQualityInfo",null],11:["room_id","string",""],13:["evnvironment","uint32",0],14:["ap","string",""],15:["session","string",""],16:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],17:["protocol_type","uint32",0],18:["setting_video_bitrate","uint32",0],19:["setting_audio_bitrate","uint32",0],20:["setting_video_fps","uint32",0],21:["resource_flag","uint32",0]}},QualityEvent:{$m:{1:["hardware_infos","rtc.logreport.HardwareInfos",null],2:["publish_quality_infos","<rtc.logreport.PublishQualityInfos",null],3:["play_quality_infos","<rtc.logreport.PlayQualityInfos",null],4:["network_type","uint32",0],5:["charge_infos","rtc.logreport.ChargeInfos",null],6:["server_time","int64",{low:0,high:0,unsigned:!1}],100:["client_type","uint32",0]},ResourceType:{$e:{UNKNOWN:0,CDN:1,RTC:2,L3:3,P2P:4}}},ResolutionInfo:{$m:{1:["video_width","uint32",0],2:["video_height","uint32",0],3:["count","uint32",0]}},SpeedLogHead:{$m:{1:["version","uint32",0],2:["signature","bytes",[]],3:["timestamp","uint32",0],4:["event","uint32",0],5:["app_id","uint32",0],6:["user_id","string",""],7:["biz_type","uint32",0],8:["device_id","string",""],9:["lite_sign","bytes",[]],10:["token","bytes",[]],11:["os_type","string",""],12:["sdk_version","string",""],13:["time_offset","int64",{low:0,high:0,unsigned:!1}],14:["scenario","uint32",0],15:["report_version","uint32",0],16:["customer_context","uint32",0],17:["extlib_type","uint32",0]},BizType:{$e:{UNKNOWN:0,LIVE:1,RTV:2}},Event:{$e:{QUALITY_EVENT:0,NO_BILLING_EVENT:100,DETECT_QUALITY_EVENT:300}},ProtoVersion:{$e:{PROTO_VERSION:0,PROTO_VERSION1:1,PROTO_VERSION2:2,PROTO_VERSION3:3,PROTO_VERSION4:4,PROTO_VERSION5:5,PROTO_VERSION6:6,PROTO_VERSION7:7,PROTO_VERSION8:8,PROTO_VERSION9:9,PROTO_VERSION10:10,PROTO_VERSION11:11,PROTO_VERSION12:12,PROTO_VERSION13:13,PROTO_VERSION14:14,PROTO_VERSION15:15,PROTO_VERSION16:16,PROTO_VERSION17:17,PROTO_VERSION18:18,PROTO_VERSION19:19,PROTO_VERSION20:20,PROTO_VERSION21:21,PROTO_VERSION22:22}},ZegoScenario:{$e:{ZEGO_SCENARIO_GENERAL:0,ZEGO_SCENARIO_COMMUNICATION:1,ZEGO_SCENARIO_LIVE:2,ZEGO_SCENARIO_DEFAULT:3,ZEGO_SCENARIO_STANDARD_VIDEO_CALL:4,ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL:5,ZEGO_SCENARIO_STANDARD_CHATROOM:6,ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM:7,ZEGO_SCENARIO_BROADCAST:8,ZEGO_SCENARIO_KARAOKE:9,ZEGO_SCENARIO_STANDARD_VOICE_CALL:10,ZEGO_SCENARIO_UNDEFINED:99}}},SpeedLogRsp:{$m:{1:["code","uint32",0],2:["message","string",""]}}},proto_switch_v3:{AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},Capabilities:{$m:{1:["video_codec","uint32",0],2:["gop_mode","uint32",0]}},CommonRsp:{$m:{1:["rsp_head","rtc.proto_switch_v3.RspHead",null]}},GatherInfo:{$m:{1:["gather_id","string",""]}},Header:{$m:{1:["cmd","uint32",0],2:["seq","uint32",0],3:["timestamp","int64",{low:0,high:0,unsigned:!1}],4:["controls","bytes",[]],5:["flags","bytes",[]],6:["context_key","uint32",0],101:["dev_traffic_label","bytes",[]]}},LiveroomProtoVersion:{$e:{PROTO_VERSION_NONE:0,RPOTO_V020000:131072}},LoginRoomReq:{$m:{1:["app_id","uint32",0],2:["biz_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["device_id","string",""],9:["term_type","rtc.proto_switch_v3.TermType",0],10:["net_type","rtc.proto_switch_v3.NetType",0],11:["sdk_conn_type","rtc.proto_switch_v3.SdkConnType",0],12:["sdk_version","uint32",0],13:["biz_version","string",""],14:["client_stamp","bytes",[]],15:["login_logic","uint32",0],16:["third_token","bytes",[]],17:["login_token","bytes",[]],18:["relogin_token","bytes",[]],19:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],20:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],21:["room_create_flag","uint32",0],22:["user_state_flag","uint32",0],23:["user_count_limit","uint32",0],24:["relate_service","string",""],25:["need_gather_stream","uint32",0],26:["callback_data","bytes",[]],27:["service_flags","uint32",0],28:["license_token","bytes",[]],29:["relogin_type","rtc.proto_switch_v3.ReloginType",0],30:["Capabilities","rtc.proto_switch_v3.Capabilities",null]}},LoginRoomRsp:{$m:{1:["rsp_head","rtc.proto_switch_v3.RspHead",null],2:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],5:["user_id","uint64",{low:0,high:0,unsigned:!0}],6:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],7:["big_im_time_window","uint32",0],8:["liveroom_hb_interval","uint32",0],9:["liveroom_hb_timeout","uint32",0],10:["online_count","uint32",0],11:["anchor_info","rtc.proto_switch_v3.AnchorInfo",null],12:["relogin_token","bytes",[]],13:["userlist_merge_timeout","uint32",0],14:["userlist_interval","uint32",0],15:["token_remain_time","uint32",0],16:["trans_list_seq","uint32",0],17:["trans_channel_list","<rtc.proto_switch_v3.TransChannel",null],18:["stream_count","uint32",0],19:["stream_list_seq","uint32",0],20:["stream_info_list","<rtc.proto_switch_v3.StreamInfo",null],21:["stream_fetch_flag","uint32",0],22:["stream_list_push_merge_timeout","uint32",0],23:["stream_list_hb_merge_timeout","uint32",0],24:["relate_result_list","<rtc.proto_switch_v3.RelateResult",null],25:["gather_list_seq","uint32",0],26:["gather_info_list","<rtc.proto_switch_v3.GatherInfo",null]}},LogoutRoomReq:{$m:{2:["logout_check","bytes",[]]}},LogoutRoomRsp:{$m:{1:["rsp_head","rtc.proto_switch_v3.RspHead",null]}},MergePushHead:{$m:{1:["qos_flag","uint32",0],2:["send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0],3:["msg_body","bytes",[]]}},MergePushReq:{$m:{1:["head","rtc.proto_switch_v3.MergePushHead",null],2:["message_list","<rtc.proto_switch_v3.MergePushInfo",null]}},MergePushRsp:{$m:{1:["message_list","<rtc.proto_switch_v3.MergePushRspInfo",null],2:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushRspInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0]}},NetType:{$e:{NT_NONE:0,NT_LINE:1,NT_WIFI:2,NT_2G:3,NT_3G:4,NT_4G:5,NT_UNKNOWN:32}},PushKickout:{$m:{1:["reason","uint32",0],2:["message","string",""],3:["is_need_relogin","uint32",0]}},PushReq:{$m:{1:["head","rtc.proto_switch_v3.PushReqHead",null],2:["msg_body","bytes",[]]}},PushReqHead:{$m:{1:["sub_cmd","uint32",0],2:["qos_flag","uint32",0],3:["send_time","int64",{low:0,high:0,unsigned:!1}]}},PushRsp:{$m:{1:["code","uint32",0],2:["message","string",""],3:["sub_cmd","uint32",0],4:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},ReloginType:{$e:{ReloginType_None:0,ReloginType_SdkAuto:1}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SdkConnType:{$e:{SdkConnType_None:0,SdkConnType_Tcp:1,SdkConnType_Websocket:2}},StreamAttrOptions:{$m:{1:["stream_resource","sint32",0],2:["stream_codec","sint32",0],3:["play_mode","uint32",0],4:["forbid_play_expire_time","int64",{low:0,high:0,unsigned:!1}],5:["censor_flag","int32",0]}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["create_time","int64",{low:0,high:0,unsigned:!1}],6:["extra_info","bytes",[]],7:["title","bytes",[]],8:["stream_ver","uint32",0],9:["stream_attr","bytes",[]],10:["stream_src","uint32",0],11:["stream_state","uint32",0],12:["stream_type","uint32",0],13:["stream_nid","uint32",0],14:["need_gather","uint32",0],16:["stream_attr_opts","rtc.proto_switch_v3.StreamAttrOptions",null],17:["sdk_custom","bytes",[]]}},TermType:{$e:{TT_NONE:0,TT_PC:1,TT_IOS:2,TT_ANDROID:3,TT_MAC:4,TT_LINUX:5,TT_WEB:6,TT_MINI_PROGRAM:7,TT_UNKNOWN:32}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<rtc.proto_switch_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}}},webproxy:{HTTPHeader:{$m:{1:["name","string",""],2:["val","string",""]}},HTTPRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","rtc.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["url","string",""],7:["method","rtc.webproxy.Method",0],8:["headers","<rtc.webproxy.HTTPHeader",null],9:["body","bytes",[]]}},HTTPResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","rtc.webproxy.HTTPResponseData",null]}},HTTPResponseData:{$m:{1:["status_code","int32",0],2:["headers","<rtc.webproxy.HTTPHeader",null],3:["body","bytes",[]]}},IntranetCheckRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","rtc.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["vrs_ipv4","fixed32",0],7:["vrs_ipv6","rtc.webproxy.IPv6Addr",null]}},IntranetCheckResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","rtc.webproxy.IntranetCheckResponseData",null]}},IntranetCheckResponseData:{$m:{1:["intranet","bool",!1]}},IPv6Addr:{$m:{1:["high","fixed64",{low:0,high:0,unsigned:!1}],2:["low","fixed64",{low:0,high:0,unsigned:!1}]}},Method:{$e:{METHOD_UNSET:0,METHOD_GET:1,METHOD_POST:2,METHOD_PUT:3,METHOD_PATCH:4,METHOD_DELETE:5,METHOD_HEAD:6,METHOD_OPTIONS:7}},Mode:{$e:{MODE_UNSET:0,MODE_ONLINE:1,MODE_TEST:2}},TurnInfoRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","rtc.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""]}},TurnInfoResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","rtc.webproxy.TurnInfoResponseData",null]}},TurnInfoResponseData:{$m:{1:["username","string",""],2:["password","string",""],3:["turn_ipv4","fixed32",0],4:["turn_ipv6","rtc.webproxy.IPv6Addr",null],5:["turn_port","uint32",0],6:["expiration_in_seconds","uint32",0],7:["turn_internal_ipv4","fixed32",0]}},WssBindRequest:{$m:{1:["appid","uint32",0],2:["biz_type","uint32",0],3:["mode","rtc.webproxy.Mode",0],4:["id_name","string",""],5:["token","string",""],6:["url","string",""],7:["ack","bool",!1]}},WssBindRequestAck:{$m:{}},WssBindResponse:{$m:{1:["code","int32",0],2:["message","string",""]}}},webrtc_cmd:{ActivateAudioPlayStreamReq:{$m:{1:["seq","uint32",0],2:["active","sint32",0]}},ActivateAudioPlayStreamRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},ActivateSEIInsertReq:{$m:{1:["seq","uint32",0],2:["action","sint32",0],3:["info_type","uint32",0]}},ActivateSEIInsertRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},ActivateVideoPlayStreamReq:{$m:{1:["seq","uint32",0],2:["active","sint32",0],3:["layer","sint32",0]}},ActivateVideoPlayStreamRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},BroadcasterStatusAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},BroadcasterStatusNotify:{$m:{1:["seq","uint32",0],2:["status","uint32",0]}},ClientInfoAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},ClientInfoPush:{$m:{1:["seq","uint32",0],2:["peer_id","uint32",0],3:["clientip","string",""]}},ClosePeerAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},ClosePeerPush:{$m:{1:["seq","uint32",0],2:["reason","sint32",0],3:["err_info","string",""]}},ClosePeerReq:{$m:{1:["seq","uint32",0],2:["reason","sint32",0]}},ClosePeerRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},HeartBeatMsgSetAck:{$m:{1:["seq","uint32",0],2:["ts","int64",{low:0,high:0,unsigned:!1}],3:["result","sint32",0]}},HeartBeatMsgSetPush:{$m:{1:["seq","uint32",0],2:["ts","int64",{low:0,high:0,unsigned:!1}],3:["payloads","<rtc.webrtc_cmd.HeatbeatPayload",null]}},HeatbeatPayload:{$m:{1:["p2p_net_stat_rsp","rtc.webrtc_cmd.Peer2PeerNetStatsGetRsp",null],2:["play_net_stat","rtc.webrtc_cmd.PlayNetStatus",null],3:["play_stats_rsp","rtc.webrtc_cmd.PlayStatsRsp",null],4:["net_quality_push","rtc.webrtc_cmd.NetQualityGradePush",null],5:["pub_net_stat","rtc.webrtc_cmd.PublishNetStatus",null],6:["pub_quality_grade_rsp","rtc.webrtc_cmd.NetQualityGradeRsp",null],7:["stream_status_push","rtc.webrtc_cmd.StreamStatusNotify",null],8:["code_err_push","rtc.webrtc_cmd.MediaCodecErrorNotify",null],9:["play_event_push","rtc.webrtc_cmd.PlayEventPush",null],10:["pub_event_push","rtc.webrtc_cmd.PublishEventPush",null]}},MediaCodecErrorAck:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},MediaCodecErrorNotify:{$m:{1:["media_type","sint32",0],2:["error_type","sint32",0],3:["seq","uint32",0]}},NetQualityGradeAck:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},NetQualityGradePush:{$m:{1:["tx_quality","sint32",0],2:["rx_quality","sint32",0],3:["seq","uint32",0]}},NetQualityGradeReq:{$m:{1:["tx_quality","sint32",0],2:["rx_quality","sint32",0],3:["seq","uint32",0]}},NetQualityGradeRsp:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},NetQualityInfoAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},NetQualityInfoPush:{$m:{1:["seq","uint32",0],2:["lossrate","uint32",0],3:["rtt","uint32",0]}},NetQualityProbeReq:{$m:{1:["seq","uint32",0],2:["action","sint32",0]}},NetQualityProbeRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},Peer2PeerNetStatsGetReq:{$m:{1:["seq","uint32",0]}},Peer2PeerNetStatsGetRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0],3:["p2p_lost_rate","uint32",0],4:["p2p_rtt","uint32",0]}},PeerExtendParamPush:{$m:{1:["turn_username","string",""],2:["turn_auth_key","string",""],3:["candidate","string",""],4:["sdpMid","string",""],5:["sdpMLineIndex","sint32",0],6:["turn_urls","string",""],7:["peer_id","uint32",0]}},PeerExtendParams:{$m:{1:["keyframe_intv","sint32",0],2:["min_play_buf_level_ms","sint32",0],3:["tc_type","sint32",0],4:["video_content_type","sint32",0],5:["sei_filter_pass","sint32",0],6:["client_class_type","sint32",0],7:["video_stream_type","sint32",0],8:["ktv_device_delay","sint32",0],9:["sync_ntp","sint32",0],10:["auto_switch_turn_type","sint32",0],11:["zg_proxy","sint32",0],12:["coturn_internal","uint32",0],13:["play_jitter_level","sint32",0],14:["tc_focuson_mode","sint32",0],15:["tc_min_video_kbps","sint32",0],16:["proto_flags","uint32",0],17:["req_poster_type","uint32",0],18:["enable_vid_clock_rate_est","sint32",0]}},PlayEventPush:{$m:{1:["seq","uint32",0],2:["event","sint32",0]}},PlayEventPushAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},PlayNetStatus:{$m:{1:["audio_tx_bitrate","sint32",0],2:["video_tx_bitrate","sint32",0],3:["video_red_rate","uint32",0],4:["traffic_control_stat","sint32",0],5:["traffic_control_bandwidth","sint32",0]}},PlayStatsReq:{$m:{1:["seq","uint32",0],2:["audio_jitter_ms","uint32",0]}},PlayStatsRsp:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},PublishEventAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},PublishEventPush:{$m:{1:["seq","uint32",0],2:["event","sint32",0]}},PublishNetStatus:{$m:{1:["video_recv_bitrate","sint32",0],2:["traffic_control_stat","sint32",0],3:["video_lost_rate","uint32",0],4:["audio_recv_bitrate","sint32",0],5:["audio_lost_rate","uint32",0]}},RestartICEReq:{$m:{1:["ice_ufrag","string",""],2:["ice_pwd","string",""],3:["seq","uint32",0]}},RestartICERsp:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},StreamPropertyUpdate:{$m:{1:["enable_stream_alignment_when_mix","sint32",0],2:["seq","uint32",0]}},StreamPropertyUpdateAck:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},StreamStatusAck:{$m:{1:["seq","uint32",0],2:["result","sint32",0]}},StreamStatusNotify:{$m:{1:["seq","uint32",0],2:["mic_status","sint32",0],3:["camera_status","sint32",0]}},UserUnregisteredSEIFilterReq:{$m:{1:["sei_filter","string",""],2:["seq","uint32",0]}},UserUnregisteredSEIFilterRsp:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},VideoStreamSubscribeReq:{$m:{1:["type","uint32",0],2:["seq","uint32",0]}},VideoStreamSubscribeRsp:{$m:{1:["result","sint32",0],2:["seq","uint32",0]}},WebrtcCmdReqMsg:{$m:{2:["video_stream_sub","rtc.webrtc_cmd.VideoStreamSubscribeReq",null],5:["usr_sei_filter","rtc.webrtc_cmd.UserUnregisteredSEIFilterReq",null],6:["net_quality_grade","rtc.webrtc_cmd.NetQualityGradeReq",null],7:["net_quality_grade_push","rtc.webrtc_cmd.NetQualityGradePush",null],8:["peer_extend_param","rtc.webrtc_cmd.PeerExtendParams",null],9:["stream_property_update","rtc.webrtc_cmd.StreamPropertyUpdate",null],10:["peer_ext_params_push","rtc.webrtc_cmd.PeerExtendParamPush",null],11:["codec_error_notify","rtc.webrtc_cmd.MediaCodecErrorNotify",null],13:["close_peer","rtc.webrtc_cmd.ClosePeerReq",null],15:["close_peer_push","rtc.webrtc_cmd.ClosePeerPush",null],16:["stream_status","rtc.webrtc_cmd.StreamStatusNotify",null],17:["broadcaster_status","rtc.webrtc_cmd.BroadcasterStatusNotify",null],18:["publish_event","rtc.webrtc_cmd.PublishEventPush",null],19:["play_event","rtc.webrtc_cmd.PlayEventPush",null],20:["active_audio_play","rtc.webrtc_cmd.ActivateAudioPlayStreamReq",null],21:["active_video_play","rtc.webrtc_cmd.ActivateVideoPlayStreamReq",null],22:["client_info","rtc.webrtc_cmd.ClientInfoPush",null],23:["net_quality_probe","rtc.webrtc_cmd.NetQualityProbeReq",null],24:["net_quality_push","rtc.webrtc_cmd.NetQualityInfoPush",null],25:["active_sei_insert","rtc.webrtc_cmd.ActivateSEIInsertReq",null],26:["p2p_net_stats_get","rtc.webrtc_cmd.Peer2PeerNetStatsGetReq",null],27:["play_stats","rtc.webrtc_cmd.PlayStatsReq",null],28:["restart_ice","rtc.webrtc_cmd.RestartICEReq",null],29:["heartbeat_msg_push","rtc.webrtc_cmd.HeartBeatMsgSetPush",null]}},WebrtcCmdRspMsg:{$m:{2:["video_stream_sub","rtc.webrtc_cmd.VideoStreamSubscribeRsp",null],5:["usr_sei_filter","rtc.webrtc_cmd.UserUnregisteredSEIFilterRsp",null],6:["net_quality_grade","rtc.webrtc_cmd.NetQualityGradeRsp",null],7:["net_quality_grade_ack","rtc.webrtc_cmd.NetQualityGradeAck",null],8:["stream_property_update_ack","rtc.webrtc_cmd.StreamPropertyUpdateAck",null],9:["codec_error_notify_ack","rtc.webrtc_cmd.MediaCodecErrorAck",null],11:["close_peer","rtc.webrtc_cmd.ClosePeerRsp",null],13:["close_peer_ack","rtc.webrtc_cmd.ClosePeerAck",null],14:["stream_status_ack","rtc.webrtc_cmd.StreamStatusAck",null],15:["broadcaster_status_ack","rtc.webrtc_cmd.BroadcasterStatusAck",null],16:["active_audio_play","rtc.webrtc_cmd.ActivateAudioPlayStreamRsp",null],17:["active_video_play","rtc.webrtc_cmd.ActivateVideoPlayStreamRsp",null],18:["client_info_ack","rtc.webrtc_cmd.ClientInfoAck",null],19:["net_quality_probe","rtc.webrtc_cmd.NetQualityProbeRsp",null],20:["net_quality_ack","rtc.webrtc_cmd.NetQualityInfoAck",null],21:["active_sei_insert","rtc.webrtc_cmd.ActivateSEIInsertRsp",null],22:["p2p_net_stats_get","rtc.webrtc_cmd.Peer2PeerNetStatsGetRsp",null],23:["publish_event_ack","rtc.webrtc_cmd.PublishEventAck",null],24:["play_stats","rtc.webrtc_cmd.PlayStatsRsp",null],25:["restart_ice","rtc.webrtc_cmd.RestartICERsp",null],26:["play_event_ack","rtc.webrtc_cmd.PlayEventPushAck",null],27:["heartbeat_msg_ack","rtc.webrtc_cmd.HeartBeatMsgSetAck",null]}}},webrtc_proto_v2:{ActivateAudioPlayStreamReq:{$m:{1:["active","sint32",0]}},ActivateAudioPlayStreamRsp:{$m:{1:["result","sint32",0]}},ActivateSEIInsertReq:{$m:{1:["peer_id","uint32",0],2:["action","sint32",0],3:["info_type","uint32",0]}},ActivateSEIInsertRsp:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},ActivateVideoPlayStreamReq:{$m:{1:["active","sint32",0],2:["layer","sint32",0]}},ActivateVideoPlayStreamRsp:{$m:{1:["result","sint32",0]}},BroadcasterStatusAck:{$m:{1:["result","sint32",0]}},BroadcasterStatusNotify:{$m:{1:["status","uint32",0]}},CandidateInfoAck:{$m:{1:["result","sint32",0]}},CandidateInfoPush:{$m:{1:["infos","<rtc.webrtc_proto_v2.OneCandidateInfo",null]}},CandidateInfoReq:{$m:{1:["infos","<rtc.webrtc_proto_v2.OneCandidateInfo",null]}},CandidateInfoRsp:{$m:{1:["result","sint32",0]}},ClientInfoAck:{$m:{1:["result","sint32",0]}},ClientInfoPush:{$m:{1:["peer_id","uint32",0],2:["client_ip","string",""]}},CloseSessionAck:{$m:{1:["result","sint32",0]}},CloseSessionPush:{$m:{1:["reason","sint32",0],2:["err_info","string",""]}},CloseSessionReq:{$m:{1:["reason","sint32",0]}},CloseSessionRsp:{$m:{1:["result","sint32",0]}},CmdAck:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdPush:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdReq:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdRsp:{$m:{1:["peer_id","uint32",0],2:["cmd_id","uint32",0],3:["body","bytes",[]]}},CmdType:{$e:{NONE:0,LOGIN_REQ:1,LOGIN_RSP:2,CREATE_SESSION_REQ:3,CREATE_SESSION_RSP:4,CREATE_SESSION_WITH_SDP_REQ:5,CREATE_SESSION_WITH_SDP_RSP:6,SESSION_RESET_PUSH:7,SESSION_RESET_ACK:8,PUBLISH_EVENT_PUSH:9,PLAY_EVENT_PUSH:10,MEDIA_DESC_REQ:11,MEDIA_DESC_RSP:12,CANDIDATE_INFO_REQ:13,CANDIDATE_INFO_RSP:14,CLOSE_SESSION_REQ:15,CLOSE_SESSION_RSP:16,MEDIA_DESC_PUSH:17,MEDIA_DESC_ACK:18,CANDIDATE_INFO_PUSH:19,CANDIDATE_INFO_ACK:20,CLOSE_SESSION_PUSH:21,CLOSE_SESSION_ACK:22,STREAM_STATUS_NOTIFY:23,STREAM_STATUS_NOTIFY_ACK:24,STREAM_STATUS_NOTIFY_PUSH:25,STREAM_STATUS_NOTIFY_PUSH_ACK:26,BROADCASTER_STATUS_NOTIFY:27,BROADCASTER_STATUS_ACK:28,ACTIVATE_AUDIO_PLAY_STREAM_REQ:29,ACTIVATE_AUDIO_PLAY_STREAM_RSP:30,ACTIVATE_VIDEO_PLAY_STREAM_REQ:31,ACTIVATE_VIDEO_PLAY_STREAM_RSP:32,CLIENT_INFO_PUSH:33,CLIENT_INFO_ACK:34,NET_QUALITY_PROBE_REQ:35,NET_QUALITY_PROBE_RSP:36,NET_QUALITY_INFO_PUSH:37,NET_QUALITY_INFO_ACK:38,ACTIVATE_SEI_INSERT_REQ:39,ACTIVATE_SEI_INSERT_RSP:40,PEER2_PEER_NET_STATS_GET_REQ:41,PEER2_PEER_NET_STATS_GET_RSP:42,CMD_REQ:43,CMD_RSP:44,CMD_PUSH:45,CMD_ACK:46,WEBRTC_DISPATCH_REQ:47,WEBRTC_DISPATCH_RSP:48}},CreateSessionReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],3:["turn_server_host","string",""],4:["roomid","string",""],5:["strAuthParam","string",""],6:["params","string",""],7:["area_type","int32",0],8:["area_id_list","<int32",null],9:["ipv6_prefer","int32",0],10:["trans_codec_id","int32",0],11:["trans_codec_suffix","string",""]}},CreateSessionRsp:{$m:{1:["result","sint32",0],2:["turn_server","string",""],3:["turn_username","string",""],4:["turn_auth_key","string",""],5:["session_id","uint32",0],6:["session_token","string",""],7:["gw_version","uint32",0],8:["gw_nodes","<string",null],9:["gw_nodes_ttl","uint32",0],10:["client_ip","string",""],11:["ips","<rtc.webrtc_proto_v2.IpResult",null],12:["ipv6s","<rtc.webrtc_proto_v2.IpResult",null],13:["peer_id","uint32",0],14:["trans_codec_suffix","string",""]}},CreateSessionWithSdpReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["media_server_host","string",""],6:["strAuthParam","string",""],7:["roomid","string",""],8:["params","string",""],9:["params_ext","bytes",[]],10:["area_type","int32",0],11:["area_id_list","<int32",null],12:["ipv6_prefer","int32",0],13:["trans_codec_id","int32",0],14:["trans_codec_suffix","string",""]}},CreateSessionWithSdpRsp:{$m:{1:["result","sint32",0],2:["gw_version","uint32",0],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["session_token","string",""],6:["gw_nodes","<string",null],7:["gw_nodes_ttl","uint32",0],8:["client_ip","string",""],9:["params_ext","bytes",[]],10:["ips","<rtc.webrtc_proto_v2.IpResult",null],11:["ipv6s","<rtc.webrtc_proto_v2.IpResult",null],12:["peer_id","uint32",0],13:["trans_codec_suffix","string",""]}},DenyInfo:{$m:{1:["action","uint32",0],2:["err","uint32",0],3:["ins","<rtc.webrtc_proto_v2.IpPort",null],4:["action_delay","uint32",0]}},Head:{$m:{1:["cmd","uint32",0],2:["seq","uint32",0],3:["session_id","uint32",0]}},IpPort:{$m:{1:["Ip","string",""],2:["Port","uint32",0]}},IpResult:{$m:{1:["ip","string",""],2:["port","uint32",0],3:["isbgp","int32",0],4:["idcid","uint32",0],5:["tcp_port","uint32",0],6:["idc_code","string",""],7:["flag","uint32",0],8:["priority","int64",{low:0,high:0,unsigned:!1}],9:["mask","uint32",0],10:["vid","string",""]}},LoginReq:{$m:{1:["appid","uint32",0],2:["user_id","string",""],3:["tokenType","int32",0],4:["token","string",""],5:["sessions","<rtc.webrtc_proto_v2.SessionInfo",null],6:["roomid","string",""],7:["sdk_version","uint32",0],8:["app","string",""],9:["net_mode","int32",0]}},LoginRsp:{$m:{1:["result","int32",0],2:["tokenType","int32",0],3:["token","string",""]}},MediaDescReq:{$m:{1:["type","uint32",0],2:["update","uint32",0],3:["sdp","string",""],4:["mini_sdp","bytes",[]],5:["params_ext","bytes",[]]}},MediaDescRsp:{$m:{1:["result","sint32",0],2:["sdp","string",""],3:["mini_sdp","bytes",[]]}},NetQualityInfoAck:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},NetQualityInfoPush:{$m:{1:["peer_id","uint32",0],2:["lossrate","uint32",0],3:["rtt","uint32",0]}},NetQualityProbeReq:{$m:{1:["peer_id","uint32",0],2:["action","sint32",0]}},NetQualityProbeRsp:{$m:{1:["peer_id","uint32",0],2:["result","sint32",0]}},OneCandidateInfo:{$m:{1:["candidate","string",""],2:["sdpMid","string",""],3:["sdpMLineIndex","sint32",0]}},Peer2PeerNetStatsGetReq:{$m:{1:["peer_id","uint32",0]}},Peer2PeerNetStatsGetRsp:{$m:{1:["result","sint32",0],2:["peer_id","uint32",0],3:["p2p_lost_rate","uint32",0],4:["p2p_rtt","uint32",0]}},PlayEventPush:{$m:{1:["event","sint32",0]}},PublishEventPush:{$m:{1:["event","sint32",0]}},SessionInfo:{$m:{1:["session_id","uint32",0],2:["session_token","string",""]}},SessionResetAck:{$m:{1:["result","sint32",0]}},SessionResetPush:{$m:{1:["dwTimeStamp","uint32",0],2:["cResetType","uint32",0],3:["session_ids","<uint32",null],4:["reason","sint32",0]}},StreamStatusNotify:{$m:{1:["mic_status","sint32",0],2:["camera_status","sint32",0]}},StreamStatusNotifyAck:{$m:{1:["result","sint32",0]}},StreamStatusNotifyPush:{$m:{1:["mic_status","sint32",0],2:["camera_status","sint32",0]}},StreamStatusNotifyPushAck:{$m:{1:["result","sint32",0]}},WebRTCDispatchReq:{$m:{1:["type","sint32",0],2:["stream_id","string",""],10:["area_type","int32",0],11:["area_id_list","<int32",null],12:["ipv6_prefer","int32",0],13:["trans_codec_id","int32",0],14:["trans_codec_suffix","string",""]}},WebRTCDispatchRsp:{$m:{1:["gw_nodes","<string",null],2:["gw_nodes_ttl","uint32",0],3:["client_ip","string",""],4:["result","sint32",0],5:["ips","<rtc.webrtc_proto_v2.IpResult",null],6:["ipv6s","<rtc.webrtc_proto_v2.IpResult",null]}}}}},"",ms,!1);var xa,ao=ms.rtc,Pc=function(){return Pc=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Pc.apply(this,arguments)},Zs=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},qo=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},cc=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))};(function(s){s[s.CONNECTING=0]="CONNECTING",s[s.OPEN=1]="OPEN",s[s.CLOSING=2]="CLOSING",s[s.CLOSED=3]="CLOSED"})(xa||(xa={}));var Ia=0,uc=(function(){function s(e,t,n){this.servers=e,this.params=t,this.activeServer=n,this.isConnecting=!1,this._binaryType="blob",this.eventMap={},this.url="",this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.id=Ia++,this.open()}return Object.defineProperty(s.prototype,"binaryType",{get:function(){return this._binaryType},set:function(e){this._binaryType=e},enumerable:!1,configurable:!0}),s.prototype.addEventListener=function(e,t,n){var r,o;this.eventMap[e]?(r=this.eventMap[e])===null||r===void 0||r.push(t):this.eventMap[e]=[t],e==="open"||(o=this.socket)===null||o===void 0||o.addEventListener(e,t,n)},s.prototype.removeEventListener=function(e,t,n){var r;this.eventMap[e]=(this.eventMap[e]||[]).filter(function(o){return o!==t}),e==="open"||(r=this.socket)===null||r===void 0||r.removeEventListener(e,t,n)},s.prototype.dispatchEvent=function(e){throw new Error("Method not implemented.")},Object.defineProperty(s.prototype,"readyState",{get:function(){var e;return this.isConnecting?xa.CONNECTING:((e=this==null?void 0:this.socket)===null||e===void 0?void 0:e.readyState)||xa.CLOSED},enumerable:!1,configurable:!0}),s.prototype.createSocket=function(){return Zs(this,void 0,void 0,function(){var e,t,n,r,o,a=this;return qo(this,function(l){switch(l.label){case 0:if(this.socket&&this.socket.readyState!==xa.CLOSED)return[2];e=null,t=this.activeServer?cc([this.activeServer],this.servers):this.servers,n=function(d){var p,u,v;return qo(this,function(x){switch(x.label){case 0:u="wss://".concat(p=t[d],"/proxy/ws"),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,new Promise(function(U,te){var le=new WebSocket(u);Object.keys(a.eventMap).forEach(function(We){We!=="open"&&(a.eventMap[We]||[]).forEach(function(Ke){le.addEventListener(We,Ke)})}),le.binaryType="arraybuffer",le.onclose=function(We){a.onclose&&a.onclose(We)},le.onerror=function(We){a.onerror&&a.onerror(We),te(We)};var se=0;le.onmessage=function(We){se++;var Ke=We.data;if(se!==1)if(se===2){var Ze=ao.webproxy.WssBindResponse.decode(new Uint8Array(Ke));if(Ze.code!==0)throw"zm.prx.1"+" cloud proxy token auth failed. result: ".concat(JSON.stringify(Ze));a.isConnecting=!1,(a.eventMap.open||[]).forEach(function(et){et(a,We)}),a.onopen&&a.onopen()}else a.onmessage&&a.onmessage(We)},le.onopen=function(We){a.socket=le,U(We),a.authProxy(le)}})];case 2:return x.sent(),[3,4];case 3:return v=x.sent(),e=v,[2,"continue"];case 4:return r.onActiveServer&&(r.onActiveServer(p),r.onActiveServer=void 0),r.url=u,[2,"break"]}})},r=this,o=0,l.label=1;case 1:return o<t.length?[5,n(o)]:[3,4];case 2:if(l.sent()==="break")return[3,4];l.label=3;case 3:return o++,[3,1];case 4:return this.socket||setTimeout(function(){throw e},0),[2]}})})},s.prototype.authProxy=function(e){var t=this.socket;if(t){var n=this.params,r=ao.webproxy.WssBindRequest.encode({appid:n.appid,biz_type:0,mode:1,id_name:n.userID,token:n.token,url:n.target,ack:!0}).finish();t.send(r)}},s.prototype.setParams=function(e){this.params=Pc(Pc({},this.params),e)},s.prototype.open=function(){this.isConnecting=!0,this.readyState!==xa.CLOSED&&this.createSocket()},s.prototype.close=function(){var e;(e=this.socket)===null||e===void 0||e.close()},s.prototype.send=function(e){var t;(t=this.socket)===null||t===void 0||t.send(e)},s.prototype.onopen=function(){},s.prototype.onclose=function(e){},s.prototype.onerror=function(e){},s.prototype.onmessage=function(e){},Object.defineProperty(s.prototype,"bufferedAmount",{get:function(){var e;return((e=this.socket)===null||e===void 0?void 0:e.bufferedAmount)||0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"extensions",{get:function(){var e;return((e=this.socket)===null||e===void 0?void 0:e.extensions)||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"protocol",{get:function(){var e;return((e=this.socket)===null||e===void 0?void 0:e.protocol)||""},enumerable:!1,configurable:!0}),s})(),Ds=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},zi=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},ns=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},rs=ao.webproxy;function gs(s){for(var e=0,t=0;t<s.length;t++)e+=s[t].length;var n=new Uint8Array(e),r=0;for(t=0;t<s.length;t++)n.set(s[t],r),r+=s[t].length;return n}function yo(s,e){return Ds(this,void 0,void 0,function(){var t,n,r,o,a,l;return zi(this,function(d){switch(d.label){case 0:t=new Uint8Array,n=[],r=Array.from(s),o=function(p){var u,v;return zi(this,function(x){switch(x.label){case 0:return u=r[p][0],v=r[p][1],n.push("--"+e),v instanceof Blob?[4,new Promise(function(U){var te=new FileReader;te.onloadend=function(){var le=te.result;if(le){n.push('Content-Disposition: form-data; name="'+u+'"; filename="'+((v==null?void 0:v.name)||"blob")+'"',"Content-Type: "+v.type,`\r
`);var se=zn(n.join(`\r
`));n=[];var We=new Uint8Array(le);t=gs([t,se,We]),U(0)}else U(0)},te.readAsArrayBuffer(v)})]:[3,2];case 1:return x.sent(),[3,3];case 2:n.push('Content-Disposition: form-data; name="'+u+'"',"",v),x.label=3;case 3:return[2]}})},a=0,d.label=1;case 1:return a<r.length?[5,o(a)]:[3,4];case 2:d.sent(),d.label=3;case 3:return a++,[3,1];case 4:return n.push("--"+e+"--"),l=zn(n.join(`\r
`)),n=[],[2,t=gs([t,l])]}})})}function Xs(s){return Ds(this,void 0,void 0,function(){var e,t,n;return zi(this,function(r){switch(r.label){case 0:for(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="----WebKitFormBoundary",n=0;n<16;n++)t+=e.charAt(Math.floor(62*Math.random()));return[4,yo(s,t)];case 1:return[2,{body:r.sent(),contentType:"multipart/form-data; boundary="+t}]}})})}var jl,ql=(function(){function s(e,t){this.proxyList=e,this.token=t,this.enable=!1,this.appID=0,this.userID="web_proxy_"+Date.now()}return Object.defineProperty(s.prototype,"urls",{get:function(){return this.proxyList.map(function(e){var t=e.port;return"".concat(e.hostName).concat(t?":"+t:"")})},enumerable:!1,configurable:!0}),s.prototype.bo=function(e){this.activeServer&&this.activeServer===e||(this.activeServer=e,this.turnInfo=void 0,this.turnExpireTime=void 0)},s.prototype.destroy=function(){this.proxyList=[]},s.prototype.init=function(e){this.appID=e.appID},s.prototype.createSocket=function(e,t){var n=this;if(!this.appID)throw"zego cloud proxy config error. can not init proxy.";var r=new uc(this.urls,{target:e,appid:this.appID,token:this.token,userID:this.userID},this.activeServer);return r.onActiveServer=function(o){n.bo(o)},r},s.prototype.getTurnInfo=function(){var e;return Ds(this,void 0,void 0,function(){var t,n,r;return zi(this,function(o){switch(o.label){case 0:return this.turnExpireTime&&this.turnInfo&&Date.now()<this.turnExpireTime?[2,this.turnInfo]:(this.turnExpireTime=void 0,this.turnInfo=void 0,t=rs.TurnInfoRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,token:this.token}).finish(),[4,this.handleFetch("/turn/info",t)]);case 1:return n=o.sent(),(r=rs.TurnInfoResponse.decode(new Uint8Array(n))).code||(this.turnInfo=r,this.turnExpireTime=Date.now()+.8*(((e=r==null?void 0:r.data)===null||e===void 0?void 0:e.expiration_in_seconds)||0)*1e3),[2,r]}})})},s.prototype.handleFetch=function(e,t){return e===void 0&&(e="/"),Ds(this,void 0,void 0,function(){var n,r,o,a,l,d,p;return zi(this,function(u){switch(u.label){case 0:n=null,r=null,o=this.activeServer?ns([this.activeServer],this.urls):this.urls,a=0,u.label=1;case 1:if(!(a<o.length))return[3,7];d="https://".concat(l=o[a]).concat(e),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,fetch(d,{method:"post",body:t})];case 3:return n=u.sent(),this.bo(l),[3,5];case 4:return p=u.sent(),r=p,[3,6];case 5:return[3,7];case 6:return a++,[3,1];case 7:if(r)throw r;return[4,n==null?void 0:n.arrayBuffer()];case 8:return[2,u.sent()||[]]}})})},s.prototype.intranetCheck=function(e,t){return Ds(this,void 0,void 0,function(){var n,r;return zi(this,function(o){switch(o.label){case 0:return n=rs.IntranetCheckRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,token:this.token,vrs_ipv4:e,vrs_ipv6:t}).finish(),[4,this.handleFetch("/intranet/check",n)];case 1:return r=o.sent(),[2,rs.IntranetCheckResponse.decode(new Uint8Array(r))]}})})},s.prototype.startHttpRequest=function(e,t,n,r){var o=this,a=!1;((r==null?void 0:r.timeout)||0)>0&&setTimeout(function(){a||(a=!0,n&&n({status_code:-1,headers:[],body:zn("request time out.")}))},r==null?void 0:r.timeout),new Promise(function(l,d){return Ds(o,void 0,void 0,function(){var p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et;return zi(this,function(At){switch(At.label){case 0:return(p=(Et=e.headers)===null||Et===void 0?void 0:Et.find(function(Ot){return Ot.name.toLowerCase()==="content-type"&&Ot.val.toLowerCase().includes("multipart/form-data")}))&&e.body instanceof FormData?[4,Xs(e.body)]:[3,2];case 1:u=At.sent(),v=u.contentType,e.body=u.body,p.val=v,At.label=2;case 2:x=e.body,typeof e.body=="string"&&(x=zn(e.body)),U=rs.HTTPRequest.encode({appid:this.appID,biz_type:0,mode:1,id_name:this.userID,url:e.location,token:this.token,method:e.method_no,headers:e.headers,body:x}).finish(),te=null,le=null,se=this.activeServer?ns([this.activeServer],this.urls):this.urls,We=0,At.label=3;case 3:if(!(We<se.length))return[3,9];Ke="https://".concat(se[We],"/proxy/http"),At.label=4;case 4:return At.trys.push([4,6,,7]),[4,fetch(Ke,{method:"post",body:U})];case 5:return te=At.sent(),le=null,[3,7];case 6:return Ze=At.sent(),le=Ze,[3,8];case 7:return[3,9];case 8:return We++,[3,3];case 9:return le?(d({status_code:-1,headers:[],body:zn(JSON.stringify(le))}),[2]):[4,te==null?void 0:te.arrayBuffer()];case 10:if(et=At.sent()||[],ht=rs.HTTPResponse.decode(new Uint8Array(et)),gt=ht==null?void 0:ht.data,(ht==null?void 0:ht.code)===0&&gt){if(!e.origin)try{gt.body=JSON.parse(So(gt.body))}catch{gt.body=So(gt.body)}l(gt)}else d({status_code:-1,headers:[],body:JSON.parse(So(gt.body))});return[2]}})})}).then(function(l){!a&&t&&(a=!0,t(l))}).catch(function(l){!a&&n&&(a=!0,n&&n({status_code:-1,headers:[],body:zn(JSON.stringify(l))}))})},s})(),$s=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},tl=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}};(function(s){s[s.Accesshub=0]="Accesshub",s[s.Logger=1]="Logger",s[s.Detaillog=2]="Detaillog"})(jl||(jl={}));var bo,er,Ir,Oo=(function(){function s(e){this._o=e}return s.prototype.init=function(e){},s.prototype.createSocket=function(e,t){try{return new WebSocket(this.wo(e,t))}catch(n){throw console.error(n),n}},s.prototype.wo=function(e,t){var n=this;return e.replace(/^(https?:\/\/|wss?:\/\/)([\w.-]+)(?::(\d+))?/,function(r,o,a,l){var d="";if(n._o){var p=n._o,u=p.accesshubProxy,v=p.loggerProxy,x=p.detaillogProxy;switch(t){case 0:u&&(d=o+u);break;case 1:v&&(d=o+v);break;case 2:x&&(d=o+x)}}return d?(d.endsWith("/")&&(d=d.substring(0,d.length-1)),d):r})},s.prototype.startHttpRequest=function(e,t,n,r){var o=this,a=!1;((r==null?void 0:r.timeout)||0)>0&&setTimeout(function(){a||(a=!0,n&&n({status_code:-1,headers:[],body:zn("request time out.")}))},r==null?void 0:r.timeout),new Promise(function(l,d){return $s(o,void 0,void 0,function(){var p,u,v,x,U,te;return tl(this,function(le){switch(le.label){case 0:p=e.body,u=null,v=null,x=this.wo(e.location,e.serviceType),le.label=1;case 1:return le.trys.push([1,3,,4]),[4,fetch(x,{method:e.method_no===1?"get":"post",body:p})];case 2:return u=le.sent(),v=null,[3,4];case 3:return U=le.sent(),v=U,[3,4];case 4:return v?(d({status_code:-1,headers:[],body:zn(JSON.stringify(v))}),[2]):[4,u==null?void 0:u.json()];case 5:return te=le.sent(),u?l({status_code:(u==null?void 0:u.status)||-1,body:te,headers:[]}):d({status_code:-1,headers:[],body:zn("request failed.")}),[2]}})})}).then(function(l){!a&&t&&(a=!0,t(l))}).catch(function(l){!a&&n&&(a=!0,n&&n({status_code:-1,headers:[],body:zn(JSON.stringify(l))}))})},s.prototype.destroy=function(){},s})(),yi=function(s,e,t){if(t||arguments.length===2)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},lc=["relogin_token"],ro=["id_name","nick_name"],ea=yi(yi(["stream_id"],ro,!0),["extra_info","title","stream_attr","stream_title"],!1),nl=["trans_type"],pi=["trans_channel"],ri=yi([],ro,!0),rl=["msg_id","msg_client_id"],ka=yi(["trans_type"],pi,!0),ou=yi([],pi,!0),ta=yi(["trans_type","trans_data"],ro,!0),na=yi([],pi,!0),Os=yi([],ta,!0),To=["stop_stream_id_list"],su=yi([],ro,!0),au=["id_name","custom_reason"],Aa=["stream_id_list"],ra=["sender_idname","sender_nickname"],Pa=yi([],ea,!0),co=yi(yi([],ro,!0),["msg_content"],!1),Na=yi(yi([],ro,!0),["msg_id","msg_content"],!1),Nc=yi(yi([],ro,!0),["trans_type","trans_data","trans_channel"],!1),Th=yi(yi([],ro,!0),pi,!0),il=["trans_type","trans_data"],wh=["sender_idname","sender_nickname","msg_content"],io=[[1001,"LoginRoomReq"],[1002,"LoginRoomRsp"],[1003,"LogoutRoomReq"],[1004,"LogoutRoomRsp"],[1101,"PushReq"],[1102,"PushRsp"],[1103,"MergePushReq"],[1104,"MergePushRsp"],[1105,"PushKickout"],[10001,"PushUserInfoUpdated"],[10002,"PushUserKickout"],[10003,"PushUserLogReport"],[10004,"PushUserTokenExpire"],[11005,"PushSignalCustom"],[11001,"PushJoinliveRequest"],[11002,"PushJoinliveResult"],[11003,"PushJoinliveInvite"],[11004,"PushJoinliveStop"],[11007,"PushTransparentMsg"],[11008,"PushChannelMsg"],[12001,"PushStreamAdd"],[12002,"PushStreamDelete"],[12003,"PushStreamUpdate"],[13001,"PushIm"],[14001,"PushBigIm"],[15001,"PushTrans"],[15002,"PushUserTrans"],[301001,"EnterRoomReq"],[301002,"EnterRoomRsp"],[301003,"QuitRoomReq"],[301004,"QuitRoomRsp"],[301005,"HbReq"],[301006,"HbRsp"],[301007,"RenewTokenReq"],[301008,"RenewTokenRsp"],[301009,"SetUserAttrReq"],[301010,"SetUserAttrRsp"],[301011,"SetTransReq"],[301012,"SetTransRsp"],[301013,"GetTransReq"],[301014,"GetTransRsp"],[301015,"GetUserTransReq"],[301016,"GetUserTransRsp"],[302001,"AddStreamReq"],[302002,"AddStreamRsp"],[302003,"DeleteStreamReq"],[302004,"DeleteStreamRsp"],[302005,"UpdateStreamReq"],[302006,"UpdateStreamRsp"],[302007,"GetStreamListReq"],[302008,"GetStreamListRsp"],[303001,"SendImReq"],[303002,"SendImRsp"],[303003,"GetImReq"],[303004,"GetImRsp"],[303005,"SendBigImReq"],[303006,"SendBigImRsp"],[303009,"SignalLiveRequestReq"],[303010,"SignalLiveRequestRsp"],[303011,"SignalLiveResultReq"],[303012,"SignalLiveResultRsp"],[303013,"SignalLiveInviteReq"],[303014,"SignalLiveInviteRsp"],[303015,"SignalLiveStopReq"],[303016,"SignalLiveStopRsp"],[303017,"SignalLiveCustomReq"],[303018,"SignalLiveCustomRsp"],[303019,"SignalTransmitReq"],[303020,"SignalTransmitRsp"],[303021,"SignalTransparentMsgReq"],[303022,"SignalTransparentMsgRsp"],[303023,"SendChannelMsgReq"],[303024,"SendChannelMsgRsp"],[304001,"GetUserlistReq"],[304002,"GetUserlistRsp"]],dc=io.reduce(function(s,e){var t=e[0];return s[t]=[12001,12002,12003].includes(t)?"PushStream":e[1],s},{}),vr=io.reduce(function(s,e){return s[e[1]]=e[0],s},{}),ia=ye(3788),Vl=ye(6440),Da=ye.n(Vl),Oa=ye(4636),oo=ye.n(Oa),Ki=(function(){function s(){}return s.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(oo()(this.uint8Array2WordArray(e)))},s.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t[o>>>2]>>>24-o%4*8&255;return r},s.prototype.uint8Array2WordArray=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e[r])<<24-r%4*8;return Da().create(n,t)},s})(),wo=function(){return wo=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},wo.apply(this,arguments)},Hl=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))};ia.util.Long=ki.A,ia.configure(),bo=ao,er=ao.liveroom_cs_v3,Ir=ao.proto_switch_v3;var lo,Dc=1001,Pi=1002,Oc=1003,Ls=1004;(function(s){s[s.disconnected=0]="disconnected",s[s.broken=1]="broken",s[s.connected=2]="connected"})(lo||(lo={}));var La=(function(){function s(e,t,n,r,o){var a,l,d,p,u,v,x,U,te=this;this.an=e,this.pn=t,this._ua=n,this._dataReport=r,this.rtm=o,this.seq=0,this.So={},this.Eo="",this.zPushSid="0",this.ko=[["user_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"],["liveroom_hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"],["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]],this.Oo=100,this.Ro=1e4,this.To=2e3,this.Co=bo,this.Ao={},this.zo={},this.Do={},this.No=[vr.PushReq,vr.MergePushReq,vr.PushKickout],this.Po=[vr.LoginRoomRsp,vr.LogoutRoomRsp,vr.PushKickout,vr.PushReq,vr.MergePushReq],this.xo=[1105],this.jo=lo.disconnected,this.qo=[11001,11002,11003,11004],this.Lo="",this.Bo=new Ki,this.Uo=this._ua.getPCRequest(Jn.BusinessService.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=ki.A.fromInt(0),(a=this.Uo)===null||a===void 0||a.on("connected",function(le){te.Go(le)}),(l=this.Uo)===null||l===void 0||l.on("broken",function(le){te.Jo()}),(d=this.Uo)===null||d===void 0||d.on("disconnected",function(le,se){te.Fo(le,se)}),(p=this.Uo)===null||p===void 0||p.on("downLoadMessage",function(le,se){te.handlePush(le,se)}),(u=this.Uo)===null||u===void 0||u.on("exception",function(le,se){te.an.info("zm.lrh.o.0 except "+JSON.stringify(le))}),(v=this.Uo)===null||v===void 0||v.on("pcBrokenEvent",function(le){var se=Cd,We=te.cr.createSpan(I.t0.H,{key:Ws},{key:""},se.event);We.setAttributes({service_no:se.service_no(le==null?void 0:le.service_no),error:(le==null?void 0:le.code)||0}),We.end()}),(x=this.Uo)===null||x===void 0||x.on("pcDisconnectedEvent",function(le){var se=Rd,We=te.cr.createSpan(I.t0.H,{key:Ws},{key:""},se.event);We.setAttributes({service_no:se.service_no(le==null?void 0:le.service_no),error:(le==null?void 0:le.code)||0}),We.end()}),(U=this.Uo)===null||U===void 0||U.on("pcConnectedEvent",function(le){var se=Qu,We=te.cr.createSpan(I.t0.H,{key:Ws},{key:""},se.event);We.setAttributes({service_no:se.service_no(le.service_no),recv_time:se.recv_time(new Date().getTime()),proxy_link_sources:se.proxy_link_sources(le.proxy_link_sources),connect_stream:se.connect_stream(le.connect_stream)}),We.end()})}return Object.defineProperty(s.prototype,"Ho",{get:function(){return Object.values(this.So)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"nickName",{get:function(){return zn(this.pn.nickName)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"TermType",{get:function(){return this.pn.ENV%2==0?Z.t3.TT_WEB:Z.t3.TT_MINIPROGRAM},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.isDisConnect=function(){return this.jo!==lo.connected},s.prototype.getHeader=function(e,t,n){var r={cmd:e,seq:t,timestamp:new Date().getTime()};this.Vo&&(r.controls=this.Vo),n!=null&&n.contextKey&&(r.context_key=n==null?void 0:n.contextKey);var o=Ir.Header.create(r),a=Ir.Header.encode(o).finish();return{seq:r.seq,content:a}},Object.defineProperty(s.prototype,"isUaConnect",{get:function(){return this._ua.isConnect()},enumerable:!1,configurable:!0}),s.prototype.sendMessage=function(e,t,n,r,o,a,l){var d,p,u=this;a===void 0&&(a={timeout:6e3,resend:!1}),l===void 0&&(l=!0),this.an.info(hi+" call"),++this.seq;var v,x=function(){if(l){var et={seq:u.seq,sendTime:Date.parse(new Date+""),timeout:a.timeout,resend:a.resend,success:n,error:function(ht,gt,Et){var At;u.an.error(hi+" error "+gt+" "+(0,he.iq)(ht)+" "+(0,he.iq)(Et)+" "+!!r);var Ot=ht==null?void 0:ht.body,Bt=Ot==null?void 0:Ot.err_code,Kt=(At=ht==null?void 0:ht.header)===null||At===void 0?void 0:At.cmd,Ht=Et==null?void 0:Et.roomID;if(Kt!==vr.LoginRoomRsp){var Zt=u.pn.roomModulesList.find(function(un){return un.roomID==Ht});if([1002,105].indexOf(Bt)>-1)return Kt===vr.EnterRoomRsp&&Zt?Zt?void Zt.retryRoom(!1,!0):void u.an.error(hi+" room no found ignore "):void u.rtm.retryRoom(!1,void 0,!0);if([141].includes(Bt)&&Zt)return void Zt.roomHandler.logoutByError({code:Bt,msg:Ot==null?void 0:Ot.err_message})}r&&r(ht,gt)},params:o};a.resend&&(et.cmdN=e,et.sendBody=t),u.So[et.seq]=et}};if(e!=="LoginRoomReq"&&this.jo!==lo.connected)return this.an.info(hi+" state "+this.jo+" "+a.resend),a.resend?x():r&&r(Ft.pzL),-1;if((0,B.Cs)(e))v=e;else if((0,B.TE)(v=vr[e]))return this.an.warn(hi+" cmd not found "+e),-1;x();var U,te=0;U=(0,B.TE)(o==null?void 0:o.roomID)?(d=this.pn.roomModulesList[0])===null||d===void 0?void 0:d.roomID:o==null?void 0:o.roomID,e!=="LoginRoomReq"&&U&&(te=this.zo[U]);var le=this.getHeader(v,this.seq,{contextKey:te}),se=le.content,We=t,Ke=this.getHead(se.length,We.length),Ze=new Uint8Array(Array.from(Ke).concat(Array.from(se)).concat(Array.from(We)));return this.an.info(hi+" seq: "+le.seq+" cmd: "+e),(p=this.Uo)===null||p===void 0||p.sendRequest({payload:Ze,ack:e==="LoginRoomReq"},function(et){u.an.info(hi+" fail")},function(){u.an.info(hi+" ack")},{}),le.seq},s.prototype.getHead=function(e,t){var n=new Uint8Array(7);return n[0]=49,n[1]=e>>8,n[2]=e-(n[1]<<8),n.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),n},s.prototype.handlePush=function(e,t){if(!(e[0]!==49||e.length<7)){var n=(e[1]<<8)+e[2],r=Ir.Header.decode(e.slice(7,7+n)),o=e.slice(7+n),a=o,l=(e[3]<<24)+(e[4]<<16)+(e[5]<<8)+e[6];if(l!=o.length&&this.an.warn(ie+" body len ".concat(l," != ").concat(o.length)),!dc[r.cmd])return this.an.info(Ii+" cmd is not rtc"),void this.onSwitchMessage(r,a);var d=this.decodeResponseBody(r,a);if(this.No.includes(r.cmd))this.handleSwitchPush(r,d);else{this.an.info(Ii+" down seq: "+r.seq+" "+(dc[r.cmd]||r.cmd)+" "+JSON.stringify(this.Qo(d)));var p={header:this.transHeader(r),body:this.transRsp(d)},u=this.Ao[r.context_key];(0,B.TE)(u)||(p.header.room_id=u),this.handleSendCommandMsgRsp(p)}}},s.prototype.handleSwitchPush=function(e,t){var n,r,o,a,l=this,d=e.context_key,p=this.Ao[d];if(p||this.xo.includes(e.cmd))if(e.cmd===vr.PushReq){if((U=this.transRsp(t.head)).room_id=p,!this.pn.roomModulesList.find(function(We){return We.roomID==p}))return void this.an.warn(ie+" room no found ignore ");var u={header:U,body:this.qo.includes(t.head.sub_cmd)?{signal_msg:So(t.msg_body),sub_cmd:t.head.sub_cmd}:t.head.sub_cmd===vr.PushSignalCustom?{custommsg:So(t.msg_body)}:dc[t.head.sub_cmd]?this.transRsp(this.Yo(er[dc[t.head.sub_cmd]],t.msg_body)):{}};switch(t.head.sub_cmd){case vr.PushUserInfoUpdated:(n=u.body.user_action_list)===null||n===void 0||n.forEach(function(We){l.Ko(We,su)});break;case vr.PushUserKickout:this.Ko(u.body,au);break;case vr.PushTrans:this.Ko(u.body,Nc);break;case vr.PushUserTrans:this.Ko(u.body,Th),(r=u.body.trans_seq_list)===null||r===void 0||r.forEach(function(We){l.Ko(We,il)});break;case vr.PushIm:(o=u.body.msg_list)===null||o===void 0||o.forEach(function(We){l.Ko(We,co)});break;case vr.PushChannelMsg:this.Ko(u.body,wh),this.keysExist(u.body,["channel_type"]);break;case vr.PushTransparentMsg:this.Ko(u.body,ra);break;case vr.PushStreamAdd:case vr.PushStreamDelete:case vr.PushStreamUpdate:(a=u.body.stream_info_list)===null||a===void 0||a.forEach(function(We){l.Ko(We,Pa)});break;case vr.PushUserTokenExpire:this.Ko(u.body.stop_stream_info,Aa);break;case vr.PushUserLogReport:this.pn.getLogWhiteList(!0)}switch(this.an.info(ie+" push ".concat(e.seq," ").concat(JSON.stringify(this.Qo(u)))),t.head.sub_cmd){case vr.PushUserInfoUpdated:this.handlePushUserStateUpdateMsg(u);break;case vr.PushUserKickout:this.transKeysName(u.body,this.ko),this.handlePushKickout(u,!1);break;case vr.PushTrans:this.handlePushTransMsg(u);break;case vr.PushUserTrans:this.handlePushUserTransMsg(u);break;case vr.PushIm:this.handlePushRoomMsg(u);break;case vr.PushSignalCustom:this.handlePushCustomMsg(u);break;case vr.PushStreamAdd:case vr.PushStreamDelete:case vr.PushStreamUpdate:this.handlePushStreamMsg(u);break;case vr.PushJoinliveRequest:case vr.PushJoinliveResult:case vr.PushJoinliveInvite:case vr.PushJoinliveStop:this.handlePushSignalMsg(u);break;case vr.PushUserTokenExpire:this.handlePushTokenExpire(u);break;case vr.PushChannelMsg:this.handlePushChannelMsg(u);break;case vr.PushTransparentMsg:this.handlePushTransparentMsg(u);break;default:this.an.info(ie+" white "),this.onSwitchMessage(e,t)}if(t.head.qos_flag==1){var v=Ir.PushRsp.create({code:0,message:"",sub_cmd:t.head.sub_cmd,server_send_time:t.head.send_time}),x=Ir.PushRsp.encode(v).finish();this.sendMessage("PushRsp",x,void 0,void 0)}}else if(e.cmd===vr.MergePushReq){var U;if((U=this.transRsp(t.head)).room_id=p,!this.pn.roomModulesList.find(function(We){return We.roomID==p}))return void this.an.warn(ie+" room no found ignore ");var te=[];t.message_list.forEach(function(We){var Ke,Ze;te.push({sub_cmd:We.sub_cmd,sub_seq:We.sub_seq}),We.sub_cmd===vr.PushBigIm&&((Ke=(Ze=er.PushBigIm.decode(We.msg_body)).msg_list)===null||Ke===void 0||Ke.forEach(function(et){l.Ko(et,Na)}),We.msg_body=Ze)});var le={header:U,body:this.transRsp(t)};delete le.body.head,this.handlePushMergeMsg(le),t.head.qos_flag==1&&(v=Ir.MergePushRsp.create({messages:te,server_send_time:t.head.send_time}),x=Ir.MergePushRsp.encode(v).finish(),this.sendMessage("MergePushRsp",x,void 0,void 0))}else e.cmd===vr.PushKickout&&this.handlePushKickout({header:e,body:{reason:t.reason>900?t.reason-900:t.reason,msg:t.message,need_relogin:t.is_need_relogin!==void 0?t.is_need_relogin:0}},!0);else{this.an.warn(ie+" ctx key ".concat(d," not found"));var se={header:e,body:t};this.Do[d]?this.Do[d].push(se):this.Do[d]=[se]}},s.prototype.handlePushChannelMsg=function(e){},s.prototype.handlePushTransparentMsg=function(e){},s.prototype.handlePushTokenExpire=function(e){var t,n,r=((n=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.stop_stream_info)===null||n===void 0?void 0:n.stream_id_list)||[];r.length>0&&this.pn.actionListener("_stopStream",r,{code:pe.TOKEN_EXPIRED.code,message:pe.TOKEN_EXPIRED.msg})},s.prototype.handlePushKickout=function(e,t){var n,r;if(t)Hl([],this.pn.roomModulesList).forEach(function(l){l.roomHandler.handlePushKickout(e,!0,!0)});else{var o=(n=e==null?void 0:e.header)===null||n===void 0?void 0:n.room_id,a=this.pn.roomModulesList.find(function(l){return l.roomID==o});if(this.longToStringNumber(e.body,["session_id"],"toString"),!a)return void this.an.error("zm.lrh.pk room no found ignore "+JSON.stringify((r=e.header)===null||r===void 0?void 0:r.room_id));a.roomHandler.handlePushKickout(e)}},s.prototype.handlePushUserStateUpdateMsg=function(e){var t,n,r,o=(t=e==null?void 0:e.header)===null||t===void 0?void 0:t.room_id,a=this.pn.roomModulesList.find(function(u){return u.roomID==o});if(a){var l=e.body.user_action_list.map(function(u){return{Action:u.action,IdName:u.id_name,NickName:u.nick_name,Role:u.role,LoginTime:u.login_time.toString()}}),d=this.pn.reporter.createSpan(I.t0.H,{key:Kr.event,par:o},{key:""},yd),p={body:{user_actions:l,user_list_seq:e.body.server_user_seq.toNumber(),room_id:o}};d.setAttributes({user_list_seq:(n=p==null?void 0:p.body)===null||n===void 0?void 0:n.user_list_seq,update_user:(r=p==null?void 0:p.body)===null||r===void 0?void 0:r.user_actions}),d.end(),a.userHandler.handlePushUserStateUpdateMsg(p)}else this.an.error("zm.lrh.puu room no found ignore "+JSON.stringify(e))},s.prototype.handlePushStreamMsg=function(e){},s.prototype.handlePushSignalMsg=function(e){},s.prototype.handlePushMergeMsg=function(e){},s.prototype.handlePushCustomMsg=function(e){},s.prototype.handlePushRoomMsg=function(e){},s.prototype.handlePushTransMsg=function(e){},s.prototype.handlePushUserTransMsg=function(e){},s.prototype.onSwitchMessage=function(e,t){},s.prototype.decodeResponseBody=function(e,t){var n=this.Po.includes(e.cmd)?"proto_switch_v3":"liveroom_cs_v3";return this.Yo(this.Co[n][dc[e.cmd]],t)},s.prototype.login=function(e,t,n){var r,o,a=this;this.jo==lo.disconnected&&(this.an.info(ue+" state disconnect"),this.closeRequest());var l=new Date().getTime()+"",d={user_session_id:(r=e.longSid)!==null&&r!==void 0?r:ki.A.fromInt(0),net_type:Ar(),room_id:zn(e.roomID),room_name:zn(e.roomName),nick_name:this.nickName,role:this.pn.role,third_token:zn(e.token),room_create_flag:this.pn.roomCreateFlag,user_state_flag:e.userStateUpdate?1:0,user_count_limit:e.maxMemberCount,relate_service:this.pn.relateService.join()||""};if(e.isMulti){var p=wo(wo({},d),{conn_type:2});delete(x=wo(wo({},p),{room_id:e.roomID,room_name:e.roomName})).third_token,this.an.info(ue+" enter "+JSON.stringify(x));var u=er.EnterRoomReq.create(p),v=er.EnterRoomReq.encode(u).finish();this.sendMessage("EnterRoomReq",v,function(te,le){var se;a.Zo(te,e),t&&t(te,le),!((se=te.header)===null||se===void 0)&&se.context_key&&a.processPushMsgCache(te.header.context_key),a.Xo(e.roomID)},function(te,le){a.clearAllPushMsgCache(),n&&n(te,le)},{roomID:e.roomID})}else{var x,U=wo(wo({},d),{app_id:this.pn.appid,id_name:zn(this.pn.idName),device_id:this.pn.deviceID,term_type:this.TermType,sdk_version:this.pn.sdkVerNum,client_stamp:zn(l),relogin_token:this.switchSessionID.notEquals(ki.A.fromInt(0))?zn(this.Lo):"",switch_session_id:this.switchSessionID,user_session_id:(o=e.longSid)!==null&&o!==void 0?o:ki.A.fromInt(0),biz_type:0,biz_version:this.pn.bizVersion||"",login_logic:this.pn.isMultiRoom?3:1,sdk_conn_type:2});e.roomReasonState===Ie.Reconnecting&&(U.relogin_type=1),delete(x=wo(wo({},U),{id_name:this.pn.idName,nick_name:this.pn.nickName,client_stamp:l,k1_sign:void 0,relogin_token:this.Lo,room_id:e.roomID,room_name:e.roomName,user_session_id:e.longSid})).third_token,this.Eo=e.token,this.an.info(ue+" login "+JSON.stringify(x)),this.an.remoteReport(ue+" token "+e.token),u=Ir.LoginRoomReq.create(U),v=Ir.LoginRoomReq.encode(u).finish(),this.sendMessage("LoginRoomReq",v,function(te,le){var se,We,Ke;a.an.info(ue+" login rsp"),a.switchSessionID=te.body.switch_session_id,!((se=te==null?void 0:te.header)===null||se===void 0)&&se.controls&&(a.Vo=(We=te==null?void 0:te.header)===null||We===void 0?void 0:We.controls),a.Zo(te,e),a.Lo=te.body.relogin_token,t&&t(te,le),!((Ke=te.header)===null||Ke===void 0)&&Ke.context_key&&a.processPushMsgCache(te.header.context_key),a.Xo(e.roomID)},function(te,le){a.clearAllPushMsgCache(),n&&n(te,le)})}},s.prototype.Zo=function(e,t){var n,r,o,a,l,d,p=this;!((n=e.header)===null||n===void 0)&&n.context_key&&(this.zo[t.roomID]=e.header.context_key,this.Ao[e.header.context_key]=t.roomID,e.header.room_id=t.roomID),this.Ko(e.body,lc),this.Ko((r=e.body)===null||r===void 0?void 0:r.anchor_info,ro),(a=(o=e.body)===null||o===void 0?void 0:o.trans_channel_list)===null||a===void 0||a.forEach(function(u,v){var x;p.Ko(u,pi),(x=u.trans_seq_list)===null||x===void 0||x.forEach(function(U){p.Ko(U,nl)})}),(d=(l=e.body)===null||l===void 0?void 0:l.stream_info_list)===null||d===void 0||d.forEach(function(u,v){p.Ko(e.body.stream_info_list[v],ea)}),this.longToStringNumber(e.body,["ret_timestamp"],"toString"),this.transKeysName(e.body,this.ko),this.keysExist(e.body,["token_remain_time","stream_seq","hearbeat_interval","hearbeat_timeout"]),e.body.anchor_info={anchor_id_name:e.body.anchor_info.id_name,anchor_id:e.body.anchor_info.user_id,anchor_nick_name:e.body.anchor_info.nick_name}},s.prototype.transKeysName=function(e,t){t.forEach(function(n){(0,B.TE)(e[n[0]])||(e[n[1]]=e[n[0]],delete e[n[0]])})},s.prototype.keysExist=function(e,t){t.forEach(function(n){e[n]===void 0&&(e[n]=0)})},s.prototype.longToStringNumber=function(e,t,n){t.forEach(function(r){ki.A.isLong(e[r])&&(e[r]=e[r][n]())})},s.prototype.Ko=function(e,t){var n=this;(0,B.w)(e)&&t.forEach(function(r){if(Object.prototype.toString.call(e[r])==="[object Uint8Array]")try{e[r]=So(e[r])}catch(o){n.an.error("zm.lrh.bts "+r+" "+o)}else Object.prototype.toString.call(e[r])==="[object Array]"&&!e[r].some(function(o){return Object.prototype.toString.call(o)!=="[object Uint8Array]"})&&(e[r]=e[r].map(function(o,a){try{return So(o)}catch(l){return n.an.error("zm.lrh.bts  "+" ".concat(a," ").concat(r," ").concat(l)),o}}))})},s.prototype.logout=function(e,t,n){var r=this;if(e.isMulti){this.an.info(Xe+" quit "+e.roomID),this.clearPushMsgCacheByRoomID(e.roomID);var o=er.QuitRoomReq.create(l={}),a=er.QuitRoomReq.encode(o).finish();return this.sendMessage("QuitRoomReq",a,function(p,u){r.handleLogoutRsp(e.roomID),t&&t(p,u)},function(p,u){r.handleLogoutRsp(e.roomID),n&&n(p,u)},{roomID:e.roomID})}this.clearAllPushMsgCache();var l={logout_code:0,logout_check:this.Bo.md5Bytes(zn(this.Eo)),user_session_id:e.longSid,logout_logic:this.pn.isMultiRoom?3:1},d=this.Qo(l);return this.an.info(Xe+" logout "+JSON.stringify(d)),o=Ir.LogoutRoomReq.create(l),a=Ir.LogoutRoomReq.encode(o).finish(),this.sendMessage("LogoutRoomReq",a,function(p,u){r.handleLogoutRsp(e.roomID),t&&t(p,u)},function(p,u){r.handleLogoutRsp(e.roomID),n&&n(p,u)},{roomID:e.roomID})},s.prototype.Wo=function(){var e=this.Ho;this.an.info("zm.lrh.csml "+e.length),e.forEach(function(t){t&&t.error&&setTimeout(function(){t&&t.error&&t.error(pe.TIMEOUT,t.seq)},0)}),this.So={}},s.prototype.$o=function(){var e=this,t=Date.now(),n=0,r=0,o=0;this.Ho.find(function(a){if(a.sendTime+a.timeout>t)return!1;if(delete e.So[a.seq],++r,a.error==null)++o;else{var l=a.error,d=a.seq;setTimeout(function(){l&&l(pe.TIMEOUT,d)},0)}return++n>=e.Oo}),r>0&&this.an.info("zm.lrh.cmlt timeout: ".concat(r," , ").concat(o))},s.prototype.startCheck=function(){var e=this;this.$o(),this.tu=setTimeout(function(){e.startCheck()},this.To)},s.prototype.stopCheck=function(){this.Wo(),clearTimeout(this.tu)},s.prototype.Xo=function(e){var t=this,n=this.Ho;this.an.info("zm.lrh.huscl "+n.length),n.forEach(function(r){if(r&&r.resend){var o=r.seq,a=r.cmdN,l=r.sendTime,d=r.sendBody,p=r.params,u=r.success,v=r.error;if((p==null?void 0:p.roomID)===e){var x=new Date().getTime()-l;t.sendMessage(a,d,u,v,p,{timeout:x,resend:!1},!0),delete t.So[o]}}})},s.prototype.handleSendCommandMsgRsp=function(e){var t=this.So[e.header.seq];if(t!=null){var n=t,r=n==null?void 0:n.params;delete this.So[e.header.seq],e.body.err_code===0?setTimeout(function(){n&&n.success!=null&&n.success(e,e.header.seq)},0):setTimeout(function(){n&&n.error!=null&&n.error(e,e.header.seq,r)},0)}},s.prototype.getReqHead=function(e){return{}},s.prototype.heartBeat=function(e,t,n,r){var o=this,a=er.HbReq.create({}),l=er.HbReq.encode(a).finish();this.sendMessage("HbReq",l,function(d,p){var u,v;(u=d.body.trans_channel_list)===null||u===void 0||u.forEach(function(x,U){var te;o.Ko(x,pi),(te=x.trans_seq_list)===null||te===void 0||te.forEach(function(le){o.Ko(le,nl)})}),(v=d.body.user_trans_channel_list)===null||v===void 0||v.forEach(function(x,U){var te;o.Ko(x,pi),(te=x.trans_seq_list)===null||te===void 0||te.forEach(function(le){o.Ko(le,nl)})}),o.transKeysName(d.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"]]),o.keysExist(d.body,["hearbeat_interval","hearbeat_timeout"]),d.body.server_user_seq=d.body.user_seq.toNumber(),o.longToStringNumber(d.body,["ret_timestamp"],"toNumber"),e&&e(d,p)},t,{roomID:n==null?void 0:n.roomID},{timeout:r})},s.prototype.fetchUserList=function(e,t,n,r){var o=this,a=wo({},e),l=this.Qo(a);this.an.info(je+" "+JSON.stringify(l));var d=er.GetUserlistReq.create(a),p=er.GetUserlistReq.encode(d).finish();return this.sendMessage("GetUserlistReq",p,function(u,v){var x,U;o.an.info(je+" suc "+v),(U=(x=u.body)===null||x===void 0?void 0:x.user_base_info_list)===null||U===void 0||U.forEach(function(te,le){o.Ko(u.body.user_base_info_list[le],ri)}),o.transKeysName(u.body,[["user_base_info_list","user_baseinfos"]]),o.longToStringNumber(u.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(u,v)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.sendRoomMsg=function(e,t,n,r){var o=this,a={msg_category:e.msg_category,msg_type:e.msg_type,msg_content:zn(e.msg_content)},l=this.Qo(a);this.an.info("zm.lrh.srm.1 "+JSON.stringify(l));var d=er.SendImReq.create(a),p=er.SendImReq.encode(d).finish();return this.sendMessage("SendImReq",p,function(u,v){o.longToStringNumber(u.body,["msg_id"],"toNumber"),t&&t(u,v)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.sendReliableMessage=function(e,t,n,r){var o=this,a={trans_type:zn(e.trans_type),trans_data:zn(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:zn(e.trans_channel)},l=this.Qo(a);this.an.info("zm.lrh.srm.0 "+JSON.stringify(l));var d=er.SetTransReq.create(a),p=er.SetTransReq.encode(d).finish();return this.sendMessage("SetTransReq",p,function(u,v){o.Ko(u.body,ka),t(u,v)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.fetchReliableMessage=function(e,t,n,r){var o=this,a=e.fetch_array.map(function(v){return{trans_type:zn(v.trans_type),trans_local_seq:v.trans_seq}}),l={trans_channel:zn(e.trans_channel),trans_list:a},d=this.Qo(l);this.an.info("zm.lrh.frm "+JSON.stringify(d));var p=er.GetTransReq.create(l),u=er.GetTransReq.encode(p).finish();return this.sendMessage("GetTransReq",u,function(v,x){var U;o.Ko(v.body,ou),(U=v.body.trans_list)===null||U===void 0||U.forEach(function(te){o.Ko(te,ta)}),t(v,x)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.fetchUserTransInfo=function(e,t,n,r){var o=this,a=e.fetch_array.map(function(v){return{trans_type:zn(v.trans_type),trans_local_seq:v.trans_seq}}),l={trans_channel:zn(e.trans_channel),user_trans_list:a},d=this.Qo(l);this.an.info("zm.lrh.futi "+JSON.stringify(d));var p=er.GetUserTransReq.create(l),u=er.GetUserTransReq.encode(p).finish();return this.sendMessage("GetUserTransReq",u,function(v,x){var U;o.Ko(v.body,na),(U=v.body.user_trans_list)===null||U===void 0||U.forEach(function(te){o.Ko(te,Os)}),t(v,x)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.sendCustomCommand=function(e,t,n,r){var o=this,a=e.dest_id_name.map(function(v){return{id_name:zn(v)}}),l=wo({to_user_list:a,push_message:zn(e.custom_msg)},e),d=this.Qo(l);this.an.info(bt+" "+JSON.stringify(d));var p=er.SignalLiveCustomReq.create(l),u=er.SignalLiveCustomReq.encode(p).finish();return this.sendMessage("SignalLiveCustomReq",u,function(v,x){t&&t(o.transRsp(v),x)},function(v,x){n&&n(v,x)},{roomID:r==null?void 0:r.roomID})},s.prototype.sendRoomChannelMessage=function(e,t,n,r){var o=this,a=e.toUserIDList,l={channel_type:e.channelType,msg_type:e.msgType,msg_content:zn(e.msgContent),to_user_list:a.map(function(v){return zn(v)})},d=this.Qo(l);this.an.info(bt+" "+JSON.stringify(d));var p=er.SendChannelMsgReq.create(l),u=er.SendChannelMsgReq.encode(p).finish();return this.sendMessage("SendChannelMsgReq",u,function(v,x){n&&n(o.transRsp(v),x)},function(v,x){r&&r(v,x)},{roomID:t})},s.prototype.sendTransparentMessage=function(e,t,n,r,o){var a=this,l=this.Qo(e);this.an.info("zm.lrh.stm "+(0,he.iq)(l));var d=er.SignalTransparentMsgReq.create(e),p=er.SignalTransparentMsgReq.encode(d).finish();return this.sendMessage("SignalTransparentMsgReq",p,function(u,v){r&&r(a.transRsp(u),v)},function(u,v){console.error("sendTransparentMessage"),o&&o(u,v)},{roomID:t},{timeout:1e3*n,resend:!0})},s.prototype.sendBigRoomMessage=function(e,t,n,r){var o=this,a={msg_list:e.msgs.map(function(u){return{msg_category:u.msg_category,msg_type:u.msg_type,msg_timestamp:ki.A.fromNumber(Date.now()),msg_content:zn(u.msg_content),msg_client_id:zn(u.bigmsg_client_id)}})},l=this.Qo(a);this.an.info("zm.lrh.sbrm "+JSON.stringify(l));var d=er.SendBigImReq.create(a),p=er.SendBigImReq.encode(d).finish();return this.sendMessage("SendBigImReq",p,function(u,v){var x;(x=u.body.msg_list)===null||x===void 0||x.forEach(function(U){o.Ko(U,rl)}),t(u,v)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.sendSignalCmd=function(e,t,n,r){var o="";switch(e.sub_cmd){case Oc:o="SignalLiveInviteReq";break;case Dc:o="SignalLiveRequestReq";break;case Pi:o="SignalLiveResultReq";break;case Ls:o="SignalLiveStopReq"}var a=e.dest_id_name.map(function(v){return{id_name:zn(v)}}),l={push_message:zn(e.signal_msg),to_user_list:a},d=this.Qo(l);this.an.info("zm.lrh.ssc "+JSON.stringify(d));var p=er[o].create(l),u=er[o].encode(p).finish();return this.sendMessage(o,u,t,n,{roomID:r==null?void 0:r.roomID})},s.prototype.sendStreamUpdate=function(e,t,n,r){var o,a=this;try{o=JSON.parse(e.stream_msg)}catch{}var l,d="";this.an.info(ft+" "+JSON.stringify(wo(wo({},e),{third_token:void 0}))),this.an.remoteReport(ft+" token "+e.third_token);var p=this.pn.roomModulesList.find(function(U){return U.roomID==r.roomID});if(!p)return this.an.error(ft+" room no found ignore "),-1;switch(e.sub_cmd){case 2001:d="AddStreamReq",l={stream_id:zn(o.stream_id),extra_info:zn(o.extra_info),client_req_seq:this.seq+1,third_token:zn(e.third_token||""),stream_attr_opts:{stream_resource:e.stream_resource,stream_codec:e.stream_codec,censor_flag:o.inspect_flag||0}};break;case 2002:d="DeleteStreamReq",l={stream_id:zn(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1};break;case 2003:d="UpdateStreamReq",l={stream_id:zn(o.stream_id),stream_sid:o.stream_sid,client_req_seq:this.seq+1,extra_info:zn(o.extra_info)}}var u=this.Qo(l);this.an.info(ft+" "+JSON.stringify(u));var v=er[d].create(l),x=er[d].encode(v).finish();return this.sendMessage(d,x,function(U,te){a.an.info(ft+" suc "+d+" "+JSON.stringify(U)),U.header.room_id=p.roomID,t&&t(U,te)},function(U,te){a.an.info(ft+" fail "+d+" "+JSON.stringify(U)),n&&n(U,te)},{roomID:r==null?void 0:r.roomID})},s.prototype.getStreamList=function(e,t,n,r){var o=this;if(this.pn.roomModulesList.find(function(u){return u.roomID==r.roomID})){var a={},l=this.Qo(a);this.an.info(L+" "+JSON.stringify(l));var d=er.GetStreamListReq.create(a),p=er.GetStreamListReq.encode(d).finish();this.sendMessage("GetStreamListReq",p,function(u,v){var x,U;(U=(x=u.body)===null||x===void 0?void 0:x.stream_info_list)===null||U===void 0||U.forEach(function(te){o.Ko(te,ea),te.create_time=te.create_time.toNumber()}),o.transKeysName(u.body,[["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]]),t&&t(u,v)},function(u,v){n&&n(u,v)},{roomID:r==null?void 0:r.roomID})}else this.an.error(L+" room no found ignore "+r.roomID)},s.prototype.Qo=function(e){var t=this,n={};return Object.keys(e).forEach(function(r){["logout_check"].includes(r)?n[r]=e[r]:t.iu(n,e,r,!0)}),n},s.prototype.transHeader=function(e){return e.timestamp=ki.A.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},s.prototype.transRsp=function(e){var t=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},n=wo(wo({},e),t);return delete n.rsp_head,n},s.prototype.iu=function(e,t,n,r){var o=this;if(r===void 0&&(r=!1),ki.A.isLong(t[n]))e[n]=r?t[n].toString():t[n];else if(Object.prototype.toString.call(t[n])==="[object Object]")e[n]={},Object.keys(t[n]).forEach(function(d){return o.iu(e[n],t[n],d,r)});else if(Object.prototype.toString.call(t[n])==="[object Array]"&&Object.prototype.toString.call(t[n][0])==="[object Object]"){e[n]=[];for(var a=function(d){var p={};Object.keys(t[n][d]).forEach(function(u){o.iu(p,t[n][d],u,r)}),e[n].push(p)},l=0;l<t[n].length;l++)a(l)}else if(r&&Object.prototype.toString.call(t[n])==="[object Uint8Array]")try{e[n]=So(t[n])}catch{e[n]=r?"~":t[n]}else e[n]=t[n]},s.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},s.prototype.Yo=function(e,t){return t&&wo({},e.decode(t))},s.prototype.Fo=function(e,t){var n=this;this.an.info(Rt+" call"),this.jo=lo.disconnected,this.pn.roomModulesList.forEach(function(r){var o=r.roomTryHandler;o&&n.isUaConnect&&(n.an.info(Rt+" ua is connect"),o.retryLoginRoom())})},s.prototype.Jo=function(){this.an.info(Pt+" call"),this.jo=lo.broken,this.clearAllPushMsgCache(),this.nu(Pt)},s.prototype.nu=function(e){var t=this;this.pn.roomModulesList.forEach(function(n){var r=n.roomTryHandler,o=n.roomHandler;r&&(r.invalid(),r.onactive=function(a,l){t.an.info(e+" onactive"),o.transError(l),o.disconnectedHandle(l)},r.startMaxTime(),o._roomStateHandle("CONNECTING",Ie.Reconnecting,pe.NETWORK_BROKEN))})},s.prototype.Go=function(e){this.an.info("zm.lrh.hc call "+e),this.jo=lo.connected,e===Jn.ConnectedType.AUTO&&this.rtm.retryRoom()},s.prototype.renewToken=function(e,t,n,r){var o=this,a={token:e.token},l=er.RenewTokenReq.create(a),d=er.RenewTokenReq.encode(l).finish(),p=this.Qo(a);this.an.info("zm.lrh.rt "+JSON.stringify(p)),this.sendMessage("RenewTokenReq",d,function(u,v){o.Ko(u.body,To),o.keysExist(u.body,["token_remain_time"]),t&&t(u,v)},n,{roomID:r==null?void 0:r.roomID})},s.prototype.reset=function(){this.an.info("zm.lrh.r.0 call "),this.jo=lo.disconnected,this.switchSessionID=ki.A.fromInt(0),this.tu&&clearTimeout(this.tu)},s.prototype.closeRequest=function(){var e;(e=this.Uo)===null||e===void 0||e.closeRequest()},s.prototype.resetSessionInfo=function(){this.switchSessionID=ki.A.fromInt(0)},s.prototype.processPushMsgCache=function(e){var t=this.Do[e];if(t){this.an.info(Ii+" processPushMsgCache ".concat(e,", msg len: ").concat(t.length));for(var n=0;n<t.length;n++){var r=t[n];this.handleSwitchPush(r.header,r.body)}delete this.Do[e]}},s.prototype.clearAllPushMsgCache=function(){var e=this;Object.keys(this.Do).forEach(function(t){var n=parseInt(t);delete e.Do[n]})},s.prototype.clearPushMsgCacheByRoomID=function(e){var t=this.zo[e];t&&this.Do[t]&&delete this.Do[t]},s.prototype.handleLogoutRsp=function(e){var t=this.zo[e];t&&(delete this.Ao[t],delete this.zo[e],this.Do[t]&&delete this.Do[t])},s})(),ol=(function(){function s(){this.defaultSetting={remote_log_level:"info",detaillog_domain:"",http3:0,api_error_report:1,api_login:3e4,api_logout:3e4,api_start_publish:3e4,api_start_play:3e4,ip_stack_mode:1,publish_video_codec:"H264",camera_video_bitrate:800,screen_video_bitrate:1500,custom_video_bitrate:0,l3_play_buffer_ms:500,AEC:void 0,AGC:void 0,ANS:void 0,resource_mode:0,bitrate_mode:"default",auto_to_tcp:!1,udp_max_fail_num:2,probe_started_num:3,udp_or_tcp:"udp",hardware_encode:!1,camera_hard_encode:!1,custom_hard_encode:!1,bg_fps_stat:0,camera_width:720,camera_height:480,camera_framerate:15,camera_audio_bitrate:48,open_mini_sdp:!1,sound_level_api_type:I.EA.useAnalyzer,sound_sample_interval:200,scenario_configs:[],dtx:0,peer_signal_over_dc:!1,ains:0,ains_mode:0,auto_switch_publish_video_codec:0,vid_clock_rate_est:0,transcode_on_zero_fps:0,report_attr_level:0,log_strategy:-1,connect_media_in_advance:1},this.userChangedKey={},this.arrObjKeys=["scenario"],this.arrObjItemKeys=["scenario_configs"],this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}return s.prototype.setSetting=function(e,t){var n=Array.isArray(t)&&t.length>0;for(var r in e){var o=e[r];if(this.arrObjKeys.includes(r))for(var a in o)this.setting[r+"_"+a]=o[a];else if((0,B.Cs)(o.ctrlmode)&&[1,2].includes(o.ctrlmode))this.setting[r]=o,this.setting[r+"_ctrlmode"]=o.ctrlmode;else for(var a in o)if(!(a.endsWith("_ctrlmode")||n&&t.indexOf(a)==-1))if((0,B.TE)(o[a+"_ctrlmode"]))o[a]===void 0?this.defaultSetting[a]&&(this.setting[a]=this.defaultSetting[a]):this.setting[a]=o[a];else{var l=o[a+"_ctrlmode"];l===1?this.userChangedKey[a]||(this.setting[a]=o[a]):l===2?this.setting[a]=o[a]:this.userChangedKey[a]||this.defaultSetting[a]&&(this.setting[a]=this.defaultSetting[a]),typeof l=="number"&&(this.setting[a+"_ctrlmode"]=o[a+"_ctrlmode"])}}},s.prototype.getSetting=function(e,t){return t===void 0&&(t=!1),this.arrObjItemKeys.includes(e)?this.setting[e]:t?this.setting[e+"_ctrlmode"]==2?this.setting[e]:void 0:this.setting[e]},s.prototype.setUserValue=function(e,t){this.setting[e+"_ctrlmode"]!==2&&(this.userChangedKey[e]=!0,this.setting[e]=t)},s.prototype.getCloudSettingScenario=function(e,t,n){var r=this;t===void 0&&(t=!1),n===void 0&&(n=!1);var o=(this.getSetting("scenario_configs")||[]).find(function(te){return te.scenario===e}),a={};if(o){var l=o.a_chn_count,d=o.a_bitrate,p=o.ctrlmode;[["ANS","ANS",o.ans_status,!0],["AGC","AGC",o.agc_status,!0],["AEC","AEC",o.aec_status,!0],["audioBitrate","camera_audio_bitrate",isNaN(d)?void 0:d/1e3,!1],["channelCount","",l,!1]].forEach(function(te){var le,se,We,Ke,Ze;le=te[0],se=te[1],Ke=te[3],Ze=p,typeof(We=te[2])=="number"?(t&&Ze===2||!t&&[1,2].includes(Ze))&&(Ke?(We===1&&(a[le]=!0),We===0&&(a[le]=!1)):a[le]=We):!n&&se&&(a[le]=r.getSetting(se,t))})}else{if(n)return{};var u=this.getSetting("ANS",t);(0,B.dd)(u)&&(a.ANS=u);var v=this.getSetting("AGC",t);(0,B.dd)(v)&&(a.AGC=v);var x=this.getSetting("AEC",t);(0,B.dd)(x)&&(a.AEC=x);var U=this.getSetting("camera_audio_bitrate",t);(0,B.Cs)(U)&&(a.audioBitrate=U)}return a},s.prototype.getSettingList=function(e,t){var n=this;return t===void 0&&(t=!1),e.map(function(r){return n.getSetting(r,t)})},s.prototype.getSettingWithUserParams=function(e,t){if(this.arrObjItemKeys.includes(e))return this.setting[e];var n=this.setting[e],r=this.setting[e+"_ctrlmode"];return r!==void 0?r===2?n:r===1?t??n:t:t??n},s})(),Yn="init",m="room",N="rtc",S=function(){return S=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},S.apply(this,arguments)},W=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},H=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},de=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},lt=(function(){function s(e,t,n,r,o,a,l){var d,p,u,v,x,U,te,le=this;this.an=n,this._dataReport=r,this.cr=o,this.eu=l,this.dispatchServers=[],this.dispatchHttp3Servers=[],this.dispatchWssV6Servers=[],this.dispatchHttp3V6Servers=[],this.ru=null,this.su=1e3,this.version=I.qt,this.id="",this.ou={online:function(){le.uu()},offline:function(){le.uu()},unload:function(mn){return W(le,void 0,void 0,function(){return H(this,function(vn){switch(vn.label){case 0:return this.an.info(lr+" "+mn.type),this.cr.setUnloadState(I.t0.I),this._onBeforePageUnload?[4,this._onBeforePageUnload()]:[3,2];case 1:vn.sent(),vn.label=2;case 2:return this.logoutRoom(void 0,!1,!0),[2]}})})}},this._roomLoginResponseListener=function(){clearTimeout(le.cloudSettingTimer),le.cloudSettingTimer=setTimeout(function(){le.an.info(Q+" fetch cloud setting"),le.au()},100)};var se=s.logConfigForPreset;se!=null&&se.logLevel&&this.logger.setLogLevel(se.logLevel),n.onConnected=function(mn){var vn=mn.url,cn="".concat(mr," log connected ").concat(vn);if(vn&&vn.startsWith("wss://")){le.pn.logDomain=vn.split("/")[2];var nn="wss://".concat(le.pn.logDomain,"/zglog/tlog");le.logger.info("".concat(mr," event url ").concat(nn)),le.cr.setConfig({serverUrl:nn})}le.pn.enableWSLog||(le.an.enableWebSocketLog(!1),cn+=" ; close ws log"),le.an.info(cn)},n.onUploadLog=function(mn,vn,cn){var nn=le.cr.createSpan(I.t0.H,{key:Gn.event},{key:""},Er);nn.setAttributes({file_size:Math.round(mn/8),file_name:vn}),cn?le.cr.setError(nn,cn):nn.end()},this.pn=new Ta(this.an,this._dataReport),this.pn.ENV=a,this.pn.product=ar.product,this.pn.advanceConfig=S(S({},this.pn.advanceConfig),{customDomain:s.customDomain}),this.cu();var We=s.engineOptions;this.cloudSetting=new Bl(We==null?void 0:We.closeCloudSetting),this.getReportSeq=I.wN,this.getSeq=I.Mo,this.hu(),this.pn.deviceID=(function(mn){mn===void 0&&(mn=0);var vn=$n("z_deviceID");if(vn)return vn;new Date().getTime();var cn=mi(mn);return _r("z_deviceID",cn),cn})(a),s.pageID||(s.pageID=mi(a));var Ke=this.pn.id=mi(a);this.logger.info("".concat(mr," deviceID: ").concat(this.pn.deviceID,", pageID: ").concat(s.pageID,", instID: ").concat(Ke)),this.cr.init(e,a,this.pn.deviceID),this.cr.setLogger(this.an),this.pn.reporter=this.cr;var Ze,et=Gn,ht=this.cr.createSpan(I.t0.H,{key:""},{key:et.event},et.event,!0);t&&this.fu(t);var gt,Et,At=a===0?"ZegoExpressWebRTC":"ZegoExpressMiniProgram";if(!((d=this.eu)===null||d===void 0)&&d.reportData&&(Ze=(u=(p=this.eu)===null||p===void 0?void 0:p.reportData)===null||u===void 0?void 0:u.version,At=((x=(v=this.eu)===null||v===void 0?void 0:v.reportData)===null||x===void 0?void 0:x.project)||At),ht.setAttributes({biz_type:et.biz_type(0),project:et.project(At),liveroom_version:et.liveroom_version(Ze),is_from_cache:et.is_from_cache(!1),sev_env:et.sev_env(this.pn.testEnvironment?"test":"online"),framework:((U=s.engineOptions)===null||U===void 0?void 0:U.framework)||void 0,logger_rev:Ps.ZegoLogger.logVersion,build_time:I.bD}),Et=this.an,(gt=e)&&(0,B.Cs)(gt)&&(0,he.zQ)(gt)||(Et.error("ccp.0 appid must be positive integer number and not empty"),0)){this.pn.appid=e,this.pn.configOK=!0,this.pn.sdKVersion=this.version,this.pn.testEnvironment&&(this.pn.mode=Jn.Mode.MODE_TEST),this.netAgent=new Jn.ZegoConnectionAgent(s.proxyCtrl),this.an.setSessionInfo(this.pn.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.an);var Ot={appID:this.pn.appid,env:this.pn.ENV,mode:this.pn.mode};We&&We.pri&&(Ot.model=1),s.geoFenceType&&s.geoFenceAreaList&&(Ot.geoFencing={type:s.geoFenceType,list:s.geoFenceAreaList}),this.netAgent.setAppInfo(Ot),this.liveRoomHandler=new La(this.an,this.pn,this.netAgent,this._dataReport,this);var Bt="";a===0?Bt="rtc":a===1&&(Bt="ali"),this.pn.settingConfig=new ol,this.cloudSetting.setLog(this.an),this.cloudSetting.init({productNum:Mr,appID:e,env:a,pollingNotify:function(mn,vn){le.an.info(mr+" setting file changed "+mn+" "+JSON.stringify(vn)),le.pn.actionListener("_cloudSettingNotify",mn,vn)},reportNotify:this.lu.bind(this),online:!this.pn.testEnvironment,connection:this.netAgent,inflate:this.an.inflate});var Kt="".concat(mr," default setting.");Kt+=this.du(),this.an.setZipLogConfig(1),this.an.enableWebSocketLog(!0),this.an.info(Kt),this.setAPIReports(),this.cloudSetting.setEnvVariable("environment",Bt);var Ht=this.cloudSetting.getSettingCache(Yn),Zt=this.cloudSetting.getSettingCache(m),un=!1,hn=setTimeout(function(){le.an.warn("".concat(mr," time out, get cache settings failed!")),un=!0,le.vu(),le.getStoreAppConfig(),ht.setAttributes({use_na:et.use_na(1),connection_rev:le.netAgent.getVersion()}),ht.end()},500);Promise.all([Ht,Zt]).then(function(mn){var vn=mn[0],cn=mn[1],nn="".concat(mr," get cloud config ").concat(un);hn&&clearTimeout(hn),le.mu(vn==null?void 0:vn.setting),un||(le.vu(),le.getStoreAppConfig());var gn=le.du(!0);gn&&(nn+=gn),le.pu(),le.setAPIReports();var yn=le.gu("report_script");if(yn){var bn=yn.url,i=yn.key,c=yn.hash;nn+=" ; report script ".concat(bn," ").concat(i," ").concat(c),bn&&le.cr.loadScript(!1,bn,i,c),c&&ht.setAttributes({lua_md5:et.lua_md5(c)})}else le.cr.loadScript(!1,"","","");le.an.info(nn),le.mu(cn==null?void 0:cn.setting);var h=le.cr.createSpan(I.t0.H,{key:et.event},{key:""},zu);h.setAttributes({files:ju([{name:Yn,content:JSON.stringify(vn==null?void 0:vn.setting),versions:JSON.stringify(vn==null?void 0:vn.versions),code:0,message:""},{name:m,content:JSON.stringify(cn==null?void 0:cn.setting),versions:JSON.stringify(cn==null?void 0:cn.versions),code:0,message:""}])}),h.end(),ht.setAttributes({use_na:et.use_na(1),connection_rev:le.netAgent.getVersion()}),ht.end()}).catch(function(mn){if(hn&&clearTimeout(hn),ht.setAttributes({use_na:et.use_na(1),connection_rev:le.netAgent.getVersion()}),ht.end(),le.an.warn("".concat(mr,"  initConfig ").concat(JSON.stringify(mn))),(mn==null?void 0:mn.code)===pe.GEO_SET_ERROR.code)throw Error("GeoFencing set Error")});var pn=this.version;I.F1&&(pn=pn+"-"+I.F1,ht.setAttribute("special_version",I.F1)),this.an.info("".concat(mr," ").concat((te=navigator==null?void 0:navigator.userAgent)!==null&&te!==void 0?te:""," ").concat(pn," log: ").concat(Ps.ZegoLogger.logVersion)),this._bindWindowListener(),this.pn.networkState=navigator?navigator.onLine?Z.D2.online:Z.D2.offline:Z.D2.online;var Bn=ci()==="Firefox"?navigator==null?void 0:navigator.userAgent:navigator==null?void 0:navigator.appVersion;ht.setAttribute("sys_info",Bn||""),this.bu(),this.an.setSessionInfo(this.pn.appid,"","","","",this.version)}else this.an.error("".concat(mr," init sdk error")),this.cr.setError(ht,et.error.kInvalidParamError);se&&this.setLogConfig(se),this.pn.onListener("roomLoginResponse",this._roomLoginResponseListener)}return Object.defineProperty(s.prototype,"logger",{get:function(){return this.an},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stateCenter",{get:function(){return this.pn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"modules",{get:function(){return{service:{sendMessage:function(e){},on:function(e,t){},registerRouter:function(e,t){}}}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isUseNetAgent",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isUaConnect",{get:function(){return this.netAgent.isConnect()},enumerable:!1,configurable:!0}),s.prototype.gu=function(e,t){var n;return t===void 0&&(t=!1),(n=this.pn.settingConfig)===null||n===void 0?void 0:n.getSetting(e,t)},s.prototype.mu=function(e,t){var n;return(n=this.pn.settingConfig)===null||n===void 0?void 0:n.setSetting(e,t)},Object.defineProperty(s.prototype,"reporter",{get:function(){return this.cr},enumerable:!1,configurable:!0}),s.prototype.du=function(e,t){var n={},r=this.gu("remote_log_level",e);return r&&(n.remote_log_level=r,this.an.setRemoteLogLevel(r)),Object.keys(n).length>0?(0,he.iq)(n):""},s.prototype.setEngineConfig=function(e){var t=e.roomRetryTime,n=e.isFlutter;t&&(this.pn.roomRetryTime=t),(0,B.dd)(n)&&(this.pn.isFlutter=n)},s.prototype.destroyRTM=function(){this.pn.roomModulesList.some(function(e){return!(e!=null&&e.isLogout()||e.roomState===Ca)})&&this.logoutRoom(),this.cr.setUnloadState(I.t0.I),this.cr.destroy(),this.yu(),this.wu()},s.prototype.hu=function(){this.proxyRes=Dr,this.getServerError=ze},s.prototype.cu=function(){var e=this.version.split(".").map(function(t){return parseInt(t)});this.pn.sdkVerNum=(this.pn.ENV===0?I.Ks.SDKProject_ZegoWebRTC:I.Ks.SDKProject_ZegoMiniProgram)<<28|e[0]<<20|e[1]<<8|e[2]},s.prototype.bu=function(){this.cr.createSpan(I.t0.H,{key:Gn.event},{key:cr},cr,!0).end()},s.prototype.pu=function(){var e=[],t=[],n=this.pn.advanceConfig.customDomain;if(n!=null&&n.detaillog&&(n==null?void 0:n.detaillog)!=="")e.push(o=n.detaillog),this.an.info(St+" set detaillog url by advance config "+JSON.stringify(e)),this.an.setZipLogDomains(e,t);else if(this.pn.geoFencing){var r=this.pn.geoFencing;this.an.info(St+" geo log is  "+(l=r.detaillog)+" "+(d=r.wssV6Detaillog)),l&&l!==""&&(e.push(l),this.an.info(St+" set detaillog url by geoFencing v4 "+JSON.stringify(e))),d&&d!==""&&(t.push(d),this.an.info(St+" set detaillog url by geoFencing v6 "+JSON.stringify(e))),(e.length>0||t.length>0)&&this.an.setZipLogDomains(e,t)}else{if(this.gu("detaillog_domain")){var o=this.gu("detaillog_domain");this.an.info("".concat(St," set detaillog domain by cloudsetting ").concat(o)),o&&o!==""&&e.push(o)}else if(this.pn.svrDomains){var a=this.pn.svrDomains,l=a.detaillog,d=a.wssV6Detaillog;this.an.info("".concat(St," set detaillog domain by svr ").concat(l," ").concat(d)),l&&l!==""&&e.push(l),d&&d!==""&&t.push(d)}(e.length>0||t.length>0)&&this.an.setZipLogDomains(e,t)}},s.prototype.getStoreAppConfig=function(){if(this.an.info(vt+" call"),localStorage){var e=$n(no+"_"+this.getAppID()+"_"+(this.pn.mode||ur.modeNo));if(e){var t=$n(Ui+"_"+this.getAppID()+"_"+(this.pn.mode||ur.modeNo));t||this.an.info(vt+" no store config etag");try{var n=Nn(e,oi);if(n?(this.pn.appConfig=JSON.parse(n),this.cr.spanSetAttributes({key:Gn.event},{is_from_cache:Gn.is_from_cache(!0)}),this.pn.actionListener("_appConfigRsp")):localStorage.removeItem(no+"_"+this.getAppID()+"_"+(this.pn.mode||ur.modeNo)),t){var r=Nn(t,oi);this.pn.appConfigEtag=parseInt(r)}}catch(o){this.an.warn(vt+" "+JSON.stringify(o))}}else this.an.info(vt+" no store config")}else this.an.warn(vt+" no localstorage")},s.prototype.vu=function(){var e,t,n,r,o,a,l=this;this.an.info(mt+" call"),this.netAgent.on("disconnected",function(nn){l.an.info(mt+" netAgent disconnect "+l.pn.roomModulesList.length),l.pn.roomModulesList.length>0&&l.netAgent.connectUa()}),this.netAgent.on("connected",function(){l.an.info("".concat(mt," netAgent connect stack ").concat(ae[l.netAgent.connectIPStackType])),l.pn.agentConnectIPStackType=l.netAgent.connectIPStackType,l.cr.setNetStateCheck(),l.fetchAppConfig(),l.retryRoom(!0)}),this.netAgent.on("broken",function(nn){l.an.info("".concat(mt," netAgent broken"))}),this.netAgent.on("dispatchEvent",function(nn,gn,yn){if(l.an.info("".concat(mt," dispatch")),gn==="start"){var bn=l.cr.createSpan(I.t0.H,{key:Ws},{key:""},Vu);l.pn.requestList[nn]=bn}else gn==="end"&&(bn=l.pn.requestList[nn])&&(bn.setAttributes({domain_list:nc(yn.domains),http3_domain_list:xc(yn.http3Domains),wss_v6_domain_list:Js(yn.wssV6Domains),http3_v6_domain_list:Hu(yn.http3V6Domains)}),bn.end())}),this.netAgent.on("dispatchResultUpdate",function(nn){var gn=nn.servers,yn=nn.domains,bn=nn.http3Servers,i=nn.http3Domains,c=nn.wssV6Servers,h=nn.http3V6Servers,y=nn.wssV6Domains,A=nn.http3V6Domains;l.an.info("".concat(mt," dispatchResult ").concat(JSON.stringify(nn)));var z=l.pn.netGeoFencing;if(z.id!==1)yn&&yn[0]&&(z.accesshub=yn[0]),i&&i[0]&&(z.http3Accesshub=i[0]),y&&y[0]&&(z.wssV6Accesshub=y[0]),A&&A[0]&&(z.http3V6Accesshub=A[0]),l.setLocalGeoFencing();else{var Me=function(pt,kt){var zt=nr(JSON.stringify(kt),oi);_r(pt+"_"+l.pn.appid+"_"+(l.pn.mode||ur.modeNo),zt)};Me(gi,gn),Me(go,bn),Me(xi,c),Me(ui,h)}}),this.netAgent.on("svrAddrResultUpdate",function(nn){var gn=nn.accesshub_domain,yn=nn.logreport_domain,bn=nn.detaillog_domain,i=nn.geofencing_id,c=nn.accesshub_v6_domain,h=nn.http3_v6_domain,y=nn.logreport_v6_domain,A=nn.detaillog_v6_domain;if(i!==1){var z=l.pn.netGeoFencing;yn&&(z.logreport=yn),y&&(z.wssV6Logreport=y),bn&&(z.detaillog=bn),A&&(z.wssV6Detaillog=A),z.id=i,l.setLocalGeoFencing()}else{var Me=nr(JSON.stringify({accesshub_domain:gn,logreport_domain:yn,detaillog_domain:bn,accesshub_v6_domain:c,http3_v6_domain:h,logreport_v6_domain:y,detaillog_v6_domain:A}),oi);_r(Br+"_"+l.pn.appid+"_"+(l.pn.mode||ur.modeNo),Me)}yn&&(l.stateCenter.svrDomains.logreport=yn,y&&(l.stateCenter.svrDomains.wssV6Logreport=y),l.handleLogUpload(),l._onAppConfigUpdate&&l._onAppConfigUpdate({loggerDomains:[yn]})),bn&&(l.stateCenter.svrDomains.detaillog=bn,A&&(l.stateCenter.svrDomains.wssV6Detaillog=A),l.pu())}),this.netAgent.on("ipDetection",function(nn){var gn,yn,bn=nn.linkConnectDetection,i=nn.ipList;if(bn&&(l.an.info("".concat(mt," ip detection v4: ").concat(G[bn.IPv4],", v6: ").concat(G[bn.IPv6])),l.pn.agentIpStackDetection=bn),i){var c=l.cr.createSpan(I.t0.H,{key:j.oq.event},{key:""},j._u.event);c.setAttributes({ipv4:j._u.ipv4((gn=i.ipv4)===null||gn===void 0?void 0:gn[0]),ipv6:j._u.ipv4((yn=i.ipv6)===null||yn===void 0?void 0:yn[0])}),c.end()}}),this.netAgent.on("onceConnectEvent",function(nn,gn,yn){if(l.an.info("".concat(mt," once connect")),gn==="start"){var bn=l.cr.createSpan(I.t0.H,{key:Ws},{key:Ea},Ea,!0);l.pn.requestList[nn]=bn}else gn==="end"&&(bn=l.pn.requestList[nn])&&(bn.setAttributes(S({},yn)),bn.end())}),this.netAgent.on("connectedEvent",function(nn,gn,yn){if(l.an.info("".concat(mt," connect")),gn==="start"){var bn=l.cr.createSpan(I.t0.H,{key:Gn.event},{key:Ws},Ws,!0);l.pn.requestList[nn]=bn}else gn==="end"&&(bn=l.pn.requestList[nn])&&yn&&(bn.setAttributes({request_count:Sa(yn.count),connect_id:_d(yn.connectid),first_connect_type:yn.first_connect_type,connect_type:yn.connect_type,error:yn.error||0,server:yn.server,ip_stack:l.netAgent.connectIPStackType}),bn.end())}),this.netAgent.on("requestEvent",function(nn,gn,yn){if(l.an.info("".concat(mt," request")),gn==="start"){var bn=l.cr.createSpan(I.t0.H,{key:Gn.event},{key:Fu},Fu,!0);l.pn.requestList[nn]=bn}else gn==="end"&&(bn=l.pn.requestList[nn])&&(bn.setAttributes({req_location:wd(yn.na_req_location),http_code:yn.status_code,error:yn.err_code}),bn.end())}),this.netAgent.on("disConnectedEvent",function(nn){var gn=nn.duration,yn=nn.server,bn=nn.connectid;l.an.info("".concat(mt," disconnect"));var i=l.cr.createSpan(I.t0.H,{key:Gn.event},{key:""},Sd);i.setAttributes({url:Td(yn),connect_duration:Dl(gn),connect_id:Ed(bn)}),i.end()}),this.netAgent.on("clientInfo",function(nn){var gn=nn.timeOffset,yn=nn.geofencingID;(0,B.Cs)(gn)&&l.cr.setTimeOffset(gn),l.Su(),(0,B.Cs)(yn)&&(l.pn.netGeoFencing.id=yn)}),this.netAgent.on("heartBeatTimeout",function(){l.pn.actionListener("_uaHeartBeatTimeout")});var d=Ve[this.pn.selectIPStackMode];this.an.info("".concat(mt," select ip stack mode ").concat(d)),this.an.setSettingConfig({ipStackMode:this.pn.selectIPStackMode}),this.netAgent.setSettingConfig({enableHttp3:((e=s.engineOptions)===null||e===void 0?void 0:e.http3)!==void 0?!!s.engineOptions.http3:this.gu("http3")===1,ipStackMode:this.pn.selectIPStackMode,accesshubBypassConnectTime:(t=s.engineOptions)===null||t===void 0?void 0:t.accesshubBypassConnectTime,dispatchTag:(n=s.engineOptions)===null||n===void 0?void 0:n.appDispatchTag});var p=[],u=[],v=[],x=[],U=this.Eu(),te=U.detaillog;p=U.accesshub,v=U.wssV6Accesshub,this.stateCenter.svrDomains.logreport=U.logreport[0],this.stateCenter.svrDomains.detaillog=te[0],this.an.info("".concat(mt," hard domains ").concat(JSON.stringify(p)));var le=this.Ou();if(this.an.info("".concat(mt," svr domains ").concat(JSON.stringify(p))),le){var se=le.accesshub_domain,We=le.logreport_domain,Ke=le.detaillog_domain,Ze=le.accesshub_v6_domain,et=le.logreport_v6_domain,ht=le.detaillog_v6_domain;se&&(p=[se],this.stateCenter.svrDomains.accesshub=se),Ze&&(v=[Ze],this.pn.svrDomains.wssV6Accesshub=Ze),We&&(this.stateCenter.svrDomains.logreport=We),et&&(this.pn.svrDomains.wssV6Logreport=et),Ke&&(this.stateCenter.svrDomains.detaillog=Ke),ht&&(this.pn.svrDomains.wssV6Detaillog=ht)}var gt=(r=s.engineOptions)===null||r===void 0?void 0:r.accessDomains;gt&&(p=gt);var Et=this.getGeoDomains();p=(Et==null?void 0:Et.domains)||p,u=(Et==null?void 0:Et.http3Domains)||u,v=(Et==null?void 0:Et.wssV6Domains)||v,x=(Et==null?void 0:Et.http3V6Domains)||x;var At=!1,Ot=this.Iu(),Bt=Ot.accesshub,Kt=Ot.logreport,Ht=Ot.detaillog;Bt&&Bt!==""&&(At=!0,p=[Bt],this.stateCenter.svrDomains.accesshub=Bt),Kt&&Kt!==""&&(this.stateCenter.svrDomains.logreport=Kt),Ht&&Ht!==""&&(this.stateCenter.svrDomains.detaillog=Ht),this.an.info("".concat(mt," advance config domains: ").concat(JSON.stringify(Ot),", set domains ").concat(JSON.stringify(p),", ")),this.an.info("".concat(mt," domains ").concat(JSON.stringify(p)," v6domains ").concat(JSON.stringify(v)));var Zt=p.map(function(nn){return"wss://".concat(nn,"/accesshub")}),un=u.map(function(nn){return"https://".concat(nn,"/accesshub")}),hn=v.map(function(nn){return"wss://".concat(nn,"/accesshub")}),pn=x.map(function(nn){return"https://".concat(nn,"/accesshub")});if(this.netAgent.setNetAgentDefaultServers(Zt,hn),this.dispatchServers=[],this.pn.geoFencing||At||gt)this.dispatchServers=Zt,this.dispatchHttp3Servers=un,this.dispatchWssV6Servers=hn,this.dispatchHttp3V6Servers=pn;else{var Bn=this.Ru(),mn=Bn.http3Servers,vn=Bn.wssV6Servers,cn=Bn.http3V6Servers;this.dispatchServers=Bn.servers,this.dispatchHttp3Servers=mn,this.dispatchWssV6Servers=vn,this.dispatchHttp3V6Servers=cn}!((a=(o=this.stateCenter.advanceConfig)===null||o===void 0?void 0:o.customDomain)===null||a===void 0)&&a.logreport?(this.handleLogUpload(),this.pu()):this.handleLogUpload(),this.an.info(mt+" dispatch access servers ".concat(JSON.stringify(this.dispatchServers)," ").concat(JSON.stringify(this.dispatchHttp3Servers)," ").concat(JSON.stringify(this.dispatchWssV6Servers)," ").concat(JSON.stringify(this.dispatchHttp3V6Servers))),this.netAgent.setDispatchConnectServers(this.dispatchServers,this.dispatchHttp3Servers,this.dispatchWssV6Servers,this.dispatchHttp3V6Servers)},s.prototype.Tu=function(e){var t=e.split(".");return t[t.length-2]+"."+t[t.length-1]},s.prototype.Iu=function(){var e={},t=this.stateCenter.advanceConfig.customDomain;if(!t)return e;var n=t.accesshub,r=t.logreport,o=t.detaillog;return n&&(e.accesshub=n),r&&(e.logreport=r),o&&(e.detaillog=o),e},s.prototype._replaceMainDomain=function(e){var t,n,r,o;if(this.pn.geoFencing){var a=this.Tu((t=this.pn.geoFencing)===null||t===void 0?void 0:t.accesshub);this.pn.geoFencing.accesshub=(n=this.pn.geoFencing)===null||n===void 0?void 0:n.accesshub.replace(a,e),this.pn.geoFencing.logreport=(r=this.pn.geoFencing)===null||r===void 0?void 0:r.logreport.replace(a,e),this.pn.geoFencing.detaillog=(o=this.pn.geoFencing)===null||o===void 0?void 0:o.detaillog.replace(a,e)}},s.prototype.hashMainDomain=function(){var e=ur.normalPriDomains.length,t=(function(n,r){for(var o=0;n>0;)o+=n%10,n=Math.floor(n/10);return Math.floor(o/r)})(this.getAppID(),e);return ur.normalPriDomains[t%e]},s.prototype.Eu=function(){var e,t={accesshub:[],wssV6Accesshub:[],logreport:[],detaillog:[]},n=((e=this.eu)===null||e===void 0?void 0:e.prefixDomain)||ur.prefixDomain,r=ur.wssV6preFixDomain,o=Qr,a=qr,l=this.hashMainDomain(),d=ur.normalPriDomains.filter(function(p){return p!==l});return t.accesshub=de([l],d).map(function(p){return n+"."+p}),t.wssV6Accesshub=de([l],d).map(function(p){return r+"."+p}),t.logreport=[o+"."+l],t.detaillog=[a+"."+l],t},s.prototype.Ru=function(){var e=this,t=function(n){var r=$n(n+"_"+e.pn.appid+"_"+(e.pn.mode||ur.modeNo));if(!r)return[];var o=Nn(r,oi);if(o)try{return JSON.parse(o)}catch{return[]}return[]};return{servers:t(gi),http3Servers:t(go),wssV6Servers:t(xi),http3V6Servers:t(ui)}},s.prototype.Ou=function(){var e=$n(Br+"_"+this.pn.appid+"_"+(this.pn.mode||ur.modeNo));if(!e)return null;var t=Nn(e,oi);if(t)try{return JSON.parse(t)}catch{return null}return null},s.prototype.Cu=function(e){return ur.scheme+"://"+e+"/"+ur.location},s.prototype.getUnloadEventName=function(){var e=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),t=ci(),n=navigator.userAgent,r=n.toLowerCase().match(/MicroMessenger/i)=="micromessenger",o=n.indexOf("Android")>-1||n.indexOf("Adr")>-1;return e||r&&o?"pagehide":t==="Firefox"?"beforeunload":"unload"},s.prototype._bindWindowListener=function(){var e=this.getUnloadEventName();window.addEventListener(e,this.ou.unload),window.addEventListener("offline",this.ou.offline),window.addEventListener("online",this.ou.online)},s.prototype.wu=function(){var e=this.getUnloadEventName();window.removeEventListener(e,this.ou.unload),window.removeEventListener("offline",this.ou.offline),window.removeEventListener("online",this.ou.online)},s.prototype.retryRoom=function(e,t,n){if(e===void 0&&(e=!1),n===void 0&&(n=!1),this.logger.info("".concat("zm.rr"," retryNow:").concat(e," roomid:").concat(t,", resetSession:").concat(n)),t){var r=this.pn.roomModulesList.find(function(o){return o.roomID==t});r&&r.retryRoom(e,n)}else this.pn.roomModulesList.forEach(function(o){o==null||o.retryRoom(e,n)})},s.prototype.Au=function(){this.an.info(lr+" network is online"),this.pn.networkState!==Z.D2.online&&(this.pn.networkState=Z.D2.online,this.yu())},s.prototype.yu=function(){this.ru&&(clearInterval(this.ru),this.ru=null)},s.prototype.zu=function(){var e=this;this.yu(),this.an.info($t+" start network online detection.."),this.ru=setInterval(function(){e.pn.networkState!==Z.D2.offline&&e.yu(),e.isUaConnect&&(e.an.info($t+" detected network online"),e.Au(),e.yu())},this.su)},s.prototype.uu=function(){this.an.info(lr+" network is broken"),this.pn.networkState!==Z.D2.offline&&(this.pn.networkState=Z.D2.offline,this.zu())},s.prototype.setLogConfig=function(e){var t,n;this.an.info(ti+" call "+(0,he.iq)(e));var r=this.cr.createSpan(I.t0.H,{key:Gn.event},{key:Jr.event},Jr.event);if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.an.setLogLevel(e.logLevel),r.setAttributes({log_level:Jr.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&r.setAttributes({remote_log_level:Jr.remote_log_level(e.remoteLogLevel)}),(0,B.QP)(e.logURL)&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))!((t=this.pn.geoFencing)===null||t===void 0)&&t.logreport?this.an.info(ti+" geo exist"):(this.an.setLogServer([e.logURL],[]),this.pn.customSetLogURL=!0,this.pn.ENV===0&&(this.pn.logDomain=(n=this.an.url)===null||n===void 0?void 0:n.split("/")[2],this.cr.setConfig({serverUrl:"wss://"+this.pn.logDomain+"/zglog/tlog"}))),r.setAttributes({log_url:Jr.log_url(e.logURL)}),r.end();else if(e.logURL)return this.an.error(ti+"log url must be a wss or https url"),this.cr.setError(r,Jr.error.kInvalidParamError),!1;(0,B.Cs)(e.logSize)||(0,B.Cs)(e.logCount);var o={};return(0,B.Cs)(e.logSize)&&(o.size=e.logSize,r.setAttributes({log_size:e.logSize})),(0,B.Cs)(e.logCount)&&(o.count=e.logCount,r.setAttributes({log_count:e.logCount})),Object.keys(o).length>0&&this.an.setStorageConfig(o),this.an.info(ti+" call success"),r.end(),!0},s.prototype.setDebugVerbose=function(e){var t=this.cr.createSpan(I.t0.H,{key:Gn.event},{key:Ur},Ur);(0,B.dd)(e)&&(this.pn.debug=e,this.pn.debugCustom=!0,t.setAttributes({debug:Hr(e?"true":"false")})),t.end(),this.an.info("zm.sdv call success")},s.prototype.fu=function(e){(0,B.QP)(e)&&e.indexOf("wss")>-1?this.pn.debug=Gr(e):Array.isArray(e)&&e.length>0&&e.every(function(t){return(0,B.QP)(t)&&t.indexOf("wss")>-1})?this.pn.debug=Gr(e[0]):this.an.info(mr+" server wrong"),this.pn.testEnvironment=this.pn.debug},s.prototype.renewToken=function(e,t){var n,r,o=this,a=this.cr.createSpan(I.t0.H,{key:Kr.event,par:t},{key:""},wc.event);if(!((0,B.TE)(t)||(0,B.QP)(t)&&t!=""))return this.an.error(Wt+" roomID must be string and no empty"),!1;var l=this.getRoomModules(t)||this.pn.roomModulesList[0];return l?(0,B.QP)(e)&&l.roomTryHandler?(e===l.roomTryHandler.token?(this.an.info(Wt+" token has not changed"),a.setAttributes({error:wc.error.INPUT_PARAM.code,message:"token has not changed"}),a.end()):(a.setAttributes({token:wc.token(e)}),this.pn.configRoomAuth?(n=this.liveRoomHandler)===null||n===void 0||n.renewToken({token:e},function(d){var p,u,v,x,U;(p=l.roomTryHandler)===null||p===void 0||p.renewLocalToken(e,(u=d==null?void 0:d.body)===null||u===void 0?void 0:u.token_remain_time),o.cloudSetting.setToken(e);var te=((v=d==null?void 0:d.body)===null||v===void 0?void 0:v.stop_stream_id_list)||((U=(x=d==null?void 0:d.body)===null||x===void 0?void 0:x.stop_stream)===null||U===void 0?void 0:U.stream_id_list)||[];te.length>0&&o.pn.actionListener("_stopStream",te,{code:pe.NO_PUBLISH_AUTH.code,message:pe.NO_PUBLISH_AUTH.msg}),o.cr.setReporterInfo(o.pn.idName||"",e),o.pn.configCheckToken=!0,a.end(),o.an.info(Wt+" "+JSON.stringify(d))},function(d){var p,u,v=(p=d==null?void 0:d.body)===null||p===void 0?void 0:p.err_code;o.cr.setError(a,d),!v||v!==1000002014&&v!==2014?o.an.error(Wt+" "+JSON.stringify(d)):(o.pn.configCheckToken=!1,(u=l.roomTryHandler)===null||u===void 0||u.renewLocalToken(e),o.cloudSetting.setToken(e),o.an.warn(Wt+" "+JSON.stringify(d)))},l):((r=l.roomTryHandler)===null||r===void 0||r.renewLocalToken(e),this.cloudSetting.setToken(e),this.cr.setReporterInfo(this.pn.idName||"",e),a.end())),!0):(0,B.QP)(e)&&!l.roomTryHandler?(this.an.error(Wt+" calling must after loginRoom"),this.cr.setError(a,wc.error.NOT_LOGIN),!1):(this.an.error(Wt+" token must be string and not empty"),this.cr.setError(a,wc.error.INPUT_PARAM),!1):(this.an.error(Wt+" calling must after loginRoom"),this.cr.setError(a,wc.error.NOT_LOGIN),!1)},s.prototype.setCloudSettingURLs=function(e){var t=this;this.an.info(Nt+" call "),Array.isArray(e)&&e.length>0&&e.every(function(n){return(0,B.QP)(n)&&n.indexOf("http")>-1})&&this.cloudSetting.init({productNum:Mr,appID:this.pn.appid,env:this.pn.ENV,pollingNotify:function(n,r){t.an.info(Nt+" setting file changed "+n+" "+JSON.stringify(r)),t.pn.actionListener("_cloudSettingNotify",n,r)},reportNotify:this.lu.bind(this),online:!this.pn.testEnvironment,connection:this.netAgent})},s.prototype.loginRoom=function(e,t,n,r){var o=this;return this.an.info(Q+" call by user "+(n==null?void 0:n.userID)+" "+e+" "+this.version+" build: "+I.bD),new Promise(function(a,l){return W(o,void 0,void 0,function(){var d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt=this;return H(this,function(Et){switch(Et.label){case 0:return this.pn.ENV!==1?[3,2]:[4,new Promise(function(At){})];case 1:Et.sent(),Et.label=2;case 2:if(d=function(At,Ot){Ot===void 0&&(Ot="");var Bt=gt.cr.getAPIErrorReport(Kr.event);gt.cr.takeAPIErrorReport(Kr.event,At,Bt,n!=null&&n.userID?{id_name:n.userID+""}:{}),l(At.code&&At.msg&&Ot!==""?{code:At.code,msg:At.msg+Ot}:At)},!(r=r||{}).maxMemberCount&&(r.maxMemberCount=0),v=(p=this.pn).roomModulesList,x=Kr.error,!(u=p.isMultiRoom)&&v.length>0)return d(x.ROOM_COUNT_EXCEED),[2];for(U=0;U<v.length;U++){if((te=v[U]).roomID===e)return le=this.stateCenter.isFlutter?x.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID:x.REPEATEDLY_LOGIN,this.stateCenter.isFlutter&&this.pn.actionListener("roomStateChanged",e,Ie.LoginFailed,le.code,le.msg),d(this.stateCenter.isFlutter?x.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID:x.REPEATEDLY_LOGIN),[2];if(se=te.roomTryHandler,u&&se&&se.user.userID!==n.userID)return d(x.DIFFERENT_USER_ID),[2]}if(We=new Ra(e,this.pn,this.an,this._dataReport,this,this.liveRoomHandler),(Ke=We.roomTryHandler)||(Ke=new tu(this.an,this.pn,We),We.roomTryHandler=Ke),Ke.init(this.pn.roomRetryTime),Ke.initRoom(We.roomHandler,e,t,n,r),Ke.loginCompleted=!1,We.roomHandler._roomStateHandle(Ku,Ie.Logining,{code:0,msg:""}),(Ze=nu({roomID:{order:0,value:e,rules:[{name:kn.NOT_EMPTY,error:x.ROOM_ID_NULL},{name:kn.TYPE_STRING,error:x.INPUT_PARAM,extMsg:"roomID must be string"},{name:kn.MAX_LENGTH_128,error:x.ROOM_ID_TOO_LONG},{name:kn.ILLEGAL_CHARACTERS,error:x.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:kn.NOT_EMPTY,error:x.INPUT_PARAM},{name:kn.TYPE_STRING,error:x.INPUT_PARAM}]},user:{order:2,value:n,rules:[{name:kn.NOT_EMPTY,error:x.INPUT_PARAM,extMsg:" param user error."},{name:kn.TYPE_OBJECT,error:x.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:n.userID,rules:[{name:kn.NOT_EMPTY,error:x.USER_ID_NULL,extMsg:" param user error."},{name:kn.TYPE_STRING,error:x.INPUT_PARAM,extMsg:" param userID error."},{name:kn.MAX_LENGTH_64,error:x.USER_ID_TOO_LONG},{name:kn.ILLEGAL_CHARACTERS,error:x.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:n.userName,rules:[{name:kn.TYPE_STRING,error:x.INPUT_PARAM,extMsg:" userName must be string."},{name:kn.MAX_LENGTH_256,error:x.USER_NAME_TOO_LONG}]},config:{order:5,value:r,rules:[]},"config.maxMemberCount":{order:6,value:r.maxMemberCount,rules:[{name:kn.TYPE_INTEGER,error:x.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:Q,logger:this.an}))!==Po)return We.roomHandler._roomStateHandle(Ca,Ie.LoginFailed,Ze.error,Ze.extMsg),d(Ze.error,Ze.extMsg),[2];if(et=this.Du(a,l,e,t,r),ht=et.loginSpan,Ke.setLoginRoomCallback(et.interResolve,et.interReject),this.an.setSessionInfo(this.pn.appid,"","",n.userID,"",this.version),this.pn.roomModulesList.length>0&&this.pn.isMultiRoom==1?We.isMulti=!0:de([],this.pn.roomModulesList).forEach(function(At){return At.roomHandler.logout()}),r&&(We.config=r),this.pn.roomModulesList.push(We),this.netAgent&&(this.pn.idName=n.userID,this.netAgent.setUserInfo(n.userID),this.pn.actionListener("_roomLogin",e,t),this.isUaConnect&&this.fetchAppConfig(t)),this.cloudSetting.setUserID(n.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),ht.setAttributes({id_name:n.userID}),this.cr.setCommonAttributes({id_name:n.userID}),this.cr.setReporterInfo(n.userID,t),this.an.setTokenInfo(t,n.userID),this.cr.setSpanInMap(ht,{key:Kr.event,par:e}),this.pn.setMultiRoom=!0,!this.isUaConnect){this.an.info(Q+" us is not connected"),We.roomHandler.setRunState(Z.UV.trylogin),Ke.startMaxTime();try{this.netAgent.connectUa()}catch(At){((At==null?void 0:At.message)+"").includes("execute")||this.an.warn(Q+" connect ua fail "+JSON.stringify(At==null?void 0:At.message))}return[2]}return this.pn.networkState=Z.D2.online,Ke.retryLoginRoom(!0),[2]}})})})},s.prototype.switchRoom=function(e,t,n){return e===void 0&&(e=""),t===void 0&&(t=""),W(this,void 0,void 0,function(){var r,o,a,l=this;return H(this,function(d){return this.an.info("".concat(Be," call by user fromRoomID:").concat(e," toRoomID:").concat(t)),(o=nu({fromRoomID:{order:0,value:e,rules:[{name:kn.NOT_EMPTY,error:(r=Kr.error).ROOM_ID_NULL},{name:kn.TYPE_STRING,error:r.INPUT_PARAM,extMsg:"roomID must be string"},{name:kn.MAX_LENGTH_128,error:r.ROOM_ID_TOO_LONG},{name:kn.ILLEGAL_CHARACTERS,error:r.ROOM_ID_INVALID_CHARACTER}]},toRoomID:{order:1,value:t,rules:[{name:kn.NOT_EMPTY,error:r.ROOM_ID_NULL},{name:kn.TYPE_STRING,error:r.INPUT_PARAM,extMsg:"roomID must be string"},{name:kn.MAX_LENGTH_128,error:r.ROOM_ID_TOO_LONG},{name:kn.ILLEGAL_CHARACTERS,error:r.ROOM_ID_INVALID_CHARACTER}]},config:{order:2,value:n,rules:[{name:kn.NOT_EMPTY,error:r.INPUT_PARAM,extMsg:"param config error."},{name:kn.TYPE_OBJECT,error:r.INPUT_PARAM,extMsg:"param config must be object."}]},"config.token":{order:3,value:n==null?void 0:n.token,rules:[{name:kn.NOT_EMPTY,error:r.INPUT_PARAM},{name:kn.TYPE_STRING,error:r.INPUT_PARAM}]},"config.maxMemberCount":{order:4,value:n==null?void 0:n.maxMemberCount,rules:[{name:kn.TYPE_INTEGER,error:r.INPUT_PARAM,extMsg:"maxMemberCount must be integer number."}]}},{action:Be,logger:this.an}))!==Po?(this.an.error(Be+" params error:"+o.error.code),[2,Promise.reject({code:o.error.code,msg:o.extMsg?o.error.msg+" "+o.extMsg:o.error.msg})]):this.getRoomModules(e)?(a=this.getRoomModules(t),e===t||a?(this.an.error("".concat(Be," params error: ").concat(pe.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID.code)),[2,Promise.reject(pe.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID)]):(this.stateCenter.actionListener("_beforeSwitchRoom",e),this.logoutRoom(e,!0),[2,new Promise(function(p,u){l.loginRoom(t,(n==null?void 0:n.token)||"",{userID:l.getUserID(),userName:l.getUserName()},{userUpdate:n==null?void 0:n.isUserStatusNotify,maxMemberCount:n==null?void 0:n.maxMemberCount}).then(function(v){l.stateCenter.actionListener("_afterSwitchRoom",t,!0),p(v)}).catch(function(v){l.stateCenter.actionListener("_afterSwitchRoom",t,!1),u(v)})})])):(this.an.error("".concat(Be," params error: ").concat(pe.ROOM_ROOMID_INCORRECT.code)),[2,Promise.reject(pe.ROOM_ROOMID_INCORRECT)])})})},s.prototype.handleLogUpload=function(){var e,t;if(this.an.info(Ge+" call"),this.pn.customSetLogURL)this.an.info(Ge+" set custom log");else if(this.an.url&&this.an.logConnected)this.an.info(Ge+" log is connected");else{var n=[],r=[],o=this.pn.advanceConfig.customDomain;if(o&&o.logreport)n.push(d=o.logreport),this.pn.logDomain=d;else if(this.pn.geoFencing){var a=this.pn.geoFencing,l=a.wssV6Logreport;(d=a.logreport)&&n.push(d),l&&r.push(l)}else if(this.pn.testEnvironment)this.pn.logDomain="weblogger-hk-test.zegocloud.com",n.push(this.pn.logDomain);else if(this.stateCenter.ENV===0){if(this.pn.svrDomains){var d,p=this.pn.svrDomains;l=p.wssV6Logreport,(d=p.logreport)&&n.push(d),l&&r.push(l)}}else if(this.stateCenter.ENV===1){this.pn.logDomain=ur.logreportDomain,n.push(this.pn.logDomain);var u=(t=(e=this.pn.appConfig)===null||e===void 0?void 0:e.app_config)===null||t===void 0?void 0:t.domain;if(u){var v="weblogger".concat(this.pn.appid,"-api.").concat(u);n.push(v)}}if(this.pn.ENV===0){var x=n.map(function(te){return"wss://".concat(te,"/").concat(ur.rtcLogPath)}),U=r.map(function(te){return"wss://".concat(te,"/").concat(ur.rtcLogPath)});(x.length>0||U.length>0)&&this.an.setLogServer(x,U)}else x=n.map(function(te){return"https://".concat(te,"/httplog")}),this.an.setLogServer(x,[])}},s.prototype.fetchAppConfigByTargetToken=function(e,t){return W(this,void 0,void 0,function(){var n,r,o,a,l,d,p=this;return H(this,function(u){switch(u.label){case 0:if(this.an.info($e+" call"),!t)return this.an.warn($e+" user not exist"),[2];if(n=this.getUserID(),r="",o=null,e)r=e;else{if(!(this.pn.roomModulesList.length>0))return this.an.warn($e+" token not exist"),[2];r=this.getToken()}!this.an.roomid&&this.an.setSessionInfo(this.pn.appid,"player-no-room","",t,"",this.pn.sdKVersion),u.label=1;case 1:return u.trys.push([1,5,6,7]),this.netAgent.isConnect()?[3,3]:[4,new he.l3(function(v){var x=0,U=function(){x&&clearTimeout(x),p.netAgent.off("connected",U),v(!0)};x=setTimeout(function(){p.netAgent.off("connected",U),v(!1)},5e3),p.netAgent.on("connected",U)})];case 2:if(!u.sent())return this.an.error($e+" ua not connected"),[2];this.an.info($e+" ua connected"),u.label=3;case 3:return this.netAgent.setUserInfo(t),[4,this.netAgent.getAppConfigByAgent("init",r,5e3,this.pn.appConfigEtag,{isSpecial:Z.b$==="SPECIAL"})];case 4:return a=u.sent(),l=a.data,a.code===0&&(this.handleLogUpload(),o=l),[3,7];case 5:return d=u.sent(),this.an.error($e+" token not validated"+d),[3,7];case 6:return n&&this.netAgent.setUserInfo(n),this.an.info($e+" call success"),[2,o];case 7:return[2]}})})},s.prototype.fetchAppConfig=function(e){return W(this,void 0,void 0,function(){var t,n,r,o,a,l,d,p,u,v,x,U,te,le,se,We,Ke;return H(this,function(Ze){switch(Ze.label){case 0:if(this.pn.appConfigFetched)return this.an.warn(Te+" config fetched"),[2];if(!this.getUserID())return this.an.info(Te+" user not exist"),[2];if(t="",e)t=e;else{if(!(this.pn.roomModulesList.length>0))return this.an.warn(Te+" token not exist"),[2];t=this.getToken()}n=this.cr.createSpan(I.t0.H,{key:Gn.event},{key:""},Ol),this.an.info(Q+" initConfig etag: "+this.pn.appConfigEtag),this.pn.appConfigEtag!==-1&&(!(r=this.pn.appConfig.SDKVersion)||this.pn.sdkVerNum>r)&&(this.pn.appConfigEtag=-1,this.an.warn(Q+" reset etag. "+r)),o=!!this.pn.appConfig,Ze.label=1;case 1:return Ze.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3,this.pn.appConfigEtag,{isSpecial:Z.b$==="SPECIAL"})];case 2:if(a=Ze.sent(),l=a.code,d=a.data,p=a.etag,u=a.retryCount,n.setAttributes({trigger_reason:rc(this.pn.appConfig?"refresh":"normal"),try_count:Gu(u||0),request_etag:this.pn.appConfigEtag,response_etag:p,init_conf:(0,he.iq)(d)}),n.end(),this.pn.appConfigFetched=!0,this.an.info(Q+" initConfig code:"+l+" data: "+JSON.stringify(d)+" etag: "+p),this.pn.appConfigEtag!==p){if(Object.keys(d).length==0)return this.an.info(Q+" initConfig data null"),[2];U=d.log_config,this.pn.appConfig={app_config:d.app_config,media_config:{publish_config:(v=d.media_config).publish_config,play_config:v.play_config},speedlog_config:S(S({},x=d.speedlog_config),{charge_info_report_no_playing:x.charge_info_report_no_playing||0}),log_config:U,SDKVersion:this.pn.sdkVerNum},this.pn.appConfigEtag=p,te=JSON.stringify(this.pn.appConfig),le=nr(te,oi),_r(no+"_"+this.getAppID()+"_"+(this.pn.mode||ur.modeNo),le),se=nr(this.pn.appConfigEtag+"",oi),_r(Ui+"_"+this.getAppID()+"_"+(this.pn.mode||ur.modeNo),se)}return!o&&this.pn.appConfig&&this.pn.actionListener("_appConfigRsp"),!this.pn.netAppConfig&&this.pn.appConfig&&(this.pn.netAppConfig=Object.assign(this.pn.appConfig),this.pn.actionListener("_netAppConfigRsp",this.pn.netAppConfig)),[3,4];case 3:return We=Ze.sent(),this.an.error(Q+" fail "+JSON.stringify(We)),n.setAttributes({error:We==null?void 0:We.code}),n.end(),[20012,20008,20019].includes(We==null?void 0:We.code)&&(Ke=(We==null?void 0:We.code)===20019?JSON.parse(JSON.stringify(pe.SDK_NOT_SPECIAL)):JSON.parse(JSON.stringify(pe.APPID_INVALID)),this.pn.roomModulesList.forEach(function(et){et.roomTryHandler&&et.roomTryHandler.loginFail(Ke)})),[3,4];case 4:return[2]}})})},s.prototype.au=function(){var e,t=this;(e=this.cloudSetting)===null||e===void 0||e.fetchMultiSetting([Yn,m,N]).then(function(n){var r;if(t.an.info(Q+" settingConfig "+JSON.stringify(n)),n){var o=Q+" fetche setting.";t.mu((r=n==null?void 0:n[Yn])===null||r===void 0?void 0:r.setting),t.pn.actionListener("_settingCanFetch",n==null?void 0:n[N]);var a=t.du(!0,!0);t.an.info(o+=a),t.pu(),t.setAPIReports();var l=t.gu("report_script");if(l){var d=l.url,p=l.key,u=l.hash;t.an.info("".concat(Q," report script ").concat(d," ").concat(p," ").concat(u)),d&&t.cr.loadScript(!0,d,p,u)}}}).catch(function(n){t.an.warn(Q+" settingConfig "+JSON.stringify(n))}),this.pn.onListener("_cloudSettingNotify",function(n,r){var o=t.cloudSetting.getEnvVariables()||{},a=t.cr.createSpan(I.t0.H,{key:Gn.event},{key:""},Qs);if(a.setAttributes({request_kv:qu(o),files:Rc([{name:n,content:r.setting,versions:r.versions,code:r==null?void 0:r.code,message:r==null?void 0:r.message}])}),a.end(),n===Yn){t.mu(r==null?void 0:r.setting);var l=t.du(!0,!0);l&&t.an.info(Q+" setting changed "+l)}})},s.prototype.lu=function(e,t,n){(n==null?void 0:n.code)!==0||(n==null?void 0:n.polling)===!1?t==="request_start"?this.cr.createSpan(I.t0.H,{key:Gn.event},{key:fi,par:e+""},fi,!0):t==="request_end"&&this.cr.spanEnd({key:fi,par:e+""},{request_detail:Sh(n==null?void 0:n.reportData),files:bd(n==null?void 0:n.files),code:n==null?void 0:n.code,request_kv:n==null?void 0:n.requestKV}):this.an.info("zm.crn not report")},s.prototype.Du=function(e,t,n,r,o){var a=this,l=Kr,d=this.cr.createSpan(I.t0.I,{key:Gn.event},{key:""},l.event);return d.setAttributes({svr_env:l.svr_env(this.pn.testEnvironment?"test":"online"),token:l.token(r)}),o&&((0,B.dd)(o.userUpdate)&&d.setAttribute("user_state_update",l.user_state_update(o.userUpdate?1:0)),(0,B.Cs)(o.maxMemberCount)&&d.setAttributes({max_member_cnt:l.max_member_cnt(o.maxMemberCount)})),{interResolve:function(p){var u,v=a.getRoomSessionID(n),x=a.getRoomModules(n),U=a.getSessionId(n);d.setAttributes({room_id:l.room_id(n),room_sid_string:l.room_sid_string(v),liveroom_sid_string:l.liveroom_sid_string(U),try_cnt:l.try_cnt((u=x==null?void 0:x.roomTryHandler)===null||u===void 0?void 0:u.retryActiveCount),room_mode:l.room_mode(a.pn.isMultiRoom?1:0),role:l.role(a.pn.role),audience_create_room:l.audience_create_room(a.pn.roomCreateFlag?1:0),max_member_cnt:l.max_member_cnt((x==null?void 0:x.maxMemberCount)||0),user_name:a.pn.nickName}),d.end(),e(p)},interReject:function(p,u){var v,x,U;u===void 0&&(u=""),d.setAttributes({room_id:l.room_id(n)}),p.code<2e9&&p.code>1e9||p.code<1e6?(x=yt(p.code,p.msg),U=xt(p.code)):x={code:p.code,message:p.msg},x&&a.cr.setError(d,{code:x.code,msg:x.message+u}),U&&pe[U]&&(p.code=pe[U].code,!((v=p.msg)===null||v===void 0)&&v.includes("unknown")&&(p.msg=pe[U].msg)),t(p.code&&p.msg&&u!==""?{code:p.code,msg:p.msg+u}:p)},loginSpan:d}},s.prototype.logoutRoom=function(e,t,n){var r=this;this.an.info(dt+" call by user "+e);var o=[];if(this.pn.roomModulesList.length){var a="normal logout";if(t?a="switch room":n&&(a="page unload"),e===void 0)de([],this.pn.roomModulesList).forEach(function(u){r.Nu(u,void 0,void 0,a),o.push(u.roomID),u.roomHandler.logout(!0)}),this.cloudSetting.uninit();else{if(!(0,B.QP)(e)||e=="")throw this.an.error(dt+" roomID must be string and not empty"),this.Nu(void 0,l=Qo.error.ROOM_ROOMID_INCORRECT,void 0,a),this.pn.isFlutter&&this.pn.actionListener("roomStateChanged",e,Ie.LogoutFailed,l.code,l.msg),l;var l,d=this.getRoomModules(e);if(!d)throw this.an.error(dt+" room not exist "+e),this.Nu(void 0,l=Qo.error.ROOM_ROOMID_INCORRECT,e,a),this.pn.isFlutter&&this.pn.actionListener("roomStateChanged",e,Ie.LogoutFailed,l.code,l.msg),l;this.Nu(d,void 0,void 0,a),o.push(e),d.roomHandler.logout(!1,t),this.pn.roomModulesList.length===0&&this.cloudSetting.uninit()}this.cr.deleteCommonAttributes(["id_name"]),this.cr.clearRoomSpans(o)}else{this.an.warn(dt+" no room");var p={code:0,msg:"no room login"};this.pn.actionListener("roomStateChanged",e,Ie.Logout,p.code,p.msg)}},s.prototype.uploadLog=function(e){var t=this;return e===void 0&&(e=!1),new Promise(function(n,r){t.an.info("zm.zip.udlg call "+e),t.an.uploadStorageLog(e).then(function(){t.an.info("zm.zip.udlg call success"),n({errorCode:0,extendedData:"upload logs success!"})}).catch(function(o){t.an.error("zm.zip.udlg upload zip log failed, result: "+((o==null?void 0:o.message)||"unknown")),n({errorCode:pe.UPLOAD_LOG_ERROR.code,extendedData:pe.UPLOAD_LOG_ERROR.msg+", result: "+((o==null?void 0:o.message)||"unknown")})})})},s.prototype.sendCustomCommand=function(e,t,n){return new Promise(function(r,o){console.error(Z.AF.MESSAGE),o()})},s.prototype._sendCustomCommand=function(e,t,n){return new Promise(function(r,o){console.error(Z.AF.MESSAGE),o()})},s.prototype.sendRoomChannelMessage=function(e,t,n,r,o){return new Promise(function(a,l){console.error(Z.AF.MESSAGE),l()})},s.prototype.sendTransparentMessage=function(e,t){return new Promise(function(n,r){console.error(Z.AF.MESSAGE),r()})},s.prototype.sendBroadcastMessage=function(e,t){return new Promise(function(n,r){console.error(Z.AF.MESSAGE),r()})},s.prototype._sendBroadcastMessage=function(e,t,n,r){return new Promise(function(o,a){console.error(Z.AF.MESSAGE),a()})},s.prototype.setRoomExtraInfo=function(e,t,n){return new Promise(function(r,o){console.error(Z.AF.MESSAGE),o()})},s.prototype._setRoomExtraInfo=function(e,t,n){return new Promise(function(r,o){console.error(Z.AF.MESSAGE),o()})},s.prototype.sendBarrageMessage=function(e,t){return new Promise(function(n,r){console.error(Z.AF.MESSAGE),r()})},s.prototype._sendBarrageMessage=function(e,t,n,r){return new Promise(function(o,a){console.error(Z.AF.MESSAGE),a()})},s.prototype.sendRelayMessage=function(e,t,n,r,o){console.error("not support")},s.prototype.requestJoinLive=function(e,t,n,r,o){return console.error(Z.AF.MESSAGE),!1},s.prototype.inviteJoinLive=function(e,t,n,r,o){return console.error(Z.AF.MESSAGE),!1},s.prototype.endJoinLive=function(e,t,n,r){return console.error(Z.AF.MESSAGE),!1},s.prototype.respondJoinLive=function(e,t,n,r,o){return console.error(Z.AF.MESSAGE),!1},s.prototype.getVersion=function(){return this.version},s.prototype.setSdkBizVersion=function(e){(0,B.QP)(e)&&e!==""&&(this.pn.bizVersion=e)},s.prototype.on=function(e,t){return this.pn.listenerList[e]?(0,B.JO)(t)?(this.pn.listenerList[e].indexOf(t)==-1&&this.pn.listenerList[e].push(t),!0):(this.an.error(Gt+" listener callBack must be funciton"),!1):(this.an.error(Gt+" event "+e+" no found"),!1)},s.prototype.off=function(e,t){if(!this.pn.listenerList[e])return this.an.error(Ut+" listener no found"),!1;var n=this.pn.listenerList[e];if(t){var r=n.indexOf(t);r>=0&&n.splice(r,1)}else this.pn.listenerList[e]=[];return!0},s.prototype._on=function(e,t){return this.pn.listenerList[e]?(0,B.JO)(t)?(this.pn.listenerList[e].indexOf(t)==-1&&this.pn.listenerList[e].push(t),!0):(this.an.error(Gt+" listener callBack must be funciton"),!1):(this.an.error(Gt+" event "+e+" no found"),!1)},s.prototype._off=function(e,t){if(!this.pn.listenerList[e])return this.an.error(Ut+" listener no found"),!1;var n=this.pn.listenerList[e];return t?n.splice(n.indexOf(t),1):this.pn.listenerList[e]=[],!0},s.prototype.isTestEnvironment=function(){return this.pn.testEnvironment},s.prototype.isLogin=function(e){var t=this.getRoomModules(e)||this.pn.roomModulesList[0];return!!t&&t.isLogin()},s.prototype.getMultiRoom=function(){return this.pn.isMultiRoom},s.prototype.getAppID=function(){return this.pn.appid},s.prototype.getUserID=function(){return this.pn.idName},s.prototype.getUserName=function(){return this.pn.nickName},s.prototype.getToken=function(e){return(this.getRoomModules(e)||this.pn.roomModulesList[0]).token},s.prototype.setRoomCreateFlag=function(e){this.pn.roomCreateFlag=e},s.prototype.setRole=function(e){this.pn.role=e},s.prototype.getSessionId=function(e){var t=this.getRoomModules(e)||this.pn.roomModulesList[0];return t?t.userSidString:"0"},s.prototype.getRoomSessionID=function(e){var t=this.getRoomModules(e)||this.pn.roomModulesList[0];return t?t.roomSidString:"0"},s.prototype.getAppConfig=function(){return this.pn.appConfig},s.prototype.setTestPackageSize=function(e){this.stateCenter.configOK&&(this.pn.testNetPackageSize=e)},s.prototype.setAccess=function(e){},s.prototype.enableMultiRoom=function(e){var t=this.cr.createSpan(I.t0.H,{key:Gn.event},{key:""},eu.event);return(0,B.dd)(e)?(t.setAttribute("is_multi",eu.is_multi(e)),this.pn.roomModulesList.length>0||this.pn.setMultiRoom?(this.an.error(an+" multi room can only be set once before first login"),this.cr.setError(t,eu.error.kAlreadyLoginError),!1):(t.end(),this.pn.isMultiRoom=e,this.pn.setMultiRoom=!0,!0)):(this.an.error(an+" param must be boolean"),this.cr.setError(t,eu.error.kInvalidParamError),!1)},s.prototype.getRoomModules=function(e){return this.pn.roomModulesList.find(function(t){return t.roomID==e})},s.prototype._onAppConfigUpdate=function(e){},s.prototype._onBeforePageUnload=function(){},s.use=function(e){switch(e.type){case"Message":case"Live":e.install(s,Ra,La)}},s.setGeoFence=function(e,t){if(![0,1,2].includes(e))throw new Error("GeoFencing set Error");if(!t.every(function(n){return Vn.find(function(r){return r===n})}))throw new Error("GeoFencing set Error");s.geoFenceType=e,s.geoFenceAreaList=t},s.setEngineOptions=function(e){if(e.geoFenceType){if(![0,1,2].includes(e.geoFenceType))throw new Error("GeoFencing set Error");s.geoFenceType=e.geoFenceType}if(e.geoFenceAreaList){if(!e.geoFenceAreaList.every(function(t){return Bi.find(function(n){return n.id===t})}))throw new Error("GeoFencing set Error");s.geoFenceAreaList=e.geoFenceAreaList}if(e.dataReportCustomerContext&&(0,he.zQ)(e.dataReportCustomerContext,!0)&&ru.setReportCustomerContext(e.dataReportCustomerContext),e.customDomain&&e.customDomain&&typeof e.customDomain=="object"){if(e.customDomain.accesshub&&typeof e.customDomain.accesshub!="string")throw new Error("config of customDomain.accesshub should be a string.");if(e.customDomain.logreport&&typeof e.customDomain.logreport!="string")throw new Error("config of customDomain.logreport should be a string.");if(e.customDomain.detaillog&&typeof e.customDomain.detaillog!="string")throw new Error("config of customDomain.detaillog should be a string.");s.customDomain=e.customDomain}s.engineOptions=S(S({},s.engineOptions||{}),e)},s.presetLogConfig=function(e){var t={};if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(t.logLevel=e.logLevel),(0,B.QP)(e.logURL)&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))t.logURL=e.logURL;else if(e.logURL)throw new Error("log url must be a wss or https url");return this.logConfigForPreset=S({},t),!0},s.prototype.resetRoomTokenTimer=function(e,t){var n=this.getRoomModules(e)||this.pn.roomModulesList[0];n&&t&&t>0&&n.roomHandler.resetTokenTimer(1e3*t)},s.prototype.isDisConnect=function(){return this.liveRoomHandler.isDisConnect()},s.prototype.sendMessage=function(e,t,n,r){this.liveRoomHandler.sendMessage(e,t,n,r)},s.prototype.getNetworkInfo=function(){var e;return((e=this.netAgent)===null||e===void 0?void 0:e.getNetworkTimeInfo())||{timestamp:0,maxDeviation:0}},s.prototype.setProtoFormat=function(e){if(e===void 0&&(e="json"),!["json","pb"].includes(e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.pn.protoFormat=e},s.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every(function(t){return(0,B.QP)(t)})&&(this.pn.relateService=e)},s.prototype.getRoomID=function(){return this.pn.roomid},s.prototype.getServerTimeOffset=function(){return this.pn.serverTimeOffset},s.prototype.getReqHead=function(e){var t;return t=(0,B.QP)(e)&&e!==""&&this.getRoomModules(e)||this.pn.roomModulesList[0],this.liveRoomHandler.getReqHead(t)},s.prototype.sendSwitchMessage=function(e,t){throw this.an.error("".concat("zm.ssm"," ").concat(pe.WHITE_BOARD_VERSION_ERROR.msg)),pe.WHITE_BOARD_VERSION_ERROR},s.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},s.prototype.onAppConfigUpdate=function(e){e&&(this._onAppConfigUpdate=e)},s.prototype.onBeforePageUnload=function(e){e&&(this._onBeforePageUnload=e)},s.prototype.getProtoVer=function(){return Z.I2.SWITCH_TWO},s.prototype.sendBusinessMessage=function(e,t,n){return(0,B.Cs)(e)&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,n,void 0,!1):-1},s.prototype.Nu=function(e,t,n,r){var o=this,a=Qo.event,l=this.cr.getAPIErrorReport(a);if(t)l&&this.cr.takeAPIErrorReport(a,t,l);else{var d=this.cr.createSpan(I.t0.I,{key:Gn.event},{key:a,par:e==null?void 0:e.roomID},a,!0);if(d.setAttributes({is_multi:Qo.is_multi(this.pn.isMultiRoom),is_send_cmd_net:Qo.is_send_cmd_net(!0),reason:Qo.reason(r)}),e){var p=e.roomHandler;p.updateTimes(),d.setAttributes({room_id:Qo.room_id(e==null?void 0:e.roomID),room_sid_string:Qo.room_sid_string(e==null?void 0:e.roomSidString),liveroom_sid_string:Qo.liveroom_sid_string(e==null?void 0:e.userSidString),valid_d:p.validTime,total_d:p.totalTime,tempbroken_cnt:p.brokenCounts})}else(0,B.QP)(n)&&d.setAttributes({room_id:Qo.room_id(n),valid_d:0,total_d:0,tempbroken_cnt:0});t?this.cr.setError(d,t):d.end(),setTimeout(function(){o.cr.flush()},200)}},s.prototype.getMsgSpan=function(e,t,n){return n===void 0&&(n=!1),this.cr.createSpan(I.t0.H,{key:Kr.event,par:t},{key:e,par:t},e,n)},s.prototype.Su=function(){var e=this;(0,B.Cs)(this.netAgent.timeOffset)&&this.cr.setTimeOffset(this.netAgent.timeOffset),this.Pu=setTimeout(function(){e.Su()},9e5)},s.prototype.setNetAgentHBMode=function(e){this.netAgent.setHeartBeatMode(e)},s.prototype.setLocalGeoFencing=function(){var e=this.pn.netGeoFencing;if(e!=null&&e.id&&(e!=null&&e.accesshub)){var t=nr(JSON.stringify(this.pn.netGeoFencing),oi);_r(vi+"_"+this.pn.appid+"_"+(this.pn.mode||ur.modeNo),t),this.pn.netGeoFencing={}}},s.prototype.getLocalGeoFencing=function(){var e=$n(vi+"_"+this.pn.appid+"_"+(this.pn.mode||ur.modeNo));if(!e)return this.an.info(It+" no local geo"),null;var t=Nn(e,oi);if(t)try{return JSON.parse(t)}catch{return this.an.warn(It+" local geo descrypt fail"),null}return null},s.prototype.getGeoDomains=function(){var e,t,n,r;if(s.geoFenceType&&s.geoFenceAreaList){this.an.info("".concat(mt," geo type ").concat(s.geoFenceType," area ").concat(s.geoFenceAreaList.join(",")));var o=void 0,a=[],l=[],d=[],p=[],u=this._getGeoFencingIDAndDomain(s.geoFenceType,s.geoFenceAreaList);if(!u)throw this.an.warn("".concat(mt," geofencing not exist")),pe.GEO_SET_ERROR;var v=this.getLocalGeoFencing(),x=!1;if(v!=null&&v.id){var U=u.find(function(se){return se.id===(v==null?void 0:v.id)});U&&(x=!0,o={id:v==null?void 0:v.id,accesshub:(v==null?void 0:v.accesshub)||(U==null?void 0:U.accesshub),logreport:(v==null?void 0:v.logreport)||(U==null?void 0:U.logreport),detaillog:(v==null?void 0:v.detaillog)||(U==null?void 0:U.detaillog),http3Accesshub:(v==null?void 0:v.http3Accesshub)||(U==null?void 0:U.http3Accesshub)||"",wssV6Accesshub:(v==null?void 0:v.wssV6Accesshub)||(U==null?void 0:U.wssV6Accesshub),http3V6Accesshub:(v==null?void 0:v.http3V6Accesshub)||(U==null?void 0:U.http3V6Accesshub)||"",wssV6Detaillog:(v==null?void 0:v.wssV6Detaillog)||"",wssV6Logreport:(v==null?void 0:v.wssV6Logreport)||""},v.accesshub&&a.push(v.accesshub),U.accesshub&&a.push(U.accesshub),v.http3Accesshub&&l.push(v.http3Accesshub),v.wssV6Accesshub&&d.push(v.wssV6Accesshub),U.wssV6Accesshub&&d.push(U.wssV6Accesshub),v.http3V6Accesshub&&p.push(v.http3V6Accesshub))}if(!x){var te=u[0],le=te.accesshub;o={id:te.id,accesshub:le,logreport:te.logreport,detaillog:te.detaillog,wssV6Accesshub:te.wssV6Accesshub},a.push(le)}this.pn.geoFencing=o,this.an.info("".concat(mt," use geo ").concat(JSON.stringify(this.pn.geoFencing))),e=a,t=l,n=d,r=p}return{domains:e,http3Domains:t,wssV6Domains:n,http3V6Domains:r}},s.prototype._getGeoFencingIDAndDomain=function(e,t){var n=this.hashMainDomain(),r=JSON.parse(JSON.stringify(Bi));r.forEach(function(a){a.accesshub+="."+n,a.logreport+="."+n,a.detaillog+="."+n,a.wssV6Accesshub+="."+n});var o=[];return e===1?t.forEach(function(a){var l=r.find(function(d){return d.id===a});l&&o.push(l)}):e===2&&(o=JSON.parse(JSON.stringify(r)),t.forEach(function(a){var l=r.find(function(d){return d.id===a});l&&(o=o.filter(function(d){return d.id!==(l==null?void 0:l.id)}),l.relative_geofencings.forEach(function(d){o=o.filter(function(p){return p.id!==d})}))})),o.length>0?o:null},s.setCloudProxyConfig=function(e,t,n){var r;n?this.proxyCtrl||(this.proxyCtrl=new ql(e,t)):((r=this.proxyCtrl)===null||r===void 0||r.destroy(),this.proxyCtrl=null)},s.setLocalProxyConfig=function(e,t){var n;t?this.proxyCtrl||(this.proxyCtrl=new Oo(e)):((n=this.proxyCtrl)===null||n===void 0||n.destroy(),this.proxyCtrl=null)},s.prototype.setAPIReports=function(){var e=this.pn.settingConfig.getSettingList(["api_error_report","api_login","api_logout","api_start_publish","api_start_play"]),t=e[0],n=e[2],r=e[3],o=e[4],a=function(l,d){return l?d:0};this.cr.setAPIErrorReport("/sdk/login",a(t,e[1])),this.cr.setAPIErrorReport("/sdk/logout",a(t,n)),this.cr.setAPIErrorReport("/sdk/start_publish",a(t,r)),this.cr.setAPIErrorReport("/sdk/start_play",a(t,o))},s.customDomain={},s.proxyCtrl=null,s.pageID="",s})(),at=(function(){function s(e,t,n,r){var o;n===void 0&&(n=0),(o=lt.proxyCtrl)===null||o===void 0||o.init({appID:e}),this.logger=new Ps.ZegoLogger(n,lt.proxyCtrl||void 0),this.dataReport=new Ps.ZegoDataReport(this.logger),this.reporter=new ru(this.logger),this.zegoWebRTM=new lt(e,t,this.logger,this.dataReport,this.reporter,n,r)}return s.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},s.prototype.loginRoom=function(e,t,n,r){return this.zegoWebRTM.loginRoom(e,t,n,r)},s.prototype.switchRoom=function(e,t,n){return this.zegoWebRTM.switchRoom(e,t,n)},s.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},s.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},s.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},s.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},s.prototype.sendCustomCommand=function(e,t,n){return this.zegoWebRTM.sendCustomCommand(e,t,n)},s.prototype.setRoomExtraInfo=function(e,t,n){return this.zegoWebRTM.setRoomExtraInfo(e,t,n)},s.prototype.sendTransparentMessage=function(e,t){return this.zegoWebRTM.sendTransparentMessage(e,t)},s.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},s.presetLogConfig=function(e){return lt.presetLogConfig(e)},s.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},s.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},s.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},s.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},s.use=function(e){lt.use(e)},s.setGeoFence=function(e,t){lt.setGeoFence(e,t)},s.setEngineOptions=function(e){lt.setEngineOptions(e)},s.setCloudProxyConfig=function(e,t,n){lt.setCloudProxyConfig(e,t,n)},s.setLocalProxyConfig=function(e,t){lt.setLocalProxyConfig(e,t)},s})(),Tt=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},ct=(function(){function s(){}return s.getSDPVideoCodec=function(e){var t={H264:[],H265:[],VP8:[],VP9:[],OTHER:[]};if(!e.includes("m=video"))return t;var n=/m=video.+/.exec(e)[0];return(n=n.match(/[\s|\d]+/g)[1].replace(" ","")).split(" ").forEach(function(r){var o=new RegExp("a=rtpmap:"+r+".+").exec(e)[0];o.includes("H264")?t.H264.push(r):o.includes("H265")?t.H265.push(r):o.includes("VP8")?t.VP8.push(r):o.includes("VP9")?t.VP9.push(r):t.OTHER.push(r)}),t.OTHER.forEach(function(r){var o=new RegExp("a=fmtp:"+r+".+apt=(\\d+)").exec(e),a=o&&o[1];a&&(t.H264.includes(a)?t.H264.push(r):t.H265.includes(a)?t.H265.push(r):t.VP8.includes(a)?t.VP8.push(r):t.VP9.includes(a)&&t.VP9.push(r))}),t},s.getSDPByVideDecodeType=function(e,t,n,r){var o={str:"",arr:[],obj:{H264:[],H265:[],VP8:[],VP9:[]}};if(!e.includes("m=video"))return e;var a=/m=video.+/.exec(e)[0];a=a.match(/[\s|\d]+/g)[1].replace(" ",""),o.str=a,o.arr=o.str.split(" "),o.obj=s.getSDPVideoCodec(e);var l=[];if(t==="VP9"?l=Tt(Tt(Tt([],o.obj.H265,!0),o.obj.H264,!0),o.obj.VP8):t==="VP8"?l=Tt(Tt(Tt([],o.obj.H265,!0),o.obj.H264,!0),o.obj.VP9):t==="H264"?l=Tt(Tt(Tt([],o.obj.H265,!0),o.obj.VP8,!0),o.obj.VP9):t==="H265"&&(l=Tt(Tt(Tt([],o.obj.VP8,!0),o.obj.H264,!0),o.obj.VP9)),t=="H264"&&(0,B.dd)(n)){var d=function(v){return function(x){return!!x.includes("profile-level-id=")&&(v?!x.includes("profile-level-id=42e01f"):x.includes("profile-level-id=42e01f"))}},p=function(v){return function(x){if(!x.includes("profile-level-id="))return!1;switch(v){case re.BASE_LINE:return!x.includes("profile-level-id=42");case re.MAIN:return!x.includes("profile-level-id=4d");case re.HIGH:return!x.includes("profile-level-id=64");default:return!1}}},u=function(v){return function(){var x=[];return o.obj.H264.forEach(function(U){for(var te=new RegExp("a=fmtp:"+U+".+\\s\\n","g").exec(e)||[],le=0,se=v;le<se.length;le++)te.filter(se[le]).length!==0&&x.push(U);var We=new RegExp("a=fmtp:"+U+".+apt=(\\d+)").exec(e),Ke=We&&We[1];Ke&&x.includes(Ke)&&x.push(U)}),x}};l=l.concat((function(){for(var v=[],x=0,U=(0,B.TE)(r)||r!==I.B8.HARD_SOFT_ENCODEC_FIRST?(0,B.TE)(r)||r!==I.B8.HIGH_PROFILE_FIRST?[u([p(re.BASE_LINE),d(n)]),u([p(re.BASE_LINE),d(!n)]),u([d(n)]),u([d(!n)])]:[u([p(re.HIGH),d(n)]),u([p(re.HIGH),d(!n)]),u([d(n)]),u([d(!n)])]:[u([d(n),p(re.BASE_LINE)]),u([d(n)]),u([d(!n),p(re.BASE_LINE)]),u([d(!n)])];x<U.length&&(v=(0,U[x])(),new Set(v).size===o.obj.H264.length);x++)v=[];return v})())}return l.forEach(function(v){var x=o.arr.indexOf(v);x>=0&&o.arr.splice(x,1);var U=new RegExp("a=rtpmap:"+v+".+\\s\\n","g"),te=new RegExp("a=rtcp-fb:"+v+".+\\s\\n","g"),le=new RegExp("a=fmtp:"+v+".+\\s\\n","g");e=(e=(e=e.replace(U,"")).replace(te,"")).replace(le,"")}),e=e.replace(a,o.arr.join(" "))},s})(),we=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Jt=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},En=(function(){function s(){var e=this,t=he.VJ.createElement("canvas"),n=t.getContext("2d");n.fillStyle="rgba(255, 255, 255, 0)";try{this.xu=t.captureStream()}catch(r){console.error("canvas captureStream error",r)}this.qu=setInterval(function(){n.fillText("test",Math.floor(640*Math.random()),Math.floor(480*Math.random()))},33),this.Lu=setTimeout(function(){e.Bu&&e.Bu("Detection timeout"),e.hangup()},5e3)}return s.prototype.checkSupportByType=function(e,t){return we(this,void 0,void 0,function(){var n,r,o=this;return Jt(this,function(a){switch(a.label){case 0:return this.checkType=e,n={},this.Uu=new RTCPeerConnection(n),this.Gu=new RTCPeerConnection(n),r=new he.l3(function(l){return o.Bu=l}),this.Uu.addEventListener("icecandidate",function(l){return o.onIceCandidate(o.Uu,l)}),this.Gu.addEventListener("icecandidate",function(l){return o.onIceCandidate(o.Gu,l)}),this.Uu.addEventListener("iceconnectionstatechange",function(l){o.Uu.iceConnectionState==="connected"&&(o.Ju=setTimeout(function(){return we(o,void 0,void 0,function(){var d=this;return Jt(this,function(p){switch(p.label){case 0:return[4,this.Uu.getStats()];case 1:return p.sent().forEach(function(u){if(u.type==="outbound-rtp"&&u.kind==="video"){var v=u.framesEncoded!==void 0&&u.framesEncoded>0;d.Fu=!0,d.Vu=v,d.Qu&&d.detectIsSupported(e)}}),[2]}})})},1e3))}),this.Gu.addEventListener("iceconnectionstatechange",function(l){o.Gu.iceConnectionState==="connected"&&(o.Ku=setTimeout(function(){return we(o,void 0,void 0,function(){var d=this;return Jt(this,function(p){switch(p.label){case 0:return[4,this.Gu.getStats()];case 1:return p.sent().forEach(function(u){if(u.type==="inbound-rtp"&&u.kind==="video"){var v=u.framesDecoded!==void 0&&u.framesDecoded>0;d.Qu=!0,d.Zu=v,d.Fu&&d.detectIsSupported(e)}}),[2]}})})},1e3))}),this.xu.getTracks().forEach(function(l){return o.Uu.addTrack(l,o.xu)}),[4,this.check(e)];case 1:return a.sent(),[4,r];case 2:return[2,a.sent()]}})})},s.prototype.check=function(e,t){return we(this,void 0,void 0,function(){var n,r;return Jt(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t&&(0,B.JO)(this.Uu.addTransceiver)&&(this.Uu.addTransceiver("video",{direction:"sendonly"}),this.Uu.addTransceiver("audio",{direction:"sendonly"})),[4,this.Uu.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})];case 1:return(n=o.sent()).sdp=ct.getSDPByVideDecodeType(n.sdp,e),this.onCreateOfferSuccess(n),[3,3];case 2:return r=o.sent(),this.onCreateSessionDescriptionError(r),[3,3];case 3:return[2]}})})},s.prototype.onCreateOfferSuccess=function(e){return we(this,void 0,void 0,function(){var t,n,r,o;return Jt(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this.Uu.setLocalDescription(e)];case 1:return a.sent(),[3,3];case 2:return t=a.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return a.trys.push([3,5,,6]),[4,this.Gu.setRemoteDescription(e)];case 4:return a.sent(),[3,6];case 5:return n=a.sent(),this.onSetSessionDescriptionError(n),[2];case 6:return a.trys.push([6,9,,10]),[4,this.Gu.createAnswer()];case 7:return r=a.sent(),[4,this.onCreateAnswerSuccess(r)];case 8:return a.sent(),[3,10];case 9:return o=a.sent(),this.onCreateSessionDescriptionError(o),[2];case 10:return[2]}})})},s.prototype.onCreateAnswerSuccess=function(e){return we(this,void 0,void 0,function(){var t,n;return Jt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.Gu.setLocalDescription(e)];case 1:return r.sent(),[3,3];case 2:return t=r.sent(),this.onSetSessionDescriptionError(t),[2];case 3:return r.trys.push([3,5,,6]),[4,this.Uu.setRemoteDescription(e)];case 4:return r.sent(),[3,6];case 5:return n=r.sent(),this.onSetSessionDescriptionError(n),[2];case 6:return[2]}})})},s.prototype.onIceCandidate=function(e,t){return we(this,void 0,void 0,function(){var n;return Jt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getOtherPc(e).addIceCandidate(t.candidate)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),console.error(this.checkType,"".concat(this.getPcName(e)," addIceCandidate error"),n),this.hangup(),this.Bu(n),[3,3];case 3:return this.getPcName(e)==="_zgp_remotePc"&&t.candidate&&(this.iceCandidate=!0),[2]}})})},s.prototype.getOtherPc=function(e){return e===this.Uu?this.Gu:this.Uu},s.prototype.getPcName=function(e){return e===this.Uu?"_zgp_localPc":"_zgp_remotePc"},s.prototype.onCreateSessionDescriptionError=function(e){console.error("Failed to create session description: ".concat(e.toString())),this.hangup(),this.Bu(e)},s.prototype.onSetSessionDescriptionError=function(e){console.error("Failed to set session description: ".concat(e.toString())),this.hangup(),this.Bu(e)},s.prototype.detectIsSupported=function(e){this.Bu(!(!this.Vu||!this.Zu)||"The browser does not support ".concat(e," format")),this.hangup()},s.prototype.hangup=function(){this.Uu.close(),this.Gu.close(),this.xu.getTracks().forEach(function(e){return e.stop()}),this.Lu&&(clearTimeout(this.Lu),this.Lu=null),this.Ju&&(clearTimeout(this.Ju),this.Ju=null),this.Ku&&(clearTimeout(this.Ku),this.Ku=null),this.Fu=!1,this.Qu=!1,this.qu&&(clearInterval(this.qu),this.qu=null)},s})();const rn="[a-fA-F\\d:]",In=s=>s&&s.includeBoundaries?`(?:(?<=\\s|^)(?=${rn})|(?<=${rn})(?=\\s|$))`:"",fn="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",dn="[a-fA-F\\d]{1,4}",xn=`
(?:
(?:${dn}:){7}(?:${dn}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${dn}:){6}(?:${fn}|:${dn}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${dn}:){5}(?::${fn}|(?::${dn}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${dn}:){4}(?:(?::${dn}){0,1}:${fn}|(?::${dn}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${dn}:){3}(?:(?::${dn}){0,2}:${fn}|(?::${dn}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${dn}:){2}(?:(?::${dn}){0,3}:${fn}|(?::${dn}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${dn}:){1}(?:(?::${dn}){0,4}:${fn}|(?::${dn}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${dn}){0,5}:${fn}|(?::${dn}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),An=new RegExp(`(?:^${fn}$)|(?:^${xn}$)`),Hn=new RegExp(`^${fn}$`),dr=new RegExp(`^${xn}$`),Zr=s=>s&&s.exact?An:new RegExp(`(?:${In(s)}${fn}${In(s)})|(?:${In(s)}${xn}${In(s)})`,"g");Zr.v4=s=>s&&s.exact?Hn:new RegExp(`${In(s)}${fn}${In(s)}`,"g"),Zr.v6=s=>s&&s.exact?dr:new RegExp(`${In(s)}${xn}${In(s)}`,"g");var yr=Zr;const{toString:rr}=Object.prototype,si={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function ii(s,e={}){if(rr.call(s)!=="[object RegExp]")throw new TypeError("Expected a RegExp instance");const t=Object.keys(si).map(r=>(typeof e[r]=="boolean"?e[r]:s[r])?si[r]:"").join(""),n=new RegExp(e.source||s.source,t);return n.lastIndex=typeof e.lastIndex=="number"?e.lastIndex:s.lastIndex,n}function ei(s,e,{timeout:t}={}){try{return(function(n){const r=(...o)=>n(...o);return Object.defineProperty(r,"name",{value:`functionTimeout(${n.name||"<anonymous>"})`,configurable:!0}),r})(()=>ii(s).test(e))()}catch(n){throw n}}const to={timeout:400};function ji(s){return!(s.length>45)&&ei(yr.v6({exact:!0}),s,to)}function Ts(s){return!(s.length>15)&&ei(yr.v4({exact:!0}),s,to)}function ho(s){return[s>>24&255,s>>16&255,s>>8&255,255&s].join(".")}function qi(s){var e=s.split(".");return(parseInt(e[0])<<24)+(parseInt(e[1])<<16)+(parseInt(e[2])<<8)+parseInt(e[3])}function uo(s){var e=s.split(".");return e?(parseInt(e[1])<<24|parseInt(e[2])<<16|parseInt(e[3])<<8|parseInt(e[4]))>>>0:0}function Wo(s){return ji(s)}function Si(s){return(function(e){return Ts(e)})(s)?ae.IPv4:Wo(s)?ae.IPv6:-1}function ws(s){var e=s.match(/^[^:]*:(.*?):[^:]*$/);return e?e[1]:""}var Vi=function(){return Vi=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Vi.apply(this,arguments)},fo=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Ni=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Lo=j.eU.error.wn;function _o(s,e){return fo(this,void 0,void 0,function(){return Ni(this,function(t){return e&&(0,B.JO)(s.addTransceiver)&&(s.addTransceiver("video",{direction:"sendonly"}),s.addTransceiver("audio",{direction:"sendonly"})),[2,s.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})]})})}function fr(s,e,t,n,r){var o;return fo(this,void 0,void 0,function(){var a,l,d,p,u,v,x;return Ni(this,function(U){switch(U.label){case 0:if(a={webRTC:!1,customCapture:!1,camera:!1,microphone:!1,videoCodec:{H264:!1,H265:!1,VP8:!1,VP9:!1},screenSharing:s,errInfo:{}},n&&n==="screenSharing")return e({result:s,errInfo:a.errInfo}),[2];if((!n||n==="customCapture")&&(((l=he.VJ.createElement("video")).captureStream||l.mozCaptureStream)&&(a.customCapture=!0),n==="customCapture"))return e({result:a.customCapture,errInfo:a.errInfo}),[2];if(d=!!(!((o=navigator==null?void 0:navigator.mediaDevices)===null||o===void 0)&&o.getUserMedia),(function(){var te=window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1;if(te&&(console.error("webrtc requires https or localhost"),!d))throw new Error("webrtc requires https or localhost");return!te})(),n&&n!=="camera"&&n!=="microphone")return[3,10];if(!d)return[3,9];if(n&&n!=="camera")return[3,4];U.label=1;case 1:return U.trys.push([1,3,,4]),[4,Cs({video:!0,audio:!1})];case 2:return(p=U.sent())&&(a.camera=!0)&&p.getTracks().forEach(function(te){te.stop()}),[3,4];case 3:return u=U.sent(),a.errInfo.camera={name:u.name,message:u.message},console.error("camera devices detect error: ",u.name,u.message),[3,4];case 4:if(n&&n!=="microphone")return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 6:return(v=U.sent())&&(a.microphone=!0)&&v.getTracks().forEach(function(te){return te.stop()}),[3,8];case 7:return x=U.sent(),a.errInfo.microphone={name:x.name,message:x.message},console.error("microphone devices detect error: ",x.name,x.message),[3,8];case 8:return[3,10];case 9:a.camera=!1,a.microphone=!1,U.label=10;case 10:return n==="camera"||n==="microphone"?(e({result:a[n],errInfo:a.errInfo}),[2]):((function(te,le,se,We){fo(this,void 0,void 0,function(){var Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt;return Ni(this,function(Ht){switch(Ht.label){case 0:return Ke={webRTC:!1,H264:!1,VP8:!1,VP9:!1,H265:!1},se?le!==1||se!=="VP8"&&se!=="H264"&&se!=="H265"?[3,2]:[4,(Kt=new En).checkSupportByType(se,We)]:[3,2];case 1:return Ze=Ht.sent(),(0,B.dd)(Ze)?(Ke[se]=Ze,[2,te(Ke)]):(Ke[se]=!1,[2,te(Ke,Ze)]);case 2:if(se!=="webRTC"&&le!==1)return[3,7];Ht.label=3;case 3:return Ht.trys.push([3,5,,6]),[4,_o(new RTCPeerConnection,We)];case 4:return Ht.sent(),Ke.webRTC=!0,[3,6];case 5:return et=Ht.sent(),te&&te(Ke,et),[3,6];case 6:if(se==="webRTC")return[2,te(Ke)];Ht.label=7;case 7:if(le===1){for(ht="",Et=[],At=0,Ot=gt=["VP8","H264","H265"];At<Ot.length;At++)Bt=Ot[At],Kt=new En,Et.push(Kt.checkSupportByType(Bt));return Promise.all(Et).then(function(Zt){Zt.forEach(function(un,hn){(0,B.dd)(un)?Ke[gt[hn]]=!0:(Ke[gt[hn]]=!1,ht=un)}),ht?te(Ke,ht):te(Ke)}),[2]}try{_o(new RTCPeerConnection,We).then(function(Zt){if(Ke.webRTC=!0,Zt&&Zt.sdp){var un=Zt.sdp.split(`\r
`);if(Ke.H264=un.some(function(hn){return hn.startsWith("a=rtpmap:")&&hn.indexOf("H264/")>-1}),se==="H264"||(Ke.VP8=un.some(function(hn){return hn.startsWith("a=rtpmap:")&&hn.indexOf("VP8/")>-1}),se==="VP8"))return te(Ke);Ke.VP9=un.some(function(hn){return hn.startsWith("a=rtpmap:")&&hn.indexOf("VP9/")>-1}),Ke.H265=un.some(function(hn){return hn.startsWith("a=rtpmap:")&&hn.indexOf("H265/")>-1}),te&&te(Ke)}})}catch(Zt){te&&te(Ke,Zt)}return[2]}})})})(function(te,le){n||(a.videoCodec.H264=te.H264,a.videoCodec.H265=te.H265,a.videoCodec.VP8=te.VP8,a.videoCodec.VP9=te.VP9,a.webRTC=te.webRTC),le&&((0,B.QP)(le)?a.errInfo.extendedDate=le:a.errInfo.webRTC={name:le.name,message:le.message},console.error("videoCodec detect error: "+le)),e&&e(n?{result:te[n],errInfo:a.errInfo}:a)},t,n,r),[2])}})})}var hr={supportDetection:fr},Yi=function(s){return(0,B.w)(s)&&s.videoQuality!==void 0&&[1,2,3].includes(s.videoQuality)&&(delete s.width,delete s.height,delete s.frameRate,delete s.bitRate),s};function Tr(s){var e={};for(var t in s){var n=s[t];if(n instanceof Object){var r=n instanceof MediaStream||n instanceof HTMLElement;e[t]=r?n:Tr(n)}else n!==void 0&&(e[t]=n)}return e}function Ma(s){return Uint8Array.from(Array.from(window.unescape(encodeURIComponent(s))).map(function(e){return e.charCodeAt(0)}))}var wi=function(s){return s.split(`
m=`).map(function(e,t){return(t>0?"m="+e:e).trim()+`\r
`})};function Xr(s){var e=function(o,a){return(function(l){return l.trim().split(`
`).map(function(d){return d.trim()})})(o).filter(function(l){return l.indexOf(a)===0})},t=wi(s),n=[],r=[];return t.forEach(function(o,a){var l=(function(p){var u=e(p,"a=mid:")[0];if(u)return u.substr(6)})(o),d=e(o,"a=candidate:").map(function(p){return r.push(p),Vi(Vi({},(function(u){for(var v,x={foundation:(v=u.indexOf("a=candidate:")===0?u.substring(12).split(" "):u.substring(10).split(" "))[0],component:parseInt(v[1],10),protocol:v[2].toLowerCase(),priority:parseInt(v[3],10),ip:v[4],address:v[4],port:parseInt(v[5],10),type:v[7]},U=8;U<v.length;U+=2)switch(v[U]){case"raddr":x.relatedAddress=v[U+1];break;case"rport":x.relatedPort=parseInt(v[U+1],10);break;case"tcptype":x.tcpType=v[U+1];break;case"ufrag":x.ufrag=v[U+1],x.usernameFragment=v[U+1];break;default:x[v[U]]=v[U+1]}return x})(p)),{mid:l})});n.push.apply(n,d)}),[n,r]}function xr(s){var e=Xr(s)[0];if(e.length>0){var t=e[0].ip,n=Si(t)===ae.IPv6?"[".concat(t,"]"):t;return["turn:".concat(n,":3478?transport=udp"),"turn:".concat(n,":443?transport=tcp"),"turn:".concat(n,":3478?transport=tcp")]}return[]}function Di(s){var e=s.match(/a=ice-ufrag:(\S+)/);return e?e[1]:""}function Ei(s){var e=s.match(/a=ice-pwd:(\S+)/);return e?e[1]:""}function $r(s){var e=s.split(":");return s.replace(":"+e[e.length-1],"")}function wr(s){var e=I.ey.RTC;switch(s){case 1:case 3:e=I.ey.CDN;break;case 2:e=I.ey.L3;break;default:e=I.ey.RTC}return e}function Zi(s){return(0,B.QP)(s)&&Number(s.split(".")[0])||0}function bi(s,e,t,n){var r=s.version,o=s.name.toLowerCase(),a=Zi(r);return o===e&&(n===0&&a<t||n===1&&a===t||n===2&&a>t)}function Cs(s){var e=this;return new he.l3(function(t,n){return fo(e,void 0,void 0,function(){var r,o,a,l,d,p;return Ni(this,function(u){switch(u.label){case 0:r=[Vi({},s),Vi(Vi({},s),{video:{width:360}}),Vi(Vi({},s),{video:{width:640}}),Vi(Vi({},s),{video:{width:720}}),Vi(Vi({},s),{video:{width:854}}),Vi(Vi({},s),{video:{width:1280}})],o=null,a=null,l=0,u.label=1;case 1:if(!(l<r.length))return[3,6];d=r[l],u.label=2;case 2:return u.trys.push([2,4,,5]),[4,navigator.mediaDevices.getUserMedia(d)];case 3:return o=u.sent(),[3,6];case 4:return p=u.sent(),a=p,[3,5];case 5:return l++,[3,1];case 6:return o?t(o):n(a),[2]}})})})}function pf(s,e,t){var n=JSON.parse(JSON.stringify(s));if(e.forEach(function(o){var a=n.indexOf(o);a>=0&&(n.splice(a,1),n.push(o))}),!t){var r=n.findIndex(function(o){return o===s[0]});r>0&&(n.splice(r,1),n.unshift(s[0]))}return n}function sl(s,e,t){var n=JSON.parse(JSON.stringify(s));if(e.forEach(function(o){var a=n.findIndex(function(l){return l.ip===o.ip});a>=0&&(n.splice(a,1),n.push(o))}),!t){var r=n.findIndex(function(o){return o.ip===s[0].ip});r>0&&(n.splice(r,1),n.unshift(s[0]))}return n}function Rs(s){return s.ip+":"+s.port}function Ua(s,e){return s.findIndex(function(t){return e.includes(t.ip)&&e.includes(t.port+"")})}function Jo(s,e){var t;if(e==="chrome"||e==="safari")switch(s){case 0:t="tls";break;case 1:t="tcp";break;case 2:t="udp"}else if(e==="firefox")switch(s){case 0:t="tcp";break;case 5:t="udp"}return t}function Xi(s,e){if(e===void 0&&(e="video"),!(s instanceof MediaStream))return null;for(var t=e=="video",n=document.querySelectorAll(e),r=null,o=0;o<n.length;o++){var a=n[o],l=a.srcObject;if(l&&(l===s||(t?l.getVideoTracks()[0]===s.getVideoTracks()[0]:l.getAudioTracks()[0]===s.getAudioTracks()[0]))){if(a.currentTime)return a;r=a}}return r}function cu(s,e){navigator.mediaDevices!==void 0&&navigator.mediaDevices.enumerateDevices!==void 0?navigator.mediaDevices.enumerateDevices().then(function(t){for(var n=[],r=[],o=[],a=0;a<t.length;a++){var l=t[a];l.kind==="audioinput"&&n.push({deviceName:l.label,deviceID:l.deviceId}),l.kind==="audiooutput"&&r.push({deviceName:l.label,deviceID:l.deviceId}),l.kind==="videoinput"&&o.push({deviceName:l.label,deviceID:l.deviceId})}s&&s({microphones:n,speakers:r,cameras:o})}).catch(function(t){console.error("enumerate devices wrong "+t),e&&e(j.gf.error.je)}):e&&e(j.gf.error.yn)}function al(s,e){if((0,B.TE)(s))return e(Lo," bitrate is required when videoQuality is 4"),!1;if((0,B.Cs)(s)){if(!J(s,0,10240))return e(Lo," bitrate must be integer number"),!1;if(!(function(t,n){return!(t>10240&&(n(Lo," bitrate cannot greater than 10 Mbps"),1))})(s,e))return!1}else e(Lo," bitrate must be number");return!0}function uu(s,e,t,n){if(!(0,B.w)(s))return{result:!1,message:"Invalid constraint. Constraint Extend must be a object"};if(Object.keys(s).length===0)return{result:!1,message:"".concat(e," can not be a empty object")};for(var r=0,o=["exact","ideal","max","min"];r<o.length;r++){var a=o[r],l=s[a];if((0,B.Cs)(l)&&!(0,he.zQ)(l,!1))return{result:!1,message:" ".concat(a," of ").concat(e," must be integer number")};if((0,B.Cs)(t)&&(0,B.Cs)(l)&&l<t)return{result:!1,message:" ".concat(a," of ").concat(e," must greater than ").concat(t)};if((0,B.Cs)(n)&&(0,B.Cs)(l)&&l>n)return{result:!1,message:" ".concat(a," of ").concat(e," cannot greater than ").concat(n)}}return{result:!0,message:"Constraint Extend OK."}}function Fl(s,e,t,n,r){var o=uu(s,e,n,r);return o.result||t&&t(Lo,o.message),o.result}function Ba(s,e,t){for(var n=0,r=s;n<r.length;n++){var o=r[n],a=e[o];if((0,B.TE)(a))return t&&t(Lo," ".concat(o," is required when videoQuality is 4")),!1;if((0,B.Cs)(a)&&!(0,he.zQ)(a,!1))return t&&t(Lo," ".concat(o," must be integer number")),!1;if((0,B.Cs)(a)&&(o==="width"||o==="height")&&a<0)return t&&t(Lo," ".concat(o," must greater than 0.")),!1;if((0,B.Cs)(a)&&o==="width"&&a>7680)t&&t(Lo," ".concat(o," cannot greater than 7680."));else if((0,B.Cs)(a)&&o==="height"&&a>4320)t&&t(Lo," ".concat(o," cannot greater than 4320."));else if((0,B.w)(a)){if(o==="width"&&!Fl(a,o,t,0,7680)||o==="height"&&!Fl(a,o,t,0,4320)||o==="frameRate"&&!Fl(a,o,t))return!1}else if(!(0,B.Cs)(a)&&(0,B.w)(a))return t&&t(Lo," ".concat(o," must be number or object")),!1}return!0}function lu(s){return s&&s.readyState==="live"?s.enabled===!0?0:3:2}function Lc(s){return((0,B.Cs)(s)?s:s.exact?s.exact:s.ideal?s.ideal:s.min||s.max)||0}function Mc(s){if(!(function(t){return!!/^(\d{1,3}\.){3}\d{1,3}$/.test(t)&&t.split(".").map(function(n){return parseInt(n,10)}).every(function(n){return n>=0&&n<=255})})(s))throw new Error("Invalid IPv4 address");var e=s.split(".").map(function(t){return parseInt(t,10)}).map(function(t){return t.toString(16).padStart(2,"0")});return"64:ff9b::".concat(e[0]).concat(e[1],":").concat(e[2]).concat(e[3])}var du=function(s){Array.isArray(s.ips)&&(s.ips=s.ips.map(function(e){var t=e.priority,n=e.vid;return{ip:e.ip,port:e.port,priority:ki.A.isLong(t)?t.toString():t,vid:n}})),Array.isArray(s.ipv6s)&&(s.ipv6s=s.ipv6s.map(function(e){var t=e.priority,n=e.vid;return{ip:e.ip,port:e.port,priority:ki.A.isLong(t)?t.toString():t,vid:n}}))},Ce=ye(1290),mf=(function(){function s(e,t){this.an=e,this.Xu=t,this.debug=!1,this.testEnvironment=!1,this.pullLimited=!0,this.useNetAgent=!0,this.configOK=!1,this.relateService=[],this.role=2,this.maxMemberCount=0,this.roomCreateFlag=1,this.netMode=I.Am.Default,this.callbackList={},this.experimentalAPIList={onRecvRoomMuteVideoStream:0,onRecvRoomMuteAudioStream:0,onRecvRoomChannelMessage:0,onVolumeDuckingUpdate:0},this.publishStreamList={},this.streamUrlMap={},this.cmdCallback={},this.customUrl=[],this.customPlayUrl=[],this.turnToTcp=!1,this.turnOverTcpOnly=void 0,this.audioEffectBuffer={},this.audioBitRate=48e3,this.cdnSeq=0,this.engineDestroy=!1,this.listenerList={roomStreamUpdate:[],streamExtraInfoUpdate:[],playerStateUpdate:[],publisherStateUpdate:[],screenSharingEnded:[],publishQualityUpdate:[],playQualityUpdate:[],remoteCameraStatusUpdate:[],remoteMicStatusUpdate:[],soundLevelUpdate:[],capturedSoundLevelUpdate:[],videoDeviceStateChanged:[],audioDeviceStateChanged:[],deviceError:[],_deviceError:[],_remoteCameraStatusUpdate:[],_remoteMicStatusUpdate:[],_streamUpdated:[],receiveRealTimeSequentialData:[],playerRecvSEI:[],beautyEffectError:[],_engineConfigUpdate:[],backgroundEffectError:[],exceptionUpdate:[],networkQuality:[],mixerSoundLevelUpdate:[],autoMixerSoundLevelUpdate:[],mixerRelayCDNStateUpdate:[],_engineDestroy:[],recvExperimentalAPI:[],playerVideoTrackUpdate:[],playerAudioTrackUpdate:[],publisherVideoEncoderChanged:[]},this.reportList={},this.reportSeqList={startPublish:{},rePublish:{},startPlay:{},rePlay:{},stopPublish:{},stopPlay:{}},this.streamTrigger={},this.audioStreamList={},this.deviceInfos=null,this.deviceChangeTimer=null,this.deviceStateOut=!1,this.customUa=!1,this.streamRetryTime=300,this.serverRetryTime=90,this.checkList=[],this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""},this.clientIP="",this.accessClientIp="",this.isMultiOuter=!1,this.roomList=[],this.isMultiRoom=!1,this.browser="",this.unregisterSeiFilter="",this.isTestMode=!1,this.debugLog=!1,this.netAppConfigDelay=0,this.seiConfig={emulationPreventionByte:!1},this.playAccelerate=!0,this.autoSwitchDeviceSetting={camera:!1,microphone:!1},this.unSendMessageList=[],this.scenario=I.UP.Default,this.testStreamRetryMode=0,this.testStreamRetryCount=10,this.supportDispatchByPass=!1,this.testStreamStatusSeq=0,this.engineConfig={keepAudioTrack:!0,playClearLastFrame:!0,previewClearLastFrame:!0,mixingAudioDelay:0,baseMixingAudioDelay:0,adaptCustomUA:!1,allowReplaceEmptyTrack:!1,publishQualityInterval:0,playQualityInterval:0,enableMiniSDP:!1,keepRtcWhenSignalDisconnected:!0,autoRecaptureOnShow:!1,datachannelOption:{ordered:!0},switchRoomNotStopPlay:!1,enableReferenceBitrate:!0,speechEnhanceLogLevel:1},this.$u=!0,this.ta=!1,this.player265Validated=!1,this.player265ReceiverList=[],this.miniSdpError=0,this.debugVerboseUpdateList={streamProbeState:[],chargeInfosUpdate:[],startConnectWebRTCServer:[]},this.logReportCallback=ee,this.unregisterCallback=Je,this.decodeServerError=yt,this.getLiveRoomError=xt,this.getServerError=ze,this.mergeStreamList=Ye,this.actionSuccessCallback=ve,this.checkValidNumber=J,this.uint8arrayToBase64=ut,this.getSeq=I.Mo,this.getReportSeq=I.wN,this.cdnSeqV2=new Date().getTime()}return Object.defineProperty(s.prototype,"networkState",{get:function(){var e;return(e=this.rtm)===null||e===void 0?void 0:e.stateCenter.networkState},set:function(e){var t;!((t=this.rtm)===null||t===void 0)&&t.stateCenter&&!(0,B.TE)(e)&&(this.rtm.stateCenter.networkState=e)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isFlutter",{get:function(){return!!this.engineConfig.isFlutter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"selectIPStackMode",{get:function(){return this.settingConfig.getSettingWithUserParams("ip_stack_mode",Za.ipStackMode)||F.IPv4Prefer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isMiniSdp",{get:function(){if(!this.$u&&!this.ta||!window.WebAssembly||!window.Worker||bi(this.browserInfo,"chrome",78,0))return!1;var e=this.settingConfig.getSetting("open_mini_sdp");return!!(0,B.dd)(e)&&(this.an.info("zc.c.ims setting: "+e),e)},enumerable:!1,configurable:!0}),s.prototype.setIsMiniSdp=function(e){var t;(t=this.settingConfig)===null||t===void 0||t.setUserValue("open_mini_sdp",e)},Object.defineProperty(s.prototype,"streamCenter",{get:function(){return this.gn},set:function(e){this.gn=e},enumerable:!1,configurable:!0}),s.prototype.getRequestId=function(){return this.idName+"-"+(0,I.Mo)()},s.prototype.addListener=function(e,t){return this.listenerList[e]?(0,B.JO)(t)?(this.listenerList[e].indexOf(t)==-1&&this.listenerList[e].push(t),!0):(this.an.error("zc.o.0 listener callBack must be funciton"),!1):(this.an.error("zc.o.0 event "+e+" no found"),!1)},s.prototype.actionListener=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=["roomStreamUpdate","playerStateUpdate","publisherStateUpdate","screenSharingEnded","beautyEffectError","backgroundEffectError","playerVideoTrackUpdate","playerAudioTrackUpdate","publisherVideoEncoderChanged","deviceError"].includes(e);if(o&&this.listenerList[e]){var a=this.reporter.createSpan(Z.t0.H,{key:j.i6.event},{key:""},j.fn.event);a.setAttributes({listener:e,listener_params:JSON.stringify(n)}),a.end()}(o||["streamExtraInfoUpdate"].includes(e))&&this.an.info("zc.al ".concat(e," ").concat(JSON.stringify(n))),this.listenerList[e]&&this.listenerList[e].forEach(function(l){try{setTimeout(function(){l.apply(void 0,n)},0)}catch(d){t.an.error(Ce.fkL+" "+e+" "+d)}})},s.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.an.error("zc.o.1 listener no found"),!1;this.an.info("zc.o.1 "+"".concat(e," cb:")+typeof t);var n=this.listenerList[e];if(t){var r=n.indexOf(t);r>=0&&n.splice(r,1)}else this.listenerList[e]=[];return!0},s.prototype.getRoomByRoomID=function(e){return this.roomList.find(function(t){return t.roomID==e})},s.prototype.getPlayRoom=function(e){return this.roomList.find(function(t){return!!t.streamList.find(function(n){return n.stream_id==e})})},s.prototype.onExperimentalAPICallback=function(e){this.actionListener("recvExperimentalAPI",e)},s.prototype.au=function(e,t){return this.settingConfig.getSetting(e,t)},s.prototype.destroy=function(){this.gn=null},s.prototype.onDebugVerboseCallBack=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.debugVerboseUpdateList[e]&&this.debugVerboseUpdateList[e].forEach(function(r){r.apply(void 0,t)})},s.prototype.ia=function(e,t){var n=this.settingConfig.getSetting("report_attr_level");(0,he.VU)(n,e,t)},s})(),xd=function(){return xd=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},xd.apply(this,arguments)},hc=j.k1,cl="zb.sh.usi",hu=(function(){function s(e,t,n,r,o){this.an=e,this.pn=t,this.rtm=n,this.gn=r,this._s=o,this.na=0,this.ea=0,this.ra=0,this.sa=!1,this.oa=null,this.ua=2e3,this.aa=5e3,this.mixStreamTaskList={},this.mixRequestIdList=[],this.mixStreamHbList={},this.roomID=o,this.logger=e,this.stateCenter=t}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"reporter",{get:function(){return this.cr},enumerable:!1,configurable:!0}),s.prototype._setCDNInfo=function(e,t){var n=t.urls_flv,r=t.urls_m3u8,o=t.urls_flv_plus,a=t.urls_m3u8_plus,l=t.urls_https_flv,d=t.urls_https_m3u8,p=t.urls_rtmp;e.urlFlv=(0,B.C9)(n)?n[0]||"":(0,B.QP)(n)?n:"",e.urlHls=(0,B.C9)(r)?r[0]||"":(0,B.QP)(r)?r:"",e.urlFlvPlus=(0,B.C9)(o)?o[0]||"":(0,B.QP)(o)?o:"",e.urlHlsPlus=(0,B.C9)(a)?a[0]||"":(0,B.QP)(a)?a:"",e.urlHttpsFlv=(0,B.C9)(l)?l[0]||"":(0,B.QP)(l)?l:"",e.urlHttpsHls=(0,B.C9)(d)?d[0]||"":(0,B.QP)(d)?d:"",e.urlRtmp=(0,B.C9)(p)?p[0]||"":(0,B.QP)(p)?p:""},s.prototype.onStreamUpdated=function(e,t,n){},s.prototype.onStreamExtraInfoUpdated=function(e,t){},s.prototype.onStreamAttrUpdated=function(e,t){},s.prototype.handleStreamStart=function(e,t){var n="zb.sh.hss";(0,he.rA)(this.an,n,"stream update"),this.room=t,e.body?(this.ua=e.body.stream_list_hb_merge_timeout||2e3,this.aa=e.body.stream_list_push_merge_timeout||5e3,this.sa=!1,this.handleFullUpdateStream(e.body.stream_seq,e.body.stream_info||[],!0),this._handleReconnectStream(e.body.stream_info),(0,he.OY)(this.an,n)):this.an.error(n+" server response wrong")},s.prototype.onFullUpdateStream=function(e){},s.prototype.onPublishStateUpdate=function(e,t,n,r){},s.prototype._updateStreamInfo=function(e,t,n,r,o,a){var l,d,p,u=this;n===void 0&&(n=""),(0,he.rA)(this.an,cl);var v=n,x=(l=this.room)===null||l===void 0?void 0:l.streamList.find(function(Ze){return Ze.stream_id===e});x||this.an.info(cl+" stream not in room cmd "+t);var U={stream_id:e,extra_info:v};if(t!==2002&&t!==2003||(U.stream_sid=(x==null?void 0:x.stream_sid)||""),t===2001&&this.gn.publisherList[e]){var te=this.gn.publisherList[e].publisher;U.inspect_flag=((d=te==null?void 0:te.publishOption)===null||d===void 0?void 0:d.inspectFlag)||0}var le=JSON.stringify(U),se=xd({sub_cmd:t,stream_msg:le,third_token:(p=this.room)===null||p===void 0?void 0:p.token},a||{stream_resource:1,stream_codec:0}),We=this.room,Ke=this.rtm.liveRoomHandler.sendStreamUpdate(se,function(Ze,et){u.handleStreamUpdateRsp(Ze,e,t),r&&r(Ze,et)},function(Ze,et){var ht=u.room,gt=u.rtm.stateCenter.roomModulesList.find(function(Ht){return Ht.roomID===(ht==null?void 0:ht.roomID)}),Et=function(){return(gt==null?void 0:gt.isTryLogin())||(gt==null?void 0:gt.roomState)==="CONNECTING"},At=function(){u.an.warn(cl+" resend stream update "+t),u._updateStreamInfo(e,t,n,r,o,a)};if(ht&&(gt!=null&&gt.isLogin()||Et())&&Ze.code&&Ze.code==Ft.Q9p.code&&ht.streamInfoList[e].seq==et)setTimeout(function(){if(t==2001&&u.pn.publishStreamList[e]&&u.pn.publishStreamList[e].state==I.T_.update_info||t==2002)if(Et()){var Ht=function(Zt,un){var hn=function(){u.rtm.stateCenter.offListener("_roomStateUpdate",Ht)};Zt===(ht==null?void 0:ht.roomID)&&un==="CONNECTED"?(At(),hn()):Zt===(ht==null?void 0:ht.roomID)&&un==="DISCONNECTED"&&hn()};u.rtm.stateCenter.onListener("_roomStateUpdate",Ht)}else At();else o&&o(Ft.Q9p)},0);else if(Ze.body&&Ze.body.err_code){var Ot=Ze.body.err_code,Bt=Ft.bVX;[1011,1000002002].includes(Ot)?Bt=Ft.g9p:[5030].includes(Ot)?Bt=(0,he.QS)((0,he.iq)(pe.FORBID_BLACK_USER)):[2002,2003,2010,2015].includes(Ot)&&(Bt=Ft.HED),o&&o(Bt,et);var Kt="";Bt.code===Ft.bVX.code&&(Kt=JSON.stringify({server_code:I.Kk+Ot})),t===I.NP.liveBegin&&u.onPublishStateUpdate(I.eZ.error,e,Bt,Kt)}},{sessionID:We==null?void 0:We.sessionID,roomID:We==null?void 0:We.roomID,roomSessionID:We==null?void 0:We.roomSessionID});[2001,2002].includes(t)&&(this.room.streamInfoList[e]={seq:Ke}),(0,he.EK)(this.an,cl,"cmd: "+t+", roomid: ".concat(We==null?void 0:We.roomID,", stream: ").concat(e))},s.prototype.updateStreamInfo=function(e,t,n,r,o,a){var l=this;if(n===void 0&&(n=""),this.room){var d;(t===2001||t===2002)&&(d=this.cr.createSpan(Z.t0.H,{key:j.B$.event,par:this._s},{key:""},j.ON.event)).setAttributes({stream_update_type:j.ON.stream_update_type(t===2001?"stream added":t===2002?"stream deleted":""),stream_extra_info:j.ON.stream_extra_info(n),stream_id:j.ON.stream_id(e)}),this._updateStreamInfo(e,t,n,function(p,u){[2001,2002].includes(t)&&(d.setAttributes({send_seq:u}),d&&d.end()),r&&r(p,u)},function(p,u){[2001,2002].includes(t)&&(d.setAttributes({send_seq:u}),l.cr.setError(d,p)),o&&o(p,u)},a)}else this.an.warn(cl+" "+he.fT)},s.prototype.handleStreamUpdateRsp=function(e,t,n){var r,o,a,l;if(this.rtm.isDisConnect())this.an.warn("zb.sh.hsur not login");else if(e.body.err_code==0){this.an.info("zb.sh.hsur stream seq "+this.ea+" server seq "+e.body.stream_seq);var d=this.room;if(d){!((r=e==null?void 0:e.body)===null||r===void 0)&&r.token_remain_time&&(this.pn.getRoomByRoomID((o=e==null?void 0:e.header)===null||o===void 0?void 0:o.room_id)?this.rtm.resetRoomTokenTimer(e.header.room_id,e.body.token_remain_time):this.an.error("zb.sh.hsur room no found ignore "+JSON.stringify((a=e.header)===null||a===void 0?void 0:a.room_id))),this.handleStreamSync(e,t,n);var p=d.streamInfoList[t],u=(l=e.header)===null||l===void 0?void 0:l.seq;p&&p.seq===u?delete d.streamInfoList[t]:this.an.info("zb.sh.hsur ".concat(JSON.stringify(t)," udp stream info; rsp seq: ").concat(u,", cur seq: ").concat(p==null?void 0:p.seq," "))}else this.an.info("hsur.0 room no found")}else this.an.error("zb.sh.hsur stream update error "+e.body.err_code)},s.prototype.handleStreamSync=function(e,t,n){if(this.handleStreamRsp(this.room,t,{stream_id:t,stream_sid:e.body.stream_sid,stream_ver:e.body.stream_ver,stream_nid:e.body.stream_nid,id_name:this.pn.idName,nick_name:this.pn.nickName},n),e.body.stream_seq>this.ea+1)return this.an.info("zb.sh.hss.1 seq diff server: "+e.body.stream_seq+" client "+this.ea),void this.fetchStreamList();this.ea=e.body.stream_seq;var r=this.room.streamList.find(function(o){return o.stream_id==t});r&&e.body.stream_ver>r.stream_ver&&this.fetchStreamList(t)},s.prototype.handleStreamRsp=function(e,t,n,r){var o=this.pn.publishStreamList[t],a=e.streamList.find(function(d){return d.stream_id==t});if(this.an.info("hsur.0 cmd "+r+" "+!!a),a&&r===2002){var l=e.streamList.findIndex(function(d){return d.stream_id==t});this.an.info("hsur.0 stream index "+l),l>-1&&e.streamList.splice(l,1)}o?(o.state==I.T_.update_info&&(o.state=I.T_.publishing,r!==2001||a||e.streamList.push(n),this.onPublishStateUpdate(I.eZ.start,t,{code:0,message:""})),a&&a.stream_sid!==n.stream_sid&&(this.an.info("hsur.0 update sid. "+t+" origin:"+a.stream_sid+", new:"+n.stream_sid),a.stream_sid=n.stream_sid)):this.an.info("hsur.0 stream is not exist")},s.prototype.handleFetchStreamListRsp=function(e,t){var n,r,o,a,l,d,p="zb.sh.hfslr";if((0,he.rA)(this.an,p,t),this.sa=!1,this.cr.spanEnd({key:hc.event,par:this._s},{stream_seq:hc.stream_seq((n=e.body)===null||n===void 0?void 0:n.stream_seq),stream_size:hc.stream_size((o=(r=e.body)===null||r===void 0?void 0:r.stream_info)===null||o===void 0?void 0:o.length),stream_list:hc.stream_list((a=e.body)===null||a===void 0?void 0:a.stream_info),error:((l=e==null?void 0:e.body)===null||l===void 0?void 0:l.err_code)||(e==null?void 0:e.code),message:((d=e==null?void 0:e.body)===null||d===void 0?void 0:d.err_message)||(e==null?void 0:e.msg)}),e.body.err_code===0)if(this.ea!==e.body.stream_seq){if(this.ea>e.body.stream_seq)return this.an.error(p+" less seq"),void this.fetchStreamList(t);if(this.ra>e.body.stream_seq)this.an.info(p+" less than max fetch stream seq ");else{var u=e.body.stream_info;t&&(u=e.body.stream_info.filter(function(v){return v.stream_id===t})),this.handleFullUpdateStream(e.body.stream_seq,u),(0,he.EK)(this.an,p)}}else this.an.info(p+" same seq");else this.an.info(p+" server error="+e.body.err_code)},s.prototype.syncPublishStreamList=function(){var e,t="zb.sh.spsl";(0,he.rA)(this.an,t);var n=function(a){var l=r.pn.publishStreamList[a];if(l.state===I.T_.publishing){var d=r.room.streamList.findIndex(function(u){return u.stream_id===a});if(l.roomID===r.room.roomID&&d===-1){var p=void 0;!((e=r.gn.publisherList[a])===null||e===void 0)&&e.publisher&&(p=r.gn.publisherList[a].publisher.getStreamAddOptions()),l.state=I.T_.update_info,r.updateStreamInfo(a,I.NP.liveBegin,l.extra_info,function(u){},void 0,p)}}},r=this;for(var o in this.pn.publishStreamList)n(o);(0,he.EK)(this.an,t)},s.prototype.handleFullUpdateStream=function(e,t,n){var r=this;n===void 0&&(n=!1);var o="zb.sh.hfus";(0,he.rA)(this.an,o),this.ea=e,this.ra<e&&(this.ra=e),this.an.debug(o+" server seq "+this.ea),t=t.filter(function(a){return a.stream_type!==1}),this.pn.mergeStreamList(this.pn.idName,this.room.streamList,t,function(a,l,d,p){a.length!==0&&(r.an.debug(o+" callback addstream"),r.onStreamUpdated(r._s,1,r.makeCallbackStreamList(a))),l.length!==0&&(r.an.debug(o+" callback delstream"),r.onStreamUpdated(r._s,0,r.makeCallbackStreamList(l))),d.length!==0&&(r.an.debug(o+" callback updatestream"),r.onStreamExtraInfoUpdated(r._s,r.makeCallbackStreamList(d))),p.length!==0&&(r.an.warn(o+" callback updateAttrstream"),r.onStreamAttrUpdated(r._s,r.makeCallbackStreamList(p)))}),n||this.syncPublishStreamList(),(0,he.EK)(this.an,o)},s.prototype.handlePushStreamUpdateMsg=function(e){var t="zb.sh.hpsum";(0,he.rA)(this.an,t,JSON.stringify(e));var n=e.body.stream_info;if(n&&n.length!==0){if(n=n.filter(function(r){return r.stream_type!==1}),this.ea+1!==e.body.stream_seq)return(0,he.rA)(this.an,t,"updatestream 1"),void this.fetchStreamList();if(e.body.stream_seq<this.ra)return(0,he.rA)(this.an,t,"updatestream 2"),void this.fetchStreamList();switch(this.ea=e.body.stream_seq,e.body.stream_cmd){case I.EN.added:this.ca(n);break;case I.EN.deleted:this.ha(n);break;case I.EN.updated:this._handleUpdatedStreamList(n)}(0,he.EK)(this.an,t)}else this.an.info(t+", emtpy list")},s.prototype.ca=function(e){var t="zb.sh.hasl";(0,he.rA)(this.an,t);for(var n,r=[],o=0;o<e.length;o++)if(e[o].anchor_id_name!=this.pn.idName&&e[o].id_name!=this.pn.idName&&e[o].user_id!==this.pn.idName){n=!1;for(var a=0;a<this.room.streamList.length;a++)if(e[o].stream_id===this.room.streamList[a].stream_id){n=!0;break}n||r.push(e[o])}else this.an.debug("hdsl.0 have self stream added");if(r.length!==0){this.an.debug(t+" callback addstream");for(var l=0;l<r.length;l++){this.room.streamList.push(r[l]);var d=this.gn.playerList[r[l].stream_id];d==null||d.setStreamAdd()}this.onStreamUpdated(this._s,1,this.makeCallbackStreamList(r))}(0,he.EK)(this.an,t)},s.prototype.ha=function(e){var t="zb.sh.hdsl";(0,he.rA)(this.an,t);for(var n=[],r=0;r<e.length;r++)if(e[r].anchor_id_name!=this.pn.idName&&e[r].id_name!=this.pn.idName&&e[r].user_id!==this.pn.idName){for(var o=this.room.streamList.length-1;o>=0;o--)if(e[r].stream_id===this.room.streamList[o].stream_id){this.room.streamList.splice(o--,1),n.push(e[r]);break}}else this.an.debug(t+" have self stream deleted");n.length!==0&&(this.an.debug(t+" callback delstream"),this.onStreamUpdated(this._s,0,this.makeCallbackStreamList(n))),(0,he.OY)(this.an,t)},s.prototype._handleUpdatedStreamList=function(e){var t="zb.sh.husl";(0,he.rA)(this.an,t);for(var n=[],r=[],o=0;o<e.length;o++)if(e[o].anchor_id_name!=this.pn.idName&&e[o].id_name!=this.pn.idName&&e[o].user_id!==this.pn.idName){for(var a=0;a<this.room.streamList.length;a++)if(e[o].stream_id===this.room.streamList[a].stream_id){e[o].extra_info!==this.room.streamList[a].extra_info&&(this.room.streamList[a]=e[o],n.push(e[o])),e[o].stream_attr_opts&&JSON.stringify(e[o].stream_attr_opts)!==JSON.stringify(this.room.streamList[a].stream_attr_opts)&&(this.room.streamList[a]=e[o],r.push(e[o]));break}}else this.an.debug("hsul.0 have self stream updated");n.length!==0&&(this.an.debug(t+" callback updatestream"),this.onStreamExtraInfoUpdated(this._s,this.makeCallbackStreamList(n))),r.length!==0&&(this.an.warn(t+" callback updateAttrStream"),this.onStreamAttrUpdated(this._s,this.makeCallbackStreamList(r))),(0,he.EK)(this.an,t)},s.prototype.fetchStreamList=function(e){var t,n,r,o=this,a="zb.sh.fsl";(0,he.rA)(this.an,a);var l=this.cr.createSpan(Z.t0.H,{key:j.B$.event,par:this._s},{key:hc.event,par:this._s},hc.event,!0);return this.rtm.isDisConnect()?(this.an.info(a+" state error"),void this.cr.setError(l,hc.error.NOT_LOGIN)):this.sa?(this.an.info(a+" already doing"),void this.cr.setError(l,hc.error.wn," already doing")):(this.sa=!0,this.an.info(a+" send fetch request"),this.rtm.liveRoomHandler.getStreamList({},function(d){o.handleFetchStreamListRsp(d,e)},function(d){},{roomID:(t=this.room)===null||t===void 0?void 0:t.roomID,sessionID:(n=this.room)===null||n===void 0?void 0:n.sessionID,roomSessionID:(r=this.room)===null||r===void 0?void 0:r.roomSessionID}),void(0,he.EK)(this.an,a))},s.prototype._handleReconnectStream=function(e){var t,n,r,o,a,l,d,p="zb.sh.hrs";(0,he.rA)(this.an,p);var u=this.gn.publisherList;this.an.info(p+" publish "+Object.keys(this.gn.publisherList));var v=function(te){if(((n=(t=u[te])===null||t===void 0?void 0:t.room)===null||n===void 0?void 0:n.roomID)!==x._s)return"continue";var le=e.find(function(et){return et.stream_id==te}),se=le&&!(le.anchor_id_name===x.pn.idName||le.id_name===x.pn.idName||le.user_id===x.pn.idName);if(x.an.info("zb.sh.hrs stream ".concat(te," ").concat(!!le," ").concat(se," ").concat((r=u[te].publisher)===null||r===void 0?void 0:r.state)),((o=u[te].publisher)===null||o===void 0?void 0:o.state)!=6&&u[te].state!==1||le&&!se){if((((a=u[te].publisher)===null||a===void 0?void 0:a.state)==7||u[te].state===2)&&!(!((d=(l=u[te])===null||l===void 0?void 0:l.retryStreamHandler)===null||d===void 0)&&d.maxTimer)&&e.find(function(et){return et.stream_id==te})){x.updateStreamInfo(te,Ke=I.NP.liveEnd);for(var We=0;We<x.room.streamList.length;We++)if(x.room.streamList[We].stream_id==te){x.room.streamList.splice(We--,1);break}}}else{var Ke=I.NP.liveBegin,Ze=void 0;u[te].publisher&&(Ze=u[te].publisher.getStreamAddOptions()),x.updateStreamInfo(te,Ke,x.pn.publishStreamList[te].extra_info,void 0,void 0,Ze)}},x=this;for(var U in u)v(U);(0,he.OY)(this.an,p)},s.prototype.makeCallbackStreamList=function(e){var t,n=[];if(this.pn.appConfig&&(t=this.pn.appConfig.media_config.play_config.resource_info.filter(function(se){return[I.NI.CDN,I.NI.DG].includes(se.resource_type)})),e&&e.length>0)for(var r=0;r<e.length;r++){var o=e[r].stream_id;if(t&&t.length)for(var a=0;a<t.length;a++){for(var l=t[a].resource_type==I.NI.DG?"_plus":"",d=[],p=[],u=[],v=0;v<t[a].service_info.length;v++){var x=t[a].service_info[v],U=x.protocol,te=x.url_template.replace("{STREAM_NAME}",o);switch(U){case I.Hb.FLV:d.push(te);break;case I.Hb.HLS:p.push(te);break;case I.Hb.RTMP:u.push(te)}}e[r]["urls_flv"+l]=d,e[r]["urls_m3u8"+l]=p,e[r]["urls_rtmp"+l]=u}var le={user:{userID:e[r].anchor_id_name||e[r].id_name,userName:e[r].anchor_nick_name||e[r].nick_name},extraInfo:e[r].extra_info,streamID:e[r].stream_id,roomID:"",urlFlv:"",urlFlvPlus:"",urlRtmp:"",urlHls:"",urlHlsPlus:"",urlHttpsFlv:"",urlHttpsHls:"",streamGID:e[r].stream_gid,closeType:e[r].close_type,stream_attr_opts:e[r].stream_attr_opts};this._setCDNInfo(le,e[r]),n.push(le)}return n},s.prototype.sendHttpPBRequest=function(e,t,n,r,o){var a,l;(a=this.rtm.netAgent)===null||a===void 0||a.startHttpRequest2({interfaceID:e.interfaceID,resID:e.resID||"",body:t,ack:!1,idName:this.pn.idName,method:2,token:((l=this.room)===null||l===void 0?void 0:l.token)||"",mode:this.pn.testEnvironment?2:1,reduceRspHeaders:!0},function(d,p){n&&n(d,p)},function(d){r&&r(d)},null,{timeout:(o==null?void 0:o.timeout)||4e3,extras:{protoCmd:e.protoCmd}})},s.prototype.sendMixRequest=function(e,t,n,r,o){var a=this;o===void 0&&(o=2);var l=function(d,p){var u=d.status_code,v=d.body,x=d.code,U=d.message;return(0,B.TE)(x)||x===0?u&&u!==200?(o--,void(u===502&&o>0?a.sendMixRequest(e,t,n,r,o):r&&r(u,v))):void(n&&n(v,p)):x===Ft.Q9p.code&&o>0?(o--,void a.sendMixRequest(e,t,n,r,o)):void(r&&r(-1,{},{code:x,message:U}))};this.sendHttpPBRequest(e,t,function(d,p){l(d,p)},function(d){l(d)})},s.prototype.sendRTMPRequest=function(e,t,n,r){var o=this.rtm.netAgent,a=this.pn.appid,l=t.streamID,d="/v1/jsrtmp/dispatch/".concat(e,"/").concat(l,"/").concat(t.actionType,"/").concat(o.clientIP),p=this.room;o.startHttpRequest({service:1,headers:[{name:"Token-Appid",val:a+""},{name:"Token-Str",val:(p==null?void 0:p.token)||""},{name:"Token-Userid",val:this.pn.idName},{name:"Token-Biztype",val:"2"},{name:"Net-Mode",val:this.pn.netMode+""}],body:{},idName:this.pn.idName,method_no:1,ack:!1,location:d},function(u){n(u)},function(u,v,x){r(u)})},s.prototype._publishTarget=function(e,t,n){},s.prototype.updateStreamExtraInfo=function(e,t,n,r){(0,he.rA)(this.an,"zb.sh.usei");var o=I.NP.liveUpdate;this.pn.publishStreamList[e]&&this.pn.publishStreamList[e].state>=I.T_.update_info?(this.pn.publishStreamList[e].extra_info=t,this.updateStreamInfo(e,o,t,n,r)):this.pn.publishStreamList[e]&&this.pn.publishStreamList[e].state===I.T_.tryPublish?(this.pn.publishStreamList[e].extra_info=t,n({errorCode:0})):r(j.Fv.error.Ke)},s.prototype.getMixStreamStatus=function(e){},s.prototype.setStreamExtraInfo=function(e,t,n,r){this.updateStreamExtraInfo(e,t,n,r)},s.prototype._publishTargetWeb=function(e,t,n){},s.prototype.patchStreamList=function(e){var t=this;if((0,B.Cs)(e.body.stream_refresh)&&e.body.stream_refresh!==0)return this.an.info(Ce.mMR+" stream refresh "),void this.fetchStreamList();this.an.info(Ce.mMR+" stream seq "+this.ea+" "+JSON.stringify(this.oa)),e.body.stream_seq>this.ea&&!this.oa&&(this.oa={},(0,he.rA)(this.an,Ce.mMR,"update stream "+this.ea+" server "+e.body.stream_seq),this.fa&&clearTimeout(this.fa),this.fa=setTimeout(function(){t.handleMergeTimeout()},this.ua)),this.na=e.body.stream_seq},s.prototype.getStreamSeq=function(){return this.ea},s.prototype.mergeStreamByStreamSeq=function(e,t,n){var r=this;this.oa||(this.an.warn(Ce.wT7+" new merge stream list "+this.ea+" server "+t),this.oa={},this.fa&&clearTimeout(this.fa),this.fa=setTimeout(function(){r.handleMergeTimeout()},this.aa)),this.an.info(Ce.wT7+" ".concat(this.oa," ").concat(e," ").concat(t," ").concat(n)),this.oa[t]={cmd:e,streamList:n}},s.prototype.handleMergeTimeout=function(){if(this.oa){var e=Object.keys(this.oa).map(function(t){return+t}).sort(function(t,n){return t-n});e[e.length-1]-e[0]+1===e.length||e[e.length-1]>=this.na?this.mergeStream(e):(this.oa=null,this.fetchStreamList())}},s.prototype.mergeStream=function(e){var t=this;this.an.info(Ce.TlX+" merge streamList "+this.ea+" streamSeqList "+e.join(","));var n=e[e.length-1],r=[];e.forEach(function(o){if(t.oa&&t.oa[o])switch(t.oa[o].cmd){case I.EN.added:t.oa[o].streamList.forEach(function(a){var l=r.findIndex(function(d){return d.stream_id==a.stream_id});l!==-1&&r.splice(l),r.push(a)});break;case I.EN.deleted:t.oa[o].streamList.forEach(function(a){var l=r.findIndex(function(d){return d.stream_id==a.stream_id});l!==-1&&r.splice(l)});break;case I.EN.updated:t.oa[o].streamList.forEach(function(a){var l=r.findIndex(function(d){return d.stream_id==a.stream_id});l!==-1&&r.splice(l),r.push(a)})}}),this.oa=null,this.an.info(Ce.TlX+" "+r),this.handleFullUpdateStream(n,r)},s.prototype.reset=function(){this.na=0,this.oa=null,this.mixStreamTaskList={},this.mixRequestIdList=[],this.mixStreamHbList={},this.fa&&(clearTimeout(this.fa),this.fa=void 0),this.ua=2e3,this.aa=5e3},s})(),gf=(function(){function s(){this.handlerListMap={}}return s.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),!(0,B.JO)(t))throw new Error("Params callBack is not a Function");return this.handlerListMap[e].indexOf(t)==-1&&this.handlerListMap[e].push(t),!0},s.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter(function(n){return n!==t}):[],!0)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.handlerListMap[e]&&this.handlerListMap[e].forEach(function(r){try{r.apply(void 0,t)}catch(o){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(o))}})},s})(),ul=gf,Gl="zg_autoplay_wrapper";function Ch(){return navigator.language.includes("zh")}var vf=(function(){function s(){this.content='Media play failed. Click the "Resume"to resume.',this.la=null;var e=document.createElement("style");e.type="text/css";var t=".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block!important}.".concat(Gl,"{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px#988e8d;border:1px solid#d1cfcf;max-width:500px}.").concat(Gl,"a{color:#2473E8}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600}.zg_autoplay_content{margin:8px 0}.zg_autoplay_action_wrapper{width:100%;display:flex!important;align-items:center;justify-content:right;float:right}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold}.zg_autoplay_action_confirm:hover{opacity:0.9}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px}@media screen and(max-width:750px){.").concat(Gl,"{width:80vw}}");e.appendChild(document.createTextNode(t)),he.VJ.head.appendChild(e),Ch()&&(this.content=""),this.da=new ul}return s.getInstance=function(){return s.instance||(s.instance=new s),s.instance},s.prototype.createDialog=function(){var e=he.VJ.createElement("template"),t=he.VJ.createElement("div");t.className="zg_autoplay_mask";var n=he.VJ.createElement("div");n.className=Gl;var r=he.VJ.createElement("div");r.className="zg_autoplay_header",r.textContent=location.host;var o=he.VJ.createElement("div");o.className="zg_autoplay_content",o.textContent=this.content;var a=he.VJ.createElement("div");a.className="zg_autoplay_action_wrapper",n.appendChild(r),n.appendChild(o),n.appendChild(a),t.appendChild(n),e.content.appendChild(t);var l=he.VJ.createElement("button");l.className="zg_autoplay_action_confirm",l.innerText=Ch()?"":"Resume",l.onclick=this.onConfirm.bind(this);var d=e.content.firstChild;return a&&a.appendChild(l),d},s.prototype.onConfirm=function(e){e&&e.stopPropagation(),this.da.emit("allowPlay"),this.deleteDiaLog()},s.prototype.deleteDiaLog=function(){this.la&&(he.VJ.body.removeChild(this.la),this.la=null)},s.prototype.addDiaLog=function(){this.la=this.la||this.createDialog(),he.VJ.body.appendChild(this.la),this.la.onclick=this.onConfirm.bind(this)},s.prototype.on=function(e,t){return this.da.addEventHandler(e,t)},s.prototype.off=function(e,t){return this.da.removeEventHandler(e,t)},s.instance=null,s})(),Ql=(function(){function s(e,t){this.an=e,this.va=t}return s.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.an.info(e.join(""),{streamid:this.va})},s.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.an.warn(e.join(""),{streamid:this.va})},s.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.an.error(e.join(""),{streamid:this.va})},s.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.an.debug(e.join(""),{streamid:this.va})},s})();function Oi(s,e){return new Ql(s,e)}var za,yf=ye(5794),ja=function(){return ja=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},ja.apply(this,arguments)},fc=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Uc=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Rh=(0,or.$t)(),fu=/^(?=.*MicroMessenger)(?=.*HONOR).*$/.test(Rh||""),Id=vf.getInstance(),ll=(function(){function s(e,t,n){var r=this;this.previewer=t,this.ma=null,this.pa=null,this.inited=!1,this.container=null,this.ga=null,this.eu={enableVideoAutoplayDialog:!0,enableAudioAutoplayDialog:!0,clearLastFrame:!0,useAudioElement:!0},this.ba=(0,he.sg)(function(v,x,U){r._a.emit("autoplayFailed",x,U),(v?r.eu.enableVideoAutoplayDialog:r.eu.enableAudioAutoplayDialog)?Id.addDiaLog():he.VJ.body.addEventListener("mousedown",r.ou.resumePlayByClickBody),r.ya.warn("zc.zsv id:".concat(r.id," autoplay failed"))},600),this.wa=!1,this.Sa=!1,this.Ea=(0,he.sg)(function(){var v=Array.from(he.VJ.getElementsByTagName("video")),x=Array.from(he.VJ.getElementsByTagName("audio")),U=v.some(function(le){return!le.id||!le.id.startsWith("zg-rtc-video_")}),te=x.some(function(le){return!le.id||!le.id.startsWith("zg-rtc-audio_")});(U||te)&&(0,yf.r)()},300),this.ka=(0,he.sg)(this.Oa,20),this.ou={visibilitychange:function(){var v;he.VJ.hidden||r.Sa||!(0,or.Fr)()||(r.ya.info("zc.zsv id: ".concat(r.id," page show, recover audio")),r.eu.useAudioElement&&r.pa?r.pa.srcObject=r.pa.srcObject:(r.ya.info("zc.ac.rs id: ".concat(r.id," page show")),r.ac.resume()),r.ka(r.pa,!0)),he.VJ.hidden||r.wa||!(0,or.Fr)()||!((v=r.ma)===null||v===void 0)&&v.paused&&(r.ya.info("zc.zsv id: ".concat(r.id," page show, recover video")),r.Oa(r.ma,!0))},focus:function(v){r.Sa||((0,or.aR)()&&(0,or.UN)().startsWith("16")||(0,or.HR)())&&(r.ya.info("zc.zsv id: ".concat(r.id," page focus, recover audio")),r.ka(r.pa,!0))},canPlayAudio:function(v){r._a.emit("canPlayAudio",v)},canPlayVideo:function(v){r._a.emit("canPlayVideo",v)},resumePlayByClickBody:function(){return fc(r,void 0,void 0,function(){return Uc(this,function(v){switch(v.label){case 0:return this.ya.info("zc.zsv id:".concat(this.id," resume by click dom_body")),[4,this.resume()];case 1:return v.sent(),he.VJ.body.removeEventListener("mousedown",this.ou.resumePlayByClickBody),[2]}})})}},this.inited=!0,this.eu=ja(ja({},this.eu),n);var o=this.id="".concat(e.id);this.ya=Oi(this.an,(t==null?void 0:t.streamId)||""||void 0),this.ya.info("zc.sv.c id:".concat(o,"  isLocal: ").concat(this.isLocal));var a=he.VJ.createElement("div");a.id="zg-rtc-player_".concat(o),a.setAttribute("style","width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");var l=e.getVideoTracks()[0],d=e.getAudioTracks()[0],p=(0,he.sb)(void 0,void 0,this.browser!=="safari");p.id="zg-rtc-video_".concat(o),p.setAttribute("style","width:100%;height:100%;object-fit:contain;"),p.srcObject=new MediaStream,p.addEventListener("canplay",this.ou.canPlayVideo),l&&p.srcObject.addTrack(l);var u=he.VJ.createElement("audio");u.id="zg-rtc-audio_".concat(o),u.setAttribute("autoplay",""),u.setAttribute("playsinline",""),u.muted=!0,u.srcObject=this.Ia=new MediaStream,u.addEventListener("canplay",this.ou.canPlayAudio),d&&u.srcObject.addTrack(d),typeof WeixinJSBridge=="object"&&typeof WeixinJSBridge.invoke=="function"&&WeixinJSBridge.invoke("getNetworkType",{},function(){r.ya.info("zc.zsv id:".concat(r.id," weixin load media")),u.load(),p.load()}),this.Ra=a,this.ma=p,this.pa=u,this._a=new ul,this.Ta=function(){r.resume()},Id.on("allowPlay",this.Ta),window.addEventListener("focus",this.ou.focus),he.VJ.addEventListener("visibilitychange",this.ou.visibilitychange)}return Object.defineProperty(s.prototype,"video",{get:function(){return this.ma},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"audio",{get:function(){return this.pa},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ac",{get:function(){return this.previewer.ac},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"browser",{get:function(){return this.previewer.pn.browser},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"an",{get:function(){return this.previewer.logger},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isLocal",{get:function(){return this.previewer instanceof qc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_isMounted",{get:function(){return!!this.Ra.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_hasAudio",{get:function(){var e,t;return((t=(e=this.Ia)===null||e===void 0?void 0:e.getTracks()[0])===null||t===void 0?void 0:t.readyState)==="live"&&!this.Sa},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_hasVideo",{get:function(){var e,t,n;return!!(!((e=this.ma)===null||e===void 0)&&e.parentNode)&&((n=(t=this.ma.srcObject)===null||t===void 0?void 0:t.getTracks()[0])===null||n===void 0?void 0:n.readyState)==="live"},enumerable:!1,configurable:!0}),s.prototype.resume=function(e,t){return t===void 0&&(t=["audio","video"]),fc(this,void 0,void 0,function(){var n=this;return Uc(this,function(r){return this.ya.info("zc.zsv resume call: ".concat(e,", kindList: ").concat(t,", id:").concat(this.id,", isLocal: ").concat(this.isLocal)),t.forEach(function(o){return fc(n,void 0,void 0,function(){var a,l,d=this;return Uc(this,function(p){switch(p.label){case 0:return l=o==="audio"?this.pa:this.ma,((a=o==="audio")?this._hasAudio:this._hasVideo)?!a||this.eu.useAudioElement?[3,1]:(this.ya.info("zc.zsv resume id:".concat(this.id," ac: ")+this.ac.state),this.ac.resume(),[3,4]):[3,4];case 1:return e&&l?(l.srcObject=l.srcObject,[4,new he.l3(function(u){var v=setTimeout(function(){d.ya.info("zc.zsv id:".concat(d.id," resume play ").concat(a?"audio":"video"," timeout")),u(0)},1e3),x=function(){clearTimeout(v),l.removeEventListener("canplay",x),u(0)};l.addEventListener("canplay",x)})]):[3,3];case 2:p.sent(),p.label=3;case 3:l==null||l.play().catch(function(u){d.ya.info("zc.zsv id:".concat(d.id," resume failed. err:")+u.message)}),p.label=4;case 4:return[2]}})})}),[2]})})},s.prototype.checkIfClearLastFrame=function(){return fc(this,void 0,void 0,function(){return Uc(this,function(e){switch(e.label){case 0:return this.eu.clearLastFrame?[4,this.resume(!0,["video"])]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},s.prototype.play=function(e,t){t===void 0&&(t={}),this.ya.info("zc.zsv play: ".concat(typeof e,", ").concat(JSON.stringify(t),", id:").concat(this.id," isLocal:").concat(this.isLocal?"1":"0 streamid:"+this.previewer.streamId,","));var n=(t=ja({},t)).enableAutoplayDialog;(0,B.dd)(n)&&(t.enableVideoAutoplayDialog=n,t.enableAudioAutoplayDialog=n,delete t.enableAutoplayDialog),this.playVideo(e,t),this.playAudio(t,!this.isLocal)},s.prototype.playVideo=function(e,t){t===void 0&&(t={}),this.ya.info("zc.zsv.pv id:".concat(this.id," play: ").concat(typeof e,", ").concat(JSON.stringify(t)," isLocal:").concat(this.isLocal));var n=null;if((0,B.QP)(e)?n=he.VJ.getElementById(e):(0,B.qi)(e)&&(n=e),!n)throw this.ya.error("zc.zsv.pv id:".concat(this.id," no element isLocal:").concat(this.isLocal)),"Execute `play` failed, container not exist";t&&"enableAutoplayDialog"in t&&(t.enableVideoAutoplayDialog=t.enableAutoplayDialog,delete t.enableAutoplayDialog),this.eu=ja(ja({},this.eu),t);var r=this.eu,o=r.objectFit,a=r.mirror;this.ma&&(o!==void 0&&(this.ma.style.objectFit=o),(0,B.dd)(a)&&(this.ma.style.transform=a?"rotateY(180deg)":"")),!n.contains(this.Ra)&&n.appendChild(this.Ra),this.container=n,this.wa=!1,this.Oa(this.ma,!0)},s.prototype.playAudio=function(e,t){t===void 0&&(t=!0),this.ya.info("zc.zsv.pa id:".concat(this.id," play: ").concat(JSON.stringify(e)," isLocal:").concat(this.isLocal)),e&&"enableAutoplayDialog"in e&&(e.enableAudioAutoplayDialog=e.enableAutoplayDialog,delete e.enableAutoplayDialog),this.eu=ja(ja({},this.eu),e);var n=!0;if(this.browser==="safari"){var r=Rh.match(/Version\/([\d\.]+)/);r&&(r[1]!=="13.1.2"||this.eu.useAudioElement||(n=!1))}n||(this.ya.warn("zc.zsv.pa id:".concat(this.id," safari 13.1.2 cannot use audio ctx render.")),this.eu.useAudioElement=!0);var o=t,a=this.eu.muted;this.pa&&(0,B.dd)(a)&&(o=!a),this.Sa=!o,this.Oa(this.pa,o)},s.prototype.stop=function(){this.ya.info("zc.zsv stop id:".concat(this.id," isLocal:").concat(this.isLocal)),this.stopAudio(),this.stopVideo()},s.prototype.stopAudio=function(){this.ya.info("zc.zsv.sa stop id:".concat(this.id," isLocal:").concat(this.isLocal)),this.Sa=!0,this.Oa(this.pa,!1)},s.prototype.stopVideo=function(){var e;this.ya.info("zc.zsv.sv stop id:".concat(this.id," isLocal:").concat(this.isLocal)),this.Oa(this.ma,!1);var t=(e=this.Ra)===null||e===void 0?void 0:e.parentNode;t&&t.removeChild(this.Ra)},s.prototype.setVideo=function(e,t){return t===void 0&&(t=!1),fc(this,void 0,void 0,function(){return Uc(this,function(n){switch(n.label){case 0:return[4,this.setTrack(!0,e,t)];case 1:return n.sent(),[2]}})})},s.prototype.setAudio=function(e,t){return t===void 0&&(t=!1),fc(this,void 0,void 0,function(){return Uc(this,function(n){switch(n.label){case 0:return[4,this.setTrack(!1,e,t)];case 1:return n.sent(),[2]}})})},s.prototype.setTrack=function(e,t,n){return n===void 0&&(n=!1),fc(this,void 0,void 0,function(){var r,o,a;return Uc(this,function(l){switch(l.label){case 0:return this.ya.info("zc.zsv set id:".concat(this.id," track: ").concat(e,", ").concat(t==null?void 0:t.id,", ").concat(n,", ").concat(t==null?void 0:t.readyState," isLocal:").concat(this.isLocal)),(r=e?this.ma:this.pa)?(o=r.srcObject)?t?[3,1]:((a=o.getTracks()).forEach(function(d){o==null||o.removeTrack(d),r.srcObject=r.srcObject}),this._a.emit("_trackChange",e?"video":"audio"),[3,5]):[2]:[2];case 1:if(!(t instanceof MediaStreamTrack))return[3,5];if((a=o.getTracks()).includes(t))return[3,5];if(a.forEach(function(d){o==null||o.removeTrack(d)}),o.addTrack(t),this.eu.useAudioElement||this.Ca(!0),this._a.emit("_trackChange",t.kind,t),this.Oa(r,!(e?this.wa:this.Sa)),!n)return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,this.resume(!0,[e?"video":"audio"])];case 3:return l.sent(),[3,5];case 4:return l.sent(),[3,5];case 5:return[2]}})})},s.prototype.setMirror=function(e){var t=this.eu.mirror=!!e;this.ma&&(this.ma.style.transform=t?"rotateY(180deg)":"")},s.prototype.setVideoMuted=function(e){return this.ya.info("zc.zsv id:".concat(this.id," mute video: ").concat(e," isLocal:").concat(this.isLocal)),this.wa=e,this.Oa(this.ma,!e)},s.prototype.setAudioMuted=function(e){return this.ya.info("zc.zsv id:".concat(this.id," mute audio: ").concat(e," isLocal:").concat(this.isLocal)),this.Sa=e,this.Oa(this.pa,!e)},s.prototype.setVolume=function(e){if(this.ya.info("zc.zsv id:".concat(this.id," volume: ").concat(e," isLocal:").concat(this.isLocal)),this.pa){var t=e>100?1:e/100;return this.pa.volume=t,this.Aa&&(this.Aa.gain.value=t),this.pa.volume==t}return!1},s.prototype.takeStreamSnapshot=function(e){var t=this.ma;if(!t||!t.srcObject)return"";var n=(0,he.FP)(this.ma.videoWidth,this.ma.videoHeight),r=n.getContext("2d");r&&r.drawImage(this.ma,0,0,n.width,n.height);var o=n.toDataURL("image/"+(e==null?void 0:e.imageType)||0,e==null?void 0:e.quality),a="png";return e!=null&&e.imageType&&(a=["png","jpeg"].includes(e==null?void 0:e.imageType)?e==null?void 0:e.imageType:"png"),e!=null&&e.save&&n.toBlob(function(l){var d=window.URL.createObjectURL(l),p=he.VJ.createElement("a");p.style.display="none",p.href=d;var u=(e==null?void 0:e.fileName)||"snapshot"+Date.now();p.download=u+"."+a,he.VJ.body.appendChild(p),p.click(),setTimeout(function(){he.VJ.body.removeChild(p),window.URL.revokeObjectURL(d)},100)}),o},s.prototype.getVideoHeight=function(){return this.ma?this.ma.videoHeight:0},s.prototype.getVideoWidth=function(){return this.ma?this.ma.videoWidth:0},s.prototype.Ca=function(e){if(e===void 0&&(e=!1),this.ga?e&&(this.ga.disconnect(),this.ga=this.ac.createMediaStreamSource(this.Ia)):this.ga=this.ac.createMediaStreamSource(this.Ia),!this.Aa){var t=this.Aa=this.ac.createGain();this.pa&&(t.gain.value=this.pa.volume)}return this.ga.connect(this.Aa),{gainNode:this.Aa,srcNode:this.ga}},s.prototype.Oa=function(e,t,n){var r,o,a=this;if(n===void 0&&(n=0),!e||!this.Ra)return!1;var l=!this.eu.useAudioElement,d=e.tagName==="VIDEO";if(this.ya.info("zc.zsv id:".concat(this.id," mount play ").concat(e.tagName)),t){if(!d&&l){e.muted=!0,e.pause(),e.remove(),this.Ca().gainNode.connect(this.ac.destination);var p="running";this.ya.info("zc.zsv id:".concat(this.id," render use audio context: ")+this.ac.state),this.ac.state!==p&&this.ac.resume().then(function(){a.ac.state!==p&&a.ba(d,e)})}else if(((o=(r=e==null?void 0:e.srcObject)===null||r===void 0?void 0:r.getTracks()[0])===null||o===void 0?void 0:o.readyState)==="live"){var u=null,v=function(){e.oncanplay=null,u&&(clearTimeout(u),u=null),e.play().then(function(){fu&&!d&&(a.ya.info("zc.ac.rs id:".concat(a.id," honor suspend ac")),a.ac.resume()),a.ya.info("zc.zsv id:".concat(a.id," render  ").concat(e.tagName," use element success")),(0,or.HR)()&&a.Ea()}).catch(function(U){a.ya.warn("zc.zsv 2: id:".concat(a.id," ").concat(e.tagName," play() error: ").concat(U.message," isLocal:").concat(a.isLocal));var te=a._hasVideo,le=a._hasAudio;!(U.message||"").includes("interrupted")&&(a._isMounted&&d&&te||!d&&le)&&a.ba(d,e,U)})};e.muted=!0,d||(this.Aa&&this.Aa.disconnect(),e.muted=!1,e.srcObject=e.srcObject),fu&&!d&&(this.ya.info("zc.ac.rs id:".concat(this.id," honor resume ac")),this.ac.suspend()),e.play().catch(function(U){a.ya.warn("zc.zsv 1: id:".concat(a.id," ").concat(e.tagName," play() error: ").concat(U.message," isLocal:").concat(a.isLocal))}),u=window.setTimeout(function(){v()},1e3),e.oncanplay=function(){v()},e.onerror=function(){var U,te,le,se,We=!(d?a.wa:a.Sa);a.ya.error("zc.zsv id:".concat(a.id," ").concat(e.tagName," onerror:  ").concat((U=e.error)===null||U===void 0?void 0:U.code," ").concat((te=e.error)===null||te===void 0?void 0:te.message," ; times: ").concat(n," ; enable: ").concat(We)),We&&e.error&&(n===0&&((le=e.error)===null||le===void 0?void 0:le.code)===3?(a.ya.info("zc.zsv decode failed. retry again"),a.Oa(e,We,n++)):(a.ya.info("zc.zsv not retry on error. ".concat(n," ").concat((se=e.error)===null||se===void 0?void 0:se.code)),a.ba(d,e,e.error)))},!e.parentNode&&d&&this.Ra.appendChild(e)}}else if(e.muted=!0,e.remove(),e.pause(),!d){l&&this.Aa&&this.Aa.disconnect();var x=5*Math.random()+4;setTimeout(function(){!d&&!e.parentNode&&e.readyState>3&&e.load()},1e3*x)}return!0},s.prototype.on=function(e,t){return!!t&&this._a.addEventHandler(e,t)},s.prototype.off=function(e,t){return this._a.removeEventHandler(e,t)},s.prototype.useAudioOut=function(e){var t;return fc(this,void 0,void 0,function(){var n;return Uc(this,function(r){switch(r.label){case 0:return n=(t=this.pa)===null||t===void 0?void 0:t.setSinkId,n?[4,n.call(this.pa,e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},s.prototype.destroy=function(){this.stop();var e=this.ma,t=this.pa;(0,or.HR)()&&(e&&(e.muted=!1,e.pause()),t&&(t.muted=!1,t.pause())),e&&(e.removeEventListener("canplay",this.ou.canPlayVideo),e.srcObject=null,this.ma=null),t&&(t.removeEventListener("canplay",this.ou.canPlayAudio),t.srcObject=null,this.pa=null),window.removeEventListener("focus",this.ou.focus),he.VJ.removeEventListener("visibilitychange",this.ou.visibilitychange),he.VJ.body.removeEventListener("mousedown",this.ou.resumePlayByClickBody),Id.off("allowPlay",this.Ta),this.inited=!1,this.Ta=null},s.prototype.getAudioNodeAndStopRender=function(){var e=this.pa,t=this.eu;e&&(e.muted=!0,e.remove(),e.pause());var n=this.Ca(!0).gainNode;return t.useAudioContext&&n.disconnect(),n},s})(),kd=(function(){function s(e,t){this.source=e,this.destination=t,this.audioNodeList=[],this.source.disconnect(),this.source.connect(this.destination)}return Object.defineProperty(s.prototype,"destinationNode",{get:function(){return this.destination},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[this.audioNodeList.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"secondToLastNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[this.audioNodeList.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.audioNodeList[0]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"secondNode",{get:function(){return this.audioNodeList.length<2?null:this.audioNodeList[1]},enumerable:!1,configurable:!0}),s.prototype.pushBack=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e),e.connect(this.destination)):(this.source.disconnect(),this.source.connect(e),e.connect(this.destination)),this.audioNodeList.push(e)},s.prototype.popBack=function(){this.lastNode&&(this.lastNode.disconnect(),this.secondToLastNode?(this.secondToLastNode.disconnect(),this.secondToLastNode.connect(this.destination)):(this.source.disconnect(),this.source.connect(this.destination))),this.audioNodeList.pop()},s.prototype.pushFront=function(e){this.source.disconnect(),this.source.connect(e),e.connect(this.firstNode?this.firstNode:this.destination),this.audioNodeList.unshift(e)},s.prototype.popFront=function(){this.source.disconnect(),this.firstNode&&(this.firstNode.disconnect(),this.source.connect(this.secondNode?this.secondNode:this.destination)),this.audioNodeList.shift()},s.prototype.remove=function(e){var t=this.audioNodeList.indexOf(e);if(t!==-1){if(e.disconnect(),t-1>=0){var n=this.audioNodeList[t-1];n.disconnect(),n.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination)}else this.source.disconnect(),this.source.connect(this.lastNode!=e?this.audioNodeList[t+1]:this.destination);this.audioNodeList.splice(t,1)}},s.prototype.isConnected=function(e){return this.audioNodeList.indexOf(e)!==-1},s.prototype.isEmpty=function(){return this.audioNodeList.length===0},s.prototype.replaceSource=function(e){this.source.disconnect(),e.connect(this.firstNode?this.firstNode:this.destination),this.source=e},s.prototype.replaceDestination=function(e){this.lastNode?(this.lastNode.disconnect(),this.lastNode.connect(e)):(this.source.disconnect(),this.source.connect(e)),this.destination=e},s})(),xh=ye(1350),Ad=(function(){function s(){}return s.createError=function(e,t){return{code:e.code,message:e.message+(t?" "+t:"")}},s})(),ap=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),bf=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},_f=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Sf=Ad.createError,Ih=(function(s){function e(t,n){var r=s.call(this)||this;return r.track=t,r.streamCenter=n,r.isFirstNode=!1,r.isLastNode=!1,r}return ap(e,s),Object.defineProperty(e.prototype,"output",{get:function(){return{track:this.track}},enumerable:!1,configurable:!0}),e.prototype.setInput=function(t){return bf(this,void 0,void 0,function(){return _f(this,function(n){throw Sf({code:-1,message:"Can not set track input to VideoSourceNode"})})})},e.prototype.process=function(){},e.prototype.destory=function(){this.track&&(this.streamCenter.trackUtils.stopTrack(this.track),this.track=null),this.next=null},e})(xh.E),pc=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},qa=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Ef=(function(){function s(e,t,n,r,o){this.za=e,this.Da=t,this.gn=n,this.browser=r,this.preview=o,this.Na=[],this._vcMgr=void 0,this.za.connect(this.Da)}return Object.defineProperty(s.prototype,"vcMgr",{get:function(){return this._vcMgr},set:function(e){this._vcMgr||(this._vcMgr=e)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lastNode",{get:function(){return this.isEmpty()?null:this.Na[this.Na.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"secondToLastNode",{get:function(){return this.Na.length<2?null:this.Na[this.Na.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"firstNode",{get:function(){return this.isEmpty()?null:this.Na[0]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"secondNode",{get:function(){return this.Na.length<2?null:this.Na[1]},enumerable:!1,configurable:!0}),s.prototype.pushBack=function(e){return pc(this,void 0,void 0,function(){return qa(this,function(t){switch(t.label){case 0:return this.lastNode?(this.lastNode.setNodePos(void 0,!1),[4,this.lastNode.connect(e)]):[3,3];case 1:return t.sent(),e.setNodePos(!1),[4,e.connect(this.Da)];case 2:return t.sent(),[3,6];case 3:return[4,this.za.connect(e)];case 4:return t.sent(),e.setNodePos(!0),[4,e.connect(this.Da)];case 5:t.sent(),t.label=6;case 6:return this.Na.push(e),[2]}})})},s.prototype.popBack=function(){return pc(this,void 0,void 0,function(){return qa(this,function(e){switch(e.label){case 0:return this.lastNode?[4,this.lastNode.disconnect()]:[3,7];case 1:return e.sent(),this.secondToLastNode?[4,this.secondToLastNode.disconnect()]:[3,4];case 2:return e.sent(),this.secondToLastNode.setNodePos(void 0,!0),[4,this.secondToLastNode.connect(this.Da)];case 3:return e.sent(),[3,7];case 4:return[4,this.za.disconnect()];case 5:return e.sent(),[4,this.za.connect(this.Da)];case 6:e.sent(),e.label=7;case 7:return this.Na.pop(),[2]}})})},s.prototype.pushFront=function(e){return pc(this,void 0,void 0,function(){return qa(this,function(t){switch(t.label){case 0:return[4,this.za.disconnect()];case 1:return t.sent(),this.firstNode&&e.setNodePos(void 0,void 0,!1),[4,this.za.connect(e)];case 2:return t.sent(),this.firstNode?(this.firstNode.setNodePos(!1),e.setNodePos(!0,!1),[4,e.connect(this.firstNode)]):[3,4];case 3:return t.sent(),[3,6];case 4:return e.setNodePos(!0,!0),[4,e.connect(this.Da)];case 5:t.sent(),t.label=6;case 6:return this.Na.unshift(e),[2]}})})},s.prototype.popFront=function(){return pc(this,void 0,void 0,function(){return qa(this,function(e){switch(e.label){case 0:return[4,this.za.disconnect()];case 1:return e.sent(),this.firstNode?[4,this.firstNode.disconnect()]:[3,6];case 2:return e.sent(),this.secondNode?(this.secondNode.setNodePos(!1),[4,this.za.connect(this.secondNode)]):[3,4];case 3:return e.sent(),[3,6];case 4:return[4,this.za.connect(this.Da)];case 5:e.sent(),e.label=6;case 6:return this.Na.shift(),[2]}})})},s.prototype.remove=function(e){return pc(this,void 0,void 0,function(){var t,n,r;return qa(this,function(o){switch(o.label){case 0:return(t=this.Na.indexOf(e))===-1?[3,13]:[4,e.disconnect()];case 1:return o.sent(),n=this.Na[t+1],t-1>=0?[4,(r=this.Na[t-1]).disconnect()]:[3,7];case 2:return o.sent(),this.lastNode==e?[3,4]:(r.setNodePos(void 0,!1),[4,r.connect(n)]);case 3:return o.sent(),[3,6];case 4:return r.setNodePos(void 0,!0),[4,r.connect(this.Da)];case 5:o.sent(),o.label=6;case 6:return[3,12];case 7:return[4,this.za.disconnect()];case 8:return o.sent(),this.lastNode==e?[3,10]:(n.setNodePos(!0),[4,this.za.connect(n)]);case 9:return o.sent(),[3,12];case 10:return[4,this.za.connect(this.Da)];case 11:o.sent(),o.label=12;case 12:this.Na.splice(t,1),o.label=13;case 13:return[2]}})})},s.prototype.isConnected=function(e){return this.Na.indexOf(e)!==-1},s.prototype.isEmpty=function(){return this.Na.length===0},s.prototype.getSourceTrack=function(){var e;return(e=this.za.output)===null||e===void 0?void 0:e.track},s.prototype.getDestinationTrack=function(){var e;return(e=this.Da.output)===null||e===void 0?void 0:e.track},s.prototype.replaceNewSourceByTrack=function(e,t,n){var r,o,a,l;return t===void 0&&(t=!0),pc(this,void 0,void 0,function(){var d;return qa(this,function(p){switch(p.label){case 0:return(((d=this.browser)==="firefox"||d==="safari")&&((r=this.vcMgr)===null||r===void 0?void 0:r.renderTrack)!==null&&e!==null&&((o=this.vcMgr)===null||o===void 0?void 0:o.renderTrack)!==e||d==="safari"&&(n==null?void 0:n.handleTrackType)===ke.changeResolution)&&((a=this.preview.backgroundProcessor)===null||a===void 0||a.pauseRender(!0)),[4,(l=this.vcMgr)===null||l===void 0?void 0:l.checkInit(e,n)];case 1:return p.sent(),[4,this.replaceSource(new Ih(e,this.gn),t)];case 2:return p.sent(),[2]}})})},s.prototype.replaceSource=function(e,t){return t===void 0&&(t=!0),pc(this,void 0,void 0,function(){return qa(this,function(n){switch(n.label){case 0:return this.Da.setReplaceRemote(t),this.firstNode?[4,e.connect(this.firstNode)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,e.connect(this.Da)];case 3:n.sent(),n.label=4;case 4:return this.za=e,this.Da.setReplaceRemote(),[2]}})})},s.prototype.replaceDestination=function(e){return pc(this,void 0,void 0,function(){return qa(this,function(t){switch(t.label){case 0:return this.lastNode?[4,this.lastNode.disconnect()]:[3,3];case 1:return t.sent(),[4,this.lastNode.connect(e)];case 2:return t.sent(),[3,6];case 3:return[4,this.za.disconnect()];case 4:return t.sent(),[4,this.za.connect(e)];case 5:t.sent(),t.label=6;case 6:return this.Da=e,[2]}})})},s.prototype.destroy=function(){for(var e,t=0;t<this.Na.length;t++)this.Na[t].disconnect();this.Na=[],this.Da.destroy(),this.za.destory(),(e=this.vcMgr)===null||e===void 0||e.destroy()},s})(),Tf=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),dl=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Wl=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Pd=Ad.createError,cp=(function(s){function e(t,n){var r=s.call(this)||this;return r.Pa=t,r.browser=n,r.isFirstNode=!1,r.isLastNode=!1,r.track=null,r.Ma=!0,r}return Tf(e,s),e.prototype.setReplaceRemote=function(t){t===void 0&&(t=!0),this.Ma=t},e.prototype.setInput=function(t){return dl(this,void 0,void 0,function(){var n,r,o,a,l=this;return Wl(this,function(d){switch(d.label){case 0:if((t==null?void 0:t.track)==null)return[2];if(!this.Pa.localStream)throw Pd({code:-1,message:"preview haven't been inited."});return this.track=n=t==null?void 0:t.track,this.Pa.localStream.getVideoTracks()[0]===n?[3,4]:(r=this.Pa.localStream,(o=this.Pa.zegoCaptureStream)!=null&&o.stream&&(r=o.stream),a=this.Pa.gn.getPublishList(r),this.Ma&&a.length!==0?[4,he.l3.all(a.map(function(p){return dl(l,void 0,void 0,function(){var u;return Wl(this,function(v){return!((u=p.publisher)===null||u===void 0)&&u.previewer?[2,p.publisher.replacePublishedTrack(n,!0)]:[2]})})}))]:[3,2]);case 1:return d.sent(),[3,4];case 2:return[4,this.Pa.replacePreviewTrack(n,!0)];case 3:d.sent(),d.label=4;case 4:return[2]}})})},Object.defineProperty(e.prototype,"output",{get:function(){return{track:this.track}},enumerable:!1,configurable:!0}),e.prototype.connect=function(t){return dl(this,void 0,void 0,function(){return Wl(this,function(n){throw Pd({code:-1,message:"video destination node cann't connect any video node."})})})},e.prototype.disconnect=function(){return dl(this,void 0,void 0,function(){return Wl(this,function(t){throw Pd({code:-1,message:"video destination node cann't disconnect any video node."})})})},e.prototype.destroy=function(){this.track=null},e})(xh.E),mc=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Bc=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},wf=function(s,e,t){if(arguments.length===2)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))};(function(s){s[s.inited=0]="inited",s[s.noInit=1]="noInit",s[s.initing=2]="initing"})(za||(za={}));var kh=(function(){function s(e,t,n){var r=this;this.an=e,this.ir=t,this.customVC=n,this.canvasTrack=null,this.gl=null,this.xa=0,this.ja=0,this.qa=za.noInit,this.hasBeautyTask=!1,this.hasBackgroundTask=!1,this.backgroundLoop=null,this.eventHandler={visibilitychange:function(){if(he.VJ.hidden){var o=function(){return mc(r,void 0,void 0,function(){return Bc(this,function(a){switch(a.label){case 0:return this.backgroundLoop=window.setTimeout(o,Math.floor(1e3/this.fps)),!he.VJ.hidden&&this.backgroundLoop?(clearTimeout(this.backgroundLoop),this.backgroundLoop=null,[2]):[4,this.renderAFrame()];case 1:return a.sent(),[2]}})})};o()}else r.backgroundLoop&&(clearTimeout(r.backgroundLoop),r.backgroundLoop=null)}},this.fps=15,this.La=new ul}return Object.defineProperty(s.prototype,"initState",{set:function(e){this.qa=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"inited",{get:function(){return this.qa===za.inited},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"beautyAndBackgroundProcess",{get:function(){return this.hasBackgroundTask&&this.hasBeautyTask},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"renderTrack",{get:function(){return this.Ba},enumerable:!1,configurable:!0}),s.prototype.init=function(e,t){var n;return mc(this,void 0,void 0,function(){var r;return Bc(this,function(o){switch(o.label){case 0:if(this.qa!=za.noInit)return[3,4];this.qa=za.initing,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.renderVideo(e,t)];case 2:return o.sent(),this.qa=za.inited,this.onInited(),[3,4];case 3:return r=o.sent(),this.qa=za.noInit,this.onRenderFail(r),r.code===Ft.zcJ.code&&((n=this.Ba)===null||n===void 0?void 0:n.readyState)==="ended"&&this.resetVideo(),[3,4];case 4:return[2]}})})},s.prototype.checkInit=function(e,t){return mc(this,void 0,void 0,function(){return Bc(this,function(n){switch(n.label){case 0:return!e||e.readyState!=="live"||this.Ba===e&&(t==null?void 0:t.handleTrackType)!==ke.changeResolution?[3,2]:(this.qa=za.noInit,[4,this.init(e,t)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},s.prototype.renderVideo=function(e,t){var n;return mc(this,void 0,void 0,function(){var r,o,a;return Bc(this,function(l){switch(l.label){case 0:return this.an.info("".concat(Ce.kVV," call")),e===null?(this.Ba=e,[2]):this.Ba==e&&(t==null?void 0:t.handleTrackType)!==ke.changeResolution?[2]:(this.Ba=e,this.videoEl||(this.videoEl=(0,he.sb)(),(n=this.videoEl)===null||n===void 0||n.setAttribute("style","display:none")),[4,this.getPlayingVideo(this.videoEl,e,t)]);case 1:if(l.sent(),r=e.getSettings(),o=r.width||this.videoEl.videoWidth,a=r.height||this.videoEl.videoHeight,r.frameRate&&this.fps!==r.frameRate&&(this.fps=r.frameRate,this.an.info(Ce.kVV+" set target fps: "+this.fps)),this.an.info(Ce.kVV+" video canvas render: width "+r.width+" height "+r.height),!o||!a)throw this.an.error(Ce.kVV+" resolution of track is wrong"),Ft.zcJ;return this.originWidth=o,this.originHeight=a,this.videoEl.setAttribute("width",o.toString()),this.videoEl.setAttribute("height",a.toString()),this.ir!=="safari"||(t==null?void 0:t.handleTrackType)!==ke.replaceNew&&(t==null?void 0:t.handleTrackType)!==ke.changeResolution||this.resetCanvas(),this.initWegGl(),[2]}})})},s.prototype.getPlayingVideo=function(e,t,n){return mc(this,void 0,void 0,function(){var r,o,a=this;return Bc(this,function(l){switch(l.label){case 0:return e.srcObject?((r=e.srcObject).getTracks().forEach(function(d){return r.removeTrack(d)}),r.addTrack(t),(o=this.ir)!=="safari"&&o!=="firefox"||(e.srcObject=r)):e.srcObject=new MediaStream([t]),[4,new Promise(function(d,p){var u=function(){e.videoWidth==0||e.videoHeight==0?p(Ft.zcJ):d(void 0)};if(e!=null&&e.paused){var v=null,x=function(){u(),v&&(clearTimeout(v),v=null),e&&e.removeEventListener("playing",x)};v=window.setTimeout(function(){v&&(clearTimeout(v),v=null),v=window.setTimeout(function(){a.an.warn(Ce.kVV+" video track error"),e&&e.removeEventListener("playing",x),p(Ft.zcJ)},1e3),e.play().catch(function(U){console.error(U)})},1e3),e&&e.addEventListener("playing",x),e&&e.play()}else e&&e.play(),setTimeout(function(){u()},1e3)})];case 1:return l.sent(),[2]}})})},s.prototype.resetVideo=function(){var e;this.destroyVideo(),this.videoEl=(0,he.sb)(),(e=this.videoEl)===null||e===void 0||e.setAttribute("style","display:none")},s.prototype.initWegGl=function(){var e;if(this.an.info("".concat(Ce.kNG," call")),this.canvasEl||(this.an.info("".concat(Ce.kNG," no canvas")),this.customVC?(this.canvasEl=document.getElementById("render_canvas"),this.canvasEl.width=this.originWidth,this.canvasEl.height=this.originHeight):this.canvasEl=(0,he.FP)(this.originWidth,this.originHeight)),this.gl||(this.gl=(e=this.canvasEl)===null||e===void 0?void 0:e.getContext("webgl")),!this.gl)return this.an.warn("".concat(Ce.kNG," no gl")),void this.handleInitError({code:1001});this.an.info("".concat(Ce.kNG," end"))},s.prototype.resetCanvas=function(){this.canvasEl=null,this.gl=null,this.canvasTrack=null},s.prototype.getCanvasTrack=function(e){return this.an.info("".concat(Ce.YNv," get track")),this.canvasTrack&&!e||!this.canvasEl||(this.canvasTrack=this.canvasEl.captureStream(this.fps).getVideoTracks()[0]),this.canvasTrack},s.prototype.startRenderTask=function(){var e=this;this.an.info("".concat(Ce.YNv," start task"));var t=function(){return mc(e,void 0,void 0,function(){return Bc(this,function(n){switch(n.label){case 0:return this.ja=requestAnimationFrame(t),[4,this.renderAFrame()];case 1:return n.sent(),[2]}})})};this.ja=requestAnimationFrame(t),he.VJ.removeEventListener("visibilitychange",this.eventHandler.visibilitychange),he.VJ.addEventListener("visibilitychange",this.eventHandler.visibilitychange,!1)},s.prototype.stopRenderTask=function(){this.an.info("".concat(Ce.YNv," stop task")),this.ja&&(cancelAnimationFrame(this.ja),this.ja=0),he.VJ.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},s.prototype.renderAFrame=function(){return mc(this,void 0,void 0,function(){var e,t,n;return Bc(this,function(r){return e=Date.now(),t=1e3/this.fps,(n=this.xa?e-this.xa:t)>=t&&(this.xa=e-(n-t),this.videoEl&&this.videoEl.paused&&this.videoEl.play(),this.videoEl&&this.videoEl.videoWidth>6&&this.videoEl.videoHeight>6&&this.La.emit("renderFrame")),[2]})})},s.prototype.on=function(e,t){return!!t&&this.La.addEventHandler(e,t)},s.prototype.off=function(e,t){return this.La.removeEventHandler(e,t)},s.prototype.actionListener=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.La).emit.apply(t,wf([e],n,!1))},s.prototype.setRenderTask=function(e,t){this.an.info("".concat(Ce.YNv," set task ").concat(e," ").concat(t)),t==="beauty"&&(this.hasBeautyTask=e),t==="background"&&(this.hasBackgroundTask=e),this.hasBeautyTask&&!this.hasBackgroundTask?this.startRenderTask():this.stopRenderTask()},s.prototype.resetResolution=function(e,t){this.originWidth=e,this.originHeight=t},s.prototype.handleInitError=function(e){throw e},s.prototype.onInited=function(){},s.prototype.onRenderFail=function(e){},s.prototype.onRenderSuc=function(){},s.prototype.destroyVideo=function(){this.videoEl&&(this.videoEl.pause(),this.videoEl.remove(),this.videoEl.srcObject=null,this.videoEl=null)},s.prototype.destroy=function(){this.an.info("".concat(Ce.YNv," dt")),this.destroyVideo(),this.canvasEl&&(this.canvasEl.remove(),this.canvasEl=null),this.canvasTrack=null,this.Ba=null,this.gl=null,this.stopRenderTask(),this.hasBeautyTask=!1,this.hasBackgroundTask=!1,this.backgroundLoop&&clearTimeout(this.backgroundLoop),this.backgroundLoop=null},s})();function Cf(s,e,t,n,r){t===void 0&&(t=1e3),n===void 0&&(n=200);var o=s.createAnalyser();o.fftSize=2048,e.connect(o);var a=null,l=0,d=o.fftSize,p=null,u=null,v=0;function x(){var U=0;if(o.getFloatTimeDomainData){u||(u=new Float32Array(d)),o.getFloatTimeDomainData(u);for(var te=0;te<u.length;te++)U=Math.max(U,Math.abs(u[te]))}else{for(p||(p=new Uint8Array(d)),o.getByteTimeDomainData(p),te=0;te<p.length;te++)U=Math.max(U,Math.abs(p[te]-128));U/=128}var le=.005;n<=100?le=.5:n<=200?le=.3:n<=300?le=.15:n<=500?le=.07:n<=1e3&&(le=.05),U>(l*=le)&&(l=U),l>1&&(l=1);var se=Date.now();return v==0&&(v=se),(se-v>=t||n>=t)&&(v=se,r&&r(l)),n&&(a=window.setTimeout(function(){a&&clearTimeout(a),x()},n))}return t<100&&(t=100),n<100&&(n=100),t<n&&(n=t),n&&(a=window.setTimeout(function(){x()},n)),s.state!=="running"&&s.resume(),{analyzer:o,destroy:function(){o.disconnect(),a!==null&&(clearInterval(a),n=0,a=null),l=0,p=null,u=null},setInterval:function(U){U>30&&(t=U)}}}var Nd=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Ah=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},hl="zc.smw",Rf=new Blob([`
class VolumeMeter extends AudioWorkletProcessor {
  constructor() {
    super();
    this.volume = 0;
    this.intervalTime = 1000;
    this.tick = this.intervalTime;
    this.isStop = false;
    this.port.onmessage = event => {
      const { data } = event;
      switch (data.name) {
        case "setIntervalTime":
          this.intervalTime = data.intervalTime;
          break;
        case "stop":
          this.isStop = true;
          break;
      }
    };
  }
  process(inputs) {
    const input = inputs[0];
    if (this.isStop) {
      return false;
    }
    if (input.length > 0) {
      const buffer = input[0];
      let maxVal = this.volume;
      for (let i = 0; i < buffer.length; i++) {
        if (maxVal < buffer[i]) {
          maxVal = buffer[i];
        }
      }
      this.volume = maxVal;
      this.tick -= buffer.length;
      if (this.tick < 0) {
        this.tick += (this.intervalTime / 1000) * sampleRate;
        this.port.postMessage({ volume: this.volume });
        this.volume = 0;
      }
    }
    return true;
  }
}
try {
  registerProcessor("meter", VolumeMeter);
} catch (error) {
  
}  
`],{type:"application/javascript"}),fl=(function(){function s(){}return s.addModuleToContext=function(e,t){return Nd(this,void 0,void 0,function(){var n;return Ah(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t.info(hl+" worklet addModule call"),[4,e.audioWorklet.addModule(URL.createObjectURL(Rf))];case 1:return r.sent(),t.info(hl+" worklet addModule success"),this.isSuccess=!0,[2];case 2:return n=r.sent(),t.warn(hl+" worklet addModule catch error. ".concat(n==null?void 0:n.message)),[3,3];case 3:return[2]}})})},s.isSuccess=!1,s})(),Jl=(function(){function s(e,t,n,r){n===void 0&&(n=1e3),r===void 0&&(r=200),this.an=e,this.pn=t,this.Ua=n,this.Ga=r,this.Ja=null,this.Fa=null,this.Ha=null,this.volume=0,this.onSoundLevelUpdate=function(o){}}return s.prototype.preload=function(e){return Nd(this,void 0,void 0,function(){return Ah(this,function(t){switch(t.label){case 0:return fl.isSuccess?[3,2]:[4,fl.addModuleToContext(e,this.an)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},s.prototype.initAudioWorklet=function(e,t){return Nd(this,void 0,void 0,function(){var n,r,o=this;return Ah(this,function(a){switch(a.label){case 0:if(this.Ja)return[3,5];a.label=1;case 1:if(a.trys.push([1,3,,4]),(function(l){return!!(0,B.JO)(l.createAnalyser)})(e)&&this.pn.settingConfig.getSetting("sound_level_api_type")!==I.EA.useWorklet)throw"use analyzer";return this.an.info(hl+" use AudioWorklet. "),[4,this.preload(e)];case 2:return a.sent(),(n=this.Ja=new AudioWorkletNode(e,"meter")).port.onmessage=function(l){o.onSoundLevelUpdate&&o.onSoundLevelUpdate(l.data.volume||0)},t.connect(n).connect(e.destination),this.setInterval(this.Ua),[3,4];case 3:return r=a.sent(),this.an.info(hl+" not use AudioWorklet. "+r),this.Ha=Cf(e,t,this.Ua,this.Ga,function(l){o.onSoundLevelUpdate&&o.onSoundLevelUpdate(l||0)}),[3,4];case 4:return[3,6];case 5:t.connect(this.Ja).connect(e.destination),a.label=6;case 6:return[2]}})})},s.prototype.getSrcSource=function(e,t){var n=t.getAudioTracks()[0],r=t.id,o=s.sourceList[r]||{},a=o.source,l=o._ac,d=o.trackid;return a&&l===e&&d===(n==null?void 0:n.id)||(a&&a.disconnect(),a=e.createMediaStreamSource(t),s.sourceList[r]={source:a,_ac:l=e,trackid:d=n.id}),a},s.prototype.replaceSrcSource=function(e,t){var n;s.sourceDisConnect(t);var r=this.getSrcSource(e,t);return!((n=this.Ha)===null||n===void 0)&&n.analyzer&&r.connect(this.Ha.analyzer),r},s.sourceDisConnect=function(e){var t=e.id,n=(s.sourceList[t]||{}).source;n&&(n.disconnect(),delete s.sourceList[t])},s.prototype.setInterval=function(e){var t=this.Ja;this.Ua=e,t&&t.port.postMessage({name:"setIntervalTime",intervalTime:e}),this.Ha&&this.Ha.setInterval(e)},s.prototype.destroy=function(){this.Fa&&(this.Fa.onaudioprocess=null,this.Fa.disconnect()),this.Ha&&(this.Ha.destroy(),this.Ha=null),this.Ja&&(this.Ja.port.postMessage({name:"stop"}),this.Ja.port.onmessage=null,this.Ja.port.close(),this.Ja.disconnect(),this.an.info(hl+" close worklet")),this.Ja=null,this.Fa=null},s.sourceList={},s})(),gc=null,pu=null;function mu(s){return isNaN(s)?0:Math.max(-32768,Math.min(32767,Math.round(32767*s)))}var zc=null,Kl=null;function Dd(s,e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=!1);var o=1;if(!e||!t||e===t){if(r){for(var a=new Int16Array(s.length),l=0;l<s.length;l++)a[l]=mu(s[l]);return a}return s}if((o=e/t)<=0)throw new Error("Invalid sample rate ratio");if(n<=0)throw new Error("Invalid channel count");var d,p=s.length/n,u=Math.round(p/o),v=u*n;r?((!Kl||v>Kl.length)&&(Kl=new Int16Array(v)),d=Kl):((!zc||v>zc.length)&&(zc=new Float32Array(v)),d=zc);for(var x=function(Ht,Zt,un,hn,pn){var Bn=pn*pn,mn=hn-un-Ht+Zt;return mn*pn*Bn+(Ht-Zt-mn)*Bn+(un-Ht)*pn+Zt},U=0;U<n;U++)for(l=0;l<u;l++){var te=l*o,le=Math.floor(te),se=te-le,We=Math.max(0,le-1)*n+U,Ke=le*n+U,Ze=Math.min(p-1,le+1)*n+U,et=Math.min(p-1,le+2)*n+U,ht=s[We],gt=s[Ke],Et=s[Ze],At=s[et],Ot=x(ht,gt,Et,At,se),Bt=Math.min(ht,gt,Et,At),Kt=Math.max(ht,gt,Et,At);Ot=Math.max(Bt,Math.min(Kt,Ot)),d[l*n+U]=r?mu(Ot):Ot}return d.slice(0,v)}function Ph(s,e,t,n,r){r===void 0&&(r=!1),t&&n&&t!==n&&(s=s.map(function(v){return Dd(v,t,n)}));var o=s.length,a=s[0];if(!a)return r?new Int16Array:new Float32Array;var l=a.length*e;r?(!(0,B.Cp)(pu)||l>pu.length)&&(pu=new Int16Array(l)):(!(0,B.j5)(gc)||l>gc.length)&&(gc=new Float32Array(l));var d=r?pu:gc;if(o===1&&e===1){if(!r)return a;for(var p=0;p<a.length;p++)d[p]=mu(a[p])}else for(p=0;p<a.length;p++)e===2?r?(d[p*e]=mu(a[p]),d[p*e+1]=mu(o===2?s[1][p]:a[p])):(d[p*e]=a[p],d[p*e+1]=o===2?s[1][p]:a[p]):d[p]=r?mu((a[p]+s[1][p])/2):(a[p]+s[1][p])/2;var u=d.slice(0,a.length*e);return r?pu==null||pu.fill(0):gc==null||gc.fill(0),u}function Od(s,e,t,n,r){r===void 0&&(r=!1);var o=s;if((t&&n&&t!==n||r)&&(o=s.map(function(p){return Dd(p,t,n,1,r)})),e===1&&s.length===2){var a=void 0;a=r?new Int16Array(o[0]):new Float32Array(o[0]);var l=o[1];o=[a];for(var d=0;d<a.length;d++)a[d]=(a[d]+l[d])/2}else e===2&&s.length===1&&(l=void 0,l=r?new Int16Array(o[0]):new Float32Array(o[0]),o=[o[0],l]);return o}var Ld,Nh,Dh,jc,Oh=(function(){function s(e,t){this.ac=e,this.an=t,this.useScript=!1,this.Va=null,this.Qa=null,this.Ya=4096}return s.prototype.setAudioFrameCallback=function(e,t,n,r){var o,a,l,d=this;this.an.info("zc.apdp.safc.0 ".concat(e.id," ").concat(t," ").concat(JSON.stringify(r)));var p=(r==null?void 0:r.frameSize)||this.Ya;if(t)if(this.ga||(this.ga=this.ac.createMediaStreamSource(e)),this.useScript)this.Va||(this.Va=this.ac.createScriptProcessor(p),this.Va.onaudioprocess=function(u){for(var v=0;v<u.outputBuffer.numberOfChannels;v+=1)for(var x=u.outputBuffer.getChannelData(v),U=0;U<x.length;U+=1)x[U]=0;var te=u.inputBuffer.numberOfChannels,le=[];try{if(te>0)for(var se=0;se<te;se++){var We=u.inputBuffer.getChannelData(se);le.push(We)}var Ke=r||{},Ze=Ke.sampleRate,et=Ke.bitDepth,ht=Ke.channelCount,gt=u.inputBuffer.sampleRate,Et=ht||te,At=Ze||gt,Ot=et===16;if(Ke.mergeChannelsIntoPcm){var Bt=Ph(le,Et,gt,At,Ot);n({channels:[],channelCount:Et,sampleRate:At,pcm:Bt})}else if([Ze,ht,et].some(function(Ht){return!(0,B.TE)(Ht)})){var Kt=Od(le,Et,gt,At,Ot);n({channels:Kt,channelCount:Et,sampleRate:At})}else n({channels:le,channelCount:te,sampleRate:gt})}catch(Ht){d.an.info("zc.apdp.safc.0 script fail ".concat(Ht.toString()))}},this.an.info("zc.apdp.safc.0 create _zgp_scriptNode")),this.ga.connect(this.Va),this.Va.connect(this.ac.destination);else{if(!this.Qa){try{this.Qa=new AudioWorkletNode(this.ac,"audio-pcm-data-processor",{processorOptions:{bufferSize:p}})}catch(u){this.an.error("zc.apdp.safc.0 create worklet fail ".concat(u.toString()))}this.Qa&&(this.Qa.port.onmessage=function(u){if(u.data.type==="process")try{var v=u.data,x=v.channels,U=v.channelCount,te=r||{},le=te.sampleRate,se=te.bitDepth,We=te.channelCount,Ke=v.sampleRate,Ze=We||U,et=le||Ke,ht=se===16;if(te.mergeChannelsIntoPcm){var gt=Ph(x,Ze,Ke,et,ht);n({channels:[],channelCount:Ze,sampleRate:et,pcm:gt})}else if([le,We,se].some(function(At){return!(0,B.TE)(At)})){var Et=Od(x,Ze,Ke,et,ht);n({channels:Et,channelCount:Ze,sampleRate:et})}else n({channels:x,channelCount:U,sampleRate:Ke})}catch(At){throw At}},this.an.info("zc.apdp.safc.0 init worklet"))}this.Qa&&this.ga.connect(this.Qa),(o=this.Qa)===null||o===void 0||o.connect(this.ac.destination)}else{try{this.Qa&&((a=this.ga)===null||a===void 0||a.disconnect(this.Qa)),this.Va&&((l=this.ga)===null||l===void 0||l.disconnect(this.Va))}catch(u){this.an.info("zc.apdp.safc.0 ".concat(JSON.stringify(u)))}this.ga=null}},s.prototype.replaceSource=function(e){var t,n;if(this.an.info("zc.apdp.rs.0 ".concat(e.id)),this.ga){var r=this.ac.createMediaStreamSource(e);this.Qa&&((t=this.ga)===null||t===void 0||t.disconnect(this.Qa),r.connect(this.Qa)),this.Va&&((n=this.ga)===null||n===void 0||n.disconnect(this.Va),r.connect(this.Va)),this.ga=null,this.ga=r}},s.prototype.destroy=function(){var e,t;this.an.info("zc.apdp.ds.0 call"),this.Qa&&(this.Qa.port.close(),(e=this.ga)===null||e===void 0||e.disconnect(this.Qa),this.Qa.disconnect(),this.an.info("zc.apdp.ds.0 destroy worklet")),this.Va&&(this.Va.onaudioprocess=null,(t=this.ga)===null||t===void 0||t.disconnect(this.Va),this.Va.disconnect(),this.an.info("zc.apdp.ds.0 close script processor")),this.Qa=null,this.Va=null,this.ga=null,this.an.info("zc.apdp.ds.0 end")},s})(),xf=(function(){function s(){this.listenerMap=new WeakMap}return s.prototype.bind=function(e,t){this.listenerMap.has(e)||this.listenerMap.set(e,[]);var n=this.listenerMap.get(e),r={add:function(o,a){return"addEventListener"in t?(n.push(function(){return t.removeEventListener(o,a)}),t.addEventListener(o,a)):"on"in t&&(n.push(function(){return t.off(o,a)}),t.on(o,a)),r}};return r},s.prototype.cleanup=function(e){var t=this.listenerMap.get(e);t&&(t.forEach(function(n){return n()}),this.listenerMap.delete(e))},s})(),Mo=function(){return Mo=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Mo.apply(this,arguments)},Ms=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Va=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Md=["videoInput","videoQuality","facingMode","width","height","frameRate","videoOptimizationMode"],Ud=["audioInput","channelCount","ANS","AGC","AEC"],qc=(function(){function s(e,t,n,r,o){this.an=e,this.pn=t,this.gn=n,this.previewType=r,this.onlyPreview=o,this.Ka={width:0,height:0,frameRate:0,bitRate:0,minBitrate:0,startBitrate:"default",keyFrameInterval:2,channelCount:1,audioBitrate:48e3,contentHint:""},this.rtcViewer=null,this.streamFromCanvas=!1,this.streamFromCanvasTrack=null,this.previewSuc=!1,this.soundLevel=0,this.hasEmptyAudioTrack=!1,this.Za=null,this.voiceProccessor=null,this.lastTrackEndTime={audio:0,video:0},this.script=null,this.mic=null,this.eventListenerManager=new xf,this.Xa=null,this._videoTrack=null,this.cloneVideoTrack=null,this.originVideoTrack=null,this.originAudioTrack=null,this.activateSEIConfig=null,this.Wa=!0,this.hasStopCaptureVideo=!1,this.$a=!0,this.gainNode=null,this.cameraMaxResolution={},this.enableDualStream=!1,this.lowStreamConfig={width:160,height:120,frameRate:15,bitRate:50},this._c=null,this.syncVideoEnabled=!1,this.syncAudioEnabled=!1,this.hasMicTrack=!0,this.soundMeterWorklet=null,this.audioMixManager=null,this.volume=100,this.volumeFactor=1,this.logger=e,this.stateCenter=t,this.streamCenter=n,r&&(this.videoPreviewType=r,this.audioPreviewType=r)}return Object.defineProperty(s.prototype,"localStream",{get:function(){return this.xu},set:function(e){this.xu=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoInfo",{get:function(){return this.Ka},set:function(e){this.Ka=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"mediaStreamConfig",{get:function(){return this.Sc},set:function(e){this.Sc=e},enumerable:!1,configurable:!0}),s.prototype.getEmptyAudioTrack=function(){if(!this.Za){var e=this.gn.ac.createMediaStreamDestination(),t=e?e.stream:null,n=this.Za=t?t.getAudioTracks()[0]:null;this.an.info("zp.geat "+"empty audio id: ".concat(n==null?void 0:n.id))}return this.Za},s.prototype.checkAudioExceptionEnded=function(e){var t;e&&(this.gn.trackUtils.isTrackStopBySDK(e)||this.xu&&this.audioPreviewType==="camera"&&this.gn.getPublishList(this.xu).length>0&&e.id===((t=this.Xa)===null||t===void 0?void 0:t.id)&&(this.pn.actionListener("_deviceError",Ft.T1C.code,e.label,"micro"),this.pn.actionListener("deviceError",Ft.T1C.code,e.label),this.gn.checkDeviceChange&&this.gn.checkDeviceChange()))},s.prototype.checkVideoExceptionEnded=function(e){var t;e&&(this.gn.trackUtils.isTrackStopBySDK(e)||this.xu&&this.videoPreviewType==="camera"&&this.gn.getPublishList(this.xu).length>0&&e.id===((t=this.videoTrack)===null||t===void 0?void 0:t.id)&&(this.pn.actionListener("_deviceError",Ft.zgf.code,e.label,"camera"),this.pn.actionListener("deviceError",Ft.zgf.code,e.label),this.gn.checkDeviceChange&&this.gn.checkDeviceChange()))},s.prototype.bindAudioTrackEvent=function(e){var t=this;this.eventListenerManager.bind(e,e).add("ended",function(){t.logger.info("zp.pv.te audio track ended"),t.lastTrackEndTime.audio=performance.now(),t.checkAudioExceptionEnded(e)}).add("mute",function(){t.logger.info("zp.pv.te audio track mute")}).add("unmute",function(){t.logger.info("zp.pv.te audio track unmute")})},s.prototype.bindVideoTrackEvent=function(e){var t=this;this.eventListenerManager.bind(e,e).add("ended",function(){t.logger.info("zp.pv.te video track ended"),t.lastTrackEndTime.video=performance.now(),t.checkVideoExceptionEnded(e)}).add("mute",function(){t.logger.info("zp.pv.te video track mute")}).add("unmute",function(){t.logger.info("zp.pv.te video track unmute")})},s.prototype.removeAudioTrackEvent=function(e){this.eventListenerManager.cleanup(e)},s.prototype.removeVideoTrackEvent=function(e){this.eventListenerManager.cleanup(e)},Object.defineProperty(s.prototype,"audioTrack",{get:function(){var e;return this.Xa||((e=this.xu)===null||e===void 0?void 0:e.getAudioTracks()[0])||null},set:function(e){this.Xa!==e&&(this.Xa&&this.removeAudioTrackEvent(this.Xa),this.Xa=e,e&&!this.onlyPreview&&this.bindAudioTrackEvent(e))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoTrack",{get:function(){var e;return this._videoTrack||((e=this.xu)===null||e===void 0?void 0:e.getVideoTracks()[0])||null},set:function(e){this._videoTrack!==e&&(this._videoTrack&&this.removeVideoTrackEvent(this._videoTrack),this._videoTrack=e,e&&!this.onlyPreview&&this.bindVideoTrackEvent(e))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isAudioEnabled",{get:function(){return this.Wa},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isVideoEnabled",{get:function(){return this.$a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"muteImage",{get:function(){return this._c},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoNodeQueue",{get:function(){if(!this.Tc){if(!this._videoTrack)throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");var e=new Ih(this._videoTrack,this.gn),t=new cp(this,this.pn.browser);this.Tc=new Ef(e,t,this.gn,this.pn.browser,this),this.vcMgr&&(this.Tc.vcMgr=this.vcMgr)}return this.Tc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isVideoNodeQueueEnabled",{get:function(){return this.Tc&&!this.Tc.isEmpty()},enumerable:!1,configurable:!0}),s.prototype.getDestinationTrack=function(){return!this.Tc||this.Tc.isEmpty()?null:this.videoNodeQueue.getDestinationTrack()},Object.defineProperty(s.prototype,"ac",{get:function(){return this.gn.ac},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"acMgr",{get:function(){return this.gn.acMgr},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"vcMgr",{get:function(){if(!this._vcMgr){if(!this._videoTrack)throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");this._vcMgr=new kh(this.logger,this.pn.browser,this.gn.isCustomVC),this.Tc&&(this.Tc.vcMgr=this.vcMgr)}return this._vcMgr},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"containBackgroundProcess",{get:function(){var e=this;return this.previewType==="compositing"?this.inputStreamOptions.some(function(t){if(t.stream){var n=e.gn.checkPreview(t.stream);return n==null?void 0:n.isBackgroundBlur}}):!!this.isBackgroundBlur},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"micTrack",{get:function(){return this.hasMicTrack&&this.audioPreviewType==="camera"&&this.audioTrack||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isVideoEffectStarting",{get:function(){return!!this.videoEffect&&this.videoEffect.isStarting},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isVideoEffectEnabled",{get:function(){return!!this.videoEffect&&this.videoEffect.enabled},enumerable:!1,configurable:!0}),s.prototype.getMediaStreamConstraints=function(e,t){var n={audio:null,video:null},r=(0,or.UN)();if(r&&r.includes("11_4")||(e=Li(this.pn,this.an,e),e=Yi(e)),n.audio=!0,n.video={width:this.pn.settingConfig.getSetting("camera_width")||640,height:this.pn.settingConfig.getSetting("camera_height")||480,frameRate:this.pn.settingConfig.getSetting("camera_framerate")||15,bitRate:this.pn.settingConfig.getSetting("camera_video_bitrate")},e.audio){var o=this.pn.settingConfig.getCloudSettingScenario(this.pn.scenario);this.logger.info("zp.gmsc.2 audio cloud config "+JSON.stringify(o));var a=o.ANS,l=o.AGC,d=o.AEC;n.audio={},e.audioInput&&e.audioInput!=="undefined"&&(n.audio.deviceId={exact:e.audioInput}),n.audio.noiseSuppression=a,n.audio.autoGainControl=l,n.audio.echoCancellation=d,(0,B.dd)(e.ANS)&&(n.audio.noiseSuppression=e.ANS),(0,B.dd)(e.AGC)&&(n.audio.autoGainControl=e.AGC),(0,B.dd)(e.AEC)&&(n.audio.echoCancellation=e.AEC),n.audio.channelCount=(0,B.Cs)(e.channelCount)?e.channelCount:1}else e.audio===!1&&(n.audio=!1);if(e.video){var p=640,u=480,v=15,x=this.pn.settingConfig.getSetting("camera_video_bitrate");if(e.videoQuality===1?(p=T.width,u=T.height,v=T.frameRate,x=T.bitRate):e.videoQuality===2?(p=_.width,u=_.height,v=_.frameRate,x=_.bitRate):e.videoQuality===3?(p=E.width,u=E.height,v=E.frameRate,x=E.bitRate):(p=e.width||640,u=e.height||480,v=e.frameRate||15,x=e.bitRate||this.pn.settingConfig.getSetting("camera_video_bitrate"),this.an.info("zp.gmsc.2 quality: ",e.videoQuality)),t&&!e.videoQuality&&(e.width&&(p=e.width),e.height&&(u=e.height),e.frameRate&&(v=e.frameRate),e.bitRate&&(x=e.bitRate)),e.horizontal===!1){var U=u;u=p,p=U}e.isSwitch===!0&&(U=u,u=p,p=U),n.video={width:2*Math.floor(Number(p)/2),height:2*Math.floor(Number(u)/2),frameRate:v,bitRate:x},e.facingMode!=null?n.video.facingMode=e.facingMode:e.videoInput&&e.videoInput!="undefined"&&(n.video.deviceId={exact:e.videoInput}),this.an.info("zp.gmsc.2 width: "+p+" height: "+u+" rate: "+v)}else e.video===!1&&(n.video=!1);return{mediaStreamConstraints:n,mediaStreamConfig:e}},s.prototype.startPreview=function(e,t,n,r){return Ms(this,void 0,void 0,function(){var o,a,l;return Va(this,function(d){switch(d.label){case 0:if(this.an.info("zp.sv.2 called "+JSON.stringify(e)),this.Sc=Mo({},e),e.video===!1&&this.deleteConstraints(this.Sc,Md),e.audio===!1&&this.deleteConstraints(this.Sc,Ud),this.an.info("zp.sv.2 store "+JSON.stringify(this.Sc)),o=function(p){t(p)},(0,B.dr)(e.source)||(0,B.Si)(e.source)){try{a=this.Uc(e),o&&o(a)}catch(p){n(p)}return[2]}return navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!=null?[3,1]:(n&&n(j.eU.error.yn),[2]);case 1:return d.trys.push([1,3,,4]),[4,this.Vc(e,r)];case 2:return a=d.sent(),o&&o(a),[3,4];case 3:return l=d.sent(),n(l),[3,4];case 4:return[2]}})})},Object.defineProperty(s.prototype,"hasUserSetBitrate",{get:function(){var e,t=this.Sc,n=t.bitRate;return((e=n??t.bitrate)!==null&&e!==void 0?e:t.videoQuality)!==void 0},enumerable:!1,configurable:!0}),s.prototype.Vc=function(e,t){var n,r;return Ms(this,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn=this;return Va(this,function(Bn){switch(Bn.label){case 0:o=this.getMediaStreamConstraints(e),l=o.mediaStreamConfig,d={},(a=o.mediaStreamConstraints).video?d=Mo({},a.video):(0,B.TE)(l.bitRate)||(d.bitRate=l.bitRate),this.Ka=Mo(Mo({},this.Ka),d),this.Ka.audioBitrate=1e3*l.audioBitrate||48e3,this.Ka.startBitrate=l.startBitrate||this.pn.settingConfig.getSetting("bitrate_mode"),this.Ka.minBitrate=l.minBitrate,this.Ka.keyFrameInterval=l.keyFrameInterval||this.Ka.keyFrameInterval,(0,B.QP)(e.videoOptimizationMode)&&(this.Ka.contentHint=e.videoOptimizationMode),this.logger.info("zp.sv.2 update video info  ".concat(JSON.stringify(this.Ka),", onlyPreview: ").concat(this.onlyPreview)),a.audio&&(p=this.pn.settingConfig.getCloudSettingScenario(this.pn.scenario,!0),v=p.channelCount,x=p.AEC,U=p.AGC,te=p.ANS,this.logger.info("zp.sv.2 scenario ".concat(u=p.audioBitrate," ").concat(v," ").concat(x," ").concat(U," ").concat(te)),u&&(this.Ka.audioBitrate=1e3*u),v&&(a.audio.channelCount=v,this.Ka.channelCount=v),(0,B.dd)(x)&&(this.logger.info("zp.sv.2 setting AEC "+x),this.Sc.AEC=a.audio.echoCancellation=x),(0,B.dd)(U)&&(this.logger.info("zp.sv.2 setting AGC "+U),this.Sc.AGC=a.audio.autoGainControl=U),(0,B.dd)(te)&&(this.logger.info("zp.sv.2 setting ANS "+te),this.Sc.ANS=a.audio.noiseSuppression=te)),a.video instanceof Object&&(a.video.width=this.pn.settingConfig.getSetting("camera_width",!0)||a.video.width,a.video.height=this.pn.settingConfig.getSetting("camera_height",!0)||a.video.height,a.video.frameRate=this.pn.settingConfig.getSetting("camera_framerate",!0)||a.video.frameRate),this.Sc.video=!!a.video,this.Sc.audio=!!a.audio,l.unlimitedCaptureResolution&&a.video.width&&(a.video.width={ideal:4096},a.video.height={ideal:2160},this.an.info("zp.sv.2 capture max resolution of camera")),this.logger.info("zp.sv.2 constraints "+JSON.stringify(a)),t.setAttribute("preview_conf",j.eU.preview_conf(a)),le=function(mn){var vn=j.eU.error.Tn;return vn.message=vn.message+" "+mn.name+" "+mn.message,mn.name==="NotAllowedError"||mn.name==="SecurityError"?(vn=Mo({},j.eU.error.Cn)).message=mn.name+": "+vn.message:mn.name==="NotReadableError"?(vn=Mo({},j.eU.error.An)).message=mn.name+": "+vn.message:mn.name==="OverconstrainedError"&&((vn=Mo({},j.eU.error.zn)).message=mn.name+": "+vn.message+(mn.constraint?". such as "+mn.constraint:"")),vn},se=function(mn,vn){return new he.l3(function(cn){pn.an.info("zp.sv.2 recapture call"),cu(function(nn){var gn=nn.cameras,yn=nn.microphones;if(pn.an.info("zp.sv.2 recapture devices "+vn+" "+gn.length+" "+yn.length),vn==="video"){if(!(gn.length>0))return void cn(void 0);var bn=gn[0].deviceID;pn.an.info("zp.sv.2 recapture video "+bn),mn.video.deviceId={exact:bn}}else if(vn==="audio"){if(!(yn.length>0))return void cn(void 0);var i=yn[0].deviceID;pn.an.info("zp.sv.2 recapture audio "+i),mn.audio.deviceId={exact:i}}navigator.mediaDevices.getUserMedia(mn).then(function(c){pn.an.info("zp.sv.2 recapture success"),cn(c)}).catch(function(c){cn(void 0)})},function(nn){pn.an.warn("zp.sv.2 recapture getDevices err:",nn.message),cn(void 0)})})},We=null,Bn.label=1;case 1:return Bn.trys.push([1,3,,6]),[4,navigator.mediaDevices.getUserMedia(a)];case 2:return(We=Bn.sent()).getTracks().forEach(function(mn){if(wn(mn,pn.an,"zp.sv.2"),mn.kind==="video"){var vn=mn.getSettings(),cn=vn.height,nn=vn.frameRate;pn.an.info("zp.sv.2 track settings ".concat(vn.width," ").concat(cn," ").concat(nn))}}),this.an.info("zp.sv.2 success"),[3,6];case 3:return Ke=Bn.sent(),this.an.info("zp.sv.2 failed "+Ke.name+" "+Ke.message),Ke.name!=="NotFoundError"?[3,5]:(et=a.video===!1,ht=!1,gt=!1,(Ze=a.audio===!1)&&(ht=(0,B.TE)((n=a.video)===null||n===void 0?void 0:n.videoInput)),et&&(gt=(0,B.TE)((r=a.audio)===null||r===void 0?void 0:r.audioInput)),this.an.info("zp.sv.2 failed "+(Et=Ze&&ht||et&&gt)+" "+(At=Ze?"video":"audio")),Et?[4,se(a,At)]:[3,5]);case 4:(Ot=Bn.sent())&&(We=Ot),Bn.label=5;case 5:if(!We)throw le(Ke);return[3,6];case 6:return this.xu=We,this.previewSuc=!0,this.initMediaTrack(We),this.Ka&&((Bt=We.getVideoTracks()[0])&&(Kt=Bt.getSettings(),Ht=Kt.width,Zt=Kt.height,un=Kt.frameRate,(0,B.w)(this.Ka.width)&&Ht&&(this.Ka.width=Ht),(0,B.w)(this.Ka.height)&&Zt&&(this.Ka.height=Zt),(0,B.w)(this.Ka.frameRate)&&un&&(this.Ka.frameRate=un)),hn=(0,B.w)(a.audio)&&a.audio.channelCount,this.Ka.channelCount=hn||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1)),[2,We]}})})},s.prototype.Uc=function(e){if((0,B.dr)(e.source)){var t=e.source.getVideoTracks(),n=t.length>0?t[0].getSettings():{width:0,height:0,frameRate:0};return this.an.debug("zp.sv.2 use external media stream"),this.previewSuc=!0,this.xu=new MediaStream(e.source),this.initMediaTrack(this.xu),this.Ka={width:n.width||0,height:n.height||0,frameRate:n.frameRate||0,bitRate:e.bitRate||this.pn.settingConfig.getSetting("custom_video_bitrate"),startBitrate:e.startBitrate||this.pn.settingConfig.getSetting("bitrate_mode"),minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval,channelCount:e.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*e.audioBitrate||48e3,contentHint:""},(0,B.QP)(e.videoOptimizationMode)&&(this.Ka.contentHint=e.videoOptimizationMode),this.xu}if((0,B.Si)(e.source)){var r=this.captureStream(e.source,e);if(r)return this.Ka.bitRate=e.bitRate||this.pn.settingConfig.getSetting("custom_video_bitrate"),this.previewSuc=!0,this.initMediaTrack(r),r;throw j.eU.error.yn}return new MediaStream},s.prototype.captureStream=function(e,t){var n,r,o,a;if(!e)return this.an.info("zp.cs.2 no local video"),null;var l=this.streamCenter.captureStreamElementMap.get(e);if(l)this.an.info("zp.cs.2 stream has capture"),a=l.clone();else{var d=void 0;if(e.captureStream)d=e.captureStream(),this.an.debug("zp.cs.2 captureStream");else{if(!e.mozCaptureStream)return this.an.info("zp.cs.2 don't support"),null;d=e.mozCaptureStream();var p=(n=this.acMgr)===null||n===void 0?void 0:n.getMediaElementRenderer(e);p==null||p.setVoiceChangeNode(p.effectMode,p.voiceChangerNode,!0),this.an.debug("zp.cs.2 mozCaptureStream")}this.streamCenter.captureStreamElementMap.set(e,d),a=d.clone()}if(a.getTracks().length==0)return this.an.error("zp.cs.2 external capture tracks no found"),null;this.an.info("zp.cs.2 tracks: "+a.getTracks().length),this.xu=a;var u=(o=(r=a.getVideoTracks())===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.getSettings();return this.Ka={width:e.videoWidth,height:e.videoHeight,frameRate:(u==null?void 0:u.frameRate)||0,bitRate:t.bitRate||this.pn.settingConfig.getSetting("custom_video_bitrate"),channelCount:t.channelCount||(this.audioTrack&&this.audioTrack.getSettings?this.audioTrack.getSettings().channelCount:1),audioBitrate:1e3*t.audioBitrate||48e3,startBitrate:t.startBitrate||this.pn.settingConfig.getSetting("bitrate_mode"),minBitrate:t.minBitrate,keyFrameInterval:t.keyFrameInterval,contentHint:""},(0,B.QP)(t.videoOptimizationMode)&&(this.Ka.contentHint=t.videoOptimizationMode),this.an.debug("zp.cs.2 called success"),this.xu},s.prototype.stopPreview=function(){var e,t,n,r=this;if(this.an.info("zp.sv.2.1 called"),this.xu){var o=this.rtcViewer;o&&o.destroy(),this.videoEffect&&(this.videoEffect.setBeautyEffectOptions(!1),this.videoEffect.destroy()),this.Yc&&this.Yc.destroy(),this.voiceProccessor&&this.voiceProccessor.destroy(),(e=this.pn.backgroundBlurManager)===null||e===void 0||e.releaseMap(this.xu),this.backgroundProcessor&&(this.backgroundProcessor.release(),this.backgroundProcessor=null),this.streamCompositor&&(this.streamCompositor=null),this.Tc&&this.videoNodeQueue.destroy(),this.gn.trackUtils.stopTrack(this.cloneVideoTrack),this.cloneVideoTrack=null,this.muteImageAnID&&cancelAnimationFrame(this.muteImageAnID),this.blkImgAnId&&cancelAnimationFrame(this.blkImgAnId),this.stopSoundLevel(),this.gn.trackUtils.stopTrack(this.originVideoTrack),this.originVideoTrack=null,this.gn.trackUtils.stopTrack(this.originAudioTrack),this.originAudioTrack=null,this.gn.trackUtils.stopTrack(this.videoTrack),this.videoTrack=null,this.gn.trackUtils.stopTrack(this.audioTrack),this.audioTrack=null,Jl.sourceDisConnect(this.xu),(t=this.audioMixManager)===null||t===void 0||t.stopAudioManager(),this.Zc(),!this.zegoCaptureStream&&this.xu.getTracks().forEach(function(a){r.gn.trackUtils.stopTrack(a)}),this.xu=null,!this.zegoCaptureStream&&((n=this.lowStream)===null||n===void 0||n.getTracks().forEach(function(a){return r.gn.trackUtils.stopTrack(a)})),this.lowStream=void 0,this.Ka={width:0,height:0,frameRate:0,bitRate:0,minBitrate:0,startBitrate:"default",keyFrameInterval:2,channelCount:1,audioBitrate:48e3,contentHint:""}}},s.prototype.enableMicrophone=function(e){var t=this;if(!this.localStream)return this.an.error("zp.em.2 no localStream"),!1;var n=this.localStream.getAudioTracks()[0];n.enabled=e;var r=this.gn,o=r.isMicEnabled&&e;this.audioTrack&&(this.audioTrack.enabled=o);var a=r.getPublishList(this.localStream).map(function(l){return l.publisher});return a.length&&a.forEach(function(l){return Ms(t,void 0,void 0,function(){var d,p;return Va(this,function(u){switch(u.label){case 0:return d=!e,(p=l.audioSender)?d?[4,p.replaceTrack(null)]:[3,2]:[2];case 1:return u.sent(),[3,4];case 2:return[4,p.replaceTrack(n)];case 3:u.sent(),u.label=4;case 4:return[2]}})})}),this.Xc(o,3),this.Wa=e,this.an.debug("zp.em.2 call success. "+e),!0},s.prototype.updatePublisherStreamMicStatus=function(e,t){this.Xc(this.Wa&&e,t)},s.prototype.Xc=function(e,t){if(this.xu){var n=this.gn.getPublishList(this.xu).map(function(r){return r.publisher});n.length&&n.forEach(function(r){r.sendStreamStatus(r.camera_status,e?0:t)})}},s.prototype.updatePublisherStreamCameraStatus=function(e,t){if(this.xu){var n=this.gn.getPublishList(this.xu).map(function(r){return r.publisher});n.length&&n.forEach(function(r){r.sendStreamStatus(e?0:t,r.mic_status)})}},s.prototype.enableMicrophoneOnly=function(e){return this.xu?this.micTrack?(this.micTrack.enabled=this.Wa&&e,this.updatePublisherStreamMicStatus(e,3),this.an.debug("zp.emo.2 call success"),!0):(this.an.info("zp.emo.2 no micTrack"),!0):(this.an.error("zp.em.2 no localStream"),!1)},s.prototype.enableCamera=function(e,t,n){var r;return Ms(this,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te=this;return Va(this,function(le){switch(le.label){case 0:return this.localStream&&this.videoTrack?(o=this.videoTrack,d=this.lowStream,this._c&&(e?e&&(this.isVideoNodeQueueEnabled?setTimeout(function(){var se=te.videoNodeQueue.getDestinationTrack();se&&te.replacePreviewTrack(se,!0)},800):this.videoTrack&&this.replacePreviewTrack(this.videoTrack,!1)):(a=this.Wc(this._c),this.localStream.removeTrack(this.localStream.getVideoTracks()[0]),this.localStream.addTrack(a),this.rtcViewer&&this.rtcViewer.setVideo(a),d&&(l=a.clone()))),n&&!e||!o?n&&!e&&(!((r=this.videoEffect)===null||r===void 0)&&r.enabled||this.isVideoNodeQueueEnabled?this.an.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on"):(p=this.cloneVideoTrack,this.cloneVideoTrack=this.videoTrack.clone(),this.cloneVideoTrack.enabled=!0,this.replacePreviewTrack(this.cloneVideoTrack,!1,{retainTrack:!0}),t.trackUtils.stopTrack(p))):(o.enabled=e,this.$c(e,o)),o&&(o.enabled=e),this.isVideoNodeQueueEnabled?((u=this.videoNodeQueue.getDestinationTrack())&&(u.enabled=e),e?[3,2]:[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)]):[3,5]):(this.an.error("zp.ec.2 video track no found"),[2,!1]);case 1:le.sent(),le.label=2;case 2:return e&&o?[4,this.videoNodeQueue.replaceNewSourceByTrack(o,!1)]:[3,4];case 3:le.sent(),le.label=4;case 4:le.label=5;case 5:return d==null||d.getVideoTracks().forEach(function(se){se.enabled=e}),v=t.checkPreview(this.localStream),(x=t.getPublishList(this.localStream).map(function(se){return se.publisher})).length&&(U=null,x.forEach(function(se){var We=se.publishOption.videoCodec==="H265",Ke=!se.sideMediaConfig.isSEIStart,Ze=se.getVideoSenders();Ze&&Ze.forEach(function(ht,gt){return Ms(te,void 0,void 0,function(){var Et,At,Ot,Bt,Kt=this;return Va(this,function(Ht){switch(Ht.label){case 0:return e?[3,10]:this._c?(se.setSendMuteImage(!0),se.isTcVideoPasued()?[3,4]:Ze.length>1&&gt===0&&l?[4,ht==null?void 0:ht.replaceTrack(l)]:[3,2]):[3,5];case 1:return Ht.sent(),[3,4];case 2:return a?[4,ht==null?void 0:ht.replaceTrack(a)]:[3,4];case 3:Ht.sent(),Ht.label=4;case 4:return[3,9];case 5:return We||!Ke?[3,8]:se.isTcVideoPasued()?[3,7]:[4,ht.replaceTrack(null)];case 6:Ht.sent(),Ht.label=7;case 7:return[3,9];case 8:We&&(U||(Et=o==null?void 0:o.getSettings(),U=this.th(Et==null?void 0:Et.width,Et==null?void 0:Et.height,Ke)),U&&ht.replaceTrack(U)),Ht.label=9;case 9:return[3,22];case 10:return e?(se.setSendMuteImage(!1),At=0,!this._c&&We&&((Bt=ht.track)===null||Bt===void 0||Bt.stop()),this.isVideoNodeQueueEnabled?(At=800,Ot=this.videoNodeQueue.getDestinationTrack(),se.isTcVideoPasued()||!Ot||ht.track===Ot?[3,12]:[4,ht==null?void 0:ht.replaceTrack(Ot)]):[3,13]):[3,22];case 11:Ht.sent(),Ht.label=12;case 12:return[3,21];case 13:return se.isTcVideoPasued()||ht.track===this.videoTrack?[3,21]:v!=null&&v.streamFromCanvas?[3,19]:Ze.length>1&&gt===0?d?[4,ht==null?void 0:ht.replaceTrack(d.getVideoTracks()[0])]:[3,15]:[3,16];case 14:Ht.sent(),Ht.label=15;case 15:return[3,18];case 16:return[4,ht==null?void 0:ht.replaceTrack(this.videoTrack)];case 17:Ht.sent(),Ht.label=18;case 18:return[3,21];case 19:return[4,ht==null?void 0:ht.replaceTrack(v.streamFromCanvasTrack)];case 20:Ht.sent(),Ht.label=21;case 21:At?setTimeout(function(){Kt.muteImageAnID&&clearInterval(Kt.muteImageAnID),Kt.blkImgAnId&&clearInterval(Kt.blkImgAnId)},At):(this.muteImageAnID&&clearInterval(this.muteImageAnID),this.blkImgAnId&&clearInterval(this.blkImgAnId)),Ht.label=22;case 22:return[2]}})})});var et=te._c&&!e?0:lu(te.videoTrack);se.sendStreamStatus(et,se.mic_status)})),this.$a=e,this.an.info("zp.ec.2 call success"),[2,!0]}})})},s.prototype.$c=function(e,t){var n=this;if(bi(this.pn.browserInfo,"chrome",86,2)&&bi(this.pn.browserInfo,"chrome",92,0)&&e&&!(0,B.TE)(t.getSettings().width)&&t.getSettings().width>0){var r=t.getSettings().width-1,o=t.getSettings().height-1,a=t.getSettings().frameRate;t.applyConstraints({width:r,height:o,frameRate:a}).then(function(){t.applyConstraints({width:n.videoInfo.width,height:n.videoInfo.height,frameRate:a})})}},s.prototype.stopCaptureVideo=function(){return Ms(this,void 0,void 0,function(){var e,t,n,r,o=this;return Va(this,function(a){switch(a.label){case 0:return e=this.lowStream,this.videoTrack?(t=this.videoTrack.enabled,n=this.pn.browser==="safari",this.hasStopCaptureVideo=!0,r=function(){return Ms(o,void 0,void 0,function(){return Va(this,function(l){switch(l.label){case 0:return this.videoTrack&&(this.videoTrack.enabled=!1),e&&(e.getVideoTracks()[0].enabled=!1),[4,new Promise(function(d){setTimeout(function(){d(void 0)},1e3)})];case 1:return l.sent(),[2]}})})},this.pn.engineConfig.previewClearLastFrame?n?[3,2]:(this.videoTrack.enabled=!1,e&&(e.getVideoTracks()[0].enabled=!1),[4,new he.l3(function(l){setTimeout(function(){l(void 0)},200)})]):[3,7]):[2];case 1:a.sent(),a.label=2;case 2:return this.isVideoNodeQueueEnabled?n?[4,r()]:[3,4]:[3,6];case 3:a.sent(),a.label=4;case 4:return[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)];case 5:a.sent(),a.label=6;case 6:return this.gn.trackUtils.stopTrack(this.videoTrack),this.gn.trackUtils.stopTrack(e==null?void 0:e.getVideoTracks()[0]),this.stopCanvasStreamTrack(),this.videoTrack.enabled=t,[3,12];case 7:return this.isVideoNodeQueueEnabled?n?[4,r()]:[3,9]:[3,11];case 8:a.sent(),a.label=9;case 9:return[4,this.videoNodeQueue.replaceNewSourceByTrack(null,!1)];case 10:a.sent(),a.label=11;case 11:this.gn.trackUtils.stopTrack(this.videoTrack),this.gn.trackUtils.stopTrack(e==null?void 0:e.getVideoTracks()[0]),this.stopCanvasStreamTrack(),a.label=12;case 12:return[2]}})})},s.prototype.startSoundLevel=function(){var e;if(this.xu&&this.xu.getAudioTracks().length!=0){(e=this.soundMeterWorklet)===null||e===void 0||e.destroy();var t=this.gn.getCloudSoundInterval();try{var n=this,r=this.gn.createSoundLevel(this.ac,this.xu,this.gn.soundLevelInterval,t,function(a){n.soundLevel=100*a}),o=r.mic;this.soundMeterWorklet=r.soundMeter,this.mic=o}catch(a){this.an.error(Ce.b9b+" get sound level failed "+a)}}},s.prototype.stopSoundLevel=function(){var e;this.soundLevel=0,(e=this.soundMeterWorklet)===null||e===void 0||e.destroy(),this.soundMeterWorklet=null,this.mic=null},s.prototype.restartSoundLevel=function(){this.gn.soundLevelDelegate?(this.stopSoundLevel(),this.startSoundLevel()):this.stopSoundLevel()},s.prototype.setBeautyEffect=function(e,t){return Ms(this,void 0,void 0,function(){return Va(this,function(n){return[2]})})},s.prototype.setMuteImage=function(e){this._c=e},s.prototype.syncTrackState=function(e,t){t.enabled=e.enabled},s.prototype.replacePreviewTrack=function(e,t,n){var r;return t===void 0&&(t=!1),n===void 0&&(n={}),Ms(this,void 0,void 0,function(){var o,a,l,d,p,u,v;return Va(this,function(x){return this.an.info("zsc.rpt.0 call "+"".concat(e.kind," ").concat(t," ").concat(JSON.stringify(n))),e&&e.kind&&this.localStream?(o=(n==null?void 0:n.retainTrack)===!0,l=!(a=e.kind==="audio"),d=a?"audioTrack":"videoTrack",this.syncAudioEnabled&&a&&this.audioTrack&&this.syncTrackState(this.audioTrack,e),l&&this.syncVideoEnabled&&this.videoTrack&&this.syncTrackState(this.videoTrack,e),a&&this.insertableaudio&&this.insertableaudio.track.id!==e.id&&(e=this.insertableaudio.getInsertableStreamTrack(e)),!o&&l&&!t&&this.isVideoNodeQueueEnabled?(this.an.info("zsc.rpt.0 videoNodeQueue replaceNewSource"),(r=this.Tc)===null||r===void 0||r.replaceNewSourceByTrack(e,void 0,Mo({},n))):a&&this.audioNodeQueue&&!n.isTrackProcessedFromOriginalStream?((p=new MediaStream).addTrack(e),u=this.ac.createMediaStreamSource(p),this.audioNodeQueue.replaceSource(u),this.voiceProccessor&&(0,or.nr)()&&e!==this.Za&&this.voiceProccessor.resetWorklet()):a&&!this.audioNodeQueue&&this.destNode&&!n.isTrackProcessedFromOriginalStream?(this.createSrcNode(e,!0).connect(this.destNode),this.an.info("zsc.rpt.0 replace audio track with audio mix.")):(this.an.info("zsc.rpt.0 replace local ".concat(e.kind," track")),(v=this.localStream.getTracks().find(function(U){return U.kind===e.kind}))!==e&&(v&&(this.localStream.removeTrack(v),a?this.removeAudioTrackEvent(v):this.removeVideoTrackEvent(v)),this.localStream.addTrack(e)),this.rtcViewer&&(this.rtcViewer.setTrack(l,e),this.pn.browser==="safari"&&this.rtcViewer.resume(!0)),!o&&l&&this.enableDualStream&&this.createLowStream()),t||o||n.isTrackProcessedFromOriginalStream||(this.an.info("zsc.rpt.0 setTrack ".concat(d)),this[d]=e,n.handleTrack==="REMOVE"&&l&&(this.localStream.removeTrack(e),this.rtcViewer&&this.rtcViewer.setTrack(!0,null),this[d]=null)),this.gn.soundLevelDelegate&&this.soundMeterWorklet&&(this.mic=this.soundMeterWorklet.replaceSrcSource(this.ac,this.localStream)),a&&this.streamCompositor&&this.streamCompositor.replaceSource(this.localStream),n.isCamera&&(a?this.audioPreviewType="camera":this.videoPreviewType="camera"),this.an.info("zsc.rpt.0 end"),[2]):[2]})})},s.prototype.updateZegoStreamCaptureTrack=function(e){var t=this.zegoCaptureStream;if(t){var n=e.kind=="video"?t.originVideoStream:t.originAudioStream;if(n){var r=this.gn.checkPreview(n);this.an.info("zsc.uzsct replace zego preivew"),r==null||r.replacePreviewTrack(e)}}},s.prototype.createLowStream=function(){var e,t,n,r,o,a=(e=this.xu)===null||e===void 0?void 0:e.getVideoTracks()[0];if(a){var l=a.getSettings().height,d=a.getSettings().width,p=(0,or.$t)(),u=(0,or.hL)(),v=p.indexOf("Android")>-1||p.indexOf("Adr")>-1;this.an.info("zp.cls w: "+d+" h: "+l+" "+v+" "+u);var x=(0,B.Cs)((t=this.Ka)===null||t===void 0?void 0:t.width)&&(0,B.Cs)((n=this.Ka)===null||n===void 0?void 0:n.height)&&l==this.Ka.width&&d==this.Ka.height;if(u&&v&&x){var U=l;l=d,d=U}var te=l&&d?l/d:1;try{var le,se=this.lowStreamConfig,We=se.width,Ke=se.frameRate;if(le=Math.round(te*this.lowStreamConfig.width),this.an.info("zp.cls lw: "+We+" lh: "+le),this.pn.browser==="firefox")this.lowStream=this.getStreamThroughCanvas(this.xu,{w:We,h:le,fps:Ke});else{this.lowStream=(r=this.xu)===null||r===void 0?void 0:r.clone();var Ze=(o=this.lowStream)===null||o===void 0?void 0:o.getVideoTracks()[0];Ze==null||Ze.applyConstraints({width:We,height:le,frameRate:Ke})}}catch(et){this.an.error("zp.cls "+et)}}},s.prototype.initAudioNodeQueue=function(e){if(!this.audioTrack||!this.xu)return!1;var t=this.createSrcNode(this.audioTrack),n=this.createDestNode(this.xu);return this.audioNodeQueue=new kd(t,n),!0},s.prototype.createSrcNode=function(e,t,n){var r;t===void 0&&(t=!1),n===void 0&&(n=!1);var o=e||this.audioTrack;if(o===((r=this.destNode)===null||r===void 0?void 0:r.stream.getAudioTracks()[0])&&(this.an.info("zp.pv.csn use empty track"),o=this.getEmptyAudioTrack()),this.srcNode&&!n){if(!t)return this.srcNode;this.srcNode.disconnect(),this.an.info("zp.pv.csn recreate src")}var a=new MediaStream;o&&a.addTrack(o);var l=this.ac.createMediaStreamSource(a);return n||(this.srcNode=l),this.an.info("zp.pv.csn "+"create src audio id: ".concat(o==null?void 0:o.id,", ").concat(o==null?void 0:o.label,",i")),l},s.prototype.isOriginEmptyTrack=function(){return!this.audioTrack||this.Za===this.audioTrack},s.prototype.createDestNode=function(e){if(this.destNode)return this.destNode;var t=this.destNode=this.destNode||this.ac.createMediaStreamDestination(),n=t.stream.getAudioTracks()[0];this.an.info("zp.pv.cdn "+"create dest audio id: ".concat(n==null?void 0:n.id,", ").concat(n==null?void 0:n.label,",i"));var r=this.rtcViewer;for(var o in this.gn.publisherList){var a=this.gn.publisherList[o];if(a.localStream==e){var l=a.publisher.audioSender;l&&(l.replaceTrack(n),this.an.info("zc.pv.cdn change sender audio track"));break}}var d=e.getAudioTracks()[0];return d&&(e.removeTrack(d),!this.isOriginEmptyTrack()&&n&&(n.enabled=this.Wa)),e.addTrack(n),r&&r.setAudio(n),t},s.prototype.initMediaTrack=function(e){e.getVideoTracks().length>0&&(this.videoTrack=e.getVideoTracks()[0],this.originVideoTrack=this.videoTrack),e.getAudioTracks().length>0&&(this.audioTrack=e.getAudioTracks()[0],this.originAudioTrack=this.audioTrack)},s.prototype.onAudioTrackChange=function(e){},s.prototype.getViewer=function(){return!this.xu||this.rtcViewer&&this.rtcViewer.inited||(this.rtcViewer=new ll(this.xu,this,{clearLastFrame:this.pn.engineConfig.previewClearLastFrame})),this.rtcViewer},s.prototype.getStreamThroughCanvas=function(e,t){var n,r=this;if(e.getVideoTracks().length==0)return e;var o=(n=e.getVideoTracks()[0])===null||n===void 0?void 0:n.getSettings(),a=o.width,l=o.height,d=o.frameRate;if(!a||!l||!d)return e;var p=(0,he.sb)(),u=he.VJ.createElement("canvas"),v=u.getContext("2d");p.setAttribute("style","display:none"),u.setAttribute("style","display:none"),u.width=(t==null?void 0:t.w)||a,u.height=(t==null?void 0:t.h)||l,new he.l3(function(le,se){var We=null,Ke=function(){We&&clearTimeout(We),p&&p.removeEventListener("playing",Ke),le(void 0)};p&&p.addEventListener("playing",Ke),We=window.setTimeout(function(){r.an.error("zc.gstc play canvas video timeout"),p.play(),We=window.setTimeout(function(){se()},3e3)},2e3)}).then(function(){var le=(t==null?void 0:t.fps)||d||15;r.ih&&(clearInterval(r.ih),r.ih=null),r.ih=setInterval(function(){var se,We=(se=e.getVideoTracks()[0])===null||se===void 0?void 0:se.getSettings();u.width=(t==null?void 0:t.w)||We.width||p.videoWidth,u.height=(t==null?void 0:t.h)||We.height||p.videoHeight,v==null||v.drawImage(p,0,0,u.width,u.height)},1e3/le)}),p.srcObject=e,p.play().catch(function(le){r.an.error("zc.gstc play canvas video error: "+le.message)});var x=u.captureStream((t==null?void 0:t.fps)||15),U=x.getVideoTracks()[0];if(U.stop=function(){var le;r.an.info("zc.gstc stop canvas track:"+U.id),r.ih&&(clearInterval(r.ih),r.ih=null),p&&((le=p.srcObject)===null||le===void 0||le.getVideoTracks().forEach(function(se){se.stop()}),p.pause(),p.remove(),p=null),u&&(u.remove(),u=null)},(0,B.dr)(e)&&e.getAudioTracks().length){var te=e.getAudioTracks()[0];x.addTrack(te)}return x},s.prototype.stopCanvasStreamTrack=function(){this.streamFromCanvas&&this.streamFromCanvasTrack&&(this.gn.trackUtils.stopTrack(this.streamFromCanvasTrack),this.streamFromCanvasTrack=null),this.ih&&(clearInterval(this.ih),this.ih=null)},s.prototype.updateVideoInfo=function(e){var t={width:e.width,height:e.height,frameRate:e.frameRate,bitRate:e.bitRate,minBitrate:e.minBitrate,keyFrameInterval:e.keyFrameInterval};return this.an.info("zc.pv.uvi input video info: ".concat(JSON.stringify(t))),this.Ka=Mo(Mo(Mo({},this.Ka),t),{bitRate:this.Ka.bitRate||t.bitRate,minBitrate:this.Ka.bitRate||t.bitRate}),Mo({},this.Ka)},s.prototype.updateAudioInfo=function(e){var t={};return this.an.info("zc.pv.uai input audio info: ".concat(JSON.stringify(t))),this.Ka=Mo(Mo({},this.Ka),t),Mo({},this.Ka)},s.prototype.setVideoInfo=function(e){if(e){var t=e.width,n=e.height,r=e.frameRate,o=e.bitRate,a=e.startBitrate,l=e.minBitrate,d=e.keyFrameInterval,p=e.channelCount,u=e.audioBitrate,v=e.contentHint;t!==void 0&&(this.Ka.width=t),n!==void 0&&(this.Ka.height=n),r!==void 0&&(this.Ka.frameRate=r),o!==void 0&&(this.Ka.bitRate=o),a!==void 0&&(this.Ka.startBitrate=a),l!==void 0&&(this.Ka.minBitrate=l),d!==void 0&&(this.Ka.keyFrameInterval=d),p!==void 0&&(this.Ka.channelCount=p),u!==void 0&&(this.Ka.audioBitrate=u),v!==void 0&&(this.Ka.contentHint=v)}},s.prototype.updateMediaStreamConstraints=function(e,t){var n=this;this.an.info("zc.pv.umsc ".concat(JSON.stringify(e))),t==="video"?Md.forEach(function(r){return n.Sc[r]=e[r]}):Ud.forEach(function(r){return n.Sc[r]=e[r]})},s.prototype.deleteConstraints=function(e,t){t.forEach(function(n){return delete e[n]})},s.prototype.setVolumeFactorByUserCount=function(e){var t,n=this.pn.engineConfig.choirRole;if(this.xu){this.an.info("zc.pv.svf ".concat((t=this.xu)===null||t===void 0?void 0:t.id," count: ").concat(e,", mic: ").concat(!!this.micTrack,", choir role: ").concat(n));var r=this.volumeFactor,o=[1,2].includes(n);if(this.micTrack&&o)for(var a=[[0,1],[3,1],[4,.9],[8,.7],[12,.5],[16,.45],[20,.4],[24,.35],[1/0,.3]],l=0;l<a.length;l++){var d=a[l][0],p=a[l+1];if(!p){this.an.error("zc.pv.svf error: no map factor");break}if(e>=d&&e<p[0]){r=p[1];break}}else r=n===1?.6:1;this.audioMixManager&&this.audioMixManager.setVolumeFactor(n===1?.6:1),this.an.info("zc.pv.svf factor: ".concat(r)),this.setVolume(void 0,r)}},s.prototype.setVolume=function(e,t){var n,r,o;this.an.info("zc.pv.scv volume: ".concat(e,", factor: ").concat(t,"; origin: ").concat(this.volume,", ").concat(this.volumeFactor)),e===void 0?e=this.volume:this.volume=e,t===void 0?t=this.volumeFactor:this.volumeFactor=t;var a=this.gainNode;a||(this.audioNodeQueue||this.initAudioNodeQueue(),a=this.ac.createGain(),(n=this.audioNodeQueue)===null||n===void 0||n.pushFront(a),this.gainNode=a);var l=e/100*this.volumeFactor;if((0,B.Cs)(l)){var d=!1;a.gain.value!=l&&(d=!0,a.gain.value=l),this.an.info("zc.pv.scv ".concat(this.audioPreviewType," ").concat((o=this.xu)===null||o===void 0?void 0:o.id,"  volume: ").concat(l,". hasChanged: ").concat(d))}else this.an.error("zc.pv.scv ".concat(this.audioPreviewType," ").concat((r=this.xu)===null||r===void 0?void 0:r.id,"  volume error: ").concat(l))},s.prototype.Wc=function(e){var t=(0,he.FP)(e.width,e.height),n=t.getContext("2d");return this.muteImageAnID=setInterval(function(){e&&(n==null||n.drawImage(e,0,0))},100),t.captureStream().getVideoTracks()[0]},s.prototype.th=function(e,t,n){(e<160||t<160)&&(e=160,t=160);var r=(0,he.FP)(e,t),o=r.getContext("2d");return n?o&&(o.fillStyle="black",o.fillRect(0,0,e,t)):this.blkImgAnId=setInterval(function(){o&&(o.fillStyle="black",o.fillRect(0,0,e,t))},100),r.captureStream().getVideoTracks()[0]},s.prototype.setAudioFrameCallback=function(e,t){if(this.an.info("zc.pv.safc call"),this.xu){this.Yc||(this.Yc=new Oh(this.ac,this.an));var n=e!==null;this.audioNodeQueue||this.initAudioNodeQueue(),this.audioNodeQueue&&this.Yc.setAudioFrameCallback(this.audioNodeQueue.destinationNode.stream,n,function(r){e&&e(r)},t)}else this.an.info("zc.pv.safc no localStream")},s.prototype.Zc=function(){this.Yc&&(this.Yc.destroy(),this.Yc=null)},s})();ye(8899),(function(s){s[s.Song=0]="Song",s[s.Accompaniment=1]="Accompaniment",s[s.AccompanimentClip=2]="AccompanimentClip",s[s.AccompanimentSegment=3]="AccompanimentSegment"})(Ld||(Ld={})),(function(s){s[s.Count=0]="Count",s[s.User=1]="User",s[s.Room=2]="Room",s[s.Master=3]="Master"})(Nh||(Nh={})),(function(s){s[s.VendorDefault=0]="VendorDefault",s[s.Vendor1=1]="Vendor1",s[s.Vendor2=2]="Vendor2",s[s.Vendor3=4]="Vendor3"})(Dh||(Dh={})),(function(s){s[s.PortraitSegmentation=0]="PortraitSegmentation"})(jc||(jc={}));var If,Bd,po,Uo,Lh,Mh,Uh,xs,oa=ye(166);ye(9728),(function(s){s[s.Off=0]="Off",s[s.On=1]="On"})(If||(If={})),(function(s){s[s.PortraitSegmentation=0]="PortraitSegmentation"})(Bd||(Bd={})),(function(s){s[s.ZegoGeoFenceTypeNone=0]="ZegoGeoFenceTypeNone",s[s.ZegoGeoFenceTypeInclude=1]="ZegoGeoFenceTypeInclude",s[s.ZegoGeoFenceTypeExclude=2]="ZegoGeoFenceTypeExclude"})(po||(po={})),(function(s){s[s.ZegoDefined=0]="ZegoDefined",s[s.UserUnregister=1]="UserUnregister"})(Uo||(Uo={})),(function(s){s[s.TrafficControlFocusOnLocalOnly=0]="TrafficControlFocusOnLocalOnly",s[s.TrafficControlFocusOnRemote=1]="TrafficControlFocusOnRemote"})(Lh||(Lh={})),(function(s){s[s.NoVideo=0]="NoVideo"})(Mh||(Mh={})),(function(s){s[s.Allow=0]="Allow",s[s.NotAllow=1]="NotAllow"})(Uh||(Uh={})),(function(s){s[s.video=0]="video",s[s.audio=1]="audio",s[s.videoAndAudio=2]="videoAndAudio"})(xs||(xs={}));var Vo=ye(327),zd=(function(){function s(e){this.zegoStream=e}return Object.defineProperty(s.prototype,"active",{get:function(){return this.zegoStream.active},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this.zegoStream.id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoCaptureStream",{get:function(){return this.zegoStream.originVideoStream},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"audioCaptureStream",{get:function(){return this.zegoStream.originAudioStream},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stream",{get:function(){return this.zegoStream.stream},enumerable:!1,configurable:!0}),s.prototype.getAudioTracks=function(){return this.zegoStream.getAudioTracks()},s.prototype.getVideoTracks=function(){return this.zegoStream.getVideoTracks()},s.prototype.getTracks=function(){return this.zegoStream.getTracks()},Object.defineProperty(s.prototype,"videoDeviceId",{get:function(){return this.zegoStream.videoDeviceId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"audioDeviceId",{get:function(){return this.zegoStream.audioDeviceId},enumerable:!1,configurable:!0}),s.prototype.on=function(e,t){return this.zegoStream.on(e,t)},s.prototype.off=function(e,t){return this.zegoStream.off(e,t)},s.prototype.startCaptureMicrophone=function(e){return this.zegoStream.startCaptureMicrophone(e)},s.prototype.startCaptureCamera=function(e){return this.zegoStream.startCaptureCamera(e)},s.prototype.startCaptureCameraAndMicrophone=function(e,t){return this.zegoStream.startCaptureCameraAndMicrophone(e,t)},s.prototype.startCaptureCustomAudio=function(e){return this.zegoStream.startCaptureCustomAudio(e)},s.prototype.startCaptureCustomVideo=function(e){return this.zegoStream.startCaptureCustomVideo(e)},s.prototype.startCaptureCustomVideoAndAudio=function(e,t){return this.zegoStream.startCaptureCustomVideoAndAudio(e,t)},s.prototype.startCaptureScreen=function(e){return this.zegoStream.startCaptureScreen(e)},s.prototype.startCaptureScreenWithAudio=function(e,t){return this.zegoStream.startCaptureScreenWithAudio(e,t)},s.prototype.stopCaptureAudio=function(){return this.zegoStream.stopCaptureAudio()},s.prototype.stopCaptureVideo=function(){return this.zegoStream.stopCaptureVideo()},s.prototype.playAudio=function(e){this.zegoStream.playAudio(e)},s.prototype.playCaptureAudio=function(e){this.zegoStream.playCaptureAudio(e)},s.prototype.playVideo=function(e,t){this.zegoStream.playVideo(e,t)},s.prototype.playCaptureVideo=function(e,t){this.zegoStream.playCaptureVideo(e,t)},s.prototype.takeStreamSnapshot=function(e){return this.zegoStream.takeStreamSnapshot(e)},s.prototype.resumeVideo=function(){return this.zegoStream.resumeVideo()},s.prototype.resumeAudio=function(){return this.zegoStream.resumeAudio()},s.prototype.stopVideo=function(){this.zegoStream.stopVideo()},s.prototype.stopAudio=function(){this.zegoStream.stopAudio()},s.prototype.stopPlayCaptureVideo=function(){this.zegoStream.stopPlayCaptureVideo()},s.prototype.stopPlayCaptureAudio=function(){this.zegoStream.stopPlayCaptureAudio()},s.prototype.setVolume=function(e){return this.zegoStream.setVolume(e)},s.prototype.useAudioOutputDevice=function(e){return this.zegoStream.setAudioOutputDevice(e)},s})(),Bh=zd,Dn=function(){return Dn=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Dn.apply(this,arguments)},Bo=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Ho=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Yl=function(s,e,t){if(t||arguments.length===2)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},kf=(function(){function s(e,t,n,r,o){var a=this;this.eu=e,this.an=t,this.gn=n,this.pn=r,this.nh=o,this.id="zego-stream-"+Date.now().toString(16),this.originVideoStream=null,this.originAudioStream=null,this.audioMuted=!0,this.audioCaptureMuted=!0,this.stream=null,this.eh=[],this.rh=[],this.ou={autoplayFailed:function(l,d){a._a.emit("autoplayFailed",l,d)},autoplayCaptureFailed:function(l,d){a._a.emit("autoplayCaptureFailed",l,d)},canPlayAudio:function(l){a._a.emit("canPlayAudio",l)},canPlayVideo:function(l){a._a.emit("canPlayVideo",l)},canPlayCaptureVideo:function(l){a._a.emit("canPlayCaptureVideo",l)},canPlayCaptureAudio:function(l){a._a.emit("canPlayCaptureAudio",l)},videoTrackChanged:function(l){a._a.emit("videoTrackChanged",l)},audioTrackChanged:function(l){a._a.emit("audioTrackChanged",l)},captureVideoTrackChanged:function(l){a._a.emit("captureVideoTrackChanged",l)},captureAudioTrackChanged:function(l){a._a.emit("captureAudioTrackChanged",l)}},this.sh=!1,this.oh=!1,this.uh=null,this.ah=[],this.hh=null,this.mn=null,this.fh="",this.dh="",this.mh=null,this.ph=null,this._a=new ul,this.autoPlay&&!e.view&&this.an.error("zcs.c if you want to play the stream automatically, the view parameter is required."),this.cr=this.pn.reporter}return Object.defineProperty(s.prototype,"active",{get:function(){var e,t;return((e=this.originAudioStream)===null||e===void 0?void 0:e.active)||((t=this.originVideoStream)===null||t===void 0?void 0:t.active)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"view",{get:function(){return this.eu.view||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"autoPlay",{get:function(){return!!(0,B.dd)(this.eu.autoPlay)&&this.eu.autoPlay},enumerable:!1,configurable:!0}),s.prototype.getAudioTracks=function(){var e;return this.an.info("zcs.gats call"),((e=this.originAudioStream)===null||e===void 0?void 0:e.getAudioTracks())||[]},s.prototype.getVideoTracks=function(){var e;return this.an.info("zcs.gvts call"),((e=this.originVideoStream)===null||e===void 0?void 0:e.getVideoTracks())||[]},s.prototype.getTracks=function(){return Yl(Yl([],this.getAudioTracks(),!0),this.getVideoTracks(),!0)},Object.defineProperty(s.prototype,"aCaptureViewer",{get:function(){return this.uh},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"viewer",{get:function(){return this.hh},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoDeviceId",{get:function(){var e=this.originVideoStream&&this.originVideoStream.getVideoTracks()[0];return e&&this._getDeviceIdByTrack(e)||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"audioDeviceId",{get:function(){var e=this.originAudioStream&&this.originAudioStream.getAudioTracks()[0];return e&&this._getDeviceIdByTrack(e)||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gh",{get:function(){return this.nh.publishStreamHandler},enumerable:!1,configurable:!0}),s.prototype.on=function(e,t){return!!t&&this._a.addEventHandler(e,t)},s.prototype.off=function(e,t){return this._a.removeEventHandler(e,t)},s.prototype.startPublish=function(){},s.prototype.resetPublish=function(){this.bh()},s.prototype._getDeviceIdByTrack=function(e){return e&&e.getSettings().deviceId||""},s.prototype._h=function(e,t){var n=(0,B.w)(e)?e:{};return t.call(this,n)},s.prototype.yh=function(e,t){var n=this;if(this.an.info("zcs.uos call type:"+t),t==0){if(this.originVideoStream=e,this.autoPlay||this.oh){var r=this.ah.map(function(o){return{container:o.container,option:o.eu}});this.stopPlayCaptureVideo(),r!=null&&r.length||(r=[{container:this.eu.captureView||null,option:{}}]),r.forEach(function(o){return o.container&&n.playCaptureVideo(o.container,o.option)})}this.ou.captureVideoTrackChanged(this.originVideoStream.getVideoTracks()[0])}else this.originAudioStream=e,this.audioCaptureMuted||(this.stopPlayCaptureAudio(),this.playCaptureAudio()),this.ou.captureAudioTrackChanged(this.originAudioStream.getAudioTracks()[0])},Object.defineProperty(s.prototype,"isPublish",{get:function(){for(var e in this.gn.publisherList)if(this.gn.publisherList[e].localStream==this.stream)return!0;return!1},enumerable:!1,configurable:!0}),s.prototype.updateStreamAudioTrack=function(e,t,n){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),n===void 0&&(n=0),Bo(this,void 0,void 0,function(){var r,o,a,l,d,p,u=this;return Ho(this,function(v){switch(v.label){case 0:if(this.an.info("zcs.uat call"),!this.originAudioStream||this.isPublish&&n==0||!this.stream)return[2];if(!(r=this.checkPreview(this.originAudioStream))||!r.audioTrack)return this.an.info("zcs.uat not preview"),[2];o=this.ph,a=r.audioTrack,l=function(x){if(r&&x){var U=r.mediaStreamConfig;x.audio={input:U.audioInput,ANS:U.ANS,AEC:U.AEC,AGC:U.AGC,bps:r.videoInfo.audioBitrate,channelCount:U.channelCount}}u.ph=r.audioTrack,u.ou.audioTrackChanged(r.audioTrack),e(x)},v.label=1;case 1:return v.trys.push([1,3,,4]),this.stream&&this.wh(this.stream,this.stream,this.originAudioStream,!0),[4,this._updateStreamTrack(o,a,l,t)];case 2:return d=v.sent(),this.an.info("zcs.uat success"),[2,d];case 3:return p=v.sent(),this.an.info("zcs.uat fail"),[2,p];case 4:return[2]}})})},s.prototype.updateStreamVideoTrack=function(e,t,n){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),n===void 0&&(n=0),Bo(this,void 0,void 0,function(){var r,o,a,l,d,p=this;return Ho(this,function(u){switch(u.label){case 0:if(this.an.info("zcs.uvt call"),!this.originVideoStream||this.isPublish&&n==0||!this.stream)return this.an.info("zcs.uvt not capture"),[2];if(r=this.mh,!(o=this.checkPreview(this.originVideoStream))||!o.videoTrack)return this.an.info("zcs.uvt not preview"),[2];a=o.videoTrack,l=function(v){if(o&&v){var x=o.mediaStreamConfig,U=o.videoInfo,te=U.contentHint;v.video={input:x.videoInput,w:U.width,h:U.height,fps:U.frameRate,bps:1e3*U.bitRate,keyFrameInterval:U.keyFrameInterval,optimizationMode:te||void 0,facingMode:x.facingMode}}p.mh=o.videoTrack,p.ou.videoTrackChanged(o.videoTrack),e(v)},u.label=1;case 1:return u.trys.push([1,3,,4]),this.stream&&this.wh(this.stream,this.originVideoStream,this.stream,!0),[4,this._updateStreamTrack(r,a,l,t)];case 2:return u.sent(),this.dh=this.fh,this.an.info("zcs.uvt success"),[3,4];case 3:return d=u.sent(),this.an.info("zcs.uvt fail"),[2,d];case 4:return[2]}})})},s.prototype.updateStreamVideoAndAudio=function(e,t,n){return e===void 0&&(e=function(){}),t===void 0&&(t=function(){}),n===void 0&&(n=0),Bo(this,void 0,void 0,function(){var r,o,a,l,d,p;return Ho(this,function(u){switch(u.label){case 0:this.an.info("zcs.uva call"),r=!this.originVideoStream,o=!this.originAudioStream,a={},l=function(v){r=!0,v&&(a.video=v==null?void 0:v.video),o&&e(Dn(Dn({},v),a))},d=function(v){o=!0,v&&(a.audio=v==null?void 0:v.audio),r&&e(Dn(Dn({},v),a))},u.label=1;case 1:return u.trys.push([1,4,,5]),[4,this.updateStreamVideoTrack(l,t,n)];case 2:return u.sent(),[4,this.updateStreamAudioTrack(d,t,n)];case 3:return u.sent(),[3,5];case 4:return p=u.sent(),t(p),this.an.info("zcs.uva error:".concat(JSON.stringify(p))),[3,5];case 5:return[2]}})})},s.prototype._updateStreamTrack=function(e,t,n,r){return Bo(this,void 0,void 0,function(){var o,a,l,d,p,u;return Ho(this,function(v){switch(v.label){case 0:return v.trys.push([0,6,,7]),this.an.info("zcs.ut call"),o=this.stream&&this.checkPreview(this.stream),this.stream&&o?(a={errorCode:0,extendedData:""},e?[3,2]:(this.an.info("zcs.ut add"),[4,this.gh.handleTrack("ADD",this.stream,t,n,r)])):(this.an.info("zcs.ut stream:".concat(!this.stream,", previewer:").concat(!o)),[2]);case 1:return a=v.sent(),[3,5];case 2:return e.id==t.id?[3,5]:(this.an.info("zcs.ut replace"),l=!1,this.fh&&this.dh&&this.fh!==this.dh&&(l=!0),[4,this.nh.replaceTrack(this.stream,t,void 0,{isReplaceNew:l,isCaptureStream:!0})]);case 3:return a=v.sent(),this.gn.trackUtils.stopTrack(e),d=this.gn.getPublisher(this.stream),(p=d==null?void 0:d.previewer.videoInfo.bitRate)?[4,d==null?void 0:d.setBitrate(p)]:[3,5];case 4:v.sent(),v.label=5;case 5:return n(a),[3,7];case 6:return u=v.sent(),r(u),[3,7];case 7:return[2]}})})},s.prototype.Sh=function(e,t){var n;if(!this.stream){var r=[];if(this.originAudioStream){var o=this.checkPreview(this.originAudioStream);o&&o.audioTrack&&(r.push(o.audioTrack),this.ph=o.audioTrack)}if(this.originVideoStream){var a=this.checkPreview(this.originVideoStream);a&&a.videoTrack&&(r.push(a.videoTrack),this.mh=a.videoTrack)}this.stream=new MediaStream(r)}var l=this.checkPreview(this.stream);if(!l){var d={},p=Li(this.pn,this.an);if((0,B.TE)(e.bitrate)||(d.bitRate=e.bitrate),(0,B.TE)(e.minBitrate)||(d.minBitrate=e.minBitrate),(0,B.TE)(e.startBitrate)||(d.startBitrate=e.startBitrate),d.audioBitrate=(0,B.Cs)(e.audioBitrate)?1e3*e.audioBitrate:1e3*(p.audioBitrate||48),t==="camera"){var u=this.pn.settingConfig.getSetting("camera_audio_bitrate",!0),v=this.pn.settingConfig.getSetting("camera_video_bitrate",!0);(0,B.Cs)(d.audioBitrate)&&(0,B.Cs)(u)&&(d.audioBitrate=1e3*u),(0,B.Cs)(d.bitRate)&&(0,B.Cs)(v)&&(d.bitRate=v)}d.channelCount=(0,B.TE)(e.channelCount)?p.channelCount||1:e.channelCount,l=this.createZegoStreamPreview(this.stream,!1,void 0,d),this.stream=this.nh.getStreamByCanvas(this.stream)}this.stream&&this.wh(this.stream,this.originVideoStream,this.originAudioStream,!0),l&&((n=this.stream)===null||n===void 0?void 0:n.getAudioTracks().length)===0&&this.nh.setEmptyAudioTrack(this.stream,l),this.nh.initCopyMusic(this.stream),l.zegoCaptureStream=this,this.dh=this.fh,this.mn=l},s.prototype.createZegoStreamPreview=function(e,t,n,r){var o=new qc(this.an,this.pn,this.gn,n,t);return this.gn.previewStreamList.push(o),o.localStream=e,o.mediaStreamConfig={},r&&(o.videoInfo=Dn(Dn({},o.videoInfo),r),o.mediaStreamConfig.bitRate=r.bitRate),o.initMediaTrack(e),n=="screen"&&this.nh.addShareScreenEnd(e),o},s.prototype.checkPreview=function(e){return this.gn.checkPreview(e)},s.prototype.wh=function(e,t,n,r){if(r===void 0&&(r=!1),e){var o=this.checkPreview(e);if(o){var a=t&&this.checkPreview(t),l=n&&this.checkPreview(n),d={},p={},u=!1;if(o.previewType=(a==null?void 0:a.previewType)||(l==null?void 0:l.previewType),a){var v=a.videoInfo,x=a.mediaStreamConfig;o.previewType=a.previewType,o.videoPreviewType=a.videoPreviewType,o.previewSuc=!0,d=Dn({videoQuality:o.mediaStreamConfig.videoQuality,bitRate:o.mediaStreamConfig.bitRate},x),u=x.video;var U=Dn({},v);if(Yl(Yl([],Ud,!0),["audioBitrate"],!1).forEach(function(Bt){delete U[Bt]}),r){["bitRate","startBitrate","minBitRate"].forEach(function(Bt){delete U[Bt]});var te=o.videoInfo.bitRate,le=o.hasUserSetBitrate;if(this.an.info("zcs.up ".concat(o.previewType," hasUserSetBitrate: ").concat(le,", bitrate: ")+te),a.mediaStreamConfig.videoQuality&&[1,2,3].includes(a.mediaStreamConfig.videoQuality)||!te||!le){var se=v.bitRate,We=this.pn.settingConfig.getSetting("camera_video_bitrate",!0);(0,B.Cs)(se)&&(0,B.Cs)(We)&&(this.an.info("zcs.up ".concat(o.previewType," cloud videoBitrate ").concat(We)),se=We),this.an.info("zcs.up ".concat(o.previewType," videoBitrate changed ").concat(te," to ").concat(se)),U.bitRate=se}this.isPublish&&delete U.keyFrameInterval}p=Dn({},U)}if(l){v=l.videoInfo;var Ke=(x=l.mediaStreamConfig).audio,Ze=x.AEC,et=x.AGC,ht=x.ANS,gt=x.audioBitrate,Et=x.channelCount,At=x.audioInput;o.audioPreviewType=l.audioPreviewType,o.previewSuc=!0,this.isPublish||(p.channelCount=v.channelCount);var Ot=o.videoInfo.audioBitrate;r&&Ot||(this.an.info("zcs.up ".concat(r," audioBitrate changed ").concat(Ot," to ").concat(v.audioBitrate)),p.audioBitrate=v.audioBitrate),d=Dn(Dn({},d),{audio:Ke,AEC:Ze,AGC:et,ANS:ht,audioBitrate:gt,channelCount:Et,audioInput:At})}d.video=u,o.mediaStreamConfig=d,o.videoInfo=Dn(r?Dn({},o.videoInfo):{},p)}}},s.prototype._getVideoBitrate=function(e){return(0,B.Cs)(this.eu.videoBitrate)?Dn(Dn({},e),{bitrate:this.eu.videoBitrate}):Dn(Dn({},e),this.eu.videoBitrate)},s.prototype._getAudioBitrate=function(e){return e.audioBitrate=this.eu.audioBitrate,e},s.prototype._createStream=function(e,t,n,r,o){return Bo(this,void 0,void 0,function(){var a,l,d,p,u,v,x,U,te,le,se;return Ho(this,function(We){switch(We.label){case 0:return We.trys.push([0,2,,3]),a=n==xs.video||n==xs.videoAndAudio,l=n==xs.audio||n==xs.videoAndAudio,e=this._getVideoBitrate(e),e=this._getAudioBitrate(e),this.an.info("zcs.cs config:"+JSON.stringify(((le={})[t]=e,le))),[4,this.nh.createStream((se={},se[t]=e,se))];case 1:return d=We.sent(),this.fh=t,p=this.checkPreview(d),u=(p==null?void 0:p.originVideoTrack)||d.getVideoTracks()[0],v=(p==null?void 0:p.originAudioTrack)||d.getAudioTracks()[0],l&&a?(x=new MediaStream([u]),U=new MediaStream([v]),this.createZegoStreamPreview(x,!0,t),this.createZegoStreamPreview(U,!0,t),this.wh(x,d,null),this.wh(U,null,d),this.rh.push(x),this.eh.push(U),this.yh(x,0),this.yh(U,1),!this.stream&&p?(this.stream=d,this.ph=v,this.mh=u,p.zegoCaptureStream=this,this.mn=p):this.updateStreamVideoAndAudio(r,o,0)):a?(this.yh(d,0),this.rh.push(d),this.stream?this.updateStreamVideoTrack(r,o,0):this.Sh(e,t)):l&&(U=new MediaStream([v]),this.createZegoStreamPreview(U,!0,t),this.wh(U,null,d),this.yh(U,1),this.eh.push(U),this.eh.push(d),this.stream?this.updateStreamAudioTrack(r,o,0):this.Sh(e,t)),this.isPublish||(this.autoPlay||this.sh)&&this.autoPlay&&this.playVideo(),this.bh(),r({errorCode:0,extendedData:""}),[3,3];case 2:return te=We.sent(),o({errorCode:te.errorCode||te.code,extendedData:te.extendedData||te.msg}),[3,3];case 3:return[2]}})})},s.prototype.startCaptureMicrophone=function(e){var t=this;return e===void 0&&(e={}),new he.l3(function(n){return Bo(t,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x,U,te=this;return Ho(this,function(le){switch(le.label){case 0:this.an.info("".concat(r="zcs.scm"," call ").concat(JSON.stringify(e))),o=this.Eh(j.e7.event),a=function(se){var We,Ke,Ze;if(te.mn&&!te.isPublish){var et=(We=te.mn)===null||We===void 0?void 0:We.mediaStreamConfig,ht=et.channelCount;Ze={audio:{input:et.audioInput,ANS:et.ANS,AEC:et.AEC,AGC:et.AGC,bps:((Ke=te.mn)===null||Ke===void 0?void 0:Ke.videoInfo).audioBitrate,channelCount:ht}}}(0,he.lA)(o,{preview_conf:Ze,stream_options:{audio:e},error:se.errorCode||0,message:se.extendedData||se.message}),n(se)},le.label=1;case 1:return le.trys.push([1,3,,4]),l={},!((v=this.eu.camera)===null||v===void 0)&&v.audio&&(0,B.w)((x=this.eu.camera)===null||x===void 0?void 0:x.audio)&&(l=Dn({},Tr((U=this.eu.camera)===null||U===void 0?void 0:U.audio))),d=this.kh("microphone",r),l=Dn(Dn(Dn({},l),d),Tr(e)),p=Dn({audio:!0,video:!1,audioInput:l.input},l),[4,this._createStream(p,"camera",1,a,a)];case 2:return le.sent(),this.an.info("zcs.scm success"),[3,4];case 3:return u=le.sent(),a(u),this.an.info("zcs.scm fail"),[3,4];case 4:return[2]}})})})},s.prototype.startCaptureCamera=function(e){var t=this;return e===void 0&&(e={}),new he.l3(function(n){return Bo(t,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x,U,te=this;return Ho(this,function(le){switch(le.label){case 0:this.an.info("".concat(r="zcs.scc"," call ").concat(JSON.stringify(e))),o=this.Eh(j.Oq.event),a=function(se){var We,Ke,Ze;if(te.mn&&!te.isPublish){var et=(We=te.mn)===null||We===void 0?void 0:We.mediaStreamConfig,ht=(Ke=te.mn)===null||Ke===void 0?void 0:Ke.videoInfo,gt=ht.contentHint;Ze={video:{input:et.videoInput,w:ht.width,h:ht.height,fps:ht.frameRate,bps:1e3*ht.bitRate,keyFrameInterval:ht.keyFrameInterval,optimizationMode:gt||void 0,facingMode:et.facingMode}}}(0,he.lA)(o,{preview_conf:Ze,stream_options:{video:e},error:se.errorCode||0,message:se.extendedData||se.message}),n(se)},le.label=1;case 1:return le.trys.push([1,3,,4]),l={},!((v=this.eu.camera)===null||v===void 0)&&v.video&&(0,B.w)((x=this.eu.camera)===null||x===void 0?void 0:x.video)&&(l=Dn({},Tr((U=this.eu.camera)===null||U===void 0?void 0:U.video))),d=this.kh("camera",r),l=Dn(Dn(Dn({},l),d),Tr(e)),p=Dn({audio:!1,video:!0,videoInput:l.input,videoQuality:l.quality,videoOptimizationMode:l.optimizationMode},l),[4,this._createStream(p,"camera",0,a,a)];case 2:return le.sent(),this.an.info("zcs.scc success"),[3,4];case 3:return u=le.sent(),a(u),this.an.info("zcs.scc fail"),[3,4];case 4:return[2]}})})})},s.prototype.startCaptureCameraAndMicrophone=function(e,t){var n=this;return e===void 0&&(e={}),t===void 0&&(t={}),new he.l3(function(r){return Bo(n,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et=this;return Ho(this,function(ht){switch(ht.label){case 0:this.an.info("".concat(o="zcs.sccm"," call c:").concat(JSON.stringify(e),", m:").concat(JSON.stringify(t))),a=this.Eh(j.N7.event),l=function(gt){var Et,At,Ot;if(et.mn&&!et.isPublish){var Bt=(Et=et.mn)===null||Et===void 0?void 0:Et.mediaStreamConfig,Kt=(At=et.mn)===null||At===void 0?void 0:At.videoInfo,Ht=Kt.contentHint;Ot={video:{input:Bt.videoInput,w:Kt.width,h:Kt.height,fps:Kt.frameRate,bps:1e3*Kt.bitRate,keyFrameInterval:Kt.keyFrameInterval,optimizationMode:Ht||void 0,facingMode:Bt.facingMode},audio:{input:Bt.audioInput,ANS:Bt.ANS,AEC:Bt.AEC,AGC:Bt.AGC,bps:Kt.audioBitrate,channelCount:Bt.channelCount}}}(0,he.lA)(a,{preview_conf:Ot,stream_options:{video:e,audio:t},error:gt.errorCode||0,message:gt.extendedData||gt.message}),r(gt)},ht.label=1;case 1:return ht.trys.push([1,3,,4]),d={},!((te=this.eu.camera)===null||te===void 0)&&te.video&&(0,B.w)((le=this.eu.camera)===null||le===void 0?void 0:le.video)&&(d=Dn({},Tr((se=this.eu.camera)===null||se===void 0?void 0:se.video))),p=this.kh("camera",o),d=Dn(Dn(Dn({},d),p),Tr(e)),u={},!((We=this.eu.camera)===null||We===void 0)&&We.audio&&(0,B.w)((Ke=this.eu.camera)===null||Ke===void 0?void 0:Ke.audio)&&(u=Dn({},Tr((Ze=this.eu.camera)===null||Ze===void 0?void 0:Ze.audio))),v=this.kh("microphone",o),u=Dn(Dn(Dn({},u),v),Tr(t)),x=Dn(Dn(Dn({audio:!0,video:!0,videoInput:d==null?void 0:d.input,videoQuality:d==null?void 0:d.quality,videoOptimizationMode:d==null?void 0:d.optimizationMode},d),{audioInput:u==null?void 0:u.input}),u),[4,this._createStream(x,"camera",2,l,l)];case 2:return ht.sent(),this.an.info("zcs.sccm success"),[3,4];case 3:return U=ht.sent(),l(U),this.an.info("zcs.sccm fail"),[3,4];case 4:return[2]}})})})},s.prototype.autoCapture=function(){var e=this;return new he.l3(function(t,n){return Bo(e,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x,U,te,le;return Ho(this,function(se){switch(se.label){case 0:this.an.info("zcs.ac call"),se.label=1;case 1:return se.trys.push([1,23,,24]),l=(o=this.eu).custom,d=o.screen,(a=o.camera)?(this.an.info("zcs.ac camera:".concat(JSON.stringify(a))),te=a.video,(U=a.audio)&&te?(p=(0,B.w)(te)?te:void 0,u=(0,B.w)(U)?U:void 0,[4,this.startCaptureCameraAndMicrophone(p,u)]):[3,3]):[3,8];case 2:return r=se.sent(),[3,7];case 3:return U?[4,this._h(U,this.startCaptureMicrophone)]:[3,5];case 4:return r=se.sent(),[3,7];case 5:return te?[4,this._h(te,this.startCaptureCamera)]:[3,7];case 6:r=se.sent(),se.label=7;case 7:return[3,22];case 8:return d?(this.an.info("zcs.ac screen:".concat(JSON.stringify(d))),te=d.video,(U=d.audio)?(v=te,x=U,(0,B.dd)(te)&&(v={}),(0,B.dd)(U)&&(x={}),[4,this.startCaptureScreenWithAudio(v,x)]):[3,10]):[3,13];case 9:return r=se.sent(),[3,12];case 10:return[4,this._h(te,this.startCaptureScreen)];case 11:r=se.sent(),se.label=12;case 12:return[3,22];case 13:return l?(this.an.info("zcs.ac custom:".concat(JSON.stringify(l))),te=l.video,(U=l.audio)&&te&&U.source===te.source?[4,this.startCaptureCustomVideoAndAudio(te,U)]:[3,15]):[3,20];case 14:return r=se.sent(),[3,19];case 15:return U?[4,this._h(U,this.startCaptureCustomAudio)]:[3,17];case 16:r=se.sent(),se.label=17;case 17:return te?[4,this._h(te,this.startCaptureCustomVideo)]:[3,19];case 18:r=se.sent(),se.label=19;case 19:return[3,22];case 20:return[4,this.startCaptureCameraAndMicrophone({},{})];case 21:r=se.sent(),se.label=22;case 22:return r||n({errorCode:Ft.mrK.code,extendedData:Ft.mrK.message}),(r==null?void 0:r.errorCode)!==0?n(r):t(r),[3,24];case 23:return le=se.sent(),n(le),[3,24];case 24:return[2]}})})})},s.prototype.startCaptureCustomAudio=function(e){var t=this;return new he.l3(function(n){return Bo(t,void 0,void 0,function(){var r,o,a,l,d,p,u,v=this;return Ho(this,function(x){switch(x.label){case 0:if(this.an.info("".concat(r="zcs.scca"," call ").concat(JSON.stringify(e))),o=this.Eh(j.eH.event),a=function(U){var te,le,se;v.mn&&!v.isPublish&&(se={audio:{bps:((te=v.mn)===null||te===void 0?void 0:te.videoInfo).audioBitrate,channelCount:(le=v.mn)===null||le===void 0?void 0:le.mediaStreamConfig.channelCount}}),(0,he.lA)(o,{preview_conf:se,stream_options:{audio:v.Oh(e)},error:U.errorCode||0,message:U.extendedData||U.message}),n(U)},(l=this.Ih(e)).errorCode)return a(l),[2];x.label=1;case 1:return x.trys.push([1,3,,4]),d=this.kh("customAudio",r),[4,this._createStream(Dn(Dn(Dn(Dn({},Tr((u=this.eu.custom)===null||u===void 0?void 0:u.audio)),d),Tr(e)),{audio:!0}),"custom",1,a,a)];case 2:return x.sent(),this.an.info("".concat(r," success")),[3,4];case 3:return p=x.sent(),a(p),this.an.info("".concat(r," fail")),[3,4];case 4:return[2]}})})})},s.prototype.startCaptureCustomVideo=function(e){var t=this;return new he.l3(function(n){return Bo(t,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x=this;return Ho(this,function(U){switch(U.label){case 0:if(this.an.info("".concat(r="zcs.sccv"," call ").concat(JSON.stringify(e))),o=this.Eh(j.pT.event),a=function(te){var le,se;if(x.mn&&!x.isPublish){var We=(le=x.mn)===null||le===void 0?void 0:le.videoInfo,Ke=We.contentHint;se={video:{bps:1e3*We.bitRate,keyFrameInterval:We.keyFrameInterval,optimizationMode:Ke||void 0}}}(0,he.lA)(o,{preview_conf:se,stream_options:{video:x.Oh(e)},error:te.errorCode||0,message:te.extendedData||te.message}),n(te)},(l=this.Ih(e)).errorCode)return a(l),[2];U.label=1;case 1:return U.trys.push([1,3,,4]),d=this.kh("customVideo",r),p=Object.assign({},Tr((v=this.eu.custom)===null||v===void 0?void 0:v.video),d,Tr(e)),[4,this._createStream(Dn({videoOptimizationMode:p.optimizationMode},p),"custom",0,a,a)];case 2:return U.sent(),this.an.info("".concat(r," success")),[3,4];case 3:return u=U.sent(),a(u),this.an.info("".concat(r," fail")),[3,4];case 4:return[2]}})})})},s.prototype.startCaptureCustomVideoAndAudio=function(e,t){var n=this;return new he.l3(function(r){return Bo(n,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt=this;return Ho(this,function(Et){switch(Et.label){case 0:if(this.an.info("".concat(o="zcs.sccva"," call v:").concat(JSON.stringify(e)," a:").concat(JSON.stringify(t))),a=this.Eh(j.Z1.event),l=function(At){var Ot,Bt,Kt;if(gt.mn&&!gt.isPublish){var Ht=((Ot=gt.mn)===null||Ot===void 0?void 0:Ot.mediaStreamConfig).channelCount,Zt=(Bt=gt.mn)===null||Bt===void 0?void 0:Bt.videoInfo,un=Zt.contentHint;Kt={video:{bps:1e3*Zt.bitRate,keyFrameInterval:Zt.keyFrameInterval,optimizationMode:un||void 0},audio:{bps:Zt.audioBitrate,channelCount:Ht}}}(0,he.lA)(a,{preview_conf:Kt,stream_options:{video:gt.Oh(e),audio:gt.Oh(t)},error:At.errorCode||0,message:At.extendedData||At.message}),r(At)},(d=this.Ih(e)).errorCode)return l(d),[2];if((p=this.Ih(t)).errorCode)return l(p),[2];Et.label=1;case 1:return Et.trys.push([1,7,,8]),u=this.kh("customAudio",o),v=this.kh("customVideo",o),e.source!=t.source?[3,3]:[4,this._createStream(Dn(Dn(Dn(Dn(Dn(Dn(Dn({videoOptimizationMode:e.optimizationMode||v.optimizationMode||((le=(te=this.eu.custom)===null||te===void 0?void 0:te.video)===null||le===void 0?void 0:le.optimizationMode)},Tr((se=this.eu.custom)===null||se===void 0?void 0:se.video)),Tr((We=this.eu.custom)===null||We===void 0?void 0:We.audio)),v),u),Tr(e)),Tr(t)),{audio:!0}),"custom",2,l,l)];case 2:return Et.sent(),[3,6];case 3:return x={video:!1,audio:!1},[4,this._createStream(Dn(Dn(Dn(Dn({videoOptimizationMode:e.optimizationMode||v.optimizationMode||((Ze=(Ke=this.eu.custom)===null||Ke===void 0?void 0:Ke.video)===null||Ze===void 0?void 0:Ze.optimizationMode)},(et=this.eu.custom)===null||et===void 0?void 0:et.video),v),e),{video:!0}),"custom",0,function(At){x.video=!0,x.audio&&l(At)},l)];case 4:return Et.sent(),[4,this._createStream(Dn(Dn(Dn(Dn({},(ht=this.eu.custom)===null||ht===void 0?void 0:ht.audio),u),t),{audio:!0}),"custom",1,function(At){x.audio=!0,x.video&&l(At)},l)];case 5:Et.sent(),Et.label=6;case 6:return this.an.info("zcs.sccva success"),[3,8];case 7:return U=Et.sent(),l(U),this.an.info("zcs.sccva fail"),[3,8];case 8:return[2]}})})})},s.prototype.startCaptureScreen=function(e){var t=this;return e===void 0&&(e={}),new he.l3(function(n,r){return Bo(t,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le=this;return Ho(this,function(se){switch(se.label){case 0:this.an.info("".concat(o="zcs.scs"," call ").concat(JSON.stringify(e))),a=this.Eh(j.xp.event),l=function(We){var Ke,Ze;if(le.mn&&!le.isPublish){var et=(Ke=le.mn)===null||Ke===void 0?void 0:Ke.videoInfo,ht=et.contentHint;Ze={video:{w:et.width,h:et.height,fps:et.frameRate,bps:1e3*et.bitRate,keyFrameInterval:et.keyFrameInterval,optimizationMode:ht||void 0}}}(0,he.lA)(a,{preview_conf:Ze,stream_options:{video:Rn(e||{},["captureElement"])},error:We.errorCode||0,message:We.extendedData||We.message}),n(We)},se.label=1;case 1:return se.trys.push([1,3,,4]),d={},!((x=this.eu.screen)===null||x===void 0)&&x.video&&(0,B.w)((U=this.eu.screen)===null||U===void 0?void 0:U.video)&&(d=Dn({},Tr((te=this.eu.screen)===null||te===void 0?void 0:te.video))),p=this.kh("screenVideo",o),d=Dn(Dn(Dn({},d),p),Tr(e)),u=Dn(Dn({videoOptimizationMode:d.optimizationMode,videoQuality:d.quality},d),{audio:!1}),[4,this._createStream(u,"screen",0,l,l)];case 2:return se.sent(),this.an.info("".concat(o," success")),[3,4];case 3:return v=se.sent(),l(v),this.an.info("".concat(o," fail")),[3,4];case 4:return[2]}})})})},s.prototype.startCaptureScreenWithAudio=function(e,t){var n=this;return e===void 0&&(e={}),t===void 0&&(t={}),new he.l3(function(r,o){return Bo(n,void 0,void 0,function(){var a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht=this;return Ho(this,function(gt){switch(gt.label){case 0:this.an.info("".concat(a="zcs.scs"," call v:").concat(JSON.stringify(e)," a:").concat(JSON.stringify(t))),l=this.Eh(j.tp.event),d=function(Et){var At,Ot,Bt;if(ht.mn&&!ht.isPublish){var Kt=(At=ht.mn)===null||At===void 0?void 0:At.mediaStreamConfig,Ht=(Ot=ht.mn)===null||Ot===void 0?void 0:Ot.videoInfo,Zt=Ht.contentHint;Bt={video:{w:Ht.width,h:Ht.height,fps:Ht.frameRate,bps:1e3*Ht.bitRate,keyFrameInterval:Ht.keyFrameInterval,optimizationMode:Zt||void 0},audio:{ANS:Kt.ANS,AEC:Kt.AEC,AGC:Kt.AGC,bps:Ht.audioBitrate,channelCount:Kt.channelCount}}}(0,he.lA)(l,{preview_conf:Bt,stream_options:{video:Rn(e||{},["captureElement"]),audio:t},error:Et.errorCode||0,message:Et.extendedData||Et.message}),r(Et)},gt.label=1;case 1:return gt.trys.push([1,3,,4]),p={},!((le=this.eu.screen)===null||le===void 0)&&le.video&&(0,B.w)((se=this.eu.screen)===null||se===void 0?void 0:se.video)&&(p=Dn({},Tr((We=this.eu.screen)===null||We===void 0?void 0:We.video))),u=this.kh("screenVideo",a),p=Dn(Dn(Dn({},p),u),Tr(e)),v={},!((Ke=this.eu.screen)===null||Ke===void 0)&&Ke.audio&&(0,B.w)((Ze=this.eu.screen)===null||Ze===void 0?void 0:Ze.audio)&&(v=Dn({},Tr((et=this.eu.screen)===null||et===void 0?void 0:et.audio))),x=this.kh("screenAudio",a),v=Dn(Dn(Dn({},v),x),Tr(t)),U=Dn(Dn(Dn({videoOptimizationMode:p.optimizationMode,videoQuality:p.quality},p),v),{audio:!0}),[4,this._createStream(U,"screen",2,d,d)];case 2:return gt.sent(),this.an.info("zcs.scs success"),[3,4];case 3:return te=gt.sent(),d(te),this.an.info("zcs.scs fail"),[3,4];case 4:return[2]}})})})},s.prototype.stopCaptureAudio=function(){var e=this;return new he.l3(function(t){var n,r,o=!0;if(e.originAudioStream){e.an.info("zcs.sca call stop capture");var a=e.originAudioStream.getAudioTracks()[0];!((n=e.stream)===null||n===void 0)&&n.getAudioTracks()[0]&&e.isPublish&&e.stream&&(e.an.info("zcs.sca stop audio"),o=((r=e.mn)===null||r===void 0?void 0:r.audioPreviewType)==="camera"?e.mn.enableMicrophoneOnly(!1):e.gh.enableMicrophone(e.stream,!0),e.mn&&(e.mn.syncAudioEnabled=!1)),e.an.info("zcs.sca stop result:"+o),o&&(a.stop(),e.originAudioStream=null,e.stopPlayCaptureAudio(),e.bh())}t(o)})},s.prototype.stopCaptureVideo=function(){var e;return Bo(this,void 0,void 0,function(){var t,n,r,o,a=this;return Ho(this,function(l){switch(l.label){case 0:if(t=!0,this.an.info("zcs.scv call stop capture"),!this.originVideoStream)return[3,7];n=this.originVideoStream.getVideoTracks()[0],r=(e=this.stream)===null||e===void 0?void 0:e.getVideoTracks()[0],l.label=1;case 1:return l.trys.push([1,6,,7]),r?this.mn?(this.an.info("zcs.scv stop stream video"),this.mn.videoPreviewType!="camera"?[3,3]:[4,this.gh.enableCameraCapturing(this.mn,!1)]):[3,5]:[3,5];case 2:return t=l.sent(),[3,5];case 3:return[4,this.mn.stopCaptureVideo()];case 4:l.sent(),t=!0,l.label=5;case 5:return this.an.info("zcs.scv stop result:"+t),t&&(this.gn.trackUtils.stopTrack(n),this.originVideoStream=null,this.stopPlayCaptureVideo(),this.rh.forEach(function(d){return a.nh.destroyStream(d)}),this.rh=[],this.bh()),[3,7];case 6:return o=l.sent(),this.an.error("zcs.scv "+JSON.stringify(o)),t=!1,[3,7];case 7:return[2,t]}})})},s.prototype.Rh=function(e,t){t===void 0&&(t=!1);var n=e&&this.checkPreview(e);if(!n)throw new Error("The stream does not exist, you must first capture the stream");return t&&n?new ll(e,n,{clearLastFrame:this.pn.engineConfig.previewClearLastFrame}):(n==null?void 0:n.getViewer())||null},s.prototype.Th=function(){var e,t,n;this.hh=this.Rh(this.stream),(e=this.hh)===null||e===void 0||e.on("canPlayAudio",this.ou.canPlayAudio),(t=this.hh)===null||t===void 0||t.on("canPlayVideo",this.ou.canPlayVideo),(n=this.hh)===null||n===void 0||n.on("autoplayFailed",this.ou.autoplayFailed)},s.prototype.playAudio=function(e){var t;if(this.an.info("zcs.pa call"),!this.stream)return this.an.warn("zcs.pa You need to capture the audio stream first");this.hh||this.Th(),(t=this.hh)===null||t===void 0||t.playAudio(e,!0),this.audioMuted=!1},s.prototype.playCaptureAudio=function(e){var t,n,r;if(this.an.info("zcs.pca call"),!this.originAudioStream)return this.an.warn("zcs.pca You need to capture the audio stream first");this.uh||(this.uh=this.Rh(this.originAudioStream),(t=this.uh)===null||t===void 0||t.on("canPlayAudio",this.ou.canPlayCaptureAudio),(n=this.uh)===null||n===void 0||n.on("autoplayFailed",this.ou.autoplayCaptureFailed)),this.audioCaptureMuted=!1,(r=this.uh)===null||r===void 0||r.playAudio(e,!0)},s.prototype.playVideo=function(e,t){var n;if(this.an.info("zcs.pv call"),this.stream){if(this.hh&&this.hh.inited||(this.Th(),(n=this.hh)===null||n===void 0||n.setAudioMuted(this.audioMuted)),this.hh){var r=e||this.view;r&&(0,B.qi)(r)?(this.hh.playVideo(r,t),this.sh=!0):this.an.error("zcs.pv Execute `playVideo` failed, container not exist")}}else this.an.warn("zcs.pv You need to capture the video stream first")},s.prototype.playCaptureVideo=function(e,t){this.an.info("zcs.pcv call");var n=this.ah[0]||null;if(this.originVideoStream){if(!n||this.eu.multiplacePreview){if(!(n=this.Rh(this.originVideoStream,n&&this.eu.multiplacePreview)))return;n.on("canPlayVideo",this.ou.canPlayCaptureVideo),n.on("autoplayFailed",this.ou.autoplayCaptureFailed),this.ah.push(n)}var r=e||this.eu.captureView;r&&(0,B.qi)(r)?(n.playVideo(r,t),this.oh=!0):this.an.error("zcs.pcv Execute `playVideo` failed, container not exist")}else this.an.warn("zcs.pv You need to capture the video stream first")},s.prototype.updatePlayVideo=function(){this.hh&&this.stream?this.hh.setVideo(this.stream.getVideoTracks()[0]):this.autoPlay&&this.playVideo()},s.prototype.updatePlayAudio=function(){this.hh&&this.stream&&this.hh.setAudio(this.stream.getAudioTracks()[0])},s.prototype.takeStreamSnapshot=function(e){var t;return((t=this.hh)===null||t===void 0?void 0:t.takeStreamSnapshot(e))||""},s.prototype.resumeVideo=function(){var e;return(e=this.hh)===null||e===void 0?void 0:e.resume(!0,["video"])},s.prototype.resumeAudio=function(){var e;return(e=this.hh)===null||e===void 0?void 0:e.resume(!0,["audio"])},s.prototype.stopVideo=function(){var e;(e=this.hh)===null||e===void 0||e.stopVideo(),this.sh=!1},s.prototype.stopAudio=function(){this.hh&&(this.hh.stopAudio(),this.audioMuted=!0)},s.prototype.stopPlayCaptureVideo=function(){this.ah.forEach(function(e){e.stopVideo(),e.destroy()}),this.ah=[],this.oh=!1},s.prototype.stopPlayCaptureAudio=function(){this.uh&&(this.uh.destroy(),this.uh=null,this.audioCaptureMuted=!0)},s.prototype.setVolume=function(e){return!!this.hh&&this.hh.setVolume(e)},s.prototype.setAudioOutputDevice=function(e){if(this.hh)return this.hh.useAudioOut(e)},s.prototype._destroyCacheStream=function(e){var t=this;return e.filter(function(n){return!!n.active||(t.nh.destroyStream(n),!1)})},s.prototype.bh=function(){this.eh=this._destroyCacheStream(this.eh),this.rh=this._destroyCacheStream(this.rh)},s.prototype.kh=function(e,t){var n=this.stream&&this.checkPreview(this.stream);if(!this.stream||!n)return this.an.info("".concat(t," stream:").concat(!this.stream,", previewer:").concat(!n)),{};var r={},o=n.mediaStreamConfig,a=n.videoPreviewType,l=n.audioPreviewType;if(o){switch(e){case"camera":if(a==="camera"){var d=o.quality;r={input:o.videoInput,quality:o.videoQuality||d,facingMode:o.facingMode,width:o.width,height:o.height,frameRate:o.frameRate,optimizationMode:o.optimizationMode,keyFrameInterval:o.keyFrameInterval}}break;case"microphone":l==="camera"&&(r={ANS:o.ANS,AGC:o.AGC,AEC:o.AEC,channelCount:o.channelCount});break;case"customVideo":a==="custom"&&(r={optimizationMode:o.optimizationMode,keyFrameInterval:o.keyFrameInterval});break;case"customAudio":l==="custom"&&(r={channelCount:o.channelCount});break;case"screenVideo":if(a==="screen"){var p=n==null?void 0:n.mediaStreamConfig;d=p.quality,r={quality:p.videoQuality||d,width:p.width,height:p.height,frameRate:p.frameRate,sourceID:p.sourceID,optimizationMode:p.optimizationMode,keyFrameInterval:p.keyFrameInterval,captureElement:p.captureElement}}break;case"screenAudio":if(l==="screen"){var u=n==null?void 0:n.mediaStreamConfig;r={ANS:u.ANS,AGC:u.AGC,AEC:u.AEC}}}r=r&&Tr(r)}return r},s.prototype.Ih=function(e){return e!=null&&e.source&&((0,B.Si)(e==null?void 0:e.source)||(0,B.dr)(e==null?void 0:e.source))?{errorCode:0,extendedData:""}:{errorCode:Ft.LLz.code,extendedData:Ft.LLz.message+" source not exist or error"}},s.prototype.Eh=function(e){var t=(0,he.fU)(this.cr,I.t0.H,"",e,j.nO.event);return t.setAttributes({local_stream_id:this.id}),t},s.prototype.Oh=function(e){return Dn(Dn({},e),{source:void 0,source_type:e!=null&&e.source?(0,B.Si)(e==null?void 0:e.source)?"Element":"MediaStream":void 0})},s.prototype.destroy=function(){var e,t=this;this.originAudioStream&&(this.originAudioStream=null),this.originVideoStream&&(this.originVideoStream=null),this.stream&&(this.nh.destroyStream(this.stream),this.stream=null),this.eh.forEach(function(n){return t.nh.destroyStream(n)}),this.rh.forEach(function(n){return t.nh.destroyStream(n)}),this.eh=[],this.rh=[],this.stopPlayCaptureVideo(),this.stopPlayCaptureAudio(),this.stopVideo(),this.stopAudio(),(e=this.hh)===null||e===void 0||e.destroy(),this.hh=null,this._a=new ul},s})(),Vc="zsc.rd.qd",zh=(function(){function s(e,t,n){this.an=e,this.pn=t,this.gn=n,this.Ch=2e3,this.lastRecordDeviceTime=0}return s.prototype.getDetectionStreams=function(){var e=[];return this.gn.previewStreamList.forEach(function(t){t.localStream&&e.push(t.localStream)}),e},s.prototype.Ah=function(e){this.an.warn(Vc+" DeviceError: ".concat(Ft.f5Z.code," ").concat(Ft.f5Z.message)),this.pn.actionListener("_deviceError",Ft.f5Z.code,e,"micro"),this.pn.actionListener("deviceError",Ft.f5Z.code,e)},s.prototype.zh=function(e){if(this.an.info(Vc+" get name of device id: ".concat(JSON.stringify(e))),!e.deviceID&&!this.Dh&&e.trackLabel=="")return"unknown";if(!e.deviceID||e.deviceID==="default")return e.trackLabel;for(var t in this.Dh){var n=this.Dh[t];if(n)for(var r=0,o=n;r<o.length;r++){var a=o[r];if(a.deviceID===e.deviceID)return a.deviceName}}return e.trackLabel},s.prototype.Nh=function(e){this.an.warn(Vc+" DeviceError: ".concat(Ft.tlN.code," ").concat(Ft.tlN.message)),this.pn.actionListener("_deviceError",Ft.tlN.code,e,"camera"),this.pn.actionListener("deviceError",Ft.tlN.code,e)},s.prototype.Ph=function(e){this.Dh=e},s.prototype.Mh=function(e){return{trackID:e.id,trackLabel:e.label,readyState:e.readyState,deviceID:e.getSettings().deviceId}},s.prototype.xh=function(e,t){return e.findIndex(function(n){return n.deviceName==t.deviceName&&n.preview==n.preview})!==-1},s.prototype.jh=function(e,t){if(e.audioTrack){var n=this.Mh(e.audioTrack),r=performance.now()-e.lastTrackEndTime.audio;if(n.readyState=="ended"&&r<this.Ch){this.an.warn(Vc+" mic device may loose.");var o={deviceName:this.zh(n),preview:e};this.xh(t,o)||t.push(o)}}},s.prototype.qh=function(e,t){if(e.videoTrack){var n=this.Mh(e.videoTrack),r=performance.now()-e.lastTrackEndTime.video;if(n.readyState=="ended"&&r<this.Ch){this.an.warn(Vc+" camera device may loose.");var o={deviceName:this.zh(n),preview:e};this.xh(t,o)||t.push(o)}}},s.prototype.Lh=function(e,t,n){var r=this.gn.getPreviewer(e);r&&(this.jh(r,t),this.qh(r,n))},s.prototype.isRecordQuickly=function(){return performance.now()-this.lastRecordDeviceTime<this.Ch},s.prototype.onDeviceNoChangeQuickly=function(e){var t=this;if(this.isRecordQuickly())this.an.info(Vc+" device no change because record device quickly");else{this.an.info(Vc+" device no change quickly"),this.Ph(e);var n=[],r=[];this.getDetectionStreams().forEach(function(o){t.Lh(o,n,r)}),n.forEach(function(o){t.Ah(o.deviceName),o.preview.updatePublisherStreamMicStatus(!1,2)}),r.forEach(function(o){t.Nh(o.deviceName),o.preview.updatePublisherStreamCameraStatus(!1,2)})}},s})(),vs=function(){return vs=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},vs.apply(this,arguments)},vc=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Hc=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},jh=(function(){function s(e,t,n){this.an=e,this.gn=t,this.pn=n}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.Bh=function(e,t,n,r,o){return vc(this,void 0,void 0,function(){var a,l,d,p,u,v,x,U,te,le,se,We,Ke=this;return Hc(this,function(Ze){switch(Ze.label){case 0:return a=this.gn.checkPreview(t),l=e==="audio",a?a.zegoCaptureStream&&e==="video"&&a.previewType!=="camera"?(this.an.error("zsc.sd.0 stream type cannot set device"),r&&r({errorCode:Ft.jut.code,extendedData:Ft.jut.message}),[2]):e==="video"&&a.mediaStreamConfig.video==0?(this.an.error("zsc.sd.0 camera can not be changed when video is false"),r&&r({errorCode:Ft.R54.code,extendedData:Ft.R54.message}),[2]):l&&a.mediaStreamConfig.audio==0?(this.an.error("zsc.sd.0 microphone can not be changed when audio is false"),r&&r({errorCode:Ft.O2H.code,extendedData:Ft.O2H.message}),[2]):(n==="recapture"&&(a.mediaStreamConfig.facingMode?((o=o||{}).facingMode=(o==null?void 0:o.facingMode)||a.mediaStreamConfig.facingMode,n=""):n=(l?a.mediaStreamConfig.audioInput:a.mediaStreamConfig.videoInput)||""),n&&delete a.mediaStreamConfig.facingMode,d={},e==="video"?(o!=null&&o.facingMode?d.facingMode=o.facingMode:n&&(d.videoInput=n),p=a.videoTrack):(d.audio=!0,d.audioInput=n,p=a.audioTrack),u=(0,or.m0)(),v=(0,or.HR)()&&(0,or.$t)().indexOf("HuaweiBrowser")>-1,this.pn.engineConfig.stopTrackWhenSwitchDevice||o!=null&&o.stopTrack||(0,or.gm)()||(0,or.hL)()&&u&&(0,or.$t)().indexOf("Oriole 64-bit")>-1||v||(0,or.Wu)()?(this.an.info("zsc.sd.0 stop "),this.gn.trackUtils.stopTrack(p),u&&(0,or.gm)()?[4,new Promise(function(et){setTimeout(function(){et(void 0)},100)})]:[3,2]):[3,2]):(this.an.error("zsc.sd.0 preview no found"),r&&r({errorCode:Ft.fzq.code,extendedData:Ft.fzq.message}),[2]);case 1:Ze.sent(),Ze.label=2;case 2:return x=vs(vs({},a.mediaStreamConfig),d),l&&n==="default"&&(this.an.warn("zsc.sd.0 stop preview audio track"),a.audioTrack&&a.audioTrack.stop()),U=a.getMediaStreamConstraints(x).mediaStreamConstraints,te=function(et,ht){ht.getTracks().forEach(function(gt){if(gt.kind===e){var Et=e==="video",At=Et?"videoTrack":"audioTrack",Ot=a[At];Et&&a.streamFromCanvas&&a.stopCanvasStreamTrack(),Ot&&(gt.enabled=Ot.enabled),Et&&a.lowStream&&a.lowStream.getTracks().forEach(function(Kt){Ke.gn.trackUtils.stopTrack(Kt)});var Bt=Ke.gn.getPublishList(t);Bt.length>0&&(!a.muteImage||gt.enabled||!Et)?Bt.map(function(Kt){return Kt.publisher}).forEach(function(Kt){Kt.replacePublishedTrack(gt,!1,{isCamera:!0})}):a&&a.muteImage&&!gt.enabled&&Et?a[At]=gt:a&&a.replacePreviewTrack(gt,!1,{isCamera:!0}),Ke.gn.trackUtils.stopTrack(Ot),a.updateZegoStreamCaptureTrack(gt)}}),a.restartSoundLevel()},l?U.video=!1:U.audio=!1,this.an.info("zsc.sd.0 mediaStreamConstraints "+JSON.stringify(U)),le=Ft.R54,e==="audio"&&(le=Ft.O2H),se=function(et){for(var ht=0,gt=et.getTracks();ht<gt.length;ht++)if(gt[ht].readyState=="ended")return!0;return!1},We=function(et){Ke.gn.trackUtils.stopTrack(e=="video"?a.videoTrack:a.audioTrack),Ke.an.warn("zsc.sd.0 switch "+e+" device failed, stop last device and retry. "+et.toString()),navigator.mediaDevices.getUserMedia(U).then(function(ht){Object.assign(a.mediaStreamConfig,d),te(0,ht),Ke.an.info("zsc.sd.0 swtich "+e+" device success"),r&&r({errorCode:0,extendedData:""})},function(ht){Ke.an.warn("zsc.sd.0 swtich "+e+" device failed and recover last device. "+ht.toString());var gt=a.getMediaStreamConstraints(a.mediaStreamConfig).mediaStreamConstraints;l?gt.video=!1:gt.audio=!1,navigator.mediaDevices.getUserMedia(gt).then(function(Et){te(0,Et),Ke.an.info("zsc.sd.0 recover last "+e+" device success"),r&&r({errorCode:le.code,extendedData:le.message+" "+JSON.stringify(ht)})},function(Et){Ke.an.error("zsc.sd.0 swtich "+e+" device and recover failed, please recreate stream. "+Et.toString()),r&&r({errorCode:le.code,extendedData:le.message+" "+JSON.stringify(Et)})})})},navigator.mediaDevices.getUserMedia(U).then(function(et){se(et)&&Ke.an.error("zsc.sd.0 switch"+e+" device fail, has track ended."),Object.assign(a.mediaStreamConfig,d),te(0,et),Ke.an.info("zsc.sd.0 switch "+e+" device success"),r&&r({errorCode:0,extendedData:""})},We),[2]}})})},s.prototype.setPublishStreamVideoConstraints=function(e,t,n,r){var o,a,l,d,p,u,v,x,U,te,le,se,We;return vc(this,void 0,void 0,function(){var Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn,Bn,mn,vn,cn,nn,gn,yn,bn,i,c=this;return Hc(this,function(h){switch(h.label){case 0:if(this.an.info((Ke="zsc.spsc.0 video")+" constraints "+JSON.stringify(t)),!(Ze=this.gn.checkPreview(e)))return this.an.error(Ke+" preview no found"),r&&r({errorCode:Ft.fzq.code,extendedData:Ft.fzq.message}),[2];if(!(et=Ze.videoTrack))return this.an.error(Ke+" video track not found"),r&&r({errorCode:Ft.fFX.code,extendedData:Ft.fFX.message}),[2];if(ht=Ze.videoPreviewType||Ze.previewType,t.video=Ze.mediaStreamConfig.video,t.videoQuality||(t.videoQuality=4,t.quality=4),t=Tr(t),gt=et==null?void 0:et.getSettings(),Et=JSON.parse(JSON.stringify(Ze.mediaStreamConfig)),At={},[1,2,3].includes(Et.videoQuality)&&(ht==="screen"?((Ot=this.gn.getScreenConstrains(Et))!=null&&Ot.video&&(At.frameRate=(o=Ot.video)===null||o===void 0?void 0:o.frameRate),Ot!=null&&Ot.bitRate&&(At.bitRate=Ot==null?void 0:Ot.bitRate)):(Ot=Ze.getMediaStreamConstraints(Et,!0).mediaStreamConstraints)!=null&&Ot.video&&(At={width:(Bt=Ot==null?void 0:Ot.video).width,height:Bt.height,frameRate:Bt.frameRate,bitRate:Bt.bitRate})),Kt=Object.assign(Ze.mediaStreamConfig,At,t),t.maxBitrate&&(Kt.bitRate=t.maxBitrate),Zt=!1,ht=="screen"?(Ht=this.gn.getScreenConstrains(Kt)).bitRate!==Et.bitRate&&(t.maxBitrate=Ht.bitRate):(un=Ze.getMediaStreamConstraints(Kt,!0).mediaStreamConstraints,Ze.videoInfo.width===((a=(Ht=un).video)===null||a===void 0?void 0:a.width)&&Ze.videoInfo.height===((l=Ht.video)===null||l===void 0?void 0:l.height)||(this.an.info(Ke+" resolution change "),Zt=!0),gt.width===((d=Ht.video)===null||d===void 0?void 0:d.width)&&gt.height===((p=Ht.video)===null||p===void 0?void 0:p.height)||(this.an.info(Ke+" resolution diff with track settings"),Zt=!0)),this.an.info(Ke+" applyConstraints "+JSON.stringify(Ht.video)),hn={},Object.keys(Ht.video).forEach(function(y){hn[y]=JSON.stringify(Ht.video[y])}),n.setAttributes({video_conf:j.wd.video_conf(hn)}),pn=this.gn.getPublishList(e),Bn=Ze.videoInfo.frameRate!==((u=Ht.video)===null||u===void 0?void 0:u.frameRate)||gt.frameRate!==((v=Ht.video)===null||v===void 0?void 0:v.frameRate),mn=Zt||Bn,!(ht&&["camera","screen"].includes(ht)&&mn))return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),this.an.info(Ke+" track change "),[4,et.applyConstraints(vs(vs({},Ht.video),{deviceId:void 0}))];case 2:return h.sent(),[3,4];case 3:return vn=h.sent(),r&&r({errorCode:Ft.ton.code,extendedData:"".concat(vn.name," ").concat(vn.constraint?"constraint:"+vn.constraint:"")}),[2];case 4:(cn=this.gn.getPreviewer(e))&&Ht.video instanceof Object&&cn.setVideoInfo({width:(nn=Ht.video).width,height:nn.height,frameRate:nn.frameRate}),Zt&&this.pn.browser==="safari"&&((x=Ze.videoNodeQueue)===null||x===void 0||x.replaceNewSourceByTrack(et,void 0,{handleTrackType:ke.changeResolution})),pn.forEach(function(y){var A,z,Me=(z=(A=y.localStream)===null||A===void 0?void 0:A.getVideoTracks()[0])===null||z===void 0?void 0:z.getSettings();(gt==null?void 0:gt.width)===(Me==null?void 0:Me.width)&&(gt==null?void 0:gt.height)===(Me==null?void 0:Me.height)||c.enVideoSpan(y.streamID,j.Sb.event,{w:j.Sb.w(Me==null?void 0:Me.width),h:j.Sb.h(Me==null?void 0:Me.height)}),(gt==null?void 0:gt.frameRate)!==(Me==null?void 0:Me.frameRate)&&c.enVideoSpan(y.streamID,j.Mc.event,{fps:j.Mc.fps(Me==null?void 0:Me.frameRate)})}),h.label=5;case 5:if(gn=[1,2,3].includes(t.videoQuality)?((U=Ht.video)===null||U===void 0?void 0:U.maxBitrate)||((te=Ht.video)===null||te===void 0?void 0:te.bitRate):t.maxBitrate||((le=Ht.video)===null||le===void 0?void 0:le.maxBitrate)||((se=Ht.video)===null||se===void 0?void 0:se.bitRate),!((0,B.Cs)(gn)&&gn>0))return[3,9];if(yn=Ze.videoInfo.bitRate!==gn,Ze.setVideoInfo({bitRate:gn}),!yn)return[3,9];bn=0,h.label=6;case 6:return bn<pn.length?(i=(We=pn[bn])===null||We===void 0?void 0:We.publisher)?[4,i.setBitrate(gn)]:[3,8]:[3,9];case 7:h.sent(),this.enVideoSpan(i.streamId,j.Io.event,{bitrate:j.Io.bitrate(1e3*gn)}),h.label=8;case 8:return bn++,[3,6];case 9:return this.an.info(Ke+" set constraints success "),r&&r({errorCode:0,extendedData:""}),[2]}})})},s.prototype.setPublishStreamAudioConstraints=function(e,t,n,r){return vc(this,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et=this;return Hc(this,function(At){switch(At.label){case 0:if(this.an.info((o="zsc.spsc.0 audio")+" constraints "+JSON.stringify(t)),!(a=this.gn.checkPreview(e)))return this.an.error(o+" preview no found"),r&&r({errorCode:Ft.fzq.code,extendedData:Ft.fzq.message}),[2];if(!(l=a.audioTrack)||a.hasEmptyAudioTrack)return this.an.error(o+" audio track not found"),r&&r({errorCode:Ft.fFX.code,extendedData:Ft.fFX.message}),[2];t.audio=a.mediaStreamConfig.audio,t=Tr(t),d=a.audioPreviewType||a.previewType,p=JSON.parse(JSON.stringify(a.mediaStreamConfig)),u=Object.assign(a.mediaStreamConfig,t),d=="screen"?v=this.gn.getScreenConstrains(u):(x=a.getMediaStreamConstraints(u,!0).mediaStreamConstraints,v=x),this.an.info(o+" applyConstraints "+JSON.stringify(v)),U=!0,U=(l==null?void 0:l.enabled)||!1,n.setAttributes({audio_conf:j.$7.audio_conf(v.audio)}),this.gn.trackUtils.stopTrack(l),At.label=1;case 1:return At.trys.push([1,3,,5]),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:v.audio})];case 2:return te=At.sent(),ht=te.getVideoTracks()[0],this.gn.trackUtils.stopTrack(ht),(le=te.getAudioTracks()[0]).enabled=U,se=JSON.stringify(le.getSettings()),a.replacePreviewTrack(le),a.updateZegoStreamCaptureTrack(le),We=le,a.insertableaudio&&a.localStream&&(We=a.localStream.getAudioTracks()[0]),a.destNode||a.onAudioTrackChange(We),this.an.info(o+" set constraints success "+se),r&&r({errorCode:0,extendedData:""}),[3,5];case 3:return Ke=At.sent(),Ze=a.getMediaStreamConstraints(p).mediaStreamConstraints,this.an.info(o+" oldMediaStreamConstraints "+JSON.stringify(Ze)),[4,navigator.mediaDevices.getUserMedia({video:!1,audio:Ze.audio}).catch(function(Ot){Et.an.error(o+".1 setbackup fail "+Ot.name)})];case 4:return(et=At.sent())&&(et.getTracks().forEach(function(Ot){wn(Ot,Et.an,o+".1")}),ht=e.getVideoTracks()[0],this.gn.trackUtils.stopTrack(ht),gt=et.getAudioTracks()[0],a.replacePreviewTrack(gt),a.updateZegoStreamCaptureTrack(gt),a.destNode||a.onAudioTrackChange(gt)),this.an.info(o+".1 setbackup suc "),r&&r({errorCode:Ft.ton.code,extendedData:"".concat(Ke.name," ").concat(Ke.constraint?"constraint:"+Ke.constraint:"")}),[3,5];case 5:return[2]}})})},s.prototype.handleTrack=function(e,t,n,r,o){var a,l,d,p;return vc(this,void 0,void 0,function(){var u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn,Bn,mn=this;return Hc(this,function(vn){switch(vn.label){case 0:if((0,he.rA)(this.an,Ce.N$A,". ms id: ".concat(t==null?void 0:t.id,", kind: ").concat(n==null?void 0:n.kind,", track id: ").concat(n==null?void 0:n.id)),u=e==="ADD",v={errorCode:0,extendedData:""},!(0,B.dr)(t))return this.an.error(Ce.N$A+" stream wrong"),o({errorCode:Ft.ZEp.code,extendedData:Ft.ZEp.message}),[2];if(!(n instanceof MediaStreamTrack))return this.an.error(Ce.N$A+" parameter 2 type error"),o({errorCode:Ft.ZEp.code,extendedData:Ft.ZEp.message}),[2];if(!(x=this.gn.checkPreview(t)))return this.an.error(Ce.N$A+" stream no found"),o&&o({errorCode:Ft.fzq.code,extendedData:Ft.fzq.message}),[2];if(n.kind==="video"){if(!((a=x.videoEffect)===null||a===void 0)&&a.enabled)return this.an.error(Ce.N$A+" need to disable video beauty effect first"),o&&o({errorCode:Ft.lwJ.code,extendedData:"need to disable video beauty effect before add or remove track"}),[2];if(x.enableDualStream)return this.an.error(Ce.N$A+" "+(U=" can not add/remove track while dual stream enabled.")),o&&o({errorCode:Ft.lwJ.code,extendedData:U}),[2];if(x.isBackgroundBlur)return this.an.error(Ce.N$A+" need to disable background process first"),o&&o({errorCode:Ft.A1v.code,extendedData:"need to disable video background process before add or remove track"}),[2]}return x.streamFromCanvas&&n.kind==="video"?(this.an.error(Ce.N$A+" browser not support"),o&&o({errorCode:Ft.WgV.code,extendedData:Ft.WgV.message}),[2]):(te=n.kind==="audio"&&this.pn.engineConfig.keepAudioTrack&&x.hasEmptyAudioTrack,le=t.getTracks().length>=2||t.getTracks().find(function(cn){return cn.kind==n.kind}),u&&le&&!te?(this.an.error(Ce.N$A+" only stream which have one track and kind no exist can add track"),o&&o({errorCode:Ft.ph7.code,extendedData:Ft.ph7.message}),[2]):e=="REMOVE"&&(t.getTracks().length<=1||n.kind==="video"&&x.hasEmptyAudioTrack||!t.getTracks().find(function(cn){return cn.kind===n.kind}))?(this.an.error(Ce.N$A+" can not remove track"),o({errorCode:Ft.WgV.code,extendedData:Ft.WgV.message}),[2]):!(se=this.gn.checkPublish(t))||se.publisher.supportTransceiver||se.publisher.stateNego===5&&se.publisher.isUpdateSDP!=1?(We=function(cn){var nn=mn.gn.previewStreamList.find(function(gn){return gn.originVideoTrack===cn||gn.originAudioTrack===cn});if(nn=nn||mn.gn.previewStreamList.find(function(gn){return gn.localStream.getTracks().find(function(yn){return yn==cn})}),nn)return mn.an.info(Ce.N$A+" video info: ".concat(JSON.stringify(nn.videoInfo))),nn;mn.an.warn(Ce.N$A+" ".concat(cn.kind," track is not created by sdk"))},this.pn.engineConfig.keepAudioTrack&&n.kind==="audio"?(u?((Bn=(l=We(n))===null||l===void 0?void 0:l.videoInfo)&&x.updateAudioInfo(Bn),this._replaceTrack(t,n,!1,!0),x.hasEmptyAudioTrack=!1):((Ke=x.getEmptyAudioTrack())&&this._replaceTrack(t,Ke,!1,!0),x.hasEmptyAudioTrack=!0),this.an.info(Ce.N$A+" end"),r(v),[2]):(Ze=x.rtcViewer,et=x,ht=n.kind=="video"?"videoTrack":"audioTrack",u&&(gt=We(n))&&(n.kind==="video"?(et.updateMediaStreamConstraints(gt.mediaStreamConfig,"video"),x.mediaStreamConfig.video=!0):(et.updateMediaStreamConstraints(gt.mediaStreamConfig,"audio"),x.mediaStreamConfig.audio=!0)),se?(Et=se.publisher,(At=se.publisher.peerConnection)?(Et.supportTransceiver?this.an.info(Ce.N$A+" support transceiver"):Et.isUpdateSDP=!0,Et.sideMediaConfig.isSEIStart&&n.kind==="video"?(this.an.info(Ce.N$A+" replace sei blank track."),Ot=void 0,u?[4,Et.replacePublishedTrack(n,!1,{handleTrack:e})]:[3,2]):[3,5]):(this.an.error(Ce.N$A+" pc has not created."),[2])):[3,15])):(this.an.error(Ce.N$A+" publish state wrong. "+"".concat(se.publisher.stateNego)),o&&o({errorCode:Ft.NJN.code,extendedData:Ft.NJN.message}),[2]));case 1:return Ot=vn.sent(),Et.handleSEIVideoTrack("add"),[3,4];case 2:return Et.handleSEIVideoTrack("remove"),[4,Et.replacePublishedTrack(Et.sideMediaConfig.track,!1,{handleTrack:e})];case 3:Ot=vn.sent(),vn.label=4;case 4:return(Ot==null?void 0:Ot.errorCode)===0||this.an.warn(Ce.N$A+" enable sei but not found video sender. error: ".concat(JSON.stringify(Ot))),[3,11];case 5:return n.kind!=="audio"?[3,6]:(Et.isUpdateSDP=!1,u?(et.replacePreviewTrack(n),Bt=et.audioNodeQueue?(p=(d=et.audioNodeQueue)===null||d===void 0?void 0:d.destinationNode)===null||p===void 0?void 0:p.stream.getAudioTracks()[0]:n,(Kt=Et.audioSender)?Kt.replaceTrack(Bt):At.addTrack(Bt,t),this.an.info(Ce.N$A+" add audio track. ")):(t.removeTrack(n),et[ht]=null,Ze&&Ze.setTrack(!1,null),(Kt=Et.audioSender)&&Kt.replaceTrack(null),this.an.info(Ce.N$A+" remove audio track. ")),this.an.info(Ce.N$A+" end"),r(v),[2]);case 6:return Kt=Et.videoSender,Ht=n,et.zegoCaptureStream&&(Zt=et.getStreamThroughCanvas(new MediaStream([n])),Ht=Zt.getVideoTracks()[0]),u?Kt?[4,Kt.replaceTrack(n)]:[3,8]:[3,10];case 7:return vn.sent(),this.an.info(Ce.N$A+" sender replace track "+Ht.kind),[3,9];case 8:At.addTrack(Ht,t),this.an.info(Ce.N$A+" pc add track "+Ht.kind),vn.label=9;case 9:return[3,11];case 10:if(!Kt)return this.an.error(Ce.N$A+" sender no found"),o&&o({errorCode:Ft.fFX.code,extendedData:Ft.fFX.message}),[2];try{Kt.replaceTrack(null),this.an.info(Ce.N$A+" sender replace null.")}catch(cn){this.an.error(Ce.N$A+" "+cn),o&&o({errorCode:Ft.aq0.code,extendedData:Ft.aq0.message+" "+cn})}vn.label=11;case 11:return un=et.updateVideoInfo(Bn=u?gt==null?void 0:gt.videoInfo:{}),hn=function(){e=="ADD"?(t.addTrack(n),et[ht]=n,Ze&&Ze.setTrack(n.kind=="video",n,mn.pn.browser==="safari"),n.kind=="video"&&n.enabled==1?Et.sendStreamStatus(0,Et.mic_status,!0):n.enabled==1&&Et.sendStreamStatus(Et.camera_status,0,!0),mn.an.info(Ce.N$A+" add track completely")):(n.kind=="video"?Et.sendStreamStatus(2,Et.mic_status,!0):Et.sendStreamStatus(Et.camera_status,2,!0),t.removeTrack(n),et[ht]=null,Ze&&Ze.setTrack(n.kind=="video",null),mn.an.info(Ce.N$A+" remove track completely")),x.mediaStreamConfig.video=e=="ADD"},pn=function(){return vc(mn,void 0,void 0,function(){var cn,nn,gn,yn=this;return Hc(this,function(bn){switch(bn.label){case 0:cn={},bn.label=1;case 1:return bn.trys.push([1,3,,4]),[4,At.createOffer(cn)];case 2:return nn=bn.sent(),Et.onCreateOfferSuccess(nn,!0,vs(vs({},un),{bitRate:u?un.bitRate:50}),function(i){return vc(yn,void 0,void 0,function(){return Hc(this,function(c){return i!==0?o&&o({errorCode:Ft.Q3v.code,extendedData:Ft.Q3v.message}):(hn(),r(v),this.an.info(Ce.N$A+" end")),[2]})})}),[3,4];case 3:return gn=bn.sent(),this.an.error(Ce.N$A+" "+gn),o&&o({errorCode:Ft.SmZ.code,extendedData:Ft.SmZ.message+" "+gn}),[3,4];case 4:return[2]}})})},Et.isUpdateSDP?(this.an.info(Ce.N$A+" need to update sdp"),[4,pn()]):[3,13];case 12:return vn.sent(),[3,14];case 13:this.an.info(Ce.N$A+" only update track"),hn(),u&&n.kind==="video"&&un.bitRate&&Et.setBitrate(un.bitRate),r(v),vn.label=14;case 14:return[3,16];case 15:u?((Bn=gt==null?void 0:gt.videoInfo)&&(n.kind==="video"?(et.updateVideoInfo(Bn),x.mediaStreamConfig.video=!0):et.updateAudioInfo(Bn)),t.addTrack(n),et[ht]=n,Ze&&Ze.setTrack(n.kind=="video",n)):(t.removeTrack(n),et[ht]=null,n.kind==="video"&&(x.mediaStreamConfig.video=!1),Ze&&Ze.setTrack(n.kind=="video",null)),this.an.info(Ce.N$A+" end"),r(v),vn.label=16;case 16:return[2]}})})},s.prototype.enVideoSpan=function(e,t,n){var r=this.cr.createSpan(I.t0.H,{key:j.Og.event,par:e},{key:""},t);r.setAttributes(n),r.end()},s.prototype._replaceTrack=function(e,t,n,r,o,a){r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=!1);var l=this.gn.checkPreview(e),d=this.gn.getPublishList(e,!1);if(!l)return this.an.error("zc.rt.0 preview no found"),{errorCode:Ft.fzq.code,extendedData:Ft.fzq.message};if(l.streamFromCanvas&&t.kind==="video"&&!a)return this.an.error("zc.rt.0 browser not support"),{errorCode:Ft.WgV.code,extendedData:Ft.WgV.message};var p=e.getTracks().find(function(Et){return Et.kind===t.kind}),u=t.kind==="audio",v={errorCode:Ft.fFX.code,extendedData:Ft.fFX.message};if(!r&&!p)return this.an.error("zc.rt.0 track no found"),v;if(!r&&u&&l.hasEmptyAudioTrack&&(this.an.warn("zc.rt.0 replace empty audio track"),!this.pn.engineConfig.allowReplaceEmptyTrack))return v;if(r&&u&&!l.mediaStreamConfig.audio){var x=l.mediaStreamConfig;l.mediaStreamConfig.audio=!0;var U=t.getSettings(),te=U||{},le=te.deviceId,se=te.echoCancellation,We=te.noiseSuppression,Ke=te.autoGainControl,Ze=te.channelCount;this.an.info("zc.rt.0 add audio: "+JSON.stringify(U)),le&&(x.audioInput=le),Ze&&(x.channelCount=Ze),se&&(x.AEC=se),We&&(x.ANS=We),Ke&&(x.AGC=Ke)}var et=this.gn.soundLevelDelegate&&u,ht=o?{handleTrackType:ke.replaceNew}:{};if(d.length){var gt=null;return et&&l.stopSoundLevel(),d.forEach(function(Et){var At;gt=(At=Et.publisher)===null||At===void 0?void 0:At.replacePublishedTrack(t,!1,vs({isTrackProcessedFromOriginalStream:n},ht))}),et&&l.startSoundLevel(),gt}return et&&l.stopSoundLevel(),l.replacePreviewTrack(t,!1,vs({isTrackProcessedFromOriginalStream:n},ht)),et&&l.startSoundLevel(),{errorCode:0,extendedData:""}},s.prototype.enableCamera=function(e,t,n){var r=this.gn.checkPreview(e);return r?(r.enableCamera(t,this.gn,n),!0):(this.an.error("zsc.ec.0 "+he.h2),!1)},s.prototype.enableMicrophone=function(e,t){var n=this.gn.checkPreview(e);return n?n.enableMicrophone(t):(this.an.error("zsc.em.0 "+he.h2),!1)},s.prototype.enableMicrophoneOnly=function(e){(0,he.rA)(this.an,Ce.LBe);for(var t=0;t<this.gn.previewStreamList.length;t++)if(!this.gn.previewStreamList[t].enableMicrophoneOnly(e))return this.an.error("".concat(Ce.LBe,".0 previewer ").concat(t," change mic mute state failed")),!1;return this.gn.isMicEnabled=e,!0},s.prototype.getBlackTrack=function(e,t){(e<120||t<90)&&(e=128,t=90);var n=(0,he.FP)(e,t),r=n.getContext("2d");return r&&(r.fillStyle="black"),r==null||r.fillRect(0,0,e,t),n.captureStream().getVideoTracks()[0]},s.prototype.enableCameraCapturing=function(e,t){var n;return vc(this,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x,U,te=this;return Hc(this,function(le){switch(le.label){case 0:return e.localStream?(r=this.gn.getPublishList(e.localStream).map(function(se){return se.publisher}),t?((n=e.videoTrack)===null||n===void 0?void 0:n.readyState)!=="live"?[3,1]:(this.an.warn("zp.ecc camera is already capturing"),[3,12]):[3,13]):[2,!1];case 1:o=e.getMediaStreamConstraints(vs(vs({},e.mediaStreamConfig),{audio:!1})).mediaStreamConstraints,le.label=2;case 2:return le.trys.push([2,11,,12]),[4,navigator.mediaDevices.getUserMedia(o)];case 3:return(a=le.sent()).getTracks().forEach(function(se){return wn(se,te.an,"zsc.ecc")}),(l=a.getVideoTracks()[0]).enabled=e.isVideoEnabled,l.enabled===!1&&this.an.warn("zp.ecc video is not enabled"),!e.muteImage||e.isVideoEnabled?[3,4]:(e.videoTrack=l,l.enabled=!e.isVideoEnabled,[3,10]);case 4:if(!r.length)return[3,9];d=0,le.label=5;case 5:return d<r.length?((p=r[d]).publishOption.videoCodec==="H265"&&p.getVideoSenders().forEach(function(se){var We;(We=se.track)===null||We===void 0||We.stop()}),[4,p.replacePublishedTrack(l)]):[3,8];case 6:if(((u=le.sent())==null?void 0:u.errorCode)!==0)throw u;le.label=7;case 7:return d++,[3,5];case 8:return[3,10];case 9:e.replacePreviewTrack(l),le.label=10;case 10:return e.hasStopCaptureVideo=!1,e.updateZegoStreamCaptureTrack(l),[3,12];case 11:return v=le.sent(),this.an.error("zsc.ecc resume camera capturing failed. "+JSON.stringify(v)),[2,!1];case 12:return[3,15];case 13:return r.length&&(x=null,r.forEach(function(se){var We;if(se.publishOption.videoCodec==="H265"){if(!x){var Ke=(We=e.videoTrack)===null||We===void 0?void 0:We.getSettings();x=te.getBlackTrack(Ke==null?void 0:Ke.width,Ke==null?void 0:Ke.height)}x&&se.getVideoSenders().forEach(function(Ze){Ze.replaceTrack(x)})}})),[4,e.stopCaptureVideo()];case 14:le.sent(),r.length&&(U=e.muteImage&&!e.isVideoEnabled?0:lu(e.videoTrack),r.forEach(function(se){se.sendStreamStatus(U,se.mic_status)})),le.label=15;case 15:return[2,!0]}})})},s.prototype.activateSEIInsert=function(e,t,n){n===void 0&&(n=0);var r=this.gn.checkPreview(e);return r?t!==0&&t!==1?(this.an.error(Ce.gPJ+" value of action should be 0 or 1"),!1):(r.activateSEIConfig={action:t,infoType:n},this.gn.getPublishList(e).map(function(o){return o.publisher}).forEach(function(o){o.activateSEIInsert(t,n)}),!0):(this.an.error(Ce.gPJ+" stream is not created"),!1)},s})(),$i=function(){return $i=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},$i.apply(this,arguments)},is=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},ys=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Zl=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},gu=j.Og,Us=j.Og.event,jd=j.Og.error,qh=j.ch,Vh=j.Jv,os=j.eU.error,Hi=os.wn,ss=os.En,qd=os.Sn,pl=He();if(navigator.mediaDevices&&"setCaptureHandleConfig"in navigator.mediaDevices)try{navigator.mediaDevices.setCaptureHandleConfig({handle:pl,exposeOrigin:!0,permittedOrigins:["*"]})}catch{}function Li(s,e,t){var n={width:640,height:360},r={width:640,height:480},o={width:960,height:540},a=$i($i({video:!0,videoQuality:4,frameRate:15,bitRate:500},n),{audioBitrate:48,channelCount:1});switch(s.scenario){case I.UP.UNKNOWN:a={};break;case I.UP.StandardVideoCall:break;case I.UP.HighVideoCall:a.frameRate=25,a.bitRate=1500,a=$i($i({},a),o);break;case I.UP.StandardChatroom:a.video=!1,a.audioBitrate=24;break;case I.UP.HighQualityChatroom:a.video=!1;break;case I.UP.Karaoke:a.video=!1,a.audioBitrate=128,a.channelCount=2;break;case I.UP.Broadcast:a.frameRate=20,a.bitRate=1200,(a=$i($i({},a),o)).audioBitrate=64,a.channelCount=2;break;default:s.isFlutter?(a.bitRate=600,a=$i($i({},a),n)):(a.bitRate=800,a=$i($i({},a),r))}e.info("".concat(Ce.Szn," scenario ").concat(s.scenario," ").concat(JSON.stringify(a)));var l=s.settingConfig.getCloudSettingScenario(s.scenario,!1,!0);return Object.assign(a,l||{},t||{})}var yc,vu,jr,ml=(function(){function s(e,t,n,r,o,a){var l=this;this.an=e,this.dataReport=t,this.pn=n,this.gn=r,this.rtm=o,this.zegoWebRtc=a,this.Uh=new zh(this.an,this.pn,this.gn),this.Gh=[],this.eventHandler={visibilitychange:function(){var d=!he.VJ.hidden;l.pn.engineConfig.autoRecaptureOnShow&&d&&(l.an.info("".concat(Ce.HHW," call ").concat(d)),l.Gh.forEach(function(p){var u,v=(0,Vo.L)(p,l.an);(u=l.zegoWebRtc.rtcModules.publishModule.gh)===null||u===void 0||u.Bh("video",v,"recapture",function(){})}))}},this.Jh=0,this.Fh=0,this.Hh=0,this.Vh=(0,he.sg)(function(d){var p=l.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.tI.event);p.setAttributes({old_cap_volume:l.Fh,cap_volume:d,change_duration:l.Hh}),p.end(),l.Jh=0},3e3),this.Qh=void 0,this.gh=new jh(e,r,n),this.recordDevices(),this.gn.checkDeviceChange=function(){l.Yh(500)},this.handleVisibilityChange()}return Object.defineProperty(s.prototype,"publishStreamHandler",{get:function(){return this.gh},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.handleVisibilityChange=function(){var e=(0,or.$t)();e.indexOf("OpenHarmony")>-1&&e.indexOf("HuaweiBrowser")>-1&&he.VJ.addEventListener("visibilitychange",this.eventHandler.visibilitychange)},s.prototype.createStream=function(e,t){var n=this;t===void 0&&(t=!1),this.an.info(Ce.Szn+" call. "+t);var r=void 0,o=void 0,a=void 0;if(e){var l=e.camera,d=e.screen,p=e.custom;l&&(r=$i({},l)),d&&(o=(0,B.dd)(d)?d:$i({},d)),p&&(a=$i({},p))}var u=0;if(r&&(u++,r.audioBitRate&&(r.audioBitrate=r.audioBitRate,delete r.audioBitRate),r.bitrate&&(r.bitRate=r.bitrate,delete r.bitrate),r=Yi(r)),o&&(u++,(0,B.w)(o)&&o.bitrate&&(o.bitRate=o.bitrate),o=Yi(o)),a&&(u++,a.bitrate&&(a.bitRate=a.bitrate)),a=a&&Tr(a),r=r&&Tr(r),o=o&&Tr(o),u>1){var v="cannot set more than one type of source";throw this.an.error(Ce.Szn+" ".concat(v,". ").concat(JSON.stringify(e))),{code:Ft.ZEp.code,msg:v}}return new he.l3(function(x,U){var te,le=n.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.eU.event),se={is_zego_stream:t?0:1};e!=null&&e.camera&&(se.scenario=n.pn.scenario),le.setAttributes(se);var We=function(ht){var gt=n.gn.checkPreview(ht),Et=n.getStreamByCanvas(ht);gt&&n.setEmptyAudioTrack(Et,gt),n.initCopyMusic(ht),le.setAttributes({media_stream_id:j.eU.media_stream_id(ht==null?void 0:ht.id)}),le.end(),!n.pn.deviceInfos&&n.recordDevices(),(r||r==null)&&n.Gh.push(Et),x(Et),n.gn.activeSoundLevel()},Ke=function(ht,gt){gt===void 0&&(gt=""),n.cr.setError(le,ht,gt),U({code:ht.code,msg:ht.message+gt})};if(!(!((te=navigator==null?void 0:navigator.mediaDevices)===null||te===void 0)&&te.getUserMedia)&&window.location.protocol!=="https:"&&window.location.protocol!=="file:"&&window.location.hostname.indexOf("127.0.0.1")==-1&&window.location.hostname.indexOf("localhost")==-1){var Ze=" https or localhost required ";return n.an.error(Ce.Szn+Ze),void Ke({code:os.yn.code,message:os.yn.message+Ze})}var et=function(ht){(0,B.C9)(ht)?Ke(ht[0],ht[1]):Ke(ht)};a?n.Uc(a,le).then(We).catch(et):o?n.Kh(o,le,t).then(We).catch(et):(r||r==null)&&n.Vc(r||{},le,t).then(We).catch(et)})},s.prototype.Vc=function(e,t,n){return is(this,void 0,void 0,function(){var r,o,a=this;return ys(this,function(l){if(!(0,B.TE)(e.videoQuality)&&!(0,he.zQ)(e.videoQuality))throw this.an.error(Ce.Szn+(r=" videoQuality must be integer number")),[Hi,r];if(!(0,B.TE)(e.keyFrameInterval)&&!(0,he.zQ)(e.keyFrameInterval))throw this.an.error(Ce.Szn+(r=" keyFrameInterval must be integer number")),[Hi,r];if(!(0,B.TE)(e.videoOptimizationMode)&&!["default","motion","detail"].includes(e.videoOptimizationMode))throw this.an.error(Ce.Szn+(r=" video optimizationMode must be 'default', 'motion', 'detail'")),[Hi,r];if(!(0,B.TE)(e.videoInput)&&!(0,B.uy)(e.videoInput)&&!(0,B.QP)(e.videoInput))throw this.an.error(Ce.Szn+(r=" video input must be string'")),[Hi,r];if(!(0,B.TE)(e.audioInput)&&!(0,B.uy)(e.audioInput)&&!(0,B.QP)(e.audioInput))throw this.an.error(Ce.Szn+(r=" audio input must be string'")),[Hi,r];if(!(0,B.TE)(e.facingMode)&&!(0,B.QP)(e.facingMode))throw this.an.error(Ce.Szn+(r=" facingMode must be string'")),[Hi,r];if(e.audioBitrate){if(!(0,he.zQ)(e.audioBitrate))throw this.an.error(Ce.Szn+(r=" audioBitrate must be integer number")),[Hi,r];if(e.audioBitrate<6||e.audioBitrate>510)throw r=" audio bitrate cannot exceed the range [6,510]. current value: ".concat(e.audioBitrate,"."),this.an.error(Ce.Szn+r),[Hi,r];this.pn.audioBitRate=1e3*e.audioBitrate}if(e.bitRate){if(!(0,B.Cs)(e.bitRate))throw this.an.error(Ce.Szn+(r=" bitrate must be integer number")),[Hi,r];if(e.bitRate>10240)throw this.an.error(Ce.Szn+(r=" bitrate cannot more than 10 Mbps")),[Hi,r]}if(!(0,B.TE)(e.minBitrate)&&!(0,B.Cs)(e.minBitrate))throw this.an.error(Ce.Szn+(r=" minBitrate must be integer number")),[Hi,r];if(!(0,B.TE)(e.startBitrate)&&!["default","target"].includes(e.startBitrate))throw this.an.error(Ce.Szn+(r=" startBitrate must be integer 'default' or 'target'")),[Hi,r];if(e.channelCount!==void 0&&!(0,he.zQ)(e.channelCount))throw this.an.error(Ce.Szn+(r=" channelCount must be integer number")),[Hi,r];if(!(0,B.TE)(e.AEC)&&!(0,B.dd)(e.AEC))throw this.an.error(Ce.Szn+(r=" AEC must be boolean'")),[Hi,r];if(!(0,B.TE)(e.ANS)&&!(0,B.dd)(e.ANS))throw this.an.error(Ce.Szn+(r=" ANS must be boolean'")),[Hi,r];if(!(0,B.TE)(e.AGC)&&!(0,B.dd)(e.AGC))throw this.an.error(Ce.Szn+(r=" AGC must be boolean'")),[Hi,r];var d,p;return n&&e.videoQuality===4&&(!Ba(["frameRate","width","height"],d=e,p=function(u,v){throw[u,v]})||al(d.bitRate,p)),o={},this.an.info(Ce.Szn+" camera "+JSON.stringify(e)),o=e,t.setAttributes({stream_type:j.eU.stream_type("camera"),camera:j.eU.camera(e)}),(0,B.dd)(o.video)||(o.video=!0),(0,B.dd)(o.audio)||(o.audio=!0),[2,new he.l3(function(u,v){a.Zh(o,"camera",u,v,t)})]})})},s.prototype.Kh=function(e,t,n){return is(this,void 0,void 0,function(){var r,o,a,l=this;return ys(this,function(d){return(function(p,u,v){var x=(0,B.w)(p),U=j.eU.error.wn;if(x&&!(0,B.TE)(p.videoQuality)&&!(0,he.zQ)(p.videoQuality))return v(U," videoQuality must be integer number"),!1;if(x&&!(0,B.TE)(p.sourceID)&&!(0,B.QP)(p.sourceID))return v(U," sourceID must be string"),!1;if(x&&!(0,B.TE)(p.videoOptimizationMode)&&!["default","motion","detail"].includes(p.videoOptimizationMode))return v(U," video optimizationMode must be 'default', 'motion', 'detail'"),!1;if(x&&!(0,B.TE)(p.keyFrameInterval)&&!(0,he.zQ)(p.keyFrameInterval))return v(U," keyFrameInterval must be integer number"),!1;if(x&&u&&p.videoQuality===4&&(!al(p.bitRate,v)||!Ba(["frameRate"],p,v)))return!1})(e,n,function(p,u){throw[p,u]}),r=this.pn.browser,o=this.gn.getScreenConstrains(e),t.setAttributes({stream_type:j.eU.stream_type("screen"),screen:j.eU.screen(o)}),a=e&&e.captureElement,[2,new he.l3(function(p,u){var v=function(U){u([U])},x=function(U){l.gn.createScreenPreviewer(U,o,e)&&p(U),l.addShareScreenEnd(U)};(0,or.gm)()||(0,B.w)(e)&&e.type=="firefox"?l.startScreenShotFirFox("screen",o,function(U,te,le){U?te&&x(te):le&&v(le)}):!a&&(0,or.H8)()&&Za.screenShotReady||(0,B.w)(e)&&e.type=="shot"?l.startScreenShotChrome(function(U,te,le){U?(l.an.info(Ce.Szn+" using extension"),te&&x(te)):(le&&l.an.error(Ce.Szn+" extension "+le),le==="SS_DIALOG_CANCEL"||(0,B.w)(e)&&e.type=="shot"?le&&v(os.Sn):l.startScreenSharing(o,function(se,We,Ke){se?We&&x(We):(l.an.error(Ce.Szn+" "+Ke),Ke&&v(Ke))}))}):r=="Electron"||(0,B.w)(e)&&e.type=="Electron"?l.startScreenShotElectron(o,function(U,te,le){U?te&&x(te):le&&v(le)}):l.startScreenSharing(o,function(U,te,le){U?te&&x(te):le&&v(le)})})]})})},s.prototype.Uc=function(e,t){return is(this,void 0,void 0,function(){var n,r,o=this;return ys(this,function(a){if(!e.source||!(0,B.Si)(e.source)&&!(0,B.dr)(e.source))throw this.an.error(Ce.Szn+" source must be HTMLMediaElement or MediaStream"),[Hi," source must be HTMLMediaElement or MediaStream"];if(e.bitRate){if(!(0,he.zQ)(e.bitRate))throw this.an.error(Ce.Szn+" bitrate must be integer number"),[Hi," bitrate must be integer number"];if(e.bitRate>10240)throw this.an.error(Ce.Szn+" bitrate cannot greater than 10 Mbps"),[Hi," bitrate cannot greater than 10 Mbps"]}if(e.audioBitrate){if(!(0,he.zQ)(e.audioBitrate))throw this.an.error("ze.cs.0 audioBitrate must be integer number"),[Hi," audioBitrate must be integer number"];if(e.audioBitrate<6)throw this.an.error("ze.cs.0 audioBitrate cannot less 6 kbps"),[Hi," audioBitrate cannot less 6 kbps"];if(e.audioBitrate>510)throw this.an.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"),[Hi," audioBitrate cannot greater than 510 kbps"]}if(!(0,B.TE)(e.keyFrameInterval)&&!(0,he.zQ)(e.keyFrameInterval))throw this.an.error(Ce.Szn+(n=" keyFrameInterval must be integer number")),[Hi,n];if(!(0,B.TE)(e.videoOptimizationMode)&&!["default","motion","detail"].includes(e.videoOptimizationMode))throw this.an.error(Ce.Szn+(n=" video optimizationMode must be 'default', 'motion', 'detail'")),[Hi,n];if(e.channelCount!==void 0&&e.channelCount!==1&&e.channelCount!==2)throw this.an.error("ze.cs.0 channelCount must number 1 or 2"),[Hi," channelCount must number 1 or 2"];return r=(0,B.dr)(e.source)?"MediaStream":"HTMLElement",t.setAttributes({stream_type:j.eU.stream_type("custom"),custom:j.eU.custom($i($i({},e),{source_type:r}))}),[2,new he.l3(function(l,d){o.Zh(e,"custom",l,d,t)})]})})},s.prototype.getStreamByCanvas=function(e){var t=this.gn.checkPreview(e);if(t){var n=(0,or.UN)();if(n&&n.includes("15_1")&&!this.pn.engineConfig.disableCanvasIOS15_1){var r=t.getStreamThroughCanvas(e);return t.localStream=r,t.streamFromCanvas=!0,t.streamFromCanvasTrack=r.getVideoTracks()[0],r}}return e},s.prototype.createZegoStream=function(e){var t=this;return e===void 0&&(e={}),new he.l3(function(n,r){return is(t,void 0,void 0,function(){var o,a,l,d,p,u,v,x,U,te,le=this;return ys(this,function(se){switch(se.label){case 0:if(this.an.info("ze.czs.0 call"),o=this.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.nO.event),a=function(We){(0,he.lA)(o,{local_stream_id:We.id,stream_options:Rn(e||{},["captureView","view"])}),n(We)},l=function(We){le.cr.setError(o,We),r(We)},d=!1,e&&!(0,B.w)(e))return[2,l(Ft.ZEp)];if((u=[p=e.camera,e.screen,e.custom].reduce(function(We,Ke){return We+(Ke?1:0)},0))>1)return this.an.error(Ce.Szn+" ".concat(v="cannot set more than one type of source",". ").concat(JSON.stringify(e))),[2,l({code:Ft.ZEp.code,message:v})];if(d=!!p||u===0,x=new kf(e,this.an,this.gn,this.pn,this),U=new Bh(x),!e.autoCapture&&e.autoCapture!=null)return[3,4];se.label=1;case 1:return se.trys.push([1,3,,4]),[4,U.zegoStream.autoCapture()];case 2:return se.sent(),[3,4];case 3:return te=se.sent(),[2,l(te)];case 4:return this.an.info("ze.czs.0 success"),d&&this.Gh.push(U),a(U),[2]}})})})},s.prototype.destroyStream=function(e){this.an.info(Ce.mLk+" call");var t=this.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.ny.event);if(!((0,B.dr)(e)||(0,B.w)(e)&&e.getTracks))return this.an.error(Ce.mLk+" localStream is not mediaStream or tracks is null"),void this.cr.setError(t,j.ny.error.qe);(0,B.dr)(e)?((0,B.dr)(e)&&e.getTracks().length==0&&this.an.info(Ce.mLk+" tracks is null"),this.Gh=this.Gh.filter(function(n){return n!==e}),this.stopPreview(e)):e.zegoStream&&e.zegoStream.destroy(),(0,he.lA)(t,{stop_reason:j.ny.stop_reason("destroyStream"),local_stream_id:e.id})},s.prototype.startPublishingStream=function(e,t,n,r){var o,a,l,d=this,p=(0,Vo.L)(t,this.an),u=Oi(this.an,e);u.info(Ce.gkP+" call publishOption: "+JSON.stringify(n)+" isDataChannel: "+JSON.stringify(!!r)+" ms_id: "+(p==null?void 0:p.id));var v,x=!0,U="",te=jd,le=te.Dn;x&&e===void 0&&(u.error(Ce.gkP+(U="stream id required")),x=!1,v=Ft.d49),!x||e&&(0,B.QP)(e)||(u.error(Ce.gkP+" "+(U="stream id type wrong")),x=!1,v=Ft.d49),x&&e.length===0&&(this.an.error(Ce.gkP+" "+(U=Ft.d49.message)),x=!1,v=Ft.d49),x&&e.length>I.LO&&(u.error(Ce.gkP+" "+(U="stream id length limit")),x=!1,v=Ft.clM),x&&!(0,he.kP)(e)&&(this.an.warn(Ce.gkP+" #invald streamID:".concat(e)),this.pn.isFlutter&&(x=!1,v=Ft.J79)),x&&!(0,he.jy)(e)&&(u.error(Ce.gkP+" "+(U="stream ID contains illegal characters")),x=!1,v=Ft.J79),x&&(!p||(0,B.dr)(p)&&p.getTracks().length==0)?(u.error(Ce.gkP+" "+(U="localStream wrong")),x=!1,v=le):p&&p.getTracks().forEach(function(Ot){wn(Ot,d.an,Ce.gkP)});var se=this.gn.checkPreview(p);x&&!se&&(u.error(Ce.gkP+" "+(U=he.aw)),x=!1,v=te.jn);var We=se==null?void 0:se.zegoCaptureStream;if(We&&(We.originAudioStream||We.originVideoStream||(u.error(Ce.gkP+" "+(U="stream is not capturing")),x=!1,v=te.qn)),se!=null&&se.isVideoEffectStarting&&(u.error(Ce.gkP+" "+(U=(v=te.Ln).message)),x=!1),x&&n&&!(0,B.w)(n)&&(x=!1,v=le,U="publishOption must be object"),x&&n&&!(0,B.TE)(n.streamParams)&&!(0,B.QP)(n.streamParams)&&(u.error(Ce.gkP+" publishOption streamParams must be string"),x=!1,v=le,U=" publishOption streamParams must be string"),x&&n&&!(0,B.TE)(n.extraInfo)&&!(0,B.QP)(n.extraInfo)&&(u.error(Ce.gkP+" publishOption extraInfo must be string"),x=!1,v=le,U=" publishOption extraInfo must be string"),x&&n&&!(0,B.TE)(n.videoCodec)&&!(0,B.QP)(n.videoCodec)&&(u.error(Ce.gkP+" publishOption videoCodec must be string"),x=!1,v=le,U=" publishOption videoCodec must be string"),x&&n&&!(0,B.TE)(n.inspectFlag)&&((0,B.Cs)(n.inspectFlag)?[0,1].includes(n.inspectFlag)||(u.error(Ce.gkP+" publishOption inspectFlag is not in range"),x=!1,v=le,U=" publishOption inspectFlag is not in range"):(u.error(Ce.gkP+" publishOption inspectFlag must be number"),x=!1,v=le,U=" publishOption inspectFlag must be number")),!x||!this.pn.isMultiRoom||n&&(0,B.QP)(n.roomID)&&n.roomID!=""||(x=!1,v=le,U=" roomID is need if set multi room"),n&&n.videoCodec&&(n.videoCodec=n.videoCodec.toUpperCase()),x&&n&&!(0,B.TE)(n.trafficControlFocusOnMode)&&((0,B.Cs)(n.trafficControlFocusOnMode)&&[0,1].includes(n.trafficControlFocusOnMode)||(this.an.error(Ce.gkP+" publishOption trafficControlFocusOnMode: ".concat(n.trafficControlFocusOnMode," is invalid")),delete n.trafficControlFocusOnMode)),x&&n&&!(0,B.TE)(n.trafficControlMinVideoBitrate)&&((0,B.Cs)(n.trafficControlMinVideoBitrate)||(this.an.error(Ce.gkP+" publishOption trafficControlMinVideoBitrate: ".concat(n.trafficControlMinVideoBitrate," is invalid")),n.trafficControlMinVideoBitrate=0)),x&&n&&!(0,B.TE)(n.enableTrafficControl)&&((0,B.dd)(n.enableTrafficControl)||(this.an.error(Ce.gkP+" publishOption enableTrafficControl: ".concat(n.enableTrafficControl," is invalid")),n.enableTrafficControl=!0)),this.pn.useNetAgent&&this.pn.roomList.length>0?u.info(Ce.gkP+" publish accelerate"):this.rtm.isDisConnect()&&(u.error(Ce.gkP+" not login"),x=!1,v=te.Bn),!x){u.error(Ce.gkP+" "+U);var Ke=this.cr.getAPIErrorReport(Us);throw Ke&&v&&this.cr.takeAPIErrorReport(Us,v,Ke),{errorCode:v==null?void 0:v.code,extendedData:U}}var Ze=this.cr.createSpan(I.t0.I,{key:j.vW.event},{key:Us,par:e},Us,!0);n||(n={});var et=(se==null?void 0:se.videoPreviewType)||(se==null?void 0:se.previewType);!n.videoCodec&&(0,or.e8)()&&et=="custom"&&(!((a=se==null?void 0:se.mediaStreamConfig)===null||a===void 0)&&a.source)&&(0,B.Si)((l=se.mediaStreamConfig)===null||l===void 0?void 0:l.source)&&(u.info(Ce.gkP+" Redmi note 8 uesed custom stream. change to VP8"),n.videoCodec="VP8");var ht=Mn(this.pn.appid,this.pn.idName,e),gt=((o={})["_publish_"+e]={stream_sid:ht},o);this.cr.setPublicPros(gt),Ze.setAttributes({stream_id:gu.stream_id(e),stream_sid:gu.stream_sid(ht),publish_option:gu.publish_option(n),enable_camera:gu.enable_camera(!!(se!=null&&se.videoTrack)),enable_mic:gu.enable_mic(!!(se!=null&&se.audioTrack))}),n.audioBitRate=this.pn.audioBitRate;var Et=n.roomID?n.roomID:this.pn.roomList[0]?this.pn.roomList[0].roomID:"",At=this.pn.getRoomByRoomID(Et);return At?(Ze.setAttributes({room_id:gu.room_id(Et)}),this.gn.setPublishStateStart(At,e,p,n,ht,r)?(this.pn.publishStreamList[e]={state:I.T_.tryPublish,extra_info:n.extraInfo,roomID:At.roomID},u.info("zc.p.sps.1 start publish"),At.streamHandler.onPublishStateUpdate(I.eZ.retry,e,{code:0,message:""}),this.cr.createSpan(I.t0.H,{key:j.Og.event,par:e},{key:qh.event,par:e},qh.event,!0).setAttributes({reason:qh.reason("StartPublish")}),this.cr.createSpan(I.t0.I,{key:j.Og.event,par:e},{key:j.Jv.event,par:e},j.Jv.event,!0).setAttributes({room_id:Vh.room_id(At==null?void 0:At.roomID),room_sid_string:Vh.room_sid_string(At==null?void 0:At.roomSessionID)}),this.pn.appConfig?se!=null&&se.containBackgroundProcess&&this.pn.supportBg===!1?(u.info("zc.p.sps.1 check not support background porcess"),At.streamHandler.onPublishStateUpdate(I.eZ.error,e,te.ae),!1):(this.gn.startPublishingStream(e),!0):(this.gn.waitPublishList.push(e),!0)):(u.error("zc.p.sps.1 cannot start publish"),!1)):(u.error("zc.p.sps.1 room no found"),!1)},s.prototype.updatePublishingStream=function(e,t){var n=this;return new he.l3(function(r){var o=n.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.r_.event),a=function(u){var v=u.errorCode,x=u.extendedData,U=u.video,te=u.audio,le={};U&&(le.video=U),te&&(le.audio=te),(0,he.lA)(o,{local_stream_id:e.id,update_type:t,preview_conf:le}),r({errorCode:v,extendedData:x})},l=function(u,v){var x=(0,B.Cs)(u)?{errorCode:u,extendedData:JSON.stringify({fail_reason:v})}:u;n.an.error(Ce.xcY+" "+x.extendedData),(0,he.lA)(o,{local_stream_id:e.id,update_type:t,error:x.errorCode,message:x.extendedData}),r(x)};n.an.info(Ce.xcY+" call");var d=n.gn.checkPreview(e);if(d)if(d.zegoCaptureStream){var p=d.zegoCaptureStream;t!=xs.audio&&t!=xs.videoAndAudio||p.getAudioTracks().length?t!=xs.video&&t!=xs.videoAndAudio||p.getVideoTracks().length?t==xs.audio?p.updateStreamAudioTrack(a,l,1):t==xs.video?p.updateStreamVideoTrack(a,l,1):p.updateStreamVideoAndAudio(a,l,1):l(Ft.dU8.code,Ft.dU8.message):l(Ft.SQb.code,Ft.SQb.message)}else l(Ft.ZEp.code,Ft.ZEp.message+", stream type wrong");else l(Ft.VEp.code,Ft.VEp.message)})},s.prototype.activateSEIInsert=function(e){var t=e.stream,n=e.action,r=e.infoType,o=this._getSpan(e.stream,j.$H.event);o.setAttributes({action:j.$H.action(e.action),info_type:j.$H.info_type(e.infoType)});var a=this.gh.activateSEIInsert(t,n,r);return o.end(),a},s.prototype.sendSEI=function(e,t){if(!qt())return this.an.warn(Ce.dnG+" browser not support "),!1;if(!(0,B.G0)(t))return this.an.error(Ce.dnG+" inData required Uint8Array"),!1;if(t.byteLength>4096)return this.an.error(Ce.dnG+" inData length limit"),!1;var n=this.gn.publisherList[e];return n&&n.publisher?n.publisher.sendSEI(t):(this.an.warn(Ce.dnG+" publish not exist"),!1)},s.prototype.stopPublishingStream=function(e,t,n){var r,o,a,l;this.an.info(Ce.K4A+" call "+(t?t.toString():""),{streamid:e});var d=t||{code:0,message:""},p=this.cr.createSpan(I.t0.I,{key:j.vW.event},{key:""},j.Vz.event);if(!(0,B.QP)(e)||e=="")return this.an.error(Ce.K4A+" streamID must be string and not empty"),this.cr.setError(p,j.Vz.error.wn,"stream id type error"),!1;var u=this.gn.publisherList[e];n&&!(!((r=u==null?void 0:u.publisher)===null||r===void 0)&&r.Xh)&&(d=jd.ce),p.setAttributes({stream_id:j.Vz.stream_id(e),stream_sid:j.Vz.stream_sid(u==null?void 0:u.streamSid),room_id:j.Vz.room_id((a=(o=this.gn.publisherList[e])===null||o===void 0?void 0:o.room)===null||a===void 0?void 0:a.roomID),error:d.code,message:d.message});var v=this.gn.getRoomByStreamID(e),x=u&&u.publisher&&u.publisher.state!==7||((l=u==null?void 0:u.retryStreamHandler)===null||l===void 0?void 0:l.isRetrying());if(this.gn.stopPublishingStream(e,d),this.pn.publishStreamList[e]){if(this.pn.publishStreamList[e].state>=I.T_.update_info&&v){(!t||t.code!==1102018)&&v.streamHandler.updateStreamInfo(e,I.NP.liveEnd);for(var U=0;U<v.streamList.length;U++)if(v.streamList[U].stream_id==e){v.streamList.splice(U--,1);break}}delete this.pn.publishStreamList[e]}return p.end(),v&&x&&v.streamHandler.onPublishStateUpdate(I.eZ.error,e,d),!0},s.prototype.stopPublishingStreamInRoom=function(e){for(var t in this.an.info(Ce.s1U+" call "+e),this.pn.publishStreamList)this.pn.publishStreamList[t].roomID===e&&this.stopPublishingStream(t)},s.prototype.setCaptureVolume=function(e,t){var n=this;return new he.l3(function(r){n.an.info(Ce.t6w+" call");var o=(0,Vo.L)(e,n.an),a=j.tI.error.wn,l=function(p){n.an.error(Ce.t6w+" "+p),r({errorCode:a.code,extendedData:JSON.stringify({fail_reason:a.message+" "+p})})},d=n.gn.checkPreview(o);(0,B.dr)(o)&&d?o.getAudioTracks().length!=0?!(0,B.Cs)(t)||t<0||t>200?l(" volume must be number between 0 to 200"):(n.Jh?n.Hh=Math.round(performance.now()-n.Jh):(n.Jh=performance.now(),n.Fh=d.volume),n.Vh(t),d.setVolume(t),r({errorCode:0,extendedData:""}),n.an.info(Ce.t6w+" call success")):l(" stream audioTrack no found"):l(" stream must be created by zego")})},s.prototype.getElectronScreenSources=function(){var e=this;return new he.l3(function(t,n){var r=window.require("electron");r||(e.an.error("zc.gess.0 Electron is not exist"),n({message:"Electron is not exist"})),r.desktopCapturer.getSources({types:["window","screen"]}).then(function(o){var a=o.map(function(l){return{id:l.id,name:l.name,thumbnail:l.thumbnail}});t(a)}).catch(function(o){e.an.error("zc.gess.0 "+o),n(o)})})},s.prototype.startScreenShotChrome=function(e){if(Za.screenShotReady)window.postMessage({type:"SS_UI_REQUEST",text:"start"},"*"),ge("screenShare",{success:e},this.pn.callbackList);else{var t='zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';this.an.error(t),e(!1,null,{code:ss.code,message:ss.message+" "+t})}},s.prototype.startScreenSharing=function(e,t){var n=this;if("getDisplayMedia"in navigator.mediaDevices){var r=navigator.mediaDevices,o=e.audio||!1,a=e.video,l="zc.b.sss";if((0,or.nr)()&&(0,B.w)(a)){var d=a.width,p=a.height;(0,B.w)(d)?a.width={max:d.max||d.ideal}:d&&(a.width={max:d}),(0,B.w)(p)?a.height={max:p.max||p.ideal}:p&&(a.height={max:p})}var u={audio:o,video:a,preferCurrentTab:!!e.captureElement,systemAudio:"include",selfBrowserSurface:"include",surfaceSwitching:"include"};e.video=a,this.an.info("zc.b.sss config: "+JSON.stringify(u)),r.getDisplayMedia(u).then(function(v){return is(n,void 0,void 0,function(){var x,U,te,le,se;return ys(this,function(We){switch(We.label){case 0:if(!(x=e.captureElement))return[3,5];if(U=v.getVideoTracks()[0],!("CropTarget"in window&&"fromElement"in CropTarget&&U.cropTo))return[3,5];We.label=1;case 1:return We.trys.push([1,4,,5]),(te=U==null?void 0:U.getCaptureHandle())&&te.handle===pl?[4,CropTarget.fromElement(x)]:(this.an.info("".concat(l," no current tap")),v.getVideoTracks().forEach(function(Ke){return Ke.stop()}),t(!1,null,{code:ss.code,message:ss.message+" captureElement must on current tab."}),[2]);case 2:return le=We.sent(),[4,U.cropTo(le)];case 3:return We.sent(),[3,5];case 4:return se=We.sent(),this.an.error("".concat(l," crop error:").concat(se)),v.getVideoTracks().forEach(function(Ke){return Ke.stop()}),t(!1,null,{code:ss.code,message:ss.message+" "+se}),[3,5];case 5:return this.an.info("zc.b.sss capture suc"),t(!0,v),[2]}})})}).catch(function(v){n.an.error(l+" "+v),v.message&&v.message.toLowerCase()=="permission denied"?t(!1,null,qd):t(!1,null,{code:ss.code,message:ss.message+" "+v})})}else this.an.error("zc.b.sss brower does not support getDisplayMedia"),t(!1,null,os.yn)},s.prototype.startScreenShotFirFox=function(e,t,n){var r=this,o={video:$i($i({},t.video),{mediaSource:e}),audio:t.audio};navigator.mediaDevices.getUserMedia(o).then(function(a){a.getTracks().forEach(function(l){return wn(l,r.an,"ze.ssf.1")}),n(!0,a)}).catch(function(a){r.an.error("ze.ssf.1 "+a),n(!1,null,{code:ss.code,message:ss.message+" "+a})})},s.prototype.startScreenShotElectron=function(e,t){var n=this;if(!window.require("electron"))return this.an.error("ze.sse.1 Electron is not exist"),void t(!1,null,{code:ss.code,message:ss.message+" Electron is not exist"});var r={video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.sourceID,maxWidth:window.screen.width,maxHeight:window.screen.height}},audio:!1};navigator.mediaDevices.getUserMedia(r).then(function(o){o.getTracks().forEach(function(a){return wn(a,n.an,"ze.sse.1")}),t(!0,o)}).catch(function(o){n.an.error("ze.sse.1 "+o),t(!1,null,{code:ss.code,message:ss.message+" "+o})})},s.prototype.Zh=function(e,t,n,r,o){var a=this,l=null;return l=new qc(this.an,this.pn,this.gn,t),this.gn.previewStreamList.push(l),l.startPreview(e,function(d){a.gn.soundLevelDelegate&&(l==null||l.startSoundLevel()),t==="camera"&&((e==null?void 0:e.audio)===!1&&l&&(l.hasMicTrack=!1),l!=null&&l.micTrack&&(l.micTrack.enabled=a.gn.isMicEnabled)),e!=null&&e.videoOptimizationMode&&a.gn.setVideoTrackContentHint(d,e==null?void 0:e.videoOptimizationMode),a.an.debug("zsc.sp.0 call success"),!a.pn.deviceInfos&&a.recordDevices(),n&&n(d)},function(d){a.gn.previewStreamList=a.gn.previewStreamList.filter(function(p){return p!==l}),r&&r(d)},o),!0},s.prototype.stopPreview=function(e){if(!e)return this.an.warn("zsc.sp.0 localStream null"),!1;for(var t in this.gn.publisherList)this.gn.publisherList[t].localStream===e&&(this.gn.publisherList[t].localStream=null);var n=this.gn.checkPreview(e);return n?(n.previewSuc&&(n.stopPreview(),this.gn.removePreview(n)),!0):(this.an.info("zsc.sp.0 "+he.h2),!1)},s.prototype.recordDevices=function(e,t){var n,r=this,o=this.Qh;this.an.info("zsc.rd.0 call "+!!o),o||(o=this.Yh(0),this.Qh=o),o.then(function(a){r.Uh.lastRecordDeviceTime=performance.now(),e&&e(a)}).catch(function(a){r.an.warn("zsc.rd.0 getDevices err:"+a),t&&t(a)}).finally(function(){r.Qh=void 0}),((n=navigator.mediaDevices)===null||n===void 0?void 0:n.ondevicechange)!==void 0&&(navigator.mediaDevices.ondevicechange=null,navigator.mediaDevices.ondevicechange=function(a){return is(r,void 0,void 0,function(){return ys(this,function(l){return this.an.info("zsc.rd.0 devicechange"),this.Yh(500),[2]})})})},s.prototype.Yh=function(e,t){return e===void 0&&(e=0),is(this,void 0,void 0,function(){var n,r,o,a=this;return ys(this,function(l){switch(l.label){case 0:return this.an.info("zsc.rd.0 get and compare devices: "+e),n=!0,(r=this.pn.deviceChangeTimer)?(clearTimeout(r),this.pn.deviceChangeTimer=null):e===0&&(n=!1),o=function(){return is(a,void 0,void 0,function(){var d=this;return ys(this,function(p){return this.an.info("zsc.rd.0 start get and compare devices"),[2,new Promise(function(u,v){cu(function(x){var U,te,le,se,We,Ke;d.an.info("zsc.rd.0 get devices success. ".concat(JSON.stringify(x),"; need compare: ").concat(n));var Ze=x.microphones,et=x.speakers,ht=x.cameras,gt=d.pn.deviceInfos;if(!gt){var Et=(0,he.fU)(d.cr,I.t0.H,"",j.gf.event,j.vW.event),At=function(cn,nn){return cn.map(function(gn){return{device:gn.deviceID,device_name:gn.deviceName,type:nn}})};(0,he.lA)(Et,{dev_list:Zl(Zl(Zl([],At(ht,0),!0),At(Ze,1),!0),At(et,2)),dev_kind:"init"})}if(!gt||!n)return d.pn.deviceInfos={microphones:Ze,speakers:et,cameras:ht},void u(JSON.parse(JSON.stringify(d.pn.deviceInfos)));var Ot=!0,Bt=[],Kt=[];if((0,or.nr)()&&((te=(U=d.pn.deviceInfos)===null||U===void 0?void 0:U.cameras)===null||te===void 0?void 0:te.length)===1&&((le=d.pn.deviceInfos)===null||le===void 0?void 0:le.cameras[0].deviceID)==="")d.an.info("zsc.rd.0 cameras not accurate");else{for(var Ht=function(cn){var nn=d.pn.deviceInfos.cameras[cn];x.cameras.find(function(gn){return gn.deviceID===nn.deviceID})||Bt.push(nn)},Zt=0;Zt<d.pn.deviceInfos.cameras.length;Zt++)Ht(Zt);d.pn.deviceStateOut=!1;var un=!1;Bt.length>0&&(un=!0),Bt.forEach(function(cn){for(var nn in d.gn.publisherList){var gn=d.gn.publisherList[nn],yn=gn.publisher;gn.localStream&&gn.cameraLabel!==""&&gn.cameraLabel===cn.deviceName&&(un=!1,!yn.isVideoTrackAlive()&&yn.sendStreamStatus(-6,yn.mic_status),Ot=!1,d.pn.actionListener("_deviceError",Ft.pGN.code,cn.deviceName,"camera"),d.pn.actionListener("deviceError",Ft.pGN.code,cn.deviceName)),gn.localStream&&gn.localStream.getAudioTracks().length===0&&(un=!1)}un&&(d.pn.deviceStateOut=!0),d.deviceInterruptReport(0,cn,"camera"),Ot=!1,d.pn.actionListener("videoDeviceStateChanged","DELETE",cn)}),x.cameras.filter(function(cn){return!d.pn.deviceInfos.cameras.find(function(nn){return nn.deviceID===cn.deviceID})}).forEach(function(cn){d.deviceInterruptReport(1,cn,"camera"),Ot=!1,d.pn.actionListener("videoDeviceStateChanged","ADD",cn)})}(0,or.nr)()&&((We=(se=d.pn.deviceInfos)===null||se===void 0?void 0:se.microphones)===null||We===void 0?void 0:We.length)===1&&((Ke=d.pn.deviceInfos)===null||Ke===void 0?void 0:Ke.microphones[0].deviceID)===""?d.an.info("zsc.rd.0 microphones not accurate"):((Kt=d.pn.deviceInfos.microphones.filter(function(cn){return!x.microphones.find(function(nn){return nn.deviceID===cn.deviceID})})).forEach(function(cn){for(var nn in d.gn.publisherList){var gn=d.gn.publisherList[nn],yn=gn.publisher;gn.localStream&&gn.microLabel!==""&&(gn.microLabel===cn.deviceName||gn.microLabel!==""&&gn.microLabel.includes(cn.deviceName))&&(!yn.isAudioTrackAlive()&&yn.sendStreamStatus(yn.camera_status,-6),Ot=!1,d.pn.actionListener("_deviceError",Ft.pGN.code,d.gn.publisherList[nn].microLabel,"micro"),d.pn.actionListener("deviceError",Ft.pGN.code,d.gn.publisherList[nn].microLabel))}d.deviceInterruptReport(0,cn,"micro"),Ot=!1,d.pn.actionListener("audioDeviceStateChanged","DELETE","Input",cn)}),x.microphones.filter(function(cn){return!d.pn.deviceInfos.microphones.find(function(nn){return nn.deviceID===cn.deviceID})}).forEach(function(cn){d.deviceInterruptReport(1,cn,"micro"),Ot=!1,d.pn.actionListener("audioDeviceStateChanged","ADD","Input",cn)}));var hn=d.pn.deviceInfos.speakers.filter(function(cn){return!x.speakers.find(function(nn){return nn.deviceID===cn.deviceID})}),pn=x.speakers.filter(function(cn){return!d.pn.deviceInfos.speakers.find(function(nn){return nn.deviceID===cn.deviceID})});hn.forEach(function(cn){var nn=d.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.rP.event);nn.setAttributes({reason_type:j.rP.reason_type("delete"),device:j.rP.device(cn.deviceID),device_name:j.rP.device(cn.deviceName)}),nn.end(),Ot=!1,d.pn.actionListener("audioDeviceStateChanged","DELETE","Output",cn)}),pn.forEach(function(cn){var nn=d.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.rP.event);nn.setAttributes({reason_type:j.rP.reason_type("add"),device:j.rP.device(cn.deviceID),device_name:j.rP.device(cn.deviceName)}),nn.end(),Ot=!1,d.pn.actionListener("audioDeviceStateChanged","ADD","Output",cn)}),Ot&&d.Uh.onDeviceNoChangeQuickly(x);var Bn=$i({},d.pn.deviceInfos);if(d.pn.deviceInfos={microphones:x.microphones,speakers:x.speakers,cameras:x.cameras},d.pn.autoSwitchDeviceSetting.microphone){var mn=d.pn.deviceInfos.microphones;Kt&&Kt.length!==0&&mn.length!=0&&d.gn.previewStreamList.forEach(function(cn){return is(d,void 0,void 0,function(){var nn,gn,yn,bn,i,c,h;return ys(this,function(y){switch(y.label){case 0:return nn=cn.localStream,gn=mn[0].deviceID,bn=(yn=cn.audioTrack)==null?void 0:yn.getSettings().deviceId,i=!1,bn&&bn==="default"?(c=Bn.microphones.find(function(A){return A.deviceID==="default"}).deviceName,h=mn.find(function(A){return A.deviceID==="default"}).deviceName,i=h!==c):bn!==""&&(i=Kt.some(function(A){return A.deviceID===bn})),nn&&i&&gn!==""?(this.an.info("zsc.rd.0 auto switch audio device. "+gn),[4,this.zegoWebRtc.useAudioDevice(nn,gn)]):[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})})}if(d.pn.autoSwitchDeviceSetting.camera){var vn=d.pn.deviceInfos.cameras;Bt&&Bt.length!==0&&vn.length!=0&&d.gn.previewStreamList.forEach(function(cn){return is(d,void 0,void 0,function(){var nn,gn,yn,bn,i,c,h;return ys(this,function(y){switch(y.label){case 0:return nn=cn.localStream,gn=vn[0].deviceID,bn=(yn=cn.videoTrack)==null?void 0:yn.getSettings().deviceId,i=!1,bn&&bn==="default"?(c=Bn.cameras.find(function(A){return A.deviceID==="default"}).deviceName,h=vn.find(function(A){return A.deviceID==="default"}).deviceName,i=h!==c):bn!==""&&(i=Bt.some(function(A){return A.deviceID===bn})),nn&&i&&gn!==""?(this.an.info("zsc.rd.0 auto switch video device. "+gn),[4,this.zegoWebRtc.useVideoDevice(nn,gn)]):[3,2];case 1:y.sent(),y.label=2;case 2:return[2]}})})})}u(JSON.parse(JSON.stringify(d.pn.deviceInfos)))},function(x){v(x)})})]})})},e!==0?[3,2]:[4,o()];case 1:case 3:return[2,l.sent()];case 2:return[4,new Promise(function(d,p){a.pn.deviceChangeTimer=setTimeout(function(){return is(a,void 0,void 0,function(){var u,v;return ys(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),[4,o()];case 1:return u=x.sent(),d(u),[3,3];case 2:return v=x.sent(),p(v),[3,3];case 3:return[2]}})})},e)})]}})})},s.prototype.setVideoConfig=function(e,t){var n=this;return(0,he.rA)(this.an,Ce.I8R),new he.l3(function(r,o){var a=(0,Vo.L)(e,n.an),l=j.wd.error,d=l.qe,p=l.wn,u=n._getSpan(a,j.wd.event),v=$i({},t);for(var x in v)v[x]instanceof Object&&(v[x]=JSON.stringify(v[x]));u.setAttributes({video_params:v});var U=function(et){n.cr.setError(u,d,et)};if(!(0,B.dr)(a))return n.an.error(Ce.I8R+" localStream not found"),U("localStream not found"),void o({errorCode:p.code,extendedData:p.message+" localStream no found"});if(!t||!(0,B.w)(t)||Object.keys(t).length==0)return n.an.error(Ce.I8R+" constraints wrong"),U("constraints wrong"),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});var te,le,se=t.width,We=t.height,Ke=t.maxBitrate,Ze=t.frameRate;if(se&&(0,B.Cs)(se)&&!n.pn.checkValidNumber(se,0,7680))return n.an.error(Ce.I8R+" constraints width integer number, range[0, 7680]"),U("constraints width integer number, range[1, 7680]"),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});if(se&&(0,B.w)(se)){if(!(le=uu(se,"width",0,7680)).result)return n.an.error(Ce.I8R+" constraints width: "+le.message),U("constraints width: "+le.message),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"})}else if(se&&!(0,B.Cs)(se)&&!(0,B.w)(se))return n.an.error(Ce.I8R+" constraints width must be a number or an object. "),U("constraints width must be a number or an object."),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});if(We&&(0,B.Cs)(We)&&!n.pn.checkValidNumber(We,0,4320))return n.an.error(Ce.I8R+" constraints height integer number, range[0, 4320]"),U(" constraints height integer number, range[0, 4320]"),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});if(We&&(0,B.w)(We)){if(!(le=uu(t.height,"height",0,4320)).result)return n.an.error(Ce.I8R+" constraints height: "+le.message),U("constraints height: "+le.message),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"})}else if(We&&!(0,B.Cs)(We)&&!(0,B.w)(We))return n.an.error(Ce.I8R+" constraints height must be a number or an object. "),U(" constraints height must be a number or an object."),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});if(Ke&&!(0,B.Cs)(Ke))return n.an.error(Ce.I8R+(te=" constraints maxBitrate is not a number")),U(te),void o({errorCode:p.code,extendedData:p.message+te});if(!(0,B.TE)(Ze)&&!(0,B.Cs)(Ze)&&!(0,B.w)(Ze))return n.an.error(Ce.I8R+(te=" constraints frameRate is not a number or an object")),U(te),void o({errorCode:p.code,extendedData:p.message+te});if((0,B.Cs)(Ze)&&!(Ze>0&&Ze%1==0))return n.an.error(Ce.I8R+" constraints frameRate must be positive integer number"),U("constraints frameRate must be positive integer number"),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});if(Ze&&(0,B.w)(Ze)&&!(le=uu(Ze,"frameRate")).result)return n.an.error(Ce.I8R+" constraints frameRate: "+le.message),U("constraints frameRate: "+le.message),void o({errorCode:p.code,extendedData:p.message+" constraints wrong"});n.gh.setPublishStreamVideoConstraints(a,t,u,function(et){u.setAttributes({error:et.errorCode,message:et.extendedData}),u.end(),r(et)})})},s.prototype.setAudioConfig=function(e,t){var n=this;return(0,he.rA)(this.an,Ce.xcT),new he.l3(function(r){var o=(0,Vo.L)(e,n.an),a=n._getSpan(o,j.$7.event);if(a.setAttributes({audio_params:j.$7.audio_params(t)}),!(0,B.dr)(o))return n.an.error(Ce.xcT+" localStream not found"),n.cr.setError(a,j.$7.error.qe),void r({errorCode:j.$7.error.wn.code,extendedData:j.$7.error.wn.message+" localStream no found"});if(!t||!(0,B.w)(t)||Object.keys(t).length==0||!(0,B.TE)(t.AEC)&&!(0,B.dd)(t.AEC)||!(0,B.TE)(t.AGC)&&!(0,B.dd)(t.AGC)||!(0,B.TE)(t.ANS)&&!(0,B.dd)(t.ANS))return n.an.error(Ce.xcT+" constraints wrong"),n.cr.setError(a,j.$7.error.wn," constraints wrong"),void r({errorCode:j.$7.error.wn.code,extendedData:j.$7.error.wn.message+" constraints wrong"});n.gh.setPublishStreamAudioConstraints(o,t,a,function(l){a.end(),r(l)})})},s.prototype.mutePublishStreamVideo=function(e,t,n){var r=(0,Vo.L)(e,this.an);(0,he.rA)(this.an,Ce.NYT,". "+(r==null?void 0:r.id)+" mute: ".concat(t,", retain: ").concat(n));var o=this._getSpan(r,j.$Q.event),a=this.gn.checkPreview(r);if(!a)return this.an.error(Ce.NYT+" localStream error"),!1;if(!(0,B.dd)(t)||!(0,B.TE)(n)&&!(0,B.dd)(n))return this.an.error(Ce.NYT+" option error"),!1;var l=this.gh.enableCamera(r,!t,n);return a.syncVideoEnabled=l&&t,o.setAttributes({mute_type:j.$Q.mute_type(t?1:0),retain:j.$Q.retain(n||!1)}),o.end(),(0,he.OY)(this.an,Ce.NYT),l},s.prototype.mutePublishStreamAudio=function(e,t){var n=(0,Vo.L)(e,this.an);(0,he.rA)(this.an,Ce.iMZ,(n==null?void 0:n.id)+" mute: ".concat(t));var r=this.gn.checkPreview(n);if(!r)return this.an.error(Ce.iMZ+" localStream error"),!1;var o=this._getSpan(n,j.Kt.event);if(!(0,B.dd)(t))return this.an.error(Ce.iMZ+" option error"),!1;var a=this.gh.enableMicrophone(n,!t);return r.syncAudioEnabled=a&&t,o.setAttributes({mute_type:j.Kt.mute_type(t?1:0)}),o.end(),(0,he.OY)(this.an,Ce.iMZ),a},s.prototype.muteMicrophone=function(e){this.an.info(Ce.QpU+" call");var t=(0,he.fU)(this.cr,I.t0.H,"",j.HF.event,j.oq.event);if(!(0,B.dd)(e))return this.an.error(Ce.QpU+" option error"),this.cr.setError(t,Ft.ZEp),!1;var n=this.gh.enableMicrophoneOnly(!e),r=Object.keys(this.gn.publisherList).map(function(o){return{stream_id:o}});return(0,he.lA)(t,{enable:j.HF.enable(!e),stream_list:j.HF.stream_list(r)}),this.an.info(Ce.QpU+" end"),n},s.prototype.handleTrack=function(e,t,n,r,o){this.gh.handleTrack(e,t,n,r,o)},s.prototype._getSpan=function(e,t){var n=this.gn.checkPublish(e);return this.cr.createSpan(I.t0.H,n?{key:j.Og.event,par:n.streamID}:{key:j.vW.event},{key:""},t)},s.prototype.enVideoSpan=function(e,t,n){this.gh.enVideoSpan(e,t,n)},s.prototype.replaceTrack=function(e,t,n,r){return is(this,void 0,void 0,function(){var o,a,l,d,p,u;return ys(this,function(v){return o=this._getSpan(e,j.oe.event),a=j.oe.error.wn,(0,B.dr)(e)?t&&t instanceof MediaStreamTrack?(l={id:t.id,muted:t.muted,enabled:t.enabled,kind:t.kind,readyState:t.readyState,label:t.label},(0,he.rA)(this.an,Ce.d9R,". ".concat(e.id," track: ")+JSON.stringify(l)),d=!0,this.pn.browser==="safari"&&(r==null?void 0:r.isReplaceNew)!==void 0&&(d=r.isReplaceNew),p=(0,B.TE)(r==null?void 0:r.isCaptureStream)||r==null?void 0:r.isCaptureStream,u=this.gh._replaceTrack(e,t,n,void 0,d,p),o.setAttributes({track_kind:j.oe.track_kind(t.kind)}),o.end(),[2,u]):(this.an.error(Ce.d9R+" mediastream track no found"),this.cr.setError(o,a,"mediastream track no found"),[2,{errorCode:a.code,extendedData:a.message+" mediastream track no found"}]):(this.an.error(Ce.d9R+" localStream not found"),this.cr.setError(o,a,"localStream not found"),[2,{errorCode:a.code,extendedData:a.message+" localStream no found"}])})})},s.prototype.useVideoDevice=function(e,t){var n=this,r="zc.uvd.0";return(0,he.rA)(this.an,r),new he.l3(function(o){var a=(0,Vo.L)(e,n.an),l=n._getSpan(a,j.RI.event);if(l.setAttributes({device:j.RI.device(t)}),!(0,B.dr)(a))return n.an.error(r+" localStream not found"),n.cr.setError(l,j.RI.error.qe),void o({errorCode:j.RI.error.wn.code,extendedData:j.RI.error.wn.message});if(!(0,B.QP)(t))return n.an.error(r+" deviceID must be string"),n.cr.setError(l,j.RI.error.wn," deviceID must be string"),void o({errorCode:j.RI.error.wn.code,extendedData:j.RI.error.wn.message});var d=function(p){(0,he.lA)(l,{error:p.errorCode,message:p.extendedData}),n.gn.getPublishList(a).forEach(function(u){var v,x;u.cameraLabel=((x=(v=u.publisher.previewer)===null||v===void 0?void 0:v.videoTrack)===null||x===void 0?void 0:x.label)||u.cameraLabel}),o(p)};cu(function(p){var u=p.cameras.find(function(v){return v.deviceID==t});if(!u)return n.an.error(r+" "+he.pt),void d({errorCode:j.RI.error.Ve.code,extendedData:j.RI.error.Ve.message});l.setAttributes({device_name:j.RI.device_name(u==null?void 0:u.deviceName)}),n.gh.Bh("video",a,t,d)},function(p){n.an.warn(r+" getDevices err:"+p),n.gh.Bh("video",a,t,d)})})},s.prototype.useFrontCamera=function(e,t){var n=this,r="zc.ufc.0";return(0,he.rA)(this.an,r,""+t),new he.l3(function(o,a){var l=(0,Vo.L)(e,n.an),d=n._getSpan(l,j.RI.event);if(!(0,B.dr)(l))return n.an.error(r+" localStream not found"),n.cr.setError(d,j.RI.error.qe),void a({errorCode:j.RI.error.wn.code,extendedData:j.RI.error.wn.message});if(!(0,B.dd)(t))return n.an.error(r+" enable must be boolean"),n.cr.setError(d,j.RI.error.wn," enable must be boolean"),void a({errorCode:j.RI.error.wn.code,extendedData:j.RI.error.wn.message});var p=(0,or.m0)(),u=(0,or.aR)(),v=(0,or.HR)();if(!(p||u||v))return n.an.error(r+" must use in mobile"),n.cr.setError(d,j.RI.error.Qe," must use in mobile"),void a({errorCode:j.RI.error.Qe.code,extendedData:j.RI.error.Qe.message});var x=t?"user":"environment";d.setAttributes({facing_mode:j.RI.facing_mode(x)}),n.gh.Bh("video",l,"",function(U){d.setAttributes({error:U.errorCode,message:U.extendedData}),d.end(),n.gn.getPublishList(l).forEach(function(te){var le,se;te.cameraLabel=((se=(le=te.publisher.previewer)===null||le===void 0?void 0:le.videoTrack)===null||se===void 0?void 0:se.label)||te.cameraLabel}),(U==null?void 0:U.errorCode)===0?o(U):a(U)},{facingMode:x})})},s.prototype.useAudioDevice=function(e,t){var n=this,r="zc.uad.1";return(0,he.rA)(this.an,r),new he.l3(function(o){var a=(0,Vo.L)(e,n.an),l=n._getSpan(a,j.li.event);l.setAttributes({device:j.li.device(t)});var d=function(u,v){n.an.error(r+" "+v);var x=u;x.message=x.message+(v?" "+v:""),n.cr.setError(l,u,v),o({errorCode:x.code,extendedData:x.message})},p=function(u){(0,he.lA)(l,{error:u.errorCode,message:u.extendedData}),n.gn.getPublishList(a).forEach(function(x){var U;x.microLabel=((U=a.getAudioTracks()[0])===null||U===void 0?void 0:U.label)||x.microLabel});var v=n.gn.checkPreview(a);u.errorCode===0&&v&&(v.hasMicTrack=!0),o(u)};(0,B.dr)(a)?(0,B.QP)(t)?cu(function(u){var v=u.microphones.find(function(x){return x.deviceID==t});if(!v)return n.an.error(r+" "+he.pt),void p({errorCode:j.li.error.Ve.code,extendedData:j.li.error.Ve.message});l.setAttributes({device_name:j.li.device_name(v==null?void 0:v.deviceName)}),n.gh.Bh("audio",a,t,p)},function(u){n.an.warn(r+" getDevices err:"+u),n.gh.Bh("audio",a,t,p)}):d(j.li.error.wn,"deviceID must be string"):d(j.li.error.qe,"localStream not found")})},s.prototype.enableDualStream=function(e){var t="zsc.eds";(0,he.rA)(this.an,t);var n=(0,Vo.L)(e,this.an),r=this.gn.checkPreview(n);if(r)if(r!=null&&r.lowStream)this.an.error(t+" low stream already exists");else{var o=r.videoPreviewType||r.previewType;(0,or.gm)()&&o=="custom"?this.an.error(t+" can not support firefox"):this.gn.checkPublish(n)?this.an.error(t+" is publishing"):(r.enableDualStream=!0,r.createLowStream())}else this.an.error(t+" preview no found")},s.prototype.setLowStreamParameter=function(e,t){var n=(0,Vo.L)(e,this.an),r=this.gn.checkPreview(n);if(r){var o=r.videoInfo,a=[];for(var l in t)isNaN(+t[l])&&a.push(l);if(a.length)throw new Error('param "'.concat(a.join(","),' type error"'));t.width&&o.width&&Lc(o.width)&&t.width>Lc(o.width)?this.an.error("zsc.slsp.0 low stream width can not larger than high stream"):t.height&&o.height&&Lc(o.height)&&t.height>Lc(o.height)?this.an.error("zsc.slsp.0 low stream height can not larger than high stream"):t.frameRate&&o.frameRate&&Lc(o.frameRate)&&t.frameRate>Lc(o.frameRate)||t.height&&o.bitRate&&t.bitRate>o.bitRate||(r.lowStreamConfig=Object.assign(r.lowStreamConfig,t))}else this.an.error("zsc.slsp.0 preview no found")},s.prototype.setDummyCaptureImagePath=function(e,t){var n=this;return new he.l3(function(r,o){var a=(0,Vo.L)(t,n.an),l=n.gn.checkPreview(a);if(!l)return n.an.error("zc.sdcp.0 preview no found"),void r(!1);if(!(0,B.QP)(e))return n.an.error("zc.sdcp.0 filePath type error"),void r(!1);var d=new Image;d.src=e,d.crossOrigin="anonymous",d.onload=function(){l.loadImgTimer&&clearTimeout(l.loadImgTimer),l.loadImgTimer=void 0,n.an.info("zc.sdcp.0 load file path success"),l.setMuteImage(d),r(!0)},l.loadImgTimer=setTimeout(function(){n.an.error("zc.sdcp.0 load img timeout"),r(!1)},5e3)})},s.prototype.enableAutoSwitchDevice=function(e){this.an.info("zc.easw call. "+JSON.stringify(e)),this.pn.autoSwitchDeviceSetting=$i({},e)},s.prototype.enableCameraCapturing=function(e,t){return t===void 0&&(t=!0),is(this,void 0,void 0,function(){var n,r,o,a,l,d;return ys(this,function(p){return this.an.info("zsc.ecc call by user "+t),n=(0,he.fU)(this.cr,I.t0.H,"",j.BY.event,j.oq.event),r=(0,Vo.L)(e,this.an),(o=this.gn.checkPreview(r))?(a=o.videoPreviewType||o.previewType,o.localStream&&o.videoTrack&&a==="camera"?(l=this.gn.getPublishList(r),d=l.map(function(u){return{stream_id:u.streamID}}),(0,he.lA)(n,{enable:j.BY.enable(t),stream_list:j.BY.stream_list(d)}),[2,this.gh.enableCameraCapturing(o,t)]):(this.an.error("zsc.ecc not camera stream"),[2,!1])):(this.an.error("zsc.ecc "+he.h2),this.cr.setError(n,Ft.fzq),[2,!1])})})},s.prototype.getStreamStats=function(e){var t,n,r;return this.an.info(Ce.Ywv+" call"),(0,B.dr)(e)&&e.getTracks().length>0?r=(t=this.gn.checkPublish(e))===null||t===void 0?void 0:t.publisher:(0,B.QP)(e)&&(r=(n=this.gn.publisherList[e])===null||n===void 0?void 0:n.publisher),r?(r==null?void 0:r.qualityHandler.Wh)||null:(this.an.error("zsc.sp.0 stream is not publishing"),null)},s.prototype.startWaitPublish=function(){var e=this;this.gn.waitPublishList.forEach(function(t){e.gn.startPublishingStream(t)}),this.gn.waitPublishList=[]},s.prototype.deviceInterruptReport=function(e,t,n){var r,o=n==="camera"?j.KZ:j.fF;n==="micro"?r=1:n==="speaker"&&(r=0);var a=(0,he.fU)(this.cr,I.t0.H,"",o.event,j.vW.event),l={changed_type:o.interrupt(e),device:o.device(t.deviceID),device_name:o.device_name(t.deviceName)};(0,B.Cs)(r)&&(l.device_type=r),(0,he.lA)(a,l)},s.prototype.initCopyMusic=function(e){if(this.gn.useCopyMusic&&!isNaN(this.pn.engineConfig.choirRole)){var t=this.gn.checkPreview(e),n=this.pn.roomList[0];if(n){var r=Array.from(new Set(n.streamList.map(function(a){return a.id_name}))),o=r.length+(r.includes(this.gn.userid)?0:1);t&&!t.onlyPreview&&t.setVolumeFactorByUserCount(o)}}},s.prototype.setEmptyAudioTrack=function(e,t){if(this.pn.engineConfig.keepAudioTrack&&e.getAudioTracks().length==0){var n=t.getEmptyAudioTrack();n&&(n.enabled=!1,e.addTrack(n),t&&(t.hasEmptyAudioTrack=!0))}},s.prototype.addShareScreenEnd=function(e){var t=this,n=e.getVideoTracks()[0];n&&(n.onended=function(){var r=t.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.ny.event);r.setAttributes({stop_reason:j.ny.stop_reason("screenSharingEnded")}),e&&t.stopPreview(e),r.end(),t.pn.actionListener("screenSharingEnded",e)})},s.prototype.destroy=function(){he.VJ.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},s})(),sa=function(){return sa=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},sa.apply(this,arguments)},Af=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Pf=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},gl=j.Nr.event,aa=j.Nr,Hh=(function(){function s(e,t,n,r,o){this.an=e,this.dataReport=t,this.pn=n,this.gn=r,this.rtm=o}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.startPlayingStream=function(e,t,n){var r=this;return this.an.info(Ce.rGc+" playOption: "+JSON.stringify(Rn(t||{},["CDNVideo","CDNPlayer"]))+" isDataChannel: "+JSON.stringify(!!n),{streamid:e}),new he.l3(function(o,a){return r._handlePlayStream(e,t,o,a,n)})},s.prototype._handlePlayStream=function(e,t,n,r,o){var a,l=this,d=aa,p=function(se,We){l.an.error(Ce.rGc+" "+(We||se.message));var Ke=l.cr.getAPIErrorReport(gl);Ke&&l.cr.takeAPIErrorReport(gl,se,Ke),r&&r(sa(sa({},se),{errorCode:se.code,extendedData:se.message+(We?" "+We:"")}))};if(!e)return p(d.error.de),!1;if(!(0,B.QP)(e))return p(d.error.de,"stream id type error"),!1;if(e.length>I.LO)return p(d.error.me,"stream id length limit "+I.LO),!1;if(!(0,he.kP)(e)&&(this.an.warn(Ce.rGc+" #invald streamID:".concat(e)),this.pn.isFlutter)||!(0,he.jy)(e))return p(d.error.pe),!1;if(!(0,B.TE)(t)&&!(0,B.w)(t))return p(d.error.ve,"playOption must be object"),!1;if(!(0,B.TE)(t==null?void 0:t.codecTemplateID)&&!Number.isInteger(t==null?void 0:t.codecTemplateID))return p(d.error.ve,"codecTemplateID must be integer "),!1;if((0,B.dd)(t==null?void 0:t.adaptiveSwitch)&&(t!=null&&t.adaptiveSwitch)){if((t==null?void 0:t.resourceMode)!==I.qP.L3)return p(d.error.ve,"adaptiveSwitch only support resourceMode as L3"),!1;if(!(0,B.C9)(t==null?void 0:t.adaptiveTemplateIDList)||(t==null?void 0:t.adaptiveTemplateIDList.length)===0)return p(d.error.ve,"adaptiveTemplateIDList must be array and length > 0"),!1}var u=this.gn.maxChannels;if((0,B.Cs)(u)&&Object.keys(this.gn.playerList).length>=u){var v=Object.values(this.gn.playerList).filter(function(se){return(se==null?void 0:se.isProbe)===!1}).length;if(v>=u)return this.an.error("zsc.pss.1 play streams is out limit "+v+" "+u),p(d.error.Ne),!1}var x=Mn(this.pn.appid,this.pn.idName,e),U=((a={})["_play_"+e]={stream_sid:x},a);if(this.cr.setPublicPros(U),this.pn.playAccelerate&&this.pn.roomList.length>0)this.an.info(Ce.rGc+" play accelerate");else if(this.rtm.isDisConnect())return p(d.error.ge),!1;this.pn.pullLimited||(e=NaN+e),t&&t.videoCodec&&(t.videoCodec=t.videoCodec.toUpperCase());var te=this.pn.settingConfig.getSetting("resource_mode",!0);te!==void 0&&(this.an.info(Ce.rGc+" setting resource_mode "+te),!t&&(t={}),t.resourceMode=te);var le=this.gn.setPlayStateStart(e,t,x,o);return le!==!0?(p(JSON.parse(JSON.stringify(le)),"cannot start play"),!1):(this.gn.onPlayStateUpdate(I.h7.retry,e,{code:0,message:""}),this.gn.playSuccessCallBackList[e]=function(se){n&&n(se)},r&&(this.gn.playErrorCallBackList[e]=r),this.pn.appConfig?(this.gn.startPlayingStream(e),!0):(this.gn.waitPlayList.push(e),!0))},s.prototype.setPlayStreamVideoType=function(e,t){var n=this;return new Promise(function(r,o){return Af(n,void 0,void 0,function(){var a,l;return Pf(this,function(d){switch(d.label){case 0:if(a=Oi(this.an,e),!(0,B.QP)(e)||e==="")return a.error(Ce.dk2+" streamid must be string and not empty"),o(!1),[2];if(!(l=this.gn.playerList[e]))return a.error(Ce.dk2+" player not exist"),o(!1),[2];if(![0,1,2].includes(t))return a.error(Ce.dk2+" streamType must be number 0 or 1 or 2"),o(!1),[2];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,l.setPlayStreamVideoType(t)];case 2:return d.sent().result===0?r(!0):o(!1),[3,4];case 3:return d.sent(),o(!1),[3,4];case 4:return[2]}})})})},s.prototype.stopPlayingStream=function(e,t,n){var r,o,a=Oi(this.an,e);a.info(Ce.dk2+" call");var l=this.cr.createSpan(I.t0.I,{key:j.vW.event},{key:""},j.oI.event);if(!(0,B.QP)(e)||e==="")return a.error(Ce.dk2+" streamid must be string and not empty"),this.cr.setError(l,j.oI.error.wn,"stream id type error"),void delete this.pn.reportSeqList.stopPlay[e];var d=this.gn.playerList[e];l.setAttributes({stream_id:j.oI.stream_id(e),room_id:j.oI.room_id((r=this.gn.playerList[e])===null||r===void 0?void 0:r.room.roomID),webrtc_sid:j.oI.webrtc_sid(d==null?void 0:d.sessionId),stream_sid:j.oI.stream_sid(d==null?void 0:d.streamSid),biz_product:d&&((o=d.playOption)===null||o===void 0?void 0:o.resourceMode)==I.qP.DG?1:0});var p=d&&(d==null?void 0:d.curCBState.state)!=="NO_PLAY";n&&!t&&(d==null?void 0:d.state)!==6&&(t=aa.error.De);var u=[1,3].includes(d==null?void 0:d.resourceMode)&&(d==null?void 0:d.playMode)===I.ey.CDN;for(var v in this.gn.stopPlayingStream(e,t),this.pn.streamUrlMap)if(this.pn.streamUrlMap[v]===e){delete this.pn.streamUrlMap[v];break}t?this.cr.setError(l,t):l.end(),p&&this.gn.onPlayStateUpdate(I.h7.error,e,t||{code:0,message:""},{isCDN:u}),a.debug(Ce.dk2+" call success")},s.prototype.stopPlayingStreamInRoom=function(e){for(var t in this.an.info(Ce.V9q+" call "+e),this.gn.playerList)this.gn.playerList[t].room.roomID===e&&this.stopPlayingStream(t)},s.prototype.setStreamAudioOutput=function(e,t){var n=this;return!(t==null||t.length==0||!e)&&(this.an.debug("zsc.ssao.0 device "+t),e?e.sinkId!=="undefined"?(e.setSinkId(t).then(function(){n.an.info("zsc.ssao.0 success device: "+t)}).catch(function(r){n.an.info("zsc.ssao.0 "+r.name)}),!0):(this.an.error("zsc.ssao.0 browser does not suppport"),!1):(this.an.error("zsc.ssao.0 no localVideo"),!1))},s.prototype.startWaitPlay=function(){var e=this;this.gn.waitPlayList.forEach(function(t){e.gn.startPlayingStream(t)}),this.gn.waitPlayList=[]},s.prototype.setPlayerListForbid=function(e){var t=this;e.forEach(function(n){var r=n.stream_attr_opts,o=t.gn.playerList[n.streamID];r&&(o==null||o.setMuteStreamByPlayMode(r))})},s.prototype.getStreamStats=function(e){var t,n;return this.an.info(Ce.bp1+" call"),(0,B.QP)(e)&&(n=this.gn.playerList[e]),n&&(!((t=n==null?void 0:n.qualityHandler)===null||t===void 0)&&t.Wh)?n.qualityHandler.Wh||null:(this.an.error("zsc.sp.0 stream is not playing"),null)},s.prototype.mutePlayStreamVideo=function(e,t){(0,he.rA)(this.an,Ce.OYv,e+" "+t);var n=this.cr.createSpan(I.t0.H,{key:j.Nr.event,par:e},{key:""},j.w_.event);n.setAttributes({mute_type:j.w_.mute_type(t?1:0)});var r=this.mutePlayStream(e,"video",t);return n.end(),this.an.info(Ce.OYv+" end"),r},s.prototype.mutePlayStreamAudio=function(e,t){(0,he.rA)(this.an,Ce.x_Q,e+" "+t);var n=this.cr.createSpan(I.t0.H,{key:j.Nr.event,par:e},{key:""},j.lZ.event);n.setAttributes({mute_type:j.lZ.mute_type(t?1:0)});var r=this.mutePlayStream(e,"audio",t);return n.end(),this.an.info(Ce.x_Q+" end"),r},s.prototype.muteAllPlayAudioStreams=function(e){var t=this;return(0,he.rA)(this.an,Ce.fcT," "+e),new Promise(function(n,r){if(typeof e!="boolean")return t.an.error(Ce.fcT+" mute should be a boolean type"),void r(!1);var o=Object.keys(t.gn.playerList),a=[];if(!t.gn.playModule)return t.an.info(Ce.fcT+" cannot find play module."),void r(!1);t.gn.defaultAudioMuted=e,t.an.info(Ce.fcT+" "+"mute ".concat(e," streamid ").concat(JSON.stringify(o)));for(var l=0,d=o;l<d.length;l++)a.push(t.mutePlayStreamAudio(d[l],e));Promise.all(a).then(function(p){t.an.info(Ce.fcT+" "+"mute ".concat(e," all audio success")),n(!0)}).catch(function(p){t.an.error(Ce.fcT+" mute: "+e+" error catch: "+p),r(!1)})})},s.prototype.muteAllPlayVideoStreams=function(e){var t=this;return(0,he.rA)(this.an,Ce.Y9k," "+e),new Promise(function(n,r){if(typeof e!="boolean")return t.an.error(Ce.Y9k+" mute should be a boolean type"),void r(!1);var o=Object.keys(t.gn.playerList),a=[];if(!t.gn.playModule)return t.an.info(Ce.Y9k+" cannot find play module."),void r(!1);t.gn.defaultVideoMuted=e,t.an.info(Ce.Y9k+" "+"mute ".concat(e," streamid ").concat(JSON.stringify(o)));for(var l=0,d=o;l<d.length;l++)a.push(t.mutePlayStreamVideo(d[l],e));Promise.all(a).then(function(p){t.an.info(Ce.Y9k+" "+"mute ".concat(e," all audio success")),n(!0)}).catch(function(p){t.an.error(Ce.Y9k+" mute: "+e+" error catch: "+p),r(!1)})})},s.prototype.mutePlayStream=function(e,t,n,r){var o=this;return r===void 0&&(r=!0),this.an.info("zsc.mps.0 call "+t+" "+n),new he.l3(function(a,l){if(!(0,B.QP)(e)||e=="")return o.an.error("zsc.mps.0 streamID must be string and not empty"),void l(!1);if(!(0,B.dd)(n))return o.an.error("zsc.mps.0 mute must be boolean"),void l(!1);var d=o.gn.playerList[e];if(!d)return o.an.error("zsc.mps.0 player not found"),void l(!1);if(t==="video"){if(d.playOption&&d.playOption.video===!1)return o.an.error("zsc.mps.0 stream no contain video"),void l(!1);if(r&&(d!=null&&d.isServerMuteVideo))return o.an.error("zsc.mps.0 stream ".concat(e," has forbid video")),void l(!1);if(d.playMode===I.ey.CDN)return o.an.info("zsc.mps.0 stream ".concat(e," cdn mute video ").concat(n)),void(d.playMediaStatus.video=!n);d.ActivatePlayVideoStream(n,function(){var p,u;o.an.info("zsc.mps.0 suc"),d.playMediaStatus.video=!n;var v=j.es,x=o.cr.createSpan(I.t0.H,{key:j.Nr.event,par:e},{key:""},v.event);x.setAttributes({webrtc_sid:v.webrtc_sid(d.sessionId),video_activate:v.video_activate(!!d.playMediaStatus.video),audio_activate:v.audio_activate(!!d.playMediaStatus.audio),video_layer:v.video_layer(((p=d==null?void 0:d.playOption)===null||p===void 0?void 0:p.streamType)===2?-1:(u=d==null?void 0:d.playOption)===null||u===void 0?void 0:u.streamType)}),x.end(),d.handleVideoTrackForPlaying(),a(!0)},function(){o.an.error("zsc.mps.0 fail"),l(!1)})}else if(t==="audio"){if(d.playOption&&d.playOption.audio===!1)return o.an.error("zsc.mps.0 stream no contain audio"),void l(!1);if(r&&(d!=null&&d.isServerMuteAudio))return o.an.error("zsc.mps.0 stream ".concat(e," has forbid audio")),void l(!1);if(d.playMode===I.ey.CDN)return o.an.info("zsc.mps.0 stream ".concat(e," cdn mute audio ").concat(n)),void(d.playMediaStatus.audio=!n);d.ActivatePlayAudioStream(n,function(){o.an.info("zsc.mps.0 suc"),d.playMediaStatus.audio=!n;var p=j.es,u=o.cr.createSpan(I.t0.H,{key:j.Nr.event,par:e},{key:""},p.event);u.setAttributes({webrtc_sid:p.webrtc_sid(d.sessionId),video_activate:p.video_activate(!!d.playMediaStatus.video),audio_activate:p.audio_activate(!!d.playMediaStatus.audio)}),u.end(),a(!0)},function(){o.an.error("zsc.mps.0 fail"),l(!1)})}else l(!1)})},s})(),Fh=(function(){function s(e,t,n,r){this.gn=e,this.pn=t,this.an=n,this.rtm=r}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.setStreamExtraInfo=function(e,t){var n=this;return new he.l3(function(r,o){var a=n.gn.getRoomByStreamID(e),l=j.Fv,d=n.cr.createSpan(Z.t0.H,a?{key:j.B$.event,par:a==null?void 0:a.roomID}:{key:j.oq.event},{key:""},l.event);d.setAttributes({stream_id:l.stream_id(e),stream_extra_info:l.stream_extra_info(t)});var p=function(u,v){v===void 0&&(v=""),n.an.error("zb.ssei "+v),n.cr.setError(d,u,v),o({errorCode:u.code,extendedData:u.message+" "+v})};(0,B.QP)(e)&&e!=""?(0,B.QP)(t)?t.length!==0?t.length>I.uv?p(l.error._zpg_kExtraInfoTooLong):n.rtm.isDisConnect()?p(l.error.Ue):n.pn.publishStreamList[e]?a?a.streamHandler.setStreamExtraInfo(e,t,function(u,v){var x,U,te,le;if(((x=u==null?void 0:u.body)===null||x===void 0?void 0:x.err_code)===0||(u==null?void 0:u.errorCode)===0)d.setAttributes({send_seq:l.send_seq(v)}),d.end(),r({errorCode:((U=u==null?void 0:u.body)===null||U===void 0?void 0:U.err_code)===0?(te=u==null?void 0:u.body)===null||te===void 0?void 0:te.err_code:u==null?void 0:u.errorCode,extendedData:""});else{var se={errorCode:((le=u==null?void 0:u.body)===null||le===void 0?void 0:le.err_code)||(u==null?void 0:u.code)};n.cr.setError(d,se),o(se)}},p):p(l.error.Ue):p(l.error.Be):p(l.error._zpg_kExtraInfoNull):p(l.error.wn," extraInfo must be string"):p(l.error.wn," streamID must be string and not empty")})},s})(),Xl=function(){return Xl=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Xl.apply(this,arguments)},Vd=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Hd=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Ha=j.zF,Gh=j.Nr.event,Bs=j.Nr.error,so=j.Og.error,yu=(function(){function s(e,t,n,r,o,a,l){var d=this;this.an=e,this.dataReport=t,this.pn=n,this.gn=r,this.rtm=o,this.ac=a,this.zegoWebRtc=l,this.beforeunloadListener=function(){d.logger.stopStorageLog();for(var p=0;p<d.gn.previewStreamList.length;p++)d.gn.previewStreamList[p].stopPreview();d.gn.previewStreamList=[]},this.pagehideListener=function(){for(var p in window.event&&(window.event.cancelBubble=!0),d.gn.publisherList)d.publishModule.stopPublishingStream(p);for(var p in d.gn.playerList)d.playModule.stopPlayingStream(p)},this.messageListener=function(p){var u=p.data,v=u.type;v==="SS_DIALOG_SUCCESS"&&d.screenStreamFrom(u.streamId,u.canRequestAudioTrack,ve("screenShare",d.pn.callbackList)),v==="SS_DIALOG_CANCEL"&&ve("screenShare",d.pn.callbackList)(!1,null,v)},this.offlineListener=function(){for(var p in d.an.info("zc.off.0 "+he.Rl),d.pn.networkState=I.D2.offline,d.gn.publisherList)d.gn.stopNetProbe(d.gn.publisherList[p].publisher);for(var p in d.gn.playerList){var u=d.gn.playerList[p];u.playMode==I.ey.CDN&&u.zegoCdnPlayer&&(u.zegoCdnPlayer.canRetry=!1),d.gn.stopNetProbe(u)}},this.onlineListener=function(p){for(var u in d.an.info("zc.on.0 network is online"),d.pn.networkState=I.D2.online,d.gn.publisherList){var v=d.gn.publisherList[u].publisher,x=d.gn.publisherList[u].retryStreamHandler;v.state==7||v.stateNego==fe.stop||v.iceStateDisConnect?!x.isOverTime&&x.publishStateHandle(I.eZ.error,u,so.xn):v.state==6&&x.stopMaxTime()}for(var u in d.gn.playerList){var U=d.gn.playerList[u],te=U.playMode,le=(x=U.retryStreamHandler,U.zegoCdnPlayer);te==I.ey.CDN&&le&&(le.canRetry=!1),U.state==7||te!==I.ey.CDN&&(U.stateNego==0||U.iceStateDisConnect)?!x.isOverTime&&x.playStateHandle(I.h7.error,u,Bs.Se):U.state==6&&x.stopMaxTime()}},this.visibilitychangeListener=function(p){var u="";u=he.VJ.visibilityState==="visible"?"foreground":"background";var v=d.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.E$.event);v.setAttribute("state",j.E$.state(u)),v.end()},this.safariPagehideListener=function(p){var u=d.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.E$.event);u.setAttribute("state",j.E$.state("background")),u.end()},this.safariPageshowListener=function(p){var u=d.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.E$.event);u.setAttribute("state",j.E$.state("foreground")),u.end()},this.publishModule=new ml(this.an,this.dataReport,this.pn,this.gn,this.rtm,this.zegoWebRtc),this.playModule=new Hh(this.an,this.dataReport,this.pn,this.gn,this.rtm),this.gn.playModule=this.playModule,this.initAdvance(),this.streamCommon=new Fh(r,n,e,o),this.initStreamCDN(),this.initAudioMix(),this.pn.appConfig=this.rtm.getAppConfig(),this.init()}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"logger",{get:function(){return this.an},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stateCenter",{get:function(){return this.pn},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamCenter",{get:function(){return this.gn},enumerable:!1,configurable:!0}),s.prototype.init=function(){var e=this;this.bindWindowListener(),this.bindRTMListener(),this.bindStreamCenterHandler(),this.bindEngineDestroyListener(),this.bindListener("_engineConfigUpdate",function(t){isNaN(t.choirRole)||e.updatePreviewerVolumeFactor()})},s.prototype.initAudioMix=function(){},s.prototype.initAdvance=function(){},s.prototype.initStreamCDN=function(){},s.prototype.bindWindowListener=function(){var e=(0,or.$t)(),t=e.match(/iPad/i)||e.match(/iPhone/i)?"pagehide":this.pn.browser==="firefox"?"beforeunload":"unload";window.addEventListener("beforeunload",this.beforeunloadListener),window.addEventListener(t,this.pagehideListener),window.addEventListener("message",this.messageListener),window.addEventListener("offline",this.offlineListener),window.addEventListener("online",this.onlineListener),he.VJ.addEventListener("visibilitychange",this.visibilitychangeListener),(0,or.nr)()&&(window.addEventListener("pagehide",this.safariPagehideListener),window.addEventListener("pageshow",this.safariPageshowListener))},s.prototype.offWindowListner=function(){var e=(0,or.$t)(),t=e.match(/iPad/i)||e.match(/iPhone/i)?"pagehide":this.pn.browser==="firefox"?"beforeunload":"unload";window.removeEventListener("beforeunload",this.beforeunloadListener),window.removeEventListener(t,this.pagehideListener),window.removeEventListener("message",this.messageListener),window.removeEventListener("offline",this.offlineListener),window.removeEventListener("online",this.onlineListener),he.VJ.removeEventListener("visibilitychange",this.visibilitychangeListener),(0,or.nr)()&&(window.removeEventListener("pagehide",this.safariPagehideListener),window.removeEventListener("pageshow",this.safariPageshowListener))},s.prototype.bindEngineDestroyListener=function(){var e=this;this.pn.listenerList._engineDestroy.push(function(){e.offWindowListner()})},s.prototype.bindRTMListener=function(){var e=this;this.rtm._on("_settingCanFetch",function(t){return Vd(e,void 0,void 0,function(){var n,r,o;return Hd(this,function(a){return this.an.info("zc.scf stream config "+JSON.stringify(t).length),t&&(this.pn.settingConfig.setSetting(t.setting),!((r=t.setting)===null||r===void 0)&&r.open_mini_sdp&&(n=this.pn.settingConfig.getSetting("open_mini_sdp"),(o=this.gn)===null||o===void 0||o.initMiniSdpWorker(n))),[2]})})}),this.rtm._on("_appConfigRsp",function(){e.an.info("zc.acr call ");var t=!e.pn.appConfig;e.pn.appConfig=e.rtm.getAppConfig(),e.an.info("zc.acr appConfig ".concat(JSON.stringify(e.pn.appConfig))),t&&(e.gn.reConnectSignals(),e.publishModule.startWaitPublish(),e.playModule.startWaitPlay())}),this.rtm._on("_netAppConfigRsp",function(t){e.pn.netAppConfig=t,e.pn.supportBg=e.checkBackgroundCapacity()}),this.rtm._on("_roomLogin",function(t,n){var r;e.pn.appid=e.rtm.getAppID(),e.pn.idName=e.rtm.getUserID(),e.pn.nickName=e.rtm.getUserName(),e.pn.testEnvironment=e.rtm.isTestEnvironment(),e.pn.isMultiRoom=e.rtm.getMultiRoom(),e.gn.setSessionInfo(e.pn.appid,e.pn.idName,e.pn.testEnvironment);var o=e.pn.getRoomByRoomID(t);if(!o){var a=new hu(e.an,e.pn,e.rtm,e.gn,t);e.bindStreamHandler(a),e.pn.roomList.push(o={roomID:t,streamHandler:a,sessionID:"",roomSessionID:"",token:n,isResetRoom:!1,streamList:[],streamInfoList:[],dataChannelManager:null});var l=e.pn.au("connect_media_in_advance",!0),d=e.pn.au("connect_media_in_advance");((r=l??e.pn.engineConfig.connectMediaServerInAdvance)!==null&&r!==void 0?r:d)&&e.gn.connectWebRTCCenterServer(!0,!0,t,n)}}),this.rtm._on("roomLoginResponse",function(t){return Vd(e,void 0,void 0,function(){var n,r,o,a,l,d;return Hd(this,function(p){return this.an.info("zc.rlr call "+JSON.stringify(t)),n=t.header.room_id||t.body.room_id,this.pn.appConfig=this.rtm.getAppConfig(),r=this.rtm.getToken(n),o=this.rtm.getSessionId(n),a=this.rtm.getRoomSessionID(n),(l=this.pn.getRoomByRoomID(n))||(d=new hu(this.an,this.pn,this.rtm,this.gn,n),this.bindStreamHandler(d),this.pn.roomList.push(l={roomID:n,streamHandler:d,sessionID:o,roomSessionID:a,token:r,isResetRoom:!1,streamList:[],streamInfoList:[],dataChannelManager:null})),l.sessionID=o,l.roomSessionID=a,t.body.stream_fetch_flag===1?(this.an.info("zc.rlr stream fetch "+n),l.streamHandler.room=l,l.streamHandler.fetchStreamList(),[2]):(l.streamHandler.handleStreamStart(t,l),this.gn.checkStreamReport(),this.an.info("zc.rlr end "+n),[2])})})}),this.rtm._on("HBResponse",function(t,n){var r,o=(r=t==null?void 0:t.header)===null||r===void 0?void 0:r.room_id,a=e.pn.getRoomByRoomID(o||n);a==null||a.streamHandler.patchStreamList(t)}),this.rtm._on("_roomStateUpdate",function(t,n,r,o,a,l){if(n==="CONNECTED"&&e.gn.billingTimer.startChargeInfosUpload(),n=="DISCONNECTED"){e.an.info("zc.rsu "+t+" disconnected "+(r?r+" ":"")+(o||"")),e.gn.billingTimer.stopChargeInfosUpload();var d=e.pn.getRoomByRoomID(t);if(d){var p=e.pn.roomList.findIndex(function(u){return u.roomID==t});d.isResetRoom=!0,d.streamHandler.reset(),d.dataChannelManager&&e.zegoWebRtc.destroyRealTimeSequentialDataManager(d.dataChannelManager),l||e.gn.reset(t,r),e.pn.roomList.splice(p,1)}if(l&&Object.keys(e.streamCenter.playerList).length>0)return;e.gn.disconnectAllSignal()}else e.an.info("zc.rsu "+t+" state: "+n)}),this.rtm._on("_tokenRenewed",function(t,n){e.an.info("zc.tr roomID:"+n),e.an.remoteReport("zc.tr token:"+t);var r=e.pn.getRoomByRoomID(n);r&&(r.token=t)}),this.rtm._on("_stopStream",function(t,n){t.forEach(function(r){e.publishModule.stopPublishingStream(r,n)})}),this.rtm._on("_userTransUpdate",function(t,n,r){var o=e.pn.getRoomByRoomID(t);o?n==="pushstatus"||n==="mixpushstatus"&&o.streamHandler.getMixStreamStatus(r):e.an.error(Ce.KY4+" room no found")}),this.rtm._on("_uaHeartBeatTimeout",function(){var t;e.an.info("zc.ohbto rtc in use: "+e.streamCenter.useingUdp),e.streamCenter.useingUdp||(t=e.rtm.netAgent)===null||t===void 0||t.reconnectUA()}),this.rtm.liveRoomHandler&&(this.rtm.liveRoomHandler.handlePushStreamMsg=function(t){t.body.stream_cmd=t.header.sub_cmd,t.body.stream_info=t.body.stream_info_list,delete t.body.stream_info_list,e.handlePushStreamMsg(t)})},s.prototype.handlePushStreamMsg=function(e){var t,n=((t=e==null?void 0:e.header)===null||t===void 0?void 0:t.room_id)||"",r=this.pn.getRoomByRoomID(n),o=this.rtm.getMsgSpan(j.MJ.event,n);if(!r)return this.cr.setError(o,j.MJ.error.Le),void this.an.error(Ce.kc8+" room no found");var a="";switch(e.body.stream_cmd){case I.EN.added:a="add";break;case I.EN.deleted:a="delete";break;case I.EN.updated:a="update"}var l=e.body.stream_info.map(function(d){return{stream_id:d.stream_id,stream_extra_info:d.extra_info,id_name:d.id_name||d.anchor_id_name}});o.setAttributes({stream_update_type:j.MJ.stream_update_type(a),stream_seq:e.body.stream_seq,stream_list:j.MJ.stream_list(l)}),o.end(),r.streamHandler.handlePushStreamUpdateMsg(e)},s.prototype.bindStreamCenterHandler=function(){var e=this;this.gn.onPlayStateUpdate=function(t,n,r){var o,a=Oi(e.an,n);a.info("zc.opsu.1 ".concat(t));var l=e.gn.playerList[n];l&&(t!=0&&t!=1||(l.retryStreamHandler.streamRetryStartTime=0,l.uploadPlayEvent(r)),[0,Bs.De.code].includes(r==null?void 0:r.code)||(l.latestPlayErrCode=r.code),!l.isProbe&&l.$h&&(t==1&&r&&l.$h.setAttributes({error:r.code,message:r.message}),(t===0||t===2&&r.code!==0)&&l.reportMiniSdpInfos(),t!==0&&((0,he.lA)(l.$h,{url:Ha.url((o=l.signal)===null||o===void 0?void 0:o.server),ip:Ha.ip(l.ip),peer_id:Ha.peer_id(l.peerID),source_type:Ha.source_type(l.playMode),net_protocol:Ha.net_protocol(l.netProtocol),signal_consume:Ha.signal_consume(l.signalTime),tryidx:Ha.tryidx(l.tryidx)}),l.$h=void 0)));var d=Date.now();if(t==0?(l.pulledTimeStamp=d,l.updateCDNValidTime()):t==1&&l&&(l.endPlayingSpan({stop_reason:l.stopReason}),l.stopReason=""),t===1&&e.gn.playErrorCallBackList[n]){a.info("zc.opsu.1 connect changed");var p=r&&(r.code==Bs.De.code?0:r.code);e.gn.playErrorCallBackList[n]({errorCode:p||0,extendedData:p?r.message:""}),delete e.gn.playErrorCallBackList[n],a.info("zc.opsu.1 stop play called by sdk"),e.playModule.stopPlayingStream(n,r)}else{t===0?l.firstPulledTimeStamp==0&&(l.firstPulledTimeStamp=d):l&&l.pulledTimeStamp&&l.updateValidTime(r);var u=(function(x){return x==0||x==1?x==0?"PLAYING":"NO_PLAY":"PLAY_REQUESTING"})(t),v=t===1||(l==null?void 0:l.updateCBState({state:u,code:r.code}));r.code===Bs.De.code&&(r={code:0,message:""}),v&&e.pn.actionListener("playerStateUpdate",{state:u,streamID:n,errorCode:r&&r.code,extendedData:r&&r.message})}},this.gn.onPublishStateUpdate=function(t,n,r){e.onPublishStateUpdateHandle(t,n,r)},this.gn.onPublishQualityUpdate=function(t,n){e.pn.actionListener("publishQualityUpdate",t,n)},this.gn.onPlayQualityUpdate=function(t,n){e.pn.actionListener("playQualityUpdate",t,n)},this.gn.onRemoteCameraStatusUpdate=function(t,n,r){var o=e.cr.createSpan(I.t0.H,{key:Gh,par:t},{key:""},j.We.event);o.setAttributes({stream_id:j.We.stream_id(t),camera_status:j.We.camera_status(n),status_code:j.We.status_code(r)}),o.end(),e.pn.actionListener("remoteCameraStatusUpdate",t,n),e.pn.actionListener("_remoteCameraStatusUpdate",t,r)},this.gn.onRemoteMicStatusUpdate=function(t,n,r){var o=e.cr.createSpan(I.t0.H,{key:Gh,par:t},{key:""},j.ov.event);o.setAttributes({stream_id:j.ov.stream_id(t),mic_status:j.ov.mic_status(n),status_code:j.ov.status_code(r)}),o.end(),e.pn.actionListener("remoteMicStatusUpdate",t,n),e.pn.actionListener("_remoteMicStatusUpdate",t,r)},this.gn.onSoundLevelUpdate=function(t){e.pn.actionListener("soundLevelUpdate",t)},this.gn.onMicSoundLevelUpdate=function(t){e.pn.actionListener("capturedSoundLevelUpdate",t)}},s.prototype.bindStreamHandler=function(e){var t=this;e.onStreamUpdated=function(n,r,o){var a=o.map(function(u){return{streamID:u.streamID,user:u.user,extraInfo:u.extraInfo,urlsFLV:u.urlFlv,urlsRTMP:u.urlRtmp,urlsHLS:u.urlHls,urlsHttpsFLV:u.urlHttpsFlv,urlsHttpsHLS:u.urlHttpsHls}}),l={};if(r===0){var d=o.map(function(u){return{stream_id:u.streamID,code:Ne[u.closeType]&&Ne[u.closeType].code||0,description:Ne[u.closeType]&&Ne[u.closeType].description||"unknown"}});l.stream_delete_reason=d}if(r===0?a=a.filter(function(u){var v,x=!t.pn.publishStreamList[u.streamID];return x&&((v=t.streamCenter.playerList[u.streamID])===null||v===void 0||v.setStreamUpdate(0)),x}):r===1&&a.forEach(function(u){var v;(v=t.streamCenter.playerList[u.streamID])===null||v===void 0||v.setStreamUpdate(1)}),t.updatePreviewerVolumeFactor(n),a.length>0&&t.pn.actionListener("roomStreamUpdate",n,(function(u){return u==0?"DELETE":"ADD"})(r),a,Object.keys(l).length>0?JSON.stringify(l):""),o.length>0&&t.pn.actionListener("_streamUpdated",r,o),r===1){var p=[];a.forEach(function(u){u.extraInfo&&p.push({streamID:u.streamID,user:u.user,extraInfo:u.extraInfo})}),p.length>0&&t.pn.actionListener("streamExtraInfoUpdate",n,p)}},e.onPublishStateUpdate=function(n,r,o,a){var l,d,p,u,v,x,U,te,le;t.an.info("zb.opsu ".concat(n," ").concat(JSON.stringify(o)," ").concat(JSON.stringify(a),"}"),{streamid:r});var se=t.gn.publisherList[r],We=se&&se.publisher;if(We){var Ke=se.publisher.isRePublish?j.fo:j.ch,Ze=j.ch;n!=0&&n!=1||(se.retryStreamHandler.streamRetryStartTime=0,We.uploadPublishEvent(o)),[0,so.ce.code].includes(o==null?void 0:o.code)||(We.latestPublishErrCode=o.code),n===2&&o.code!==0&&We.reportMiniSdpInfos(),n!==0&&t.cr.spanEnd({key:Ke.event,par:r},{error:o.code,message:o.message,url:Ze.url((d=(l=se==null?void 0:se.publisher)===null||l===void 0?void 0:l.signal)===null||d===void 0?void 0:d.server),ip:Ze.ip((p=se==null?void 0:se.publisher)===null||p===void 0?void 0:p.ip),peer_id:Ze.peer_id((u=se==null?void 0:se.publisher)===null||u===void 0?void 0:u.peerID),source_type:Ze.source_type("rtc"),net_protocol:Ze.net_protocol((v=se==null?void 0:se.publisher)===null||v===void 0?void 0:v.netProtocol)})}var et=j.Jv,ht=Date.now();if(We){var gt=We.publishedTimeStamp;n!=0&&gt&&(o&&o.code&&o.code!==so.ce.code&&We.errorTimes++,We.validPublishedTime=ht-gt,We.publishedTimeStamp=0),n==0?(We.firstPublishedTimeStamp==0&&(We.firstPublishedTimeStamp=ht),We.publishedTimeStamp=ht):n==1&&(o.code===1012?(t.gn.stopPublishingStream(r,o),o=Xl(Xl({},o),{code:Ft.pn5.code})):o.code===2002&&(t.gn.stopPublishingStream(r,o),o.code=Ft.HED.code),We.uploadRTCPublishStats(),t.cr.spanEnd({key:et.event,par:r},{tryidx:et.tryidx(We.rtcPublishCount),url:et.url((x=We==null?void 0:We.signal)===null||x===void 0?void 0:x.server),ip:et.ip(We==null?void 0:We.ip),dispatch_external_ip:et.dispatch_external_ip(t.pn.clientIP),room_id:et.room_id((U=se==null?void 0:se.room)===null||U===void 0?void 0:U.roomID),room_sid_string:et.room_sid_string((te=se==null?void 0:se.room)===null||te===void 0?void 0:te.roomSessionID),resource_type:et.resource_type("rtc"),protocol:et.protocol("webrtc"),net_protocol:et.net_protocol(We.netProtocol),stop_reason:et.stop_reason(We.stopReason),error:o.code,message:o.message}),se&&(We.stopReason=""))}o.code===so.ce.code&&(o={code:0,message:""});var Et=(function(At){return At==0||At==1?At==0?"PUBLISHING":"NO_PUBLISH":"PUBLISH_REQUESTING"})(n);(n===1||!((le=se==null?void 0:se.publisher)===null||le===void 0)&&le.updateCBState({state:Et,code:o.code}))&&t.pn.actionListener("publisherStateUpdate",{state:Et,streamID:r,errorCode:o.code,extendedData:a||o.message})},e.onStreamExtraInfoUpdated=function(n,r){var o=r.map(function(a){return{streamID:a.streamID,user:a.user,extraInfo:a.extraInfo}});t.pn.actionListener("streamExtraInfoUpdate",n,o)},e.onStreamAttrUpdated=function(n,r){t.playModule&&t.playModule.setPlayerListForbid(r)}},s.prototype.updatePreviewerVolumeFactor=function(e){var t=this;if(this.gn.useCopyMusic&&!isNaN(this.pn.engineConfig.choirRole)){this.an.info("zc.rtc.upvf "+e);var n=[];if(e){var r=this.pn.getRoomByRoomID(e);r&&n.push(r)}else n.push.apply(n,this.pn.roomList);n.forEach(function(o){var a=Array.from(new Set(o.streamList.map(function(l){return l.id_name})));t.gn.previewStreamList.forEach(function(l){l&&!l.onlyPreview&&l.setVolumeFactorByUserCount(a.length)})})}},s.prototype.screenStreamFrom=function(e,t,n){var r=this,o={};o.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e}},o.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxWidth:window.screen.width,maxHeight:window.screen.height}},!t&&(o.audio=!1),navigator.mediaDevices.getUserMedia(o).then(function(a){a.getTracks().forEach(function(l){return wn(l,r.an,"zc.st.ssf")}),n(!0,a)}).catch(function(a){n(!1,null,a)})},s.prototype.onPublishStateUpdateHandle=function(e,t,n){var r=this,o=Oi(this.an,t);o.info("zc.opsuh.0 call");var a=this.gn.publisherList[t],l=a.room;if(l)if(e==0){var d=this.pn.publishStreamList[t];if(d){var p=!l.streamList.find(function(u){return u.stream_id==t&&(u.anchor_id_name==r.pn.idName||u.id_name==r.pn.idName||u.user_id===r.pn.idName)});o.info("zc.opsuh.0 room stream "+p),[I.T_.tryPublish,I.T_.retryPublish].includes(d.state)&&p?(d.state=I.T_.update_info,l.streamHandler.updateStreamInfo(t,I.NP.liveBegin,d.extra_info,function(u){},void 0,a.publisher.getStreamAddOptions())):(o.info("zc.opsuh.0 stream update"),d.state=I.T_.publishing,this.WebrtcOnPublishStateUpdateHandle(e,t,n))}}else l.streamHandler.onPublishStateUpdate(e,t,n),e==1&&(o.info("zc.opsuh.0 stop publish called by sdk"),this.publishModule.stopPublishingStream(t,n));else o.error("zc.opsuh.0 "+he.fT)},s.prototype.WebrtcOnPublishStateUpdateHandle=function(e,t,n){if(this.pn.publishStreamList[t].state==I.T_.publishing){var r=this.gn.getRoomByStreamID(t);r&&r.streamHandler.onPublishStateUpdate(e,t,n)}},s.prototype.bindListener=function(e,t){return this.pn.addListener(e,t)},s.prototype.deleteListener=function(e,t){return this.pn.deleteListener(e,t)},s.prototype.checkBackgroundCapacity=function(){if(this.pn.netAppConfig){var e=this.pn.netAppConfig.media_config.publish_config.object_segmentation_platform;return!!e&&!!Pn(e,0)}return!0},s})(),Qh=(function(){function s(e,t){t===void 0&&(t=!1),this.view=e,this.isH265=t,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=e.byteLength}return s.prototype.FindStartCode=function(){var e=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;e>=3;){if(this.view.getUint8(this.offset)==0&&this.view.getUint8(this.offset+1)==0&&this.view.getUint8(this.offset+2)==1)return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&this.view.getUint8(this.offset-1)==0&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--e,++this.offset}return!1},s.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},s.prototype.NextNalu=function(e){if(this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,this.offset>=this.view.byteLength||!this.FindStartCode())return!1;if(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,e){if(this.isH265){if((126&this.view.getUint8(this.nalu_start+this.start_code_size))>>1!==39)return!0}else if((31&this.view.getUint8(this.nalu_start+this.start_code_size))!=6)return!0}return this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0)},s})();function Co(s,e,t){if(s===0)return"";var n=1,r="  Here are some explanations about the error code: ".concat(n++,". reason=").concat(s,": ").concat((function(o){switch(o){case yc.PEER_CLOSE_REASON_NORMAL:return"Client voluntarily exits.";case yc.PEER_CLOSE_REASON_STATE_ERROR:return"Status error; Reason: Repeatedly received offer/answer, etc.";case yc.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:return"Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";case yc.PEER_CLOSE_REASON_VRS_PLAY_DENIED:return"Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";case yc.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:return"No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";case yc.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:return"No matching video codec; Reason: Client (Web) does not support h264, h265 and vp8 etc.";case yc.PEER_CLOSE_REASON_SDP_INVALID:return"SDP parsing error; Reason: SDP format error.";default:return"unknown"}})(s));return e&&(r+=" ".concat(n++,". action=").concat(e,": ").concat((function(o){switch(o){case vu.DENIED_ACTION_STOP:return"cancel pushing stream.";case vu.DENIED_ACTION_RETRY_NEXT_IP:return"Try the next ip, if there is no next ip, re-request the route.";case vu.DENIED_ACTION_REDIRECT:return"Redirect to the ip address specified by data.";case vu.DENIED_ACTION_REDISPATCH:return"re-request route.";case vu.DENIED_ACTION_RETRY:return"retry current gateway node.";default:return"unknown"}})(e))),t&&(r+=" ".concat(n++,". err=").concat(t,": ").concat((function(o){switch(o){case jr.DENIED_ERROR_DISPATCH_FAILED:return"media scheduling failed.";case jr.DENIED_ERROR_EMPTY_PUBLISH_IPS:return"empty publish ips error.";case jr.DENIED_ERROR_EMPTY_PLAY_IPS:return"empty play ips error.";case jr.DENIED_ERROR_STREAM_NOT_EXSIT:return"stream does not exist.";case jr.DENIED_ERROR_APP_NOT_ONLINE:return"APP has been removed.";case jr.DENIED_ERROR_INVALID_PARAMETERS:return"invalid parameter.";case jr.DENIED_ERROR_NO_CLIENTIP_SET:return"client ip is not set.";case jr.DENIED_ERROR_PERMISSION_DENIED:return"No permission, access denied.";case jr.DENIED_ERROR_SET_STREAM_INFO_FAILED:return"Failed to set stream information.";case jr.DENIED_ERROR_INTERNAL_ERROR:return"internal error / server busy.";case jr.DENIED_ERROR_PUBLISH_FORBIDDEN:return"Streaming is banned.";case jr.DENIED_ERROR_NEW_PUBLISH:return"new publish error.";case jr.DENIED_ERROR_INNER_ERROR:return"inner error.";case jr.DENIED_ERROR_MANAGER_STOP:return"manager stop error.";case jr.DENIED_ERROR_PUBLISH_AUTH_FAILED:return"Stream push authentication failed.";case jr.DENIED_ERROR_PLAY_AUTH_FAILED:return"Stream pull authentication failed.";case jr.DENIED_ERROR_SERVER_STOP:return"server stoped error.";case jr.DENIED_ERROR_SESSION_ID:return"session id error.";case jr.DENIED_ERROR_MANAGER_TIMEOUT:return"manager timeout.";case jr.DENIED_ERROR_NEW_PUBLISH_SRC:return"new publish src.";case jr.DENIED_ERROR_PLAY_SESSION_LIMIT:return"Pull session limit.";case jr.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:return"disable ip port flexible.";case jr.DENIED_ERROR_PACKET_ILLEGAL_TS:return"packet illegal ts.";case jr.DENIED_ERROR_PACKET_ILLEGAL_ADDR:return"packet illegal address.";case jr.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:return"packet illegal format.";case jr.DENIED_ERROR_CHECK_ADDR_TIMEOUT:return"Check address timed out.";case jr.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:return"Check Address Illegal Signature.";case jr.DENIED_ERROR_CHECK_ADDR_INCONSTANT:return"Check for address changes.";case jr.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:return"SDP negotiation timed out, check whether the SDP is sent successfully.";case jr.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:return"Address negotiation timed out, check whether the Candidate is sent successfully.";case jr.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:return"The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";case jr.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:return"The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";case jr.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:return"The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";case jr.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:return"Streaming encryption failed";case jr.DENIED_ERROR_WEBRTC_HB_TIMEOUT:return"The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";case jr.DENIED_ERROR_WEBRTC_CONNECTION_LOST:return"The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";case jr.DENIED_ERROR_WEBRTC_NEW_SRC:return"After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";case jr.DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH:return"The client does not support the codec used by the stream source";case jr.DENIED_ERROR_WEBRTC_CODEC_SWITCH:return"The streaming source switched the encoding format while clients were still pulling the stream";default:return"unknown"}})(t))),r}(function(s){s[s.PEER_CLOSE_REASON_NORMAL=0]="PEER_CLOSE_REASON_NORMAL",s[s.PEER_CLOSE_REASON_STATE_ERROR=5]="PEER_CLOSE_REASON_STATE_ERROR",s[s.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED=15]="PEER_CLOSE_REASON_VRS_PUBLISH_DENIED",s[s.PEER_CLOSE_REASON_VRS_PLAY_DENIED=18]="PEER_CLOSE_REASON_VRS_PLAY_DENIED",s[s.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH=21]="PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH",s[s.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH=22]="PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH",s[s.PEER_CLOSE_REASON_SDP_INVALID=23]="PEER_CLOSE_REASON_SDP_INVALID"})(yc||(yc={})),(function(s){s[s.DENIED_ACTION_STOP=1]="DENIED_ACTION_STOP",s[s.DENIED_ACTION_RETRY_NEXT_IP=2]="DENIED_ACTION_RETRY_NEXT_IP",s[s.DENIED_ACTION_REDIRECT=3]="DENIED_ACTION_REDIRECT",s[s.DENIED_ACTION_REDISPATCH=4]="DENIED_ACTION_REDISPATCH",s[s.DENIED_ACTION_RETRY=5]="DENIED_ACTION_RETRY"})(vu||(vu={})),(function(s){s[s.DENIED_ERROR_DISPATCH_FAILED=1001]="DENIED_ERROR_DISPATCH_FAILED",s[s.DENIED_ERROR_EMPTY_PUBLISH_IPS=1002]="DENIED_ERROR_EMPTY_PUBLISH_IPS",s[s.DENIED_ERROR_EMPTY_PLAY_IPS=1003]="DENIED_ERROR_EMPTY_PLAY_IPS",s[s.DENIED_ERROR_STREAM_NOT_EXSIT=1004]="DENIED_ERROR_STREAM_NOT_EXSIT",s[s.DENIED_ERROR_APP_NOT_ONLINE=1005]="DENIED_ERROR_APP_NOT_ONLINE",s[s.DENIED_ERROR_INVALID_PARAMETERS=1006]="DENIED_ERROR_INVALID_PARAMETERS",s[s.DENIED_ERROR_NO_CLIENTIP_SET=1007]="DENIED_ERROR_NO_CLIENTIP_SET",s[s.DENIED_ERROR_PERMISSION_DENIED=1008]="DENIED_ERROR_PERMISSION_DENIED",s[s.DENIED_ERROR_SET_STREAM_INFO_FAILED=1009]="DENIED_ERROR_SET_STREAM_INFO_FAILED",s[s.DENIED_ERROR_INTERNAL_ERROR=1010]="DENIED_ERROR_INTERNAL_ERROR",s[s.DENIED_ERROR_PUBLISH_FORBIDDEN=1011]="DENIED_ERROR_PUBLISH_FORBIDDEN",s[s.DENIED_ERROR_NEW_PUBLISH=1012]="DENIED_ERROR_NEW_PUBLISH",s[s.DENIED_ERROR_INNER_ERROR=1013]="DENIED_ERROR_INNER_ERROR",s[s.DENIED_ERROR_MANAGER_STOP=1014]="DENIED_ERROR_MANAGER_STOP",s[s.DENIED_ERROR_PUBLISH_AUTH_FAILED=1015]="DENIED_ERROR_PUBLISH_AUTH_FAILED",s[s.DENIED_ERROR_PLAY_AUTH_FAILED=1016]="DENIED_ERROR_PLAY_AUTH_FAILED",s[s.DENIED_ERROR_SERVER_STOP=2001]="DENIED_ERROR_SERVER_STOP",s[s.DENIED_ERROR_SESSION_ID=2002]="DENIED_ERROR_SESSION_ID",s[s.DENIED_ERROR_MANAGER_TIMEOUT=2003]="DENIED_ERROR_MANAGER_TIMEOUT",s[s.DENIED_ERROR_NEW_PUBLISH_SRC=2004]="DENIED_ERROR_NEW_PUBLISH_SRC",s[s.DENIED_ERROR_PLAY_SESSION_LIMIT=2005]="DENIED_ERROR_PLAY_SESSION_LIMIT",s[s.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE=2006]="DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE",s[s.DENIED_ERROR_PACKET_ILLEGAL_TS=2007]="DENIED_ERROR_PACKET_ILLEGAL_TS",s[s.DENIED_ERROR_PACKET_ILLEGAL_ADDR=2008]="DENIED_ERROR_PACKET_ILLEGAL_ADDR",s[s.DENIED_ERROR_PACKET_ILLEGAL_FORMAT=2009]="DENIED_ERROR_PACKET_ILLEGAL_FORMAT",s[s.DENIED_ERROR_CHECK_ADDR_TIMEOUT=2010]="DENIED_ERROR_CHECK_ADDR_TIMEOUT",s[s.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE=2011]="DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE",s[s.DENIED_ERROR_CHECK_ADDR_INCONSTANT=2012]="DENIED_ERROR_CHECK_ADDR_INCONSTANT",s[s.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT=3e3]="DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT",s[s.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT=3001]="DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT",s[s.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED=3002]="DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED",s[s.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED=3003]="DENIED_ERROR_WEBRTC_DTLS_HS_FAILED",s[s.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT=3004]="DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT",s[s.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED=3005]="DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED",s[s.DENIED_ERROR_WEBRTC_HB_TIMEOUT=3006]="DENIED_ERROR_WEBRTC_HB_TIMEOUT",s[s.DENIED_ERROR_WEBRTC_CONNECTION_LOST=3007]="DENIED_ERROR_WEBRTC_CONNECTION_LOST",s[s.DENIED_ERROR_WEBRTC_NEW_SRC=3008]="DENIED_ERROR_WEBRTC_NEW_SRC",s[s.DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH=3009]="DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH",s[s.DENIED_ERROR_WEBRTC_CODEC_SWITCH=3010]="DENIED_ERROR_WEBRTC_CODEC_SWITCH"})(jr||(jr={}));var bu,Fd={FPS:{code:oe.captureFpsToLow,message:"The video capture frame rate is too low."},VOLUME:{code:oe.captureVolumeToLow,message:"The capture volume is too low."}},$l={V_BITRATE:{code:oe.sendVideoBitrateToLow,message:"The video bit rate sent is too low."},FPS:{code:oe.sendFpsToLow,message:"The video frame rate sent is too low."},A_BITRATE:{code:oe.sendAudioBitrateToLow,message:"The audio bit rate sent is too low."}},Ci={A_VOLUME:{code:oe.receiveVolumeToLow,message:"The volume of audio received is too low."},A_DECODE:{code:oe.receiveAudioDecodedFail,message:"The received audio failed to be decoded."},V_DECODE:{code:oe.receiveVideoDecodedFail,message:"The received video failed to be decoded."},V_DECODED_FPS:{code:oe.receiveVideoFpsDecodedToLow,message:"Received video decode frame rate is too low."},RENDER_VIDEO_FPS:{code:oe.renderVideoFpsToLow,message:"The rendered video frame rate is too low."}},as={FPS:{code:oe.captureFpsNormal,message:"The video capture frame rate is normal."},VOLUME:{code:oe.captureVolumeNormal,message:"The capture volume is normal."}},ca={V_BITRATE:{code:oe.sendVideoBitrateNormal,message:"The video bit rate sent is normal."},FPS:{code:oe.sendFpsNormal,message:"The video frame rate sent is normal."},A_BITRATE:{code:oe.sendAudioBitrateNormal,message:"The audio bit rate sent is normal."}},vl={A_VOLUME:{code:oe.receiveVolumeNormal,message:"The volume of audio received is normal."},A_DECODE:{code:oe.receiveAudioDecodedNormal,message:"The received audio successed to be decoded."},V_DECODE:{code:oe.receiveVideoDecodedNormal,message:"The received video successed to be decoded."},V_DECODED_FPS:{code:oe.receiveVideoFpsDecodedNormal,message:"Received video decode frame rate is normal."},RENDER_VIDEO_FPS:{code:oe.renderVideoFpsNormal,message:"The rendered video frame rate is normal."}},Wh=(function(){function s(e,t,n,r){this.pn=e,this.parentEvent=r,this.results={},this.preTime=Date.now(),this.preTotalFps=0,this.preIsNormal={},this.an=t,this.streamId=n,this.initPreIsNormal(Fd),this.initPreIsNormal($l),this.initPreIsNormal(Ci)}return s.prototype.initPreIsNormal=function(e){for(var t in e)this.preIsNormal[e[t].code]=!0},s.prototype.recordData=function(e,t,n){var r=e.code,o=this.results[r]||[];if(o.push(n),o.length>=5){var a=o.includes(!1);this.preIsNormal[r]&&!a&&(this.uploadEventData(e),this.pn.actionListener("exceptionUpdate",this.streamId,e)),!this.preIsNormal[r]&&a&&(this.uploadEventData(t),this.pn.actionListener("exceptionUpdate",this.streamId,t)),this.preIsNormal[r]=a,o=[]}this.results[r]=o},s.prototype.uploadEventData=function(e){var t=this.pn.reporter.createSpan(Z.t0.I,{key:this.parentEvent,par:this.streamId},{key:""},j.bs.event);t.setAttributes({code:j.bs.code(e.code),message:j.bs.message(e.message)}),t.end()},s.prototype.checkRemoteStats=function(e,t){this.recordData(Ci.A_VOLUME,vl.A_VOLUME,this.recvAudioVolume(e)),this.recordData(Ci.A_DECODE,vl.A_DECODE,this.recvAudioDecode(e)),this.recordData(Ci.V_DECODE,vl.V_DECODE,this.recvVideoDecode(e)),this.recordData(Ci.V_DECODED_FPS,vl.V_DECODED_FPS,this.recvVideoDecodedFrameRate(e)),this.recordData(Ci.RENDER_VIDEO_FPS,vl.RENDER_VIDEO_FPS,this.renderVideoFrameRate(e,t))},s.prototype.checkLocalStats=function(e){this.recordData(Fd.FPS,as.FPS,this.captureVideoFrameRate(e)),this.recordData($l.FPS,ca.FPS,this.sendVideoFrameRate(e)),this.recordData(Fd.VOLUME,as.VOLUME,this.sendAudioVolume(e)),this.recordData($l.V_BITRATE,ca.V_BITRATE,this.sendVideoBitrate(e)),this.recordData($l.A_BITRATE,ca.A_BITRATE,this.sendAudioBitrate(e))},s.prototype.sendVideoBitrate=function(e){return!(e.videoMuteState==="1"||e.videoQuality>2)&&e.videoBitrate===0},s.prototype.sendVideoFrameRate=function(e){var t=e.videoTransferFPS,n=e.videoFPS;return e.videoMuteState!=="1"&&(n>=10&&t<5||n<10&&n>=5&&t<=1)},s.prototype.captureVideoFrameRate=function(e){var t=e.videoTargetFPS,n=e.videoFPS;return e.videoMuteState!=="1"&&(t>=10&&n<5||t<10&&t>=5&&n<=1)},s.prototype.sendAudioVolume=function(e){return e.audioMuteState!=="1"&&Math.floor(32767*e.audioLevel)<Math.floor(327.67)},s.prototype.sendAudioBitrate=function(e){var t=e.audioBitrate;return!(e.audioMuteState==="1"||e.audioQuality>2)&&(t===0||e.audioTargetBitrate>=48&&t<22)},s.prototype.recvAudioVolume=function(e){return!(e.audioMuteState==="1"||e.audioQuality>2)&&e.audioBitrate>0&&Math.floor(32767*e.audioLevel)<Math.floor(327.67)},s.prototype.recvAudioDecode=function(e){return!(e.audioMuteState==="1"||e.audioQuality>2)&&e.audioBitrate>0&&e.audioFPS===0},s.prototype.recvVideoDecode=function(e){return!(e.videoMuteState==="1"||e.videoQuality>2)&&e.videoBitrate>0&&e.videoTransferFPS===0},s.prototype.recvVideoDecodedFrameRate=function(e){var t=e.videoFPS,n=e.videoTransferFPS;return e.videoMuteState!=="1"&&(t>=10&&n<5||t<10&&t>=5&&n<=1)},s.prototype.renderVideoFrameRate=function(e,t){var n=e.videoTransferFPS,r=e.videoRenderFPS;return e.videoMuteState!=="1"&&r!=-1&&(n>10&&r<5||n<=10&&n>=5&&r<=1)},s})(),_u=function(){return _u=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},_u.apply(this,arguments)},up=(function(){function s(e,t,n,r,o,a,l){this.tf=e,this.if=t,this.nf=n,this.Xu=o,this.pn=a,this.gn=l,this.ef=null,this.rf=1e3,this.sf=null,this.uf=null,this.af=0,this.eo=0,this.cf={},this.hf=0,this.ff=0,this.probeState=Pe.probed,this.publishStat={},this.Wh={video:{videoBitrate:0,videoFPS:0,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,videoPacketsLost:0,videoPacketsLostRate:0,googCodecName:""},audio:{audioBitrate:0,audioCodec:"",muteState:"1",audioQuality:-1,audioFPS:0,audioPacketsLost:0,audioPacketsLostRate:0,googCodecName:""}},this.lf=0,this.df="udp",this.vf={},this.mf="",this.pf="",this.bf=0,this._f=0,this.yf=void 0,this.connectIPStack=-1,this.wf=new Wh(this.pn,r,this.streamId,j.Og.event)}return Object.defineProperty(s.prototype,"streamId",{get:function(){return this.nf.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sessionId",{get:function(){return this.nf.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"peerID",{get:function(){return this.nf.peerID},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"xu",{get:function(){return this.nf.localStream},enumerable:!1,configurable:!0}),s.prototype.setPublishQualityTimer=function(){var e=this;this.ef==null&&(this.nf.info(Ce.Ifp+" called ".concat(this.rf," ").concat(this.tf," ").concat(this.if)),(this.ef||this.sf||this.uf)&&this.clearPublishQualityTimer(),this.ef=setInterval(function(){e.Sf()},this.rf),this.af=this.eo=Date.now(),this.rf!==1e3&&(this.tf!=this.rf&&(this.sf=setInterval(function(){e.notifyPublishQuality()},this.tf)),this.if!=this.rf&&(this.uf=setInterval(function(){e.reportPublishQuality()},this.if))),this.cf={audioPacketsLost:0,videoPacketsLost:0,videoPacketsSent:0,audioPacketsSent:0,audioRetransmittedPacketsSent:0,audioRetransmittedBytesSent:0,videoTime:Date.now(),audioTime:Date.now(),time:Date.now(),audioBytesSent:0,videoBytesSent:0,framesEncoded:0,framesSent:0,videoRetransmittedPacketsSent:0,videoRetransmittedBytesSent:0,videoActualBytesSent:0,qpSum:0})},s.prototype.clearPublishQualityTimer=function(){this.nf.info("zc.p.0.spqt.1 called ".concat(!!this.ef," ").concat(!!this.sf," ").concat(!!this.uf)),this.ef!=null&&(clearInterval(this.ef),this.ef=null),this.sf!=null&&(clearInterval(this.sf),this.sf=null),this.uf!=null&&(clearInterval(this.uf),this.uf=null),this.cf={},this.ff=0,this.lf=0},s.prototype.Ef=function(){var e=this,t=[],n=!1;if(!this.nf.peerConnection)return{result:t,hasVideo:n};var r=[],o=this.nf,a=o.videoSender,l=o.audioSender;return a&&r.push(a),l&&r.push(l),r.forEach(function(d){d.track&&(d.track.kind==="video"&&(n=!0),e.nf.peerConnection&&t.push(e.nf.peerConnection.getStats(d.track)))}),{result:t,hasVideo:n}},s.prototype.Sf=function(){var e=this;if(this.nf.peerConnection){var t=this.Ef(),n=t.hasVideo;Promise.all(t.result).then(function(r){r.length!==0&&e.ef&&e.If(r.filter(function(o){return o instanceof RTCStatsReport}),r[r.length-1]instanceof RTCStatsReport?null:r[r.length-1],n)}).catch(function(r){e.nf.info(Ce.Ifp+" getStats error "+r.toString())})}},s.prototype.If=function(e,t,n){var r,o,a,l=this;if(e){var d,p,u=this.gn.checkPreview(this.xu),v=u&&u.rtcViewer;v&&(d=v.ma,p=v.pa),d&&d.currentTime||(d=Xi(this.xu,"video")||d),p&&p.currentTime||(p=Xi(this.xu,"audio")||p||d);var x=[],U="",te={scenario:this.pn.scenario,sampleTimeWindow:this.if,audioCodec:"",audioTargetBitrate:this.nf.videoInfo.audioBitrate/1e3||0,audioBitrate:0,audioRtxBitrate:0,videoTargetBitrate:this.nf.videoInfo.bitRate||0,videoTargetFPS:this.nf.videoInfo.frameRate||0,videoBitrate:0,audioFPS:0,audioLevel:0,audioPacketsLost:0,totalAudioEnergy:0,totalSamplesDuration:0,echoReturnLossEnhancement:void 0,audioPacketsLostRate:0,videoFPS:0,nackCount:0,pliCount:0,audioQuality:0,videoQuality:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoPacketsLost:0,videoPacketsLostRate:0,totalRoundTripTime:0,currentRoundTripTime:0,availableOutgoingBitrate:void 0,inputWidth:void 0,inputHeight:void 0,inputFPS:void 0,qualityLimitationReason:"",targetBitrate:void 0,retransmitBitrate:void 0,actualEncBitrate:void 0,frameQp:void 0,videoCodecName:void 0,videoMuteState:!((r=u==null?void 0:u.videoTrack)===null||r===void 0)&&r.enabled?"0":"1",audioMuteState:this.xu.getAudioTracks().length>0&&this.xu.getAudioTracks()[0].enabled?"0":"1",soundLevel:u==null?void 0:u.soundLevel,muted:p?p.muted:void 0,audioPaused:p?p.paused:void 0,videoPaused:d?d.paused:void 0,volume:p?p.volume:void 0,sinkId:p?p.sinkId:void 0};this.nf.ip&&(Wo(this.nf.ip)?te.ipv6=this.nf.ip:te.ipv4=uo(this.nf.ip));var le=this.cf.time,se=0,We=0,Ke=0,Ze=0,et=0,ht=0;if(e.forEach(function(yn){var bn=!1;yn.forEach(function(i){i.type=="track"&&(bn=!0)}),yn.forEach(function(i){var c=i.kind||i.mediaType;if((i.type=="outbound-rtp"||i.type=="ssrc"&&i.bytesSent!=null)&&c=="audio"){var h="";(y=yn.get(i.codecId))&&y.mimeType&&(h=y.mimeType.split("/")[1]),l.pf!==h&&(l.pf=h),te.audioCodec=l.pf,le!=0&&(te.audioBitrate=8*(i.bytesSent-l.cf.audioBytesSent)/(i.timestamp-le),i.retransmittedPacketsSent=i.retransmittedPacketsSent||0,i.packetsSent=i.packetsSent||0,te.audioFPS=(i.packetsSent-(i.retransmittedPacketsSent-l.cf.audioRetransmittedPacketsSent)-l.cf.audioPacketsSent)/(i.timestamp-le)*1e3||0,Ke=(i.retransmittedPacketsSent-l.cf.audioRetransmittedPacketsSent)/(i.packetsSent-l.cf.audioPacketsSent)),te.audioBitrate<0&&(te.audioBitrate=0),i.retransmittedBytesSent!==void 0&&(le!=0&&(te.audioRtxBitrate=8*(i.retransmittedBytesSent-l.cf.audioRetransmittedBytesSent)/(z=i.timestamp-le)),l.cf.audioRetransmittedBytesSent=i.retransmittedBytesSent),l.cf.audioBytesSent=i.bytesSent,l.cf.time=i.timestamp,l.cf.audioPacketsSentTimeStamp=i.packetsSent-l.cf.audioPacketsSent,l.cf.audioPacketsSent=i.packetsSent,l.cf.audioRetransmittedPacketsSent=i.retransmittedPacketsSent}else if((i.type=="outbound-rtp"||i.type=="ssrc"&&i.bytesSent!=null)&&c=="video"){var y,A="";(y=yn.get(i.codecId))&&y.mimeType&&(A=y.mimeType.split("/")[1]),l.mf!==A&&(l.mf=A),te.videoCodecName=l.mf,te.isHardwareEncode=(function(Qt){if(Qt){var Xt=Qt==null?void 0:Qt.toLocaleLowerCase();if(Xt!=="unknown")return Xt!=="openh264"&&Xt!=="libvpx"}})(i.encoderImplementation),te.codecImplementationName=i.encoderImplementation;var z,Me=0;i.retransmittedBytesSent!==void 0&&(Me=i.bytesSent-i.retransmittedBytesSent),le!=0&&(te.videoBitrate=8*(i.bytesSent-l.cf.videoBytesSent)/(z=i.timestamp-le),te.videoFPS=1e3*(i.framesEncoded-l.cf.framesEncoded)/z,Ze=(i.retransmittedPacketsSent-l.cf.videoRetransmittedPacketsSent)/(i.packetsSent-l.cf.videoPacketsSent),i.retransmittedBytesSent!==void 0&&(te.retransmitBitrate=8*(i.retransmittedBytesSent-l.cf.videoRetransmittedBytesSent)/z,te.actualEncBitrate=8*(Me-l.cf.videoActualBytesSent)/z),i.qpSum!==void 0&&(te.frameQp=(i.qpSum-l.cf.qpSum)/(i.framesEncoded-l.cf.framesEncoded))),te.videoBitrate<0&&(te.videoBitrate=0),te.videoFPS<0&&(te.videoFPS=0),te.nackCount=i.nackCount,te.pliCount=i.pliCount,te.qualityLimitationReason=i.qualityLimitationReason,te.targetBitrate=i.targetBitrate,l.cf.videoBytesSent=i.bytesSent,l.cf.framesEncoded=i.framesEncoded,l.cf.time=i.timestamp,l.cf.videoPacketsSentTimeStamp=i.packetsSent-l.cf.videoPacketsSent,l.cf.videoPacketsSent=i.packetsSent,l.cf.videoRetransmittedPacketsSent=i.retransmittedPacketsSent,l.cf.videoRetransmittedBytesSent=i.retransmittedBytesSent,l.cf.videoActualBytesSent=Me,l.cf.qpSum=i.qpSum,bn||l.Rf(le,te,i)}else if(i.type=="remote-inbound-rtp"&&c=="video"){i.packetsLost>0&&(te.videoPacketsLost=i.packetsLost);var pt=i.packetsLost-l.cf.videoPacketsLost;te.videoPacketsLostRate=pt>0?pt/l.cf.videoPacketsSentTimeStamp:0,i.packetsLost>0&&(l.cf.videoPacketsLost=i.packetsLost),l.cf.videoTime=i.timestamp,We=1e3*i.roundTripTime,ht=i.jitter}else if(i.type=="remote-inbound-rtp"&&c=="audio"){i.packetsLost>0&&(te.audioPacketsLost=i.packetsLost);var kt=i.packetsLost-l.cf.audioPacketsLost;te.audioPacketsLostRate=kt>0?kt/l.cf.audioPacketsSentTimeStamp:0,i.packetsLost>0&&(l.cf.audioPacketsLost=i.packetsLost),l.cf.audioTime=i.timestamp,se=1e3*i.roundTripTime,et=i.jitter}else if(i.type=="media-source"&&(c=="audio"||i.id.toLowerCase().indexOf("audio")>=0))te.audioLevel=i.audioLevel||0,te.totalAudioEnergy=i.totalAudioEnergy,te.totalSamplesDuration=i.totalSamplesDuration,te.echoReturnLossEnhancement=i.echoReturnLossEnhancement;else if(i.type=="media-source"&&(c=="video"||i.id.toLowerCase().indexOf("video")>=0))te.inputWidth=i.width,te.inputHeight=i.height,te.inputFPS=i.framesPerSecond;else if(i.type=="track"&&(c=="video"||i.id.indexOf("video")>=0||i.frameWidth))l.Rf(le,te,i);else if(i.type!="candidate-pair"||!i.nominated||(0,or.gm)()&&!i.selected)i.type==="local-candidate"&&x.push(i);else{i.totalRoundTripTime!=null&&(te.totalRoundTripTime=i.totalRoundTripTime),i.currentRoundTripTime!=null&&(te.currentRoundTripTime=i.currentRoundTripTime),i.availableOutgoingBitrate!==void 0&&(te.availableOutgoingBitrate=i.availableOutgoingBitrate),i.state==="succeeded"&&(U=i.localCandidateId);var zt=l.gn.lastChangeIpTime;if(zt&&l._f<zt&&Date.now()-zt<=15e3){var tn=i.bytesReceived,on=l.cf.condidateBytesReceived;on&&(tn>on?l.bf=0:l.bf++),l.bf>=5&&(l.bf=0,l._f=zt,l.onPublishingError(Ft.kOd)),l.cf.condidateBytesReceived=tn}else l.bf>0&&(l.bf=0)}})}),U){var gt=x.find(function(yn){return yn.id==U});if(gt){var Et=void 0;if(gt.relayProtocol!==void 0)Et=gt.relayProtocol;else if(gt.protocol)Et=gt.protocol;else if(gt.priority){var At=gt.priority>>24;At!==void 0&&(Et=Jo(At,this.pn.browser))}Et!==void 0&&this.df!==Et&&(this.nf.info(Ce.Ifp+" protocol "+Et),this.df=Et);var Ot=!1,Bt=gt.candidateType,Kt=gt.networkType,Ht=gt.relayProtocol,Zt=gt.relatedAddress,un=gt.url,hn=gt.ip;if(hn){var pn=Si(hn);pn>=0&&pn!==this.connectIPStack&&(this.nf.info(Ce.Jli+" "+this.streamId+" ipStack "+ae[pn]),this.connectIPStack=pn,this.onConnectIPUpdate(hn))}Ot=this.Tf([{key:"candidateType",value:Bt},{key:"networkType",value:Kt}]),Bt==="relay"&&(Ot=this.Tf([{key:"relayProtocol",value:Ht},{key:"relatedAddress",value:Zt},{key:"url",value:un}])),Ot&&this.nf.info(Ce.Jli+" upload candidate change "+JSON.stringify(this.vf))}}if(this.pn.browser==="chrome"){var Bn=(o=(0,or.$t)())===null||o===void 0?void 0:o.match(/Chrome\/(\d+)/);parseInt(Bn&&Bn[1]||"100")<=91&&te.isHardwareEncode&&this.nf.handleEncBitrate(Number.parseInt(te.targetBitrate),Number.parseInt(te.actualEncBitrate),Number.parseInt(te.retransmitBitrate))}We=isNaN(We)||We<0?0:We,Ze=isNaN(Ze)||Ze<0?0:Ze,ht=isNaN(ht)||ht<0?0:ht,se=isNaN(se)||se<0?0:se,Ke=isNaN(Ke)||Ke<0?0:Ke,et=isNaN(et)||et<0?0:et;var mn=st(We,Ze,ht),vn=st(se,Ke,et);if(te.videoQuality=le>0?Dt(mn):0,te.audioQuality=le>0?Dt(vn):0,this.pn.networkState!==I.D2.offline&&((a=this.nf.peerConnection)===null||a===void 0?void 0:a.connectionState)!=="disconnected"||(te.videoQuality=I.b3.Die,te.audioQuality=I.b3.Die),n&&(!te.frameHeight||!te.frameWidth)){var cn=this.xu.getVideoTracks()[0];cn&&(te.frameHeight=cn.getSettings().height||0,te.frameWidth=cn.getSettings().width||0)}var nn=Math.min(mn,vn);this.hf=nn,this.Cf(te),this.publishStat=te,this.nf.onStatsUpdated(this.publishStat);var gn=Date.now();this.rf===this.tf?this.notifyPublishQuality():this.sf||gn-this.af+50>=this.tf&&this.notifyPublishQuality(),this.if===this.rf?this.reportPublishQuality():this.uf||gn-this.eo+50>=this.if&&this.reportPublishQuality()}},s.prototype.onConnectIPUpdate=function(e){},s.prototype.notifyPublishQuality=function(){this.af=Date.now(),this.nf.onPublishQualityUpdate(this.streamId,this.Wh)},s.prototype.reportPublishQuality=function(){var e=Date.now();this.eo=e,this.checkProbe(),this.Af(this.publishStat),this.wf.checkLocalStats(this.publishStat),this.gn.changeTxQuality(Dt(this.hf)),this.nf.sendNetQualityGrade(this.gn.rxQuality,this.gn.txQuality)},s.prototype.checkProbe=function(){var e=this.hf,t=this.cf.time;this.nf.debug(Ce.Ifp+" netQuality "+e+" "+t),e<=this.gn.targetQuality?this.ff++:this.ff=0,t>0&&this.ff>=this.gn.probeStartedNum&&Date.now()>this.nf.probeTime+this.gn.probeInterval&&(this.nf.info(Ce.Ifp+" netQuality "+e+" start net probe"),this.probeState=Pe.tryProbe,this.nf.poorQualityRetryCnt++,this.gn.startNetProbe(!0,this.nf))},s.prototype.Rf=function(e,t,n){var r=n.frameHeight,o=n.frameWidth,a=n.framesSent,l=n.timestamp;if(t.frameHeight=r,t.frameWidth=o,e===0||this.cf.frameHeight===r&&this.cf.frameWidth===o)e===0&&(this.cf.frameHeight=r,this.cf.frameWidth=o);else{var d=this.pn.reporter.createSpan(I.t0.H,{key:j.Og.event,par:this.streamId},{key:""},j.YO.event);d.setAttributes({webrtc_sid:j.YO.webrtc_sid(this.sessionId),w:j.YO.w(o),h:j.YO.h(r)}),d.end(),this.cf.frameHeight=r,this.cf.frameWidth=o}e!=0&&(t.videoTransferFPS=1e3*(a-this.cf.framesSent)/(l-e)),t.videoTransferFPS<0&&(t.videoTransferFPS=0),this.cf.framesSent=a},s.prototype.Cf=function(e){var t=e.videoBitrate,n=e.videoFPS,r=e.videoTransferFPS,o=e.frameHeight,a=e.frameWidth,l=e.videoMuteState,d=e.videoQuality,p=e.isHardwareEncode,u=e.audioBitrate,v=e.audioCodec,x=e.audioMuteState,U=e.audioQuality,te=e.audioFPS,le={video:_u(_u({},this.Wh.video),{videoBitrate:t,videoFPS:n,videoTransferFPS:r,frameHeight:o,frameWidth:a,muteState:l,videoQuality:d,isHardwareEncode:p}),audio:_u(_u({},this.Wh.audio),{audioBitrate:u,audioCodec:v,muteState:x,audioQuality:U,audioFPS:te}),nackCount:e.nackCount,pliCount:e.pliCount,totalRoundTripTime:e.totalRoundTripTime,currentRoundTripTime:e.currentRoundTripTime};if(e.qualityLimitationReason!==void 0&&(le.qualityLimitationReason=e.qualityLimitationReason),e.videoPacketsLost!==void 0){var se=e.videoPacketsLostRate;le.video.videoPacketsLost=e.videoPacketsLost,le.video.videoPacketsLostRate=se}if(e.audioPacketsLost!==void 0){var We=e.audioPacketsLostRate;le.audio.audioPacketsLost=e.audioPacketsLost,le.audio.audioPacketsLostRate=We}e.codecImplementationName!==void 0&&(le.codecImplementationName=e.codecImplementationName),e.videoCodecName!==void 0&&(le.video.googCodecName=e.videoCodecName),e.audioCodec!==""&&(le.audio.googCodecName=e.audioCodec),this.Wh=le},s.prototype.simplifyPublishDataKey=function(e){var t={};return t.scenario=e.scenario,t.aRtxRate=e.audioRtxBitrate,t.aTargetRate=e.audioTargetBitrate,t.aBitrate=Math.trunc(e.audioBitrate),t.vUsrTargetRate=e.videoTargetBitrate,t.vBitrate=Math.trunc(e.videoBitrate),t.aFps=Math.trunc(e.audioFPS),t.aLevel=Math.trunc(1e5*e.audioLevel)/1e5,t.aPktLost=e.audioPacketsLost,t.aTotalEnergy=Math.trunc(1e5*e.totalAudioEnergy)/1e5,t.echoRetLossEnh=Math.trunc(1e5*e.echoReturnLossEnhancement)/1e5,t.aPlr=e.audioPacketsLostRate,t.vFps=Math.trunc(e.videoFPS),t.nackCnt=e.nackCount,t.vPliCnt=e.pliCount,t.aQuality=e.audioQuality,t.vQuality=e.videoQuality,t.vHeight=e.frameHeight,t.vWidth=e.frameWidth,t.vTransFPS=Math.trunc(e.videoTransferFPS),t.vPktLost=e.videoPacketsLost,t.vPlr=e.videoPacketsLostRate,t.rtt=e.currentRoundTripTime,t.bw=e.availableOutgoingBitrate,t.vInputW=e.inputWidth,t.vInputH=e.inputHeight,t.inFps=e.inputFPS,t.qualityLimit=e.qualityLimitationReason,t.vTargetRate=e.targetBitrate,t.vRtxRate=e.retransmitBitrate,t.VEncBitrate=e.actualEncBitrate,t.sinkId=e.sinkId,t.vQP=e.frameQp,t.vCodec=e.videoCodecName,t.vMuteStat=e.videoMuteState,t.aMuteStat=e.audioMuteState,t.aPaused=e.audioPaused,t.vPaused=e.videoPaused,t.muted=e.muted,t.volume=e.volume,t.aSoundLv=e.soundLevel,t.vIsHW=e.isHardwareEncode,t.vCodecImpl=e.codecImplementationName,t},s.prototype.Af=function(e){var t=Date.now();if(this.lf==0||t-this.lf>=2e3){e.stream_type="publish",e.stream_id=this.streamId,e.timeStamp=t;var n=this.simplifyPublishDataKey(e);this.yf!==void 0&&(n.gw_vRecvKbps=this.yf.videoRecvBitrate,n.gw_TCStat=this.yf.trafficControlStat,n.gw_vPlr=this.yf.videoLostRate,n.gw_aRecvKbps=this.yf.audioRecvBitrate,n.gw_aPlr=this.yf.audioLostRate),this.nf.info(Ce.Jli+" upload"+JSON.stringify(n)),this.xu&&this.nf.info(Ce.Jli+" "+Yt(this.xu)),this.gn.updateQuality(tt.publish_quality,e),this.lf=t}},s.prototype.Tf=function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n],o=r.key,a=r.value;this.vf[o]!==a&&(this.vf[o]=a,t=!0)}return t},s.prototype.onPublishingError=function(e){},s.prototype.updateGwPublishNetState=function(e){this.yf=e},s})(),Fc=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},zo=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Gi=ao.webrtc_cmd,ua=67109120,cs=(function(){function s(e,t,n){this.zf=0,this.Df=0,this.Nf=0,this.Pf=null,this.Mf=!1,this.xf=0,this.jf=0,this.qf=0,this.Lf=0,this.Bf=0,this.Uf=0,this.Gf=null,this.Jf=0,this.Ff=0,this.Hf=0,this.Vf={},this.Qf=new I.wl,this.Yf=3e3,this.To=1e3,this.tu=null,this.Kf={},this.Zf=["p2p_net_stats_get"],this.Xf=["getP2PNetStats"],this.Wf={first:!0,seq:0},this.$f={first:!0,seq:0},this.tl={first:!0,seq:0},this.useCmd=!0,this.LOG_TAG=t?"zc.p.prs.0":"zc.p.prs",this.an=Oi(e,n),this.va=n,this.an.info("".concat(this.LOG_TAG,".c 1"))}return Object.defineProperty(s.prototype,"dataChannel",{set:function(e){this.Pf=e,e&&this.Nf>=ua&&(this.Mf=!0,this.an.info("".concat(this.LOG_TAG,"  enable dc")))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isCenterServerConnected",{get:function(){var e;return((e=this.Gf)===null||e===void 0?void 0:e.mediaState)===Ae.LOGIN},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"webrtcCenterServerSignal",{set:function(e){this.Gf=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamId",{get:function(){return this.va},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"peerId",{get:function(){return this.zf},set:function(e){this.zf!==e&&this.an.info("".concat(this.LOG_TAG,"  setPeerId: ").concat(this.zf," ").concat(e,", sid: ").concat(this.sessionId)),this.zf=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sessionId",{get:function(){return this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gwVersion",{get:function(){return this.Nf},set:function(e){this.Nf=e,e>=ua&&this.Pf&&(this.Mf=!0,this.an.info("".concat(this.LOG_TAG,"  enable dc, sid: ").concat(this.sessionId)))},enumerable:!1,configurable:!0}),s.prototype.reset=function(){var e,t=this,n=this.Pf?1:0;this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId," reset, rtt:(").concat(this.Uf,",").concat(this.Bf,",").concat(this.Lf,"), dc: ").concat(n,", rtt(").concat(this.qf,",").concat(this.jf,",").concat(this.xf,"), (tx: ").concat(this.Jf," ").concat(this.Ff,", rx:").concat(this.Hf,"), sid: ").concat(this.sessionId)),this.tu&&clearTimeout(this.tu),this.Qf.each(function(r){r._data&&delete t.Vf[r._data.seq]}),this.Qf.removeAll(),(e=this.Gf)===null||e===void 0||e.unregisterPeerCallback(this.Df),this.Nf=0,this.Df=0,this.zf=0,this.Pf=null,this.Mf=!1,this.qf=0,this.jf=0,this.xf=0,this.Uf=0,this.Bf=0,this.Lf=0,this.Jf=0,this.Ff=0,this.Hf=0,this.Wf.first=!0,this.$f.first=!0,this.tl.first=!0},s.prototype.isDCReady=function(){return!(!this.Pf||this.Pf.readyState!="open")},Object.defineProperty(s.prototype,"DCState",{get:function(){return this.Pf?this.Pf.readyState:"invalid"},enumerable:!1,configurable:!0}),s.prototype.isUseDC=function(){return!!this.Mf&&!(this.Nf<ua)&&this.DCState==="open"},s.prototype.addReqTask=function(e,t,n,r,o){var a={seq:e,deleted:!1,cmd:t,sendTime:new Date().getTime(),success:function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];r&&r.apply(void 0,d)},error:o,timeout:this.Yf,isOverDC:n},l=this.Qf.push(a);this.Vf[a.seq]=l,this.checkTimer()},s.prototype.removeReqTask=function(e){e._data&&delete this.Vf[e._data.seq],this.Qf.remove(e)},s.prototype.checkTimer=function(){var e=this;this.Qf.size()>0?this.tu||(this.tu=setTimeout(function(){e.tu=null,e.onTimeout()},this.To)):this.tu&&(clearTimeout(this.tu),this.tu=null)},s.prototype.onTimeout=function(){for(var e,t=this.Qf.getFirst(),n=new Date().getTime();t!=null&&t._data&&!(t._data.sendTime+this.Yf>n);)t._data.isOverDC&&(this.Mf&&(this.an.error("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", rollback DC, sid: ").concat(this.sessionId)),this.Mf=!1),this.Ff++),this.removeReqTask(t),this.Zf.includes(t._data.cmd)||this.an.warn("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", timeout, cmd: ").concat(t._data.cmd,", seq: ").concat((e=t._data)===null||e===void 0?void 0:e.seq,", dc: ").concat(t._data.isOverDC)),t._data.error&&t._data.error(I.Xb,t._data.seq),t=this.Qf.getFirst();this.checkTimer()},s.prototype.onDataChannelMessage=function(e){var t=new Uint8Array(e),n=t[0];if(n!=11||t.length<4)this.an.error("".concat(this.LOG_TAG,".dc  pid: ").concat(this.peerId,", header type(").concat(n," != 0xb)"));else{var r=15&t[1],o=t[2]<<8|t[3],a=t.slice(4);o>t.length-4?this.an.error("".concat(this.LOG_TAG,".dc  pid: ").concat(this.peerId,", invalid data, len: ").concat(t.length," ").concat(o)):r==2?this.handleCmdPush(a,!0):r==1?this.handleCmdRsp(a,0,!0):this.an.error("".concat(this.LOG_TAG,".dc  pid: ").concat(this.peerId,", unknown cmd type: ").concat(r,", sid: ").concat(this.sessionId))}},s.prototype.emitCallback=function(e,t){var n=this.Kf[e];n&&n.callback(t.seq,this.Df,t)},s.prototype.updateRtt=function(e){if(this.Uf=e,this.Lf===0)return this.Lf=e,void(this.Bf=e);e>this.Lf&&(this.Lf=e),e<this.Bf&&(this.Bf=e)},s.prototype.updateDcRtt=function(e){if(this.qf=e,this.xf===0)return this.xf=e,void(this.jf=e);e>this.xf&&(this.xf=e),e<this.jf&&(this.jf=e)},s.prototype.handleCmdHeartbeatMsg=function(e,t){var n=this,r=[{key:"p2p_net_stat_rsp",type:"rsp",field:"p2p_net_stat_rsp"},{key:"play_net_stat",type:"req",field:"play_net_stat_notify"},{key:"net_quality_push",type:"req",field:"net_quality_grade_push"},{key:"pub_net_stat",type:"req",field:"PublishNetStatNotify"},{key:"pub_quality_grade_rsp",type:"rsp",field:"pub_quality_grade_rsp"},{key:"stream_status_push",type:"req",field:"StreamStatusNotifyPush"},{key:"code_err_push",type:"req",field:"codec_error_notify"},{key:"play_event_push",type:"req",field:"PlayEventPush"},{key:"pub_event_push",type:"req",field:"PublishEventPush"}];e.payloads.forEach(function(o){var a,l="cmd_hb_msg",d=r.find(function(p){return o.hasOwnProperty(p.key)});d&&(l=d.field,a=o[d.key],d.type==="rsp"?n.internalCheckCmdRsp(a,0,t,l):n.emitCallback(l,a))})},s.prototype.handleCmdPush=function(e,t,n){t&&this.Hf++;var r=Gi.WebrtcCmdReqMsg.decode(e);if(r){var o,a=Object.keys(r)[0];this.an.debug("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", handleCmdPush fromDC: ").concat(t,", cmd: ").concat(a)),(0,he.M$)(r[a]);var l,d,p=0;switch(a){case"net_quality_grade_push":l=r.net_quality_grade_push,o="net_quality_grade_ack",p=7,(this.$f.first||l.seq>this.$f.seq)&&(this.$f.first=!1,this.$f.seq=l.seq,d="net_quality_grade_push");break;case"codec_error_notify":l=r.codec_error_notify,o="codec_error_notify_ack",p=9,d="codec_error_notify";break;case"candidate_push":l=r.candidate_push,o="candidate_push_ack",p=12,d="CandidateInfoPush";break;case"close_peer_push":l=r.close_peer_push,o="close_peer_ack",p=13,d="CloseSessionPush";break;case"stream_status":l=r.stream_status,o="stream_status_ack",p=14,(this.Wf.first||l.seq>this.Wf.seq)&&(this.Wf.first=!1,this.Wf.seq=l.seq,d="StreamStatusNotifyPush");break;case"client_info":l=r.client_info,o="client_info_ack",p=18,d="ClientInfoPush",r.client_info.peer_id&&(this.zf=r.client_info.peer_id);break;case"net_quality_push":o="net_quality_ack",p=20,(l=r.net_quality_push).peer_id===void 0&&(l.peer_id=this.peerId),(this.tl.first||l.seq>this.tl.seq)&&(this.tl.first=!1,this.tl.seq=l.seq,d="NetQualityInfoPush");break;case"publish_event":l=r.publish_event,o="publish_event_ack",p=23,d="PublishEventPush";break;case"play_event":l=r.play_event,o="play_event_ack",p=26,d="PlayEventPush";break;case"heartbeat_msg_push":o="heartbeat_msg_ack",p=27,this.handleCmdHeartbeatMsg(l=r.heartbeat_msg_push,t);break;default:return void this.an.error("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", handleCmdPush fromDC:").concat(t,", unknown cmd: ").concat(a,", sid: ").concat(this.sessionId))}l&&(o&&this.sendCmdAck(o,p,0,l!=null&&l.seq?l.seq:0,t,n),d&&this.emitCallback(d,l))}else this.an.error("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", handleCmdPush, decode failed"))},s.prototype.internalCheckCmdRsp=function(e,t,n,r){e.seq=e!=null&&e.seq?e.seq:t;var o=this.Vf[e.seq];if(o){if(this.removeReqTask(o),o._data){var a=new Date().getTime()-o._data.sendTime;n?this.updateDcRtt(a):this.updateRtt(a),o._data.success&&o._data.success(e.seq,e)}}else this.an.warn("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId," handleCmdRsp, unknown seq: ").concat(e.seq,", cmd: ").concat(r,", sid: ").concat(this.sessionId))},s.prototype.handleCmdRsp=function(e,t,n){var r=Gi.WebrtcCmdRspMsg.decode(e);if(r){var o,a=Object.keys(r)[0];switch((0,he.M$)(r[a]),a){case"p2p_net_stats_get":o=r.p2p_net_stats_get;break;case"net_quality_grade":o=r.net_quality_grade;break;case"stream_status_ack":o=r.stream_status_ack;break;case"stream_property_update_ack":o=r.stream_property_update_ack;break;case"usr_sei_filter":o=r.usr_sei_filter;break;case"video_stream_sub":o=r.video_stream_sub;break;case"broadcaster_status_ack":o=r.broadcaster_status_ack;break;case"active_audio_play":o=r.active_audio_play;break;case"active_video_play":o=r.active_video_play;break;case"net_quality_probe":o=r.net_quality_probe;break;case"active_sei_insert":o=r.active_sei_insert;break;case"close_peer":o=r.close_peer;break;case"play_stats":return;case"restart_ice":o=r.restart_ice;break;default:return void this.an.error("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", handleCmdRsp, unknown cmd: ").concat(a,", sid: ").concat(this.sessionId))}o&&this.internalCheckCmdRsp(o,t,n,a),this.checkTimer()}else this.an.error("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", handleCmdRsp, decode failed"))},s.prototype.sendCmdAck=function(e,t,n,r,o,a){var l,d=Gi.WebrtcCmdRspMsg.encode((l={},l[e]={result:n,seq:r},l)).finish();o&&this.isDCReady()?this.sendAckByDC(d):this.Gf&&this.Gf.sendGWCmdAck(this.Df,{peer_id:this.zf,cmd_id:t},d,a)},s.prototype.sendReqByDC=function(e){this.sendByDC(e,0),this.Jf++},s.prototype.sendAckByDC=function(e){this.sendByDC(e,3)},s.prototype.sendByDC=function(e,t){var n,r=new Uint8Array(4+e.length),o=0;r[o]=11,r[++o]=t,r[++o]=e.length>>8,r[o+1]=e.length-(r[o]<<8),r.set(e,o+=2),o+=e.length,(n=this.Pf)===null||n===void 0||n.send(r)},s.prototype.registerPeerCallback=function(){var e=this;this.Gf&&this.Gf.registerPeerCallback(this.Df,function(t,n){e.handleMsgWithSession(t,n)})},s.prototype.handleMsgWithSession=function(e,t){var n,r,o;if(e){var a=e.header,l=a.seq,d=a.cmd,p=a.session_id;if(t===De.RSP){if(d==="CmdRsp")return void this.handleCmdRsp((n=e.body)===null||n===void 0?void 0:n.body,l,!1);var u=this.Vf[l];if(!u)return void this.an.warn("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId," handleMsgWithSession, unknown seq: ").concat(l,", cmd: ").concat(d,", sid: ").concat(p));if(this.removeReqTask(u),u._data){var v=new Date().getTime();this.updateRtt(v-u._data.sendTime),u._data.success&&u._data.success(l,e.body)}this.checkTimer()}else if(d==="CmdPush")this.handleCmdPush((r=e.body)===null||r===void 0?void 0:r.body,!1,{seq:l,sessionId:p});else{var x=this.Kf[d];x&&x.callback((o=e==null?void 0:e.header)===null||o===void 0?void 0:o.seq,this.Df,e==null?void 0:e.body)}}},s.prototype.registerPushCallback=function(e,t){this.Kf[e]={callback:t},this.Gf&&["SessionResetPush"].includes(e)&&this.Gf.registerPushCallback(e,this.Df,t)},s.prototype.unregisterPushCallback=function(e){delete this.Kf[e],this.Gf&&this.Gf.unregisterPushCallback(e,this.Df)},s.prototype.dispatchGwNodes=function(e,t,n){if(this.Gf){var r=(0,I.Mo)();this.Gf.dispatchGwNodes(r,e,t,n)}},s.prototype.getGwVersString=function(e){var t=e>>8&65535,n=255&e;return"".concat(e>>24,".").concat(t,".").concat(n)},s.prototype.createSession=function(e,t,n,r){var o=this;if(this.Gf){var a=t.serverHost,l=performance.now();this.Gf.createSession(e,t,function(d,p,u){return Fc(o,void 0,void 0,function(){var v,x;return zo(this,function(U){return l&&(v=(performance.now()-l).toFixed(0)),x=a.length>0?a:u==null?void 0:u.gw_nodes[0],this.an.info("".concat(this.LOG_TAG,"  CreateSessionRsp, node: ").concat(x,", gw ver: ").concat(this.getGwVersString(u.gw_version),", rtt: ").concat(v,", sid: ").concat(p)),this.Df=u.session_id,this.gwVersion=u.gw_version,this.registerPeerCallback(),n&&n(d,u.session_id,u),[2]})})},function(d,p){r&&r(d,p)})}},s.prototype.createSessionWithSdp=function(e,t,n){var r=this;if(this.Gf){var o=performance.now();this.Gf.createSessionWithSdp(e,function(a,l,d){return Fc(r,void 0,void 0,function(){var p,u;return zo(this,function(v){return o&&(p=(performance.now()-o).toFixed(0)),u=e.serverHost.length>0?e.serverHost:d==null?void 0:d.gw_nodes[0],this.an.info("".concat(this.LOG_TAG,"  CreateSessionWithSdpRsp, node: ").concat(u,", gw ver: ").concat(this.getGwVersString(d.gw_version),", rtt: ").concat(p,", sid: ").concat(l)),this.Df=l,this.gwVersion=d.gw_version,d.params_ext&&d.params_ext.peer_id&&(this.peerId=d.params_ext.peer_id),this.registerPeerCallback(),t&&t(a,l,d),[2]})})},function(a,l){n&&n(a,l)})}},s.prototype.sendMediaDesc=function(e,t,n,r,o,a){var l=this;this.addReqTask(e,"MediaDesc",!1,function(d,p){o&&o(d,l.Df,p)},function(d){a&&a(d)}),this.Gf&&this.Gf.sendMediaDesc(e,t,n,r)},s.prototype.sendMediaDescUpdateReq=function(e,t,n,r,o){var a=this;this.addReqTask(e,"MediaDescUpdate",!1,function(l,d){r&&r(l,a.Df,d)},function(l){o&&o(l)}),this.Gf&&this.Gf.sendMediaDescUpdateReq(e,t,n)},s.prototype.sendCandidateInfo=function(e,t,n){var r=this,o=(0,I.Mo)();this.addReqTask(o,"CandidateInfo",!1,function(a,l){t&&t(a,r.Df,l)},function(a){n&&n(a)}),this.Gf&&this.Gf.sendCandidateInfo(o,this.Df,e)},s.prototype.sendCloseSession=function(e,t,n){var r=this;if(this.Df>0){var o=(0,I.Mo)();this.addReqTask(o,"CloseSession",!1,function(a,l){t&&t(a,r.Df,l)},function(a){n&&n(a)}),this.Gf&&this.Gf.sendCloseSession(o,this.Df,e)}},s.prototype.sendStreamStatus=function(e,t,n,r){var o,a=(0,I.Mo)(),l=this.isUseDC();if(this.addReqTask(a,"StreamStatus",l,function(p,u){n(p,u)},function(p){r&&r()}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(a,", sendStreamStatus(").concat(e,", ").concat(t,"), dc:").concat(l));var d=Gi.WebrtcCmdReqMsg.encode({stream_status:{mic_status:t,camera_status:e,seq:a}}).finish();l&&this.isDCReady()?this.sendReqByDC(d):this.isCenterServerConnected&&((o=this.Gf)===null||o===void 0||o.sendGWCmdReq(this.Df,a,{peer_id:this.peerId,cmd_id:16,body:d}))}else this.Gf&&this.isCenterServerConnected&&this.Gf.sendStreamStatus(a,this.Df,e,t,this.streamId);return a},s.prototype.sendStreamAlignmentProperty=function(e){var t=this;return new he.l3(function(n){var r=(0,I.Mo)(),o=Gi.WebrtcCmdReqMsg.encode({stream_property_update:{enable_stream_alignment_when_mix:e,seq:r}}).finish(),a=t.isUseDC();t.addReqTask(r,"StreamPropertyUpdate",a,function(l){n(!0)},function(l){t.an.error("".concat(t.LOG_TAG,"  pid: ").concat(t.peerId,", seq: ").concat(r,", sendStreamPropertyUpdate error: ").concat(l)),n(!1)}),t.an.info("".concat(t.LOG_TAG,"  pid: ").concat(t.peerId,", seq: ").concat(r,", sendStreamAlignmentProperty(").concat(e,"), dc: ").concat(a)),a?t.sendReqByDC(o):t.Gf?t.Gf.sendGWCmdReq(t.Df,r,{peer_id:t.peerId,cmd_id:9,body:o}):n(!1)})},s.prototype.sendSEIUUID=function(e){return Fc(this,void 0,void 0,function(){var t=this;return zo(this,function(n){return[2,new he.l3(function(r,o){var a=(0,I.Mo)(),l=Gi.WebrtcCmdReqMsg.encode({usr_sei_filter:{sei_filter:e,seq:a}}).finish(),d=t.isUseDC();t.addReqTask(a,"usr_sei_filter",d,function(p){r(p)},function(p){o(p)}),t.an.info("".concat(t.LOG_TAG,"  pid: ").concat(t.peerId,", seq: ").concat(a,", sendSEIUUID:").concat(e,", dc: ").concat(d)),d?t.sendReqByDC(l):t.Gf?t.Gf.sendGWCmdReq(t.Df,a,{peer_id:t.zf,cmd_id:5,body:l}):o(I.Dg)})]})})},s.prototype.subscribeVideoStream=function(e){return Fc(this,void 0,void 0,function(){var t=this;return zo(this,function(n){return[2,new he.l3(function(r,o){var a=(0,I.Mo)(),l=Gi.WebrtcCmdReqMsg.encode({video_stream_sub:{type:e,seq:a}}).finish(),d=t.isUseDC();t.addReqTask(a,"video_stream_sub",d,function(p){r(p)},function(p){o(p)}),t.an.info("".concat(t.LOG_TAG,".dc  pid: ").concat(t.peerId,", seq: ").concat(a,", subscribeVideoStream:").concat(e,", dc: ").concat(d)),d?t.sendReqByDC(l):t.Gf?t.Gf.sendGWCmdReq(t.Df,a,{peer_id:t.zf,cmd_id:2,body:l}):o(I.Dg)})]})})},s.prototype.sendRestartIce=function(e,t){return Fc(this,void 0,void 0,function(){var n=this;return zo(this,function(r){return[2,new he.l3(function(o,a){var l=(0,I.Mo)(),d=Gi.WebrtcCmdReqMsg.encode({restart_ice:{ice_ufrag:e,ice_pwd:t,seq:l}}).finish(),p=n.isUseDC();n.addReqTask(l,"restart_ice",p,function(u){var v=Object.keys(u)[0];(0,he.M$)(u[v]),o(u)},function(u){a(u)}),n.an.info("".concat(n.LOG_TAG,".dc  pid: ").concat(n.peerId,", seq: ").concat(l,", iceUfrag:").concat(e,", icePwd:").concat(t,", dc: ").concat(p)),p?n.sendReqByDC(d):n.Gf?n.Gf.sendGWCmdReq(n.Df,l,{peer_id:n.zf,cmd_id:28,body:d}):a(I.Dg)})]})})},s.prototype.sendNetQualityGrade=function(e,t){var n=(0,I.Mo)(),r=Gi.WebrtcCmdReqMsg.encode({net_quality_grade:{rx_quality:e,tx_quality:t,seq:n}}).finish(),o=this.isUseDC();this.addReqTask(n,"net_quality_grade",o,function(a){},function(a){}),o?this.sendReqByDC(r):this.Gf&&this.Gf.sendGWCmdReq(this.Df,n,{peer_id:this.peerId,cmd_id:6,body:r})},s.prototype.sendBroadcasterStatus=function(e){var t,n=this,r=(0,I.Mo)(),o=this.isUseDC();if(this.addReqTask(r,"broadcaster_status",o,function(l,d){n.an.debug("".concat(n.LOG_TAG,"  pid: ").concat(n.peerId,", seq: ").concat(l,", BroadcasterStatusRsp: ").concat(JSON.stringify(d)))},function(l){n.an.error("".concat(n.LOG_TAG,"  pid: ").concat(n.peerId,", seq: ").concat(r,", sendBroadcasterStatus error: ").concat(l))}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(r,", sendBroadcasterStatus(").concat(e,"), dc:").concat(o));var a=Gi.WebrtcCmdReqMsg.encode({broadcaster_status:{status:e,seq:r}}).finish();o?this.sendReqByDC(a):(t=this.Gf)===null||t===void 0||t.sendGWCmdReq(this.Df,r,{peer_id:this.peerId,cmd_id:17,body:a})}else this.Gf&&this.Gf.sendBroadcasterStatus(r,this.Df,e)},s.prototype.sendNetProbeReq=function(e,t){var n,r=this,o=(0,I.Mo)(),a=this.isUseDC();if(this.addReqTask(o,"net_quality_probe",a,function(d,p){r.an.debug("".concat(r.LOG_TAG,"  pid: ").concat(r.peerId,", seq: ").concat(d,", NetProbeRsp: ").concat(JSON.stringify(p))),e&&e(d,p)},function(d){r.an.error("".concat(r.LOG_TAG,"  pid: ").concat(r.peerId,", seq: ").concat(o,", sendNetProbeReq error: ").concat(d)),t&&t(d)}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(o,", sendNetProbeReq, dc: ").concat(a));var l=Gi.WebrtcCmdReqMsg.encode({net_quality_probe:{seq:o,action:1}}).finish();a?this.sendReqByDC(l):(n=this.Gf)===null||n===void 0||n.sendGWCmdReq(this.Df,o,{peer_id:this.peerId,cmd_id:23,body:l})}else this.Gf&&this.Gf.sendNetProbe(o,this.Df,this.peerId)},s.prototype.getP2PNetStats=function(e,t){var n,r=this;if(this.peerId){var o=(0,I.Mo)(),a=this.isUseDC();if(this.addReqTask(o,"p2p_net_stats_get",a,function(d,p){r.an.debug("".concat(r.LOG_TAG,"  pid: ").concat(r.peerId,", seq: ").concat(d,", getP2PNetStatsRsp: ").concat(JSON.stringify(p))),e&&e(d,p)},function(d){r.an.error("".concat(r.LOG_TAG,"  pid: ").concat(r.peerId,", seq: ").concat(o,", getP2PNetStats error: ").concat(d)),t&&t(d)}),this.useCmd&&this.Nf>=ua&&this.peerId>0){var l=Gi.WebrtcCmdReqMsg.encode({p2p_net_stats_get:{seq:o}}).finish();a?this.sendReqByDC(l):(n=this.Gf)===null||n===void 0||n.sendGWCmdReq(this.Df,o,{peer_id:this.peerId,cmd_id:26,body:l})}else this.Gf&&this.Gf.getP2PNetStats(o,this.Df,this.peerId)}else this.an.warn("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId," invalid, getP2PNetStats)"))},s.prototype.ActivatePlayAudioStream=function(e,t,n){var r,o=this,a=(0,I.Mo)(),l=this.isUseDC();if(this.addReqTask(a,"active_audio_play",l,function(p,u){o.an.info("".concat(o.LOG_TAG,"  pid: ").concat(o.peerId,", seq: ").concat(p,", ActivatePlayAudioStreamRsp: ").concat(JSON.stringify(u))),t&&t(p,u)},function(p){o.an.error("".concat(o.LOG_TAG,".dc  pid: ").concat(o.peerId,", seq: ").concat(a,", ActivatePlayAudioStream error: ").concat(p)),n&&n(p)}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(a,", ActivatePlayAudioStream(").concat(e,"), dc: ").concat(l));var d=Gi.WebrtcCmdReqMsg.encode({active_audio_play:{active:e?0:1,seq:a}}).finish();l?this.sendReqByDC(d):(r=this.Gf)===null||r===void 0||r.sendGWCmdReq(this.Df,a,{peer_id:this.peerId,cmd_id:20,body:d})}else this.Gf&&this.Gf.ActivatePlayAudioStream(a,this.Df,e)},s.prototype.ActivatePlayVideoStream=function(e,t,n){var r,o=this,a=(0,I.Mo)(),l=this.isUseDC();if(this.addReqTask(a,"active_video_play",l,function(p,u){o.an.debug("".concat(o.LOG_TAG,"  pid: ").concat(o.peerId,", seq: ").concat(p,", ActivatePlayVideoStreamRsp: ").concat(JSON.stringify(u))),t&&t(p,u)},function(p){o.an.error("".concat(o.LOG_TAG,"  pid: ").concat(o.peerId,", seq: ").concat(a,", ActivatePlayVideoStream error: ").concat(p)),n&&n(p)}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(a,", ActivatePlayVideoStream(").concat(e,"), dc: ").concat(l));var d=Gi.WebrtcCmdReqMsg.encode({active_video_play:{active:e?0:1,layer:0,seq:a}}).finish();l?this.sendReqByDC(d):(r=this.Gf)===null||r===void 0||r.sendGWCmdReq(this.Df,a,{peer_id:this.peerId,cmd_id:21,body:d})}else this.Gf&&this.Gf.ActivatePlayVideoStream(a,this.Df,e)},s.prototype.activateSEIInsert=function(e,t,n,r){var o,a=this,l=(0,I.Mo)(),d=this.isUseDC();if(this.addReqTask(l,"active_sei_insert",d,function(u,v){a.an.debug("".concat(a.LOG_TAG,"  pid: ").concat(a.peerId,", seq: ").concat(u,", activateSEIInsertRsp: ").concat(JSON.stringify(v))),n&&n(u,v)},function(u){a.an.error("".concat(a.LOG_TAG,"  pid: ").concat(a.peerId,", seq: ").concat(l,", activateSEIInsert error: ").concat(u)),r&&r(u)}),this.useCmd&&this.Nf>=ua&&this.peerId>0){this.an.info("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(l,", activateSEIInsert(").concat(e,", ").concat(t,"), dc: ").concat(d));var p=Gi.WebrtcCmdReqMsg.encode({active_sei_insert:{seq:l,action:e,info_type:t}}).finish();d?this.sendReqByDC(p):(o=this.Gf)===null||o===void 0||o.sendGWCmdReq(this.Df,l,{peer_id:this.peerId,cmd_id:25,body:p})}else this.Gf&&this.Gf.activateSEIInsert(l,this.Df,this.peerId,e,t)},s.prototype.sendPlayStats=function(e){var t,n=(0,I.Mo)(),r=this.isUseDC();if(this.Nf>=83886081&&this.peerId>0){this.an.debug("".concat(this.LOG_TAG,"  pid: ").concat(this.peerId,", seq: ").concat(n,", sendPlayStats(").concat(e,"}), dc: ").concat(r));var o=Gi.WebrtcCmdReqMsg.encode({play_stats:{seq:n,audio_jitter_ms:e}}).finish();return r?this.sendReqByDC(o):(t=this.Gf)===null||t===void 0||t.sendGWCmdReq(this.Df,n,{peer_id:this.peerId,cmd_id:27,body:o}),!0}return!1},s})();(function(s){s[s.UserData=1]="UserData",s[s.Cmd=2]="Cmd",s[s.Signal=11]="Signal",s[s.TcPadding=12]="TcPadding",s[s.TcFeedback=13]="TcFeedback"})(bu||(bu={}));var Su,zs,la,bc=(function(){function s(){this.il=0,this.nl=0,this.el=0}return s.prototype.reset=function(){this.il=0,this.nl=0,this.el=0},s.prototype.setGenDataInKbps=function(e){e>5e3&&(e=5e3),this.il=Math.floor(e/8)},Object.defineProperty(s.prototype,"sendBytesOnems",{get:function(){return this.il},enumerable:!1,configurable:!0}),s.prototype.generatePadding=function(){if(this.il<1)return 0;var e=Math.floor(performance.now());if(this.el===0)return this.el=e,this.nl=0,0;var t=e-this.el;if(t<3)return 0;if(this.el=e,t>500)return this.nl=0,0;var n=t*this.il+this.nl;return n<600?(this.nl=n,0):(this.nl=0,n)},s})();(function(s){s[s.Normal=0]="Normal",s[s.Control=1]="Control"})(Su||(Su={})),(function(s){s[s.UNDERUSE=-1]="UNDERUSE",s[s.NORMAL=0]="NORMAL",s[s.OVERUSE=1]="OVERUSE",s[s.OVERUSE_DUE_PKT_LOST=2]="OVERUSE_DUE_PKT_LOST"})(zs||(zs={})),(function(s){s[s.Default=-1]="Default",s[s.NoVideo=0]="NoVideo"})(la||(la={}));var Jh=(function(){function s(e,t){this.an=e,this.enable=!0,this.isStart=!1,this.maxAudioBitrate=48,this.maxVideoBitrate=0,this.startVideoBitrate=0,this.minVideoBitrate=0,this.targetVideoBitrate=0,this.referenceVideoBitrate=-1,this.firstStatsUpdateTs=0,this.lastStatsUpdateTs=0,this.lastAvailableOutgoingBitrate=0,this.lastVideoActualEncBitrate=0,this.videoActualEncBitrateList=[],this.nackCountList=[],this.lastNackCount=0,this.tcState=Su.Normal,this.continueUpCount=0,this.lastUpdateTargetVideoBitrateTime=0,this.updateTargetVideoBitrateCount=0,this.enable_debug_log=!1,this.rl=!0,this.sl=la.Default,this.ol=new bc,this.Pf=null,this.ul=0,this.al=0,this.cl={first:!0,seq:0,status:zs.UNDERUSE,bandwide:0,targetBitrate:0,rtt:0},this.hl=0,this.fl=0,this.ll=0,this.dl=0,this.vl=0,this.ml=!1,this.bl=!1,this._l=null,this.test_padding=0,this.pn=t}return s.prototype.updateVideoTargetBitrate=function(e){},s.prototype.pauseVideo=function(){},s.prototype.resumeVideo=function(){},s.prototype.reset=function(){this.test_padding=0,this.enable=!0,this.maxAudioBitrate=48,this.maxVideoBitrate=0,this.startVideoBitrate=0,this.minVideoBitrate=0,this.targetVideoBitrate=0,this.referenceVideoBitrate=-1,this.firstStatsUpdateTs=0,this.lastStatsUpdateTs=0,this.lastAvailableOutgoingBitrate=0,this.lastVideoActualEncBitrate=0,this.videoActualEncBitrateList.length=0,this.nackCountList.length=0,this.lastNackCount=0,this.tcState=Su.Normal,this.continueUpCount=0,this.lastUpdateTargetVideoBitrateTime=0,this.updateTargetVideoBitrateCount=0,this.rl=!0,this.sl=la.Default,this.ol.reset(),this.Pf=null,this.ul=0,this.al=0,this.cl.first=!0,this.cl.seq=0,this.cl.status=zs.UNDERUSE,this.cl.bandwide=0,this.cl.targetBitrate=0,this.hl=0,this.fl=0,this.ll=0,this.dl=0,this.vl=0,this.ml=!1,this.bl=!1,this.clearProeTimer()},s.prototype.enableVideo=function(e){this.rl=e},s.prototype.setDatachannel=function(e){this.Pf=e},s.prototype.setMinVideoBitrateMode=function(e){e===0&&(this.sl=e)},s.prototype.getMinVideoBitrateMode=function(){return this.sl},s.prototype.getBandwide=function(){return this.cl.bandwide},s.prototype.getFeedback=function(){return this.cl},s.prototype.start=function(){this.isStart||(this.targetVideoBitrate=this.maxVideoBitrate,this.enable&&this.referenceVideoBitrate>0&&(this.startVideoBitrate&&this.startVideoBitrate<this.maxVideoBitrate?this.targetVideoBitrate=this.startVideoBitrate:this.referenceVideoBitrate<=this.minVideoBitrate?this.targetVideoBitrate=this.minVideoBitrate:this.referenceVideoBitrate<this.maxVideoBitrate&&(this.targetVideoBitrate=Math.max(this.referenceVideoBitrate,50))),this.an.info("".concat(Ce.BsE," start ").concat(this.enable,", v[").concat(this.startVideoBitrate,"|").concat(this.maxVideoBitrate,"|").concat(this.minVideoBitrate,"], ref:").concat(this.referenceVideoBitrate,", tg:").concat(this.targetVideoBitrate,", vmode:").concat(this.sl,", a[").concat(this.maxAudioBitrate,"]")),this.isStart=!0)},s.prototype.stop=function(){this.isStart&&this.an.info("".concat(Ce.BsE," stop")),this.isStart=!1,this.reset()},s.prototype.setEnable=function(e){this.enable=e},s.prototype.isEnable=function(){return this.enable},s.prototype.setMinVideoBitrate=function(e){e>0&&(this.minVideoBitrate=e)},s.prototype.getMinVideoBitrate=function(){return this.minVideoBitrate},s.prototype.setStartVideoBitrate=function(e){e>0&&(this.startVideoBitrate=e)},s.prototype.getStartVideoBitrate=function(){return this.startVideoBitrate},s.prototype.setVideoBitrate=function(e){e&&(this.maxVideoBitrate>0&&this.an.info("".concat(Ce.BsE," setVideoBitrate ").concat(this.maxVideoBitrate," => ").concat(e)),this.maxVideoBitrate=e,this.targetVideoBitrate=e)},s.prototype.setAudioBitrate=function(e){this.maxAudioBitrate=e},s.prototype.setReferenceVideoBitrate=function(e){this.referenceVideoBitrate=e},s.prototype.getTargetVideoBitrate=function(){return this.targetVideoBitrate},s.prototype.onStatsUpdated=function(e){if(this.enable){var t=1e3*e.audioRtxBitrate;this.ul=Math.floor(1e3*e.audioBitrate),this.al=Math.floor(t);var n=e.availableOutgoingBitrate?e.availableOutgoingBitrate:0,r=e.actualEncBitrate?e.actualEncBitrate:0;if(this.firstStatsUpdateTs!=0||e.videoBitrate!=0){var o=Date.now();if(this.targetVideoBitrate<this.maxVideoBitrate){var a=0;n>this.lastAvailableOutgoingBitrate?this.continueUpCount++:n<this.lastAvailableOutgoingBitrate&&(this.tcState=Su.Control,this.continueUpCount=0);var l=this.targetVideoBitrate;this.tcState==Su.Normal?n==0||n<=3e5?(a=1,l*=this.updateTargetVideoBitrateCount<3?1.05:this.updateTargetVideoBitrateCount<6?1.1:1.15):(a=2,l*=n&&n>=this.lastAvailableOutgoingBitrate?1.3:1.15,(this.continueUpCount>5||this.lastUpdateTargetVideoBitrateTime>0&&o-this.lastUpdateTargetVideoBitrateTime>5e3)&&(l=this.maxVideoBitrate)):this.continueUpCount>0?(n&&n>1e3*this.targetVideoBitrate*.8||this.continueUpCount>=2)&&(a=3,l*=this.continueUpCount<3?1.05:this.continueUpCount<6?1.1:1.2):this.lastUpdateTargetVideoBitrateTime>0?o-this.lastUpdateTargetVideoBitrateTime+50>=2e3&&(a=4,l*=1.1):this.firstStatsUpdateTs&&o-this.firstStatsUpdateTs+50>=4e3&&(a=5,l*=1.1),l=Math.min(l,this.maxVideoBitrate),(l=Math.max(l,50))!=this.targetVideoBitrate&&((!this.updateTargetVideoBitrateCount||l>=this.maxVideoBitrate)&&this.an.info("".concat(Ce.BsE," update video maxbitrate: ").concat(this.targetVideoBitrate," => ").concat(l,", ").concat(a)),this.targetVideoBitrate=l,this.updateTargetVideoBitrateCount++,this.lastUpdateTargetVideoBitrateTime=o,this.updateVideoTargetBitrate(l))}this.lastAvailableOutgoingBitrate=n,this.lastVideoActualEncBitrate=r,this.lastStatsUpdateTs=o,this.firstStatsUpdateTs||(this.firstStatsUpdateTs=o),this.videoActualEncBitrateList.push(r),this.videoActualEncBitrateList.length>5&&this.videoActualEncBitrateList.shift();var d=e.nackCount-this.lastNackCount;this.lastNackCount=e.nackCount,this.nackCountList.push(d),this.nackCountList.length>5&&this.nackCountList.shift()}}},s.prototype.getLastVideoBitrate=function(){if(!this.firstStatsUpdateTs||this.lastStatsUpdateTs-this.firstStatsUpdateTs<1e4||Date.now()-this.lastStatsUpdateTs>1e4)return 0;var e=Math.max.apply(null,this.nackCountList),t=50;if(this.lastAvailableOutgoingBitrate>0){if(this.lastAvailableOutgoingBitrate>=1.2*this.maxVideoBitrate*1e3||e==0&&this.lastAvailableOutgoingBitrate==3e5)return-1;t=Math.max(this.lastAvailableOutgoingBitrate/1e3,this.lastVideoActualEncBitrate)}else if(t=Math.max.apply(null,this.videoActualEncBitrateList),e==0&&t>.8*this.targetVideoBitrate||t>.8*this.maxVideoBitrate)return-1;return t=Math.max(t,50)},s.prototype.compare16BitsSeq=function(e,t){var n=e-t;return n<-32767?n=e+65535-t+1:n>32767&&(n=e-(t+65535)-1),n},s.prototype.handleFeedback=function(e){var t=e.byteLength-1;if(!(t<9)){var n=new Uint8Array(e,1,t),r=n[0]<<8|n[1],o=new DataView(e).getInt8(3),a=n[3]<<8|n[4],l=n[5]<<8|n[6],d=n[7]<<8|n[8];this.cl.first||this.compare16BitsSeq(r,this.cl.seq)>0?(this.cl.first=!1,this.cl.seq=r,this.cl.status=o,this.cl.bandwide=1e3*a,this.cl.targetBitrate=1e3*l,this.cl.rtt=d,this.processBandwide()):this.an.debug("".concat(Ce.BsE," handleFeedback, seq reorder: ").concat(this.cl.seq,", ").concat(r))}},s.prototype.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},s.prototype.sendPaddingData=function(){if(this.Pf&&this.Pf.readyState=="open"){var e=this.getRandomInt(500,1e3);if(e>this.fl&&(e=this.fl),this.Pf.bufferedAmount>32e3)return this.fl-=e,void(this.fl<0&&(this.fl=0));var t=Math.floor(performance.now());if(e>0&&e<1144){var n=new Uint8Array(e+7);n[0]=bu.TcPadding,n[1]=this.hl>>8&255,n[2]=255&this.hl,n[3]=t>>24&255,n[4]=t>>16&255,n[5]=t>>8&255,n[6]=255&t,this.hl++,this.hl>=65536&&(this.hl=0),this.Pf.send(n),this.fl-=n.byteLength,this.fl<0&&(this.fl=0)}}},s.prototype.processBandwide=function(){if(!(!this.enable||!this.rl||!this.Pf||this.cl.bandwide<=0||this.cl.targetBitrate<=0||this.ul<=0||this.sl!=la.NoVideo)){var e,t=this.ul,n=this.minVideoBitrate<=0?5e4:this.minVideoBitrate,r=this.cl.status,o=this.cl.targetBitrate,a=this.cl.bandwide;e=this.cl.rtt>=300?this.cl.bandwide:o;var l=n+t+4e4;if(r>0?((a<=n+4e4||a<=1e5)&&(this.dl++,this.ml===!1&&(this.pauseVideo(),this.ml=!0)),this.vl=0):r<=0&&(e>l||o>1.5*l)&&(this.dl=0,this.vl++,(e>1.2*l&&e>15e4||this.vl>25||o>1.8*l&&o>25e4)&&this.ml&&(this.bl=!1,this.ml=!1,this.stopBandWideProbe(),this.resumeVideo())),this.ml){var d=o-t;d>0&&r<=0?(this.ll=d,this.ol.setGenDataInKbps(d/1e3),this.bl||(this.bl=!0),this._l||this.startBandWideProbe()):this.stopBandWideProbe()}}},s.prototype.startBandWideProbe=function(){var e=this;this.clearProeTimer(),this.bl&&(this._l=setTimeout(function(){var t=e.ol.generatePadding();if(e.fl+=t,e.ll>0)for(var n=e.ll/16e4+1,r=0;r<n;r++)e.fl>0&&e.sendPaddingData();e.startBandWideProbe()},40))},s.prototype.stopBandWideProbe=function(){this.ll=0,this.fl=0,this.ol.reset(),this.clearProeTimer()},s.prototype.clearProeTimer=function(){this._l&&(clearTimeout(this._l),this._l=null)},s})(),Kh=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},da=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Yh=(function(){function s(e,t,n){this.gn=e,this.yl=100,this.an=Oi(t,n)}return s.prototype.getMiniSdp=function(e){var t=this,n="zc.s.gmsdp";return this.an.info("".concat(n," lSDP:").concat(e.length," isMini")),new he.l3(function(r,o){return Kh(t,void 0,void 0,function(){var a,l,d,p,u=this;return da(this,function(v){return a=this.gn.miniSdpWorker,l=function(x){u.an.error("".concat(n," error:").concat(JSON.stringify(x))),o(x)},p=function(){d&&(clearTimeout(d),d=null)},e?a?(a.parseToMiniSdp(e).then(function(x){if(u.an.info("".concat(n," parse sdp success buffer:").concat(x==null?void 0:x.byteLength)),p(),!x||!x.byteLength)return l(Ft.KbN);r(x)}).catch(function(x){return p(),l(x)}),d=setTimeout(function(){u.an.info("".concat(n," get minisdp timeout")),l(Ft.dNl)},this.yl),[2]):[2,l(Ft.BMv)]:[2,l({code:Ft.KbN.code,message:"sdp error"})]})})})},s.prototype.parseMiniSdp=function(e){var t=this,n="zc.s.prsdp";return this.an.info("".concat(n," rSDP:").concat(e.length," isMini")),new he.l3(function(r,o){var a,l=e,d=t.gn.miniSdpWorker,p=function(v){t.an.error("".concat(n," error:").concat(JSON.stringify(v))),o(v)},u=function(){a&&(clearTimeout(a),a=null)};if(!l||!l.byteLength)return p({code:Ft.TgN.code,message:"buffer error"});d?(d.loadMiniSdpToOriginSdp(l).then(function(v){t.an.info("".concat(n," parse minisdp success sdp:").concat(v.length)),u(),v?r(v):p(Ft.TgN)}).catch(function(v){u(),p(v)}),a=setTimeout(function(){t.an.info("".concat(n," parse minisdp timeout")),p(Ft.dNl)},t.yl)):p(Ft.BMv)})},s})(),yl=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))};function ed(s){var e,t=s,n=(function(o){var a={m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"}]};function l(x,U,te){var le=function(Ke){return String(Number(Ke))===Ke?Number(Ke):Ke},se=x.name&&x.names;x.push&&!U[x.push]?U[x.push]=[]:se&&!U[x.name]&&(U[x.name]={});var We=x.push?{}:se?U[x.name]:U;(function(Ke,Ze,et,ht){if(ht&&!et)Ze[ht]=le(Ke[1]);else for(var gt=0;gt<et.length;gt+=1)Ke[gt+1]!=null&&(Ze[et[gt]]=le(Ke[gt+1]))})(te.match(x.reg),We,x.names,x.name),x.push&&U[x.push].push(We)}var d=RegExp.prototype.test.bind(/^([a-z])=(.*)/),p=[],u={},v=u;return o.split(/(\r\n|\r|\n)/).filter(d).forEach(function(x){var U=x[0],te=x.slice(2);U==="m"&&(p.push({rtp:[],fmtp:[]}),v=p[p.length-1]);for(var le=0;le<(a[U]||[]).length;le+=1){var se=a[U][le];if(se.reg&&se.reg.test(te))return l(se,v,te)}}),u.media=p,u})(s),r=[];return n.media.forEach(function(o){o.type==="video"&&o.fmtp.forEach(function(a){e="a=fmtp:"+a.payload+" "+a.config,a.config.indexOf("sps-pps-idr-in-keyframe")===-1&&r.indexOf(e)===-1&&r.push(e)})}),r.forEach(function(o){t=t.replace(new RegExp(o,"g"),o+";sps-pps-idr-in-keyframe=1")}),t}function bl(s){for(var e=s.split(`\r
`).filter(function(l){return!l.trim().startsWith("a=extmap-allow-mixed")}),t=[],n=0,r=e;n<r.length;n++){var o=r[n];t.push(o),o.trim().startsWith("a=group:BUNDLE")&&t.push("a=extmap-allow-mixed")}var a=t.map(function(l){return l.trim().startsWith("a=extmap")&&l.includes("/recvonly")?l.replace("/recvonly",""):l});return a.join(`\r
`)}var _l=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mo=function(){return mo=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},mo.apply(this,arguments)},Ko=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Ro=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Yo,Sl=new Uint8Array([0,0,0,1,101,184,0,4,0,0,9,255,254,222,35,192,166,30,73,128]),Gd=new Uint8Array([0,0,0,1,103,77,64,51,140,141,78,64,60,34,17,168,0,0,0,1,104,238,60,128]),Zh=new Uint8Array([0,0,0,1,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,30,186,2,64,0,0,0,1,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,30,160,136,69,150,233,111,11,128,64,0,0,3,0,64,0,0,3,3,194,0,0,0,1,68,1,192,115,192,137]),Xh=new Uint8Array([0,0,0,1,40,1,172,26,224,244,133,49,47,246,227,105,128]),Cr=j.Og,Rr=j.v2,kr=j.ch,Qn=Cr.error,ni=j.Jv,us=(function(s){function e(t,n,r,o,a,l,d,p){var u,v=s.call(this,n,t)||this;return v.ipV6Prefer=0,v.ipStackNode=ae.IPv4,v.Sl=!1,v.El=[],v.kl=[],v.Ol=[],v.Il="",v.Tl="",v.Cl=500,v.startTime=0,v.Al=!0,v.port=0,v.zl=null,v.Dl=null,v.Nl=3e3,v.Pl=3e3,v.Ml=16,v.xl=16,v.jl={state:"NO_PUBLISH",code:0},v.ql=!1,v.supportTransceiver=!0,v.$u=!1,v.Ll=0,v.Ul=0,v.Gl=0,v.Jl=0,v.Fl=0,v.publishedTimeStamp=0,v.firstPublishedTimeStamp=0,v.validPublishedTime=0,v.errorTimes=0,v.hasSucceed=!1,v.lastFailTimeLen=0,v._state=7,v.lastState=7,v.Df=0,v.Hl=[],v.Vl=null,v.Ql=null,v.Yl=null,v.Kl=null,v.parentSpanKey="",v.Zl=0,v.Xl=null,v.Wl=!1,v.$l=[],v.td=[],v.nd="H264",v.ed=fe.stop,v.isExternal=!1,v.rd=25e3,v.sd=!1,v.od="",v.ud=[],v.ipNode=null,v.ipV4NodeList=[],v.ipV6NodeList=[],v.ad=0,v.retryFailGwNodes=[],v.retryFailIpV4Nodes=[],v.retryFailIpV6Nodes=[],v.hd=!1,v.fd=0,v.ld=!1,v.vd=0,v.md=0,v.pd=[],v.gd=[],v.bd=[],v._d=!1,v.yd="",v.Sd=!1,v.Ed="",v.kd="",v.Od=!0,v.Id=0,v.probeQuality=0,v.probeTime=0,v.probeNodeList=[],v.probedList=[],v.probeTimer=null,v.Rd=0,v.Td=0,v.poorQualityRetryCnt=0,v.Cd=[],v.continuousFailCnt=0,v.isUpdateSDP=!1,v.toBeReplacedTracks={},v.send_seq=0,v.dataChannelState=0,v.Ad=0,v.zd=0,v.Dd="",v.Nd=[],v.Pd=[],v.Md={forceSynchronousNetworkTime:0,alignment:0},v.xd={isSEIStart:!1,SEIType:Re.ZegoDefined,unregisterSeiFilter:"",uuidSend:!1,track:null},v.jd=0,v.reportPublishStateTime=0,v.isRePublish=!1,v.rtcPublishCount=0,v.stopReason="",v.signalTime=0,v.qd=((u={}).PublishEventPush={seq:-1,time:0},u.ClientInfoPush={seq:-1,time:0},u),v.Ld=!0,v.Bd=!1,v.ip="",v.Ud={lanIP:"",wanIP:"",intranet:!1},v.encodeLowVideoFrame=function(x,U){v.encodeFrame(x,U,!0)},v.encodeVideoFrame=function(x,U){v.xd.track?v.encodeFrameAudioOnly(x,U,!1):v.encodeFrame(x,U,!1)},v.recvLastKeyFrameTime=0,v.camera_status=2,v.mic_status=2,v.Gd=!1,v.Fd=0,v.Hd=void 0,v.ou={onUaSocketConnected:function(){var x;v.info("zc.p.0.eh.0 ".concat((x=v.Hd)===null||x===void 0?void 0:x.length," gwNode: ").concat(v.od)),v.Hd&&(v.od="",v.getDispatchIPNodeMode(),v.Vd.apply(v,v.Hd),v.Hd=void 0)}},v.id=jn("".concat(l.appid,"_").concat(d.idName,"_").concat(t,"_").concat(Date.now(),"_").concat((0,I.Mo)())),v.va=t,v.dataReport=r,v.qualityTimeInterval=o,v.gn=l,v.pn=d,v.nd=v.au("publish_video_codec"),v.mn=p,v.xu=p.localStream,v.Qd=p.zegoCaptureStream,v.$u=v.pn.isMiniSdp,v.$u&&(v.Yd=new Yh(l,n,t)),v.Kd=new cs(n,!0,t),v.Zd=new Jh(v,d),v.Qd&&v.Qd.startPublish(),p.onAudioTrackChange=function(x){var U=v.audioSender;v.previewer.isAudioEnabled&&(U?(U.replaceTrack(x),v.info("zc.oatc remote audio track change success")):v.warn("zc.oatc stream has not sender"))},v.initStreamReport(),v.qualityHandler=new up(v.qualityTimeInterval,a,v,n,v.dataReport,v.pn,v.gn),v.qualityHandler.onPublishingError=function(x){v.publishStateUpdateError(x)},v}return _l(e,s),Object.defineProperty(e.prototype,"Xd",{get:function(){return this.gn.agentIpStackDetection.IPv4===G.reachable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){return this.Wd},enumerable:!1,configurable:!0}),e.prototype.updateCBState=function(t){var n=this,r=Object.keys(t).some(function(o){return t[o]!==n.jl[o]});return r&&(this.jl=t),r},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){this.lastState=this._state,this._state=t},enumerable:!1,configurable:!0}),e.prototype.createSEIWorker=function(){return this.gn.createSEIWorker()},Object.defineProperty(e.prototype,"seiWorker",{get:function(){return this.gn.seiWorker},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoInfo",{get:function(){return this.Ka},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ka",{get:function(){return this.previewer.videoInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"targetVBitrate",{get:function(){return this.camera_status===0?this.Ka.bitRate:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStreamVBitrate",{get:function(){return this.mn.lowStreamConfig.bitRate},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Sc",{get:function(){return this.previewer.mediaStreamConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.va},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this.xu},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerConnection",{get:function(){return this.Xl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateNego",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishOption",{get:function(){return this.$d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNode",{get:function(){return this.od},set:function(t){this.od=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNodeList",{get:function(){return this.ud},set:function(t){this.ud=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNodesTTL",{get:function(){return this.ad},set:function(t){this.ad=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNodesEmpty",{get:function(){return this.ipNodeType===k.ZV4Only?this.ud.length===0:this.ipNodeType===k.ZV4Priority?this.ipV4NodeList.length===0:(this.ipNodeType===k.ZV6Priority||this.ipV4NodeList.length===0)&&this.ipV6NodeList.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPeer",{get:function(){return this.Od},set:function(t){this.Od=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.Id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this.Pf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sideMediaConfig",{get:function(){return this.xd},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishStat",{get:function(){return this.qualityHandler.publishStat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previewer",{get:function(){return this.mn},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(t){this.qualityHandler.probeState=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.hf},set:function(t){this.qualityHandler.hf=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"qualityGrade",{get:function(){var t=this.qualityHandler.Wh;return Math.max(t.video.videoQuality,t.audio.audioQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLowVideoQuality",{get:function(){var t,n,r,o,a,l;if(this.camera_status!==0)return!1;var d=this.videoInfo.width||((n=(t=this.videoSender)===null||t===void 0?void 0:t.track)===null||n===void 0?void 0:n.getSettings().width),p=this.videoInfo.height||((o=(r=this.videoSender)===null||r===void 0?void 0:r.track)===null||o===void 0?void 0:o.getSettings().height),u=this.qualityHandler.Wh.video;if(d&&p&&d>u.frameWidth&&d>u.frameHeight)return!0;var v=this.videoInfo.frameRate||((l=(a=this.videoSender)===null||a===void 0?void 0:a.track)===null||l===void 0?void 0:l.getSettings().frameRate);return!!(v&&v-u.videoFPS>5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPublishStats",{get:function(){return this.qualityHandler.cf},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webrtcProtocol",{get:function(){return this.qualityHandler.df},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowStream",{get:function(){var t;return(t=this.mn)===null||t===void 0?void 0:t.lowStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStateRetry",{get:function(){return[fe.stop,fe.iceClosed,fe.iceFailed].includes(this.ed)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[fe.iceClosed,fe.iceDisconnected,fe.iceFailed].includes(this.ed)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){return this.lastState===6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){return this.Bd?"tcp":this.Ld?this.webrtcProtocol:"udp"},enumerable:!1,configurable:!0}),e.prototype.au=function(t,n){return n===void 0&&(n=!1),this.pn.settingConfig.getSetting(t,n)},Object.defineProperty(e.prototype,"Xh",{get:function(){return this.state===6},enumerable:!1,configurable:!0}),e.prototype.isTcVideoPasued=function(){return this._d},e.prototype.setSendMuteImage=function(t){this.Sd=t},e.prototype.setSignal=function(t){this.Wd!==t&&(this.Wd=t,this.Kd.webrtcCenterServerSignal=t)},e.prototype.initStreamReport=function(){this.tv=this.cr.createSpan(I.t0.I,{key:j.Og.event,par:this.va},{key:Rr.event,par:this.va},Rr.event,!0),this.jd=new Date().getTime()},e.prototype.checkAutoTcp=function(){var t=Lt();this.info("zc.p.0.cat  ".concat(t," ").concat(this.Od)),this.Ld=!(!t||!this.Od)},e.prototype.publishStateUpdateError=function(t,n,r,o){this.error(Ce.CcO+"  call "+JSON.stringify(t));var a=this.cr.createSpan(I.t0.H,{key:j.Og.event,par:this.va},{key:""},j._T.event);a.setAttributes({error:t==null?void 0:t.code,message:t==null?void 0:t.message}),a.end(),this.va&&this.onPublishStateUpdate(I.eZ.error,this.va,t,n,r,o),this.info(Ce.CcO+"  ended")},e.prototype.netProbeToReDispatch=function(t,n){var r;t===void 0&&(t=function(){}),n===void 0&&(n=function(){}),this.ql=!0;var o=(r=this.gn.publisherList[this.va])===null||r===void 0?void 0:r.retryStreamHandler;o&&o.dispatchGwNodesBypass(this,t,n)},e.prototype.resetPublish=function(t){this.info(Ce.zC0+" call");var n=this.Zd.getLastVideoBitrate();if(n){var r=this.Zd.getBandwide();this.info("".concat(Ce.BsE," update ref bitrate: ").concat(n,", bw: ").concat(r)),this.gn.updateReferenceBitrate(n)}this.closeSession(t),this.state=7,this.sd=!1,this.Xl==null&&this.Xl==null||(this.Xl.close(),this.Xl=null,this.videoSender=void 0,this.lowVideoSender=void 0,this.audioSender=void 0),this.nv&&(this.nv=null),this.ev&&(this.ev=null),this.resetIceInfos(),this.resetNat64Infos(),this.Dd="",this.ip="",this.Dl&&(this.Dl=null),this.rv!==null&&(clearTimeout(this.rv),this.rv=null),this.sv!==null&&(clearTimeout(this.sv),this.sv=null),this.av!=null&&(clearTimeout(this.av),this.av=null),this.cv!=null&&(clearTimeout(this.cv),this.cv=null),this.hv&&(clearTimeout(this.hv),this.hv=null),this.fv&&(clearTimeout(this.fv),this.fv=null),this.qualityHandler.clearPublishQualityTimer(),this._clearCanvasTimer(),this.unregisterMsgCallback(),this.Kd.reset(),this.lv=0,this.Zl=0,this.Hl=[],this.Hd=void 0,this.resetEncBitrate(),this.isUpdateSDP=!1,this._d=!1,this.yd="",this.Sd=!1,this.Ed="",this.kd="",this.Ml=16,this.xl=16},e.prototype._clearCanvasTimer=function(){var t;this.Vl!=null&&(clearInterval(this.Vl),(t=this.xd.track)===null||t===void 0||t.stop(),this.xd.track=null,this.Vl=null,this.Ql=null,this.Yl=null,this.Kl=null)},e.prototype.resetPushCmdSeqMap=function(){var t;this.qd=((t={}).PublishEventPush={seq:-1,time:0},t.ClientInfoPush={seq:-1,time:0},t)},e.prototype.dv=function(){var t=this;this.Kd.registerPushCallback("CloseSessionPush",function(n,r,o){o.reason===32&&(t.$u=!1,t.pn.$u=!1,t.Jl=performance.now()-t.Fl),t.vv(n,r,o)}),this.Kd.registerPushCallback("SessionResetPush",function(n,r,o){t.mv(n,r,o)}),this.Kd.registerPushCallback("PublishEventPush",function(n,r,o){t.pv(n,r,o)}),this.Kd.registerPushCallback("ClientInfoPush",function(n,r,o){t.gv(n,o.peer_id,o.clientip||o.client_ip)}),this.Kd.registerPushCallback("PublishNetStatNotify",function(n,r,o){t.qualityHandler.updateGwPublishNetState({videoRecvBitrate:o.video_recv_bitrate,trafficControlStat:o.traffic_control_stat,videoLostRate:o.video_lost_rate,audioRecvBitrate:o.audio_recv_bitrate,audioLostRate:o.audio_lost_rate})})},e.prototype.unregisterMsgCallback=function(){this.Kd.unregisterPushCallback("CloseSessionPush"),this.Kd.unregisterPushCallback("SessionResetPush"),this.Kd.unregisterPushCallback("PublishEventPush"),this.Kd.unregisterPushCallback("ClientInfoPush")},e.prototype.startPublish=function(t,n,r,o){var a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt=this;if(this.info(Ce.QRg+" called"),t){if(this.checkAutoTcp(),this.$u&&!this.Fl&&(this.Fl=performance.now()),this.state=0,this.Wl=!1,this.xu=n,this.$d=r||{},this.Zd.stop(),this._d=!1,this.yd="",(0,B.dd)(this.$d.enableDTX)){var Kt=this.au("dtx",!0);this.$d.enableDTX=Kt!==void 0?!!Kt:this.$d.enableDTX}else this.$d.enableDTX=!!this.au("dtx");var Ht;!((a=this.$d)===null||a===void 0)&&a.SEIType&&(this.xd.SEIType=this.$d.SEIType),this.qualityHandler.Wh.video.muteState=!((d=(l=this.mn)===null||l===void 0?void 0:l.videoTrack)===null||d===void 0)&&d.enabled?"0":"1",this.qualityHandler.Wh.audio.muteState=this.xu.getAudioTracks().length>0&&this.xu.getAudioTracks()[0].enabled?"0":"1",!((p=this.$d)===null||p===void 0)&&p.videoCodec&&(this.nd=this.$d.videoCodec);var Zt=(u=this.mn)===null||u===void 0?void 0:u.videoPreviewType;switch(Zt){case"camera":Ht=this.au("camera_video_bitrate",!0);break;case"screen":Ht=this.au("screen_video_bitrate",!0);break;case"custom":Ht=this.au("custom_video_bitrate",!0)}Ht!==void 0&&(this.info(Ce.QRg+" setting "+Zt+" "+Ht),this.Ka.bitRate=Ht);var un=this.au("bitrate_mode",!0);un&&(this.info(Ce.QRg+" setting bitrate_mode "+un),this.Ka.startBitrate=un);var hn=this.au("publish_video_codec",!0);if(hn&&(this.info(Ce.QRg+" setting publish_video_codec "+hn),this.nd=hn),(0,B.dd)((v=this.$d)===null||v===void 0?void 0:v.isSEIStart)&&(this.xd.isSEIStart=this.$d.isSEIStart),this.xd.isSEIStart){var pn=qt();(this.nd!=="H264"&&this.nd!=="H265"||!pn)&&(this.warn(Ce.QRg+" not use sei; support: ".concat(pn,", codec: ").concat(this.nd," ")),this.xd.isSEIStart=!1)}!((x=this.pn.seiConfig)===null||x===void 0)&&x.unregisterSEIFilter&&(this.xd.unregisterSeiFilter=(U=this.pn.seiConfig)===null||U===void 0?void 0:U.unregisterSEIFilter),this.pn.scenario===9&&(this.Md.forceSynchronousNetworkTime=1),[0,1].includes((te=this.$d)===null||te===void 0?void 0:te.forceSynchronousNetworkTime)&&(this.Md.forceSynchronousNetworkTime=(le=this.$d)===null||le===void 0?void 0:le.forceSynchronousNetworkTime);var Bn=0,mn=0;!((se=this.$d)===null||se===void 0)&&se.trafficControlMinVideoBitrate&&(Bn=this.$d.trafficControlMinVideoBitrate),(0,B.TE)(this.$d.trafficControlFocusOnMode)||(mn=this.$d.trafficControlFocusOnMode),(0,B.dd)(this.$d.enableTrafficControl)&&this.Zd.setEnable(this.$d.enableTrafficControl);var vn=0,cn=0;if(this.Ka.bitRate&&this.Ka.startBitrate==="target"&&(vn=this.Ka.bitRate),Bn>0)cn=Bn;else if(this.Ka.minBitrate)cn=this.Ka.minBitrate;else if(this.mn.previewType==="screen"){var nn=(function(yn){var bn=0,i=yn.frameRate,c=yn.width*yn.height*(i<=30?i:30);return(0,B.Cs)(c)?(bn=c<=3888e3?200:c<=6912e3?400:c<=15552e3?700:c<=27648e3?1e3:2e3)>yn.bitRate&&(bn=yn.bitRate):bn=parseInt(.6*yn.bitRate+""),{minBitrate:bn,resolution:c}})(this.Ka);cn=nn.minBitrate,this.info(Ce.QRg+" resolution: ".concat(nn.resolution,", min bitrate: ").concat(cn))}if(this.Zd.setVideoBitrate(this.Ka.bitRate),this.Zd.setMinVideoBitrate(cn),this.Zd.setStartVideoBitrate(vn),isNaN(this.Ka.audioBitrate)||this.Zd.setAudioBitrate(this.Ka.audioBitrate),this.Zd.enableVideo(!!(!((We=this.mn)===null||We===void 0)&&We.videoTrack)),(0,B.Cs)(this.$d.trafficControlMinVideoMode)&&this.Zd.setMinVideoBitrateMode(this.$d.trafficControlMinVideoMode),this.canSetBandWidthBySender()&&o!=null&&o>0){var gn=this.au("ref_bitrate_on");(gn??this.pn.engineConfig.enableReferenceBitrate)&&!this.mn.enableDualStream&&this.Zd.setReferenceVideoBitrate(o)}this.Zd.updateVideoTargetBitrate=function(yn){Bt.applyVideoBitrate(yn)},this.Zd.pauseVideo=function(){Bt.onTcPauseVideo()},this.Zd.resumeVideo=function(){Bt.onTcResumeVideo()},this.Zd.start(),this.cr.spanSetAttributes({key:Cr.event,par:this.va},{video_en_codec_id:Cr.video_en_codec_id(this.getCodecId(this.nd)),audio_c_channel_count:Cr.audio_c_channel_count(this.Ka.channelCount==2?2:1),audio_en_bps:Cr.audio_en_bps(this.Ka.audioBitrate),aec_level:Cr.aec_level(this.Sc.AEC==1?2:this.Sc.AEC==0?0:2),ans_level:Cr.ans_level(this.Sc.ANS==1?2:this.Sc.ANS==0?0:2),agc:Cr.agc(this.Sc.AGC==1||this.Sc.AGC!=0),video_activate:Cr.video_activate(!!(!((Ze=(Ke=this.mn)===null||Ke===void 0?void 0:Ke.videoTrack)===null||Ze===void 0)&&Ze.enabled)),audio_activate:Cr.audio_activate(!!(!((ht=(et=this.mn)===null||et===void 0?void 0:et.audioTrack)===null||ht===void 0)&&ht.enabled)),scenario:this.pn.scenario,traffic_control_min_video_bitrate:{bitrate:Cr.traffic_control_min_video_bitrate.bitrate(Bn),mode:Cr.traffic_control_min_video_bitrate.mode(mn)},cap_volume:this.previewer.volume,is_peer:Cr.is_peer(this.Od)}),this.tv.setAttributes({room_id:Rr.room_id((Et=(gt=this.gn.publisherList[this.va])===null||gt===void 0?void 0:gt.room)===null||Et===void 0?void 0:Et.roomID),room_sid_string:Rr.room_sid_string((Ot=(At=this.gn.publisherList[this.va])===null||At===void 0?void 0:At.room)===null||Ot===void 0?void 0:Ot.roomSessionID),max_retry_interval:Rr.max_retry_interval(this.pn.streamRetryTime),scenario:this.pn.scenario,use_resource_type:Rr.use_resource_type(["rtc"])}),this.Od?this.bv({encodedInsertableStreams:this.xd.isSEIStart}):this.Vd(),this.av!=null&&(clearTimeout(this.av),this.av=null),this.av=setTimeout(function(){Bt.error(Ce.QRg+" waiting timeout"),Bt.publishStateUpdateError(Qn.Hn)},this.rd)}else this.error(Ce.QRg+" "+t+" streamId is null")},e.prototype.Vd=function(t){var n,r,o,a,l,d=this;if(!(!((n=this.Wd)===null||n===void 0)&&n.isUaConnected))return this.info(Ce.QRg+" wait to create session"),this.Hd=[t],void this.Wd.on("uaConnected",this.ou.onUaSocketConnected);this.lv=(0,I.Mo)();var p=this.va;this.gn.testEnvironment==1&&(p="zegotest-"+this.gn.appid+"-"+this.va),this.gn.gwNode&&(this.od=this.gn.gwNode);var u=this.au("gw_nodes");u&&(0,B.C9)(u)&&u.length>0&&(this.info(Ce.QRg+" setting "+JSON.stringify(u)),this.ud=u,this.od=this.ud[0]||this.od),this.setTurnTcp();var v=this.au("udp_or_tcp",!0);v&&(this.info(Ce.QRg+" setting udp_or_tcp "+v),this.Bd=v==="tcp"),this.Bd&&(this.Od=!1,this.Ld=!1);var x=((o=(r=this.gn.publisherList[this.va])===null||r===void 0?void 0:r.room)===null||o===void 0?void 0:o.roomID)||((a=this.pn.roomList[0])===null||a===void 0?void 0:a.roomID);this.getIPStackNode(),this.info("".concat(Ce.QRg," session req, seq: ").concat(this.lv," gwNode: ").concat(this.od,", ipNodeType: ").concat(this.ipNodeType,", ").concat(this.Od?"peer":"turn",", ipv6_prefer: ").concat(this.ipV6Prefer));var U=this._v(x),te=U.params,le=U.paramsExt;this.yv=le;var se=j._g,We=function(){d.state=1,d.info(Ce.QRg+" called success"),d.ed=fe.start};if(this.Od)this.getLocalMiniSdp(t.sdp,function(et){var ht=new Date().getTime(),gt=d.getSpan(j._g.event,d.parentSpanKey),Et={};et?(d.info(Ce.QRg+" isMini"),Et.miniSdp=et):Et.sdp=t.sdp,gt.setAttributes({server_host:d.od,ip_mode:d.ipV6Prefer,req_params_ext:le}),d.Kd.createSessionWithSdp(mo(mo({seq:d.lv,type:0,mode:0,streamId:p,videoInfo:d.Ka,strAuthParam:d.$d&&d.$d.streamParams||""},Et),{serverHost:d.od,params:te,paramsExt:le,roomID:x,geo:{type:d.gn.geo.type,areaList:d.gn.geo.areaList},ipV6Prefer:d.ipV6Prefer}),function(At,Ot,Bt){return Ko(d,void 0,void 0,function(){var Kt;return Ro(this,function(Ht){return Kt=new Date().getTime(),this.info(Ce.QRg+" create session time "+(Kt-ht)),du(Bt),this.pn.ia(gt,{sdp:Bt.sdp}),gt.setAttributes({webrtc_sid:Ot,is_mini:se.is_mini(this.$u),gw_nodes:se.gw_nodes(Bt.gw_nodes),ip_infos:Bt.ips,ip_v6_infos:Bt.ipv6s,gw_nodes_ttl:se.gw_nodes(Bt.gw_nodes_ttl),gw_version:se.gw_version(Bt.gw_version),rsp_params_ext:Bt.params_ext}),gt.end(),this.cr.spanSetAttributes({key:Cr.event,par:this.va},{gw_version:Cr.gw_version(Bt.gw_version)}),this.ed!==fe.iceConnected&&this.getSpan(j.Ov.event,this.parentSpanKey,"",!0),this.wv(At,Ot,Bt,this.ipV6Prefer),[2]})})},function(At,Ot){if(d.lv==Ot){var Bt=At==I.Xb?Qn.Yn:Qn.Kn;d.info(Ce.QRg+" create session fail. signal: ".concat(d.Wd.state,"; ws: ").concat(d.Wd.mediaState)),d.cr.setError(gt,Bt),d.publishStateUpdateError(Bt)}else d.warn(Ce.QRg+" seq is not match.")}),We()});else{var Ke=this.getSpan(j._g.event,this.parentSpanKey);Ke.setAttributes({server_host:this.od,ip_mode:this.ipV6Prefer});var Ze={type:0,mode:0,streamID:p,strAuthParam:((l=this.$d)===null||l===void 0?void 0:l.streamParams)||"",serverHost:this.od,params:te,roomID:x,geo:{type:this.gn.geo.type,areaList:this.gn.geo.areaList},ipV6Prefer:this.ipV6Prefer};this.Kd.createSession(this.lv,Ze,function(et,ht,gt){return Ko(d,void 0,void 0,function(){return Ro(this,function(Et){return du(gt),Ke.setAttributes({webrtc_sid:se.webrtc_sid(ht),gw_nodes:se.gw_nodes(gt.gw_nodes),ip_infos:gt.ips,ip_v6_infos:gt.ipv6s,gw_nodes_ttl:se.gw_nodes(gt.gw_nodes_ttl),gw_version:se.gw_version(gt.gw_version)}),Ke.end(),this.cr.spanSetAttributes({key:Cr.event,par:this.va},{gw_version:Cr.gw_version(gt.gw_version)}),this.Sv(et,ht,gt,this.ipV6Prefer),[2]})})},function(et,ht){if(d.lv==ht){var gt=et==I.Xb?Qn.Yn:Qn.Kn;d.cr.setError(Ke,gt),d.publishStateUpdateError(gt)}else d.warn(Ce.QRg+" seq is not match.")}),We()}},e.prototype.Sv=function(t,n,r,o){var a,l,d,p=r.turn_server,u=p.split("?")[0]&&p.split("?")[0].slice(5),v=this.signal.Ev,x="webrtc://".concat(u,"/").concat(v,"/").concat(this.va);if(this.cr.spanSetAttributes({key:this.parentSpanKey,par:this.va},{webrtc_sid:r.session_id,url:x}),this.info(Ce.QRg+" sessionId:"+r.session_id),this.lv==t){this.resetPushCmdSeqMap();var U=r.client_ip||r.clientip;U&&(this.pn.clientIP=U),this.Id=r.peer_id;var te=0,le=new Date().getTime();if(this.jd&&(this.info(Ce.QRg+" create signal time "+(te=le-this.jd)),this.signalTime=te),this.zd=le,r.result!==0){if(this.error(Ce.QRg+" create session failed "+r.result),(r==null?void 0:r.result)===1021)return void this.publishStateUpdateError(Ft.mHY,!0);if((r==null?void 0:r.result)===2012)return void this.publishStateUpdateError(Qn.fe,!0);(r==null?void 0:r.result)===2016&&o===q.kV6AndV4&&(this.Al=!1),this.publishStateUpdateError(Qn.Kn)}else this.Df=r.session_id,this.Wl=!0,this.info(Ce.QRg+" create session success "+this.Df),this.setGwNodes(r,!1,o,t),o===q.kV6AndV4&&((a=r==null?void 0:r.ipv6s)===null||a===void 0?void 0:a.length)>0&&(this.Al=!0),((l=r==null?void 0:r.ipv4s)===null||l===void 0?void 0:l.length)>0&&((d=r==null?void 0:r.ipv6s)===null||d===void 0?void 0:d.length)>0&&this.checkIfToRestart(o),this.info(Ce.QRg+" isRestartIce "+this.Sl),this.kv(r)}else this.error(Ce.QRg+" seq is not match.")},e.prototype.wv=function(t,n,r,o){var a,l,d,p=this;if(this.info(Ce.QRg+" sessionId:"+n),this.lv==t){this.resetPushCmdSeqMap();var u=r.client_ip||r.clientip;u&&(this.pn.clientIP=u),this.Id=r.peer_id;var v=0,x=new Date().getTime();if(this.jd&&(this.info(Ce.QRg+" create signal time "+(v=x-this.jd)),this.signalTime=v),this.zd=x,r.result!==0){if(r.result===108){if(this.nd==="H265"){if(!this.publishOption.enableAutoSwitchVideoCodec)return void this.publishStateUpdateError(Qn.le,!0,"not support H265 codec");this.$d.videoCodec="H264",this.info("".concat(Ce.QRg," switch video codec to ").concat(this.$d.videoCodec))}}else r.result===110&&(this.$u=!1,this.pn.$u=!1,this.Jl=performance.now()-this.Fl,this.Ll=2);if(this.error(Ce.QRg+" create session failed "+r.result),(r==null?void 0:r.result)===1021)return void this.publishStateUpdateError(Ft.mHY,!0);if((r==null?void 0:r.result)===2012)return void this.publishStateUpdateError(Qn.fe,!0);(r==null?void 0:r.result)===2016&&o===q.kV6AndV4&&(this.Al=!1),this.publishStateUpdateError({code:Qn.Kn.code,message:Qn.Kn.message+" result:"+r.result})}else this.Df=n,this.Wl=!0,this.setGwNodes(r,!1,o,t),this.info(Ce.QRg+" get remote session success "),o===q.kV6AndV4&&((a=r==null?void 0:r.ipv6s)===null||a===void 0?void 0:a.length)>0&&(this.Al=!0),((l=r==null?void 0:r.ipv4s)===null||l===void 0?void 0:l.length)>0&&((d=r==null?void 0:r.ipv6s)===null||d===void 0?void 0:d.length)>0&&this.checkIfToRestart(o),this.info(Ce.QRg+" isRestartIce "+this.Sl),this.dv(),this.parseRemoteSdp(r,function(U){if(p.Ld){if(p.info(Ce.QRg+" fully auto tcp"),!p.setConfiguration(U,r.params_ext))return void p.publishStateUpdateError(Ft.akb,!1);p.setLocalSdp(p.ev)}p.Iv(U,void 0,r.params_ext,r==null?void 0:r.mini_sdp)},function(U){p.publishStateUpdateError(U)})}else this.error(Ce.QRg+" seq is not match.")},e.prototype.Rv=function(t){var n,r=this;if(this.info(Ce.qPT+" 1"),t){var o=t.candidate,a=t.sdpMid,l=t.sdpMLineIndex;o&&(this.info(Ce.qPT+" addIceCandidate"),(n=this.Xl)===null||n===void 0||n.addIceCandidate(new RTCIceCandidate({sdpMid:a,sdpMLineIndex:l,candidate:o})).then(function(){r.info(Ce.qPT+" add can suc")}).catch(function(d){r.info(Ce.qPT+" add can fail, ".concat(d.message))}))}},e.prototype._v=function(t){var n="",r=[],o={},a=this.pn.seiConfig.SEIPass;(0,B.dd)(a)&&(o.sei_filter_pass=a?1:0),o.auto_switch_turn_type=this.pn.browser==="firefox"?2:1,this.pn.idName&&r.push("zguid="+this.pn.idName),t&&r.push("zgrid="+t),this.gn.isProxy&&(o.zg_proxy=1),this.Md.forceSynchronousNetworkTime===1&&(o.sync_ntp=1);var l=this.$d,d=l.setDeviceDelayByUser,p=l.trafficControlFocusOnMode,u=l.enableTrafficControl;isNaN(d)||(o.ktv_device_delay=d),(0,B.dd)(u)&&(o.tc_type=u?0:2),isNaN(p)||(o.tc_focuson_mode=p==0?1:0);var v=(0,or.UN)(),x=this.au("vid_clock_rate_est");(v&&(v.includes("18_4")||v.includes("18_5"))||x)&&(o.enable_vid_clock_rate_est=1);var U=this.Zd.getMinVideoBitrate();return U>0&&(o.tc_min_video_kbps=U<.7*this.Ka.bitRate?U:.7*this.Ka.bitRate),o.proto_flags=2,this.au("peer_signal_over_dc")&&(o.proto_flags|=256),r.length>0&&(n=r.join("&")),{params:n,paramsExt:o}},e.prototype.getDispatchIPNodeMode=function(){if(!this.od){this.info("zc.p.0.gdinm call");var t=this.gn.getStreamIPNodesMode(),n=t.ipNodeType;this.ipV6Prefer=t.ipV6Prefer,this.ipNodeType=n,this.ipV6Prefer===q.kV6AndV4&&!this.Al&&this.Xd&&(this.ipV6Prefer=q.kV4AndV6,this.ipNodeType=k.ZV4Priority),this.info("zc.p.0.gdinm ".concat(this.ipV6Prefer," ").concat(this.ipNodeType))}},e.prototype.getRetryIPNodeMode=function(){if(this.info("zc.p.0.grinm call"),this.ipV6Prefer===q.kV4Only)this.ipNodeType=k.ZV4Only;else{var t=this.gn.getRetryIPPreferNodeType().ipNodeType;this.ipNodeType=t}this.info("zc.p.0.grinm ".concat(this.ipV6Prefer," ").concat(this.ipNodeType))},e.prototype.getRetryIPv6Prefer=function(){this.ipV6Prefer=this.gn.getIPv6PreferByGwNode(this.gwNode)},e.prototype.checkIfToRestart=function(t){this.Sl=t!==q.kV4Only&&(this.ipNodeType===k.ZV6AndV4Priority||this.pn.selectIPStackMode===F.IPv4Prefer&&this.gn.agentIpStackDetection.IPv4===G.reachable&&this.ipNodeType===k.ZV6Priority)},e.prototype.getIPStackNode=function(){if(this.gwNode){var t=$r(this.gwNode);this.ipStackNode=Si(t)}else this.ipStackNode=[k.ZV4Only,k.ZV4Priority].includes(this.ipNodeType)?ae.IPv4:ae.IPv6},e.prototype.setGwNodes=function(t,n,r,o){var a,l,d;if(this.info("".concat(Ce.JGn," seq: ").concat(o,", gw_nodes: ").concat(JSON.stringify(t==null?void 0:t.gw_nodes),", ips: ").concat(JSON.stringify(t.ips),", ipv6s: ").concat(JSON.stringify(t.ipv6s),", ").concat(r)),this.info("".concat(Ce.JGn," seq: ").concat(o,", retry: ").concat(JSON.stringify(this.retryFailGwNodes),", ips: ").concat(JSON.stringify(this.retryFailIpV4Nodes),", ipv6s: ").concat(JSON.stringify(this.retryFailIpV6Nodes))),r===0){if(((a=t.gw_nodes)===null||a===void 0?void 0:a.length)>0){var p=pf(t.gw_nodes,this.retryFailGwNodes,n);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(p,t.gw_nodes_ttl,r)}}else{var u=void 0,v=void 0;((l=t.ips)===null||l===void 0?void 0:l.length)>0&&(u=sl(t.ips,this.retryFailIpV4Nodes,n),this.retryFailIpV4Nodes=[]),((d=t==null?void 0:t.ipv6s)===null||d===void 0?void 0:d.length)>0&&(v=sl(t.ipv6s,this.retryFailIpV6Nodes,n),this.retryFailIpV6Nodes=[]),this.handleDispatchedGwNodes(t.gw_nodes||[],t.gw_nodes_ttl,r,u,v)}},e.prototype.resetGwNodes=function(){this.info(Ce.Ehk+" call"),this.od="",this.ud=[],this.ipV4NodeList=[],this.ipV6NodeList=[],this.ad=0},e.prototype.handleDispatchedGwNodes=function(t,n,r,o,a){var l=this;if(o===void 0&&(o=[]),a===void 0&&(a=[]),this.info(Ce.d0o+" "+JSON.stringify(t)+" "+JSON.stringify(o)+" "+JSON.stringify(a)+" ipv6Prefer "+r),Array.isArray(t)&&t.length!==0||o.length!==0||a.length!==0){var d=n===0?60:n,p=function(){l.ad=d?new Date().getTime()+1e3*d:l.ad};this.ud=t.length>0?t:this.ud,this.ipV4NodeList=o.length>0?o:this.ipV4NodeList,this.ipV6NodeList=a.length>0?a:this.ipV6NodeList,r===q.kV4Only?(this.od=t.length>0?this.ud[0]:this.od,t.length>0&&p()):r==q.kV4AndV6&&o.length>0?(this.od=Rs(o[0]),this.ipNode=o[0],p()):r===q.kV6AndV4&&a.length>0?(this.od=Rs(a[0]),this.ipNode=a[0],p()):(this.ud.length>0&&(this.od=this.ud[0]),this.info("".concat(Ce.d0o," no gwNode ").concat(r," ").concat(o.length," ").concat(a.length)),this.ipNodeType=k.ZV4Only,this.ipStackNode=ae.IPv4),this.gn.updateCachedGwNodesList(this.streamId,!0,t||[],d,o,a)}},e.prototype.dispatchGwNodes=function(t,n,r){var o=this,a=this.va;this.gn.testEnvironment==1&&(a="zegotest-"+this.gn.appid+"-"+this.va);var l=t;l===F.IPv6Prefer&&!this.Al&&this.Xd&&(l=F.IPv4Prefer);var d=this.getSpan(j.Mu.event,this.parentSpanKey);d.setAttributes({ip_mode:t}),this.Kd.dispatchGwNodes({type:0,streamID:a,geo:{type:this.gn.geo.type,areaList:this.gn.geo.areaList},ipV6Prefer:l},function(p,u,v){du(v),(0,he.lA)(d,{gw_nodes:v.gw_nodes,ip_infos:v.ips,ip_v6_infos:v.ipv6s}),n&&n(v)},function(p,u){o.cr.setError(d,p),r&&r(p)})},e.prototype.kv=function(t){var n;return Ko(this,void 0,void 0,function(){var r,o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn,Bn=this;return Ro(this,function(mn){switch(mn.label){case 0:return this.info((r=Ce.XLj)+" called"),o=[],this.gn.autoSwitchProtocol=this.au("auto_to_tcp")||!1,a=this.au("udp_max_fail_num"),!isNaN(a)&&(this.gn.maxUdpFailNum=a),p=(l=this.gn).maxUdpFailNum,u=l.udpFailNum,this.info(r+"  autoToTcp: ".concat(d=l.autoSwitchProtocol,", udpFailNum: ").concat(u,", maxUdpFailNum: ").concat(p,".")),d&&!this.Bd&&u>=p&&(this.info(r+" switch to tcp. "),this.Bd=!0,this.Ld=!1),(v=this.au("udp_or_tcp",!0))&&(this.info(r+" setting udp_or_tcp "+v),this.Bd=v==="tcp"),x=void 0,U=this.Ud.wanIP=(t.gw_nodes[0]||this.od).split(":")[0],!this.gn.isProxy||this.gn.isLocalProxy?[3,2]:(te=lt==null?void 0:lt.proxyCtrl,[4,Promise.all([te.getTurnInfo(),te.intranetCheck(qi(U),void 0)])]);case 1:return le=mn.sent(),We=le[1],(se=le[0]).code?this.warn(r+" use proxy failed."+JSON.stringify(se)):(Ze=(Ke=se.data).password,et=Ke.turn_ipv4,ht=Ke.turn_port,gt=Ke.username,(Et=Ke.turn_internal_ipv4)&&(this.yv.coturn_internal=Et),At=ho(et),Ot="turn:".concat(At,":").concat(ht,"?transport=").concat(this.Bd?"tcp":"udp"),this.info(r+" turn server: ".concat(Ot," ; intranet: ").concat(JSON.stringify((n=We==null?void 0:We.data)===null||n===void 0?void 0:n.intranet),"; turn internal ip: ").concat(ho(Et))),x=[{credential:Ze,urls:[Ot],username:gt}]),We.code?this.warn(r+" use intranetCheck failed."+JSON.stringify(We)):this.Ud.intranet=We.data.intranet||!1,[3,3];case 2:this.gn.isLocalProxy&&this.gn.turnServers?(x=(Kt=this.gn.turnServers).map(function(vn){return{credential:vn.credential,urls:[vn.url],username:vn.username}}),this.info(r+" use local proxy: "+JSON.stringify(Kt)),this.Ud.intranet=!1):t.turn_server&&(Bt=[],t.turn_server.split(";").forEach(function(vn){var cn=ws(vn).replace("[","").replace("]",""),nn=Si(cn);if(Bn.ipStackNode===nn?Bt.push(vn):Bn.El.push(vn),nn==ae.IPv4){var gn=Mc(cn),yn=vn.replace(cn,"[".concat(gn,"]"));Bn.gn.isCandidateHasIPv6&&Bt.push(yn)}}),(pn=this.El).push.apply(pn,Bt),this.setTurnTcp(),Kt=void 0,Ht=Bt.filter(function(vn){return vn.indexOf("udp")>-1}),Zt=Bt.filter(function(vn){return vn.indexOf("tcp")>-1}),Kt=this.Bd?Zt.length>0?Zt:Ht.map(function(vn){return vn.replace("udp","tcp")}):Ht,this.info(r+" over tcp "+JSON.stringify(Kt)),o.push.apply(o,Kt)),mn.label=3;case 3:return t.stun_server&&o.push(t.stun_server),un={iceTransportPolicy:"all",iceServers:[{urls:o,username:t.turn_username,credential:t.turn_auth_key}],encodedInsertableStreams:this.xd.isSEIStart},this.Il=t.turn_username,this.Tl=t.turn_auth_key,x&&(un.iceServers=x,un.iceTransportPolicy="relay",un.rtcpMuxPolicy="require"),this.info(r+" turn username: "+(hn=un.iceServers[0]).username+", credential: "+hn.credential+", url: "+JSON.stringify(hn.urls)),this.bv(un),this.dv(),this.info(r+" call success"),[2]}})})},e.prototype.Tv=function(t,n){var r=this.qd[t],o=r.seq,a=r.time,l=performance.now();return o!==-1&&o>=n&&l-a<6e3?(this.warn(Ce.z3d+" push ".concat(t,", seq ").concat(n," local ").concat(JSON.stringify(this.qd[t]))),!1):(this.qd[t]={seq:n,time:l},!0)},e.prototype.onReceivedDataChannel=function(t){var n=new Uint8Array(t.data,0,1);n[0]==bu.Signal?this.Kd.onDataChannelMessage(t.data):n[0]==bu.TcFeedback&&this.Zd.handleFeedback(t.data)},e.prototype.bv=function(t){var n,r,o,a,l,d,p,u=this,v=Ce.XLj;this.Xl=new RTCPeerConnection(t),this.Xl.onicecandidate=function(Zt){u.onIceCandidate(Zt)},this.Xl.onsignalingstatechange=function(Zt){u.onSignalStateChange(Zt)},this.Xl.connectionState?this.Xl.onconnectionstatechange=function(Zt){u.Cv(Zt)}:this.info("".concat(v," not support connectionState")),this.Xl.oniceconnectionstatechange=function(Zt){u.onIceConnectionStateChange(Zt)};var x=this.au("peer_signal_over_dc"),U=!(!this.Zd.isEnable()||this.Zd.getMinVideoBitrateMode()!=0);if(this.gn.isDataChannelEnabled||x||U){var te={ordered:!1};this.info("zc.p.dc.0.n  option:"+JSON.stringify(te)+" enable:"+x+" "+U),this.Ad=0,this.Pf=this.Xl.createDataChannel(this.va,te),this.Pf.binaryType="arraybuffer",x&&(this.Kd.dataChannel=this.Pf),U&&this.Zd.setDatachannel(this.Pf),this.Pf.onopen=function(Zt){u.info("zc.p.dc.0.o data channel open"),u.dataChannelState=1},this.Pf.onclose=function(Zt){u.error("zc.p.dc.0.c onclose"),u.dataChannelState=0},this.Pf.onmessage=function(Zt){if(u.Ad++<3&&u.info("zc.p.dc.0.m onmessage"),Zt.data instanceof Blob){var un=new FileReader,hn={};un.readAsArrayBuffer(Zt.data),un.onload=function(){hn.data=un.result,u.onReceivedDataChannel(hn)}}else u.onReceivedDataChannel(Zt)}}var le=[],se=[],We=qt(),Ke=this.isRePublish?j.fo:j.ch,Ze=0;if(this.lowStream&&(Ze=1,this.lowStream.getVideoTracks().forEach(function(Zt){var un;if(Zt.kind==="video"){u.info(Ce.QRg+" lt-id: "+Zt.id);var hn=(un=u.Xl)===null||un===void 0?void 0:un.addTrack(Zt,u.lowStream);u.lowVideoSender=hn,u.xd.isSEIStart&&hn&&We&&u.Av(hn,!0)}}),this.cr.spanSetAttributes({key:Cr.event,par:this.va},{low_stream_params:(n=this.mn)===null||n===void 0?void 0:n.lowStreamConfig})),this.cr.spanSetAttributes({key:Ke.event,par:this.va},{is_dual_stream:j.ch.is_dual_stream(Ze),is_mini:j.ch.is_mini(this.$u)}),this.cr.spanSetAttributes({key:Cr.event,par:this.va},{is_dual_stream:Cr.is_dual_stream(Ze)}),this.xu){if(this.xu.getTracks().forEach(function(Zt){var un,hn,pn=u.xd.isSEIStart&&We;u.info("".concat(v," pc addTrack enable ").concat(Zt.kind," ").concat(Zt.enabled," ").concat(u.mn.isVideoEnabled)),(Zt.kind==="audio"&&u.previewer.isAudioEnabled||Zt.kind==="video"&&(Zt.enabled||pn))&&(hn=(un=u.Xl)===null||un===void 0?void 0:un.addTrack(Zt,u.xu))&&Zt.kind==="video"&&u.Zd.getStartVideoBitrate()>0&&(u.mn.videoInfo.contentHint&&u.mn.videoInfo.contentHint==="detail"||hn.track&&"contentHint"in hn.track&&(u.info("".concat(Ce.BsE," setContentHint: ").concat(hn.track.contentHint," => detail, tid :").concat(hn.track.id)),hn.track.contentHint="detail",u.yd="motion")),pn&&hn&&(u.info(Ce.QRg+" sei transform: "+Zt.kind),Zt.kind==="video"?u.Av(hn):Zt.kind==="audio"&&u.zv(hn)),wn(Zt,u.an,v,{streamID:u.va})}),!(!((r=this.mn)===null||r===void 0)&&r.videoTrack)&&this.xd.isSEIStart){this.Ka.bitRate||(this.Ka.bitRate=50);var et=this.xd.track=this._addCanvasStreamVideoTrack(),ht=this.Xl.addTrack(et,this.xu);ht&&et.kind=="video"&&We&&this.Av(ht)}!((o=this.mn)===null||o===void 0)&&o.videoTrack&&!this.mn.hasStopCaptureVideo&&this.mn.isVideoEnabled&&(le=[(a=this.mn)===null||a===void 0?void 0:a.videoTrack]),this.mn.isAudioEnabled&&(se=this.xu.getAudioTracks());var gt,Et=!1,At=!1;le.length>0&&(this.info(v+" video device: "+(gt=le[0]).label+" ; set: "+JSON.stringify(gt.getSettings())),Et=!0),se.length>0&&(this.info(v+" audio device: "+(gt=se[0]).label+" ; set: "+JSON.stringify(gt.getSettings())),At=!0);var Ot=(l=this.Xl)===null||l===void 0?void 0:l.getSenders().find(function(Zt){var un;return((un=Zt.track)===null||un===void 0?void 0:un.kind)==="video"&&Zt!==u.lowVideoSender}),Bt=(d=this.Xl)===null||d===void 0?void 0:d.getSenders().find(function(Zt){var un;return((un=Zt.track)===null||un===void 0?void 0:un.kind)==="audio"});typeof RTCPeerConnection.prototype.addTransceiver=="function"?(this.supportTransceiver=!0,this.info(v+" ts sender ".concat(!!Ot," ").concat(!!Bt)),!Et&&Ot&&this.warn(v+" vt diff ".concat(!!this.previewer.videoTrack," ").concat(this.localStream===((p=this.previewer)===null||p===void 0?void 0:p.localStream))),Et||this.xd.isSEIStart||Ot||(this.info(v+" add vt"),Ot=this.Xl.addTransceiver("video",{direction:"sendrecv"}).sender),At||Bt||(this.info(v+" add at"),Bt=this.Xl.addTransceiver("audio",{direction:"sendrecv"}).sender)):this.supportTransceiver=!1,this.videoSender=Ot,this.audioSender=Bt}var Kt={offerToReceiveAudio:se.length>0?1:0,offerToReceiveVideo:le.length>0?1:0};this.$d.enableDTX===!0&&(Kt.voiceActivityDetection=!0),this.Dl=Kt,this.info(v+" createOffer: "+JSON.stringify(Kt));var Ht=this.getSpan(j._F.event,this.parentSpanKey);Ht.setAttributes({is_dual_stream:j._F.is_dual_stream(this.lowStream?1:0)}),this.Xl.createOffer(Kt).then(function(Zt){u.pn.ia(Ht,{sdp:Zt.sdp}),(0,he.lA)(Ht,{is_mini:j._F.is_mini(u.$u)}),u.onCreateOfferSuccess(Zt)},function(Zt){u.error(v+" create offer error "+Zt.toString()),u.cr.setError(Ht,{code:Qn.Vn.code,message:Zt.toString()}),u.publishStateUpdateError(Qn.Vn,!0)})},e.prototype.restartIce=function(){var t,n=this,r=Ce.Loj;this.info("".concat(r," call")),(t=this.Xl)===null||t===void 0||t.createOffer(mo(mo({},this.Dl),{iceRestart:!0})).then(function(o){var a,l,d;if(n.info("".concat(r," createOffer suc")),o.sdp){n.Dv(o);var p=Di(o.sdp),u=Ei(o.sdp);n.info("".concat(r," ice ").concat(p," ").concat(u));var v={iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:n.El,username:n.Il,credential:n.Tl}],encodedInsertableStreams:n.xd.isSEIStart};n.info("".concat(r," set config ").concat(JSON.stringify(v))),(a=n.Xl)===null||a===void 0||a.setConfiguration(v),n.sendRestartIce(p,u),n.info("".concat(r," localSdp1 ").concat(o.sdp.substr(0,o.sdp.length/2))),n.info("".concat(r," localSdp2 ").concat(o.sdp.substr(o.sdp.length/2))),(l=n.Xl)===null||l===void 0||l.setLocalDescription(o).then(function(x){n.info("".concat(r," set local sdp suc"))}).catch(function(x){n.info("".concat(r," set local sdp fail ").concat(x.message?JSON.stringify(x.message):JSON.stringify(x)))}),(d=n.Xl)===null||d===void 0||d.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:n.nv})).then(function(x){n.info("".concat(r," set remote sdp suc"))}).catch(function(x){n.info("".concat(r," set remote sdp fail ").concat(x.message?JSON.stringify(x.message):JSON.stringify(x)))}),n.kl.forEach(function(x){var U;(U=n.Xl)===null||U===void 0||U.addIceCandidate(new RTCIceCandidate(x)).then(function(){n.info("".concat(r," add can suc"))}).catch(function(te){n.info("".concat(r," add can fail, ").concat(te.message))})})}}).catch(function(o){n.warn("zc.p.0.rsi err ".concat(o.message?JSON.stringify(o.message):JSON.stringify(o)))})},e.prototype.resetIceInfos=function(){this.info("zc.p.0.rii.0 call"),this.El=[],this.Il="",this.Tl="",this.kl=[]},e.prototype.resetNat64Infos=function(){this.info("zc.p.0.rni.0 call"),this.Ol=[]},e.prototype.switchVideoCodec=function(t,n){var r=this,o="zc.p.0.sc.0";return new Promise(function(a,l){var d;r.Dl?(d=r.Xl)===null||d===void 0||d.createOffer(r.Dl).then(function(p){if(!p.sdp)return r.warn("".concat(o," create offer sdp none")),void l(!1);var u=ct.getSDPVideoCodec(p.sdp);if(u&&u[n].length===0)return r.warn("".concat(o," code not support")),void l(!1);r.nd=n,r.onCreateOfferSuccess(p,!0,void 0,function(v){return Ko(r,void 0,void 0,function(){return Ro(this,function(x){return v!==0?(this.nd=t,this.warn("".concat(o," result ").concat(v)),l(!1)):(this.info("".concat(o," suc")),a(!0)),[2]})})})}).catch(function(p){r.warn("".concat(o," create offer fail ").concat(p==null?void 0:p.toString())),l(!1)}):l(!1)})},e.prototype.checkCodecSupport=function(t){var n;t===void 0&&(t=!1);var r=(n=this.previewer.videoTrack)===null||n===void 0?void 0:n.getSettings(),o=this.lastPublishStats.framesEncoded===0&&(this.publishStat.inputWidth||(r==null?void 0:r.width))!==0&&(this.publishStat.inputHeight||(r==null?void 0:r.height))!==0&&(this.publishStat.inputFPS||(r==null?void 0:r.frameRate))!==0;return!(t&&o||this.camera_status===0&&this.publishStat.videoMuteState==="0"&&this.lastPublishStats.videoBytesSent===0&&o)},e.prototype.getCodecId=function(t){switch(t){case"H264":default:return 0;case"VP8":return 2;case"H265":return 4}},e.prototype.sendSEI=function(t){var n=this;if(this.nd!=="H264"&&this.nd!=="H265")return this.error(Ce.I2V+" code not support"),!1;if(!this.xd.isSEIStart)return console.error("Send SEI Failed. The publishing stream has not enabled sei."),!1;if(this.xd.SEIType==Re.UserUnregister&&t.byteLength<=16)return this.error(Ce.I2V+" inData size should greater than 16"),!1;if(this.Nd.length>=10)return this.error(Ce.I2V+" side info count limit"),!1;this.Nd.push(t.buffer);var r=this.seiWorker;return r&&(this.Nd.forEach(function(o){r.postMessage({cmd:"pushSideInfo",buffer:o,hasLowStream:!!n.lowStream,streamID:n.va,maxLength:10},[o])}),this.Nd=[]),!0},e.prototype.zv=function(t){var n={cmd:"encode",streamID:this.va,kind:"audio"},r=this.createSEIWorker();if(window.RTCRtpScriptTransform)t.transform=new RTCRtpScriptTransform(r,n);else{var o=t.createEncodedStreams(),a=o.readable,l=o.writable,d=!r;try{r&&r.postMessage(mo({readable:a,writable:l},n),[a,l])}catch{d=!0}if(d){this.warn("zc.p.cart The current browser version is too low.");var p=new TransformStream({transform:this.Nv});a.pipeThrough(p).pipeTo(l),this.gn.handleSeiRollBack()}}},e.prototype.Av=function(t,n){n===void 0&&(n=!1);var r=this.createSEIWorker(),o={cmd:"encode",streamID:this.va,type:this.xd.SEIType,isLowStream:n,emulationPreventionByte:this.pn.seiConfig.emulationPreventionByte,onlyAudio:!!this.xd.track,vCodec:this.nd};if(window.RTCRtpScriptTransform)t.transform=new RTCRtpScriptTransform(r,o);else{var a=t.createEncodedStreams(),l=a.readable,d=a.writable,p=!r;try{r&&r.postMessage(mo({readable:l,writable:d},o),[l,d])}catch{p=!0}if(p){this.warn("zc.p.cvrt The current browser version is too low.");var u=new TransformStream({transform:this.encodeVideoFrame});l.pipeThrough(u).pipeTo(d),this.gn.handleSeiRollBack()}}},e.prototype.Nv=function(t,n){n.enqueue(t)},e.prototype.encodeSEINalu=function(t){var n=t.byteLength,r=parseInt(n/255),o=n%255,a=new ArrayBuffer(1+(r+1)+n+1),l=new DataView(a),d=0;l.setUint8(d++,this.xd.SEIType===Re.UserUnregister?5:243);for(var p=0;p<r;p++)l.setUint8(d++,255);l.setUint8(d++,o);var u=new DataView(t);for(p=0;p<(t==null?void 0:t.byteLength);p++)l.setInt8(d++,u.getInt8(p));l.setInt8(d++,128);var v=new Uint8Array(a),x=v;if(this.pn.seiConfig.emulationPreventionByte){var U=(function(te){for(var le=[],se=te.length,We=0,Ke=0;Ke<se;++Ke){var Ze=te[Ke];Ze<=3&&We>=2&&(le.push(3),We=0),le.push(te[Ke]),Ze==0?++We:We=0}var et=new Uint8Array(le);return{output:et,outLength:et.length}})(v).output;x=U}return{rbspView:x,ebspLength:x.length}},e.prototype.encodeFrame=function(t,n,r){var o,a,l,d=r?this.Pd:this.Nd;if(d.length>0){var p=!1,u=(a=(o=t.getMetadata)===null||o===void 0?void 0:o.call(t))===null||a===void 0?void 0:a.mimeType;p=u?(l=u==null?void 0:u.includes("H265"))!==null&&l!==void 0&&l:this.nd==="H265";for(var v=new DataView(t.data),x=[],U=0,te=0;te<d.length;te++){var le=this.encodeSEINalu(d[te]);U+=5+(hn=le.ebspLength),x.push(le)}r?this.Pd=[]:this.Nd=[];for(var se=new ArrayBuffer(U+t.data.byteLength),We=new DataView(se),Ke=0,Ze=new Qh(v,p),et=0,ht=!1,gt=!1,Et=!1,At=0;Ze.NextNalu();)if(At++,p){if((Ot=(126&v.getUint8(Ze.nalu_start+Ze.start_code_size))>>1)==32)ht=!0,et+=Ze.nalu_size;else if(Ot==33)gt=!0,et+=Ze.nalu_size;else if(Ot==34)Et=!0,et+=Ze.nalu_size;else if(Ot==35)continue;if(ht&&gt&&Et)break}else{var Ot;if((Ot=31&v.getUint8(Ze.nalu_start+Ze.start_code_size))==7)gt=!0,et+=Ze.nalu_size;else if(Ot==8)Et=!0,et+=Ze.nalu_size;else if(Ot==9)continue;if(gt&&Et)break}for(var Bt=0;Bt<et;Bt++)We.setInt8(Ke++,v.getInt8(Bt));var Kt=10-At,Ht=x.length>=(Kt=Kt>0?Kt:0)?Kt:x.length;for(te=0;te<Ht;te++){var Zt=x[te],un=Zt.rbspView,hn=Zt.ebspLength;We.setUint8(Ke++,0),We.setUint8(Ke++,0),We.setUint8(Ke++,0),We.setUint8(Ke++,1),p?(We.setUint8(Ke++,78),We.setUint8(Ke++,1)):We.setUint8(Ke++,6);for(var pn=0;pn<hn;pn++)We.setInt8(Ke++,un[pn-0])}for(Bt=et;Bt<t.data.byteLength;Bt++)We.setInt8(Ke++,v.getInt8(Bt));t.data=se}n.enqueue(t)},e.prototype.encodeFrameAudioOnly=function(t,n,r){var o,a,l,d=r?this.Pd:this.Nd,p=0,u=t.type==="key",v=!1,x=(a=(o=t.getMetadata)===null||o===void 0?void 0:o.call(t))===null||a===void 0?void 0:a.mimeType;v=x?(l=x==null?void 0:x.includes("H265"))!==null&&l!==void 0&&l:this.nd==="H265";var U=performance.now(),te=0,le=[];if(d.length>0){for(var se=d.length>=9?9:d.length,We=0;We<se;We++){var Ke=this.encodeSEINalu(d[We]);te+=4+(v?2:1)+(Kt=Ke.ebspLength),le.push(Ke)}r?this.Pd=[]:this.Nd=[],U-this.recvLastKeyFrameTime>2e3&&(u=!0)}u&&(p=v?Zh.length+Xh.length:Gd.length+Sl.length);var Ze=new ArrayBuffer(te+p),et=new DataView(Ze),ht=0;if(u)if(v){var gt=new DataView(Zh.buffer);for(At=0;At<Zh.length;At++)et.setInt8(ht++,gt.getInt8(At))}else for(var Et=new DataView(Gd.buffer),At=0;At<Gd.length;At++)et.setInt8(ht++,Et.getInt8(At));for(We=0;We<le.length;We++){var Ot=le[We],Bt=Ot.rbspView,Kt=Ot.ebspLength;et.setUint8(ht++,0),et.setUint8(ht++,0),et.setUint8(ht++,0),et.setUint8(ht++,1),v?(et.setUint8(ht++,78),et.setUint8(ht++,1)):et.setUint8(ht++,6);for(var Ht=0;Ht<Kt;Ht++)et.setInt8(ht++,Bt[Ht-0])}if(u)if(v){var Zt=new DataView(Xh.buffer);for(At=0;At<Xh.length;At++)et.setInt8(ht++,Zt.getInt8(At))}else for(var un=new DataView(Sl.buffer),At=0;At<Sl.length;At++)et.setInt8(ht++,un.getInt8(At));t.data=Ze,u&&(this.recvLastKeyFrameTime=U),n.enqueue(t)},e.prototype.onCreateOfferSuccess=function(t,n,r,o){var a=this;if(n&&(this.isUpdateSDP=!0,o&&(this.Pv=o)),this.xu&&this.xu.getTracks().forEach(function(l){wn(l,a.an,Ce.fgh)}),this.info(Ce.fgh+" local sdp revert "+this.$l.join("")),this.Dv(t),this.info(Ce.fgh+" localSdp1 "+t.sdp.substr(0,t.sdp.length/2)),this.info(Ce.fgh+" localSdp2 "+t.sdp.substr(t.sdp.length/2)),this.Ld&&!n)return this.ev=t,void this.Vd(t);this.setLocalSdp(t,r)},e.prototype.Dv=function(t){var n;this.Ka.bitRate>0&&(t.sdp=this.Mv(t.sdp,this.Ka.bitRate)),t.sdp=t.sdp.replace(/sendrecv/g,"sendonly");var r=t.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)?(n=t.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/))===null||n===void 0?void 0:n[0]:null;if(r){var o=r.replace(/sendonly/,"sendrecv");t.sdp=t.sdp.replace(r,o)}var a=[];isNaN(this.Ka.audioBitrate)||a.push("maxaveragebitrate="+this.Ka.audioBitrate);var l=/stereo=\d+/,d=t.sdp.match(l),p="stereo="+(this.Ka.channelCount===2?1:0);if(d&&d[0]?t.sdp=t.sdp.replace(l,p):a.push(p),this.$d.enableDTX===!0){var u=/usedtx=\d+/,v=t.sdp.match(u),x="usedtx="+(this.$d.enableDTX?1:0);v&&v[0]?t.sdp=t.sdp.replace(u,x):a.push(x)}var U=/useinbandfec=\d+/,te=t.sdp.match(U);te&&te[0]&&a.push(te[0]),t.sdp=t.sdp.replace(U,a.join(";")),this.$l=t.sdp.match(/m=(.\w*)\s/g)||[],this.info(Ce.fgh+" local sdp revert "+this.$l.join(""));var le=ct.getSDPVideoCodec(t.sdp);if(t!=null&&t.sdp.includes("m=video")&&le[this.nd].length===0){if(!this.publishOption.enableAutoSwitchVideoCodec)return void this.publishStateUpdateError(Qn.le,!0,"not support ".concat(this.nd," codec"));var se=this.nd;if(this.nd=this.nd==="H264"?"VP8":"H264",le[this.nd].length===0&&se==="H265"&&(this.nd="VP8"),this.info("".concat(Ce.fgh," switch video codec to ").concat(this.nd)),this.pn.actionListener("publisherVideoEncoderChanged",this.getCodecId(se),this.getCodecId(this.nd),this.streamId),le[this.nd].length===0)return void this.publishStateUpdateError(Qn.le,!0,"not support H264 and VP8 codec")}t.sdp=ct.getSDPByVideDecodeType(t.sdp,this.nd),this.setSdpHardCode(t),this.pn.browser==="firefox"&&bi(this.pn.browserInfo,"firefox",139,2)&&(t.sdp=bl(t.sdp))},e.prototype.setLocalSdp=function(t,n){var r,o=this;this.info(Ce.fgh+" set local sdp");var a=this.getSpan(j.wH.event,this.parentSpanKey);this.pn.ia(a,{sdp:t.sdp}),a.setAttributes({is_mini:j.wH.is_mini(this.$u),is_dual_stream:j._F.is_dual_stream(this.lowStream?1:0)}),(r=this.Xl)===null||r===void 0||r.setLocalDescription(t).then(function(){return Ko(o,void 0,void 0,function(){return Ro(this,function(l){switch(l.label){case 0:return a.end(),[4,this.onSetLocalDescriptionSuccess(t,n)];case 1:return l.sent(),[2]}})})},function(l){o.error(Ce.fgh+" error "+l.toString()),o.cr.setError(a,{code:Qn.Qn.code,message:l.toString()}),o.publishStateUpdateError(Qn.Qn,!0)})},e.prototype.Mv=function(t,n){var r="AS";return this.pn.browser==="firefox"&&(n=1e3*(n>>>0),r="TIAS"),t=t.indexOf("b="+r+":")===-1?t.replace(/(m=video.*\r\nc=IN.*\r\n)/g,"$1b="+r+":"+n+`\r
`):(t=t.replace(new RegExp("b="+r+`:.*\r
`,"g"),"b="+r+":"+n+`\r
`)).replace("b="+r+":"+n+`\r
`,"")},e.prototype.setSdpHardCode=function(t){var n,r,o=!1,a=(n=this.mn)===null||n===void 0?void 0:n.previewType,l=this.pn.settingConfig;a==="camera"?o=l.getSetting("camera_hard_encode"):a==="screen"?o=l.getSetting("hardware_encode"):a==="custom"&&(o=l.getSetting("custom_hard_encode"));var d=!o;this.info(Ce.rS5+" ".concat((r=this.mn)===null||r===void 0?void 0:r.previewType," software encode: ").concat(d,", "));var p=ct.getSDPByVideDecodeType(t.sdp,this.nd,d,this.pn.engineConfig.encodecSelectionMode);t.sdp=p},e.prototype.onSetLocalDescriptionSuccess=function(t,n){return Ko(this,void 0,void 0,function(){var r,o=this;return Ro(this,function(a){return this.info(Ce.rS5+" success"),this.xu&&this.xu.getTracks().forEach(function(l){wn(l,o.an,Ce.rS5)}),!this.isUpdateSDP&&(this.state=2),n&&(this.previewer.videoInfo=mo(mo({},this.Ka),n)),this.setSdpHardCode(t),this.Od&&!this.isUpdateSDP?this.Ld?(this.info(Ce.rS5+" fully auto tcp"),[2]):(this.Vd(t),[2]):(r=function(l){var d,p={};l?p.miniSdp=l:p.sdp=t.sdp;var u=mo(mo({},p),{keyframe_intv:Math.floor(((d=o.Ka)===null||d===void 0?void 0:d.keyFrameInterval)||2),paramsExt:o.yv});if(o.Zl=(0,I.Mo)(),o.isUpdateSDP){o.info(Ce.rS5+" update sdp");var v=mo(mo({},u),{type:0});o.Kd.sendMediaDescUpdateReq(o.Zl,o.Df,v,function(U,te,le){(le==null?void 0:le.result)==0&&o.parseRemoteSdp(le,function(se){o.xv(se)||o.Iv(se)},function(se){o.publishStateUpdateError(se)})},function(U,te){o.error(Ce.rS5+" update sdp failed"),o.Pv&&o.Pv(-1),o.publishStateUpdateError(U==I.Xb?Qn.re:Qn.se)})}else{var x=o.getSpan(j.r2.event,o.parentSpanKey);x.setAttributes({req_params_ext:o.yv}),o.Kd.sendMediaDesc(o.Zl,o.Df,0,u,function(U,te,le){o.pn.ia(x,{sdp:u.sdp}),x.setAttributes({webrtc_sid:j.r2.webrtc_sid(te),mediaDescription:{keyframe_intv:u.keyframe_intv}}),o.Zl==U&&o.Df==te?(o.info(Ce.rS5+" send success stateNego:waiterAnswer"),o.ed=fe.waiterAnswer,o.state=3,o.parseRemoteSdp(le,function(se){o.pn.ia(x,{remote_sdp:se}),x.end(),o.xv(se)||o.Iv(se,!0,void 0,le==null?void 0:le.mini_sdp)},function(se){o.publishStateUpdateError(se)})):o.error(Ce.rS5+" seq or sessionId is not equal")},function(U,te){o.error(Ce.rS5+" mediaDesc error "+JSON.stringify(U)),o.cr.setError(x,{code:Qn.$n.code,message:Qn.$n.message}),o.publishStateUpdateError(Qn.$n)}),o.info(Ce.rS5+" call success")}},this.getLocalMiniSdp(t.sdp,r),[2])})})},e.prototype.getVideoSenders=function(t){if(t===void 0&&(t=!1),t&&!this.previewer.isVideoEnabled)return[];var n=[];return this.videoSender&&(n.push(this.videoSender),this.lowVideoSender&&n.unshift(this.lowVideoSender)),n},e.prototype.canSetBandWidthBySender=function(){var t=this.pn.browserInfo.name.toLowerCase(),n=Zi(this.pn.browserInfo.version);return(t==="chrome"||t==="safari"||t==="firefox"&&n>=64)&&"RTCRtpSender"in window&&"setParameters"in window.RTCRtpSender.prototype},e.prototype.applyVideoBitrate=function(t){return Ko(this,void 0,void 0,function(){var n=this;return Ro(this,function(r){return[2,new he.l3(function(o){var a=n.videoSender;if(a){var l=a.getParameters();l.encodings||(l.encodings=[{}]);var d=1e3*t,p=l.encodings[0].maxBitrate,u=JSON.stringify(l.encodings[0]);l.encodings[0].maxBitrate=d,a.setParameters(l).then(function(){n.info("zc.p.sbw set maxBitrate success. ".concat(p,"=>").concat(d,", ").concat(u,",").concat(a.getParameters().encodings[0]," ")),o(!0)}).catch(function(v){n.warn("zc.p.sbw set maxBitrate fail"+v),o(!1)})}else o(!0)})]})})},e.prototype.xv=function(t){return xr(t).length===0&&(this.publishStateUpdateError(Ft.akb,!1),!0)},e.prototype.setBandWidthBySdp=function(t,n){this.info("zc.p.sbwbs bandwidth: ".concat(n));var r="AS";return this.pn.browser==="firefox"&&(n=1e3*(n>>>0),r="TIAS"),t=/b=AS.*(\r\n|\n)/.test(t)?t.replace(/AS:(\d+)/,r+":"+n):t.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/,"$&b=".concat(r,":").concat(n,`
`))},e.prototype.Iv=function(t,n,r,o){var a,l;return n===void 0&&(n=!1),Ko(this,void 0,void 0,function(){var d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn,Bn,mn,vn,cn,nn,gn,yn,bn,i=this;return Ro(this,function(c){switch(c.label){case 0:if(this.info(Ce.O2K+" call"),this.Ka.audioBitrate&&this.Ka.audioBitrate!==48e3&&(t=t.replace(/maxaveragebitrate=(\d+)/,"maxaveragebitrate="+this.Ka.audioBitrate)),this.td=t.match(/m=(.\w*)\s/g)||[],this.info(Ce.O2K+" sdp revert "+this.td.join("")),this.setTurnTcp(),this.gn.autoSwitchProtocol=this.au("auto_to_tcp")||!1,d=this.au("udp_max_fail_num"),!isNaN(d)&&(this.gn.maxUdpFailNum=d),v=(p=this.gn).maxUdpFailNum,x=p.udpFailNum,this.info("zp.oro.0  autoToTcp: ".concat(u=p.autoSwitchProtocol,", udpFailNum: ").concat(x,", maxUdpFailNum: ").concat(v,".")),u&&!this.Bd&&x>=v&&(this.info("zp.oro.0 switch to tcp."),this.Bd=!0,this.Ld=!1),(U=this.au("udp_or_tcp",!0))&&(this.info("zp.oro.0 setting udp_or_tcp "+U),this.Bd=U==="tcp"),this.Bd&&!this.gn.isProxy&&this.pn.browser!=="firefox"&&((a=t.match(/candidate.*/g))===null||a===void 0||a.forEach(function(h){var y=h.replace(/udp/,"tcp");y.includes(" tcptype ")||(y=y.replace(" typ host "," typ host tcptype passive ")),t=t.replace(h,y)})),this.gn.isProxy)if(te=Xr(t),le=te[0],se=te[1],We=t.match(/a=mid:[^(\n|\r)]+/g),se&&We)if(this.Ud.intranet)setTimeout(function(){se.forEach(function(h,y){var A,z={sdpMLineIndex:y,candidate:h.replace(le[y].ip,i.Ud.wanIP).replace("a=",""),sdpMid:We[y].replace("a=mid:","")};i.info("zp.oro.0  add wan candidate:"+JSON.stringify(z)),(A=i.Xl)===null||A===void 0||A.addIceCandidate(new RTCIceCandidate(z))})},1e3);else for(this.info("zp.oro.0  change candidate ip from lan to wan: "+(Ke=this.Ud.wanIP)),Ze=0;Ze<se.length;Ze++)ht=(et=se[Ze]).replace(le[Ze].ip,Ke),t=t.replace(et,ht);else this.warn("zp.oro.0  candidate not found");else t=this.extractCandidate(t);if(this.info("zp.oro.0 sdp revert "+this.$l.join("")+" "+this.td.join("")),this.$l.join()!==this.td.join()&&this.$l.length==this.td.length&&(gt=new RegExp("[\\s\\S]*"+this.td[0]).exec(t)[0].replace(this.td[0],""),Et=[],At="",this.$l.forEach(function(h){var y=i.td.findIndex(function(Me){return Me==h}),A=new RegExp(h+"[\\s\\S]*"+(i.td[y+1]||"")).exec(t)[0].replace(i.td[y+1],""),z=/a=mid:(\w)/.exec(A)[1];Et.push(z),At+=A||""}),t=gt.replace(/a=group:BUNDLE.*/,"a=group:BUNDLE "+Et.join(" "))+At,this.$l=[],this.td=[]),(Ot=wi(t).filter(function(h){return h.startsWith("m=video")})).length>0&&(Kt=(Bt=this.lowStream?Ot[1]:Ot[0]).match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/),(0,or.H8)()&&(Ht=this.Zd.getStartVideoBitrate(),Zt=this.Zd.getMinVideoBitrate(),un=[],Zt&&un.push("x-google-min-bitrate=".concat(Zt)),Ht&&un.push("x-google-start-bitrate=".concat(Ht)),Kt!==null&&un.length&&(hn=Kt[3],pn="".concat(hn,";").concat(un.join(";")),Bn=Bt.replace(hn,pn),t=t.replace(Bt,Bn)))),!(this.Ka.bitRate>0))return[3,5];if(mn=this.Ka.bitRate,vn=this.Ka.bitRate,cn=!1,!this.canSetBandWidthBySender())return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),vn=this.Zd.getTargetVideoBitrate(),[4,this.applyVideoBitrate(vn)];case 2:return cn=c.sent(),[3,4];case 3:return nn=c.sent(),this.error(Ce.O2K+JSON.stringify(nn)),[3,4];case 4:cn||(t=this.setBandWidthBySdp(t,mn)),(gn=this.getVideoSenders())==null||gn.forEach(function(h){if(h&&h.getParameters&&h.setParameters){var y=h===i.lowVideoSender,A=h.getParameters();if(A.encodings&&A.encodings.length!=0||(A.encodings=[{}]),y){var z=i.lowStreamVBitrate;z&&(A.encodings[0].maxBitrate=1e3*z)}else{var Me=i.getScaleResolutionDownBy();Me!=1&&(A.encodings[0].scaleResolutionDownBy=Me)}i.videoInfo.frameRate>0&&(A.encodings[0].maxFramerate=i.videoInfo.frameRate),h.setParameters(A)}}),c.label=5;case 5:return this.info(Ce.O2K+" remoteSdp:"+t),yn={type:"answer",sdp:t},bn=this.getSpan(j.Pe.event,this.parentSpanKey),this.pn.ia(bn,{sdp:yn.sdp}),bn.setAttributes({is_mini:j.Pe.is_mini(this.$u),is_dual_stream:j._F.is_dual_stream(this.lowStream?1:0),webrtc_sid:j.Pe.webrtc_sid(this.Df)}),this.nv=yn.sdp,(l=this.Xl)===null||l===void 0||l.setRemoteDescription(new RTCSessionDescription(yn)).then(function(){i.info(Ce.O2K+" set success"),i.xu&&i.xu.getTracks().forEach(function(h){wn(h,i.an,Ce.O2K)}),bn.end(),i.ed==fe.iceConnected&&i.Pv&&(i.info(Ce.O2K+" update sdp success"),i.Pv(0),i.Pv=void 0,i.isUpdateSDP=!1)},function(h){i.error(Ce.O2K+" failed: "+h.toString()),i.$u&&(0,B.G0)(o)&&i.warn(Ce.O2K+" remote mini  "+o.toString()),bn.setAttributes({error:Qn.Zn.code,message:h.toString()}),bn.end();var y=!0;i.$u&&(y=!1,i.$u=!1,i.Jl=performance.now()-i.Fl,i.Ll=4),i.publishStateUpdateError(Qn.Zn,y)}),this.state=4,n&&(this.jv(this.Hl),this.Hl=[],this.state=5),this.Ld&&this.Rv(r),this.startTime=Date.now(),this.checkRetryOtherIPCandidate(),this.info(Ce.O2K+" call success"),[2]}})})},e.prototype.checkRetryOtherIPCandidate=function(){var t=this;this.hv=setTimeout(function(){t.info("".concat(Ce.K15," check ").concat(t.state," ").concat(t.ipNodeType," ").concat(t.kl.length)),t.state!==6&&t.Sl&&t.kl.length>0&&(t.ipStackNode=t.ipStackNode===ae.IPv4?ae.IPv6:ae.IPv4,t.restartIce())},this.Cl)},e.prototype.extractCandidate=function(t){var n=this,r=Xr(t),o=r[0];return r[1].forEach(function(a,l){var d=o[l].ip,p=Si(d);if(n.ipStackNode!==p){var u={sdpMLineIndex:parseInt(o[l].mid),candidate:a.replace("a=",""),sdpMid:o[l].mid};n.kl.push(u),t=t.replace(a+`
`,"")}if(p===ae.IPv4){var v=Mc(d),x=a.replace(new RegExp(d,"g"),v).replace("a=",""),U={sdpMLineIndex:parseInt(o[l].mid),candidate:x,sdpMid:o[l].mid};n.Ol.find(function(te){return te.candidate===U.candidate&&te.sdpMLineIndex===U.sdpMLineIndex&&te.sdpMid===U.sdpMid})||n.Ol.push(U)}}),t},e.prototype.getScaleResolutionDownBy=function(){var t,n,r,o=this.lastPublishStats.frameWidth,a=((n=(t=this.mn)===null||t===void 0?void 0:t.cameraMaxResolution)===null||n===void 0?void 0:n.maxWidth)||0,l=(r=this.mn.videoTrack)===null||r===void 0?void 0:r.getSettings().width,d=o?Math.min(a,o):a;return a&&l?Math.max(d/l,1):1},e.prototype.setBitrate=function(t){var n;return Ko(this,void 0,void 0,function(){var r,o,a=this;return Ro(this,function(l){switch(l.label){case 0:return l.trys.push([0,6,,7]),[4,this.applyVideoBitrate(t)];case 1:if(l.sent(),!(0,or.aR)()||!(0,or.hL)())return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,(n=this.peerConnection)===null||n===void 0?void 0:n.createOffer({})];case 3:return r=l.sent(),this.onCreateOfferSuccess(r,!0,mo(mo({},this.videoInfo),{bitRate:t}),function(d){return Ko(a,void 0,void 0,function(){return Ro(this,function(p){return this.info("zc.p.sbw set bitrate by update sdp"),[2]})})}),[3,5];case 4:return l.sent(),[3,5];case 5:return this.Zd.setVideoBitrate(t),this.Ka.bitRate=t,[3,7];case 6:return o=l.sent(),this.error(Ce.ny0+JSON.stringify(o)),[3,7];case 7:return[2]}})})},e.prototype.setVideoBitrateForTC=function(t){this.Zd.setVideoBitrate(t)},e.prototype.setConfiguration=function(t,n){var r,o,a=this;if(this.info(Ce.XR3+" 1"),n){var l=n.turn_username,d=n.turn_auth_key,p=n.turn_urls;this.Il=l,this.Tl=d;var u=void 0;if(p){var v=p.split(";"),x=[];v.forEach(function(te){var le=ws(te).replace("[","").replace("]",""),se=Si(le);if(a.ipStackNode===se?x.push(te):a.El.push(te),se==ae.IPv4){var We=Mc(le),Ke=te.replace(le,"[".concat(We,"]"));a.gn.isCandidateHasIPv6&&x.push(Ke)}}),(r=this.El).push.apply(r,x),(u=x).length===0&&u.push.apply(u,this.El)}else{var U=xr(t);if(U.length===0)return this.info(Ce.XR3+" no candidate"),!1;u=U}(o=this.Xl)===null||o===void 0||o.setConfiguration({iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:u,username:l,credential:d}],encodedInsertableStreams:this.xd.isSEIStart})}return!0},e.prototype.onIceConnectionStateChange=function(t){var n,r=this;if(this.state!=7&&this.Xl!=null){this.info(Ce.lWs+" ice state: "+this.Xl.iceConnectionState);var o=this.getSpan(j.CK.event,this.parentSpanKey,j.Jv.event);if(o.setAttributes({ice_state:j.CK.ice_state(this.Xl.iceConnectionState)}),this.Xl.iceConnectionState==="connected"){if(this.info(Ce.lWs+" connected state "+this.state+" ?"+((n=this.Xl)===null||n===void 0?void 0:n.connectionState)),this.jd){var a=new Date().getTime()-this.jd;this.tv.setAttributes({publish_begin_time:Rr.publish_begin_time(a)}),this.jd=0}if(this.cr.spanEnd({key:j.Ov.event,par:this.va},{webrtc_sid:this.Df}),this.ed=fe.iceConnected,this.zd){var l=new Date().getTime()-this.zd;this.info(Ce.lWs+" ice time "+l)}this.ql=!1,this.info(Ce.lWs+" stateNego:iceConnected"),this.av&&(clearTimeout(this.av),this.av=null),this.cv!=null&&(clearTimeout(this.cv),this.cv=null),this.Xl.connectionState||(this.sd?this.publishSuccess():(this.qv&&clearTimeout(this.qv),this.qv=null,this.qv=setTimeout(function(){var p;r.info(Ce.lWs+" get first stats state "+r.state),r.state!==6&&((p=r.Xl)===null||p===void 0||p.getStats().then(function(u){r.info(Ce.lWs+" get first stats suc"),u.size>0&&r.publishSuccess()}))},1e3)))}else if(this.Xl.iceConnectionState==="closed")o.end(),this.ed=fe.iceClosed,this.Lv(this.Xl.iceConnectionState);else if(this.Xl.iceConnectionState==="failed")o.end(),this.ed=fe.iceFailed,this.Lv(this.Xl.iceConnectionState);else if(this.Xl.iceConnectionState==="disconnected"){o.end(),this.warn(Ce.lWs+" ice disconnected "),this.ed=fe.iceDisconnected;var d=this.gn.lastChangeIpTime;d&&Date.now()-d<15e3?this.publishStateUpdateError(Qn.Xn):this.cv||(this.cv=setTimeout(function(){r.Lv("disconnected")},15e3))}}},e.prototype.onIceCandidate=function(t){var n,r,o=this;if(this.info(Ce.Bnp+" candidate "+JSON.stringify(t.candidate)),t.candidate)if(t.candidate.candidate&&Si((n=t.candidate.candidate.split(" "))===null||n===void 0?void 0:n[4])===ae.IPv6&&(this.Ld&&(this.info("".concat(Ce.Bnp," can len ").concat(this.Ol.length)),this.Ol.forEach(function(l){var d;(d=o.Xl)===null||d===void 0||d.addIceCandidate(new RTCIceCandidate(l)).then(function(){o.info("".concat(Ce.Bnp," add can suc"))}).catch(function(p){o.info("".concat(Ce.Bnp," add can fail, ").concat(p.message))})})),this.gn.isCandidateHasIPv6=!0),((r=t.candidate.candidate)===null||r===void 0?void 0:r.indexOf("relay"))!=-1){this.info(Ce.Bnp+" candidate "+t.candidate.candidate+" state "+this.state+" autotcp "+this.Ld);var a=function(l){o.jv([{candidate:l.candidate.candidate,sdpMid:l.candidate.sdpMid,sdpMLineIndex:l.candidate.sdpMLineIndex}])};this.Ld?a(t):this.state<5||this.state==7?this.Hl.push({candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex}):a(t)}else this.info(Ce.Bnp+" candidate not relay")},e.prototype.jv=function(t){var n=this;if(this.info(Ce.n9u+" called"),!(t=t.filter(function(o){return o.candidate.indexOf("relay")>0}))||t.length<1)this.info(Ce.n9u+" cancelled");else{var r=this.getSpan(j.aH.event,this.parentSpanKey);r.setAttributes({candidate_info:j.aH.candidate_info(t)}),this.ed!==fe.iceConnected&&(this.ed=fe.sendCandidate),this.info(Ce.n9u+" stateNego:sendCandidate"),this.Kd.sendCandidateInfo(t,function(o,a,l){n.info(Ce.n9u+" send success"),r.end()},function(o,a){n.error(Ce.n9u+" failed to send: "+o.toString()),n.cr.setError(r,{code:Qn.te.code,message:o.toString()}),n.publishStateUpdateError(Qn.te)})}},e.prototype.Cv=function(t){var n,r,o=(n=this.Xl)===null||n===void 0?void 0:n.connectionState;if(this.info(Ce.n9B+" conn state: "+o),o==="connected"){if(this.yd==="motion"){var a=this.videoSender;a&&((r=a.track)===null||r===void 0?void 0:r.kind)==="video"&&"contentHint"in a.track&&(this.info("".concat(Ce.BsE," recover contentHint: ").concat(a.track.contentHint," => ").concat(this.yd,", tid :").concat(a.track.id)),a.track.contentHint=this.yd),this.yd=""}this.state!==6&&this.publishSuccess()}},e.prototype.onSignalStateChange=function(t){this.info(Ce.n9B+" signal state: "+t.target.signalingState),this.state!=7&&this.Xl!=null&&t.target.signalingState==="closed"&&(this.ed=fe.iceClosed,this.Lv(this.Xl.iceConnectionState))},e.prototype.vv=function(t,n,r){this.info(Ce.Q4K+" "+JSON.stringify(r));var o=this.getSpan(j.Ux.event,j.Jv.event);o.setAttributes({err_info:j.Ux.err_info(r.err_info||""),reason_info:r==null?void 0:r.reason}),o.end(),this.cr.spanSetAttributes({key:j.Jv.event,par:this.va},{denied_info:j.Jv.denied_info(r.err_info),stop_reason:j.Jv.stop_reason("DenyStop")});var a=r.err_info?JSON.parse(r.err_info.toLowerCase()):{},l=a.action?a.action:null,d=1*r.reason,p=JSON.parse(JSON.stringify(Qn.Fn));p.message+=" reason:".concat(d," ").concat(l?" action:"+l:""," ").concat(a!=null&&a.err?" err:"+(a==null?void 0:a.err):""),p.message+=";".concat(Co(d,l,a==null?void 0:a.err)),a.err===1011&&(p=Qn.Gn),a.err===1014&&(p=Qn.Jn),a.err===1012&&(p=Ft.pn5),this.av&&clearTimeout(this.av);var u=!([4,8,10,11,12,14,18,24,26,27,28,32].includes(d)||[2,3,4,5,6].includes(l)),v=!1;if(!this.Bd){if([8,10].includes(d)||[18,15].includes(d)&&l===2&&[3001,3002].includes(a.err)){this.gn.udpFailNum++;var x=this.gn;x.autoSwitchProtocol&&x.udpFailNum>=x.maxUdpFailNum&&(this.Od=!1,this.gn.setIsPeer(!1),v=!0)}else this.gn.udpFailNum=0;var U=this.gn.isNodeLast(this).lastTryNext,te=[3001,3002,3003,3004,3005,3006,3007,3008].includes(a.err);U&&te&&(this.info(Ce.Q4K+" switch tcp by all fail"),this.pn.turnToTcp=!0,this.Ld=!1,this.Od=!1,this.gn.setIsPeer(!1))}this.publishStateUpdateError(p,u,a,v)},e.prototype.mv=function(t,n,r){if(this.info(Ce.de8+" received "),this.getSpan(j.$9.event,j.Jv.event).end(),n==this.Df){var o={code:Qn.Fn.code,message:"server session reset "+r.reason};this.av&&clearTimeout(this.av),this.publishStateUpdateError(o)}else this.error(Ce.de8+" cannot find session")},e.prototype.pv=function(t,n,r){var o;if(this.info("".concat(Ce.vBC," received, ").concat(t)),this.Tv("PublishEventPush",t)){var a=this.getSpan(j.fj.event,this.parentSpanKey,j.Jv.event);a.setAttributes({event_state:j.fj.event_state(r.event),webrtc_sid:n}),a.end(),this.qv&&(clearTimeout(this.qv),this.qv=null);var l=(o=this.Xl)===null||o===void 0?void 0:o.connectionState;this.sd=!0,(l?l==="connected":this.ed===fe.iceConnected)&&this.state!=6?r.event==0&&this.publishSuccess():this.resendStreamStatus(0)}},e.prototype.gv=function(t,n,r){if(this.Tv("ClientInfoPush",t)){this.pn.clientIP!==r&&this.info(Ce.VMq+" client ip changed "+this.pn.clientIP+" "+r),this.pn.clientIP=r,this.Id=n,this.Kd.peerId=this.Id,this.Dd=r,this.pn.isMultiOuter=this.isMultiOuter(),this.state===6&&this.getConnectIP(),this.xd.isSEIStart&&this.xd.SEIType==Re.UserUnregister&&this.xd.unregisterSeiFilter&&this.sendSEIUUID();var o=this.mn;if(o&&o.activateSEIConfig!==null){var a=o==null?void 0:o.activateSEIConfig;this.activateSEIInsert(a.action,a.infoType)}}},e.prototype.sendSEIUUID=function(){var t=this;this.info("zc.ssuid call: "+this.xd.unregisterSeiFilter),this.Kd.sendSEIUUID(this.xd.unregisterSeiFilter).then(function(n){t.info("zc.ssuid success"),(n==null?void 0:n.result)==0&&(t.xd.uuidSend=!0)}).catch(function(n){t.error("zc.ssuid failed")})},e.prototype.sendRestartIce=function(t,n){var r=this;this.info("zc.p.0.srsi call: "+t+" "+n),this.Kd.sendRestartIce(t,n).then(function(o){r.info("zc.p.0.srsi result "+JSON.stringify(o))}).catch(function(o){r.warn("zc.p.0.srsi fail: "+JSON.stringify(o))})},e.prototype.Lv=function(t){this.info(Ce.lWs+" state "+this.state+" connectionState "+t),this.publishStateUpdateError(Qn.Xn)},e.prototype.getStopReason=function(t){var n="StopPublish";if(t&&t.code)switch(t.code){case 1103051:n="ReachMaxAVRetryTime";break;case 1012:n="DuplicateStreamID";break;default:n="StopPublish"}return n},e.prototype.stopPublish=function(t){var n,r,o;this.info(Ce.aSL+" called "+this.state+" "+JSON.stringify(t));var a=this.getStopReason(t);if(this.gn.publishersLength==1){var l=this.gn.playerList;for(var d in l){var p=l[d];p.state==6&&p.broadcasterStatus==I.ku.start&&(p.sendBroadcasterStatus(0),p.broadcasterStatus=I.ku.stop)}}this.closeSession(0),this.resetPushCmdSeqMap();var u=Date.now();this.tv.setAttributes({publish_state_time:Rr.publish_state_time(u-this.reportPublishStateTime)}),this.uploadRTCPublishStats();var v=this.Xh?0:this.lastFailTimeLen;this.cr.spanEnd({key:j.Jv.event,par:this.va},{tryidx:ni.tryidx(this.rtcPublishCount),url:ni.url((n=this.Wd)===null||n===void 0?void 0:n.server),ip:ni.ip(this.ip),dispatch_external_ip:ni.dispatch_external_ip(this.pn.clientIP),resource_type:ni.resource_type("rtc"),protocol:ni.protocol("webrtc"),net_protocol:kr.net_protocol(this.netProtocol),stop_reason:j.Jv.stop_reason(a),try_time:ni.try_time(v),error:(t==null?void 0:t.code)||0,message:(t==null?void 0:t.message)||""}),this.Xh||this.cr.spanEnd({key:(this.isRePublish?j.fo:j.ch).event,par:this.va},{error:(t==null?void 0:t.code)||0,message:(t==null?void 0:t.message)||"",url:kr.url((r=this.Wd)===null||r===void 0?void 0:r.server),ip:kr.ip(this.ip),peer_id:kr.peer_id(this.Id),source_type:kr.source_type("rtc"),net_protocol:kr.net_protocol(this.netProtocol)});var x=0;t&&t.code!==0&&(x=t.code===Ft.xbZ.code?this.latestPublishErrCode:t.code);var U=this.publishedTimeStamp;this.tv.setAttributes({stream_id:Rr.stream_id(this.va),webrtc_sid:Rr.webrtc_sid(this.Df),probe_ip_cnt:Rr.probe_ip_cnt(this.Rd),valid_probe_ip_cnt:Rr.valid_probe_ip_cnt(this.Td),poor_quality_retry_cnt:Rr.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:Rr.probe_not_trigger_retry_info(this.Cd.length>0?this.Cd:void 0),bitrate:Rr.bitrate(1e3*this.Ka.bitRate),h:Rr.h(this.Ka.height),w:Rr.w(this.Ka.width),cap_w:Rr.w(this.Ka.width),cap_h:Rr.h(this.Ka.height),fps:Rr.h(this.Ka.frameRate),env:Rr.env(this.pn.testEnvironment?3:1),fail_cnt:Rr.fail_cnt(Math.max(this.rtcPublishCount-1,0)),continuous_fail_cnt:Rr.continuous_fail_cnt(Math.max(this.continuousFailCnt-1,0)),stop_reason:Rr.stop_reason(a),error:(t==null?void 0:t.code)||0,message:(t==null?void 0:t.message)||"",last_error:x,try_time:ni.try_time(v),valid_d:this.validPublishedTime+(U?u-U:0),total_d:u-this.firstPublishedTimeStamp,tempbroken_cnt:this.errorTimes,is_mini:this.$u}),(t==null?void 0:t.code)===Qn.ce.code&&this.uploadPublishEvent(t),this.tv.end(),this.gn.stopToReport(0),this.gn.stopNetProbe(this),this.retryFailGwNodes=[],this.resetPublish(0),this.hasSucceed=!1,this.isRePublish=!1,this.rtcPublishCount=0,this.ql=!1,this.Rd=0,this.Td=0,this.poorQualityRetryCnt=0,this.Cd=[],this.continuousFailCnt=0,(o=this.Qd)===null||o===void 0||o.resetPublish(),this.Zd.stop(),this._d=!1,this.seiWorker&&this.seiWorker.postMessage({cmd:"clear",type:"push",streamID:this.va})},e.prototype.uploadRTCPublishStats=function(){var t,n,r,o,a,l,d,p,u,v,x,U,te,le;this.lastPublishStats.time&&this.cr.spanSetAttributes({key:j.Jv.event,par:this.va},{lsttime:j.Jv.lsttime(parseInt(this.lastPublishStats.time)),total_stat:j.Jv.total_stat({afc:(t=this.lastPublishStats)===null||t===void 0?void 0:t.audioPacketsSent,vfc:(n=this.lastPublishStats)===null||n===void 0?void 0:n.framesSent,tfc:((r=this.lastPublishStats)===null||r===void 0?void 0:r.audioPacketsSent)+((o=this.lastPublishStats)===null||o===void 0?void 0:o.framesSent),vb:(a=this.lastPublishStats)===null||a===void 0?void 0:a.videoBytesSent,ab:(l=this.lastPublishStats)===null||l===void 0?void 0:l.audioBytesSent,tb:((d=this.lastPublishStats)===null||d===void 0?void 0:d.videoBytesSent)+((p=this.lastPublishStats)===null||p===void 0?void 0:p.audioBytesSent),rtp_rtt:Math.round(1e3*((u=this.publishStat)===null||u===void 0?void 0:u.currentRoundTripTime))||0,w:(v=this.publishStat)===null||v===void 0?void 0:v.frameWidth,rtp_plr:(x=this.publishStat)===null||x===void 0?void 0:x.videoPacketsLostRate,h:(U=this.publishStat)===null||U===void 0?void 0:U.frameHeight,rtp_bw:!((te=this.publishStat)===null||te===void 0)&&te.availableOutgoingBitrate?(le=this.publishStat)===null||le===void 0?void 0:le.availableOutgoingBitrate:void 0})})},e.prototype.onPublishStateUpdate=function(t,n,r,o,a,l){},e.prototype.onPublishQualityUpdate=function(t,n){},e.prototype.onDisconnect=function(t){this.info(Ce.Qld+" call"),this.info(Ce.Qld+" websocket disconnect"),this.publishStateUpdateError(t||j.Nr.error.Wn,!!t)},e.prototype.publishSuccess=function(){var t,n,r,o,a,l=this;if(this.info(Ce.La0+" call"),this.Bd||(this.gn.udpFailNum=0),this.isUpdateSDP&&this.Pv)return this.info(Ce.La0+" update sdp success"),this.Pv(0),this.Pv=void 0,void(this.isUpdateSDP=!1);var d=this.isRePublish?j.fo:j.ch,p=(t=this.gn.publisherList[this.va])===null||t===void 0?void 0:t.retryStreamHandler;for(var u in p==null||p.getTryTime(this,!0),this.reportMiniSdpInfos(),this.cr.spanEnd({key:d.event,par:this.va},{url:kr.url((n=this.Wd)===null||n===void 0?void 0:n.server),source_type:kr.source_type("rtc"),signal_consume:kr.signal_consume(this.signalTime),is_peer:kr.is_peer(this.Od)},!0,!1),this.state!=6&&this.onPublishStateUpdate(I.eZ.start,this.va,{code:0,message:""},!0),this.state=6,this.hasSucceed=!0,this.continuousFailCnt=0,this.resetIceInfos(),this.resetNat64Infos(),this.getConnectIP(),this.fv=setTimeout(function(){l.reportPublishStartEvent()},1e3),this.reportPublishStateTime=Date.now(),this.gn.playerList){var v=this.gn.playerList[u];v.state==6&&v.broadcasterStatus==I.ku.stop&&(v.sendBroadcasterStatus(1),v.broadcasterStatus=I.ku.start)}var x=this.au("probe_started_num");!isNaN(x)&&(this.gn.probeStartedNum=x),this.qualityHandler.setPublishQualityTimer();var U=this.au("auto_switch_publish_video_codec",!0);this.publishOption.enableAutoSwitchVideoCodec&&U&&(!((r=this.Dl)===null||r===void 0)&&r.offerToReceiveVideo)&&!this.sideMediaConfig.isSEIStart&&(this.rv=setTimeout(function(){return Ko(l,void 0,void 0,function(){var Ke,Ze;return Ro(this,function(et){switch(et.label){case 0:if(this.checkCodecSupport(!1))return[3,4];Ke=this.nd,Ze=this.nd==="H264"?"VP8":"H264",this.info("".concat(Ce.La0," switch video codec to ").concat(Ze)),et.label=1;case 1:return et.trys.push([1,3,,4]),[4,this.switchVideoCodec(Ke,Ze)];case 2:return et.sent()&&this.pn.actionListener("publisherVideoEncoderChanged",this.getCodecId(Ke),this.getCodecId(this.nd),this.streamId),[3,4];case 3:return et.sent(),this.warn("".concat(Ce.La0," switch video codec fail")),[3,4];case 4:return[2]}})})},this.Nl)),this.xd.track&&this.xd.isSEIStart&&this.nd==="H265"&&(this.sv=setTimeout(function(){return Ko(l,void 0,void 0,function(){var Ke,Ze=this;return Ro(this,function(et){switch(et.label){case 0:if(this.checkCodecSupport(!0))return[3,4];this._clearCanvasTimer(),this.Ml=320,this.xl=240,this.info("".concat(Ce.La0," fb sei trk res to ").concat(this.Ml," * ").concat(this.xl)),et.label=1;case 1:return et.trys.push([1,3,,4]),Ke=this.xd,[4,this._addCanvasStreamVideoTrack()];case 2:return Ke.track=et.sent(),this.getVideoSenders().forEach(function(ht){ht&&ht.replaceTrack(Ze.xd.track)}),[3,4];case 3:return et.sent(),this.warn("".concat(Ce.La0," fb sei trk fail")),[3,4];case 4:return[2]}})})},this.Pl));var te=2,le=2,se=(o=this.mn)===null||o===void 0?void 0:o.videoTrack,We=this.xu.getAudioTracks().length!==0&&this.xu.getAudioTracks()[0];this.xu&&this.xu.getTracks().forEach(function(Ke){wn(Ke,l.an,Ce.La0)}),se&&se.readyState==="live"&&se.enabled||!((a=this.mn)===null||a===void 0)&&a.muteImage?te=0:se&&!se.enabled&&(te=3),We&&We.readyState==="live"&&(le=We.enabled?0:3),this.sendStreamStatus(te,le,!0),this.gn.soundLevelDelegate&&this.mn&&this.mn.startSoundLevel(),this.pn.scenario===9&&this.setStreamAlignmentProperty(1).then(function(Ke){l.an.info("zc.ssap ktv. "+Ke)}),this.info(Ce.La0+" call success")},e.prototype.startSoundLevel=function(){var t;if(this.info(Ce.b9b+" call"),this.xu&&this.xu.getAudioTracks().length!=0)try{(t=this.mn)===null||t===void 0||t.startSoundLevel()}catch(n){this.error(Ce.b9b+" get sound level failed "+n)}else this.info(Ce.b9b+" local stream no found")},e.prototype.stopSoundLevel=function(){var t;this.info(Ce.d8C+" call"),(t=this.mn)===null||t===void 0||t.stopSoundLevel()},e.prototype.handleEncBitrate=function(t,n,r){var o=this,a=1e3*this.Ka.bitRate,l=0;if(n>0){this.hd||this.ld||(this.fd++,n>=.75*t?(this.fd>=10&&this.vd>=.6*this.fd&&(this.ld=!0,this.md=a),this.vd++):this.fd>=10&&this.vd/this.fd<.3&&(this.hd=!0));var d=Le(this.pd,n,10);this.hd&&(d>=1.05*a?this.md>a&&(this.md-=d>t?d-t:d-a,this.md=Math.max(this.md,a),this.md=Math.min(this.md,2*a),l=this.md):d<.8*a&&(this.md===0&&(this.md=t),this.md=this.md>=a?this.md+.08*a:1.05*this.md,this.md=Math.min(this.md,2*a),l=this.md))}if(r>0&&r<a){var p=Le(this.bd,r,5);this.hd?p+n>1.05*a&&(this.md-=p+n-a,this.md=Math.max(this.md,a-p),l=this.md):l=this.md-p}else this.md<a&&(this.md=a,l=this.md);if(l>0){l=Le(this.gd,l,5);var u=this.getVideoSenders();if(!u)return;var v=u.length>1?u[1]:u[0]?u[0]:null;if(!v)return;var x=v.getParameters();x.encodings||(x.encodings=[{}]),x.encodings[0].maxBitrate=l,v.setParameters(x).then(function(){o.info(Ce.Rfl+" success "+l)}).catch(function(U){o.error(Ce.Rfl+" "+U)})}},e.prototype.resetEncBitrate=function(){this.hd=!1,this.fd=0,this.ld=!1,this.vd=0,this.md=0,this.pd=[],this.gd=[],this.bd=[]},e.prototype.replacePublishedTrack=function(t,n,r){var o,a;return n===void 0&&(n=!1),r===void 0&&(r={}),Ko(this,void 0,void 0,function(){var l,d,p,u,v,x,U,te,le,se,We,Ke,Ze;return Ro(this,function(et){switch(et.label){case 0:return this.info("zc.rt.1 call ".concat(t.kind," ").concat(n," ").concat(JSON.stringify(r))),l=this.previewer,(u=(p=(d=t.kind)==="video")?l.videoTrack:l.audioTrack)||r.handleTrack?(v=0,x=0,p?(v=lu(n?u:t),x=this.mic_status):d==="audio"&&(x=lu(t),v=this.camera_status),[4,l.replacePreviewTrack(t,n,r)]):[3,13];case 1:return et.sent(),U=t,t.kind=="audio"&&l.insertableaudio&&(!((o=l.localStream)===null||o===void 0)&&o.getAudioTracks()[0])&&(U=(a=l.localStream)===null||a===void 0?void 0:a.getAudioTracks()[0]),te=d==="audio"&&l.destNode,le=!1,(!p||!n&&l.isVideoNodeQueueEnabled)&&(d!=="audio"||te)||(le=!0),We=p?this.lowVideoSender:void 0,(se=p?this.videoSender:this.audioSender)?le?(Ke=!this.isTcVideoPasued()&&l.isVideoEnabled,p&&Ke?We&&l.lowStream?[4,We.replaceTrack(l.lowStream.getVideoTracks()[0])]:[3,3]:[3,8]):[3,10]:[3,11];case 2:et.sent(),et.label=3;case 3:return l.streamFromCanvas?(l.streamFromCanvasTrack&&!l.zegoCaptureStream||(Ze=l.getStreamThroughCanvas(l.localStream),l.streamFromCanvasTrack=Ze.getVideoTracks()[0]),[4,se.replaceTrack(l.streamFromCanvas?l.streamFromCanvasTrack:U)]):[3,5];case 4:return et.sent(),[3,7];case 5:return[4,se.replaceTrack(U)];case 6:et.sent(),et.label=7;case 7:return[3,10];case 8:return p?[3,10]:l.isAudioEnabled?[4,se.replaceTrack(U)]:[3,10];case 9:et.sent(),et.label=10;case 10:return this.sendStreamStatus(v,x),[3,12];case 11:this.info("zc.rt.1 replace remote track will work after stream published"),et.label=12;case 12:return this.info("zc.rt.1 replace remote track success"),[2,{errorCode:0,extendedData:""}];case 13:return this.error("zc.rt.1 publisher track no found"),[2,{errorCode:Ft.fFX.code,extendedData:Ft.fFX.message}]}})})},e.prototype.sendStreamStatus=function(t,n,r,o){var a=this;r===void 0&&(r=!1),o===void 0&&(o=0),(r||this.camera_status!==t||this.mic_status!==n)&&this.Wd&&(this.camera_status=t,this.mic_status=n,this.Gd=!1,this.sd||this.zl?(this.zl&&(clearTimeout(this.zl),this.zl=null),o++,this.info(Ce.msE+" start send ".concat(o," camera:").concat(t," mic:").concat(n,".")),this.Fd=this.Kd.sendStreamStatus(t,n,function(l){a.Fd===l&&(a.Gd=!0)},function(){a.camera_status===t&&a.mic_status===n&&(a.warn(Ce.msE+" time out. ".concat(o)),o<=1&&a.sendStreamStatus(t,n,!0,o))})):this.zl=setTimeout(function(){a.resendStreamStatus(1)},3e3))},e.prototype.resendStreamStatus=function(t){var n,r,o;if(t===void 0&&(t=0),!this.Gd)if(this.info(Ce.msE+" resend ".concat(t)),t==0){var a=2,l=2,d=(n=this.mn)===null||n===void 0?void 0:n.videoTrack,p=this.xu.getAudioTracks().length!==0&&this.xu.getAudioTracks()[0];d&&(d.readyState==="live"||!((r=this.mn)===null||r===void 0)&&r.muteImage)&&(a=!((o=this.mn)===null||o===void 0)&&o.muteImage||d.enabled===!0?0:3),p&&p.readyState==="live"&&(l=p.enabled===!0?0:3),this.sendStreamStatus(a,l,!0)}else this.sendStreamStatus(this.camera_status,this.mic_status,!0)},e.prototype.handleSEIVideoTrack=function(t){t=="add"&&this.xd.track?this._clearCanvasTimer():t!="remove"||this.xd.track||(this.xd.track=this._addCanvasStreamVideoTrack()),this.seiWorker&&this.seiWorker.postMessage({cmd:"publishStreamType",streamID:this.va,onlyAudio:!!this.xd.track})},e.prototype._addCanvasStreamVideoTrack=function(){var t=this;this.Ml===16&&this.xl===16&&this.nd==="H265"&&(this.Ml=160,this.xl=160),this.Ql=(0,he.FP)(this.Ml,this.xl),this.Yl=this.Ql.getContext("2d"),this.Kl=new Image,this.Kl.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==";var n=this.pn.engineConfig.blankVideoTrackFrameInterval||100;return this.info("zc.acsvt frame interval: "+n),this.Vl=setInterval(function(){var r;(r=t.Yl)===null||r===void 0||r.drawImage(t.Kl,0,0,t.Ml,t.xl)},n),this.Ql.captureStream().getVideoTracks()[0]},e.prototype.getSpan=function(t,n,r,o){o===void 0&&(o=!1);var a=(0,he.fU)(this.cr,I.t0.H,this.va,t,n,r,o);return a.setAttribute("is_mini",this.$u),a},e.prototype.isMultiOuter=function(){return!(!this.pn.accessClientIp||!this.Dd||this.pn.accessClientIp===this.Dd)},e.prototype.isCustomCdn=function(){var t,n;return((t=this.$d)===null||t===void 0?void 0:t.cdnUrl)!==void 0&&((n=this.$d)===null||n===void 0?void 0:n.cdnUrl)!==""},e.prototype.setTurnTcp=function(){this.Bd=this.pn.turnToTcp,this.pn.turnOverTcpOnly!==void 0&&(this.Bd=this.pn.turnOverTcpOnly)},e.prototype.setStreamAlignmentProperty=function(t){return this.Md.alignment=t,this.Kd.sendStreamAlignmentProperty(t)},e.prototype.uploadPublishEvent=function(t){var n=this.va,r=t.code,o={};this.Jl&&(o.mini_retry_consume=+this.Jl.toFixed(0),this.Jl=0,this.Fl=0),this.cr.spanEnd({key:j.Og.event,par:n},mo(mo(mo({},o),{error:r}),t),!0)},e.prototype.getConnectIP=function(){if(this.Dd&&!this.ip){var t=Si(this.Dd),n=this.getIPByGwNode(t),r=n.ip,o=n.port;this.ip=r,this.port=o,this.info("zc.p.0.gci.0 ip: ".concat(r," ").concat(o)),this.reportPublishStartEvent()}},e.prototype.reportPublishStartEvent=function(){var t=this.isRePublish?j.fo:j.ch;this.cr.spanSetAttributes({key:t.event,par:this.va},{ip:kr.ip(this.ip),port:kr.port(this.port)}),this.cr.spanReport({key:t.event,par:this.va})},e.prototype.getIPByGwNode=function(t){var n;if(this.ipNode){var r=this.ipNode.vid.split("|"),o="";return r.forEach(function(d){var p=Si(d);t===p&&(o=d)}),{ip:o,port:this.ipNode.port}}if(this.gwNode){var a=(n=this.gwNode)===null||n===void 0?void 0:n.split(":"),l=a[a.length-1];return{ip:this.gwNode.replace(":"+l,""),port:parseInt(l)}}return{ip:"",port:0}},e.prototype.sendNetQualityGrade=function(t,n){this.Kd.sendNetQualityGrade(t,n)},e.prototype.closeSession=function(t){var n,r;(n=this.Wd)===null||n===void 0||n.off("uaConnected",this.ou.onUaSocketConnected),this.Wl&&(this.Kd.sendCloseSession(t,function(){}),(r=this.Wd)===null||r===void 0||r.removeSession(this.Df),this.Wl=!1)},e.prototype.activateSEIInsert=function(t,n){var r=this;return new he.l3(function(o,a){return r.Kd?(r.Kd.activateSEIInsert(t,n,function(l,d){var p=!1;d.result===0?(r.info(Ce.gPJ+" called success"),p=!0):d.result===1?(r.error(Ce.gPJ+" "+d.peer_id+" invalid param."),p=!1):d.result===2&&(r.error(Ce.gPJ+" peer not exist"),p=!1),o(p)},function(l){I.Xb===l&&r.error(Ce.gPJ+" request timeout")}),!1):o(!1)})},e.prototype.getStreamAddOptions=function(){return{stream_resource:1,stream_codec:this.nd==="VP8"?2:this.lowStream?4:0}},e.prototype.onStatsUpdated=function(t){this.Zd.onStatsUpdated(t)},e.prototype.getLocalMiniSdp=function(t,n){var r,o=this;if(this.$u){var a=performance.now();(r=this.Yd)===null||r===void 0||r.getMiniSdp(t).then(function(l){o.Ul=performance.now()-a,n(l)}).catch(function(l){o.$u=!1,o.pn.$u=!1,o.Ul=performance.now()-a,o.Jl=performance.now()-o.Fl,o.Ll=1,n()})}else n()},e.prototype.parseRemoteSdp=function(t,n,r){var o,a=this;if(this.$u&&(0,B.G0)(t.mini_sdp)&&t.mini_sdp.byteLength>0){var l=performance.now();(o=this.Yd)===null||o===void 0||o.parseMiniSdp(t.mini_sdp).then(function(d){a.Gl=performance.now()-l,n(d)}).catch(function(d){a.$u=!1,a.pn.$u=!1,a.Gl=performance.now()-l,a.Jl=performance.now()-a.Fl,a.Ll=3,r(d)})}else n(t.sdp)},e.prototype.reportMiniSdpInfos=function(){var t=this.isRePublish?j.fo:j.ch,n={};(this.$u||this.Ll)&&(n.mini_error=this.Ll,n.code_sdp_consume=+this.Ul.toFixed(0),n.decode_sdp_consume=+this.Gl.toFixed(0),this.Ll=0,this.Ul=0,this.Gl=0),this.cr.spanSetAttributes({key:t.event,par:this.va},mo({},n))},e.prototype.onTcPauseVideo=function(){var t=this;if(this._d=!0,this.peerConnection&&this.camera_status===0){var n="",r=this.getVideoSenders();r==null||r.forEach(function(a){return Ko(t,void 0,void 0,function(){var l,d,p;return Ro(this,function(u){return l=a===this.lowVideoSender,a.track&&(l?l&&(n+=" low:",n+=a.track.id,(d=(p=this.lowStream)===null||p===void 0?void 0:p.getVideoTracks()[0].clone())&&(d.stop(),a.replaceTrack(d),this.kd=d.id)):(n+=" big:",n+=a.track.id,(d=this.localStream.getVideoTracks()[0].clone()).stop(),a.replaceTrack(d),this.Ed=d.id)),[2]})})});var o=this.Zd.getFeedback();this.info("".concat(Ce.BsE," pause video, tid: ").concat(n,", tc:{").concat(o.status,"|").concat(o.bandwide,"|").concat(o.targetBitrate,"|").concat(o.rtt,"}"))}else this.warn("".concat(Ce.BsE," pause video, camera: ").concat(this.camera_status,", bw: ").concat(this.Zd.getBandwide()))},e.prototype.onTcResumeVideo=function(){var t=this;if(this._d=!1,this.peerConnection&&this.camera_status===0){var n="",r=this.getVideoSenders();r==null||r.forEach(function(a){return Ko(t,void 0,void 0,function(){var l,d,p,u;return Ro(this,function(v){return l=a===this.lowVideoSender,d=this.mn.isVideoEnabled&&!this.mn.hasStopCaptureVideo,a.track&&d&&(l?l&&(p=void 0,(p=this.Sd?this.xu.getVideoTracks()[0].clone():this.mn.streamFromCanvasTrack?this.mn.streamFromCanvasTrack:(u=this.lowStream)===null||u===void 0?void 0:u.getVideoTracks()[0])&&(a.replaceTrack(p),n+=" low:",n+=p==null?void 0:p.id)):(p=void 0,this.Sd?p=this.xu.getVideoTracks()[0]:(p=this.mn.getDestinationTrack())||(p=this.mn.streamFromCanvasTrack?this.mn.streamFromCanvasTrack:this.xu.getVideoTracks()[0]),p&&(a.replaceTrack(p),n+=" big:",n+=p.id))),[2]})})}),this.kd="",this.Ed="";var o=this.Zd.getFeedback();this.info("".concat(Ce.BsE," resume video, tid: ").concat(n,", tc:{").concat(o.status,"|").concat(o.bandwide,"|").concat(o.targetBitrate,"|").concat(o.rtt,"}"))}else this.warn("".concat(Ce.BsE," resume video, bw: ").concat(this.Zd.getBandwide()))},e.prototype.isVideoTrackAlive=function(){var t=this.mn._videoTrack,n=!(!t||t.readyState!=="live"||!t.enabled);return this.info("zc.p.0.ivta ".concat(n)),n},e.prototype.isAudioTrackAlive=function(){var t=this.xu.getAudioTracks().length!==0&&this.xu.getAudioTracks()[0],n=!(!t||t.readyState!=="live"||!t.enabled);return this.info("zc.p.0.iata ".concat(n)),n},e.prototype.getAvailableBitrate=function(){var t,n,r;return!((t=this.publishStat)===null||t===void 0)&&t.availableOutgoingBitrate&&(r=((n=this.publishStat)===null||n===void 0?void 0:n.availableOutgoingBitrate)/1e3),r},e})(Ql),Gc=function(){this.publisherList={},this.playerList={}},Fa=function(s,e,t,n,r){if(e.breakStartTime){var o=s-e.breakStartTime;o>=n&&(e.cumulativeBreakDuration+=o,r?e.cumulativeBreakDurationL3+=o:e.cumulativeBreakDurationRtc+=o,t.breakDuration+=o),e.breakStartTime=void 0}},Qd=function(s,e,t,n,r,o,a,l,d,p){d===void 0&&(d=l);var u=1e3;if(r>u&&(r=u),n.breakStartTime)if(t)e===0?(s-n.breakStartTime>=22e3&&Fa(s,n,a,r,p),o.breakDuration+=u):l>=r?l<500?l+d<u?(Fa(s-(u-d),n,a,r,p),n.breakStartTime=s-l,o.breakDuration+=d+l,o.decodeTime+=u-(d+l)):(Fa(s-u+d,n,a,r,p),n.breakStartTime=s-u+d,o.breakDuration+=u):l>=500&&(Fa(s-l,n,a,r,p),n.breakStartTime=s-l,o.breakDuration+=u):d<=r?(Fa(s-u+d,n,a,r,p),n.breakStartTime=void 0,o.breakDuration+=d,o.decodeTime+=u-d,a.decodeDuration+=u-d):o.breakDuration+=u;else{n.resumeRecv=!1;var v=s-u-n.breakStartTime;v<=0&&(v=0),n.breakStartTime=void 0,n.noBreakNoDecodeDuration+=v,p?n.noBreakNoDecodeDurationL3+=v:n.noBreakNoDecodeDurationRtc+=v,o.breakCancelDuration+=v,a.blankDuration+=v}else t?e===0?n.resumeRecv?(n.breakStartTime=s-u,o.breakDuration+=u):(n.noBreakNoDecodeDuration+=u,p?n.noBreakNoDecodeDurationL3+=u:n.noBreakNoDecodeDurationRtc+=u,a.blankDuration+=u):d>r?n.resumeRecv?(n.breakStartTime=s-d,n.cumulativeBreakDuration+=d,p?n.cumulativeBreakDurationL3+=d:n.cumulativeBreakDurationRtc+=d,o.breakDuration+=d,o.decodeTime+=u-d,a.breakDuration+=d,a.decodeDuration+=u-d):(n.noBreakNoDecodeDuration+=u,p?n.noBreakNoDecodeDurationL3+=u:n.noBreakNoDecodeDurationRtc+=u,a.blankDuration+=u):(o.decodeTime+=u,a.decodeDuration+=u):n.decodeStartTime&&(e===0?(n.resumeRecv=!1,n.noBreakNoDecodeDuration+=u,p?n.noBreakNoDecodeDurationL3+=u:n.noBreakNoDecodeDurationRtc+=u,a.blankDuration+=u):(o.decodeTime+=u,a.decodeDuration+=u));t&&e&&(n.resumeRecv=!0)},Ga=function(s,e,t,n,r,o,a){if(n=n>1e3?1e3:n,e.breakDuration=0,e.breakCancelDuration=0,e.decodeTime=0,t.decodeDuration=0,t.breakDuration=0,t.blankDuration=0,s.decodeStartTime){var l=o,d=l-s.decodeStartTime;if(s.decodeStartTime=void 0,s.totalDuration+=d,a?s.totalDurationL3+=d:s.totalDurationRtc+=d,s.breakStartTime){var p=l-s.breakStartTime;s.breakStartTime=void 0,r?p>n&&(s.cumulativeBreakDuration+=p,a?s.cumulativeBreakDurationL3+=p:s.cumulativeBreakDurationRtc+=p):(s.noBreakNoDecodeDuration+=p,a?s.noBreakNoDecodeDurationL3+=p:s.noBreakNoDecodeDurationRtc+=p)}var u=s.cumulativeBreakDuration,v=s.totalDurationL3,x=s.cumulativeBreakDurationL3,U=s.noBreakNoDecodeDurationL3,te=s.totalDurationRtc,le=s.cumulativeBreakDurationRtc,se=s.noBreakNoDecodeDurationRtc,We=s.totalDuration-s.cumulativeBreakDuration-s.noBreakNoDecodeDuration;return s.cumulativeDecodeDuration=We,s.cumulativeDecodeDurationL3=v-x-U,s.cumulativeDecodeDurationRtc=te-le-se,{cumulativeBreakDuration:u,cumulativeDecodeDuration:We}}return{cumulativeBreakDuration:0,cumulativeDecodeDuration:0}},Fi=function(){return Fi=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Fi.apply(this,arguments)},Qc=(function(){function s(e,t,n,r,o,a){this.tf=e,this.if=t,this.Bv=n,this.an=r,this.dataReport=o,this.pn=a,this.playQualityList=[],this.ef=null,this.sf=null,this.uf=null,this.Uv={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,audioPacketsReceived:0,videoPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:0,lastTimestamp:0,videoElem:null,audioJitterBufferDelay:0,audioJitterBufferEmittedCount:0,videoJitterBufferDelay:0,videoJitterBufferEmittedCount:0,jitterBufferDelayMs:0},this.Wh={video:{videoBitrate:0,videoFPS:0,videoRenderFPS:-1,videoTransferFPS:0,frameHeight:0,frameWidth:0,muteState:"1",videoQuality:-1,googCodecName:"",videoPacketsLost:0,videoPacketsLostRate:0,videoFramesDecoded:0,videoFramesDropped:0,videoCumulativeDecodeTime:0,videoCumulativeBreakTime:0,videoCumulativeBreakRate:0},audio:{audioBitrate:0,audioCodec:"",muteState:"1",audioQuality:-1,audioFPS:0,audioJitter:0,audioLevel:0,audioPacketsLost:0,audioPacketsLostRate:0,audioSamplingRate:0,audioSendLevel:0,googCodecName:"",audioCumulativeDecodeTime:0,audioCumulativeBreakTime:0,audioCumulativeBreakRate:0},peerToPeerDelay:0,peerToPeerPacketLostRate:0},this.decodeStartTime=0,this.hf=0,this.probeState=Pe.probed,this._l=null,this.Gv=1e4,this.lf=0,this.playStat={},this.Hv=200,this.Vv=500,this.Qv={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0,cumulativeBreakDurationL3:0,cumulativeDecodeDurationL3:0,noBreakNoDecodeDurationL3:0,totalDurationL3:0,cumulativeBreakDurationRtc:0,cumulativeDecodeDurationRtc:0,noBreakNoDecodeDurationRtc:0,totalDurationRtc:0},this.Yv={breakStartTime:void 0,cumulativeBreakDuration:0,cumulativeDecodeDuration:0,decodeStartTime:void 0,decodeEndTime:void 0,totalDuration:0,noBreakNoDecodeDuration:0,resumeRecv:!0,cumulativeBreakDurationL3:0,cumulativeDecodeDurationL3:0,noBreakNoDecodeDurationL3:0,totalDurationL3:0,cumulativeBreakDurationRtc:0,cumulativeDecodeDurationRtc:0,noBreakNoDecodeDurationRtc:0,totalDurationRtc:0},this.Kv=0,this.Zv={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.Xv={breakDuration:0,breakCancelDuration:0,decodeTime:0},this.Wv={decodeDuration:0,breakDuration:0,blankDuration:0},this.$v={decodeDuration:0,breakDuration:0,blankDuration:0},this.tm={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0},this.im=void 0,this.nm="",this.ff=0,this.rm=0,this.rf=1e3,this.df="udp",this.vf={},this.mf="",this.pf="",this.sm=!1,this.om=!1,this.um=!1,this.bf=0,this._f=0,this.connectIPStack=-1,this.am=0,this.af=0,this.eo=0,this.hm=!0,this.onFindDecodeException=function(l){},this.fm=void 0,this.lm=!1,this.onRecvMediaData=function(){},this.p2pNetStats={p2pLostRate:0,p2pRTT:0},this.Wh.video.muteState=this.Bv.videoMuteState,this.Wh.audio.muteState=this.Bv.audioMuteState,this.wf=new Wh(this.pn,this.an,this.va,j.Nr.event)}return Object.defineProperty(s.prototype,"_playStream",{get:function(){return this.Bv.playStream},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gn",{get:function(){return this.pn.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"va",{get:function(){return this.Bv.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sessionId",{get:function(){return this.Bv.sessionId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"peerID",{get:function(){return this.Bv.peerID},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"audioMuted",{get:function(){if(!this.Bv.remoteStream||this.Bv.remoteStream.getAudioTracks().length<=0)return!0;var e=this.Bv.remoteStream.getAudioTracks()[0];return!(!e||!e.muted&&e.readyState!=="ended"&&e.enabled)||this.Bv.audioMuteState=="1"||!this.Bv.playMediaStatus.audio},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"videoMuted",{get:function(){if(!this.Bv.remoteStream||this.Bv.remoteStream.getVideoTracks().length<=0)return!0;var e=this.Bv.remoteStream.getVideoTracks()[0];return!(!e||!e.muted&&e.readyState!=="ended"&&e.enabled)||this.Bv.videoMuteState=="1"||!this.Bv.playMediaStatus.video},enumerable:!1,configurable:!0}),s.prototype.getPlayStats=function(e,t){var n,r=this;if(e!=null){var o,a,l=new Date().getTime();l-this.am+50>=3e3&&this.getP2PNetStats();var d=this.Bv.rtcViewer;d&&(o=d.ma,a=d.pa),o&&o.currentTime||(o=Xi(this._playStream,"video")||o),a&&a.currentTime||(a=Xi(this._playStream,"audio")||a||o);var p={sampleTimeWindow:this.if,audioPacketsLost:0,audioPacketsLostRate:0,audioBitrate:0,audioLevel:0,audioSendLevel:0,audioSamplingRate:0,audioCodec:"",audioQuality:0,audioFPS:0,videoQuality:0,videoPacketsLost:0,videoPacketsLostRate:0,videoBitrate:0,videoFPS:0,videoRenderFPS:-1,nackCount:0,pliCount:0,audioJitter:0,videoJitter:0,videoFramesDecoded:0,keyFramesDecoded:0,totalFreezesDuration:0,frameHeight:0,frameWidth:0,videoTransferFPS:0,videoFramesDropped:0,totalRoundTripTime:0,currentRoundTripTime:0,availableOutgoingBitrate:void 0,videoCodecName:void 0,audioCodecName:void 0,audioJitterBufferDelayMs:0,videoJitterBufferDelayMs:0,jitterBufferDelayMs:0,googBandwidthLimitedResolution:void 0,googCpuLimitedResolution:void 0,googAvailableSendBandwidth:void 0,codecImplementationName:void 0,qualityLimitationReason:void 0,audioMuteState:this.audioMuted?"1":"0",videoMuteState:this.videoMuted?"1":"0",soundLevel:this.Bv.soundLevel,muted:a?a.muted:void 0,videoPaused:o?o.paused:void 0,audioPaused:a?a.paused:void 0,videoReadyState:o?o.readyState:void 0,audioReadyState:a?a.readyState:void 0,videoEnded:o?o.ended:void 0,audioEnded:a?a.ended:void 0,volume:a?a.volume:void 0,sinkId:a?a.sinkId:void 0};this.Bv.ip&&(Wo(this.Bv.ip)?p.ipv6=this.Bv.ip:p.ipv4=uo(this.Bv.ip));var u=this.Uv.time,v=0,x=0,U=0,te=0,le=0,se=0,We=0,Ke=null,Ze=null;e.forEach(function(Ct){var sn=Ct.kind||Ct.mediaType;["ssrc","inbound-rtp"].includes(Ct.type)&&(sn=="video"||Ct.id.indexOf("VideoStream")>=0)&&(Ke=Ct),(Ct.type=="inbound-rtp"||Ct.type=="ssrc"&&Ct.bytesReceived!=null)&&(sn=="audio"||Ct.id.indexOf("AudioStream")>=0)&&(Ze=Ct)});var et=function(Ct,sn){return Ct>sn?Ct-sn:0};this.Kv||(this.Kv=l-1e3);var ht=this.Bv.playMode===I.ey.L3;if(Ke){var gt=Ke.totalInterFrameDelay,Et=Ke.framesDecoded,At=Ke.totalSquaredInterFrameDelay,Ot=et(Et,this.tm.framesDecode);this.tm.framesDecode=Et;var Bt=et(gt,this.tm.totalInterFrameDelay);this.tm.totalInterFrameDelay=gt;var Kt=et(At,this.tm.totalSquaredInterFrameDelay);this.tm.totalSquaredInterFrameDelay=At;var Ht=(Kt-Math.pow(Bt,2)/(Ot||1))/(Ot||1);Ht=Ht>0?Ht:-Ht;var Zt=parseInt((1e3/(Ot+1)).toString()),un=1e3*Math.sqrt(Ht),hn=Bt/(Ot||1)*1e3||Zt,pn=(hn=parseInt((hn>1e3?1e3:hn).toString()))+un;pn=parseInt((pn>1e3?1e3:pn).toString()),Ot>0&&this.Bv.cameraStatus===0&&!this.Qv.decodeStartTime&&(this.Qv.decodeStartTime=l-1e3),this.Qv.decodeStartTime&&!this.om&&Qd(l,Ot,this.Bv.cameraStatus===0&&this.Bv.playMediaStatus.video&&!this.sm&&!this.um,this.Qv,this.Vv,this.Zv,this.Wv,hn,pn,ht)}if(Ze){var Bn=Ze.totalSamplesReceived,mn=Ze.concealedSamples,vn=Ze.bytesReceived,cn=et(Bn,this.tm.totalSamplesReceived);this.tm.totalSamplesReceived=Bn;var nn=et(mn,this.tm.concealedSamples);this.tm.concealedSamples=mn;var gn=et(vn,this.tm.audioBytesReceived);this.tm.audioBytesReceived=vn;var yn=parseInt((1e3*(nn/(cn||1))).toString());gn>0&&this.Bv.micStatus===0&&!this.Yv.decodeStartTime&&(this.Yv.decodeStartTime=l-1e3),this.Yv.decodeStartTime&&Qd(l,gn,this.Bv.micStatus===0&&this.Bv.playMediaStatus.audio&&!this.sm&&!this.um,this.Yv,this.Hv,this.Xv,this.$v,yn,yn,ht)}var bn=[],i="",c=!1;if(e.forEach(function(Ct){Ct.type=="track"&&(c=!0)}),e.forEach(function(Ct){var sn=Ct.kind||Ct.mediaType;if((Ct.type=="inbound-rtp"||Ct.type=="ssrc"&&Ct.bytesReceived!=null)&&(sn=="audio"||Ct.id.indexOf("AudioStream")>=0)){var Kn="";if((Fr=e.get(Ct.codecId))&&Fr.mimeType&&(Kn=Fr.mimeType.split("/")[1]),r.pf!==Kn&&(r.pf=Kn),p.audioCodec=r.pf,u!=0&&(p.audioBitrate=8*(Ct.bytesReceived-r.Uv.audioBytesReceived)/(Ct.timestamp-u),(zr=Ct.packetsLost-r.Uv.audioPacketsLost)>0&&(x=zr/(zr+Ct.packetsReceived-r.Uv.audioPacketsReceived))),p.audioBitrate<0&&(p.audioBitrate=0),Ct.jitterBufferDelay){var Pr=Ct.jitterBufferDelay,Fn=Ct.jitterBufferEmittedCount;se=Math.floor((Pr-r.Uv.audioJitterBufferDelay)/(Fn-r.Uv.audioJitterBufferEmittedCount)*1e3),(se=isNaN(se)||se<0?0:se)>1e4&&r.Bv.info("".concat(Ce.bzn," audio jitterDelay ").concat(Pr," ").concat(r.Uv.audioJitterBufferDelay," ").concat(Fn," ").concat(r.Uv.audioJitterBufferEmittedCount)),r.Uv.audioJitterBufferDelay=Pr,r.Uv.audioJitterBufferEmittedCount=Fn,p.audioJitterBufferDelayMs=se}p.audioJitter=Ct.jitter,Ct.packetsLost>0&&(p.audioPacketsLost=Ct.packetsLost);var pr=Ct.packetsLost-r.Uv.audioPacketsLost;p.audioFPS=(Ct.packetsReceived-r.Uv.audioPacketsReceived)/(Ct.timestamp-u)*1e3,p.audioPacketsLostRate=pr>0?pr/(Ct.packetsReceived-r.Uv.audioPacketsReceived+pr):0,r.Uv.audioBytesReceived=Ct.bytesReceived,Ct.packetsLost>0&&(r.Uv.audioPacketsLost=Ct.packetsLost),r.Uv.audioPacketsReceived=Ct.packetsReceived,r.Uv.audioTime=Ct.timestamp,r.Uv.time=Ct.timestamp,r.Uv.audioBitrate=p.audioBitrate,te=Ct.jitter,c||r.aTrackStats(p,Ct)}else if((Ct.type=="inbound-rtp"||Ct.type=="ssrc"&&Ct.bytesReceived!=null)&&(sn=="video"||Ct.id.indexOf("VideoStream")>=0)){var zr;u!=0?(p.videoBitrate=8*(Ct.bytesReceived-r.Uv.videoBytesReceived)/(Ct.timestamp-u),p.videoFPS=1e3*(Ct.framesDecoded-r.Uv.framesDecoded)/(Ct.timestamp-u),(zr=Ct.packetsLost-r.Uv.videoPacketsLost)>0&&(U=zr/(zr+Ct.packetsReceived-r.Uv.videoPacketsReceived))):(0,B.Cs)(Ct.framesPerSecond)&&(p.videoFPS=Ct.framesPerSecond),p.videoBitrate<0&&(p.videoBitrate=0),p.videoFPS<0&&(p.videoFPS=0);var Fr,Es="";if((Fr=e.get(Ct.codecId))&&Fr.mimeType&&(Es=Fr.mimeType.split("/")[1]),r.mf!==Es){var Mu=r.gn.seiWorker;Mu&&Mu.postMessage({cmd:"updatePlayer",codec:Es,streamID:r.va}),r.mf=Es}p.videoCodecName=r.mf,Ct.jitterBufferDelay&&(Pr=Ct.jitterBufferDelay,Fn=Ct.jitterBufferEmittedCount,We=Math.floor((Pr-r.Uv.videoJitterBufferDelay)/(Fn-r.Uv.videoJitterBufferEmittedCount)*1e3),(We=isNaN(We)||We<0?0:We)>1e4&&r.Bv.info("".concat(Ce.bzn," video jitterDelay ").concat(Pr," ").concat(r.Uv.videoJitterBufferDelay," ").concat(Fn," ").concat(r.Uv.videoJitterBufferEmittedCount)),r.Uv.videoJitterBufferDelay=Pr,r.Uv.videoJitterBufferEmittedCount=Fn,p.videoJitterBufferDelayMs=We),p.videoRenderFPS=r.getVideoRenderFps(o),p.codecImplementationName=Ct.decoderImplementation,p.videoJitter=Ct.jitter,p.nackCount=Ct.nackCount,p.pliCount=Ct.pliCount,p.videoFramesDecoded=Ct.framesDecoded,p.keyFramesDecoded=Ct.keyFramesDecoded,p.totalFreezesDuration=Ct.totalFreezesDuration,Ct.packetsLost>0&&(p.videoPacketsLost=Ct.packetsLost),p.videoPacketsLostRate=(pr=Ct.packetsLost-r.Uv.videoPacketsLost)>0?pr/(Ct.packetsReceived-r.Uv.videoPacketsReceived+pr):0,r.Uv.videoBytesReceived=Ct.bytesReceived,r.Uv.framesDecoded=Ct.framesDecoded,Ct.packetsLost>0&&(r.Uv.videoPacketsLost=Ct.packetsLost),r.Uv.videoPacketsReceived=Ct.packetsReceived,r.Uv.videoTime=Ct.timestamp,r.Uv.time=Ct.timestamp,le=Ct.jitter,c||r.vTrackStats(p,Ct,u)}else if(Ct.type=="track"&&(sn=="video"||Ct.id.indexOf("video")>=0)||Ct.frameWidth)r.vTrackStats(p,Ct,u);else if(Ct.type=="track"&&(sn=="audio"||Ct.id.indexOf("audio")>=0))r.aTrackStats(p,Ct);else if(Ct.type!="candidate-pair"||!Ct.nominated||(0,or.gm)()&&!Ct.selected)Ct.type==="local-candidate"&&bn.push(Ct);else{Ct.totalRoundTripTime!=null&&(p.totalRoundTripTime=Ct.totalRoundTripTime),Ct.currentRoundTripTime!=null&&(p.currentRoundTripTime=Ct.currentRoundTripTime,v=1e3*p.currentRoundTripTime),Ct.availableOutgoingBitrate!==void 0&&(p.availableOutgoingBitrate=Ct.availableOutgoingBitrate),Ct.state==="succeeded"&&(i=Ct.localCandidateId);var sp=r.gn.lastChangeIpTime;if(sp&&r._f<sp&&Date.now()-sp<=15e3){var Rp=Ct.bytesReceived,xp=r.Uv.condidateBytesReceived;xp&&(Rp>xp?r.bf=0:r.bf++),r.bf>=5&&(r.bf=0,r._f=sp,r.onPlayingError(Ft.lgu)),r.Uv.condidateBytesReceived=Rp}else r.bf>0&&(r.bf=0)}}),i){var h=bn.find(function(Ct){return Ct.id==i});if(h){var y=void 0;if(h.relayProtocol!==void 0)y=h.relayProtocol;else if(h.protocol)y=h.protocol;else if(h.priority){var A=h.priority>>24;A!==void 0&&(y=Jo(A,this.pn.browser))}y!==void 0&&this.df!==y&&(this.Bv.info(Ce.R46+" protocol "+y),this.df=y);var z=!1,Me=h.candidateType,pt=h.networkType,kt=h.relayProtocol,zt=h.relatedAddress,tn=h.url,on=h.ip;if(on){var Qt=Si(on);Qt>=0&&Qt!==this.connectIPStack&&(this.an.info(Ce.kEs+" "+this.va+" ipStack "+ae[Qt]),this.connectIPStack=Qt)}z=this.Tf([{key:"candidateType",value:Me},{key:"networkType",value:pt}]),Me==="relay"&&(z=this.Tf([{key:"relayProtocol",value:kt},{key:"relatedAddress",value:zt},{key:"url",value:tn}])),z&&this.Bv.info(Ce.kEs+" upload candidate change "+JSON.stringify(this.vf))}}var Xt=0;Xt=se>0&&We>0?Math.max(se,We):se>0?se:We>0?We:0,p.jitterBufferDelayMs=this.Uv.jitterBufferDelayMs=Xt,U=isNaN(U)||U<0?0:U,le=isNaN(le)||le<0?0:le,x=isNaN(x)||x<0?0:x,te=isNaN(te)||te<0?0:te;var Ln=st(v,U,le),tr=st(v,x,te);p.audioQuality=u>0?Dt(tr):0,p.videoQuality=u>0?Dt(Ln):0,this.pn.networkState!==I.D2.offline&&((n=this.Bv.peerConnection)===null||n===void 0?void 0:n.connectionState)!=="disconnected"||(p.videoQuality=I.b3.Die,p.audioQuality=I.b3.Die);var br=Math.min(Ln,tr);if(this.hf=br,p.peerToPeerDelay=isNaN(this.p2pNetStats.p2pRTT)?0:parseInt((this.p2pNetStats.p2pRTT/2+this.Uv.jitterBufferDelayMs).toString()),p.peerToPeerPacketLostRate=this.p2pNetStats.p2pLostRate,this.playStat=p,this.updateCurrentQualityStats(p),!this.lm&&(p.videoBitrate>0||p.audioBitrate>0)&&(this.lm=!0,this.onRecvMediaData&&this.onRecvMediaData()),this.hm){var jt=p.videoFramesDropped,Mt=p.videoTransferFPS;p.videoBitrate>0&&p.videoFPS===0&&jt>0&&Mt>0&&Math.abs(jt-Mt)<=3?this.fm?performance.now()-this.fm>3e3&&(this.fm=void 0,this.hm=!1,this.onFindDecodeException&&this.onFindDecodeException(!0)):this.fm=performance.now():p.videoFPS>0&&(this.fm=void 0,this.hm=!1)}this.rf==this.tf?this.notifyPlayQuality():this.sf||l-this.af+50>=this.tf&&this.notifyPlayQuality(),this.rf==this.if?this.reportPlayQuality():this.uf||l-this.eo+50>=this.if&&this.reportPlayQuality(),this.Bv.onStatsUpdated(this.playStat)}},s.prototype.notifyPlayQuality=function(){this.af=Date.now(),this.Bv.onPlayQualityUpdate(this.va,this.Wh)},s.prototype.reportPlayQuality=function(){var e=Date.now();this.eo=e,this.checkProbe(e),this.uploadPlayQuality(this.playStat,e),this.wf.checkRemoteStats(this.playStat,this._playStream),this.gn.changeRxQuality(Dt(this.hf))},s.prototype.getVideoRenderFps=function(e){var t=-1;if(!e||!(e&&(e.getVideoPlaybackQuality||e.requestVideoFrameCallback||e.mozPaintedFrames!==void 0)))return-1;var n=this.Uv.videoElem,r=e.currentTime,o=e.getVideoPlaybackQuality();e.requestVideoFrameCallback&&!o.totalVideoFrames?n&&n==e||(this.Uv.videoElem=e,this.Uv.lastTimestamp=r,!n&&e.requestVideoFrameCallback(this.videoFramesRender.bind(this))):this.Uv.videoElem=null,n=this.Uv.videoElem;var a,l=Date.now(),d=this.Uv,p=d.renderTime;return a=this.pn.browser!="firefox"||o.totalVideoFrames||n||e.mozPaintedFrames===void 0?n?d.paintedFrames:o.totalVideoFrames-o.droppedVideoFrames:e.mozPaintedFrames,t=p!=0?1e3*(a-d.totalRenderFrames)/(l-p):a/o.creationTime,this.Uv.renderTime=l,this.Uv.totalRenderFrames=a,t},s.prototype.videoFramesRender=function(e,t){var n=this.Uv,r=n.videoElem;if(r&&r.requestVideoFrameCallback){var o=r.currentTime;n.lastTimestamp!=o&&(this.Uv.paintedFrames++,this.Uv.lastTimestamp=o),r.requestVideoFrameCallback(this.videoFramesRender.bind(this))}},s.prototype.vTrackStats=function(e,t,n){var r=t.frameWidth,o=t.framesReceived,a=t.framesDropped,l=t.timestamp;if(e.frameHeight=t.frameHeight,e.frameWidth=r,!e.frameHeight||!e.frameWidth){var d=this.Uv.videoElem||Xi(this.Bv.playStream);d&&(e.frameHeight=d.videoHeight||0,e.frameWidth=d.videoWidth||0)}this.Bv.cameraStatus!==0&&e.videoBitrate===0&&e.videoFPS===0&&(e.frameHeight=0,e.frameWidth=0);var p=e.frameWidth,u=e.frameHeight;if(n===0||this.Uv.frameHeight===u&&this.Uv.frameWidth===p)n===0&&(this.Uv.frameHeight=u,this.Uv.frameWidth=p,this.Bv.isProbe||(this.cr.spanAppendAttribute({key:this.Bv.playingEvent,par:this.va},"vinfo",{h:u,fft:Date.now(),w:p}),this.cr.spanAppendAttribute({key:j.oW.event,par:this.va},"vinfo",{h:u,fft:Date.now(),w:p})));else{if(!this.Bv.isProbe){var v=this.cr.createSpan(I.t0.H,{key:j.Nr.event,par:this.va},{key:""},j.Wg.event);v.setAttributes({webrtc_sid:j.Wg.webrtc_sid(this.sessionId),w:j.Wg.w(p),h:j.Wg.h(u)}),v.end(),this.cr.spanAppendAttribute({key:this.Bv.playingEvent,par:this.va},"vinfo",{h:u,fft:Date.now(),w:p}),this.cr.spanAppendAttribute({key:j.oW.event,par:this.va},"vinfo",{h:u,fft:Date.now(),w:p})}this.Uv.frameHeight=u,this.Uv.frameWidth=p}n!=0&&(isNaN(o)||isNaN(a)||(e.videoTransferFPS=1e3*(o-this.Uv.framesReceived)/(l-n),e.videoFramesDropped=a-this.Uv.framesDropped)),e.videoTransferFPS<0&&(e.videoTransferFPS=0),e.videoFramesDropped<0&&(e.videoFramesDropped=0),o&&(this.Uv.framesReceived=o),a&&(this.Uv.framesDropped=a)},s.prototype.aTrackStats=function(e,t){e.audioLevel=t.audioLevel||0,e.audioSendLevel=t.totalAudioEnergy,e.audioSamplingRate=t.totalSamplesDuration},s.prototype.updateCurrentQualityStats=function(e){var t=e.videoBitrate,n=e.videoFPS,r=e.videoTransferFPS,o=e.frameHeight,a=e.frameWidth,l=e.videoMuteState,d=e.videoQuality,p=e.videoFramesDecoded,u=e.videoFramesDropped,v=e.videoPacketsLost,x=e.videoPacketsLostRate,U=e.audioBitrate,te=e.audioCodec,le=e.audioMuteState,se=e.audioQuality,We=e.audioFPS,Ke=e.audioJitter,Ze=e.audioLevel,et=e.audioPacketsLost,ht=e.audioPacketsLostRate,gt=e.audioSamplingRate,Et=e.audioSendLevel,At=e.nackCount,Ot=e.pliCount,Bt=e.totalRoundTripTime,Kt=e.currentRoundTripTime,Ht=e.peerToPeerDelay,Zt=e.peerToPeerPacketLostRate,un=e.sampleTimeWindow,hn=e.videoRenderFPS,pn={video:Fi(Fi({},this.Wh.video),{videoBitrate:t,videoFPS:n,videoTransferFPS:r,frameHeight:o,frameWidth:a,videoQuality:d,videoFramesDecoded:p,videoFramesDropped:u,videoPacketsLost:v,videoPacketsLostRate:x,muteState:l,videoCumulativeDecodeTime:this.Wv.decodeDuration,videoCumulativeBreakTime:this.Wv.breakDuration,videoCumulativeBreakRate:this.Wv.breakDuration/(this.Wv.decodeDuration+this.Wv.breakDuration||1),videoRenderFPS:hn}),audio:Fi(Fi({},this.Wh.audio),{audioBitrate:U,audioCodec:te,audioQuality:se,audioFPS:We,audioJitter:Ke,audioLevel:Ze,audioPacketsLost:et,audioPacketsLostRate:ht,audioSamplingRate:gt,audioSendLevel:Et,muteState:le,audioCumulativeDecodeTime:this.$v.decodeDuration,audioCumulativeBreakTime:this.$v.breakDuration,audioCumulativeBreakRate:this.$v.breakDuration/(this.$v.decodeDuration+this.$v.breakDuration||1)}),nackCount:At,pliCount:Ot,totalRoundTripTime:Bt,currentRoundTripTime:Kt,peerToPeerDelay:Ht,peerToPeerPacketLostRate:(Zt||0)/255,sampleTimeWindow:un};e.codecImplementationName!==void 0&&(pn.codecImplementationName=e.codecImplementationName),e.videoCodecName!==void 0&&(pn.video.googCodecName=e.videoCodecName),e.audioCodec!==""&&(pn.audio.googCodecName=e.audioCodec),this.Wh=pn},s.prototype.simplifyPlayDataKey=function(e){var t={};t.aPktLost=e.audioPacketsLost,t.aPlr=e.audioPacketsLostRate,t.aBitrate=Math.trunc(e.audioBitrate),t.aLevel=Math.trunc(1e5*e.audioLevel)/1e5,t.aTotalEnergy=Math.trunc(1e5*e.audioSendLevel)/1e5,t.aSampleRate=Math.trunc(e.audioSamplingRate),t.aQuality=e.audioQuality,t.aFPS=Math.trunc(e.audioFPS),t.vQuality=e.videoQuality,t.vPktLost=e.videoPacketsLost,t.vPlr=e.videoPacketsLostRate,t.vBitrate=Math.trunc(e.videoBitrate),t.vFPS=Math.trunc(e.videoFPS),t.nackCnt=e.nackCount,t.vPliCnt=e.pliCount,t.vFramesDec=e.videoFramesDecoded,t.vHeight=e.frameHeight,t.vWidth=e.frameWidth,t.vRcvFPS=Math.trunc(e.videoTransferFPS),t.vFrameDrop=e.videoFramesDropped,t.keyFrameDec=e.keyFramesDecoded,t.vTotalFreezeDur=e.totalFreezesDuration,t.rtt=e.currentRoundTripTime,t.vCodec=e.videoCodecName,t.aMuteStat=e.audioMuteState,t.vMuteStat=e.videoMuteState,t.soundLV=e.soundLevel,t.muted=e.muted,t.aPaused=e.audioPaused,t.vPaused=e.videoPaused,t.vRdyState=e.videoReadyState,t.aRdyState=e.audioReadyState,t.volume=e.volume,t.sinkId=e.sinkId,t.p2pDelay=e.peerToPeerDelay,t.p2pPlr=e.peerToPeerPacketLostRate,t.vBrkDur=e.video_break_duration,t.vBrkCancelDur=e.video_break_cancel_duration,t.vDecTime=e.video_decode_time,t.aBrkDur=e.audio_break_duration,t.aBrkCancelDur=e.audio_break_cancel_duration,t.aDecTime=e.audio_decode_time,t.aJtrBufDlyMs=e.audioJitterBufferDelayMs,t.vJtrBufDlyMs=e.videoJitterBufferDelayMs,t.aEnd=e.audioEnded,t.vEnd=e.videoEnded,t.vRenderFps=e.videoRenderFPS;var n=this._playStream?Yt(this._playStream):void 0;return n!==void 0&&this.nm!==n&&(this.nm=n,t.stmTracks=n),t},s.prototype.uploadPlayQuality=function(e,t){var n=t;if(this.lf==0||n-this.lf>=2e3){e.stream_type="play",e.stream_id=this.va,e.timeStamp=n,e.video_break_duration=this.Zv.breakDuration,e.video_break_cancel_duration=this.Zv.breakCancelDuration,e.video_decode_time=this.Zv.decodeTime,this.Zv.breakCancelDuration=0,this.Zv.breakDuration=0,this.Zv.decodeTime=0,e.audio_break_duration=this.Xv.breakDuration,e.audio_break_cancel_duration=this.Xv.breakCancelDuration,e.audio_decode_time=this.Xv.decodeTime,this.Xv.breakCancelDuration=0,this.Xv.breakDuration=0,this.Xv.decodeTime=0,e.real_sampling_interval=n-this.Kv;var r=this.simplifyPlayDataKey(e);this.im!==void 0&&(r.gw_aTxKbps=this.im.audioTXBitrate,r.gw_vTxkbps=this.im.videoTXBitrate,r.gw_vRedRate=this.im.videoRedRate,r.gw_TCStat=this.im.trafficControlStat,r.gw_TCBW=this.im.trafficControlStat),this.Kv=n,this.Bv.info(Ce.kEs+" upload"+JSON.stringify(r)),this.gn.updateQuality(tt.play_quality,e),this.lf=n}},s.prototype.getP2PNetStats=function(){var e=this;this.am=Date.now(),this.Bv.getP2PNetStats(function(t,n){var r=n.p2p_rtt;e.p2pNetStats.p2pLostRate=n.p2p_lost_rate||0,e.p2pNetStats.p2pRTT=r||0},function(t){})},s.prototype.setPlayQualityTimer=function(){var e=this;this.ef==null&&(this.Bv.info(Ce.R46+" called ".concat(this.rf," ").concat(this.tf," ").concat(this.if)),(this.ef||this.sf||this.uf)&&this.clearPlayQualityTimer(),this.getP2PNetStats(),this.ef=setInterval(function(){e.rm++;var t=e.Bv.peerConnection;if(t){var n=[t.getStats(null)];Promise.all(n).then(function(r){e.ef&&e.getPlayStats(r[0],r[1])}).catch(function(r){e.Bv.error(Ce.R46+" getStats error "+r.toString())})}},this.rf),this.af=this.eo=Date.now(),this.rf!==1e3&&(this.rf!=this.tf&&(this.sf=setInterval(function(){e.notifyPlayQuality()},this.tf)),this.rf!=this.if&&(this.uf=setInterval(function(){e.reportPlayQuality()},this.if))),this.Uv={audioPacketsLost:0,videoPacketsLost:0,time:Date.now(),audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesReceived:0,framesDropped:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:this.Uv.paintedFrames,lastTimestamp:0,videoElem:this.Uv.videoElem,audioJitterBufferDelay:0,audioJitterBufferEmittedCount:0,videoJitterBufferDelay:0,videoJitterBufferEmittedCount:0,jitterBufferDelayMs:0})},s.prototype.clearPlayQualityTimer=function(){if(this.Bv.info("zc.p.spqt.1.1 called ".concat(!!this.ef," ").concat(!!this.sf," ").concat(!!this.uf)),this.sf!=null&&(clearInterval(this.sf),this.sf=null),this.uf!=null&&(clearInterval(this.uf),this.uf=null),this.ef!=null){clearInterval(this.ef),this.ef=null;var e=new Date().getTime();this.Kv=0,this.rm=0,this.tm={totalSquaredInterFrameDelay:0,totalInterFrameDelay:0,framesDecode:0,totalSamplesReceived:0,concealedSamples:0,audioBytesReceived:0};var t=this.Bv.playMode===I.ey.L3;Ga(this.Qv,this.Zv,this.Wv,this.Vv,!this.um&&this.Bv.cameraStatus===0&&this.Bv.playMediaStatus.video,e,t),Ga(this.Yv,this.Xv,this.$v,this.Hv,!this.um&&this.Bv.micStatus===0&&this.Bv.playMediaStatus.audio,e,t)}this.ff=0,this.Uv={audioPacketsLost:0,videoPacketsLost:0,time:0,audioTime:0,videoTime:0,audioBytesReceived:0,videoBytesReceived:0,videoPacketsReceived:0,audioPacketsReceived:0,framesDecoded:0,framesDropped:0,framesReceived:0,audioBitrate:0,totalRenderFrames:0,renderTime:0,paintedFrames:0,lastTimestamp:0,videoElem:null,audioJitterBufferDelay:0,audioJitterBufferEmittedCount:0,videoJitterBufferDelay:0,videoJitterBufferEmittedCount:0,jitterBufferDelayMs:0},this.om=!1,this.um=!1},s.prototype.checkProbe=function(e){var t=this.hf,n=this.Uv.time;this.Bv.debug(Ce.R46+" netQuality "+t+" "+n),t<=this.gn.targetQuality?this.ff++:this.ff=0,n>0&&this.ff>=this.gn.probeStartedNum&&e>this.Bv.probeTime+this.gn.probeInterval&&(this.an.info(Ce.R46+" netQuality "+t+" start net probe"),this.probeState=Pe.tryProbe,this.Bv.poorQualityRetryCnt++,this.gn.startNetProbe(!1,this.Bv))},s.prototype.startProbeTimeout=function(){var e=this;this._l=setTimeout(function(){e.Bv.error(Ce.QU$+" probe timeout"),e.Bv.playStateUpdateError(j.Nr.error.Ae)},this.Gv)},s.prototype.stopProbeTimeout=function(){this._l&&(clearTimeout(this._l),this._l=null)},s.prototype.setStreamUpdate=function(e){e===0?this.sm=!0:e===1&&(this.sm=!1)},s.prototype.setPlayStreamEnd=function(e){this.um=e},s.prototype.setHasBFrames=function(e){this.om=e},s.prototype.updateGwPlayNetState=function(e){this.im=e},s.prototype.resetCallbackState=function(){this.lm=!1,this.hm=!0,this.hf=0},s.prototype.Tf=function(e){for(var t=!1,n=0;n<e.length;n++){var r=e[n],o=r.key,a=r.value;this.vf[o]!==a&&(this.vf[o]=a,t=!0)}return t},s.prototype.onPlayingError=function(e){},s})(),Eu=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$h=j.Nr.event,bs=j.v2,Tu=j.oW,El=j.Nr.error,Fo=j.Og.error,ha=j.Jv,Wd=j.er;(function(s){s[s.disconnected=0]="disconnected",s[s.connecting=1]="connecting",s[s.connected=2]="connected"})(Yo||(Yo={}));var ef=(function(s){function e(t,n,r,o,a){var l=s.call(this)||this;return l.streamID=t,l.an=n,l.pn=r,l.gn=o,l.isPublish=a,l.streamRetryStartTime=0,l.ya=Oi(l.an,l.streamID),l}return Eu(e,s),Object.defineProperty(e.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),e.prototype.startMaxTime=function(){var t=this;this.ya.info("zc.tsh.smt call"),this.maxTimer?this.ya.warn("zc.tsh.smt max timer"):(this.streamRetryStartTime===0&&(this.streamRetryStartTime=new Date().getTime()),this.maxTimer=setTimeout(function(){if(t.ya.warn("zc.tsh.smt over max time ".concat(t.RETRY_MAX_TIME,"s, stop retry")),t.isOverTime=!0,t.invalid(),t.isPublish){if(!t.gn.publisherList[t.streamID])return void t.ya.info("zc.tsh.smt publish no found");t.publishStateHandle(I.eZ.error,t.streamID,Fo.Un,!0)}else{var n=t.gn.playerList[t.streamID];if(!n)return void t.ya.info("zc.tsh.smt play no found");var r=El.Oe;t.pn.isFlutter&&n.isStreamNotFound&&(r=n.hasSucceed?Ft.LBO:Ft.T_8),t.playStateHandle(I.h7.error,t.streamID,r,!0)}},1e3*this.RETRY_MAX_TIME),this.ya.info("zc.tsh.smt maxTimer=".concat(this.maxTimer)))},e.prototype.active=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},e.prototype.stopMaxTime=function(){this.ya.info("zc.tsh.stmt streamID maxTimer="+this.maxTimer),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.onactive=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},e.prototype.retryNextSignal=function(){return this.pn.networkState==I.D2.offline?(this.ya.info("zc.tsh.rns offline"),Yo.disconnected):this.isPublish?(this.ya.info("zc.tsh.rns  publish ws state "+((t=this.gn.publisherList[this.streamID].publisher.signal)==null?void 0:t.state)+" "+t.mediaState),(t==null?void 0:t.state)==I.xb.connected&&(t==null?void 0:t.mediaState)===Ae.LOGIN?Yo.connected:(t==null?void 0:t.state)===I.xb.disconnected&&(t==null?void 0:t.mediaState)===Ae.LOGOUT?Yo.disconnected:Yo.connecting):(this.ya.info("zc.tsh.rns  play ws state "+((t=this.gn.playerList[this.streamID].signal)==null?void 0:t.state)+" "+(t==null?void 0:t.mediaState)),(t==null?void 0:t.state)==I.xb.connected&&(t==null?void 0:t.mediaState)===Ae.LOGIN?Yo.connected:(t==null?void 0:t.state)===I.xb.disconnected&&(t==null?void 0:t.mediaState)===Ae.LOGOUT?Yo.disconnected:Yo.connecting);var t},e.prototype.publishStateHandle=function(t,n,r,o,a,l){var d,p,u=this,v=o||this.RETRY_MAX_TIME<3;this.ya.info(Ce.FSV+" call "+(r?r.code+"":"")+" "+o+" "+JSON.stringify(a)+" "+l+" "+v);var x=this.gn.publisherList[n],U=x.publisher;if(v)return this.stopMaxTime(),this.invalid(),t===1&&U.resetPublish(1),r!=null&&r.code&&this.cr.spanSetAttributes({key:U.parentSpanKey,par:n},r),void this.gn.onPublishStateUpdate(t,n,r);if(r&&r.code!==0){this.maxTimer||v||this.startMaxTime(),this.pn.publishStreamList[n].state=I.T_.retryPublish;var te=U.localStream,le=U.publishOption;U.resetPublish(1);var se=this.retryNextSignal();if(this.ya.info(Ce.FSV+" server connect state "+Yo[se]),se===Yo.connected){this.ya.info(Ce.FSV+" retry current signal "),this.rtcPublishSpan(n,r,U),((d=x.publisher.signal)===null||d===void 0?void 0:d.state)===I.xb.connected&&(this.ya.info(Ce.FSV+" current node "+U.gwNode+" failed "+JSON.stringify(U.retryFailGwNodes)+" "+JSON.stringify(U.retryFailIpV4Nodes)+" "+JSON.stringify(U.retryFailIpV4Nodes)),this.setRetryFailNodes(U),U.getRetryIPNodeMode(),this.retryNewGwNode(U,r,a,l),U.gwNode?U.getRetryIPv6Prefer():U.getDispatchIPNodeMode()),this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null;var We=[Fo.xn.code,Fo.Xn.code,Ft.akb.code].includes(r.code)?0:1e3;return this.ya.info(Ce.FSV+" delay "+We),this.startRetryTimer=setTimeout(function(){u.ya.info(Ce.FSV+" retry publish "+U.state),U.state==7&&U.startPublish(n,te,le)},We),r&&r.code!==0&&this.gn.onPublishStateUpdate(2,n,r),void this.publishStartSpan(n,r,x,a)}if(se===Yo.disconnected){var Ke=(p=x.room)===null||p===void 0?void 0:p.roomID;this.retryServer(!0,Ke,x==null?void 0:x.room.token),U&&(U.isExternal=!1),this.rtcPublishSpan(n,r,U),this.gn.onPublishStateUpdate(2,n,r),this.publishStartSpan(n,r,x,a)}else this.ya.info(Ce.FSV+" server connecting")}this.ya.info(Ce.FSV+" end")},e.prototype.needReDispatchError=function(t){return[Fo.ue.code,El.ze.code].includes(t.code)},e.prototype.isSwitchIPStackError=function(t){return[Ft.akb.code,Ft.drM].includes(t.code)},e.prototype.playStateHandle=function(t,n,r,o,a,l){var d,p,u,v,x,U,te=this,le=o||this.RETRY_MAX_TIME<3;this.ya.info(Ce.M9m+" call "+(r?r.code+"":"")+" "+o+" "+JSON.stringify(a)+" "+l+" "+le);var se=this.gn.playerList[n];if(le)return this.stopMaxTime(),this.invalid(),r!=null&&r.code&&((d=se.$h)===null||d===void 0||d.setAttributes({error:r==null?void 0:r.code})),void this.gn.onPlayStateUpdate(t,n,r);if(r&&r.code!==0){!this.maxTimer&&this.startMaxTime(),se.resetPlay(!0,1);var We=this.endRtcPlaySpan(n,r,se),Ke=this.retryNextSignal();if(this.ya.info(Ce.M9m+" server connect state "+Yo[Ke]),Ke===Yo.connected){this.ya.info(Ce.M9m+" retry current signal "),se.isCenterNode&&((p=se.signal)===null||p===void 0?void 0:p.state)===I.xb.connected&&(this.ya.info(Ce.M9m+" current node "+se.gwNode+" "+JSON.stringify(se.retryFailGwNodes)+" "+JSON.stringify(se.retryFailIpV4Nodes)+" "+JSON.stringify(se.retryFailIpV6Nodes)),this.setRetryFailNodes(se.zegoPeer),(u=se.zegoPeer)===null||u===void 0||u.getRetryIPNodeMode(),this.retryNewGwNode(se,r,a,l),se.gwNode?(v=se.zegoPeer)===null||v===void 0||v.getRetryIPv6Prefer():(x=se.zegoPeer)===null||x===void 0||x.getDispatchIPNodeMode()),this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null;var Ze=j.Nr.error,et=[Ze.Se.code,Ze.Xn.code,Ft.drM.code].includes(r.code)?0:1e3;return this.ya.info(Ce.M9m+" delay "+et),this.startRetryTimer=setTimeout(function(){te.ya.info(Ce.M9m+" retry state "+se.state),se.state===7&&se.startPlay(n,se.getRemoteStreamSuc)},et),r&&r.code!==0&&this.gn.onPlayStateUpdate(2,n,r),We||se.dm||(se.dm=(0,he.fU)(this.cr,I.t0.I,n,se.playingEvent,j.Nr.event),this.endRtcPlaySpan(n,r,se)),void this.playStartSpan(n,se,void 0,r,a)}if(Ke===Yo.disconnected){var ht=(U=se.room)===null||U===void 0?void 0:U.roomID;this.retryServer(se.playMode===I.ey.RTC,ht,se==null?void 0:se.room.token),se&&(se.isExternal=!1),this.gn.onPlayStateUpdate(2,n,r),We||se.dm||(se.dm=(0,he.fU)(this.cr,I.t0.I,n,se.playingEvent,j.Nr.event),this.endRtcPlaySpan(n,r,se)),this.endRtcPlaySpan(n,r,se),this.playStartSpan(n,se,void 0,r,a)}else this.ya.info(Ce.M9m+" server connecting")}this.ya.info(Ce.M9m+" end")},e.prototype.retryServer=function(t,n,r){var o=t?va:Ja;this.gn.signalList[o]?this.gn.openConnectServerTask(o):this.gn.connectWebRTCCenterServer(!1,t,n,r)},e.prototype.setRetryFailNodes=function(t){if(t)if(t.ipNodeType===k.ZV4Only){var n=t.retryFailGwNodes.findIndex(function(x){return x===t.gwNode});n>=0&&t.retryFailGwNodes.splice(n,1),t.retryFailGwNodes.push(t.gwNode)}else{var r=t.ipV4NodeList,o=t.ipV6NodeList,a=t.retryFailIpV4Nodes,l=t.retryFailIpV6Nodes,d=t.gwNode,p=Ua(r,d),u=Ua(o,d);if(p>-1)(v=Ua(a,d))>=0&&a.splice(v,1),a.push(r[p]);else if(u>-1){var v;(v=Ua(l,d))>=0&&l.splice(v,1),l.push(o[u])}}},e.prototype.retryNewGwNode=function(t,n,r,o){var a,l,d,p,u,v,x=Ce.XO3;if(n&&n.code&&this.needReDispatchError(n))this.retryNextGwNode(t,!0,o);else if(n&&n.code&&this.isSwitchIPStackError(n))this.retryNextGwNode(t,!1,o);else if(n&&n.code&&[Ft.H6b.code].includes(n.code))x+=" try curr node ; ";else if(r!=null&&r.action)switch(r==null?void 0:r.action){case 1:case 5:break;case 2:default:this.retryNextGwNode(t,!1,o);break;case 3:this.ya.info(Ce.XO3+" redirect");var U=r==null?void 0:r.ins;if(U&&U.length>0){var te=(((a=U[0])===null||a===void 0?void 0:a.IP)||((l=U[0])===null||l===void 0?void 0:l.ip))+":"+(((d=U[0])===null||d===void 0?void 0:d.Port)||((p=U[0])===null||p===void 0?void 0:p.port)),le=((u=U[0])===null||u===void 0?void 0:u.ipv6)+":"+((v=U[0])===null||v===void 0?void 0:v.port);t.gwNode=te&&le?[k.ZV4Only,k.ZV4Priority].includes(t.ipNodeType)?te:le:te||le}break;case 4:t.resetGwNodes(),this.gn.clearCachedGwNodesList(t,this.isPublish)}else this.retryNextGwNode(t,!1,o);this.ya.info(x+=" new node "+t.gwNode)},e.prototype.retryNextGwNode=function(t,n,r){if(this.ya.info(Ce.SPm+" call "+t.gwNode),t.gwNode||!t.isNodesEmpty){var o=new Date().getTime(),a=t.gwNodesTTL<o,l=t.iceStateDisConnect&&this.pn.isMultiOuter,d=this.gn.isNodeLast(this.isPublish?t:t.zegoPeer),p=d.lastTryNext,u=d.currentIdx,v=t.hasSucceed;this.ya.info(Ce.SPm+" ttl: "+a+" ice: "+l+" last: "+p+" hasSucc: "+v),n||v&&a||t.isLastConnected&&l||p?(t.gwNode=this.gn.getGwNode(t,t.ipNodeType,u),this.dispatchGwNodesBypass(t)):t.gwNode=this.gn.getGwNode(t,t.ipNodeType,r?-1:u)}else this.ya.info(Ce.SPm+" call gwNodeList is empty")},e.prototype.dispatchGwNodesBypass=function(t,n,r){var o=this;n===void 0&&(n=function(){}),r===void 0&&(r=function(){});var a=this.gn.getStreamIPNodesMode().ipV6Prefer;t.dispatchGwNodes(a,function(l){o.ya.info(Ce.oLS+" suc "+JSON.stringify(l)),t.setGwNodes(l,!0,a),n()},function(l){o.ya.info(Ce.oLS+" fail "+JSON.stringify(l)),r()})},e.prototype.rtcPublishSpan=function(t,n,r){var o;r==null||r.uploadRTCPublishStats();var a=r!=null&&r.isLastConnected?0:this.getTryTime(r);this.cr.spanEnd({key:j.Jv.event,par:t},{tryidx:ha.tryidx(r==null?void 0:r.rtcPublishCount),url:ha.url((o=r==null?void 0:r.signal)===null||o===void 0?void 0:o.server),ip:ha.ip(r==null?void 0:r.ip),dispatch_external_ip:ha.dispatch_external_ip(this.pn.clientIP),resource_type:ha.resource_type("rtc"),protocol:ha.protocol("webrtc"),try_time:ha.try_time(a),error:n==null?void 0:n.code,message:n==null?void 0:n.message})},e.prototype.publishStartSpan=function(t,n,r,o){var a,l,d,p=r==null?void 0:r.publisher,u=p!=null&&p.hasSucceed?j.fo:j.ch,v=this.cr.createSpan(I.t0.H,{key:j.Og.event,par:t},{key:u.event,par:t},u.event,!0);(n==null?void 0:n.code)===Ft.jZ$.code?d={reason:"DenyInfoError",deny_code:o.err,deny_action:o==null?void 0:o.action}:(n==null?void 0:n.code)===Ft.PA0.code&&(d={reason:"NetworkBroken"}),d&&v.setAttributes(d),(p==null?void 0:p.isRePublish)===!1&&this.cr.spanSetAttributes({key:bs.event,par:t},{retry_btime:bs.retry_btime(new Date().getTime())}),p!=null&&p.hasSucceed&&(p.isRePublish=!0,p.parentSpanKey=j.fo.event),this.cr.createSpan(I.t0.I,{key:j.Og.event,par:t},{key:j.Jv.event,par:t},j.Jv.event,!0).setAttributes({room_id:ha.room_id((a=r==null?void 0:r.room)===null||a===void 0?void 0:a.roomID),room_sid_string:ha.room_sid_string((l=r==null?void 0:r.room)===null||l===void 0?void 0:l.roomSessionID)}),p&&(p.rtcPublishCount++,p.continuousFailCnt++)},e.prototype.endRtcPlaySpan=function(t,n,r){var o=r!=null&&r.isLastConnected?0:this.getTryTime(r);return!!(r!=null&&r.endPlayingSpan({stop_reason:JSON.stringify(n),try_time:Wd.try_time(o),error:n==null?void 0:n.code,message:n==null?void 0:n.message}))},e.prototype.playStartSpan=function(t,n,r,o,a){if(r===void 0&&(r=!1),!n.$h&&!n.isProbe){n.$h=(0,he.fU)(this.cr,I.t0.H,t,n.playStartEvent,$h,void 0,!0);var l=void 0;r?l={reason:"StartPlay"}:(o==null?void 0:o.code)===Ft.PA0.code?l={reason:"NetworkBroken"}:a&&(l={reason:"DenyInfoError",deny_code:a==null?void 0:a.err,deny_action:a==null?void 0:a.action}),l&&n.$h.setAttributes(l)}n.hasSucceed===!0&&this.cr.spanSetAttributes({key:Tu.event,par:t},{retry_btime:Tu.retry_btime(Date.now())}),r||n&&(n.tryidx++,n.continuousFailCnt++)},e.prototype.getTryTime=function(t,n){var r=void 0;return t&&this.streamRetryStartTime>0&&(r=new Date().getTime()-this.streamRetryStartTime,t.lastFailTimeLen=r=r>0?r:void 0,n&&(this.streamRetryStartTime=0)),r},e})(Ic),Zo=function(){return Zo=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Zo.apply(this,arguments)},ls=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},xo=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Io=j.Nr.event,ai=j.Nr.error,Tl=j.oW;function _c(s){var e=0,t=0;return e=s[t++]<<24,e|=s[t++]<<16,e|=s[t++]<<8,e|=s[t++]}function tf(s,e){e===void 0&&(e=0);for(var t=s.length,n=[],r=0;r<t;)r>=e&&t-r>=3&&!s[r]&&!s[r+1]&&s[r+2]==3?(n.push(s[r++]),n.push(s[r++]),r++):n.push(s[r++]);var o=new Uint8Array(n);return{output:o,outLength:o.length}}var js,Nf=(function(){function s(e,t,n,r,o,a,l,d,p,u){var v,x=this;this.Bv=e,this.vm=t,this.tv=a,this.gn=l,this.pn=d,this.room=p,this.pm=u,this.Ld=!0,this._state=7,this.lastState=7,this.ed=0,this.Hl=[],this.jd=0,this.Df=0,this.remoteStream=null,this.Xl=void 0,this.closeSessionSignal=!1,this.bm=!1,this._m=!1,this.mic=null,this.firstFrameTime=0,this.ipV6Prefer=0,this.ipNodeType=k.ZV4Priority,this.ipStackNode=ae.IPv4,this.Al=!0,this.Sl=!1,this.El=[],this.kl=[],this.Ol=[],this.Il="",this.Tl="",this.Cl=500,this.startTime=0,this.od="",this.ud=[],this.ad=0,this.ipNode=null,this.ipV4NodeList=[],this.ipV6NodeList=[],this.probeType="audio",this.Id=0,this.ym=0,this.wm=!1,this.Sm="",this.Em=0,this.zd=0,this.Dd="",this.retryFailGwNodes=[],this.retryFailIpV4Nodes=[],this.retryFailIpV6Nodes=[],this.signalTime=0,this.stopReason="",this.km=0,this.Om=0,this.qd=((v={}).StreamStatusNotifyPush={seq:-1,time:0},v.PlayEventPush={seq:-1,time:0},v.ClientInfoPush={seq:-1,time:0},v.NetQualityInfoPush={seq:-1,time:0},v),this.Ad=0,this.Im={Rm:!0,Tm:[],Cm:[]},this.onDataChannelList=[],this.xd={isSEIStart:!1,unregisterSeiFilter:"",filterSize:0},this.$u=!1,this.Ll=0,this.Ul=0,this.Gl=0,this.Jl=0,this.Fl=0,this.Ud={lanIP:"",wanIP:"",intranet:!1},this.Wl=!1,this.zm={first:!0,seq:0},this.Bd=!1,this.decodeVideoFrame=function(U,te){var le,se,We=x.Sm!=="VP8",Ke=x.Sm==="H265";if(We){var Ze=x.Dm;if(Ze){if(Ze.buffer)if(U.timestamp-Ze.time<20){var et=(function(y,A){if(y.byteLength!==A.byteLength)return!1;for(var z=0;z<y.byteLength;z++)if(y[z]!==A[z])return!1;return!0})(new Uint8Array(U.data),Ze.buffer);et&&(We=!1)}else Ze.buffer=void 0}else x.Dm={buffer:new Uint8Array(U.data).slice(0),time:U.timestamp}}if(We){for(var ht=new DataView(U.data),gt=0,Et=new Qh(ht,Ke),At=0,Ot=!1;Et.NextNalu(Ot);){if(Ke){if((At=(126&ht.getUint8(Et.nalu_start+Et.start_code_size))>>1)==32||At==33||At==34||At==35)continue;if(At!=39)break}else{if((At=31&ht.getUint8(Et.nalu_start+Et.start_code_size))==7||At==8||At==9)continue;if(At!=6)break}var Bt=new Uint8Array(U.data).slice(Et.nalu_start+Et.start_code_size,Et.nalu_start+Et.start_code_size+Et.nalu_size);x.pn.seiConfig.emulationPreventionByte&&(Bt=tf(Bt).output),gt=Ke?2:1,Ot=!0;for(var Kt=0;Bt[gt]===255;)Kt+=255,gt++;if((Kt+=Bt[gt++])===243||Kt===5||Kt===100){for(var Ht=0;Bt[gt]===255;)Ht+=255,gt++;if(Ht+=Bt[gt++],U.data.byteLength-gt<Ht)break;var Zt=new Uint8Array(4+Ht);switch(Zt[0]=0,Zt[1]=0,Kt){case 100:Zt[2]=3,Zt[3]=235;break;case 5:Zt[2]=3,Zt[3]=236;break;case 243:Zt[2]=3,Zt[3]=237}for(var un=0;un<Ht;un++)Zt[4+un-0]=Bt[gt++];var hn=!1;if(Kt===243)hn=!0;else if(Kt===5){var pn=x.xd.unregisterSeiFilter;if(pn){var Bn=Zt.slice(4,4+x.xd.filterSize),mn=void 0,vn=!0;if((mn=typeof pn=="string"?Ma(pn):pn).length===0)vn=!1;else for(var cn=0;cn<mn.length;cn++)if(mn[cn]!==Bn[cn]){vn=!1;break}hn=vn}else hn=!0}hn&&x.pn.actionListener("playerRecvSEI",x.va,Zt)}else if(Kt===244){for(Ht=0;Bt[gt]===255;)Ht+=255,gt++;if(Ht+=Bt[gt++],U.data.byteLength-gt<Ht)break;var nn=parseInt(Ht/5+""),gn=Bt.slice(gt,gt+=Ht),yn=[],bn=function(y){var A=5*y,z=gn.slice(A,A+4),Me=gn.slice(A+4,A+5),pt=_c(z),kt=Me[0],zt=((se=(le=x.room.streamList)===null||le===void 0?void 0:le.find(function(tn){return tn.stream_nid===pt}))===null||se===void 0?void 0:se.stream_id)||"";yn.push({soundLevelID:pt,value:kt,streamID:zt})};for(cn=0;cn<nn;cn++)bn(cn);var i=new Map(yn.map(function(y){return[y.soundLevelID,y.value]})),c=yn.filter(function(y){return y.streamID}).map(function(y){return[y.streamID,y.value]}),h=new Map(c);x.pn.actionListener("mixerSoundLevelUpdate",i,x.va),h.size&&x.pn.actionListener("autoMixerSoundLevelUpdate",h,x.va)}}te.enqueue(U)}else te.enqueue(U)},this.decodeAudioFrame=function(U,te){te.enqueue(U)},this.ou={seiMessage:function(U){var te=U.data,le=te.streamID;if(le===x.va)switch(te.cmd){case"recvSEI":x.pn.actionListener("playerRecvSEI",le,new Uint8Array(te.buffer));break;case"mixSoundLevel":x.onRecvMixSoundLevels&&x.onRecvMixSoundLevels(te.soundLevelList)}},onUaSocketConnected:function(){var U;x.an.info("zc.ply.ousc call. "+((U=x.Hd)===null||U===void 0?void 0:U.length)+" gwNode: "+x.od),x.Hd&&(x.od="",x.getDispatchIPNodeMode(),x.Vd.apply(x,x.Hd))}},this.onCanStopNegaTimer=function(){},this.onPlayStateUpdateError=function(){},this.onPlayBFrameEvent=function(U){},this.onPlayStreamEnd=function(U){},this.onGwPlayNetState=function(U){},this.Hd=void 0,this.an=Oi(r,this.va),this.Kd=new cs(r,!1,e.streamId),n&&this.setSignal(n),this.dataReport=o,this.$u=this.pn.isMiniSdp,this.$u&&(this.Yd=new Yh(l,r,this.va)),this.checkAutoTcp(),this.Nm(),this.jd=e.playStartTime}return Object.defineProperty(s.prototype,"signal",{get:function(){return this.Wd},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"autoTcp",{get:function(){return this.Ld},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"state",{get:function(){return this._state},set:function(e){this.lastState=this._state,this._state=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stateNego",{get:function(){return this.ed},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Pm",{get:function(){return this.Bv.playStartEvent},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isProbeByDG",{get:function(){return this.Bv.isProbeByDG},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamId",{get:function(){return this.va},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sessionId",{get:function(){return this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playStream",{get:function(){return this.Bv.playStream},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"peerConnection",{get:function(){return this.Xl},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"resourceMode",{get:function(){return this.Mm},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Xd",{get:function(){return this.gn.agentIpStackDetection.IPv4===G.reachable},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gwNode",{get:function(){return this.od},set:function(e){this.od=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gwNodeList",{get:function(){return this.ud},set:function(e){this.ud=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gwNodesTTL",{get:function(){return this.ad},set:function(e){this.ad=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNodesEmpty",{get:function(){return this.ipNodeType===k.ZV4Only?this.ud.length===0:this.ipNodeType===k.ZV4Priority?this.ipV4NodeList.length===0:(this.ipNodeType===k.ZV6Priority||this.ipV4NodeList.length===0)&&this.ipV6NodeList.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Od",{get:function(){return this.Bv.isPeer},set:function(e){this.Bv.isPeer=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isProbe",{get:function(){return this.Bv.isProbe},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"peerID",{get:function(){return this.Id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"needTranscode",{set:function(e){this.ym=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamConnectIP",{get:function(){return this.Dd},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playingEvent",{get:function(){return this.Bv.playingEvent},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamNotFoundTime",{get:function(){return this.km},set:function(e){this.km=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataChannel",{get:function(){return this.Pf},enumerable:!1,configurable:!0}),s.prototype.createSEIWorker=function(){return this.gn.createSEIWorker()},Object.defineProperty(s.prototype,"seiWorker",{get:function(){return this.gn.seiWorker},enumerable:!1,configurable:!0}),s.prototype.au=function(e,t){return t===void 0&&(t=!1),this.pn.settingConfig.getSetting(e,t)},Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"va",{get:function(){return this.Bv.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"xm",{get:function(){var e;return(e=this.pm)===null||e===void 0?void 0:e.streamParams},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playMode",{get:function(){return this.vm},enumerable:!1,configurable:!0}),s.prototype.Nm=function(){var e,t,n,r,o=(e=this.pm)===null||e===void 0?void 0:e.isSEIStart;if((0,B.dd)(o)&&(this.xd.isSEIStart=o),o){var a=qt(),l=(t=this.pm)===null||t===void 0?void 0:t.videoCodec;(l&&l!=="H264"&&l!=="H265"||!a)&&(this.an.warn(Ce.QU$+" not use sei; support: ".concat(a,", codec: ").concat(l," ")),this.xd.isSEIStart=!1)}if(!((n=this.pn.seiConfig)===null||n===void 0)&&n.unregisterSEIFilter){var d=this.xd.unregisterSeiFilter=(r=this.pn.seiConfig)===null||r===void 0?void 0:r.unregisterSEIFilter;this.xd.filterSize=Ma(d).byteLength}},s.prototype.setSignal=function(e){this.Wd!==e?(this.Wd=e,this.Kd.webrtcCenterServerSignal=e,this.Hd&&(this.an.info("zc.prc.ss signal register"),this.Wd.on("uaConnected",this.ou.onUaSocketConnected))):this.an.info("zc.prc.ss signal no changed")},s.prototype.connectGW=function(){return ls(this,void 0,void 0,function(){var e,t=this;return xo(this,function(n){return this.state=0,this.bm=!1,this.setTurnTcp(),this.$u&&!this.Fl&&(this.Fl=performance.now()),(e=this.au("udp_or_tcp",!0))&&(this.an.info(Ce.wQ8+" setting udp_or_tcp "+e),this.Bd=e==="tcp"),this.Bd&&(this.Od=!1,this.Ld=!1),[2,new he.l3(function(r,o){(t.Od?t.jm():t.qm()).catch(function(a){o(a)}),t.getRemoteStreamSuc=r})]})})},s.prototype.jm=function(){return ls(this,void 0,void 0,function(){var e,t,n,r,o,a;return xo(this,function(l){switch(l.label){case 0:return l.trys.push([0,5,,6]),[4,this.bv({encodedInsertableStreams:this.xd.isSEIStart})];case 1:return(e=l.sent())?(e=this.Dv(e),[4,this.Lm(e)]):[2];case 2:return(t=l.sent())?(this.wv(t.seq,t.sessionID,n=t.msg,t.ipv6Prefer),[4,this.parseRemoteMiniSdp(n)]):[2];case 3:if(r=l.sent(),this.Ld&&!this.Bm(r,n.params_ext))throw this.Um(Ft.drM,!1);return[4,he.l3.all([this.Gm(e),this.Jm(r,void 0,n==null?void 0:n.mini_sdp)])];case 4:return l.sent(),this.Ld&&this.Rv(n.params_ext),[3,6];case 5:if(!(o=l.sent()).playError)throw o;return this.onPlayStateUpdateError((a=o).error,a.stopRetry,a.detail,a.startFromFirst),[3,6];case 6:return[2]}})})},s.prototype.qm=function(){return ls(this,void 0,void 0,function(){var e,t,n,r,o,a,l,d,p;return xo(this,function(u){switch(u.label){case 0:return u.trys.push([0,7,,8]),[4,this.Lm(void 0)];case 1:return(e=u.sent())?(this.Sv(e.seq,e.sessionID,t=e.msg,e.ipv6Prefer),[4,this.Fm(t)]):[2];case 2:return n=u.sent(),[4,this.bv(n)];case 3:return(r=u.sent())?(r=this.Dv(r),[4,this.Gm(r)]):[2];case 4:return u.sent(),[4,this.Hm(r)];case 5:return o=u.sent(),l=o.miniSdp,(a=o.remoteSdp)?[4,this.Jm(a,!0,l)]:[2];case 6:return u.sent(),[3,8];case 7:if(!(d=u.sent()).playError)throw d;return this.onPlayStateUpdateError((p=d).error,p.stopRetry,p.detail,p.startFromFirst),[3,8];case 8:return[2]}})})},s.prototype.Fm=function(e){var t;return ls(this,void 0,void 0,function(){var n,r,o,a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt,Kt,Ht,Zt,un,hn,pn=this;return xo(this,function(Bn){switch(Bn.label){case 0:return this.an.info((n=Ce.HGP)+" success"),this.setTurnTcp(),this.gn.autoSwitchProtocol=this.au("auto_to_tcp")||!1,r=this.au("udp_max_fail_num"),!isNaN(r)&&(this.gn.maxUdpFailNum=r),l=(o=this.gn).maxUdpFailNum,d=o.udpFailNum,this.an.info(n+"  autoToTcp: ".concat(a=o.autoSwitchProtocol,", udpFailNum: ").concat(d,", maxUdpFailNum: ").concat(l,".")),a&&!this.Bd&&d>=l&&(this.an.info(n+" switch to tcp."),this.Bd=!0,this.Ld=!1),(p=this.au("udp_or_tcp",!0))&&(this.an.info(n+" setting udp_or_tcp "+p),this.Bd=p==="tcp"),u=[],v=void 0,x=this.Ud.wanIP=(e.gw_nodes[0]||this.od).split(":")[0],!this.gn.isProxy||this.gn.isLocalProxy?[3,2]:(U=lt==null?void 0:lt.proxyCtrl,[4,Promise.all([U.getTurnInfo(),U.intranetCheck(qi(x),void 0)])]);case 1:return te=Bn.sent(),se=te[1],(le=te[0]).code?this.an.warn(n+" use proxy failed."+JSON.stringify(le)):(Ke=(We=le.data).password,Ze=We.turn_ipv4,et=We.turn_port,ht=We.username,(gt=We.turn_internal_ipv4)&&(this.yv.coturn_internal=gt),Et=ho(Ze),At="turn:".concat(Et,":").concat(et,"?transport=").concat(this.Bd?"tcp":"udp"),this.an.info(n+" turn server: ".concat(At," ; intranet: ").concat(JSON.stringify((t=se==null?void 0:se.data)===null||t===void 0?void 0:t.intranet),"; turn internal ip: ").concat(ho(gt))),v=[{credential:Ke,urls:[At],username:ht}]),se.code?this.an.warn(n+" use intranetCheck failed."+JSON.stringify(se)):this.Ud.intranet=se.data.intranet||!1,[3,3];case 2:this.gn.isLocalProxy&&this.gn.turnServers?(v=(Bt=this.gn.turnServers).map(function(mn){return{credential:mn.credential,urls:[mn.url],username:mn.username}}),this.an.info(n+" use local proxy: "+JSON.stringify(Bt)),this.Ud.intranet=!1):e.turn_server&&(Ot=[],e.turn_server.split(";").forEach(function(mn){var vn=ws(mn).replace("[","").replace("]",""),cn=Si(vn);if(pn.ipStackNode===cn?Ot.push(mn):pn.El.push(mn),cn==ae.IPv4){var nn=Mc(vn),gn=mn.replace(vn,"[".concat(nn,"]"));pn.gn.isCandidateHasIPv6&&Ot.push(gn)}}),(hn=this.El).push.apply(hn,Ot),Bt=void 0,Kt=Ot.filter(function(mn){return mn.indexOf("udp")>-1}),Ht=Ot.filter(function(mn){return mn.indexOf("tcp")>-1}),Bt=this.Bd?Ht.length>0?Ht:Kt.map(function(mn){return mn.replace("udp","tcp")}):Kt,this.an.info(n+" over tcp "+JSON.stringify(Bt)),u.push.apply(u,Bt)),Bn.label=3;case 3:return e.stun_server&&u.push(e.stun_server),Zt={iceTransportPolicy:"all",iceServers:[{urls:u,username:e.turn_username,credential:e.turn_auth_key}],encodedInsertableStreams:this.xd.isSEIStart},this.Il=e.turn_username,this.Tl=e.turn_auth_key,v&&(Zt.iceServers=v,Zt.iceTransportPolicy="relay",Zt.rtcpMuxPolicy="require"),this.an.info(n+" username: "+(un=Zt.iceServers[0]).username+", credential: "+un.credential),this.dv(),this.an.info(n+" call success"),[2,Zt]}})})},s.prototype.Tv=function(e,t){var n=this.qd[e],r=n.seq,o=n.time,a=performance.now();return r!==-1&&r>=t&&a-o<6e3?(this.an.warn(Ce.CLV+" push ".concat(e,", seq ").concat(t," local ").concat(JSON.stringify(this.qd[e]))),!1):(this.qd[e]={seq:t,time:a},!0)},s.prototype.bv=function(e){return ls(this,void 0,void 0,function(){var t,n,r,o,a,l,d,p,u=this;return xo(this,function(v){switch(v.label){case 0:t=Ce.HGP,this.Xl=new RTCPeerConnection(e),this.Xl.onicecandidate=function(x){u.Vm(x)},this.Xl.onsignalingstatechange=function(x){u.Qm(x)},this.Xl.oniceconnectionstatechange=function(x){u.Ym(x)},this.Xl.onconnectionstatechange=function(x){u.Km(x)},this.Xl.ontrack=function(x){u.Zm(x.streams[0],x.receiver)},n=this.au("peer_signal_over_dc"),(this.gn.isDataChannelEnabled||n)&&(r={ordered:!1},this.an.info("zc.p.dc.n  option:"+JSON.stringify(r)+" enable: "+n),this.Ad=0,this.Pf=this.Xl.createDataChannel(this.va,r),this.Pf.binaryType="arraybuffer",n&&(this.Kd.dataChannel=this.Pf),this.Pf.onopen=function(x){u.an.info("zc.p.dc.o onopen")},this.Pf.onclose=function(x){u.an.warn("zc.p.dc.c onclose")},this.Pf.onmessage=function(x){if(u.Ad++<3&&u.an.info("zc.p.dc.m onmessage"),x.data instanceof Blob){var U=new FileReader,te={};U.readAsArrayBuffer(x.data),U.onload=function(){te.data=U.result,u.onReceivedDataChannel(te)}}else u.onReceivedDataChannel(x)}),this.pn.customUa&&(o=(0,B.JO)(this.Xl.addTransceiver),this.an.info(t+" custom ua ios "+o),o&&(this.Xl.addTransceiver("video",{direction:"recvonly"}),this.Xl.addTransceiver("audio",{direction:"recvonly"}))),this.Dl=a={offerToReceiveAudio:!0,offerToReceiveVideo:!0},this.isProbe?this.probeType==="audio"&&(a.offerToReceiveVideo=!1):(this.pm&&this.pm.video===!1&&(a.offerToReceiveVideo=!1),this.pm&&this.pm.audio===!1&&(a.offerToReceiveAudio=!1)),this.an.info(t+" createOffer: "+JSON.stringify(a)),l=this.getSpan(j.Jd.event,this.Pm),v.label=1;case 1:return v.trys.push([1,3,,4]),[4,this.Xl.createOffer(a)];case 2:return d=v.sent(),l&&(this.pn.ia(l,{sdp:d.sdp}),l.setAttributes({is_mini:j.Jd.is_mini(this.$u)}),l.end()),this.Xm(d.sdp||"")?[2,d]:(this.onNeedReplay&&this.onNeedReplay(),[2,void 0]);case 3:throw p=v.sent(),this.an.error(t+" create offer error "+p.toString()),l&&this.cr.setError(l,{code:ai.Vn.code,message:p.toString()}),this.Um(ai.Vn,!0);case 4:return[2]}})})},s.prototype.xv=function(e){return xr(e).length===0},s.prototype.restartIce=function(){var e,t=this,n=Ce.IRO;this.an.info("".concat(n," call")),(e=this.Xl)===null||e===void 0||e.createOffer(Zo(Zo({},this.Dl),{iceRestart:!0})).then(function(r){var o,a,l;if(t.an.info("".concat(n," createOffer suc")),r.sdp){t.Dv(r);var d=Di(r.sdp),p=Ei(r.sdp);t.an.info("".concat(n," ice ").concat(d," ").concat(p));var u={iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:t.El,username:t.Il,credential:t.Tl}],encodedInsertableStreams:t.xd.isSEIStart};t.an.info("".concat(n," set config ").concat(JSON.stringify(u))),(o=t.Xl)===null||o===void 0||o.setConfiguration(u),t.sendRestartIce(d,p),t.an.info("".concat(n," localSdp1 ").concat(r.sdp.substr(0,r.sdp.length/2))),t.an.info("".concat(n," localSdp2 ").concat(r.sdp.substr(r.sdp.length/2))),(a=t.Xl)===null||a===void 0||a.setLocalDescription(r).then(function(v){t.an.info("".concat(n," set local sdp suc"))}).catch(function(v){t.an.info("".concat(n," set local sdp fail ").concat(v.message?JSON.stringify(v.message):JSON.stringify(v)))}),(l=t.Xl)===null||l===void 0||l.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:t.nv})).then(function(v){t.an.info("".concat(n," set remote sdp suc"))}).catch(function(v){t.an.info("".concat(n," set remote sdp fail ").concat(v.message?JSON.stringify(v.message):JSON.stringify(v)))}),t.kl.forEach(function(v){var x;(x=t.Xl)===null||x===void 0||x.addIceCandidate(new RTCIceCandidate(v)).then(function(){t.an.info("".concat(n," ").concat(t.va,", add can suc"))}).catch(function(U){t.an.info("".concat(n," ").concat(t.va,", add can fail, ").concat(U.message))})})}}).catch(function(r){t.an.warn("zc.p.0.rsi err ".concat(r.message?JSON.stringify(r.message):JSON.stringify(r)))})},s.prototype.resetIceInfos=function(){this.an.info("zc.p.1.rii.0 call"),this.El=[],this.Il="",this.Tl="",this.kl=[]},s.prototype.resetNat64Infos=function(){this.an.info("zc.p.0.rni.0 call"),this.Ol=[]},s.prototype.Xm=function(e){return this.an.info(Ce.HGP+" is probe "+this.isProbe),!this.isProbe||!(this.probeType==="audio"&&!e.includes("m=audio"))||(this.an.warn(Ce.HGP+" no audio"),this.probeType="all",!1)},s.prototype.Lm=function(e){var t=this;return new he.l3(function(n,r){try{t.Vd(e,n,r)}catch(o){r(o)}})},s.prototype.Vd=function(e,t,n){var r,o,a,l,d=this,p=!!e;if(!this.Wd.isUaConnected)return this.an.info(Ce.QU$+" wait to create session"),this.Hd=[e,t,n],void this.Wd.on("uaConnected",this.ou.onUaSocketConnected);this.Hd&&(this.Hd=void 0),this.lv=(0,I.Mo)();var u=this.va;this.gn.testEnvironment==1&&(u="zegotest-"+this.gn.appid+"-"+this.va);var v="".concat(Ce.QU$," session req : "),x=this.getTransCodec(u),U=x.transCodecID,te=x.transCodecSuffix,le=x.transCodecStreamID;te&&(v+=" transcode: ".concat(U," , ").concat(u," , ").concat(te," ; "),this.pn.onExperimentalAPICallback({method:"playerStartTranscoding",content:{streamID:this.va,codecTemplateID:U,reason:this.ym}})),u=le,this.gn.gwNode&&(this.od=this.gn.gwNode);var se=this.au("gw_nodes");se&&(0,B.C9)(se)&&se.length>0&&(this.an.info(Ce.QU$+" setting "+JSON.stringify(se)),this.ud=se,this.od=this.ud[0]||this.od);var We=((o=(r=this.gn.publisherList[this.va])===null||r===void 0?void 0:r.room)===null||o===void 0?void 0:o.roomID)||((a=this.pn.roomList[0])===null||a===void 0?void 0:a.roomID);this.getIPStackNode(),this.an.info(v+" gwNode: ".concat(this.od,", ipNodeType: ").concat(this.ipNodeType,", ").concat(this.Od?"peer":"turn",", ipv6_prefer: ").concat(this.ipV6Prefer));var Ke=this._v(We),Ze=Ke.params,et=Ke.paramsExt;this.yv=et;var ht=j.Bc;if(p){var gt=function(Ot){var Bt=d.getSpan(j.Bc.event,d.Pm);Bt==null||Bt.setAttributes({server_host:d.od,ip_mode:d.ipV6Prefer,req_params_ext:et});var Kt=d.au("l3_play_buffer_ms"),Ht=new Date().getTime();d.Wl=!1;var Zt={};Ot?Zt.miniSdp=Ot:Zt.sdp=e.sdp,d.Kd.createSessionWithSdp(Zo(Zo({seq:d.lv,type:d.isProbe?2:1,mode:0,streamId:u,strAuthParam:d.xm||""},Zt),{serverHost:d.od,playBufLevel:d.vm===I.ey.L3?Kt:void 0,params:Ze,paramsExt:et,roomID:We,geo:{type:d.gn.geo.type,areaList:d.gn.geo.areaList},transCodecID:U,transCodecSuffix:te,ipV6Prefer:d.ipV6Prefer}),function(un,hn,pn){return ls(d,void 0,void 0,function(){var Bn;return xo(this,function(mn){return Bn=new Date().getTime(),this.an.info(Ce.QU$+" create session time "+(Bn-Ht)),du(pn),Bt&&(this.pn.ia(Bt,{sdp:pn.sdp}),Bt.setAttributes({webrtc_sid:hn,gw_nodes:ht.gw_nodes(pn.gw_nodes),ip_infos:pn.ips,ip_v6_infos:pn.ipv6s,gw_nodes_ttl:ht.gw_nodes(pn.gw_nodes_ttl),gw_version:ht.gw_version(pn.gw_version),ip_mode:this.ipV6Prefer,rsp_params_ext:pn.params_ext}),Bt.end()),this.ed!==5&&this.getSpan(j.F.event,this.Pm,"",!0),this.lv!=un?(this.an.error(Ce.GV2+" seq is not match."),t(void 0)):t({seq:un,sessionID:hn,msg:pn,ipv6Prefer:this.ipV6Prefer}),[2]})})},function(un,hn){if(d.lv==hn){un===Ft.OdW&&(d.$u=!1);var pn=un==I.Xb?ai.Yn:ai.Kn;Bt&&d.cr.setError(Bt,pn),d.an.warn(Ce.GV2+" create session fail. ".concat(un.code)),n(d.Um(pn))}else d.an.warn(Ce.GV2+" seq is not match.")})};if(this.$u){var Et=performance.now();(l=this.Yd)===null||l===void 0||l.getMiniSdp(e.sdp).then(function(Ot){d.Ul=performance.now()-Et,gt(Ot)}).catch(function(Ot){d.$u=!1,d.pn.$u=!1,d.Ul=performance.now()-Et,d.Jl=performance.now()-d.Fl,d.Ll=1,gt()})}else gt()}else{var At=this.getSpan(j.Bc.event,this.Pm);At==null||At.setAttributes({server_host:this.od,ip_mode:this.ipV6Prefer}),this.Wl=!1,this.Kd.createSession(this.lv,{type:1,mode:0,streamID:u,strAuthParam:this.xm||"",serverHost:this.od,params:Ze,roomID:We,geo:{type:this.gn.geo.type,areaList:this.gn.geo.areaList},transCodecID:U,transCodecSuffix:te,ipV6Prefer:this.ipV6Prefer},function(Ot,Bt,Kt){return ls(d,void 0,void 0,function(){return xo(this,function(Ht){return du(Kt),At&&(At.setAttributes({webrtc_sid:j.Bc.webrtc_sid(Bt),is_mini:ht.is_mini(this.$u),gw_nodes:ht.gw_nodes(Kt.gw_nodes),ip_infos:Kt.ips,ip_v6_infos:Kt.ipv6s,gw_nodes_ttl:ht.gw_nodes(Kt.gw_nodes_ttl),gw_version:ht.gw_version(Kt.gw_version),ip_mode:this.ipV6Prefer}),At.end()),this.lv!=Ot?(this.an.error(Ce.QU$+" seq is not match."),t(void 0)):t({seq:Ot,sessionID:Bt,msg:Kt,ipv6Prefer:this.ipV6Prefer}),[2]})})},function(Ot,Bt){if(d.lv==Bt){var Kt=Ot==I.Xb?ai.Yn:ai.Kn;At&&d.cr.setError(At,Kt),n&&n(d.Um(Kt))}else d.an.warn(Ce.QU$+" seq is not match.")})}this.state=1,this.an.info(Ce.QU$+" called success"),this.ed=1},s.prototype._v=function(e){var t="",n=[],r={},o=this.pn.seiConfig.SEIPass;(0,B.dd)(o)&&(r.sei_filter_pass=o?1:0),r.auto_switch_turn_type=this.pn.browser==="firefox"?2:1,this.vm===I.ey.L3&&(r.client_class_type=1,this.pm.adaptiveSwitch===!0&&this.pm.adaptiveTemplateIDList&&(r.adaptive_switch=1,r.adaptive_template_id_list=this.pm.adaptiveTemplateIDList.join(","))),(0,B.Cs)(this.pm.streamType)&&(r.video_stream_type=this.pm.streamType),(0,B.Cs)(this.pm.posterType)&&(r.req_poster_type=this.pm.posterType);var a=0,l=this.pm.jitterBufferTarget,d=this.pm.playoutDelayHint;return(0,B.Cs)(l)&&l>0&&l<=4e3?a=l:(0,B.Cs)(d)&&d>0&&d<=4&&(a=1e3*d),(0,B.dd)(this.pm.enableLowLatency)&&this.pm.enableLowLatency&&(a=2147483647),a>0&&(r.play_jitter_level=a),this.pn.idName&&n.push("zguid="+this.pn.idName),e&&n.push("zgrid="+e),this.gn.isProxy&&(r.zg_proxy=1),r.proto_flags=2,this.au("peer_signal_over_dc")&&(r.proto_flags|=256),n.length>0&&(t=n.join("&")),{params:t,paramsExt:r}},s.prototype.getDispatchIPNodeMode=function(){if(!this.od){this.an.info("zc.p.1.gdinm call");var e=this.gn.getStreamIPNodesMode(),t=e.ipNodeType;this.ipV6Prefer=e.ipV6Prefer,this.ipNodeType=t,this.ipV6Prefer===q.kV6AndV4&&!this.Al&&this.Xd&&(this.ipV6Prefer=q.kV4AndV6,this.ipNodeType=k.ZV4Priority),this.an.info("zc.p.1.gdinm ".concat(this.ipV6Prefer," ").concat(this.ipNodeType))}},s.prototype.getRetryIPNodeMode=function(){if(this.an.info("zc.p.1.grinm call"),this.ipV6Prefer===q.kV4Only)this.ipNodeType=k.ZV4Only;else{var e=this.gn.getRetryIPPreferNodeType(),t=e.ipV6Prefer;this.ipNodeType=e.ipNodeType,this.ipV6Prefer=t}this.an.info("zc.p.1.grinm ".concat(this.ipV6Prefer," ").concat(this.ipNodeType))},s.prototype.getRetryIPv6Prefer=function(){this.ipV6Prefer=this.gn.getIPv6PreferByGwNode(this.gwNode)},s.prototype.checkIfToRestart=function(e){this.Sl=!this.isProbe&&e!==q.kV4Only&&(this.ipNodeType===k.ZV6AndV4Priority||this.pn.selectIPStackMode===F.IPv4Prefer&&this.gn.agentIpStackDetection.IPv4===G.reachable&&this.ipNodeType===k.ZV6Priority)},s.prototype.getIPStackNode=function(){if(this.gwNode){var e=$r(this.gwNode);this.ipStackNode=Si(e)}else this.ipStackNode=[k.ZV4Only,k.ZV4Priority].includes(this.ipNodeType)?ae.IPv4:ae.IPv6},s.prototype.setGwNodes=function(e,t,n,r){var o,a,l;if(this.an.info("".concat(Ce.Eb9," seq: ").concat(r,", gw_nodes: ").concat(JSON.stringify(e==null?void 0:e.gw_nodes),", ips: ").concat(JSON.stringify(e.ips),", ipv6s: ").concat(JSON.stringify(e.ipv6s),", ").concat(n)),this.an.info("".concat(Ce.Eb9," seq: ").concat(r,", retry: ").concat(JSON.stringify(this.retryFailGwNodes),", ips: ").concat(JSON.stringify(this.retryFailIpV4Nodes),", ipv6s: ").concat(JSON.stringify(this.retryFailIpV6Nodes))),n===0){if(((o=e.gw_nodes)===null||o===void 0?void 0:o.length)>0){var d=pf(e.gw_nodes,this.retryFailGwNodes,t);this.retryFailGwNodes=[],this.handleDispatchedGwNodes(d,e.gw_nodes_ttl,n)}}else{var p=void 0,u=void 0;((a=e.ips)===null||a===void 0?void 0:a.length)>0&&(p=sl(e.ips,this.retryFailIpV4Nodes,t),this.retryFailIpV4Nodes=[]),((l=e==null?void 0:e.ipv6s)===null||l===void 0?void 0:l.length)>0&&(u=sl(e.ipv6s,this.retryFailIpV6Nodes,t),this.retryFailIpV6Nodes=[]),this.handleDispatchedGwNodes(e.gw_nodes||[],e.gw_nodes_ttl,n,p,u)}},s.prototype.resetGwNodes=function(){this.an.info(Ce.Lji+" call"),this.od="",this.ud=[],this.ipV4NodeList=[],this.ipV6NodeList=[],this.ad=0},s.prototype.handleDispatchedGwNodes=function(e,t,n,r,o){var a=this;if(r===void 0&&(r=[]),o===void 0&&(o=[]),this.an.info(Ce._2$+" "+JSON.stringify(e)+" "+JSON.stringify(e)+" "+JSON.stringify(r)+" "+JSON.stringify(o)+" ipv6Prefer "+n),Array.isArray(e)&&e.length!==0||r.length!==0||o.length!==0){var l=t===0?60:t,d=function(){a.ad=l?new Date().getTime()+1e3*l:a.ad};this.ud=e.length>0?e:this.ud,this.ipV4NodeList=r.length>0?r:this.ipV4NodeList,this.ipV6NodeList=o.length>0?o:this.ipV6NodeList,n===q.kV4Only?(this.od=e.length>0?this.ud[0]:this.od,e.length>0&&d()):n==q.kV4AndV6&&r.length>0?(this.od=Rs(r[0]),this.ipNode=r[0],d()):n===q.kV6AndV4&&o.length>0?(this.od=Rs(o[0]),this.ipNode=o[0],d()):(this.ud.length>0&&(this.od=this.ud[0]),this.an.info("".concat(Ce._2$," ").concat(this.va," no gwNode ").concat(n," ").concat(r.length," ").concat(o.length)),this.ipNodeType=k.ZV4Only,this.ipStackNode=ae.IPv4),this.gn.updateCachedGwNodesList(this.streamId,!1,e||[],l,r,o)}},s.prototype.Sv=function(e,t,n,r){var o,a,l,d=n.turn_server,p=d.split("?")[0]&&d.split("?")[0].slice(5),u=this.signal.Ev,v="webrtc://".concat(p,"/").concat(u,"/").concat(this.va);this.cr.spanSetAttributes({key:this.Pm,par:this.va},{webrtc_sid:n.session_id,url:v}),this.an.info(Ce.QU$+" sessionId:"+n.session_id),this.resetPushCmdSeqMap();var x=n.client_ip||n.clientip;x&&(this.pn.clientIP=x),this.Id=n.peer_id;var U=0,te=new Date().getTime();if(this.jd&&(this.an.info(Ce.GV2+" create signal time "+(U=te-this.jd)),this.signalTime=U),this.zd=te,n.result!==0){this.an.error(Ce.QU$+" create error "+n.result);var le=this.Um(ai.Kn);throw(n==null?void 0:n.result)===1021&&(le=this.Um(Ft.mHY,!0)),(n==null?void 0:n.result)===2013&&(le=this.Um(ai.Me,!0)),(n==null?void 0:n.result)===2016&&r===q.kV6AndV4&&(this.Al=!1),(n==null?void 0:n.result)===1006&&(le=this.Um(ai.xe,!0)),le}this.Df=n.session_id,this.Wl=!0,this.setGwNodes(n,!1,r,e),r===q.kV6AndV4&&((o=n==null?void 0:n.ipv6s)===null||o===void 0?void 0:o.length)>0&&(this.Al=!0),((a=n==null?void 0:n.ipv4s)===null||a===void 0?void 0:a.length)>0&&((l=n==null?void 0:n.ipv6s)===null||l===void 0?void 0:l.length)>0&&this.checkIfToRestart(r),this.an.info(Ce.QU$+" "+this.va+" isRestartIce "+this.Sl)},s.prototype.wv=function(e,t,n,r){var o,a,l;this.an.info(Ce.GV2+" sessionId:"+t),this.resetPushCmdSeqMap();var d=n.client_ip||n.clientip;d&&(this.pn.clientIP=d),this.Id=n.peer_id;var p=0,u=new Date().getTime();if(this.jd&&(this.an.info(Ce.GV2+" create signal time "+(p=u-this.jd)),this.signalTime=p),this.zd=u,n.result!==0){if(n.result===110&&(this.$u=!1,this.pn.$u=!1,this.Jl=performance.now()-this.Fl,this.Ll=2),this.an.error(Ce.GV2+" create session failed "+n.result),(n==null?void 0:n.result)===1021)throw this.Um(Ft.mHY,!0);var v=ai.Kn;throw(n==null?void 0:n.result)===1004&&(v=Zo(Zo({},this.pn.isFlutter?Ft.T_8:ai.ke),{message:"Stream not found."}),this.Wm())?this.Um(v,!0):(n==null?void 0:n.result)===2013?this.Um(v=ai.Me,!0):((n==null?void 0:n.result)===2016&&r===q.kV6AndV4&&(this.Al=!1),(n==null?void 0:n.result)===1006?this.Um(ai.xe,!0):this.Um(v))}this.Df=t,this.Wl=!0,this.an.info(Ce.GV2+" create session success "),this.setGwNodes(n,!1,r,e),r===q.kV6AndV4&&((o=n==null?void 0:n.ipv6s)===null||o===void 0?void 0:o.length)>0&&(this.Al=!0),((a=n==null?void 0:n.ipv4s)===null||a===void 0?void 0:a.length)>0&&((l=n==null?void 0:n.ipv6s)===null||l===void 0?void 0:l.length)>0&&this.checkIfToRestart(r),this.an.info(Ce.GV2+" "+this.va+" isRestartIce "+this.Sl),this.dv()},s.prototype.Rv=function(e){var t,n=this;if(this.an.info(Ce.rp8+" set candidate ".concat(!!e)),e){var r=e.candidate,o=e.sdpMid,a=e.sdpMLineIndex;r&&(this.an.info(Ce.rp8+" addIceCandidate"),(t=this.Xl)===null||t===void 0||t.addIceCandidate(new RTCIceCandidate({sdpMid:o,sdpMLineIndex:a,candidate:r})).then(function(){n.an.info(Ce.rp8+" add can suc")}).catch(function(l){n.an.info(Ce.rp8+" add can fail, ".concat(l.message))}))}},s.prototype.Dv=function(e){if(!(e!=null&&e.sdp))throw this.an.warn(Ce.amU+" no content"),this.Um(Ft.dqB,!0);var t=e.sdp;this.an.info(Ce.amU+" localSdp1 "+t.substr(0,t.length/2)),this.an.info(Ce.amU+" localSdp2 "+t.substr(t.length/2));var n=(t=(t=t.replace(/sendrecv/g,"recvonly")).replace(/useinbandfec=/,"stereo=1;useinbandfec=")).match(/m=application[\s\S]+datachannel[\s\S]+/),r=n?n[0]:null;if(r){var o=r.replace(/recvonly/,"sendrecv");t=t.replace(r,o)}return t=(function(a){var l=a.split(`\r
`),d=new Map;l.forEach(function(x,U){if(/^a=rtcp-fb:/.test(x)&&l[U+1]&&!/^a=rtcp-fb:/.test(l[U+1])){var te=x.match(/^a=rtcp-fb:\d+/);te&&d.set(U+1,te[0]+" rrtr")}});for(var p=Array.from(d),u=0;u<p.length;u++){var v=yl([],p[u]);l.splice(v[0]+u,0,v[1])}return l.join(`\r
`)})(t=ed(t)),this.pm.videoCodec&&(t=ct.getSDPByVideDecodeType(t,this.pm.videoCodec)),this.pn.browser==="firefox"&&bi(this.pn.browserInfo,"firefox",139,2)&&(t=bl(t)),e.sdp=t,e},s.prototype.Gm=function(e){var t;return ls(this,void 0,void 0,function(){var n,r;return xo(this,function(o){switch(o.label){case 0:this.an.info(Ce.amU+" set local sdp"),(n=this.getSpan(j.FQ.event,this.Pm))&&(this.pn.ia(n,{sdp:e.sdp}),n.setAttributes({is_mini:j.FQ.is_mini(this.$u)})),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(t=this.Xl)===null||t===void 0?void 0:t.setLocalDescription(e)];case 2:return o.sent(),n&&n.end(),[3,4];case 3:throw r=o.sent(),this.an.error(Ce.amU+" set error "+r.toString()),n&&this.cr.setError(n,{code:ai.Qn.code,message:r.toString()}),this.Um(ai.Qn,!0);case 4:return[2]}})})},s.prototype.Hm=function(e){return ls(this,void 0,void 0,function(){var t,n,r,o,a,l,d,p,u,v=this;return xo(this,function(x){switch(x.label){case 0:if(this.an.info(Ce.c2i+" success"),t={paramsExt:this.yv},!this.$u)return[3,5];n=performance.now(),x.label=1;case 1:return x.trys.push([1,3,,4]),[4,this.Yd.getMiniSdp(e.sdp)];case 2:return r=x.sent(),this.Ul=performance.now()-n,t.miniSdp=r,[3,4];case 3:return x.sent(),this.$u=!1,this.pn.$u=!1,this.Ul=performance.now()-n,this.Jl=performance.now()-this.Fl,this.Ll=1,t.sdp=e.sdp,[3,4];case 4:return[3,6];case 5:t.sdp=e.sdp,x.label=6;case 6:return this.vm===I.ey.L3&&(t.min_play_buf_level_ms=500),this.np=(0,I.Mo)(),(o=this.getSpan(j.GV.event,this.Pm))==null||o.setAttributes({req_params_ext:this.yv}),this.state=2,[4,new he.l3(function(U,te){v.Kd.sendMediaDesc(v.np,v.Df,0,t,function(le,se,We){U({seq:le,sessionId:se,data:We})},function(le,se){v.an.error(Ce.c2i+" failed to send "+le),o&&v.cr.setError(o,{code:ai.$n.code,message:le.toString()}),v.np==se&&te(v.Um(ai.$n))})})];case 7:return a=x.sent(),l=a.seq,d=a.sessionId,p=a.data,this.an.info(Ce.c2i+" sendMediaDesc resp"),o&&(this.pn.ia(o,{sdp:t.sdp}),o.setAttributes({webrtc_sid:j.GV.webrtc_sid(d)})),this.np!=l?(this.an.error(Ce.c2i+" seq or sessionId is not equal "+this.np+" "+l),[2,{remoteSdp:""}]):(this.an.info(Ce.c2i+" send success stateNego:waiterAnswer"),this.ed=2,this.state=3,[4,this.parseRemoteMiniSdp(p)]);case 8:if(u=x.sent(),o&&this.pn.ia(o,{remote_sdp:u}),o==null||o.end(),u)return[2,{remoteSdp:u,miniSdp:p==null?void 0:p.mini_sdp}];throw this.Um(ai.$n)}})})},Object.defineProperty(s.prototype,"turnToTcp",{get:function(){return this.Bd},enumerable:!1,configurable:!0}),s.prototype.checkAutoTcp=function(){var e=Lt();this.an.info("zc.p.1.cat ".concat(e," ").concat(this.Od)),this.Ld=!(!e||!this.Od)},s.prototype.Jm=function(e,t,n){var r,o;return t===void 0&&(t=!1),ls(this,void 0,void 0,function(){var a,l,d,p,u,v,x,U,te,le,se,We,Ke,Ze,et,ht,gt,Et,At,Ot,Bt=this;return xo(this,function(Kt){switch(Kt.label){case 0:if(a={type:"answer",sdp:e,toJSON:function(){}},l=this.getSpan(j.EV.event,this.Pm),this.setTurnTcp(),this.gn.autoSwitchProtocol=this.au("auto_to_tcp")||!1,d=this.au("udp_max_fail_num"),!isNaN(d)&&(this.gn.maxUdpFailNum=d),v=(p=this.gn).maxUdpFailNum,x=p.udpFailNum,this.an.info(Ce.wQ8+"  autoToTcp: ".concat(u=p.autoSwitchProtocol,", udpFailNum: ").concat(x,", maxUdpFailNum: ").concat(v,".")),u&&!this.Bd&&x>=v&&(this.an.info(Ce.wQ8+" switch to tcp."),this.Bd=!0,this.Ld=!1),(U=this.au("udp_or_tcp",!0))&&(this.an.info(Ce.wQ8+" setting udp_or_tcp "+U),this.Bd=U==="tcp"),this.Bd&&!this.gn.isProxy&&this.pn.browser!=="firefox"&&((r=a.sdp.match(/candidate.*/g))===null||r===void 0||r.forEach(function(Ht){var Zt=Ht.replace(/udp/,"tcp");Zt.includes(" tcptype ")||(Zt=Zt.replace(" typ host "," typ host tcptype passive ")),a.sdp=a.sdp.replace(Ht,Zt)})),this.gn.isProxy)if(te=Ce.wQ8,se=Xr(le=a.sdp),We=se[0],Ke=se[1],Ze=le.match(/a=mid:[^(\n|\r)]+/g),Ke&&Ze)if(this.Ud.intranet)setTimeout(function(){Ke.forEach(function(Ht,Zt){var un,hn={sdpMLineIndex:Zt,candidate:Ht.replace(We[Zt].ip,Bt.Ud.wanIP).replace("a=",""),sdpMid:Ze[Zt].replace("a=mid:","")};Bt.an.info(te+"  add wan candidate:"+JSON.stringify(hn)),(un=Bt.Xl)===null||un===void 0||un.addIceCandidate(new RTCIceCandidate(hn))})},1e3);else for(this.an.info(te+"  change candidate ip from lan to wan: "+(et=this.Ud.wanIP)),ht=0;ht<Ke.length;ht++)Et=(gt=Ke[ht]).replace(We[ht].ip,et),a.sdp=le.replace(gt,Et);else this.an.warn(te+" candidate not found");else a.sdp=this.extractCandidate(a.sdp);this.an.info(Ce.wQ8+" remoteSdp "+a.sdp),l&&(this.pn.ia(l,{sdp:a.sdp}),l.setAttributes({webrtc_sid:j.EV.webrtc_sid(this.Df),is_mini:j.EV.is_mini(this.$u)})),this.state=4,t&&(this.jv(this.Hl),this.Hl=[],this.state=5),this.startTime=Date.now(),this.checkRetryOtherIPCandidate(),this.an.info(Ce.wQ8+" call success"),this.nv=a.sdp,Kt.label=1;case 1:return Kt.trys.push([1,3,,4]),[4,(o=this.Xl)===null||o===void 0?void 0:o.setRemoteDescription(new RTCSessionDescription(a))];case 2:return Kt.sent(),l&&l.end(),this.an.info(Ce.wQ8+" set success"),[3,4];case 3:throw At=Kt.sent(),this.an.error(Ce.wQ8+" set remote error "+At.toString()),this.$u&&(0,B.G0)(n)&&this.an.warn(Ce.wQ8+" mini "+n.toString()),l&&(l.setAttributes({error:ai.Zn.code,message:At.toString()}),l.end()),Ot=!0,this.$u&&(Ot=!1,this.$u=!1,this.Jl=performance.now()-this.Fl,this.Ll=4),this.Um(ai.Zn,Ot);case 4:return[2]}})})},s.prototype.checkRetryOtherIPCandidate=function(){var e=this;this.hv=setTimeout(function(){e.an.info("".concat(Ce.p1K," ").concat(e.va," check ").concat(e.state," ").concat(e.ipNodeType," ").concat(e.kl.length)),e.state!==6&&e.Sl&&e.kl.length>0&&(e.ipStackNode=e.ipStackNode===ae.IPv4?ae.IPv6:ae.IPv4,e.restartIce())},this.Cl)},s.prototype.extractCandidate=function(e){var t=this,n=Xr(e),r=n[0];return n[1].forEach(function(o,a){var l=r[a].ip,d=Si(l);if(t.ipStackNode!==d){var p={sdpMLineIndex:parseInt(r[a].mid),candidate:o.replace("a=",""),sdpMid:r[a].mid};t.kl.push(p),e=e.replace(o+`
`,"")}if(d===ae.IPv4){var u=Mc(l),v=o.replace(new RegExp(l,"g"),u).replace("a=",""),x={sdpMLineIndex:parseInt(r[a].mid),candidate:v,sdpMid:r[a].mid};t.Ol.find(function(U){return U.candidate===x.candidate&&U.sdpMLineIndex===x.sdpMLineIndex&&U.sdpMid===x.sdpMid})||t.Ol.push(x)}}),e},s.prototype.Bm=function(e,t){var n,r,o=this;if(this.an.info(Ce.YOg+" preset turn "+"".concat(JSON.stringify(t))),t){var a=t.turn_username,l=t.turn_auth_key,d=t.turn_urls;this.Il=a,this.Tl=l;var p=void 0;if(d){var u=d.split(";"),v=[];u.forEach(function(te){var le=ws(te).replace("[","").replace("]",""),se=Si(le);if(o.ipStackNode===se?v.push(te):o.El.push(te),se==ae.IPv4){var We=Mc(le),Ke=te.replace(le,"[".concat(We,"]"));o.gn.isCandidateHasIPv6&&v.push(Ke)}}),(n=this.El).push.apply(n,v),(p=v).length===0&&p.push.apply(p,this.El)}else{var x=xr(e);if(x.length===0)return this.an.info(Ce.YOg+" "+this.va+" no candidate"),!1;p=x}var U={iceTransportPolicy:"all",rtcpMuxPolicy:"require",iceServers:[{urls:p,username:a,credential:l}],encodedInsertableStreams:this.xd.isSEIStart};try{(r=this.Xl)===null||r===void 0||r.setConfiguration(U)}catch(te){this.an.info(Ce.YOg+" preset turn "+te)}}return!0},s.prototype.sendRestartIce=function(e,t){var n=this;this.an.info("zc.p.1.srsi call: "+e+" "+t),this.Kd.sendRestartIce(e,t).then(function(r){n.an.info("zc.p.1.srsi result "+JSON.stringify(r))}).catch(function(r){n.an.warn("zc.p.1.srsi fail: "+JSON.stringify(r))})},s.prototype.ep=function(e,t,n){if(this.an.info(Ce.z_2+" received "+n.event),!this.isProbe){var r=this.cr.createSpan(I.t0.H,{key:Io,par:this.va},{key:""},j.Mw.event);r.setAttributes({event_state:j.Mw.event_state(n.event),webrtc_sid:t}),r.end()}(this.zm.first||e>this.zm.seq)&&this.onPlayBFrameEvent(!1),n.event===0?this.onPlayStreamEnd(!1):n.event===1&&this.onPlayStreamEnd(!0)},s.prototype.gv=function(e,t,n){var r=n.clientip||n.client_ip;this.pn.clientIP!==r&&this.an.info(Ce.Q4y+" client ip changed "+this.pn.clientIP+" "+r),this.pn.clientIP=r,this.Id=n.peer_id,this.Kd.peerId=n.peer_id,this.Dd=r,this.pn.isMultiOuter=this.isMultiOuter(),this.onGetIP(),this.isProbe&&this.ed==5&&this.Kd.sendNetProbeReq(function(){},function(){}),this.wm=!0},s.prototype.onGetIP=function(){},s.prototype.rp=function(e,t,n){var r=0,o=n.lossrate,a=n.rtt;(this.Id!==n.peer_id&&!this.isProbeByDG||(0,B.TE)(o)||(0,B.TE)(a))&&(this.an.info(Ce.aww+" local peerID:"+this.Id+" remote peerID:"+n.peer_id+" lossrate:"+o+" rtt:"+a),r=1),this.onRecvNetQuality&&this.onRecvNetQuality(r,o,a)},s.prototype.sp=function(e,t,n){this.an.info(Ce.JFd+" call: "+t),this.onRecvNetQualityGrade&&this.onRecvNetQualityGrade(n)},s.prototype.Vm=function(e){var t,n=this;if(this.an.info(Ce.u7D+" called"),e.candidate!=null){this.an.info(Ce.u7D+" candidate "+e.candidate.candidate+" state "+this.state+" autotcp "+this.Ld),e.candidate.candidate&&Si((t=e.candidate.candidate.split(" "))===null||t===void 0?void 0:t[4])===ae.IPv6&&(this.Ld&&(this.an.info("".concat(Ce.u7D," can len ").concat(this.Ol.length)),this.Ol.forEach(function(o){var a;(a=n.Xl)===null||a===void 0||a.addIceCandidate(new RTCIceCandidate(o)).then(function(){n.an.info("".concat(Ce.u7D," add can suc"))}).catch(function(l){n.an.info("".concat(Ce.u7D," add can fail, ").concat(l.message))})})),this.gn.isCandidateHasIPv6=!0);var r=function(o){n.jv([{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex}])};this.Ld?r(e):this.state<5||this.state==7?(this.an.info(Ce.u7D+" cached"),this.Hl.push({candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})):(this.an.info(Ce.u7D+" send"),r(e))}},s.prototype.Qm=function(e){this.an.info(Ce.cDv+" called "+e.target.signalingState),this.state!=7&&this.Xl!=null&&e.target.signalingState==="closed"&&(this.ed=7,this.op(this.Xl.iceConnectionState))},s.prototype.Ym=function(e){var t=this;if(this.state!=7&&this.Xl!=null){this.an.info(Ce.W0Q+" stateChanged "+this.Xl.iceConnectionState);var n=this.getSpan(j.CK.event,this.Pm,this.playingEvent);if(n&&n.setAttributes({ice_state:j.CK.ice_state(this.Xl.iceConnectionState)}),this.Xl.iceConnectionState==="connected"){if(this.ed=5,this.isProbe&&this.Od&&(this.wm||this.isProbeByDG))return this.Kd.sendNetProbeReq(function(){},function(){}),void this.onCanStopNegaTimer();if(this.onCanStopNegaTimer(),this.cv!=null&&(clearTimeout(this.cv),this.cv=null),!this.isProbe&&this.jd){var r=new Date().getTime()-this.jd;this.tv.setAttributes({play_begin_time:Tl.play_begin_time(r)}),this.jd=0}if(this.cr.spanEnd({key:j.F.event,par:this.va},{webrtc_sid:this.Df}),this.zd){var o=new Date().getTime()-this.zd;this.an.info(Ce.W0Q+" ice time "+o)}this.isProbe||this.state==6||(this.onPlayStateUpdate&&this.onPlayStateUpdate(I.h7.start,this.va,{code:0,message:""},!0),this.getRemoteStreamSuc&&(this.getRemoteStreamSuc(this.pm.resourceMode==I.qP.DG?null:this.playStream),this.getRemoteStreamSuc=null)),this.state=6,this.resetIceInfos(),this.resetNat64Infos();var a=new Date().getTime()-this.zd;this.onIceConnected&&this.onIceConnected(this.sessionId,a),this.an.info(Ce.W0Q+" stateNego:iceConnected"),this.Bd||(this.gn.udpFailNum=0)}else if(this.Xl.iceConnectionState==="closed")n==null||n.end(),this.ed=7,this.op(this.Xl.iceConnectionState);else if(this.Xl.iceConnectionState==="failed")n==null||n.end(),this.ed=8,this.op(this.Xl.iceConnectionState);else if(this.Xl.iceConnectionState==="disconnected"){n==null||n.end(),this.ed=6,this.an.warn(Ce.W0Q+" ice disconnected");var l=this.gn.lastChangeIpTime;l&&Date.now()-l<15e3?this.onPlayStateUpdateError(ai.Xn):this.cv||(this.cv=setTimeout(function(){t.op("disconnected")},15e3))}}},s.prototype.Km=function(e){var t,n;this.an.info(Ce.fjj+" connectionChanged "+((t=this.Xl)===null||t===void 0?void 0:t.connectionState)),((n=this.Xl)===null||n===void 0?void 0:n.connectionState)==="connected"&&this.onPeerConnected&&this.onPeerConnected(this.sessionId,new Date().getTime()-this.zd)},s.prototype.op=function(e){this.an.info(Ce.W0Q+"  state "+this.state+" connectionState "+e),this.onPlayStateUpdateError(ai.Xn)},s.prototype.close=function(e){this.an.info(Ce.ruA+" close peer, reason: "+e),this.state=7,this.bm=!1,this.wm=!1,this.closeSession(e),this.Xl!=null&&(this.Xl.close(),this.Xl=null),this.nv&&(this.nv=null),this.ev&&(this.ev=null),this.resetIceInfos(),this.resetNat64Infos(),this.Dd="",this.Hd=void 0;var t=this.seiWorker;t&&t.removeEventListener("message",this.ou.seiMessage),this.onCanStopNegaTimer(),this.cv!=null&&(clearTimeout(this.cv),this.cv=null),this.hv&&(clearTimeout(this.hv),this.hv=null),this.stopVideocTimer(),this.up(),this.Kd.reset(),this.lv=0,this.np=0,this.zm.first=!0},s.prototype.stopPlay=function(){this.retryFailGwNodes=[],this.retryFailIpV4Nodes=[],this.retryFailIpV6Nodes=[]},s.prototype.mv=function(e,t,n){this.an.info(Ce.E_I+" received ");var r=this.getSpan(j.$9.event,this.playingEvent);if(r&&r.end(),t==this.Df){var o={code:ai.Ie.code,message:"server session reset "+n.reason};this.onCanStopNegaTimer(),this.onPlayStateUpdateError(o)}else this.an.info(Ce.E_I+" cannot find session")},s.prototype.vv=function(e,t,n){this.an.info(Ce.hkn+" "+JSON.stringify(n)),this.cr.spanSetAttributes({key:this.playingEvent,par:this.va},{denied_info:j.er.denied_info(n.err_info),stop_reason:j.er.stop_reason("DenyStop")});var r=n.err_info?JSON.parse(n.err_info.toLowerCase()):{},o=r.action?r.action:null,a=1*n.reason,l=!([4,8,10,11,12,14,24,26,27,28,32].includes(a)||[2,3,4,5,6].includes(o));(r==null?void 0:r.err)===1004&&this.Wm()&&(l=!0);var d=Zo({},l&&(r==null?void 0:r.err)===1004?this.pn.isFlutter?Ft.LBO:ai.ke:l?Ft.YDn:ai.Ie);(r==null?void 0:r.err)===1011&&(d=Zo({},Ft._5H)),d.message+=" reason:".concat(a," ").concat(o?" action:"+o:""," ").concat(r!=null&&r.err?" err:"+(r==null?void 0:r.err):""),d.message+=";".concat(Co(a,o,r==null?void 0:r.err)),this.onCanStopNegaTimer();var p=!1;if(!this.Bd){if([8,10].includes(a)||[18,15].includes(a)&&o===2&&[3001,3002].includes(r.err)){this.gn.udpFailNum++;var u=this.gn;u.autoSwitchProtocol&&u.udpFailNum>=u.maxUdpFailNum&&(this.Od=!1,this.gn.setIsPeer(!1),p=!0)}else this.gn.udpFailNum=0;var v=this.gn.isNodeLast(this).lastTryNext,x=[3001,3002,3003,3004,3005,3006,3007,3008].includes(r.err);v&&x&&(this.an.info(Ce.hkn+" switch tcp by all fail"),this.pn.turnToTcp=!0,this.Ld=!1,this.Od=!1,this.gn.setIsPeer(!1))}this.onPlayStateUpdateError(d,l,r,p)},s.prototype.Wm=function(){var e=Date.now(),t=this.pn.streamRetryTime,n=this.km;if(n){if(e-n>1e3*t)return this.km=0,this.an.info("zc.p.ctest.1 "+" stream not found. retry over time: ".concat(t,"s")),!0}else this.km=e;return!1},s.prototype.ap=function(e,t,n){n===void 0&&(n=!1),this.onRecvStreamStatus&&this.onRecvStreamStatus(t.camera_status,t.mic_status,n),this.an.info(Ce.dw7+" call success")},s.prototype.Zm=function(e,t){var n,r,o=this;if(this.an.info(Ce.Nw2+" called "+e),e){this.cp(t),this.xd.isSEIStart&&qt()&&(t.track.kind==="video"?this.hp(t):t.track.kind==="audio"&&this.fp(t)),this.onRecvRemoteStream&&this.onRecvRemoteStream(e),this.remoteStream=e;var a=(n=this.room.streamList)===null||n===void 0?void 0:n.find(function(d){return d.stream_id===o.va}),l=((r=a==null?void 0:a.stream_attr_opts)===null||r===void 0?void 0:r.stream_codec)===3;this.getVideoCodec(l),this._m&&this.ap(this.lp,this.dp,!0)}else this.an.warn(Ce.Nw2+" remote stream is empty")},s.prototype.cp=function(e){var t,n=0,r=0,o=this.pm.jitterBufferTarget,a=this.pm.playoutDelayHint;if((0,B.Cs)(o)&&o>0&&o<=4e3?(r=o,n=o/1e3):(0,B.Cs)(a)&&a>0&&a<=4&&(r=1e3*n,n=a),(0,B.dd)(this.pm.enableLowLatency)&&this.pm.enableLowLatency&&(n=0,r=0),r>0&&e)try{var l=(t=e==null?void 0:e.track)===null||t===void 0?void 0:t.kind;this.an.info(Ce.Nw2+" ".concat(l," playoutDelayHint: ").concat(r,", origin delay: ").concat(e.playoutDelayHint," | ").concat(e.jitterBufferTarget)),e.playoutDelayHint=n,e.jitterBufferTarget=r,this.an.info(Ce.Nw2+" ".concat(l," playoutDelayHint result: ").concat(e.playoutDelayHint," | ").concat(e.jitterBufferTarget))}catch(d){this.an.warn(Ce.Nw2+" set playoutDelayHint failed. ".concat(d))}},s.prototype.hp=function(e){var t=this.createSEIWorker();t&&t.addEventListener("message",this.ou.seiMessage);var n=this.xd,r={cmd:"decode",streamID:this.va,emulationPreventionByte:this.pn.seiConfig.emulationPreventionByte,codec:this.Sm,unregisterSeiFilter:n.unregisterSeiFilter,filterSize:n.filterSize};if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(t,r);else{var o=e.createEncodedStreams(),a=o.readable,l=o.writable,d=!t;try{t&&t.postMessage(Zo({readable:a,writable:l},r),[a,l])}catch{d=!0}if(d){this.an.warn("zc.cvrt The current browser version is too low.");var p=new TransformStream({transform:this.decodeVideoFrame});this.receiverStreams=o,a.pipeThrough(p).pipeTo(l),this.gn.handleSeiRollBack()}}},s.prototype.fp=function(e){var t={cmd:"decode",streamID:this.va,kind:"audio"},n=this.createSEIWorker();if(window.RTCRtpScriptTransform)e.transform=new RTCRtpScriptTransform(n,t);else{var r=e.createEncodedStreams(),o=r.readable,a=r.writable,l=!n;try{n&&n.postMessage(Zo({readable:o,writable:a},t),[o,a])}catch{l=!0}if(l){this.an.warn("zc.cart The current browser version is too low.");var d=new TransformStream({transform:this.decodeAudioFrame});o.pipeThrough(d).pipeTo(a),this.gn.handleSeiRollBack()}}},s.prototype.jv=function(e){var t=this;if(this.an.info(Ce.UY3+" called"),!(e=e.filter(function(r){return!!(r&&r.candidate.indexOf("relay")>0)}))||e.length<1)this.an.info(Ce.UY3+" cancelled");else{var n=this.getSpan(j.vB.event,this.Pm);n&&n.setAttributes({candidate_info:j.vB.candidate_info(e)}),this.ed!==5&&(this.ed=4),this.an.info(Ce.UY3+" stateNego:sendCandidate"),this.Kd.sendCandidateInfo(e,function(r,o,a){t.an.debug(Ce.UY3+" send success"),n&&n.end()},function(r,o){t.an.error(Ce.UY3+" failed to send: "+r.toString()),n&&t.cr.setError(n,{code:ai.te.code,message:r.toString()}),t.onPlayStateUpdateError(ai.te)})}},s.prototype.resetPushCmdSeqMap=function(){var e;this.qd=((e={}).StreamStatusNotifyPush={seq:-1,time:0},e.PlayEventPush={seq:-1,time:0},e.ClientInfoPush={seq:-1,time:0},e.NetQualityInfoPush={seq:-1,time:0},e)},s.prototype.Um=function(e,t,n,r){return{playError:1,error:e,stopRetry:t,detail:n,startFromFirst:r}},s.prototype.onPlayQualityUpdate=function(e,t){},s.prototype.getCameraMicStatus=function(e){return e==0?"OPEN":"MUTE"},s.prototype.onReceivedDataChannel=function(e){switch(new Uint8Array(e.data,0,1)[0]){case bu.Signal:this.Kd.onDataChannelMessage(e.data);break;case bu.UserData:this.onUserData(e.data)}},s.prototype.onUserData=function(e){var t,n,r=this,o=new Uint8Array(e,0,10),a=e.byteLength-10,l=new Uint8Array(e,10,a),d=o[1],p=o[2]<<8|o[3],u=o[4]<<8|o[5],v=new Date().getTime();if(this.Im.Rm&&(this.Im.Tm[0]=p==u?p:u,this.Im.Rm=!1),this.Im.Cm.push({sn:p,sn0:u,recv_ts:v,flags:d,payload_len:a,payloadArray:l}),this.Im.Cm.sort(this.compareShort),p==this.Im.Tm[0]){var x=this.Im.Cm.filter(function(Ke){return Ke.sn0==u});if(x.sort(this.compareShort),x.find(function(Ke){return 1&Ke.flags})!=null&&x.length==this.compareShort(p,u)+1){for(var U=0,te=new ArrayBuffer(65536),le=0;le<x.length;le++)new Uint8Array(te).set(x[le].payloadArray,U),U+=x[le].payload_len;(t=this.onDataChannelList)===null||t===void 0||t.forEach(function(Ke){Ke(te,U,r.va)}),this.Im.Cm=[],this.Im.Rm=!0}this.Im.Tm[0]++}else for(var se=function(){var Ke=We.Im.Cm.filter(function(Et){return Et.sn0==r.Im.Cm[0].sn0});if(Ke.sort(We.compareShort),Ke.find(function(Et){return 1&Et.flags})!=null&&Ke.length==We.compareShort(Ke[Ke.length-1].sn,Ke[0].sn0)+1){for(var Ze=0,et=new ArrayBuffer(65536),ht=0;ht<Ke.length;ht++)new Uint8Array(et).set(Ke[ht].payloadArray,Ze),Ze+=Ke[ht].payload_len;We.Im.Tm[0]=Ke[0].sn0+Ke.length,(n=We.onDataChannelList)===null||n===void 0||n.forEach(function(Et){Et(et,Ze,r.va)}),We.Im.Cm=[],We.Im.Rm=!0}else if(v-Ke[0].ts<4e3){var gt=Ke[0].sn0;for(ht=0;ht<Ke.length&&gt==Ke[ht].sn;ht++)gt++;return We.Im.Tm[0]=gt,"break"}for(ht=0;ht<Ke.length;ht++)We.Im.Cm.shift()},We=this;this.Im.Cm.length>0&&se()!=="break";);},s.prototype.compareShort=function(e,t){var n=new Uint16Array(1);n[0]=e-t;var r=new Int16Array(1);return r[0]=n[0],r[0]},s.prototype.updVidCodec=function(){var e=this.seiWorker;e&&e.postMessage({cmd:"updatePlayer",codec:this.Sm,streamID:this.va})},s.prototype.getVideoCodec=function(e){var t=this;if(e===void 0&&(e=!1),this.Xl&&(this.Xl.getStats().then(function(n){n.forEach(function(r){if(r.type==="inbound-rtp"&&r.kind==="video"&&r.codecId){var o=n.get(r.codecId).mimeType.toLowerCase();o.indexOf("h264")>-1?t.Sm="H264":o.indexOf("vp8")>-1?(t.Sm="VP8",t.xd.isSEIStart&&t.an.error(Ce.MDS+" video code VP8 is not support SEI"),t.updVidCodec()):o.indexOf("h265")>-1&&(t.Sm="H265",t.updVidCodec())}})}),this.Em++,this.Sm||this.Em>=20))return e&&this.Sm===""&&(this.Sm="H265",this.updVidCodec()),void this.stopVideocTimer();this.stopVideocTimer(),this.vp=setTimeout(function(){t.getVideoCodec(e)},100)},s.prototype.stopVideocTimer=function(){this.vp&&(clearTimeout(this.vp),this.vp=null)},s.prototype.isMultiOuter=function(){return!(!this.pn.accessClientIp||!this.Dd||this.pn.accessClientIp===this.Dd)},s.prototype.getSpan=function(e,t,n,r){if(r===void 0&&(r=!1),this.isProbe)return null;var o=(0,he.fU)(this.cr,I.t0.H,this.va,e,t,n,r);return o.setAttribute("is_mini",this.$u),o},s.prototype.setTurnTcp=function(){this.Bd=this.pn.turnToTcp,this.pn.turnOverTcpOnly!==void 0&&(this.Bd=this.pn.turnOverTcpOnly)},s.prototype.dv=function(){var e=this,t=performance.now();this.Kd.registerPushCallback("CloseSessionPush",function(n,r,o){if(t){var a=(performance.now()-t).toFixed(0);t=void 0,e.an.info(Ce.hkn+" ".concat(e.va,", cmd: CloseSessionPush, cost_time: ").concat(a))}o.reason===32&&(e.$u=!1,e.pn.$u=!1,e.Jl=performance.now()-e.Fl),e.vv(n,r,o)}),this.Kd.registerPushCallback("SessionResetPush",function(n,r,o){e.mv(n,r,o)}),this.Kd.registerPushCallback("StreamStatusNotifyPush",function(n,r,o){e.ap(n,o)}),this.Kd.registerPushCallback("PlayEventPush",function(n,r,o){e.ep(n,r,o)}),this.Kd.registerPushCallback("ClientInfoPush",function(n,r,o){e.gv(n,r,o)}),this.Kd.registerPushCallback("NetQualityInfoPush",function(n,r,o){e.rp(n,r,o)}),this.Kd.registerPushCallback("net_quality_grade_push",function(n,r,o){e.sp(n,r,o)}),this.Kd.registerPushCallback("codec_error_notify",function(n,r,o){e.mp(n,o.media_type,o.error_type)}),this.Kd.registerPushCallback("play_net_stat_notify",function(n,r,o){e.onGwPlayNetState({audioTXBitrate:o.audio_tx_bitrate,videoTXBitrate:o.video_tx_bitrate,videoRedRate:o.video_red_rate,trafficControlStat:o.traffic_control_stat,trafficControlBW:o.traffic_control_bandwidth})})},s.prototype.up=function(){this.Kd.unregisterPushCallback("CloseSessionPush"),this.Kd.unregisterPushCallback("SessionResetPush"),this.Kd.unregisterPushCallback("PlayEventPush"),this.Kd.unregisterPushCallback("ClientInfoPush"),this.Kd.unregisterPushCallback("NetQualityInfoPush"),this.Kd.unregisterPushCallback("StreamStatusNotifyPush")},s.prototype.mp=function(e,t,n){if(n!==0){var r=t?"video":"audio",o=Ce.Kw2+" ".concat(r," codec error: ").concat(n,",  codec: ").concat(this.Sm," ; ");if(n===1){if(o+="remove ".concat(r," track."),!this.isProbe&&this.state===6){var a=I.h7.start;this.pm.transcodeOnDecodeFail&&t===1&&!this.ym?(a=I.h7.error,this.ym=Ft.H6b.code,this.onPlayStateUpdateError(Ft.H6b,!1,void 0,!0)):this.onPlayStateUpdate&&this.onPlayStateUpdate(a,this.va,{code:Ft.H6b.code,message:"browser dose not support current ".concat(r," codec")},!0)}}else n===3&&((this.zm.first||e>this.zm.seq)&&(this.zm.first=!1,this.zm.seq=e),this.onPlayBFrameEvent&&this.onPlayBFrameEvent(!0),this.onPlayStateUpdate&&this.onPlayStateUpdate(I.h7.start,this.va,{code:Ft.rV9.code,message:"B-frame is detected in the bitstream"},!0));this.an.warn(o)}},s.prototype.sendBroadcasterStatus=function(e){this.Kd.sendBroadcasterStatus(e)},s.prototype.ActivatePlayAudioStream=function(e,t,n){this.Kd.ActivatePlayAudioStream(e,t,n)},s.prototype.ActivatePlayVideoStream=function(e,t,n){this.Kd.ActivatePlayVideoStream(e,t,n)},s.prototype.sendPlayStats=function(e){return this.Kd.sendPlayStats(e)},Object.defineProperty(s.prototype,"gwVersion",{get:function(){return this.Kd.gwVersion},enumerable:!1,configurable:!0}),s.prototype.getP2PNetStats=function(e,t){this.Kd.getP2PNetStats(e,t)},s.prototype.closeSession=function(e){var t,n;(t=this.Wd)===null||t===void 0||t.off("uaConnected",this.ou.onUaSocketConnected),this.resetPushCmdSeqMap(),this.Wl&&(this.Kd.sendCloseSession(e),(n=this.Wd)===null||n===void 0||n.removeSession(this.Df),this.Wl=!1)},s.prototype.dispatchGwNodes=function(e,t,n){var r=this,o=this.va;this.gn.testEnvironment==1&&(o="zegotest-"+this.gn.appid+"-"+this.va);var a=e;a===F.IPv6Prefer&&!this.Al&&this.Xd&&(a=F.IPv4Prefer);var l=this.getTransCodec(o),d=l.transCodecID,p=l.transCodecSuffix;o=l.transCodecStreamID;var u=this.vm===I.ey.RTC?j.KG.event:j.AJ.event,v=this.getSpan(u,u);v==null||v.setAttributes({ip_mode:e}),this.Kd.dispatchGwNodes({type:1,streamID:o,transCodecID:d,transCodecSuffix:p,geo:{type:this.gn.geo.type,areaList:this.gn.geo.areaList},ipV6Prefer:a},function(x,U,te){du(te),v&&(0,he.lA)(v,{gw_nodes:te.gw_nodes,ip_infos:te.ips,ip_v6_infos:te.ipv6s}),t&&t(te)},function(x,U){v&&r.cr.setError(v,x),n&&n(x)})},s.prototype.getTransCodec=function(e){var t,n,r,o,a,l=(this.pn.appConfig||{}).media_config,d=e,p=!1,u=((t=this.pm)===null||t===void 0?void 0:t.codecTemplateID)!==void 0&&((n=l==null?void 0:l.play_config)===null||n===void 0?void 0:n.enable_codec_template)===1;return this.pm.transcodeOnDecodeFail?(p=!!this.ym)&&(o=u?this.pm.codecTemplateID:0):(p=u)&&(o=this.pm.codecTemplateID),p&&(d=e+(a=(0,he.yo)(o,(r=l.play_config)===null||r===void 0?void 0:r.codec_template_postfix_pattern))),{transCodecStreamID:d,enableTransCodec:p,transCodecID:o,transCodecSuffix:a}},s.prototype.parseRemoteMiniSdp=function(e){return ls(this,void 0,void 0,function(){var t,n,r;return xo(this,function(o){switch(o.label){case 0:if(!(this.$u&&(0,B.G0)(e.mini_sdp)&&e.mini_sdp.byteLength>0))return[3,5];n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.Yd.parseMiniSdp(e.mini_sdp)];case 2:return t=o.sent(),this.Gl=performance.now()-n,[3,4];case 3:throw r=o.sent(),this.$u=!1,this.pn.$u=!1,this.Gl=performance.now()-n,this.Jl=performance.now()-this.Fl,this.Ll=3,this.Um(r);case 4:return[3,6];case 5:(0,B.QP)(e==null?void 0:e.sdp)&&(e!=null&&e.sdp)&&(t=e.sdp),o.label=6;case 6:return[2,t]}})})},s.prototype.reportMiniSdpInfos=function(e){var t={};(this.$u||this.Ll)&&(t.mini_error=this.Ll,t.code_sdp_consume=+this.Ul.toFixed(0),t.decode_sdp_consume=+this.Gl.toFixed(0),this.Ll=0,this.Ul=0,this.Gl=0),this.cr.spanSetAttributes({key:e,par:this.va},Zo({},t))},s.prototype.resetMiniReportInfos=function(){this.Jl=0,this.Fl=0},s.prototype.setPlayStreamVideoType=function(e){return ls(this,void 0,void 0,function(){return xo(this,function(t){return[2,this.Kd.subscribeVideoStream(e)]})})},s})(),_s=j.zF,nf=j.Nr.event,Is=(function(){function s(e,t,n,r,o){var a=this;this.Bv=e,this.cr=n,this.gn=r,this.pn=o,this.pp=0,this.cdnPlayTime=0,this.state=7,this.sendTransCodecCmd=function(l,d){if(l===void 0&&(l=0),d=d||a.gp){var p=d.streamID,u=d.playAddr,v=d.codecTemplateID,x=d.codecSuffix;a.gp=d;var U=a.Bv.room.streamHandler.notifySdkNeedStream(p,{playAddr:u,transCodecID:v,transCodecSuffix:x,retry:l},function(te,le){a.an.info("zsc.pc.1 notify trans codec success"),a.bp=Date.now()},function(te,le){if(a.an.error("zsc.pc.1 notify trans codec err:"+te.code+" "+te.message),(le==null?void 0:le.action)===2)return a._p||(a._p=setTimeout(function(){a._p=void 0,a.sendTransCodecCmd(l+1,d)},le.action_delay)),void a.gn.onPlayStateUpdate(I.h7.retry,p,{code:te.code,message:te.message},{isCDN:!0});a.gn.onPlayStateUpdate(I.h7.error,p,Ft.T_8,{isCDN:!0})});a.wp=U}},this.an=Oi(t,this.streamID)}return Object.defineProperty(s.prototype,"zegoExpressPlayer",{get:function(){return this.Sp(this.cdnPlayer)?this.cdnPlayer:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"zegoCdnPlayer",{get:function(){return this.Sp(this.cdnPlayer)?void 0:this.cdnPlayer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"streamID",{get:function(){return this.Bv.streamId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Ep",{get:function(){return this.Bv.playMode==I.ey.CDN},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dm",{get:function(){return this.Bv.dm},enumerable:!1,configurable:!0}),s.prototype.playCDN=function(e,t){var n,r,o,a,l,d,p=this;this.setCdnState(0);var u=this.streamID,v=this.Bv,x=v.playOption;v.$h&&((n=v.$h)===null||n===void 0||n.end()),v.$h=(0,he.fU)(this.cr,Z.t0.H,u,v.playStartEvent,nf,void 0,!0);var U=function(Bn,mn){var vn;v.$h&&((0,he.lA)(v.$h,{url:_s.url(p.cdnUrl),ip:_s.ip(v.ip),source_type:_s.source_type(v.playMode),net_protocol:_s.net_protocol("tcp"),tryidx:_s.tryidx(v.tryidx)}),v.$h=void 0),(vn=p.dm)===null||vn===void 0||vn.setAttributes({stop_reason:j.V0.stop_reason(Bn)}),t&&t(mn)},te=this.cdnPlayer,le=this.Sp(te);if(!le&&!x.CDNVideo)return this.an.error("zsc.pc.1 cdn video no found"),U("cdn video no found",Ft.ann),!1;var se=(r=this.gn.getPlayRoom(u))===null||r===void 0?void 0:r.streamList.find(function(Bn){return Bn.stream_id==u}),We=v.playOption.resourceMode;v.tryidx++,(o=this.dm)===null||o===void 0||o.setAttributes({tryidx:j.TW.tryidx(v.tryidx),biz_product:j.TW.biz_product(We==I.qP.DG?1:0)});var Ke=(this.pn.appConfig||{}).media_config,Ze=((a=Ke==null?void 0:Ke.play_config)===null||a===void 0?void 0:a.enable_codec_template)===1&&(x==null?void 0:x.codecTemplateID)!==void 0&&!x.transcodeOnDecodeFail,et=u,ht="";Ze&&(et+=ht=(0,he.yo)(x.codecTemplateID,(l=Ke.play_config)===null||l===void 0?void 0:l.codec_template_postfix_pattern));var gt=se||{},Et=gt.urls_flv,At=gt.urls_m3u8;if(!se||!Et||!At){if(!this.pn.appConfig)return this.an.error("zsc.pss.1 stream info no found"),U("stream info no found",Ft.cGQ),!1;var Ot=this.kp(u),Bt=Ot.flv,Kt=Ot.hls;Et=Bt?[Bt]:[],At=Kt?[Kt]:[]}if(!v||!te)return U("no cdn player",Ft.ann),!1;v.useResourceTypes.push(I.ey.CDN),v.useResourceTypes=Array.from(new Set(v.useResourceTypes));var Ht=Et,Zt=At,un=this.selectCDNSource(te,Ht,Zt);if(!un&&!this.cdnUrl)return this.an.error("zsc.pc.1 can not find cdn urls"),U("cdn protocol not support.",Ft.cGQ),!1;this.cdnUrl=un||this.cdnUrl;var hn=this.cdnUrl;if(Ze){hn=hn==null?void 0:hn.replace(u,et);var pn=(!((d=this.cdnUrl)===null||d===void 0)&&d.endsWith(".m3u8")?Zt:Ht)[0].split(u)[0];this.sendTransCodecCmd(0,{streamID:u,playAddr:pn,codecTemplateID:x.codecTemplateID,codecSuffix:ht})}return!!this.Ep&&(v.$h&&((0,he.lA)(v.$h,{url:_s.url(this.cdnUrl),ip:_s.ip(v.ip),source_type:_s.source_type(v.playMode),net_protocol:_s.net_protocol("tcp"),tryidx:_s.tryidx(v.tryidx)}),v.$h=void 0),this.gn.onPlayStateUpdate(I.h7.start,u,{code:0,message:"success"},{isCDN:!0}),!le&&x.CDNVideo?(te.play(hn,x.CDNVideo),x.CDNVideo.srcObject=null,this.bindZegoCDNPlayerEvents(te,u,x)):(te.src=hn,te.play(),this.bindZegoExpressPlayerEvents(te,u,x)),e&&e(),!0)},s.prototype.retrySendTransCodecCmd=function(){this.bp&&Date.now()-this.bp>9e4&&(this.bp=void 0,this.sendTransCodecCmd(0))},s.prototype._clearTransCodecRetry=function(){var e,t;(e=this.wp)===null||e===void 0||e.invalid(),(t=this.wp)===null||t===void 0||t.stopMaxTime()},s.prototype.stopCDNPlayer=function(){this._p&&(clearTimeout(this._p),this._p=void 0),this._clearTransCodecRetry(),this.bp=void 0,this.cdnPlayer&&(this.an.info("zc.cph.stcp stop"),this.cdnPlayer.stop(),this.updateCDNValidTime(),this.setCdnState(7))},s.prototype.Sp=function(e){return!(!e||!e._extApi)},s.prototype.bindZegoExpressPlayerEvents=function(e,t,n){var r=this,o=this.Bv,a=!1;e._extApi.off("canplay"),e._extApi.on("canplay",function(){a||(r.an.info("zsc.pc.1 start playing cdn source"),a=!0,r.onCDNPlayerCanplay(t,n))});var l=null,d=0;e._extApi.off("error"),e._extApi.on("error",function(p){var u,v,x=p.code,U=p.msg;r.an.error("zsc.pc.1 error occur ".concat(x," ").concat(U)),[100003,100004,100005].includes(x)?(l&&(clearTimeout(l),l=null),d>3?(r.an.error("zsc.pc.1 retryCount ".concat(d," greater than ").concat(3,". end play cdn source")),r.updateCDNValidTime(),(u=r.dm)===null||u===void 0||u.setAttributes({stop_reason:j.V0.stop_reason(U)})):l=setTimeout(function(){d++,e.resume(),o.CDNBrokenCnt++},3e3)):x!==100006&&((v=r.dm)===null||v===void 0||v.setAttributes({stop_reason:j.V0.stop_reason(U)}),r.an.error("zsc.pc.1 stop play cdn source."))}),e._extApi.off("loaded"),e._extApi.on("loaded",function(){r.Ep&&o.state==6?o.CDNBrokenCnt++:(r.an.info("zsc.pc.1 ended play cdn"),r.updateCDNValidTime())}),e._extApi.off("netQualityScoreUpdate")},s.prototype.kp=function(e){var t,n,r,o=((t={})[I.qP.RTC]=1,t[I.qP.CDN]=0,t[I.qP.L3]=2,t),a=this.pn.appConfig.media_config.play_config.resource_info;if(a.length){var l=a.find(function(x){return x.resource_type==o[I.qP.CDN]});if(l)for(var d=0;d<l.service_info.length;d++){var p=l.service_info[d],u=p.protocol,v=p.url_template.replace("{STREAM_NAME}",e);switch(u){case I.Hb.FLV:n=v;break;case I.Hb.HLS:r=v}}}return{flv:n,hls:r}},s.prototype.onCDNPlayerCanplay=function(e,t){var n=this.Bv;if(n.state!=6&&(this.setCdnState(6),n.firstFrameTime==0)){n.firstFrameTime=Date.now()-n.beginTime;var r=this.cr.createSpan(Z.t0.H,{key:j.Nr.event,par:e},{key:""},j.x6.event);r.setAttributes({fft_consumed:j.x6.fft_consumed(n.firstFrameTime),biz_product:j.x6.biz_product(t.resourceMode==I.qP.DG?1:0)}),r.end()}this.cdnPlayTime==0&&this.Ep&&(this.cdnPlayTime=Date.now())},s.prototype.bindZegoCDNPlayerEvents=function(e,t,n){var r=this,o=this.Bv;e.onComplete=function(){if(r.Ep&&o.state==6)e.retry(),o.CDNBrokenCnt++;else var a=o.initPoster,l=o.initVideoStyle,d=o.playOption.CDNVideo,p=setTimeout(function(){clearTimeout(p),d&&d.setAttribute("style",l),d&&d.setAttribute("poster",a)},1e3);r.updateCDNValidTime()},e.onError=function(a){var l;r.pn.networkState==Z.D2.offline&&(e.canRetry=!1),(l=r.dm)===null||l===void 0||l.setAttributes({stop_reason:j.V0.stop_reason(a)}),r.updateCDNValidTime()},e.onCanplay=function(){r.onCDNPlayerCanplay(t,n)}},s.prototype.selectCDNSource=function(e,t,n){var r=this.Sp(e),o="",a=this.dm;if(r)o=t[0],a==null||a.setAttributes({protocol:j.V0.protocol("flv")});else if(e.isSupportFLV()&&(t==null?void 0:t.length)>0)o=t[0],a==null||a.setAttributes({protocol:j.V0.protocol("flv")});else if(e.isSupportHLS()&&(n==null?void 0:n.length)>0)o=n[0],a==null||a.setAttributes({protocol:j.V0.protocol("hls")});else if(!this.cdnUrl)return null;return o?o=o.replace("http://","https://"):null},s.prototype.updateCDNValidTime=function(){this.cdnPlayTime&&(this.pp+=Date.now()-this.cdnPlayTime,this.cdnPlayTime=0)},s.prototype.setCdnState=function(e){this.state=e},s.prototype.renderMediaStreamByCdnPlayer=function(e){var t=this,n="zc.cph.rbcp",r=this.Bv;this.an.info(n+" switch media webrtc success");var o=r.initPoster,a=r.initVideoStyle,l=r.playOption.CDNPlayer,d=r.playOption.CDNVideo,p=!!r.zegoExpressPlayer;if(this.pn.browser==="safari"&&!p&&d&&r._CDNPlayerClone){var u=d.parentElement;if(u){var v=he.VJ.createElement("style"),x=d.cloneNode(!0),U=Date.now().toString(16);v.innerText=".zego_cdn_video_".concat(U," .zego_clone_video_").concat(U,"{width:").concat(d.offsetWidth,"px;height:").concat(d.offsetHeight,"px;}")+".zego_cdn_video_".concat(U," .hide_").concat(U,"{display:none!important;width:0;height:0}"),he.VJ.head.append(v),x.classList.add("zego_clone_video_".concat(U)),x.id=r.streamId+"_clone",x.src="",x.srcObject=e,x.classList.add("hide_".concat(U)),d.before(x),u.classList.add("zego_cdn_video_".concat(U));var te=setTimeout(function(){clearTimeout(te),d.classList.add("hide_".concat(U)),x.classList.remove("hide_".concat(U))},2e3),le=setTimeout(function(){clearTimeout(le),r.playOption.CDNVideo=x,t.stopCDNPlayer(),u.classList.remove("zego_cdn_video_".concat(U)),d.classList.remove("zego_cdn_video_".concat(U)),x.classList.remove("zego_clone_video_".concat(U)),x.id=d.id,v.remove(),d.remove()},4e3)}}else if(this.stopCDNPlayer(),p&&e)this.an.info(n+" express player switch to play webrtc"),l._extApi.srcObject=e,l.play();else{var se=setTimeout(function(){clearTimeout(se),d&&d.setAttribute("style",a),d&&d.setAttribute("poster",o)},1e3);e&&d&&(d.srcObject=e)}},s})(),Df=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Qi=function(){return Qi=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Qi.apply(this,arguments)},Of=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},Lf=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},ds=j.Nr,fa=j.Nr.event,wl=j.Nr.error,Wi=j.oW,Xo=j.zF,rf=j.er.event,Mf=j.TW.event,Uf=j.V0.event;(function(s){s.beforePublish="beforePublish",s.publishing="publishing",s.afterPublish="afterPublish"})(js||(js={}));var Bf=(function(s){function e(t,n,r,o,a,l,d,p,u,v,x,U,te){var le,se=this;(se=s.call(this,n,t)||this).an=n,se.gn=d,se.ac=p,se.pn=u,se.room=v,se.streamSid=U,se.isDataChannel=te,se.Op=void 0,se.Ip=void 0,se.Rp=void 0,se.jl={state:"NO_PLAY",code:0},se.probedList=[],se.probeTime=0,se.probeTimer=null,se.probeNodeList=[],se.hasSucceed=!1,se.Tp=0,se.Ap=0,se.pulledTimeStamp=0,se.firstPulledTimeStamp=0,se.zp=0,se.Dp=0,se.CDNBrokenCnt=0,se.serverUrl=va,se.isCenterNode=!0,se._state=7,se.lastState=7,se.broadcasterStatus=I.ku.stop,se.isExternal=!1,se.reportPlayStateTime=0,se.streamInRoom=!0,se.playStartTime=0,se.Np=0,se.Rd=0,se.Td=0,se.poorQualityRetryCnt=0,se.Cd=[],se.continuousFailCnt=0,se.Pp=0,se.remoteStream=null,se.playStream=null,se.rtcViewer=null,se.pm={},se.Mp={video:!0,audio:!0,expireTime:0},se.isServerMuteVideo=!1,se.isServerMuteAudio=!1,se.jp=null,se.av=null,se.rd=25e3,se.cameraStatus=0,se.micStatus=0,se.soundLevel=0,se.mic=null,se.beginTime=0,se.firstFrameTime=0,se.playMode=I.ey.RTC,se.Od=!0,se.isProbe=!1,se.Id=0,se.initPoster="",se.initVideoStyle="",se.firstPlay=!0,se.isProbeByDG=!1,se.useResourceTypes=[],se.tryidx=0,se._CDNPlayerClone=null,se.signalTime=0,se.stopReason="",se.ql=!1,se.probeQuality=0,se.ip="",se.port=0,se.audioMuteState="0",se.videoMuteState="0",se.qp=null,se.Lp=0,se.Bp="",se.Up=0,se.Gp=0,se.Jp=js.beforePublish,se.soundMeterWorklet=null,se.Fp=!1,se.Hp={},se.isProbe||(se.Vp=(0,he.fU)(se.cr,I.t0.I,t,fa,Gn.event,void 0,!0)),se.id=jn("".concat(d.appid,"_").concat(u.idName,"_").concat(t,"_").concat(Date.now(),"_").concat((0,I.Mo)())),se.beginTime=Date.now(),se.va=t,r&&se.setSignal(r),se.dataReport=o,se.qualityHandler=new Qc(a,l,se,se.an,se.dataReport,se.pn),se.qualityHandler.onRecvMediaData=function(){var Ke;se.isProbe||!((Ke=se.Qp)===null||Ke===void 0)&&Ke.streamNotFoundTime&&(se.Qp.streamNotFoundTime=0,se.info("zc.p.ormd.1 reset streamNotFoundTime"))},se.qualityHandler.onFindDecodeException=function(Ke){var Ze,et;if(!se.isProbe){var ht=(Ze=se.room.streamList)===null||Ze===void 0?void 0:Ze.find(function(Et){return Et.stream_id===se.va}),gt="zc.p.ofde.1 may fail to decode. v: ".concat(Ke," , ").concat((et=ht==null?void 0:ht.stream_attr_opts)===null||et===void 0?void 0:et.stream_codec);se.playOption.transcodeOnDecodeFail&&se.Qp&&(se.au("transcode_on_zero_fps",!0)!==1||se.Qp.needTranscode||(gt+=" ; need transcode",se.Qp.needTranscode=Ft.SCx.code,se.playStateUpdateError(Ft.SCx,!1,void 0,!0))),se.warn(gt)}},se.qualityHandler.onPlayingError=function(Ke){se.playStateUpdateError(Ke)},se.playMediaStatus={video:!se.gn.defaultVideoMuted,audio:!se.gn.defaultAudioMuted},se.info("zc.p.1 set playMediaStatus ".concat(JSON.stringify(se.playMediaStatus))),se.Mm=se.au("resource_mode"),se.retryStreamHandler=new ef(se.streamId,se.an,se.pn,se.gn,!1),x&&(se.pm=x,x.CDNPlayer&&(se.getCDNHandler().cdnPlayer=x.CDNPlayer),se.initResourceMode(x.resourceMode)),se.initStreamReport();var We=Qi(Qi({},x),{CDNVideo:void 0,CDNPlayer:void 0});return(le=se.Vp)===null||le===void 0||le.setAttributes({stream_id:ds.stream_id(t),stream_sid:ds.stream_sid(U),play_option:ds.play_option(We),video_codec_id:ds.video_codec_id(x==null?void 0:x.videoCodec),use_na:ds.use_na(1),biz_product:(x==null?void 0:x.resourceMode)==I.qP.DG?1:0,resource_mode:ds.resource_mode(se.resourceMode),src:ds.src(se.playMode),room_id:ds.room_id(v==null?void 0:v.roomID),room_sid_string:ds.room_sid_string(v==null?void 0:v.roomSessionID),is_multi:ds.is_multi(se.pn.isMultiRoom)}),se}return Df(e,s),Object.defineProperty(e.prototype,"zegoPeer",{get:function(){return this.Qp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Qp",{get:function(){var t=void 0;switch(this.playMode){case I.ey.RTC:t=this.Op;break;case I.ey.L3:t=this.Ip}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerConnection",{get:function(){var t;return(t=this.Qp)===null||t===void 0?void 0:t.peerConnection},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){var t;return(t=this.Qp)===null||t===void 0?void 0:t.signal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"curCBState",{get:function(){return this.jl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pp",{get:function(){var t;return((t=this.Rp)===null||t===void 0?void 0:t.pp)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamConnectIP",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.streamConnectIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zegoExpressPlayer",{get:function(){var t;return(t=this.Rp)===null||t===void 0?void 0:t.zegoExpressPlayer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zegoCdnPlayer",{get:function(){var t;return(t=this.Rp)===null||t===void 0?void 0:t.zegoCdnPlayer},enumerable:!1,configurable:!0}),e.prototype.updateCBState=function(t){var n=this,r=Object.keys(t).some(function(o){return t[o]!==n.jl[o]});return r&&(this.jl=t),r},Object.defineProperty(e.prototype,"state",{get:function(){var t;return this.playMode==I.ey.CDN?this.Rp?this.Rp.state:7:((t=this.Qp)===null||t===void 0?void 0:t._state)===void 0?7:this.Qp._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.va},set:function(t){this.va=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.sessionId)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playOption",{get:function(){return this.pm},set:function(t){this.pm=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stateNego",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.stateNego)||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resourceMode",{get:function(){return this.Mm},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNode",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.gwNode)||""},set:function(t){this.Qp&&(this.Qp.gwNode=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNodeList",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.gwNodeList)||[]},set:function(t){this.Qp&&(this.Qp.gwNodeList=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gwNodesTTL",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.gwNodesTTL)||0},set:function(t){this.Qp&&(this.Qp.gwNodesTTL=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNodesEmpty",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.isNodesEmpty)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ipNodeType",{get:function(){var t;return this.Qp?(t=this.Qp)===null||t===void 0?void 0:t.ipNodeType:k.ZV4Priority},set:function(t){this.Qp&&(this.Qp.ipNodeType=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ipV6Prefer",{get:function(){var t;return this.Qp?(t=this.Qp)===null||t===void 0?void 0:t.ipV6Prefer:1},set:function(t){this.Qp&&(this.Qp.ipV6Prefer=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPeer",{get:function(){return this.Od},set:function(t){this.Od=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"peerID",{get:function(){return this.Id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryFailGwNodes",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.retryFailGwNodes)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryFailIpV4Nodes",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.retryFailIpV4Nodes)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"retryFailIpV6Nodes",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.retryFailIpV6Nodes)||[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ipV4NodeList",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.ipV4NodeList)||[]},set:function(t){this.Qp&&(this.Qp.ipV4NodeList=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ipV6NodeList",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.ipV6NodeList)||[]},set:function(t){this.Qp&&(this.Qp.ipV6NodeList=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ipNode",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.ipNode)||null},set:function(t){this.Qp&&t&&(this.Qp.ipNode=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStreaming",{get:function(){return this.state===6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"probeState",{get:function(){return this.qualityHandler.probeState},set:function(t){this.qualityHandler.probeState=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"qualityGrade",{get:function(){var t=this.qualityHandler.Wh;return Math.max(t.video.videoQuality,t.audio.audioQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netQuality",{get:function(){return this.qualityHandler.hf},set:function(t){this.qualityHandler.hf=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPlayStats",{get:function(){return this.qualityHandler.Uv},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStateRetry",{get:function(){return[0,7,8].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceStateDisConnect",{get:function(){return[7,6,8].includes(this.stateNego)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLastConnected",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.lastState)===6},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStat",{get:function(){return this.qualityHandler.playStat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"webrtcProtocol",{get:function(){return this.qualityHandler.df},enumerable:!1,configurable:!0}),e.prototype.changePlayMode=function(t){var n,r,o=this,a="zc.ply.cpm",l=this.playMode;if(t!==l){this.info(a+" change mode "+t);var d=(0,he.fU)(this.cr,I.t0.H,this.streamId,j.AW.event,j.Nr.event);(0,he.lA)(d,{src:j.AW.src(t),last_src:j.AW.last_src(l)});var p=!1;t!==I.ey.CDN&&l!==I.ey.CDN||(p=!0),this.resetPlay(p,0),this.gn.removeStreamFromSignal(!1,this.streamId,15e3);var u=this.retryStreamHandler;u.endRtcPlaySpan(this.streamId,void 0,this),this.playMode=t;var v=!0;this.playMode===I.ey.L3?(this.serverUrl=Ja,v=!1):(this.serverUrl=va,v=!0),this.useResourceTypes.push(this.playMode),this.useResourceTypes=Array.from(new Set(this.useResourceTypes)),this.playMode===I.ey.CDN?this.playCDN():(u.startMaxTime(),u.playStartSpan(this.streamId,this,!0),this.gn.connectWebRTCCenterServer(!1,v,(n=this.room)===null||n===void 0?void 0:n.roomID,(r=this.room)===null||r===void 0?void 0:r.token,function(x){o.gn.rePlayStream(o.streamId,x)}))}else this.info(a+" no change.")},Object.defineProperty(e.prototype,"ipStack",{get:function(){return Wo(this.ip)?ae.IPv6:ae.IPv4},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){var t;return(t=this.Qp)===null||t===void 0?void 0:t.dataChannel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onDataChannelList",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.onDataChannelList)||[]},set:function(t){this.Qp&&(this.Qp.onDataChannelList=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"netProtocol",{get:function(){var t,n;return!((t=this.Qp)===null||t===void 0)&&t.turnToTcp?"tcp":!((n=this.Qp)===null||n===void 0)&&n.autoTcp?this.webrtcProtocol:"udp"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMiniSdp",{get:function(){var t;return((t=this.Qp)===null||t===void 0?void 0:t.$u)||!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seiWorker",{get:function(){return this.gn.seiWorker},enumerable:!1,configurable:!0}),e.prototype.au=function(t,n){return n===void 0&&(n=!1),this.pn.settingConfig.getSetting(t,n)},Object.defineProperty(e.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this.an},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completePlaySpan",{get:function(){return this.Vp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playingEvent",{get:function(){var t=rf;switch(this.playMode){case I.ey.L3:t=Mf;break;case I.ey.RTC:t=rf;break;case I.ey.CDN:t=Uf}return t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playStartEvent",{get:function(){return this.hasSucceed?j.aT.event:Xo.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStreamNotFound",{get:function(){var t;return!!(!((t=this.Qp)===null||t===void 0)&&t.streamNotFoundTime)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowAutoSwitchResource",{get:function(){return[I.qP.DG,I.qP.CUSTOM].includes(this.Mm)},enumerable:!1,configurable:!0}),e.prototype.initResourceMode=function(t){if((0,B.Cs)(t)&&[0,1,2,3,5].includes(t)){var n=wr(t);if(this.Mm=t,t===I.qP.DG)n=I.ey.L3;else if(t===I.qP.CUSTOM){var r=this.playOption.customResourceConfig||{},o=r.beforePublish,a=void 0;this.gn.publishersLength>0?(a=r.publishing,this.Jp=js.publishing):(a=o,this.Jp=js.beforePublish),n=a===I.qP.L3?I.ey.L3:a===I.qP.CDN?I.ey.CDN:I.ey.RTC}this.useResourceTypes.push(n),this.playMode=n,n===I.ey.L3&&(this.serverUrl=Ja),this.info("zc.ply.cpm init mode "+n)}return this.playMode},e.prototype.changePublishOccasion=function(t){var n=this.Jp,r=this.pm.resourceMode===I.qP.CUSTOM,o=this.pm.customResourceConfig||{},a=o.afterPublish,l=o.publishing;if(t&&n!==js.publishing){if(this.Jp=js.publishing,r&&(0,B.Cs)(l))return this.changePlayMode(wr(l))}else if(!t&&n!==js.afterPublish&&n===js.publishing&&(this.Jp=js.afterPublish,r&&(0,B.Cs)(a)))return this.changePlayMode(wr(a))},e.prototype.setSignal=function(t){var n=this.Qp;n?n.setSignal(t):n=this.Yp(this.playMode,t),this.info(Ce.QU$+" set signal "+t.server+" peer:"+(n==null?void 0:n.playMode))},e.prototype.netProbeToReDispatch=function(t,n){t===void 0&&(t=function(){}),n===void 0&&(n=function(){}),this.ql=!0;var r=this==null?void 0:this.retryStreamHandler;r&&r.dispatchGwNodesBypass(this,t,n)},e.prototype.initStreamReport=function(){this.tv=this.cr.createSpan(I.t0.I,{key:fa,par:this.va},{key:Wi.event,par:this.va},Wi.event,!0),this.playStartTime=new Date().getTime()},e.prototype.startPlay=function(t,n){var r,o,a,l,d,p,u,v=this;this.info(Ce.QU$+" called ");var x=this.pm||{};if(t){var U=this.Qp;if(U){this.getRemoteStreamSuc=n,this.playMediaStatus={video:this.playMediaStatus.video&&(this.pm.video===void 0||!!this.pm.video),audio:this.playMediaStatus.audio&&(this.pm.audio===void 0||!!this.pm.audio)},x&&x.videoCodec&&(this.pm.videoCodec=x.videoCodec),(r=this.Vp)===null||r===void 0||r.setAttributes({video_layer:ds.video_layer(this.pm.streamType===2?-1:this.pm.streamType||1)});var te=this.au("play_video_codec",!0);te&&(this.info(Ce.QU$+" setting play_video_codec "+te),this.pm.videoCodec=te);var le=((o=this.pm)===null||o===void 0?void 0:o.resourceMode)==I.qP.DG?1:0;(a=this.$h)===null||a===void 0||a.setAttributes({is_peer:Xo.is_peer(this.Od),is_mini:Xo.is_mini(this.isMiniSdp)});var se={};!((l=this.Qp)===null||l===void 0)&&l.Fl||(se.is_mini=this.isMiniSdp),(d=this.Vp)===null||d===void 0||d.setAttributes(Qi({audio_activate:ds.audio_activate(this.pm.audio==1||this.pm.audio!=0),video_activate:ds.video_activate(this.pm.video==1||this.pm.video!=0),biz_product:ds.biz_product(le),is_peer:ds.is_peer(this.Od)},se)),this.tv.setAttributes({room_id:Wi.room_id((p=this==null?void 0:this.room)===null||p===void 0?void 0:p.roomID),room_sid_string:Wi.room_sid_string((u=this==null?void 0:this.room)===null||u===void 0?void 0:u.roomSessionID)}),U.connectGW().then(function(We){n&&n(We)}),this.av!=null&&(clearTimeout(this.av),this.av=null),this.av=setTimeout(function(){v.error(Ce.QU$+" waiting timeout"),v.playStateUpdateError(wl.Te)},this.rd),this.isProbe&&this.qualityHandler.startProbeTimeout()}else this.error(Ce.QU$+" no peer")}else this.warn(Ce.QU$+" streamId is null")},e.prototype.Yp=function(t,n){var r=this;if([I.ey.L3,I.ey.RTC].includes(t)){var o=t===I.ey.L3,a=this.Qp;return a||(this.info(Ce.QU$+" create peer "+t),a=new Nf(this,t,n,this.an,this.dataReport,this.tv,this.gn,this.pn,this.room,this.pm)),a.onCanStopNegaTimer=function(){r.av!=null&&(clearTimeout(r.av),r.av=null)},a.onNeedReplay=function(){r.resetPlay(!0,0),r.startPlay(r.va,r.getRemoteStreamSuc)},a.onPlayStateUpdateError=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];r.playMode===(a==null?void 0:a.playMode)&&r.playStateUpdateError.apply(r,l)},a.onPlayBFrameEvent=function(l){r.qualityHandler.setHasBFrames(l)},a.onPlayStreamEnd=function(l){r.qualityHandler.setPlayStreamEnd(l)},a.onGwPlayNetState=function(l){r.qualityHandler.updateGwPlayNetState(l)},a.onPlayStateUpdate=function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];r.playMode===(a==null?void 0:a.playMode)&&r.onPlayStateUpdate.apply(r,l)},a.onIceConnected=function(l,d){var p,u,v=r==null?void 0:r.retryStreamHandler;for(var x in v==null||v.getTryTime(r,!0),r.hasSucceed=!0,r.Pp++,r.continuousFailCnt=0,r.reportPlayStateTime=Date.now(),r.ql=!1,r.$h&&(0,he.lA)(r.$h,{signal_consume:Xo.signal_consume(r.signalTime),is_peer:Xo.is_peer(r.Od),peer_id:Xo.peer_id(r.peerID),source_type:Xo.source_type(r.playMode),net_protocol:Xo.net_protocol(r==null?void 0:r.netProtocol),tryidx:Xo.tryidx(r.tryidx)},!1),r.isProbe||r.dm||(r.dm=(0,he.fU)(r.cr,I.t0.I,r.streamId,r.playingEvent,j.Nr.event,void 0,!0)),r.getConnectIP(),r.gn.publisherList)if(r.gn.publisherList[x].publisher.state==6&&r.broadcasterStatus==I.ku.stop){a==null||a.sendBroadcasterStatus(1),r.broadcasterStatus=I.ku.start;break}if(!r.isProbe){r.qualityHandler.setPlayQualityTimer();var U=r.au("probe_started_num");!isNaN(U)&&(r.gn.probeStartedNum=U)}var te,le,se;((se=r.pn.browser)==="firefox"||se==="chrome"&&(te=0,(le=((0,or.$t)().toLowerCase().match(/chrome\/([\d.]+)/)||[])[1])&&(te=parseInt(le.split(",")[0])),te<72))&&r.Kp(l,d);var We=r.Hp,Ke=We.v,Ze=We.a;(0,B.Cs)(Ke)&&r.onRemoteCameraStatusUpdate(Ke),(0,B.Cs)(Ze)&&r.onRemoteMicStatusUpdate(Ze),r.allowAutoSwitchResource&&(r.playMode===I.ey.RTC?(p=r.Ip)===null||p===void 0||p.close(0):r.playMode===I.ey.L3&&((u=r.Op)===null||u===void 0||u.close(0)))},a.onGetIP=function(){r.state===6&&r.getConnectIP()},a.onPeerConnected=this.Kp.bind(this),a.onRecvRemoteStream=function(l){if(r.remoteStream=l,r.playStream){var d=r.rtcViewer;l.clone().getTracks().forEach(function(p){var u=p.kind==="video",v=[];(v=u?r.playStream.getVideoTracks():r.playStream.getAudioTracks()).includes(p)||(v.forEach(function(x){return r.playStream.removeTrack(x)}),(!u||r.playMediaStatus.video&&[0,20].includes(r.cameraStatus))&&(r.info(Ce.Nw2+" add track "+u),r.playStream.addTrack(p),d&&d.setTrack(u,p,r.pn.browser==="safari"),r.pn.actionListener(u?"playerVideoTrackUpdate":"playerAudioTrackUpdate",r.va,p))),u||r.Zp()})}else r.playStream=l.clone(),r.info(Ce.Nw2+" clone");r.Rp&&r.Rp.renderMediaStreamByCdnPlayer(r.playStream),r.gn.soundLevelDelegate&&!r.isProbe&&r.startSoundLevel(),r.audioMuteState=l.getAudioTracks().length>0?"0":"1",r.videoMuteState=l.getVideoTracks().length>0?"0":"1"},a.onRecvStreamStatus=this.Xp.bind(this),a.onRecvMixSoundLevels=function(l){r.Wp(l)},a.onRecvNetQuality=function(l,d,p){r.playMode===(a==null?void 0:a.playMode)&&(r.qualityHandler.stopProbeTimeout(),l==0&&(0,B.Cs)(d)&&(0,B.Cs)(p)?(r.isProbeByDG=!1,r.onCalNetQualityResult(0,st(p,d))):r.onCalNetQualityResult(1))},a.onRecvNetQualityGrade=function(l){var d,p;if(r.playMode===(a==null?void 0:a.playMode)){var u=l;r.Bp=r.Bp||((p=(d=r.gn.playerList[r.va])===null||d===void 0?void 0:d.room.streamList.find(function(v){return v.stream_id==r.va}))===null||p===void 0?void 0:p.id_name),r.Bp&&(r.pn.actionListener("networkQuality",r.Bp,u==null?void 0:u.tx_quality,u==null?void 0:u.rx_quality),!r.qp&&r.startPollNetworkQuality(),r.Lp=0)}},o?this.Ip=a:this.Op=a,a}},e.prototype.resetGwNodes=function(){var t;(t=this.Qp)===null||t===void 0||t.resetGwNodes()},e.prototype.setGwNodes=function(t,n,r,o){var a;(a=this.Qp)===null||a===void 0||a.setGwNodes(t,n,r,o)},e.prototype.dispatchGwNodes=function(t,n,r){var o;(o=this.Qp)===null||o===void 0||o.dispatchGwNodes(t,n,r)},e.prototype.resetPlay=function(t,n){var r,o,a;t===void 0&&(t=!0),this.info(Ce.ruA+" call"),t&&((r=this.Op)===null||r===void 0||r.close(n),(o=this.Ip)===null||o===void 0||o.close(n),(a=this.Rp)===null||a===void 0||a.stopCDNPlayer()),this.ip="",this.av!=null&&(clearTimeout(this.av),this.av=null),this.qualityHandler.stopProbeTimeout(),this.qualityHandler.clearPlayQualityTimer(),this.stopSoundLevel(),this.Up=0,this.Gp=0},e.prototype.playStateUpdateError=function(t,n,r,o){if(this.error(Ce.Rbr+" call "+JSON.stringify(t)),!this.isProbe){var a=this.cr.createSpan(I.t0.H,{key:fa,par:this.va},{key:""},j.$g.event);a.setAttributes({error:t==null?void 0:t.code,message:t==null?void 0:t.message}),a.end()}this.isProbe?this.onCalNetQualityResult(1):this.va&&this.onPlayStateUpdate(I.h7.error,this.va,t,n,r,o),this.info(Ce.Rbr+" ended")},e.prototype.getCameraMicStatus=function(t){return t==0?"OPEN":"MUTE"},e.prototype.onPlayStateUpdate=function(t,n,r,o,a,l){(n&&this.gn.playerList[n])===this?this.retryStreamHandler.playStateHandle(t,this.streamId,r,o,a,l):this.error("zsc.pss.1 cannot find play"),t===I.h7.start&&(r==null?void 0:r.code)===0&&(this.gn.playModule&&this.$p(),this.gn.supplementPlayingChargeTime(),this.qualityHandler.resetCallbackState())},e.prototype.onPlayQualityUpdate=function(t,n){},e.prototype.getStopReason=function(t){var n="StopPlay";return t&&t.code&&(t.code===1104031?n="ReachMaxAVRetryTime":n="StopPlay"),n},e.prototype.Wp=function(t){var n=this,r=t.map(function(d){var p,u,v=((u=(p=n.room.streamList)===null||p===void 0?void 0:p.find(function(x){return x.stream_nid===d.soundLevelID}))===null||u===void 0?void 0:u.stream_id)||"";return Qi(Qi({},d),{streamID:v})}),o=new Map(r.map(function(d){return[d.soundLevelID,d.value]})),a=r.filter(function(d){return d.streamID}).map(function(d){return[d.streamID,d.value]}),l=new Map(a);this.pn.actionListener("mixerSoundLevelUpdate",o,this.va),l.size&&this.pn.actionListener("autoMixerSoundLevelUpdate",l,this.va)},e.prototype.stopPlay=function(t){var n,r,o,a,l,d;this.info(Ce.W8t+" called");var p=this.getStopReason(t);for(var u in this.gn.publisherList)if(this.gn.publisherList[u].publisher.state==6&&this.broadcasterStatus==I.ku.start){this.sendBroadcasterStatus(0),this.broadcasterStatus=I.ku.stop;break}var v=(r=this.Qp)===null||r===void 0?void 0:r.$u,x=this.isStreaming?0:this.lastFailTimeLen;if(!this.isProbe){var U=Date.now()-this.reportPlayStateTime;[0,2].includes(this.Mm)&&this.tv.setAttributes({play_state_time:Wi.play_state_time(U||0)}),this.dm&&this.endPlayingSpan({stop_reason:j.er.stop_reason(p),try_time:j.er.try_time(x)}),(t==null?void 0:t.code)==wl.De.code&&this.uploadPlayEvent(t),this.seiWorker&&this.seiWorker.postMessage({cmd:"clear",type:"pull",streamID:this.va})}if(this.stopPollNetworkQuality(),this.resetPlay(!0,0),this.Zc(),!this.isProbe){var te=this.qualityHandler,le=te.Qv,se=te.Yv,We=((n={}).l3_a_break_time=se.cumulativeBreakDurationL3,n.l3_a_decode_time=se.cumulativeDecodeDurationL3,n.l3_v_break_time=le.cumulativeBreakDurationL3,n.l3_v_decode_time=le.cumulativeDecodeDurationL3,n.rtc_a_break_time=se.cumulativeBreakDurationRtc,n.rtc_a_decode_time=se.cumulativeDecodeDurationRtc,n.rtc_v_break_time=le.cumulativeBreakDurationRtc,n.rtc_v_decode_time=le.cumulativeDecodeDurationRtc,n.audio_cumulative_break_time=se.cumulativeBreakDuration,n.audio_cumulative_decode_time=se.cumulativeDecodeDuration,n.video_cumulative_break_time=le.cumulativeBreakDuration,n.video_cumulative_decode_time=le.cumulativeDecodeDuration,n),Ke=Date.now(),Ze=this.firstPulledTimeStamp;this.updateValidTime(t);var et=0;t&&t.code!==0&&(et=t.code===Ft.I4J.code?this.latestPlayErrCode:t.code),this.tv.setAttributes(Qi(Qi({biz_product:((o=this.pm)===null||o===void 0?void 0:o.resourceMode)==I.qP.DG?1:0,webrtc_sid:Wi.webrtc_sid(this.sessionId),max_retry_interval:Wi.max_retry_interval(this.pn.streamRetryTime),probe_ip_cnt:Wi.probe_ip_cnt(this.Rd),valid_probe_ip_cnt:Wi.valid_probe_ip_cnt(this.Td),poor_quality_retry_cnt:Wi.poor_quality_retry_cnt(this.poorQualityRetryCnt),probe_not_trigger_retry_info:Wi.probe_not_trigger_retry_info(this.Cd.length>0?this.Cd:void 0),fail_cnt:Wi.fail_cnt(Math.max(this.tryidx-1,0)),continuous_fail_cnt:Wi.continuous_fail_cnt(Math.max(this.continuousFailCnt-1,0)),try_time:Wi.try_time(x),use_resource_type:Wi.use_resource_type(this.useResourceTypes),use_na:j.oW.use_na(1),play_state_cnt:Wi.first_frame_time(this.Pp),protocol:Wi.protocol("webrtc"),dispatch_external_ip:Wi.dispatch_external_ip(this.pn.clientIP),w:Wi.w((a=this.playStat)===null||a===void 0?void 0:a.frameWidth),h:Wi.h((l=this.playStat)===null||l===void 0?void 0:l.frameHeight),stop_reason:Wi.stop_reason(p),error:(t==null?void 0:t.code)||0,last_error:et,message:(t==null?void 0:t.message)||"",cdn_a_break_time:0,cdn_a_decode_time:0,cdn_v_break_time:0,cdn_v_decode_time:0},We),{total_d:Ze?Ke-Ze:0,valid_d:this.Tp+this.Ap+this.pp,tempbroken_cnt:this.zp+this.Dp+this.CDNBrokenCnt,is_mini:v})),this.tv.end()}this.gn.stopToReport(1),this.gn.stopNetProbe(this),(d=this.Qp)===null||d===void 0||d.stopPlay(),this.tg(),this.ig(),this.hasSucceed=!1,this.tryidx=0,this.ql=!1,this.Rd=0,this.Td=0,this.poorQualityRetryCnt=0,this.continuousFailCnt=0;var ht=this.rtcViewer;ht&&ht.destroy()},e.prototype.uploadPlayEvent=function(t){var n,r;if(this.Vp){var o={};this.Qp&&(!((n=this.Qp)===null||n===void 0)&&n.Jl)&&(o.mini_retry_consume=+((r=this.Qp)===null||r===void 0?void 0:r.Jl.toFixed(0)),this.Qp.resetMiniReportInfos()),(0,he.lA)(this.Vp,Qi(Qi({},o),{error:t.code,message:t.message}))}this.Vp=void 0},e.prototype.onDisconnect=function(t){this.info(Ce.Toj+" call"),this.playStateUpdateError(t||wl.Wn,!!t)},e.prototype.startSoundLevel=function(){var t,n=this;if(this.info(Ce.cuT+" call"),!this.isProbe)if(this.remoteStream&&this.remoteStream.getAudioTracks().length!=0){(t=this.soundMeterWorklet)===null||t===void 0||t.destroy(),this.mic=null;var r=this.gn.getCloudSoundInterval();try{var o=this,a=this.gn.createSoundLevel(this.ac,this.remoteStream,this.gn.soundLevelInterval,r,function(d){o.soundLevel=n.micStatus===0?100*d:0}),l=a.mic;this.soundMeterWorklet=a.soundMeter,this.mic=l}catch(d){this.error(Ce.cuT+" get sound level failed "+d)}}else this.info(Ce.cuT+" remote stream no found")},e.prototype.stopSoundLevel=function(){var t;this.info(Ce.SKc+" call"),this.soundLevel=0,(t=this.soundMeterWorklet)===null||t===void 0||t.destroy(),this.mic=null},e.prototype.onCalNetQualityResult=function(t,n){},e.prototype.uploadRTCPlayStats=function(){var t,n,r,o,a,l,d,p,u,v,x,U,te,le,se,We;this.lastPlayStats.time&&((t=this.dm)===null||t===void 0||t.setAttributes({lsttime:j.er.lsttime(parseInt(this.lastPlayStats.time)),total_stat:j.Jv.total_stat({afc:(n=this.lastPlayStats)===null||n===void 0?void 0:n.audioPacketsReceived,vfc:(r=this.lastPlayStats)===null||r===void 0?void 0:r.framesReceived,tfc:((o=this.lastPlayStats)===null||o===void 0?void 0:o.audioPacketsReceived)+((a=this.lastPlayStats)===null||a===void 0?void 0:a.framesReceived),vb:(l=this.lastPlayStats)===null||l===void 0?void 0:l.videoBytesReceived,ab:(d=this.lastPlayStats)===null||d===void 0?void 0:d.audioBytesReceived,tb:((p=this.lastPlayStats)===null||p===void 0?void 0:p.videoBytesReceived)+((u=this.lastPlayStats)===null||u===void 0?void 0:u.audioBytesReceived),rtp_rtt:Math.round(1e3*((v=this.playStat)===null||v===void 0?void 0:v.currentRoundTripTime))||0,w:(x=this.playStat)===null||x===void 0?void 0:x.frameWidth,rtp_plr:(U=this.playStat)===null||U===void 0?void 0:U.videoPacketsLostRate,h:(te=this.playStat)===null||te===void 0?void 0:te.frameHeight,rtp_bw:!((le=this.playStat)===null||le===void 0)&&le.googAvailableSendBandwidth?(se=this.playStat)===null||se===void 0?void 0:se.googAvailableSendBandwidth:void 0,p2p_delay:(We=this.playStat)===null||We===void 0?void 0:We.peerToPeerDelay})}))},e.prototype.getViewer=function(){return this.playStream&&!this.rtcViewer&&(this.rtcViewer=new ll(this.playStream,this,{clearLastFrame:this.pn.engineConfig.playClearLastFrame})),this.rtcViewer},e.prototype.Kp=function(t,n){var r;this.isProbe||this.firstFrameTime!=0||(this.firstFrameTime=new Date().getTime()-this.beginTime,this.tv.setAttributes({first_frame_time:Wi.first_frame_time(this.firstFrameTime),fft_video:Wi.fft_video(this.firstFrameTime),fft_audio:Wi.fft_audio(this.firstFrameTime),biz_product:j.x6.biz_product(((r=this.pm)===null||r===void 0?void 0:r.resourceMode)==I.qP.DG?1:0)}),this.ng=this.firstFrameSpan("video",t,n),this.eg=this.firstFrameSpan("audio",t,n)),this.Fp&&this.rg(this.cameraStatus,this.micStatus)},e.prototype.rg=function(t,n){t===0&&this.ng&&(this.ng.setAttributes({dev_changed:j.x6.dev_changed(this.cameraStatus!==0)}),this.ng.spanReport(),this.ng=null),n===0&&this.eg&&(this.eg.setAttributes({dev_changed:j.Cp.dev_changed(this.micStatus!==0)}),this.eg.spanReport(),this.eg=null)},e.prototype.firstFrameSpan=function(t,n,r){var o,a=t==="video"?j.x6:j.Cp,l=(0,he.fU)(this.cr,I.t0.H,this.va,a.event,fa),d=this.streamInRoom?2:this.Np===0?0:1;return l.setAttributes({webrtc_sid:a.webrtc_sid(n),resource_type:a.resource_type(this.playMode),fft_consumed:a.fft_consumed(this.firstFrameTime),protocol:a.protocol("webrtc"),push_consumed:a.push_consumed(this.Np),prepare_recv_consumed:a.prepare_recv_consumed(this.signalTime),connected_consumed:a.connected_consumed(r),reliability:a.reliability(d),biz_product:a.biz_product(((o=this.pm)===null||o===void 0?void 0:o.resourceMode)==I.qP.DG?1:0),ip_stack:this.ipStack}),l==null||l.end(!1),l},e.prototype.isCustomCdn=function(){return!1},e.prototype.setStreamAdd=function(){this.streamInRoom||this.Np!==0||this.state===5||(this.Np=new Date().getTime()-this.playStartTime),this.state===6&&this.Rp&&this.Rp.retrySendTransCodecCmd()},e.prototype.setStreamUpdate=function(t){this.qualityHandler.setStreamUpdate(t)},e.prototype.startPollNetworkQuality=function(){var t=this;clearTimeout(this.qp),this.qp=setTimeout(function(){t.Lp++;var n=I.b3.Unknown,r=I.b3.Unknown;t.Bp&&t.Lp>1&&(t.Lp>3&&(n=I.b3.Die,r=I.b3.Die),t.pn.actionListener("networkQuality",t.Bp,n,r)),t.startPollNetworkQuality()},3e3)},e.prototype.stopPollNetworkQuality=function(){clearTimeout(this.qp),this.Lp=0},e.prototype.setAudioFrameCallback=function(t,n){this.info("zc.p.safc.0 call"),this.playStream?(this.Yc||(this.Yc=new Oh(this.ac,this.an)),this.Yc.setAudioFrameCallback(this.playStream,t!==null,function(r){t&&t(r)},n)):this.warn("zc.p.safc.0 no play stream")},e.prototype.Zc=function(){this.Yc&&(this.Yc.destroy(),this.Yc=null)},e.prototype.Zp=function(){var t;(t=this.Yc)===null||t===void 0||t.replaceSource(this.playStream)},e.prototype.updateValidTime=function(t){if(this.pulledTimeStamp){var n=0;t!=null&&t.code&&t.code!==Ft.I4J.code&&(n=1);var r=Date.now(),o=this.playMode,a=r-this.pulledTimeStamp;o==I.ey.RTC?(this.Tp=a,this.zp+=n):o===I.ey.L3&&(this.Ap=a,this.Dp+=n),this.pulledTimeStamp=0}},e.prototype.updateCDNValidTime=function(){var t;(t=this.Rp)===null||t===void 0||t.updateCDNValidTime()},e.prototype.setMuteStreamByPlayMode=function(t){this.info(Ce.Ze2+" call: ".concat(JSON.stringify(t)));var n=t.play_mode,r=n===void 0?0:n,o=t.forbid_play_expire_time,a=1e3*(0,he.pl)(o===void 0?0:o),l=!Pn(r,0),d=!Pn(r,1);this.info(Ce.Ze2+" mode: ".concat(d,`,
        `).concat(l,`,
        `).concat(a,`,
        `).concat(JSON.stringify(this.Mp))),d!==this.Mp.video||l!==this.Mp.audio||a!==this.Mp.expireTime?((0,B.dd)(d)&&(this.Mp.lastVideo=this.Mp.video,this.Mp.video=d),(0,B.dd)(l)&&(this.Mp.lastAudio=this.Mp.audio,this.Mp.audio=l),a&&(this.Mp.expireTime=a),this.gn.playModule&&this.isStreaming&&this.$p()):this.info(Ce.Ze2+" mode not change")},e.prototype.$p=function(){var t=[void 0,!0].includes(this.pm.video),n=[void 0,!0].includes(this.pm.audio),r=this.Mp,o=r.video,a=r.audio,l=r.lastVideo,d=r.lastAudio,p=r.expireTime;this.info("".concat(Ce.ISq," ").concat(JSON.stringify(this.Mp)));var u=this.playMediaStatus,v=u.video,x=u.audio,U=p-(new Date().getTime()+this.pn.clientTimeOffset);this.info("".concat(Ce.ISq," remainTime ").concat(U));var te=!1,le=!1,se=!1,We=!1;this.og();var Ke=!1;this.isServerMuteVideo||l===!1&&o===!0?(te=!0,le=!o,Ke=!0):(te=!v,le=!v),this.isServerMuteAudio||d===!1&&a===!0?(se=!0,We=!a,Ke=!0):(se=!x,We=!x),t&&te&&this.ug("video",le,Ke),n&&se&&this.ug("audio",We,Ke),this.ig(),(o===!1||a===!1)&&U>0&&this.ag(U)},e.prototype.ug=function(t,n,r,o){var a=this;this.info("".concat(Ce.cIs," ").concat(this.va," ").concat(t," ").concat(n));var l=this.gn.playModule;l&&l.mutePlayStream(this.va,t,n,!1).then(function(d){a.info("".concat(Ce.cIs," ").concat(a.va," mute ").concat(t,": ").concat(d));var p=function(x,U){a.pn.onExperimentalAPICallback({method:x,content:{roomID:a.room.roomID,streamID:a.va,mute:U}})},u=!a.playMediaStatus.video,v=!a.playMediaStatus.audio;t==="video"&&r&&a.cg!==u&&(p("onRecvRoomMuteVideoStream",u),a.cg=u),t==="audio"&&r&&a.hg!==v&&(p("onRecvRoomMuteAudioStream",v),a.hg=v),o&&o()})},e.prototype.ag=function(t){var n=this;this.info("".concat(Ce.Ox5," ").concat(this.va," ").concat(t)),this.jp=setTimeout(function(){var r=n.gn.playModule;if(n.info("".concat(Ce.Ox5," ").concat(n.va," ").concat(!!r)),r){var o=n.Mp,a=o.audio;o.video===!1&&n.ug("video",!1,!0,function(){n.og()}),a===!1&&n.ug("audio",!1,!0,function(){n.og()}),n.tg()}},t)},e.prototype.og=function(){var t=this.Mp,n=t.video,r=t.audio,o=t.expireTime-(new Date().getTime()+this.pn.clientTimeOffset);this.isServerMuteVideo=o>0&&n===!1,this.isServerMuteAudio=o>0&&r===!1},e.prototype.ig=function(){this.jp&&(clearTimeout(this.jp),this.jp=null)},e.prototype.tg=function(){this.Mp={video:!0,audio:!0,expireTime:0,lastVideo:!0,lastAudio:!0}},e.prototype.Xp=function(t,n,r){this.info("".concat(Ce.dw7," status camera_status: ").concat(t," mic_status: ").concat(n));var o=this.cameraStatus!==t;if((!this.Fp||o)&&this.onRemoteCameraStatusUpdate(t),(!this.Fp||this.micStatus!==n)&&this.onRemoteMicStatusUpdate(n),this.Fp=!0,this.cameraStatus=t,this.micStatus=n,this.videoMuteState=t===0?"0":"1",this.audioMuteState=n===0?"0":"1",(0,B.dd)(this.pm.video))this.info(Ce.dw7+" has set video option, ignore stream status");else if(this.handleVideoTrackForPlaying(o),this.pn.browser==="safari"&&r)for(var a=he.VJ.querySelectorAll("video, audio"),l=0;l<a.length;l++){var d=a[l];d.srcObject===this.playStream&&(this.info(Ce.dw7+" track changed. rerender stream"),d.srcObject=this.playStream)}this.rg(t,n)},e.prototype.handleVideoTrackForPlaying=function(t){var n=this;t===void 0&&(t=!1);var r=this.playStream;if(r){var o=this.rtcViewer,a=this.cameraStatus;if(a!==0&&a!==20||!this.playMediaStatus.video)o?t&&(this.info(Ce.dw7+" viewer clear last frame"),o.checkIfClearLastFrame()):r.getVideoTracks().forEach(function(d){d.enabled=!1,n.gn.trackUtils.stopTrack(d),r.removeTrack(d)});else if(r.getVideoTracks().length===0){var l=this.remoteStream.clone().getVideoTracks()[0];r.addTrack(l),o&&o.setVideo(l,this.pn.browser==="safari"),this.pn.actionListener("playerVideoTrackUpdate",this.va,l)}}},e.prototype.onRemoteCameraStatusUpdate=function(t){this.state===6?(this.Hp.v=void 0,this.gn.onRemoteCameraStatusUpdate(this.streamId,this.getCameraMicStatus(t),t)):(this.Hp.v=t,this.info(Ce.dw7+" v not playing. "))},e.prototype.onRemoteMicStatusUpdate=function(t){this.state===6?(this.Hp.a=void 0,this.gn.onRemoteMicStatusUpdate(this.streamId,this.getCameraMicStatus(t),t)):(this.Hp.a=t,this.info(Ce.dw7+" a not playing. "))},e.prototype.playCDN=function(t,n){var r=this,o="zc.ply.pcdn";this.info(o+" call"),this.getCDNHandler().playCDN(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];r.info(o+" success"),r.dm=(0,he.fU)(r.cr,I.t0.H,r.streamId,r.playingEvent,j.Nr.event,void 0,!0),n&&n.apply(void 0,a)},function(a){r.info(o+" fail. "+a),r.onPlayStateUpdate(I.h7.error,r.va,a,!0),t&&t(a)})},e.prototype.getCDNHandler=function(){return this.Rp||(this.Rp=new Is(this,this.an,this.cr,this.gn,this.pn)),this.Rp},e.prototype.endPlayingSpan=function(t){var n,r,o;if(t===void 0&&(t={}),this.dm){var a=this.room,l=this.playMode===I.ey.CDN,d=this!=null&&this.isStreaming?0:(n=this==null?void 0:this.retryStreamHandler)===null||n===void 0?void 0:n.getTryTime(this);return l||this==null||this.uploadRTCPlayStats(),(0,he.lA)(this.dm,Qi(Qi({stream_id:j.er.stream_id(this.streamId),room_id:j.er.room_id(a==null?void 0:a.roomID),room_sid_string:j.er.room_sid_string(a==null?void 0:a.roomSessionID),tryidx:j.er.tryidx(this.tryidx),ip:j.er.ip(this==null?void 0:this.ip),resource_type:j.er.resource_type(this.playMode),dispatch_external_ip:j.er.dispatch_external_ip(this.pn.clientIP)},l?{url:j.er.url((r=this.Rp)===null||r===void 0?void 0:r.cdnUrl),net_protocol:j.er.net_protocol("tcp")}:{protocol:j.er.protocol("webrtc"),url:j.er.url((o=this.signal)===null||o===void 0?void 0:o.server),try_time:j.er.try_time(d),net_protocol:j.er.net_protocol(this.netProtocol)}),t)),this.dm=void 0,!0}return!1},e.prototype.sendBroadcasterStatus=function(t){var n=this.Qp;n&&n.sendBroadcasterStatus(t)},e.prototype.ActivatePlayAudioStream=function(t,n,r){var o=this.Qp;o&&o.ActivatePlayAudioStream(t,n,r)},e.prototype.ActivatePlayVideoStream=function(t,n,r){var o=this.Qp;o&&o.ActivatePlayVideoStream(t,n,r)},e.prototype.getP2PNetStats=function(t,n){var r=this.Qp;r&&r.getP2PNetStats(t,n)},e.prototype.getConnectIP=function(){var t,n;if(this.streamConnectIP&&!this.ip){var r=Si(this.streamConnectIP),o=this.getIPByGwNode(r),a=o.ip,l=o.port;this.ip=a,this.port=l,this.info("zc.p.1.gci.0 ip: ".concat(a," ").concat(l)),(t=this.$h)===null||t===void 0||t.setAttributes({ip:Xo.ip(this.ip),port:Xo.port(this.port)}),(n=this.$h)===null||n===void 0||n.spanReport(),this.$h=void 0}},e.prototype.getIPByGwNode=function(t){var n;if(this.ipNode){var r=this.ipNode.vid.split("|"),o="";return r.forEach(function(d){var p=Si(d);t===p&&(o=d)}),{ip:o,port:this.ipNode.port}}if(this.gwNode){var a=(n=this.gwNode)===null||n===void 0?void 0:n.split(":"),l=a[a.length-1];return{ip:this.gwNode.replace(":"+l,""),port:parseInt(l)}}return{ip:"",port:0}},e.prototype.reportMiniSdpInfos=function(){var t;(t=this.Qp)===null||t===void 0||t.reportMiniSdpInfos(this.playStartEvent)},e.prototype.setPlayStreamVideoType=function(t){return Of(this,void 0,void 0,function(){var n;return Lf(this,function(r){return(n=this.Qp)?[2,n.setPlayStreamVideoType(t)]:[2,!1]})})},e.prototype.onStatsUpdated=function(t){t.audioJitterBufferDelayMs&&this.sendStats(t.audioJitterBufferDelayMs)},e.prototype.sendStats=function(t){var n=this.Qp;if(n&&!(n.gwVersion<83886080)){var r=Date.now();if(this.Up===0||r-(this.Up+50)>=2e3){var o=this.dataChannel;if(o&&o.readyState==="open"){var a=new Uint8Array(5);a[0]=14,a[1]=this.Gp>>8&255,a[2]=255&this.Gp,a[3]=t>>8&255,a[4]=255&t,this.Gp++,this.Gp>=65536&&(this.Gp=0),o.send(a)}else n.sendPlayStats(t);this.Up=r}}},e})(Ql),Jd=ye(6361),td=ye.n(Jd),qs=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},ks=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},lp=(function(){function s(e,t,n){this.name=e,this.an=t,this.fg=n;var r=this.lg();this.dg=e+":"+He(6),this.vg=td().createInstance({name:this.dg}),this.an.info(Ce.EPo+" constructor ".concat(e," ").concat(this.dg," ").concat(r)),this.recordStoresInStorage(e,this.dg,r)}return Object.defineProperty(s.prototype,"deletedKeys",{get:function(){return this.name+"_d"},enumerable:!1,configurable:!0}),s.prototype.lg=function(){return Math.ceil(this.fg._now()/1e3)},s.prototype.recordStoresInStorage=function(e,t,n){try{var r=localStorage.getItem(e);this.an.info(Ce.EPo+" record storage storeNames ".concat(r));var o=r?r.split(","):[];o.push(t+"/"+n+"-1"),localStorage.setItem(e,o==null?void 0:o.join(","))}catch{}},s.prototype.getStoresFromStorage=function(){return this.refreshStores("1")},s.prototype.resetStorageStores=function(){this.an.info(Ce.EPo+" resetStorageStores"),this.refreshStores("0",this.dg)},s.prototype.removeStoreFromStorage=function(e){return qs(this,void 0,void 0,function(){return ks(this,function(t){switch(t.label){case 0:return e===this.dg?[3,2]:(this.an.info(Ce.EPo+" removeStore ".concat(e)),[4,this.dropInstance(e)]);case 1:return t.sent(),this.refreshStores("2",e),[3,3];case 2:this.an.info(Ce.EPo+" not remove self"),t.label=3;case 3:return[2]}})})},s.prototype.refreshStores=function(e,t){var n,r;if(this.an.info(Ce.EPo+" refreshStores ".concat(e," ").concat(t)),!localStorage)return[];var o=localStorage.getItem(this.name),a=o?o.split(","):[],l=[],d=[];if(a.length>0){for(var p=[],u=0;u<a.length;u++){var v=a[u].split("-"),x=v[0],U=v[1],te=(n=x.split("/"))===null||n===void 0?void 0:n[0];if(this.an.info(Ce.EPo+" refreshStores stores: ".concat(x," ").concat(U)),e=="2")te!==t&&p.push(x+"-"+U);else if(e=="0")te!==t&&p.push(x+"-"+U),te===t&&p.push(x+"-"+e);else if(U!=="2"){x.indexOf("/")>-1&&this.lg()-parseInt(((r=x.split("/"))===null||r===void 0?void 0:r[1])||"0")>86400&&d.push(te);var le=te+"/"+this.lg();p.push(le+"-"+e)}te.indexOf(this.dg)===-1&&U=="0"&&l.push(te)}localStorage.setItem(this.name,p.join(","))}return[l,d]},s.prototype.dropInstance=function(e){return qs(this,void 0,void 0,function(){var t;return ks(this,function(n){switch(n.label){case 0:this.an.info(Ce.EPo+" dropInstance ".concat(e)),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,td().dropInstance({name:e})];case 2:return n.sent(),[4,this.manualDeleteDB(e)];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),this.an.info(Ce.EPo+" dropInstance fail ".concat(t==null?void 0:t.message)),[3,5];case 5:return[2]}})})},s.prototype.manualDeleteDB=function(e){return new Promise(function(t,n){var r=window&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);if(r){var o=r.deleteDatabase(e);o.onsuccess=function(){return t()},o.onerror=function(a){return n(a)},o.onblocked=function(){return n(new Error("please close other connection"))}}else t()})},s.prototype.getCacheStoreData=function(e,t){return qs(this,void 0,void 0,function(){var n,r,o,a,l,d,p,u=this;return ks(this,function(v){switch(v.label){case 0:return v.trys.push([0,12,,13]),n=this.getDeleteKey(),[4,(r=td().createInstance({name:e})).keys()];case 1:return o=v.sent(),this.an.info(Ce.EPo+" ".concat(t," ").concat(e," get cache keys ").concat(o)),a=[],n.forEach(function(x){o.filter(function(U){return U.includes(x)}).length>0&&a.push(x),o=o.filter(function(U){return!U.includes(x)})}),a.length>0&&(this.an.info(Ce.EPo+" ".concat(t," ").concat(e," get cache del keys ").concat(a)),a.forEach(function(x){u.setDeleteKey("remove",x)})),l=o.filter(function(x){return x.indexOf("_head")>-1}),d=[],this.an.info(Ce.EPo+" ".concat(t," ").concat(e," get cache head keys ").concat(JSON.stringify(l))),l.length>0?[4,this.readStoreDatas(l,o,r)]:[3,7];case 2:return(d=v.sent())!=null&&d.length?[3,6]:(this.an.info(Ce.EPo+" ".concat(t," ").concat(e," get cache empty")),t?[4,this.removeOldStoreFromStorage(t,e)]:[3,4]);case 3:return v.sent(),[3,6];case 4:return[4,this.removeStoreFromStorage(e)];case 5:v.sent(),v.label=6;case 6:return[3,11];case 7:return this.an.info(Ce.EPo+" ".concat(t," ").concat(e," get cache head empty")),t?[4,this.removeOldStoreFromStorage(t,e)]:[3,9];case 8:return v.sent(),[3,11];case 9:return[4,this.removeStoreFromStorage(e)];case 10:v.sent(),v.label=11;case 11:return[2,d];case 12:return p=v.sent(),this.an.warn(Ce.EPo+" get cache failed ".concat(e," ").concat(p)),[3,13];case 13:return[2]}})})},s.prototype.readStoreDatas=function(e,t,n){return qs(this,void 0,void 0,function(){var r,o,a,l;return ks(this,function(d){switch(d.label){case 0:r=[],o=function(p){var u,v,x,U,te,le,se,We,Ke,Ze,et;return ks(this,function(ht){switch(ht.label){case 0:v=(u=e[p]).replace("_head",""),x=t.filter(function(gt){return gt.indexOf(v)>-1}),U=null,te=[],le=[],se=void 0,We=0,ht.label=1;case 1:return We<x.length?[4,n.getItem(Ke=x[We])]:[3,4];case 2:Ze=ht.sent(),Ke.startsWith(v+"_head")?U=Ze:Ke.startsWith(v+"_publish")?te.push(Ze):Ke.startsWith(v+"_play")?le.push(Ze):Ke.startsWith("qec_"+v)&&(se=Ze),ht.label=3;case 3:return We++,[3,1];case 4:return et=new Date().getTime()-parseInt(v),U?te.length>0||le.length>0||se?(r.push({timestamp:parseInt(v),head:U,publishInfos:te,playInfos:le,chargeInfos:se}),[3,7]):[3,5]:[3,7];case 5:return te.length===0&&le.length===0&&!se&&et>6e4?(a.an.info(Ce.EPo+" readStoreDatas remove ".concat(u)),[4,n.removeItem(u)]):[3,7];case 6:ht.sent(),ht.label=7;case 7:return[2]}})},a=this,l=0,d.label=1;case 1:return l<e.length?[5,o(l)]:[3,4];case 2:d.sent(),d.label=3;case 3:return l++,[3,1];case 4:return[2,r]}})})},s.prototype.saveItem=function(e,t){return qs(this,void 0,void 0,function(){var n;return ks(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.vg.setItem(e,t)];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),this.an.warn(Ce.EPo+" save "+JSON.stringify(n)),[3,3];case 3:return[2]}})})},s.prototype.getItem=function(e){return qs(this,void 0,void 0,function(){var t;return ks(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.vg.getItem(e)];case 1:return[2,n.sent()];case 2:return t=n.sent(),this.an.warn(Ce.EPo+" get "+JSON.stringify(t)),[3,3];case 3:return[2]}})})},s.prototype.removeItem=function(e){return qs(this,void 0,void 0,function(){var t;return ks(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.vg.removeItem(e)];case 1:return n.sent(),this.an.info(Ce.EPo+" removeItem ".concat(JSON.stringify(e))),[3,3];case 2:return t=n.sent(),this.an.warn(Ce.EPo+" remove "+JSON.stringify(t)),[3,3];case 3:return[2]}})})},s.prototype.clearItems=function(e){return qs(this,void 0,void 0,function(){var t,n,r,o;return ks(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),this.an.info(Ce.EPo+" call clearItems ".concat(e)),[4,this.vg.keys()];case 1:t=a.sent(),this.an.info(Ce.EPo+" clearItems store ".concat(JSON.stringify(t))),n=t.filter(function(l){return l.indexOf(e)>-1}),this.an.info(Ce.EPo+" clearItems clear ".concat(JSON.stringify(n))),r=0,a.label=2;case 2:return r<n.length?[4,this.removeItem(n[r])]:[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return this.setDeleteKey("remove",e),[3,7];case 6:return o=a.sent(),this.an.warn(Ce.EPo+" clear "+o.toString()),[3,7];case 7:return[2]}})})},s.prototype.checkItemsIsClear=function(e){return qs(this,void 0,void 0,function(){var t,n,r;return ks(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.an.info(Ce.EPo+" checkIsClear call ".concat(e)),[4,this.vg.keys()];case 1:return t=o.sent(),n=t.filter(function(a){return a.indexOf(e)>-1}),this.an.info(Ce.EPo+" checkIsClear filters ".concat(JSON.stringify(n))),[2,n.length>0];case 2:return r=o.sent(),this.an.warn(Ce.EPo+" checkIsClear err ".concat(JSON.stringify(r))),[2,!0];case 3:return[2]}})})},s.prototype.getUnReportCachedDatas=function(e){return qs(this,void 0,void 0,function(){var t,n,r;return ks(this,function(o){switch(o.label){case 0:return[4,this.filterItems(e)];case 1:return t=o.sent(),n=[],t&&t.length>0?(r=t.filter(function(a){return a.indexOf("_head")>-1}),[4,this.readStoreDatas(r,t,this.vg)]):[3,3];case 2:n=o.sent(),o.label=3;case 3:return[2,n]}})})},s.prototype.filterItems=function(e){return qs(this,void 0,void 0,function(){var t,n;return ks(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.vg.keys()];case 1:return t=r.sent(),[2,e!==""?t.filter(function(o){return o.indexOf(e)===-1}):t];case 2:return n=r.sent(),this.an.warn(Ce.EPo+" filter "+JSON.stringify(n)),[3,3];case 3:return[2]}})})},s.prototype.getOldStores=function(e){return this.refreshOldStores(e,"1")},s.prototype.refreshOldStores=function(e,t,n){if(this.an.info(Ce.EPo+" refresh old ".concat(e," ").concat(t," ").concat(n)),!localStorage)return[];var r=localStorage.getItem(e);if(!(r!=null&&r.length))return this.an.info(Ce.EPo+" refresh old no storage ".concat(e)),localStorage.removeItem(e),[];var o=r?r.split(","):[],a=[];if(o.length>0){for(var l=[],d=0;d<o.length;d++){var p=o[d].split("-"),u=p[0],v=p[1];this.an.info(Ce.EPo+" refresh old stores: ".concat(u," ").concat(v)),t=="2"?u!==n&&l.push(u+"-"+v):t==="1"&&(a.push(u),l.push(u+"-"+t))}localStorage.setItem(e,l.join(","))}return a},s.prototype.removeOldStoreFromStorage=function(e,t){return qs(this,void 0,void 0,function(){return ks(this,function(n){switch(n.label){case 0:return t===this.dg?[3,2]:(this.an.info(Ce.EPo+" remove old store ".concat(t)),[4,this.dropInstance(t)]);case 1:return n.sent(),this.refreshOldStores(e,"2",t),[3,3];case 2:this.an.info(Ce.EPo+" not remove old self"),n.label=3;case 3:return[2]}})})},s.prototype.setDeleteKey=function(e,t){this.an.info(Ce.EPo+" set del ".concat(e," ").concat(t));var n=this.getDeleteKey(),r=n.findIndex(function(o){return o===t});e==="add"?r===-1&&n.push(t):r>=0&&n.splice(r,1),this.an.info(Ce.EPo+" set del keys ".concat(JSON.stringify(n))),localStorage.setItem(this.deletedKeys,n.join(","))},s.prototype.getDeleteKey=function(){var e=localStorage.getItem(this.deletedKeys),t=e?e.split(","):[];return this.an.info(Ce.EPo+" get del keys ".concat(JSON.stringify(t))),t},s})(),zf=(function(){function s(e){e===void 0&&(e=""),this.mg=e,this.count=0,this.isStarting=!1,this.timer=0,this.lastLogTime=0,this.speed=0,this.lastTime=0}return s.prototype.add=function(e){this.isStarting&&(this.count+=e)},s.prototype.stop=function(){return this.isStarting=!1,this.reset()},s.prototype.start=function(e){var t=this;e===void 0&&(e=0),this.isStarting=!0,this.count=0,clearInterval(this.timer),e&&(this.timer=window.setInterval(function(){t.speed=t.count/e,t.count=0},e))},s.prototype.reset=function(){this.count=0,clearInterval(this.timer),this.timer=0,this.speed=0},s})(),wu=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},pa=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Cu=ao.logreport,of=(function(){function s(e,t,n){var r=this;this.an=e,this.pn=t,this.gn=n,this.pg=[],this.gg=[],this.bg=0,this.yg=0,this.wg=0,this.Sg=[],this.Eg=6e4,this.kg=!1,this.Ig={},this.Rg=6e4,this.Tg=20,this.Cg=!1,this.beforeunloadListener=function(){r.an.info("".concat(Ce.MSI," beforeunload")),r.Ag.resetStorageStores()},this.Ag=new lp(this.CacheKey,e,this),this.bindListener(),this.bindDestroyListener(),this.zg=new zf("speed log")}return Object.defineProperty(s.prototype,"uploadCreateTime",{get:function(){return Math.round(this.yg/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"speed",{get:function(){return this.zg.speed},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"CacheKey",{get:function(){return"z_s_c2_"+this.pn.appid},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"oldCacheKey",{get:function(){return"z_s_c_"+this.pn.appid},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"billingTimer",{get:function(){return this.pn.streamCenter.billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasPublishingStream",{get:function(){var e,t=this.gn.publisherList,n=!1;for(var r in t)if(!((e=t[r].publisher)===null||e===void 0)&&e.Xh){n=!0;break}return n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Ng",{get:function(){var e=this.gn.playerList,t=!1;for(var n in e){var r=e[n];if(!(r!=null&&r.isProbe)&&(r!=null&&r.isStreaming)&&[I.ey.L3,I.ey.RTC].includes(r.playMode)){t=!0;break}}return t},enumerable:!1,configurable:!0}),s.prototype.checkIfSupportNTP=function(){var e,t=(e=this.pn.rtm)===null||e===void 0?void 0:e.getNetworkInfo().timestamp;t&&(this.an.info(Ce.kEb+" use ntp. gap: "+(t-Date.now())),this.Cg=!0)},s.prototype.Pg=function(){var e=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),t=navigator.userAgent,n=t.toLowerCase().match(/MicroMessenger/i)=="micromessenger",r=t.indexOf("Android")>-1||t.indexOf("Adr")>-1;return e||n&&r?"pagehide":"beforeunload"},s.prototype.bindListener=function(){var e=this.Pg();window.addEventListener(e,this.beforeunloadListener)},s.prototype.offListener=function(){var e=this.Pg();window.removeEventListener(e,this.beforeunloadListener)},s.prototype.bindDestroyListener=function(){var e=this;this.pn.listenerList._engineDestroy.push(function(){e.an.info("".concat(Ce.MSI," _engineDestroy")),e.Ig={},e.Ag.resetStorageStores(),e.offListener()})},s.prototype.updateQualityOrChargeInfo=function(e,t,n){var r;this.an.info(Ce.Tk2+" update info ".concat(e," ").concat(!!t));var o=this._now();!t||this.pg.length!==0||this.gg.length!==0||this.Mg&&((r=this.Mg)===null||r===void 0?void 0:r.infos.length)!==0||(this.yg=o,this._saveSpeedLogHead(),this.bg===0&&(this.bg=o)),t&&(e==tt.publish_quality?this.handlePublishQualityData(t):e==tt.play_quality?this.handlePlayQualityData(t):e==tt.charge&&this.handleChargeInfoData(t));var a=this.xg(),l=a>0,d=n&&l,p=a>8e3,u=this.bg!==0&&o-this.bg>this.Rg;(l&&u||p||d)&&(this.an.info(Ce.Tk2+" start upload fire ".concat(p,",").concat(u,",").concat(d)),this.streamQualityUpload(this.yg,d),this.pg=[],this.gg=[],this.resetCharges(),this.yg=0,this.bg=o,this.checkHasDataToReport())},s.prototype.xg=function(){var e,t,n;if(this.pg.length>0||this.gg.length>0||((t=(e=this.Mg)===null||e===void 0?void 0:e.infos)===null||t===void 0?void 0:t.length)>0){var r=this._getSpeedLogHead(),o={publish_quality_infos:this.pg,play_quality_infos:this.gg,network_type:Ar(),client_type:2};return this.Mg&&((n=this.Mg)===null||n===void 0?void 0:n.infos.length)>0&&(o.charge_infos=JSON.parse(JSON.stringify(this.Mg))),this._createStreamQualityPacket(r,o).byteLength}return 0},s.prototype.checkHasDataToReport=function(){this.an.info(Ce.K74+" call"),this.gn.publishersLength||Object.keys(this.gn.playerList).length!==0||this.billingTimer.isReporting!==!1||(this.an.info(Ce.K74+" no stream or charge to report"),this.bg=0),this.hasPublishingStream||this.Ng||this.billingTimer.shouldSampleCharge()||(this.an.info(Ce.K74+" no data to report"),this.bg=0)},s.prototype.streamQualityUpload=function(e,t){var n,r,o,a=((r=(n=this.Mg)===null||n===void 0?void 0:n.infos)===null||r===void 0?void 0:r.length)>0;if(this.gn.publishersLength>0||Object.keys(this.gn.playerList).length>0||a||t){var l=this._getSpeedLogHead(),d={publish_quality_infos:this.pg,play_quality_infos:this.gg,network_type:Ar(),client_type:2};this.Mg&&((o=this.Mg)===null||o===void 0?void 0:o.infos.length)>0&&(this.Mg.timestamp_offset_begin===this.Mg.timestamp_offset_end&&this.Mg.timestamp_diff===0?this.an.info(Ce.Tk2+" no charge time"):(d.charge_infos=JSON.parse(JSON.stringify(this.Mg)),this.an.info(Ce.Tk2+" upload charges ".concat(JSON.stringify({timestamp:e,chargeInfos:d.charge_infos}))))),this.uploadQuality(e,l,d)}},s.prototype._getStreamReportSocket=function(e){var t=this;return new he.l3(function(n,r){var o,a,l,d,p=!1,u=function(){var Ke;t.an.info(Ce.Tk2+" speed log socket open"),p=!0,t.zg.start(3e3),t.jg&&n(t.jg),(Ke=t.jg)===null||Ke===void 0||Ke.removeEventListener("open",u)},v=function(){var Ke;t.an.info(Ce.Tk2+" speed log socket close"),p||r("not open, socket closed"),t.zg.stop(),(Ke=t.jg)===null||Ke===void 0||Ke.removeEventListener("close",v)},x=function(){var Ke;t.an.info(Ce.Tk2+" speed log socket error"),p||r("not open, socket error"),(Ke=t.jg)===null||Ke===void 0||Ke.removeEventListener("error",x)},U=function(){(function(){var Ke;(Ke=t.jg)===null||Ke===void 0||Ke.addEventListener("open",u)})(),(function(){var Ke,Ze;(Ke=t.jg)===null||Ke===void 0||Ke.addEventListener("close",v),(Ze=t.jg)===null||Ze===void 0||Ze.addEventListener("error",x)})()};if(t.jg&&t.jg.readyState!=2&&t.jg.readyState!=3)t.jg.readyState==1?(p=!0,n(t.jg)):U();else{var te=t.pn.appid,le=t.pn.idName,se=(o=t.pn.roomList[0])===null||o===void 0?void 0:o.token;if(!te||!le||!se)return t.an.error(Ce.Tk2+" appid userid token not exist"),void r("appid userid token not exist");var We="wss://".concat(e,"/ws/report/stream?appid=").concat(te,"&product=rtc&token=").concat(encodeURIComponent(se),"&id_name=").concat(le);t.an.info(Ce.Tk2+" stream url "+We.split("?")[0]),t.jg=(a=We,(d=1)===void 0&&(d=1),(l=lt.proxyCtrl)?l.createSocket(a,d):new WebSocket(a)),U()}setTimeout(function(){p||t.pn.engineDestroy||r("not open, timeout, socket closed")},1e4)})},s.prototype._createStreamQualityPacket=function(e,t){var n=Cu.SpeedLogHead.create(e),r=Cu.QualityEvent.create(t),o=Cu.SpeedLogHead.encode(n).finish(),a=Cu.QualityEvent.encode(r).finish(),l=this.getQualityHead(o,a),d=new Uint8Array(12+o.length+a.length);return d.set(l),d.set(o,12),d.set(a,12+o.length),d},s.prototype.qg=function(e,t,n,r,o,a){var l=!1,d=!1;e.readyState!==1&&!d&&r&&r(),e.onmessage=function(p){(p.data+"").includes("success")?(!d&&n&&n(),l=!0):(!d&&r&&r(),l=!0),e.onmessage=null},this.zg.add(8*t.length),e.send(t),setTimeout(function(){l||(o&&o(),d=!0)},15e3)},s.prototype.uploadQuality=function(e,t,n,r){this.sendPacketReportData(e,t,n,r)},s.prototype.sendPacketReportData=function(e,t,n,r){var o,a=this,l=(o=this.an.url)===null||o===void 0?void 0:o.split("/")[2];if(l){if(this.checkNetworkIsAbnormal())return this.an.warn(Ce.y4U+" ".concat(e," network is abnormal")),void this.saveReportPacketsToCache(e,t,n,r);a._getStreamReportSocket(l).then(function(d){if(a.kg)return a.an.warn(Ce.y4U+" ".concat(e," is sending")),void a.saveReportPacketsToCache(e,t,n,r);var p=Date.now()%1e4;a.kg=!0;var u=a._createStreamQualityPacket(t,n);a.an.info(Ce.y4U+" ".concat(e," send ").concat(p," ").concat(r," ").concat(u==null?void 0:u.byteLength)),a.qg(d,u,function(){return wu(a,void 0,void 0,function(){return pa(this,function(v){switch(v.label){case 0:return this.an.info(Ce.y4U+" ".concat(e," send suc ").concat(p)),this.kg=!1,this.delStreamData(e),r?[4,this.Ag.removeStoreFromStorage(r)]:[3,2];case 1:v.sent(),v.label=2;case 2:return this.checkCachePacketsToReport(!0),[2]}})})},function(){a.an.info(Ce.y4U+" ".concat(e," send error ").concat(p)),a.kg=!1,a.retryReportPackets(e,t,n,r)},function(){a.an.info(Ce.y4U+" ".concat(e," send timeout ").concat(p)),a.kg=!1,a.retryReportPackets(e,t,n,r)},p)}).catch(function(d){d!=="appid userid token not exist"?(a.an.info(Ce.y4U+" open socket error, retry upload quality event"),a.retryReportPackets(e,t,n,r)):a.an.info(Ce.y4U+" stop retry upload quality event.")})}},s.prototype.retryReportPackets=function(e,t,n,r){this.an.info(Ce.ivM+" retry packets"),this.saveReportPacketsToCache(e,t,n,r),this.checkCachePacketsToReport(!1)},s.prototype.checkCachePacketsToReport=function(e){var t=this;this.Lg&&clearTimeout(this.Lg),this.Eg=e?5e3:6e4,this.Lg=setTimeout(function(){var n=t.Sg.shift();if(n){var r=n.timeStampKey,o=n._SpeedLogHead,a=n._QualityEvent,l=n.storeName;t.an.info(Ce.VdQ+" ".concat(r," ").concat(l)),t.sendPacketReportData(r,o,a,l)}else t.checkStorageDataToReport()},this.Eg)},s.prototype.saveReportPacketsToCache=function(e,t,n,r){this.an.info(Ce.ifL+" call ".concat(e)),this.Sg.length>=this.Tg?this.an.info(Ce.ifL+" ".concat(this.Sg.length)):this.Sg.find(function(o){return o.timeStampKey===e})||this.Sg.push({timeStampKey:e,_SpeedLogHead:t,_QualityEvent:n,storeName:r})},s.prototype.checkStorageDataToReport=function(){return wu(this,void 0,void 0,function(){var e;return pa(this,function(t){switch(t.label){case 0:return[4,this.Ag.getUnReportCachedDatas(this.yg===0?"":this.yg+"")];case 1:return e=t.sent(),this.uploadUnReportDatas(e),[2]}})})},s.prototype.getQualityHead=function(e,t){var n=new Uint8Array(12);n[0]=0,n[1]=12,n[2]=e.length>>8,n[3]=e.length-(n[2]<<8),n[4]=t.length>>24,n[5]=t.length-(n[4]<<24)>>16,n[6]=t.length-(n[4]<<24)-(n[5]<<16)>>8,n[7]=t.length-(n[4]<<24)-(n[5]<<16)-(n[6]<<8);var r=Math.ceil(this._now()/1e3);return n[8]=r>>24,n[9]=r-(n[8]<<24)>>16,n[10]=r-(n[8]<<24)-(n[9]<<16)>>8,n[11]=r-(n[8]<<24)-(n[9]<<16)-(n[10]<<8),n},s.prototype.handlePublishQualityData=function(e){var t,n=this.gn.getRoomByStreamID(e.stream_id),r=(t=this.gn.publisherList[e.stream_id])===null||t===void 0?void 0:t.publisher;if(n&&r){var o=r.id,a=this.pg.find(function(l){return l.stream_id==e.stream_id&&l.video_width==e.frameWidth&&l.video_height==e.frameHeight&&l.session_id==o});a||(a={stream_id:e.stream_id,session_id:o,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:n?n.roomID:"",evnvironment:1,room_session_id:n?Number(n.roomSessionID):0,resource_type:2},e.ipv4&&(a.ipv4=e.ipv4,this.an.info("".concat(Ce.KBL," stream_id: ").concat(e.stream_id,", ip: ").concat(a.ipv4," "))),e.ipv6&&(a.ipv6=e.ipv6,this.an.info("".concat(Ce.KBL," stream_id: ").concat(e.stream_id," ip: ").concat(a.ipv6," "))),this.pg.push(a)),a.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_capture_fps:Math.round(10*e.videoFPS)||0,video_network_fps:Math.round(10*e.videoTransferFPS)||0,uplink_plr:e.audioPacketsLostRate,rtt:Math.round(1e3*e.currentRoundTripTime)||0,audio_network_fps:Math.round(10*e.audioFPS),captured_sound_level:Math.round(100*e.audioLevel),sample_time_offset:Math.round((this._now()-this.yg)/10)}),this.saveStreamInfo("publish",a)}else this.an.info("".concat(Ce.KBL," room not exist. ").concat(!!n," "))},s.prototype.handlePlayQualityData=function(e){var t=this.gn.getRoomByStreamID(e.stream_id),n=this.gn.playerList[e.stream_id];if(n&&t){var r={l3:3,rtc:2,cdn:2}[n.playMode],o=n.id,a=this.gg.find(function(l){return l.stream_id==e.stream_id&&l.video_width==e.frameWidth&&l.video_height==e.frameHeight&&l.resource_type==r&&l.session_id==o});a||(a={stream_id:e.stream_id,session_id:o,video_width:e.frameWidth,video_height:e.frameHeight,infos:[],room_id:t?t.roomID:"",room_session_id:t?Number(t.roomSessionID):0,resource_type:r},e.ipv4&&(a.ipv4=e.ipv4,this.an.info("".concat(Ce.RM$," ").concat(e.stream_id," ip ").concat(a.ipv4," "))),e.ipv6&&(a.ipv6=e.ipv6,this.an.info("".concat(Ce.RM$," ").concat(e.stream_id," ip ").concat(a.ipv6," "))),this.gg.push(a)),a.infos.push({audio_bitrate:Math.round(e.audioBitrate)||0,video_bitrate:Math.round(e.videoBitrate)||0,video_network_fps:Math.round(10*e.videoFPS)||0,downlink_plr:Math.round(e.audioPacketsLostRate)||0,audio_network_fps:Math.round(10*e.audioFPS)||0,audio_break_duration:Math.round(e.audio_break_duration/10),video_break_duration:Math.round(e.video_break_duration/10),rtt:Math.round(1e3*e.currentRoundTripTime)||0,rendered_sound_level:Math.round(100*e.audioLevel),audio_break_cancel_duration:Math.round(e.audio_break_cancel_duration/10),video_break_cancel_duration:Math.round(e.video_break_cancel_duration/10),audio_decode_time:Math.round(e.audio_decode_time/10),video_decode_time:Math.round(e.video_decode_time/10),real_sampling_interval:Math.round(e.real_sampling_interval/10),video_frames_decoded:Math.round(e.videoFramesDecoded)||0,video_frames_dropped:Math.round(e.videoFramesDropped)||0,sample_time_offset:Math.round((this._now()-this.yg)/10),peer_to_peer_plr:e.peerToPeerPacketLostRate,peer_to_peer_delay:e.peerToPeerDelay}),this.saveStreamInfo("play",a)}else this.an.info("".concat(Ce.RM$," player or room not exist. ").concat(!!n," ").concat(!!t," "))},s.prototype.handleChargeInfoData=function(e){var t,n;this.Mg||(this.Mg={room_id:"",timestamp_offset_begin:0,timestamp_offset_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]}),!((t=this.pn.roomList[0])===null||t===void 0)&&t.roomID&&(this.Mg.room_id=(n=this.pn.roomList[0])===null||n===void 0?void 0:n.roomID);var r=this._now(),o=this.yg;this.an.info("".concat(Ce._ny," charge ").concat(r," ").concat(o," ").concat(JSON.stringify(e))),this.Mg.infos.length===0&&(this.Mg.timestamp_offset_begin=Math.round((r-o)/1e3),this.wg!==0&&(this.Mg.timestamp_diff=Math.round((r-this.wg)/1e3),this.Mg.timestamp_diff_flag=1,this.an.info("".concat(Ce._ny," charge time diff ").concat(this.wg," ").concat(this.Mg.timestamp_diff)))),this.wg=r,this.Mg.timestamp_offset_end=Math.round((r-o)/1e3),this.Mg.infos.push(e),this.saveChargeInfos(this.Mg)},s.prototype.supplementChargeTime=function(){this.wg===0&&(this.wg=this._now(),this.an.info("".concat(Ce.SK," charge time ").concat(this.wg," ")))},s.prototype.resetCharges=function(){this.Mg&&(this.Mg={room_id:"",timestamp_offset_begin:0,timestamp_offset_end:0,timestamp_diff_flag:0,timestamp_diff:0,infos:[]})},s.prototype.resetChargeTime=function(){this.wg=0},s.prototype.stopSampleCharge=function(){this.resetChargeTime(),this.checkHasDataToReport()},s.prototype._saveSpeedLogHead=function(){if(this.yg!==0){var e=this._getSpeedLogHead();this.Ag.saveItem(this.yg+"_head",e)}},s.prototype.saveStreamInfo=function(e,t){this.yg!==0&&this.Ag.saveItem("".concat(this.yg,"_").concat(e).concat(t.stream_id),t)},s.prototype.saveChargeInfos=function(e){this.yg!==0&&this.Ag.saveItem("qec_".concat(this.yg),e)},s.prototype.delStreamData=function(e){var t=this.Sg.findIndex(function(n){return n.timeStampKey===e});t>-1&&(this.an.info("".concat(Ce.MSI," del cache ").concat(t," ").concat(e)),this.Sg.splice(t,1)),this.clearStoreItems(e+"")},s.prototype.clearStoreItems=function(e){var t=this;this.an.info("".concat(Ce.JX$," clearStoreItems ").concat(e)),this.Ag.setDeleteKey("add",e),this.Ag.clearItems(e),setTimeout(function(){return wu(t,void 0,void 0,function(){return pa(this,function(n){switch(n.label){case 0:return[4,this.checkClear(e)];case 1:return n.sent(),[2]}})})},1e3)},s.prototype.checkClear=function(e){return wu(this,void 0,void 0,function(){var t,n=this;return pa(this,function(r){switch(r.label){case 0:return this.an.info("".concat(Ce.IGr," call ").concat(e)),[4,this.Ag.checkItemsIsClear(e)];case 1:return t=r.sent(),this.Ig[e]?this.Ig[e]++:this.Ig[e]=1,t?(this.an.info("".concat(Ce.IGr," count ").concat(e," ").concat(this.Ig[e])),this.Ig[e]&&this.Ig[e]<=5&&(this.Ag.clearItems(e),setTimeout(function(){return wu(n,void 0,void 0,function(){return pa(this,function(o){switch(o.label){case 0:return[4,this.checkClear(e)];case 1:return o.sent(),[2]}})})},1e3))):delete this.Ig[e],[2]}})})},s.prototype._getSpeedLogHead=function(e){return{version:20,timestamp:e||Math.round(this.yg/1e3),event:0,app_id:this.pn.appid,user_id:this.pn.idName,biz_type:1,time_offset:ki.A.MAX_VALUE,os_type:(0,or.hU)(),scenario:this.pn.scenario===100?void 0:this.pn.scenario,sdk_version:I.qt,report_version:this.pn.sdkVerNum,customer_context:s.reportCustomerContext}},s.prototype.checkStreamReport=function(){var e=this;this.an.info("".concat(Ce.MSI," check un report call"));var t=this.Ag.getStoresFromStorage(),n=t[0],r=t[1];this.an.info("".concat(Ce.MSI," store: ").concat(n==null?void 0:n.length,", old: ").concat(r==null?void 0:r.length));for(var o=function(v){var x=n[v];a.Ag.getCacheStoreData(x).then(function(U){e.an.info("".concat(Ce.MSI," check un report ").concat(x," ").concat(U==null?void 0:U.length)),e.uploadUnReportDatas(U,x)}).catch(function(U){e.an.info("".concat(Ce.MSI," check un report fail ").concat(x," ").concat(U==null?void 0:U.message))})},a=this,l=0;l<n.length;l++)o(l);for(var d=function(v){var x=r[v];p.an.info("".concat(Ce.MSI," old ").concat(x," check un report")),p.Ag.getCacheStoreData(x).then(function(U){e.an.info("".concat(Ce.MSI," old check un report ").concat(x," ").concat(U==null?void 0:U.length)),e.uploadUnReportDatas(U,x)}).catch(function(U){e.an.info("".concat(Ce.MSI," old check un report fail ").concat(x," ").concat(U==null?void 0:U.message))})},p=this,u=0;u<r.length;u++)d(u)},s.prototype.uploadUnReportDatas=function(e,t,n){return wu(this,void 0,void 0,function(){var r=this;return pa(this,function(o){switch(o.label){case 0:return this.pn.roomList.length<=0?(this.an.warn(Ce.kkS+" no room"),[2]):(e==null?void 0:e.length)>0?(e.forEach(function(a){var l,d,p=a.timestamp,u=a.head,v=a.publishInfos,x=a.playInfos,U=a.chargeInfos;if(r.an.info("".concat(Ce.kkS," cacheData publish ").concat(p," ").concat(JSON.stringify(v))),r.an.info("".concat(Ce.kkS," cacheData play ").concat(p," ").concat(JSON.stringify(x))),r.an.info("".concat(Ce.kkS," cacheData charge ").concat(p," ").concat(JSON.stringify(U))),r.an.info("".concat(Ce.kkS," cacheData ").concat(p," ").concat(r.Ig[p])),r.Ig[p])r.an.info("".concat(Ce.kkS," the data ").concat(p," report"));else{var te={publish_quality_infos:v,play_quality_infos:x,network_type:Ar(),client_type:2};((l=U==null?void 0:U.infos)===null||l===void 0?void 0:l.length)>0&&(te.charge_infos=JSON.parse(JSON.stringify(U))),t&&(r.an.info("".concat(Ce.kkS," save ").concat(p," ").concat(t)),r.Ag.saveItem(p+"_head",u),v.forEach(function(le){r.Ag.saveItem("".concat(p,"_publish").concat(le.stream_id),le)}),x.forEach(function(le){r.Ag.saveItem("".concat(p,"_play").concat(le.stream_id),le)}),((d=U==null?void 0:U.infos)===null||d===void 0?void 0:d.length)>0&&r.Ag.saveItem("qec_".concat(p),U)),r.an.info(Ce.Tk2+" start upload cache quality. ".concat(p)),r.saveReportPacketsToCache(p,u,te)}}),t?(this.an.info(Ce.Tk2+" remove storage store ".concat(n," ").concat(t)),n?[4,this.Ag.removeOldStoreFromStorage(n,t)]:[3,2]):[3,4]):[3,5];case 1:return o.sent(),[3,4];case 2:return[4,this.Ag.removeStoreFromStorage(t)];case 3:o.sent(),o.label=4;case 4:this.checkCachePacketsToReport(!0),o.label=5;case 5:return[2]}})})},s.prototype.reportOldCacheData=function(){var e=this,t=this.Ag.getOldStores(this.oldCacheKey),n="zc.sqrw.rlcd.0";this.an.info("".concat(n," old: ").concat(t==null?void 0:t.length));for(var r=function(l){var d=t[l];o.an.info("".concat(n," old ").concat(d," check un report")),o.Ag.getCacheStoreData(d,o.oldCacheKey).then(function(p){e.an.info("".concat(n," old check un report ").concat(d," ").concat(p==null?void 0:p.length)),e.uploadUnReportDatas(p,d,e.oldCacheKey)}).catch(function(p){e.an.info("".concat(n," old check un report fail ").concat(d," ").concat(p==null?void 0:p.message))})},o=this,a=0;a<t.length;a++)r(a)},s.prototype._now=function(e){var t;return e===void 0&&(e=0),t=this.Cg?this.pn.rtm.getNetworkInfo().timestamp:Date.now(),e===1&&(t=Math.round(t/1e3)),t},s.prototype.checkNetworkIsAbnormal=function(){var e;return!((e=this.pn.rtm)===null||e===void 0)&&e.isDisConnect()&&this.pn.networkState==I.D2.offline?(this.an.warn(Ce.Q9_+" offline. "),!0):!this.gn.isNetAgentConnect()&&(this.an.warn(Ce.Q9_+" netAgent disconnect. "),!0)},s.prototype.resetReport=function(){var e=this;this.pg=[],this.gg=[],this.yg=0,this.bg=0,this.Lg&&(clearTimeout(this.Lg),this.Lg=null),setTimeout(function(){e.jg&&(e.jg.close(),e.jg=void 0,e.kg=!1,e.zg.stop())},2e4)},s.reportCustomerContext=0,s})();function jf(){var s={},e=this,t=-10;function n(o){return/[^\x20-\x7E]+/.test(o)}var r={init:function(o,a){var l="",d=0;try{importScripts(o),e._ModuleFn(s),l="suc",d=0}catch(p){d=-1,l="fail "+(p==null?void 0:p.message)}e.postMessage({code:d,errMsg:l,eventId:a}),e.postMessage({code:t,msg:"init webassembly "+l})},parseToMiniSdp:function(o,a){var l=s._parseToMiniSdp,d=s.allocateUTF8,p=s._getBuffer,u=s.HEAPU8,v=s._free;e.postMessage({code:t,msg:"ptm call"});var x=d(o);e.postMessage({code:t,msg:"ptm allocate"});var U=l(x);if(e.postMessage({code:t,msg:"ptm bufLen "+U}),U<0)return e.postMessage({code:U,eventId:a});var te=p();e.postMessage({code:t,msg:"ptm getBuf "+te});var le=new Uint8Array(u.subarray(te,te+U-1))||new Uint8Array;e.postMessage({code:0,data:le,eventId:a});try{v(x),v(U),v(te)}catch(se){e.postMessage({code:t,msg:"ptm free e "+(se==null?void 0:se.message)||0})}},loadMiniSdpToOriginSdp:function(o,a){var l,d,p,u,v=s._loadMiniSdpToSdp,x=s.UTF8ToString,U=s._malloc,te=s.HEAPU8,le=s._free;e.postMessage({code:t,msg:"lmto call"});var se=U(o.length);e.postMessage({code:t,msg:"lmto malloc"}),te.set(o,se);var We=v(se,o.byteLength);e.postMessage({code:t,msg:"lmto s"});var Ke=x(We)||"";e.postMessage({code:t,msg:"lmto o "+Ke.length});for(var Ze=Ke.split(`\r
`)||[],et=["ice-ufrag","ice-pwd","ice-options","fingerprint","setup","mid","extmap","sendrecv","sendonly","recvonly","inactive","rtpmap","rtcp-fb","fmtp","ssrc","candidate","msid"];Ze.length;){var ht=Ze.length,gt=(d=(l=Ze[ht-1])===null||l===void 0?void 0:l.split("=")[1])===null||d===void 0?void 0:d.split(":")[0],Et=Ze[ht-1];if(((p=Ze[ht-1])===null||p===void 0?void 0:p.indexOf("="))!=-1&&et.includes(gt)&&((u=Ze[ht-1])===null||u===void 0?void 0:u.indexOf("="))!=0&&!n(Et))break;Ze.pop()}Ke=Ze.join(`\r
`),e.postMessage({code:0,data:Ke+=`\r
`,eventId:a});try{le(se)}catch(At){e.postMessage({code:t,msg:"lmto free "+(At==null?void 0:At.message)})}}};onmessage=function(o){var a;r[o.data.command]?r[o.data.command](o.data.val,o.data.eventId):e.postMessage({code:t,msg:"om cmd invalid "+((a=o==null?void 0:o.data)===null||a===void 0?void 0:a.command)})}}var Kd,qf=ye(8754).G,Ru=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},xu=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},nd=(function(){function s(e){var t=this;this.an=e,this.initOK=!1,this.Bg={},this.seq=1;var n=jf.toString().trim().match(/\{([\s\S]*)\}/)[1],r=URL.createObjectURL(new window.Blob([n],{type:"text/javascript"}));this.Ug=new Worker(r);var o=(function(d){for(var p=(d+"=".repeat((4-d.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),u=window.atob(p),v=new Uint8Array(u.length),x=0;x<u.length;++x)v[x]=u.charCodeAt(x);return v})("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"),a=qf.decompress(Array.from(o)),l=URL.createObjectURL(new window.Blob([a],{type:"text/javascript"}));this.Ug.onmessage=function(d){var p=d.data;p.eventId&&(0,B.JO)(t.Bg[p.eventId])?(t.Bg[p.eventId]({code:p.code,data:p.data}),delete t.Bg[p.eventId]):(p==null?void 0:p.code)===-10&&t.an.info("zc.ms.0.w "+p.msg)},this.Ug.onmessageerror=function(d){console.error("Error receiving message from worker: ".concat(d))},this.Ug.onerror=function(d){t.initOK=!1,t.an.warn("zc.ms.0.c worker err "+(d==null?void 0:d.message)||0)},this.initWasm(l).then(function(){t.initOK=!0}).catch(function(d){t.initOK=!1})}return s.prototype.messageHandler=function(e){var t=this;return new he.l3(function(n){e.eventId="".concat(e.command,"_").concat(t.seq++),t.Ug.postMessage(e),t.Bg[e.eventId]=function(r){n(r)}})},s.prototype.initWasm=function(e){return Ru(this,void 0,void 0,function(){var t=this;return xu(this,function(n){return[2,new Promise(function(r,o){return Ru(t,void 0,void 0,function(){var a;return xu(this,function(l){switch(l.label){case 0:return this.an.info("zc.ms.0.c init"),[4,this.messageHandler({command:"init",val:e})];case 1:return(a=l.sent()).code===0?r(!0):(this.an.warn("zc.ms.0.c fail "+a.errMsg),o(!1)),[2]}})})})]})})},s.prototype.parseToMiniSdp=function(e){return Ru(this,void 0,void 0,function(){var t=this;return xu(this,function(n){return[2,new he.l3(function(r,o){return Ru(t,void 0,void 0,function(){var a,l;return xu(this,function(d){switch(d.label){case 0:return(0,B.QP)(e)&&e?this.initOK?[4,this.messageHandler({command:"parseToMiniSdp",val:e})]:(o(Ft.KbN),[2]):(o(Ft.ZEp),[2]);case 1:if((a=d.sent()).code===0)r(a.data);else{switch(l=void 0,a.code){case-1:l=Ft.GY7;break;case-2:l=Ft.sP3;break;case-3:l=Ft._9F}o(l)}return[2]}})})})]})})},s.prototype.loadMiniSdpToOriginSdp=function(e){return Ru(this,void 0,void 0,function(){var t=this;return xu(this,function(n){return[2,new he.l3(function(r,o){return Ru(t,void 0,void 0,function(){var a;return xu(this,function(l){switch(l.label){case 0:return(0,B.G0)(e)?this.initOK?[4,this.messageHandler({command:"loadMiniSdpToOriginSdp",val:e})]:(o(Ft.KbN),[2]):(o(Ft.ZEp),[2]);case 1:return(a=l.sent()).code==0&&r(a.data),[2]}})})})]})})},Object.defineProperty(s,"isSupported",{get:function(){return!(!window.WebAssembly||!window.Worker)},enumerable:!1,configurable:!0}),s.prototype.destroy=function(){this.Ug.terminate()},s})();(function(s){s.SAVED_CHARGEINFO_REPORT="zc.bill.scir",s.CHARGEINFO_SAVING_LOCALSTORAGE="zc.bill.cisl",s.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE="zc.bill.cigrl",s.START_CHARGE_INFO_TIMER="zc.bill.tm.scit"})(Kd||(Kd={}));var Yd,Vf=(function(){function s(e,t){this.an=e,this.pn=t,this.Gg=5e3,this.Jg=!1}return Object.defineProperty(s.prototype,"gn",{get:function(){return this.pn.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Fg",{get:function(){var e;return(e=this.gn)===null||e===void 0?void 0:e.Fg},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Hg",{get:function(){return Object.values(this.gn.playerList).filter(function(e){return(e==null?void 0:e.isProbe)===!1}).length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasPublishingStream",{get:function(){var e,t=this.gn.publisherList,n=!1;for(var r in t)if(!((e=t[r].publisher)===null||e===void 0)&&e.Xh){n=!0;break}return n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasPlayingRTCAndL3Stream",{get:function(){var e,t,n=this.gn.playerList,r=!1;for(var o in n)if(!(!((e=n[o])===null||e===void 0)&&e.isProbe)&&(!((t=n[o])===null||t===void 0)&&t.isStreaming)&&[I.ey.RTC,I.ey.L3].includes(n[o].playMode)){r=!0;break}return r},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"shouldEndSampleCharge",{get:function(){var e,t;return!this.gn||!!this.Jg&&(this.shouldReportRoomTime?((e=this.pn.rtm)===null||e===void 0?void 0:e.stateCenter.roomModulesList.filter(function(n){return!n.isLogout()||!n.isDisConnect()}).length)===0:((t=this.pn.appConfig.speedlog_config)===null||t===void 0?void 0:t.charge_info_report_mode)===0?this.gn.publishersLength===0:this.Hg===0)},enumerable:!1,configurable:!0}),s.prototype.report=function(e){var t,n,r;if(e===void 0&&(e=!1),this.an.info("zc.bill.tm.r.0 call"),this.gn){if(e)return this.an.info("zc.bill.tm.r.0 stop"),void((t=this.Fg)===null||t===void 0||t.updateQualityOrChargeInfo(tt.charge,void 0,!0));if(!this.shouldSampleCharge())return this.an.info("zc.bill.tm.r.0 not sample charge"),(n=this.Fg)===null||n===void 0||n.updateQualityOrChargeInfo(tt.charge,void 0),void this.Fg.resetChargeTime();var o=this.samplingChargeInfos();(r=this.Fg)===null||r===void 0||r.updateQualityOrChargeInfo(tt.charge,o)}else this.an.info("zc.bill.tm.r.0 no stream center")},s.prototype.shouldStartReportCharge=function(){if(!this.pn.appConfig)return this.an.info("zc.bill.ssrc.0 no app config"),!1;var e=this.pn.appConfig.speedlog_config.charge_info_report_cycle;return this.an.info("zc.bill.ssrc.0 speedlog config ".concat(JSON.stringify(this.pn.appConfig.speedlog_config))),!(!(0,B.Cs)(e)||e===0)&&(this.Gg=1e3*e,!0)},s.prototype.shouldSampleCharge=function(){var e,t=this;if(!this.pn.appConfig)return this.an.info("zc.bill.ssc.0 no app config"),!1;var n=this.pn.appConfig.speedlog_config,r=n.charge_info_report_mode,o=n.charge_info_report_no_playing,a=!1,l=(e=this.pn.rtm)===null||e===void 0?void 0:e.stateCenter.roomModulesList.filter(function(p){return!p.isLogout()}),d=function(p){return p===1||t.hasPublishingStream};return o===1?(l==null?void 0:l.length)!==0&&(this.hasPlayingRTCAndL3Stream||this.Hg===0)&&(a=d(r)):o!==0&&o!==void 0||!this.hasPlayingRTCAndL3Stream||(a=d(r)),a},Object.defineProperty(s.prototype,"shouldReportRoomTime",{get:function(){var e,t,n,r;return!(!(!((e=this.pn.rtm)===null||e===void 0)&&e.stateCenter.appConfig)||!(!((t=this.pn.rtm)===null||t===void 0)&&t.stateCenter.appConfig.speedlog_config)||((n=this.pn.rtm)===null||n===void 0?void 0:n.stateCenter.appConfig.speedlog_config.charge_info_report_cycle)===0||((r=this.pn.rtm)===null||r===void 0?void 0:r.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing)!==1)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isReporting",{get:function(){return this.Jg},enumerable:!1,configurable:!0}),s.prototype.startChargeInfoTimer=function(){var e=this;if(this.Vg&&(clearTimeout(Number(this.Vg)),this.Vg=null,this.shouldEndSampleCharge))return this.an.info(Kd.START_CHARGE_INFO_TIMER+" chargeinfos timer report ended"),void(this.Jg=!1);this.Vg=setTimeout(function(){e.report(),e.startChargeInfoTimer()},this.Gg)},s.prototype.supplementPlayingChargeTime=function(){this.Jg&&this.Fg.supplementChargeTime()},s.prototype.startChargeInfosUpload=function(){this.shouldStartReportCharge()&&(this.Jg||(this.Jg=!0,this.shouldReportRoomTime&&this.report(),this.startChargeInfoTimer(),this.an.info("zsc.sciu.0 call")))},s.prototype.stopChargeInfosUpload=function(){this.an.info("zsc.sciu.1 call"),this.Vg&&this.shouldEndSampleCharge&&(this.an.info("zsc.sciu.1 stop"),clearTimeout(Number(this.Vg)),this.Vg=null,this.shouldReportRoomTime&&this.report(!0),this.Jg=!1,this.Fg.stopSampleCharge(),this.an.info("zsc.sciu.1 chargeinfos timer report ended"))},s.prototype.destroy=function(){this.an.info("zsc.ds.0 call"),this.Vg&&(clearTimeout(Number(this.Vg)),this.Vg=null),this.Jg=!1},s.prototype.samplingChargeInfos=function(){var e,t;this.an.info("zsc.cci.0 call");var n={is_publishing:0,no_playing:0},r=this.gn,o=r.publisherList,a=r.playerList;for(var l in o){o[l].publisher.state===6&&(n.is_publishing=1);break}var d=function(u){var v=a[u];if(v.isProbe||!v.isStreaming||![I.ey.RTC,I.ey.L3].includes(v.playMode))return"continue";v.playMode===I.ey.RTC?(n.play_max_audio_bitrate===void 0&&(n.play_max_audio_bitrate=0),n.play_stream_resolution_infos===void 0&&(n.play_stream_resolution_infos=[])):v.playMode===I.ey.L3&&(n.play_l3_max_audio_bitrate===void 0&&(n.play_l3_max_audio_bitrate=0),n.play_l3_stream_resolution_infos===void 0&&(n.play_l3_stream_resolution_infos=[]));var x={width:v.qualityHandler.Uv.frameWidth,height:v.qualityHandler.Uv.frameHeight},U={video_width:x&&x.width?x.width:0,video_height:x&&x.height?x.height:0,count:1};(function(te){var le,se=te===I.ey.L3,We=te===I.ey.RTC;if(We?le=n.play_stream_resolution_infos:se&&(le=n.play_l3_stream_resolution_infos),!(le!=null&&le.find(function(Ze){return Ze.video_width==U.video_width&&Ze.video_height==U.video_height&&(Ze.count++,!0)}))&&(le==null||le.push(U)),U.video_width==0&&U.video_height==0){var Ke=v.qualityHandler.Uv.audioBitrate;We?Ke>n.play_max_audio_bitrate&&(n.play_max_audio_bitrate=Math.round(Ke)):se&&Ke>n.play_l3_max_audio_bitrate&&(n.play_l3_max_audio_bitrate=Math.round(Ke))}})(v.playMode)};for(var p in a)d(p);return!this.shouldReportRoomTime||n.play_stream_resolution_infos&&((e=n.play_stream_resolution_infos)===null||e===void 0?void 0:e.length)!==0||n.play_l3_stream_resolution_infos&&((t=n.play_l3_stream_resolution_infos)===null||t===void 0?void 0:t.length)!==0||(n.no_playing=1),n},s})(),Ri=(function(){function s(){this.Qg={},this.Yg=500}return s.prototype.isTrackStopBySDK=function(e){return this.Qg[e.id]!==void 0&&performance.now()-this.Qg[e.id]<=this.Yg},s.prototype.recordStopTrack=function(e){e&&(this.Qg[e.id]=performance.now())},s})(),sf=(function(){function s(e){this.an=e,this.Kg=new Ri}return s.prototype.isTrackStopBySDK=function(e){return this.Kg.isTrackStopBySDK(e)},s.prototype.stopTrack=function(e){e&&(this.an.info("zc.tk.ut track "+e.id+" stop"),this.Kg.recordStopTrack(e),e.stop())},s})();function dp(){var s=this,e=243,t=new Uint8Array([0,0,0,1,101,184,0,4,0,0,9,255,254,222,35,192,166,30,73,128]),n=new Uint8Array([0,0,0,1,103,77,64,51,140,141,78,64,60,34,17,168,0,0,0,1,104,238,60,128]),r=new Uint8Array([0,0,0,1,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,30,186,2,64,0,0,0,1,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,30,160,136,69,150,233,111,11,128,64,0,0,3,0,64,0,0,3,3,194,0,0,0,1,68,1,192,115,192,137]),o=new Uint8Array([0,0,0,1,40,1,172,26,224,244,133,49,47,246,227,105,128]),a={},l={},d={},p={},u=(function(){function Ze(et,ht){ht===void 0&&(ht=!1),this.view=et,this.isH265=ht,this.offset=0,this.current_start_code_size=0,this.current_nalu_start=0,this.current_nalu_size=0,this.start_code_size=0,this.nalu_start=0,this.left_size=0,this.nalu_size=0,this.left_size=et.byteLength}return Ze.prototype.FindStartCode=function(){var et=this.view.byteLength-this.offset;for(this.current_start_code_size=0,this.current_nalu_start=-1;et>=3;){if(this.view.getUint8(this.offset)==0&&this.view.getUint8(this.offset+1)==0&&this.view.getUint8(this.offset+2)==1)return this.current_start_code_size=3,this.current_nalu_start=this.offset,this.offset-1>=0&&this.view.getUint8(this.offset-1)==0&&(++this.current_start_code_size,--this.current_nalu_start),this.offset+=3,!0;--et,++this.offset}return!1},Ze.prototype.FindNalu=function(){return this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,!(this.offset>=this.view.byteLength)&&!!this.FindStartCode()&&(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,!0)},Ze.prototype.NextNalu=function(et){if(this.start_code_size=0,this.nalu_start=0,this.nalu_size=0,this.offset>=this.view.byteLength||!this.FindStartCode())return!1;if(this.start_code_size=this.current_start_code_size,this.nalu_start=this.current_nalu_start,et){if(this.isH265){if((126&this.view.getUint8(this.nalu_start+this.start_code_size))>>1!==39)return!0}else if((31&this.view.getUint8(this.nalu_start+this.start_code_size))!=6)return!0}return this.FindStartCode()?(this.offset=this.current_nalu_start,this.nalu_size=this.current_nalu_start-this.nalu_start,!0):(this.nalu_size=this.view.byteLength-this.nalu_start,!0)},Ze})();function v(Ze,et){et===void 0&&(et=0);for(var ht=Ze.length,gt=[],Et=0;Et<ht;)Et>=et&&ht-Et>=3&&!Ze[Et]&&!Ze[Et+1]&&Ze[Et+2]==3?(gt.push(Ze[Et++]),gt.push(Ze[Et++]),Et++):gt.push(Ze[Et++]);var At=new Uint8Array(gt);return{output:At,outLength:At.length}}function x(Ze){return Uint8Array.from(Array.from(unescape(encodeURIComponent(Ze))).map(function(et){return et.charCodeAt(0)}))}function U(Ze){var et=0,ht=0;return et=Ze[ht++]<<24,et|=Ze[ht++]<<16,et|=Ze[ht++]<<8,et|=Ze[ht++]}function te(Ze,et,ht){var gt=Ze.byteLength,Et=parseInt(gt/255),At=gt%255,Ot=new ArrayBuffer(1+(Et+1)+gt+1),Bt=new DataView(Ot),Kt=0;Bt.setUint8(Kt++,et===1?5:e);for(var Ht=0;Ht<Et;Ht++)Bt.setUint8(Kt++,255);Bt.setUint8(Kt++,At);var Zt=new DataView(Ze);for(Ht=0;Ht<(Ze==null?void 0:Ze.byteLength);Ht++)Bt.setInt8(Kt++,Zt.getInt8(Ht));Bt.setInt8(Kt++,128);var un=new Uint8Array(Ot),hn=un;if(ht){var pn=(function(Bn){for(var mn=[],vn=Bn.length,cn=0,nn=0;nn<vn;++nn){var gn=Bn[nn];gn<=3&&cn>=2&&(mn.push(3),cn=0),mn.push(Bn[nn]),gn==0?++cn:cn=0}var yn=new Uint8Array(mn);return{output:yn,outLength:yn.length}})(un).output;hn=pn}return{rbspView:hn,ebspLength:hn.length}}function le(Ze,et,ht,gt,Et){var At=void 0,Ot=Et[gt],Bt=Ot.isLowStream,Kt=Ot.kind,Ht=Ot.vCodec;if(Kt=Kt||"video",Bt=Bt||!1,Ze==="encode"?At=function(un,hn){Kt==="audio"?hn.enqueue(un):Ot.onlyAudio?(function(pn,Bn,mn,vn,cn){var nn,gn,yn,bn=a[mn];if(bn){var i=vn?bn.lowStreamSideInfos:bn.sideInfos,c=0,h=pn.type==="key",y=performance.now(),A=!1,z=(gn=(nn=pn.getMetadata)===null||nn===void 0?void 0:nn.call(pn))===null||gn===void 0?void 0:gn.mimeType;A=z?(yn=z==null?void 0:z.includes("H265"))!==null&&yn!==void 0&&yn:cn==="H265";var Me=0,pt=[];if(i.length>0){for(var kt=i.length>=9?9:i.length,zt=0;zt<kt;zt++){var tn=te(i[zt],bn.type,bn.emulationPreventionByte);Me+=4+(A?2:1)+(Ct=tn.ebspLength),pt.push(tn)}vn?bn.lowStreamSideInfos=[]:bn.sideInfos=[],y-bn.recvLastKeyFrameTime>2e3&&(h=!0)}A&&!h&&y-bn.recvLastKeyFrameTime>2e3&&(h=!0),h&&(c=A?r.length+o.length:n.length+t.length);var on=new ArrayBuffer(Me+c),Qt=new DataView(on),Xt=0;if(h)if(A){var Ln=new DataView(r.buffer);for(br=0;br<r.length;br++)Qt.setInt8(Xt++,Ln.getInt8(br))}else for(var tr=new DataView(n.buffer),br=0;br<n.length;br++)Qt.setInt8(Xt++,tr.getInt8(br));for(zt=0;zt<pt.length;zt++){var jt=pt[zt],Mt=jt.rbspView,Ct=jt.ebspLength;Qt.setUint8(Xt++,0),Qt.setUint8(Xt++,0),Qt.setUint8(Xt++,0),Qt.setUint8(Xt++,1),A?(Qt.setUint8(Xt++,78),Qt.setUint8(Xt++,1)):Qt.setUint8(Xt++,6);for(var sn=0;sn<Ct;sn++)Qt.setInt8(Xt++,Mt[sn-0])}if(h)if(A){var Kn=new DataView(o.buffer);for(br=0;br<o.length;br++)Qt.setInt8(Xt++,Kn.getInt8(br))}else{var Pr=new DataView(t.buffer);for(br=0;br<t.length;br++)Qt.setInt8(Xt++,Pr.getInt8(br))}pn.data=on,h&&(bn.recvLastKeyFrameTime=y),Bn.enqueue(pn)}else Bn.enqueue(pn)})(un,hn,gt,Bt,Ht):(function(pn,Bn,mn,vn,cn){var nn,gn,yn,bn=a[mn];if(bn){var i=vn?bn.lowStreamSideInfos:bn.sideInfos;if(i.length>0){var c=!1,h=(gn=(nn=pn.getMetadata)===null||nn===void 0?void 0:nn.call(pn))===null||gn===void 0?void 0:gn.mimeType;c=h?(yn=h==null?void 0:h.includes("H265"))!==null&&yn!==void 0&&yn:cn==="H265";for(var y=new DataView(pn.data),A=[],z=0,Me=0;Me<i.length;Me++){var pt=te(i[Me],bn.type,bn.emulationPreventionByte);z+=4+(c?2:1)+(Fn=pt.ebspLength),A.push(pt)}vn?bn.lowStreamSideInfos=[]:bn.sideInfos=[];for(var kt=new ArrayBuffer(z+pn.data.byteLength),zt=new DataView(kt),tn=0,on=new u(y,c),Qt=0,Xt=!1,Ln=!1,tr=!1,br=0;on.NextNalu();)if(br++,c){if((jt=(126&y.getUint8(on.nalu_start+on.start_code_size))>>1)==32)Xt=!0,Qt+=on.nalu_size;else if(jt==33)Ln=!0,Qt+=on.nalu_size;else if(jt==34)tr=!0,Qt+=on.nalu_size;else if(jt==35)continue;if(Xt&&Ln&&tr)break}else{var jt;if((jt=31&y.getUint8(on.nalu_start+on.start_code_size))==7)Ln=!0,Qt+=on.nalu_size;else if(jt==8)tr=!0,Qt+=on.nalu_size;else if(jt==9)continue;if(Ln&&tr)break}for(var Mt=0;Mt<Qt;Mt++)zt.setInt8(tn++,y.getInt8(Mt));var Ct=10-br,sn=A.length>=(Ct=Ct>0?Ct:0)?Ct:A.length;for(Me=0;Me<sn;Me++){var Kn=A[Me],Pr=Kn.rbspView,Fn=Kn.ebspLength;zt.setUint8(tn++,0),zt.setUint8(tn++,0),zt.setUint8(tn++,0),zt.setUint8(tn++,1),c?(zt.setUint8(tn++,78),zt.setUint8(tn++,1)):zt.setUint8(tn++,6);for(var pr=0;pr<Fn;pr++)zt.setInt8(tn++,Pr[pr-0])}for(Mt=Qt;Mt<pn.data.byteLength;Mt++)zt.setInt8(tn++,y.getInt8(Mt));pn.data=kt}Bn.enqueue(pn)}else Bn.enqueue(pn)})(un,hn,gt,Bt,Ht)}:Ze==="decode"&&(At=function(un,hn){Kt==="audio"?hn.enqueue(un):(function(pn,Bn,mn){var vn,cn,nn,gn=l[mn],yn=gn&&gn.codec!=="VP8",bn=!1,i=(cn=(vn=pn.getMetadata)===null||vn===void 0?void 0:vn.call(pn))===null||cn===void 0?void 0:cn.mimeType;if(bn=i?(nn=i==null?void 0:i.includes("H265"))!==null&&nn!==void 0&&nn:gn.codec==="H265",yn){var c=gn.firstFrame;if(c){if(c.buffer)if(pn.timestamp-c.time<20){var h=(function(Fr,Es){if(Fr.byteLength!==Es.byteLength)return!1;for(var Mu=0;Mu<Fr.byteLength;Mu++)if(Fr[Mu]!==Es[Mu])return!1;return!0})(new Uint8Array(pn.data),c.buffer);h&&(yn=!1)}else c.buffer=void 0}else gn.firstFrame={buffer:new Uint8Array(pn.data).slice(0),time:pn.timestamp}}if(yn){for(var y=new DataView(pn.data),A=0,z=new u(y,bn),Me=0,pt=!1;z.NextNalu(pt);){if(bn){if((Me=(126&y.getUint8(z.nalu_start+z.start_code_size))>>1)==32||Me==33||Me==34||Me==35)continue;if(Me!=39)break}else{if((Me=31&y.getUint8(z.nalu_start+z.start_code_size))==7||Me==8||Me==9)continue;if(Me!=6)break}var kt=new Uint8Array(pn.data).slice(z.nalu_start+z.start_code_size,z.nalu_start+z.start_code_size+z.nalu_size);gn.emulationPreventionByte&&(kt=v(kt).output),A=bn?2:1,pt=!0;for(var zt=0;kt[A]===255;)zt+=255,A++;if((zt+=kt[A++])===e||zt===5||zt===100){for(var tn=0;kt[A]===255;)tn+=255,A++;if(tn+=kt[A++],pn.data.byteLength-A<tn)break;var on=new Uint8Array(4+tn);switch(on[0]=0,on[1]=0,zt){case 100:on[2]=3,on[3]=235;break;case 5:on[2]=3,on[3]=236;break;case e:on[2]=3,on[3]=237}for(var Qt=0;Qt<tn;Qt++)on[4+Qt-0]=kt[A++];var Xt=!1;if(zt===e)Xt=!0;else if(zt===5){var Ln=gn.unregisterSeiFilter;if(Ln){var tr=on.slice(4,4+gn.filterSize),br=void 0,jt=!0;if((br=typeof Ln=="string"?x(Ln):Ln).length===0)jt=!1;else for(var Mt=0;Mt<br.length;Mt++)if(br[Mt]!==tr[Mt]){jt=!1;break}Xt=jt}else Xt=!0}Xt&&s.postMessage({cmd:"recvSEI",streamID:mn,buffer:Array.from(on)})}else if(zt===244){for(tn=0;kt[A]===255;)tn+=255,A++;if(tn+=kt[A++],pn.data.byteLength-A<tn)break;var Ct=parseInt(tn/5+""),sn=kt.slice(A,A+=tn),Kn=[];for(Mt=0;Mt<Ct;Mt++){var Pr=5*Mt,Fn=sn.slice(Pr,Pr+4),pr=sn.slice(Pr+4,Pr+5),zr=U(Fn);Kn.push({soundLevelID:zr,value:pr[0]})}s.postMessage({cmd:"mixSoundLevel",soundLevelList:Kn,streamID:gn.streamID})}}Bn.enqueue(pn)}else Bn.enqueue(pn)})(un,hn,gt)}),At){var Zt=new TransformStream({transform:At});et.pipeThrough(Zt).pipeTo(ht)}}function se(Ze){var et=a[Ze];return et||(a[Ze]={streamID:Ze,sideInfos:[],lowStreamSideInfos:[],type:243,emulationPreventionByte:!1,recvLastKeyFrameTime:0},a[Ze])}function We(Ze){var et=l[Ze];return et||(l[Ze]={streamID:Ze,emulationPreventionByte:!1,codec:"",unregisterSeiFilter:"",filterSize:0},l[Ze])}function Ke(Ze){var et=Ze.cmd;if(et==="encode"){var ht=Ze.readable,gt=Ze.writable,Et=Ze.streamID,At=Ze.type,Ot=Ze.isLowStream,Bt=Ze.emulationPreventionByte,Kt=Ze.onlyAudio,Ht=Ze.vCodec;if((un=Ze.kind)!=="audio"){var Zt=se(Et);Zt.type=At,Zt.emulationPreventionByte=Bt}d[Et]={isLowStream:Ot,kind:un,onlyAudio:Kt,vCodec:Ht},le(et,ht,gt,Et,d)}else if(et==="decode"){ht=Ze.readable,gt=Ze.writable,Et=Ze.streamID,Bt=Ze.emulationPreventionByte;var un,hn=Ze.codec,pn=Ze.unregisterSeiFilter,Bn=Ze.filterSize;if((un=Ze.kind)!=="audio"){var mn=We(Et);mn.emulationPreventionByte=Bt,mn.codec=hn,mn.unregisterSeiFilter=pn,mn.filterSize=Bn}p[Et]={isLowStream:!1,kind:un},le(et,ht,gt,Et,p)}}onmessage=function(Ze){var et=Ze.data,ht=et.cmd;try{switch(ht){case"encode":case"decode":Ke(et);break;case"updatePlayer":var gt=et.codec;We(Ht=et.streamID).codec=gt;break;case"pushSideInfo":var Et=et.buffer,At=et.hasLowStream,Ot=et.maxLength,Bt=se(Ht=et.streamID);Bt.sideInfos.length>Ot?console.error("Send SEI Failed. The number of inserted sei exceeds the limit."):(Bt.sideInfos.push(Et),At&&Bt.lowStreamSideInfos.push(Et));break;case"publishStreamType":var Kt=d[Ht=et.streamID];Kt&&(Kt.onlyAudio=et.onlyAudio);break;case"clear":var Ht=et.streamID;et.type=="push"?(delete a[Ht],delete d[Ht]):(delete p[Ht],delete l[Ht])}}catch(Zt){s.postMessage({cmd:"error",error:Zt})}},s.RTCTransformEvent&&(s.onrtctransform=function(Ze){var et=Ze.transformer;Ke(Object.assign({readable:et.readable,writable:et.writable},et.options))})}(function(s){s[s.LoginReq=1]="LoginReq",s[s.LoginRsp=2]="LoginRsp",s[s.CreateSessionReq=3]="CreateSessionReq",s[s.CreateSessionRsp=4]="CreateSessionRsp",s[s.CreateSessionWithSdpReq=5]="CreateSessionWithSdpReq",s[s.CreateSessionWithSdpRsp=6]="CreateSessionWithSdpRsp",s[s.SessionResetPush=7]="SessionResetPush",s[s.SessionResetAck=8]="SessionResetAck",s[s.PublishEventPush=9]="PublishEventPush",s[s.PlayEventPush=10]="PlayEventPush",s[s.MediaDescReq=11]="MediaDescReq",s[s.MediaDescRsp=12]="MediaDescRsp",s[s.CandidateInfoReq=13]="CandidateInfoReq",s[s.CandidateInfoRsp=14]="CandidateInfoRsp",s[s.CloseSessionReq=15]="CloseSessionReq",s[s.CloseSessionRsp=16]="CloseSessionRsp",s[s.MediaDescPush=17]="MediaDescPush",s[s.MediaDescAck=18]="MediaDescAck",s[s.CandidateInfoPush=19]="CandidateInfoPush",s[s.CandidateInfoAck=20]="CandidateInfoAck",s[s.CloseSessionPush=21]="CloseSessionPush",s[s.CloseSessionAck=22]="CloseSessionAck",s[s.StreamStatusNotify=23]="StreamStatusNotify",s[s.StreamStatusNotifyAck=24]="StreamStatusNotifyAck",s[s.StreamStatusNotifyPush=25]="StreamStatusNotifyPush",s[s.StreamStatusNotifyPushAck=26]="StreamStatusNotifyPushAck",s[s.BroadcasterStatusNotify=27]="BroadcasterStatusNotify",s[s.BroadcasterStatusAck=28]="BroadcasterStatusAck",s[s.ActivateAudioPlayStreamReq=29]="ActivateAudioPlayStreamReq",s[s.ActivateAudioPlayStreamRsp=30]="ActivateAudioPlayStreamRsp",s[s.ActivateVideoPlayStreamReq=31]="ActivateVideoPlayStreamReq",s[s.ActivateVideoPlayStreamRsp=32]="ActivateVideoPlayStreamRsp",s[s.ClientInfoPush=33]="ClientInfoPush",s[s.ClientInfoAck=34]="ClientInfoAck",s[s.NetQualityProbeReq=35]="NetQualityProbeReq",s[s.NetQualityProbeRsp=36]="NetQualityProbeRsp",s[s.NetQualityInfoPush=37]="NetQualityInfoPush",s[s.NetQualityInfoAck=38]="NetQualityInfoAck",s[s.ActivateSEIInsertReq=39]="ActivateSEIInsertReq",s[s.ActivateSEIInsertRsp=40]="ActivateSEIInsertRsp",s[s.Peer2PeerNetStatsGetReq=41]="Peer2PeerNetStatsGetReq",s[s.Peer2PeerNetStatsGetRsp=42]="Peer2PeerNetStatsGetRsp",s[s.CmdReq=43]="CmdReq",s[s.CmdRsp=44]="CmdRsp",s[s.CmdPush=45]="CmdPush",s[s.CmdAck=46]="CmdAck",s[s.WebRTCDispatchReq=47]="WebRTCDispatchReq",s[s.WebRTCDispatchRsp=48]="WebRTCDispatchRsp"})(Yd||(Yd={}));var af={1:"LoginReq",2:"LoginRsp",3:"CreateSessionReq",4:"CreateSessionRsp",5:"CreateSessionWithSdpReq",6:"CreateSessionWithSdpRsp",7:"SessionResetPush",8:"SessionResetAck",9:"PublishEventPush",10:"PlayEventPush",11:"MediaDescReq",12:"MediaDescRsp",13:"CandidateInfoReq",14:"CandidateInfoRsp",15:"CloseSessionReq",16:"CloseSessionRsp",17:"MediaDescPush",18:"MediaDescAck",19:"CandidateInfoPush",20:"CandidateInfoAck",21:"CloseSessionPush",22:"CloseSessionAck",23:"StreamStatusNotify",24:"StreamStatusNotifyAck",25:"StreamStatusNotifyPush",26:"StreamStatusNotifyPushAck",27:"BroadcasterStatusNotify",28:"BroadcasterStatusAck",29:"ActivateAudioPlayStreamReq",30:"ActivateAudioPlayStreamRsp",31:"ActivateVideoPlayStreamReq",32:"ActivateVideoPlayStreamRsp",33:"ClientInfoPush",34:"ClientInfoAck",35:"NetQualityProbeReq",36:"NetQualityProbeRsp",37:"NetQualityInfoPush",38:"NetQualityInfoAck",39:"ActivateSEIInsertReq",40:"ActivateSEIInsertRsp",41:"Peer2PeerNetStatsGetReq",42:"Peer2PeerNetStatsGetRsp",43:"CmdReq",44:"CmdRsp",45:"CmdPush",46:"CmdAck",47:"WebRTCDispatchReq",48:"WebRTCDispatchRsp"},Vs=function(){return Vs=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Vs.apply(this,arguments)},hp=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},fp=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Zd=["LoginReq","CreateSessionWithSdpReq","CreateSessionReq"],Wc=["Peer2PeerNetStatsGetReq","Peer2PeerNetStatsGetRsp","CmdRsp"],Qa,Sc=ao.webrtc_proto_v2,Xd=ao.webrtc_cmd,Wa=ao.generalpclib,ma=(function(){function s(e,t,n,r){this.Zg=e,this.an=t,this.pn=n,this.Xg=r,this.t_=new ul,this.Vf={},this.Qf=new I.wl,this.Oo=100,this.Kf={},this.i_={},this.Yf=5e3,this.Ro=1e4,this.tu=null,this.To=2e3,this.n_=null,this.e_=6e3,this.s_=!0,this.o_={},this.u_=["ActivateVideoPlayStreamReq","ActivateAudioPlayStreamReq","CreateSessionReq","CreateSessionWithSdpReq","ActivateSEIInsertReq","StreamStatusNotify"],this.jo=I.xb.disconnected,this.a_=Ae.LOGOUT,this.c_=0,this.h_=void 0,this.unCheckCmds=["LoginReq","CreateSessionReq","CreateSessionWithSdpReq"];var o=e===va;this.f_=o?"zc.wcss.0":"zc.wcss.1",this.l_=r.getPCRequest(o?Jn.BusinessService.SERVICE_WEBRTC_SIGNAL:Jn.BusinessService.SERVICE_L3_WEBRTC_SIGNAL,{path:"wsv2",query:"",encode:!1,messageType:2,isMsgCache:!1}),this.d_()}return Object.defineProperty(s.prototype,"isUaConnected",{get:function(){return this.Xg.isConnect()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"state",{get:function(){return this.jo},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"mediaState",{get:function(){return this.a_},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"token",{get:function(){return this.v_},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tokenType",{get:function(){return this.c_},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){return this.Zg},enumerable:!1,configurable:!0}),s.prototype.d_=function(){var e,t=this;this.Xg.on("connected",function(){t.an.info("".concat(t.f_," netAgent connected ").concat(t.jo)),t.jo===I.xb.connecting&&t.loginCenterSvr(),t.t_.emit("uaConnected")}),this.Xg.on("disconnected",function(){t.an.info("".concat(t.f_," netAgent disconnected"))}),this.Xg.on("broken",function(n){t.an.info("".concat(t.f_," netAgent broken ").concat(n))}),this.l_.on("connected",function(n){t.an.info("".concat(t.f_," pc connected ").concat(Jn.ConnectedType[n])),t.jo=I.xb.connected,n===Jn.ConnectedType.AUTO&&t.loginCenterSvr()}),this.l_.on("disconnected",function(n,r){t.an.info("".concat(t.f_," pc disconnected ").concat(Jn.DisconnectedType[n],", ua connect: ").concat(t.isUaConnected,", signal ").concat(t.s_?"closed":"connect")),t.jo=I.xb.disconnected,t.a_=Ae.LOGOUT,t.s_||(t.isUaConnected?t.loginCenterSvr():t.jo=I.xb.connecting)}),this.l_.on("broken",function(){t.an.info("".concat(t.f_," pc broken")),t.jo=I.xb.connecting,t.a_=Ae.LOGOUT}),this.l_.on("downLoadMessage",function(n,r){t.handleWsMessage({data:n,extras:r})}),(e=this.l_)===null||e===void 0||e.on("exception",function(n,r){t.an.info("".concat(t.f_," pc exception ").concat(JSON.stringify(n)))}),this.l_.off("pcBrokenEvent"),this.l_.on("pcBrokenEvent",function(n){var r=j.S2,o=t.cr.createSpan(I.t0.H,{key:j.Hu.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(n==null?void 0:n.service_no),error:(n==null?void 0:n.code)||0}),o.end()}),this.l_.off("pcDisconnectedEvent"),this.l_.on("pcDisconnectedEvent",function(n){var r=j.pR,o=t.cr.createSpan(I.t0.H,{key:j.Hu.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(n==null?void 0:n.service_no),error:(n==null?void 0:n.code)||0}),o.end()}),this.l_.off("pcConnectedEvent"),this.l_.on("pcConnectedEvent",function(n){var r=j.D1,o=t.cr.createSpan(I.t0.H,{key:j.Hu.event},{key:""},r.event);o.setAttributes({service_no:r.service_no(n.service_no),recv_time:r.recv_time(new Date().getTime()),proxy_link_sources:r.proxy_link_sources(n.proxy_link_sources),connect_stream:r.connect_stream(n.connect_stream)}),o.end()})},s.prototype.setSessionInfo=function(e,t){this.an.info("".concat(this.f_," set session info")),this.m_=e+"",this.p_=t},s.prototype.onReconnected=function(e){},s.prototype.onNeedRetry=function(e,t){},Object.defineProperty(s.prototype,"Ev",{get:function(){var e,t,n;if(this.pn.appConfig){var r=this.pn.appConfig.media_config.publish_config.resource_info.find(function(a){return a.resource_type===I.NI.RTC});if(r){var o=(e=r==null?void 0:r.service_info)===null||e===void 0?void 0:e.find(function(a){return a.protocol===I.Hb.WEBRTC});if(o)return(n=((t=o.url_template.split("{IP}")[1].split("?"))===null||t===void 0?void 0:t[1]).split("="))===null||n===void 0?void 0:n[1]}}},enumerable:!1,configurable:!0}),s.prototype.connectServer=function(e,t,n){var r,o;if(this._s=e||((r=this.pn.roomList[0])===null||r===void 0?void 0:r.roomID),this.v_=t||((o=this.pn.roomList[0])===null||o===void 0?void 0:o.token),this.an.info("".concat(this.f_," start connect server, roomID: ").concat(this._s)),this.an.remoteReport("".concat(this.f_," token: ").concat(this.v_)),this.c_=0,this.s_=!1,this.h_=n,this.a_===Ae.LOGOUT){if(!this.pn.appConfig)return void this.an.info("".concat(this.f_," no app config"));if(!this.Ev)return void(n&&n(this.Zg,Ft.lph.code));this.app=this.Ev,this.isUaConnected?this.loginCenterSvr():(this.jo=I.xb.connecting,this.an.info("".concat(this.f_," ua is not connected")))}else this.an.info("".concat(this.f_,this.a_===Ae.TRY_LOGIN?" server is connecting":" server is connected"))},s.prototype.disconnectServer=function(){this.an.info("".concat(this.f_," disconnect server")),this.disconnectPcRequest(),this.resetCheckMessage(),this.resetLoginTimer(),this.jo=I.xb.disconnected,this.a_=Ae.LOGOUT,this.h_=void 0,this.v_="",this.i_={},this.c_=0},s.prototype.disconnectPcRequest=function(){this.an.info("".concat(this.f_," disconnect pc link ").concat(this.s_)),this.s_||(this.s_=!0,this.l_.closeRequest())},s.prototype.resetLoginTimer=function(){this.an.info("".concat(this.f_," reset login timer")),clearTimeout(this.n_),this.n_=null},s.prototype.handleWsPBMsg=function(e,t){var n=this.handlePushMsg(e,t);if(n!=null&&n.header&&(n!=null&&n.body)){var r;return n&&(n.header.cmd=af[n.header.cmd],(0,he.M$)(n.body),r={header:Vs(Vs({},n.header),{appid:this.m_,user_id:this.p_}),body:n.body}),r}this.an.error("".concat(this.f_," no header or body"))},s.prototype.handleWsMessage=function(e){var t,n=this.handleWsPBMsg(e.data,e.extras);n!=null&&n.header&&n.header.appid==this.m_&&n.header.user_id===this.p_?(Wc.includes(n.header.cmd)||this.an.info("".concat(this.f_," signmsg=").concat(n.header.cmd," ").concat((t=n.header)===null||t===void 0?void 0:t.seq)),this.handleServerPush(n)):this.an.error("".concat(this.f_," check header failed"))},s.prototype.resetCheckMessage=function(){var e;this.an.info("".concat(this.f_," reset check msg")),clearTimeout(this.tu),this.tu=null;for(var t=this.Qf.getFirst();t!=null;)this.Qf.remove(t),!((e=t._data)===null||e===void 0)&&e.error&&t._data.error(I.X5,t._data.seq),t=this.Qf.getFirst();this.Vf={}},s.prototype.handleServerPush=function(e){switch(e.header.cmd){case"LoginRsp":this.handleRespondData("LoginReq",e);break;case"CreateSessionRsp":this.handleRespondData("CreateSessionReq",e),e.body.result===0&&this.addSession(e.header.session_id,e.body.session_token);break;case"CreateSessionWithSdpRsp":this.handleRespondData("CreateSessionWithSdpReq",e),e.body.result===0&&this.addSession(e.header.session_id,e.body.session_token);break;case"WebRTCDispatchRsp":this.handleRespondData("WebRTCDispatchReq",e);break;case"SessionResetPush":this.sendResetSessionAck(e.header.seq,0,0),this.handlePushResetSessionData(e);break;case"CloseSessionPush":this.sendCloseSessionAck(e.header.seq,e.header.session_id,0),this.handleMsgWithSession(e,De.PUSH),this.removeSession(e.header.session_id);break;case"StreamStatusNotifyPush":this.sendStreamStatusNotifyAck(e.header.seq,e.header.session_id,0),this.handleMsgWithSession(e,De.PUSH);break;case"PublishEventPush":case"PlayEventPush":case"CmdPush":this.handleMsgWithSession(e,De.PUSH);break;case"ClientInfoPush":this.sendClientInfoAck(e.header.seq,e.header.session_id,0),this.handleMsgWithSession(e,De.PUSH);break;case"NetQualityInfoPush":this.sendNetQualityInfoPushAck(e.header.seq,e.header.session_id,e.body.peer_id,0),this.handleMsgWithSession(e,De.PUSH);break;case"MediaDescRsp":case"CandidateInfoRsp":case"NetQualityProbeRsp":case"ActivateSEIInsertRsp":case"ActivateVideoPlayStreamRsp":case"ActivateAudioPlayStreamRsp":case"StreamStatusNotifyAck":case"BroadcasterStatusAck":case"Peer2PeerNetStatsGetRsp":case"CmdRsp":case"CloseSessionRsp":this.handleMsgWithSession(e,De.RSP)}},s.prototype.registerPeerCallback=function(e,t){this.o_[e]=t},s.prototype.unregisterPeerCallback=function(e){delete this.o_[e]},s.prototype.handleMsgWithSession=function(e,t){var n,r;if(!((n=e==null?void 0:e.header)===null||n===void 0)&&n.session_id){var o=this.o_[(r=e==null?void 0:e.header)===null||r===void 0?void 0:r.session_id];o&&o(e,t)}else this.an.error("".concat(this.f_," rsp no session ").concat(e.header.cmd))},s.prototype.loginCenterSvr=function(){var e=this;if(this.app){var t=[];if(Object.keys(this.i_).length!=0)for(var n in this.i_){var r=parseInt(n);t.push({session_id:r,session_token:this.i_[r].token})}var o=this.v_,a=(0,he.fU)(this.cr,I.t0.H,this.p_,j.kn.event,j.Yu),l={appid:this.pn.appid,user_id:this.pn.idName,token:o,tokenType:this.c_,sessions:t,roomid:this._s,sdk_version:this.pn.sdkVerNum,app:this.app,net_mode:this.pn.netMode};this.an.info("".concat(this.f_," LoginReq ").concat(JSON.stringify(Vs(Vs({},l),{token:void 0})))),this.an.remoteReport("".concat(this.f_," LoginReq token ").concat(this.v_));var d="LoginReq",p=this.encodePBBody(d,l);this.a_=Ae.TRY_LOGIN,this.sendMessageWithCallback(d,this.pn.getSeq(),0,p,function(u,v,x){e.resetLoginTimer(),(0,he.lA)(a,{result:x.result,seq:u}),x.result==0?(e.a_=Ae.LOGIN,e.v_=x.token,e.c_=x.tokenType,e.an.info("".concat(e.f_," LoginReq suc, callback ").concat(!!e.h_)),e.an.remoteReport("".concat(e.f_," LoginRsp token ").concat(x.token)),e.h_!=null?(e.h_(e.Zg,0),e.h_=void 0):e.onReconnected(e.Zg),e.checkMessageTimeout()):(e.an.warn("".concat(e.f_," LoginReq fail, result: ").concat(x.result," callback ").concat(!!e.h_)),e.disconnectPcRequest(),e.a_=Ae.LOGOUT,e.h_!=null?(e.h_(e.Zg,x.result),e.resetCallback(x.result)):e.onNeedRetry(e.Zg,x.result))},function(u,v){e.resetLoginTimer(),e.a_=Ae.LOGOUT;var x="LoginReq fail, callback ".concat(!!e.h_,", is signal closed ").concat(e.s_,". code: ").concat(u);e.an.info("".concat(e.f_," ").concat(x)),a.setAttribute("seq",v),e.cr.setError(a,{code:u,msg:x},x),e.h_==null||e.s_||(e.h_(e.Zg,u=u??-1),e.resetCallback(u))}),this.resetLoginTimer(),this.n_=setTimeout(function(){e.an.info("".concat(e.f_," login timer triggered, callback ").concat(!!e.h_)),e.a_=Ae.LOGOUT,e.h_!=null?(e.h_(e.Zg,-1),e.resetCallback(-1)):e.onNeedRetry(e.Zg,-1)},this.e_)}else this.an.info("".concat(this.f_," no config for login"))},s.prototype.resetCallback=function(e){this.g_(e)&&(this.h_=void 0)},s.prototype.g_=function(e){return!![Ft.lph.code,20010,1008].includes(e)},s.prototype.sendMessageWithCallback=function(e,t,n,r,o,a){var l=this;o===void 0&&(o=null),a===void 0&&(a=null),Wc.includes(e)||this.an.info("".concat(this.f_," send callback ").concat(e,", seq: ").concat(t," ").concat(this.jo));var d=performance.now();if(!this.unCheckCmds.includes(e)&&this.jo!==I.xb.connected)return this.an.error("".concat(this.f_," send callback ").concat(e," connect not establish")),void(a&&a(I.Xb,t));var p={seq:t,deleted:!1,cmd:e,sendTime:new Date().getTime(),success:function(){for(var le=[],se=0;se<arguments.length;se++)le[se]=arguments[se];if(Zd.includes(e)){var We=(performance.now()-d).toFixed(0);l.an.info("".concat(l.f_," send callback suc seq: ").concat(t,", cmd: ").concat(e,", cost_time: ").concat(We))}o&&o.apply(void 0,le)},error:a,timeout:this.Yf},u=this.Qf.push(p);this.Vf[p.seq]=u;var v=this.getHeader(e,t,n),x=this.encodePBMsg(v,r),U=!1,te=!1;e==="LoginReq"&&(U=!0,te=!0),this.l_.sendRequest({payload:x,ack:U,isInSendMap:te},function(le){l.an.info("".concat(l.f_," send callback fail ").concat(JSON.stringify(le))),le.code&&a&&a(le.code,t)},function(le){l.an.info("".concat(l.f_," send callback ack"))})},s.prototype.sendMessage=function(e,t,n,r,o){if(this.a_===Ae.LOGIN){var a=this.getHeader(e,t,n),l=this.encodePBMsg(a,r);this.l_.sendRequest({payload:l})}else this.an.error("".concat(this.f_," send ").concat(e," connect not establish ").concat(Ae[this.a_]))},s.prototype.getHeader=function(e,t,n){return this.headerData({version:"1.0.1",cmd:e,appid:this.m_+"",seq:t,user_id:this.p_,session_id:n})},s.prototype.getParamsExt=function(e,t,n){return t&&(e.min_play_buf_level_ms=t),n&&(e.keyframe_intv=n),this.an.info("".concat(this.f_," params ").concat(JSON.stringify(e))),Xd.WebrtcCmdReqMsg.encode({peer_extend_param:e}).finish()},s.prototype.decodeParamsExt=function(e){return Xd.WebrtcCmdReqMsg.decode(e).peer_ext_params_push},s.prototype.createSession=function(e,t,n,r){var o="CreateSessionReq",a=t.serverHost,l=t.strAuthParam,d=t.geo,p=t.roomID,u=t.transCodecID,v=t.transCodecSuffix,x=t.ipV6Prefer,U={type:t.type,stream_id:t.streamID,turn_server_host:(0,B.QP)(a)?a:"",strAuthParam:l,params:t,area_type:d.type,area_id_list:d.areaList,ipv6_prefer:x};u!==void 0&&(U.trans_codec_id=u,U.trans_codec_suffix=v),this.pn.isMultiRoom&&(U.roomid=p),this.an.info("".concat(this.f_," create session ").concat(JSON.stringify(U)),{streamid:t.streamID});var te=this.encodePBBody(o,U);this.sendMessageWithCallback(o,e,0,te,n,r)},s.prototype.createSessionWithSdp=function(e,t,n){var r,o=this,a=e.seq,l=e.type,d=e.streamId,p=e.strAuthParam,u=e.sdp,v=e.miniSdp,x=e.serverHost,U=e.playBufLevel,te=e.params,le=e.paramsExt,se=e.roomID,We=e.geo,Ke=e.transCodecID,Ze=e.transCodecSuffix,et=e.ipV6Prefer,ht=Oi(this.an,d),gt="CreateSessionWithSdpReq",Et=((r=e.videoInfo)===null||r===void 0?void 0:r.keyFrameInterval)||2,At=this.getParamsExt(le,U,Et),Ot={type:l,stream_id:d,media_server_host:(0,B.QP)(x)?x:"",strAuthParam:p,params:te,params_ext:At,area_type:We.type,area_id_list:We.areaList,ipv6_prefer:et};Ke!==void 0&&(Ot.trans_codec_id=Ke,Ot.trans_codec_suffix=Ze),v?Ot.mini_sdp=v:Ot.sdp=u,this.pn.isMultiRoom&&(Ot.roomid=se),ht.info("".concat(this.f_," create session with sdp, params: ").concat(JSON.stringify(Vs(Vs({},Ot),{sdp:void 0,mini_sdp:void 0,params_ext:At.toString()}))));var Bt=this.encodePBBody(gt,Ot);this.sendMessageWithCallback(gt,a,0,Bt,function(Kt,Ht,Zt){return hp(o,void 0,void 0,function(){return fp(this,function(un){return Zt.params_ext&&(Zt.params_ext=this.decodeParamsExt(Zt.params_ext),(0,he.M$)(Zt.params_ext)),ht.info("".concat(this.f_," rsp ").concat(JSON.stringify(Vs(Vs({},Zt),{sdp:void 0,session_token:void 0})))),t&&t(Kt,Ht,Zt),[2]})})},n)},s.prototype.dispatchGwNodes=function(e,t,n,r){var o="WebRTCDispatchReq",a=t.streamID,l=t.geo,d=t.transCodecID,p=t.transCodecSuffix,u={type:t.type,stream_id:a,area_type:l.type,area_id_list:l.areaList,ipv6_prefer:t.ipV6Prefer};d!==void 0&&(u.trans_codec_id=d,u.trans_codec_suffix=p),this.an.info("".concat(this.f_," dispatch nodes ").concat(JSON.stringify(u)),{streamid:a});var v=this.encodePBBody(o,u);this.sendMessageWithCallback(o,e,0,v,n,r)},s.prototype.sendMediaDescUpdateReq=function(e,t,n){var r=n.sdp,o=n.miniSdp,a={type:n.type,update:1};o?a.mini_sdp=o:a.sdp=r,this.an.info("".concat(this.f_," media desc ").concat(JSON.stringify(a)));var l=this.encodePBBody("MediaDescReq",a);this.sendMessage("MediaDescReq",e,t,l)},s.prototype.removeSession=function(e){this.an.info("".concat(this.f_," remove session ").concat(e)),this.i_[e]&&delete this.i_[e]},s.prototype.sendCloseSession=function(e,t,n){var r="CloseSessionReq",o={reason:n},a=this.encodePBBody(r,o);this.an.info("".concat(this.f_," close session ").concat(t,", ").concat(JSON.stringify(o))),this.removeSession(t),this.sendMessage(r,e,t,a)},s.prototype.handleRespondData=function(e,t){var n=t.header.seq;this.an.debug("".concat(this.f_," rsp data"));var r=this.Vf[n];if(r!=null){delete this.Vf[n],this.Qf.remove(r);var o=r._data;(o==null?void 0:o.cmd)!==e?this.an.error("".concat(this.f_," command is not match")):o.success&&o.success(n,t.header.session_id,t.body)}else{if(t.header.cmd=="CloseSessionRsp"||Wc.includes(e))return;this.an.error("".concat(this.f_," cannot find data ").concat(e," ").concat(n))}},s.prototype.addSession=function(e,t){this.an.info("".concat(this.f_," add session ").concat(e)),this.i_[e]={token:t}},s.prototype.handlePushData=function(e){this.an.info("".concat(this.f_," push data, cmd: ").concat(e.header.cmd,", session: ").concat(e.header.session_id));var t=this.Kf[e.header.cmd+e.header.session_id];t?t.callback&&t.callback(e.header.seq,e.header.session_id,e.body):this.an.warn("".concat(this.f_," no callbackData, cmd: ").concat(e.header.cmd,", session: ").concat(e.header.session_id))},s.prototype.handlePushResetSessionData=function(e){this.an.info("".concat(this.f_," push reset session"));var t=[];if(e.body.cResetType==0)t=Object.keys(this.i_);else if(e.body.cResetType==1)for(var n=0;n<e.body.session_ids.length;n++)t.push(e.body.session_ids[n]);if(t.length!=0)for(var r=0;r<t.length;r++){var o=this.Kf[e.header.cmd+t[r]];o==null?this.an.info("".concat(this.f_," no callbackData ").concat(t[r])):o.callback&&o.callback(e.header.seq,t[r],e.body)}else this.an.info("".concat(this.f_," no session to callback"))},s.prototype.sendMediaDesc=function(e,t,n,r){var o="MediaDescReq",a=r.sdp,l=r.miniSdp,d={type:n,update:0,params_ext:this.getParamsExt(r.paramsExt,r.min_play_buf_level_ms,r.keyframe_intv)};l?d.mini_sdp=l:d.sdp=a,this.an.info("".concat(this.f_," media desc, session: ").concat(t,", ").concat(JSON.stringify(Vs(Vs({},d),{sdp:void 0,mini_sdp:void 0}))));var p=this.encodePBBody(o,d);this.sendMessage(o,e,t,p)},s.prototype.sendCandidateInfo=function(e,t,n){for(var r="CandidateInfoReq",o=[],a=0;a<n.length;a++)o.push({candidate:n[a].candidate,sdpMid:n[a].sdpMid,sdpMLineIndex:n[a].sdpMLineIndex});var l={infos:o};this.an.info("".concat(this.f_," candidate info, session: ").concat(t,", ").concat(JSON.stringify(l)));var d=this.encodePBBody(r,l);this.sendMessage(r,e,t,d)},s.prototype.sendCandidateInfoAck=function(e,t,n){var r="CandidateInfoAck",o={result:n};this.an.info("".concat(this.f_," candidate info ack, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.sendCloseSessionAck=function(e,t,n){var r="CloseSessionAck",o={result:n};this.an.info("".concat(this.f_," close session ack, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.sendResetSessionAck=function(e,t,n){var r="SessionResetAck",o={result:n};this.an.info("".concat(this.f_," reset session ack, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.sendStreamStatusNotifyAck=function(e,t,n){var r="StreamStatusNotifyPushAck",o={result:n};this.an.info("".concat(this.f_," stream status notify ack, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.sendClientInfoAck=function(e,t,n){var r="ClientInfoAck",o={result:n};this.an.info("".concat(this.f_," client info ack, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.sendNetQualityInfoPushAck=function(e,t,n,r){var o="NetQualityInfoAck",a={peer_id:n,result:r};this.an.info("".concat(this.f_," net quality info, session: ").concat(t,", ").concat(JSON.stringify(a)));var l=this.encodePBBody(o,a);this.sendMessage(o,e,t,l)},s.prototype.registerPushCallback=function(e,t,n){n&&(0,B.JO)(n)&&(this.an.info("".concat(this.f_," set callback, session: ").concat(t,", ").concat(e)),this.Kf[e+t]={callback:n})},s.prototype.unregisterPushCallback=function(e,t){delete this.Kf[e+t]},s.prototype.checkMessageTimeout=function(){for(var e,t,n=this,r=this.Qf.getFirst(),o=new Date().getTime(),a=0,l=0,d=0;r!=null&&r._data&&!(r._data.sendTime+this.Yf>o);)if(delete this.Vf[r._data.seq],this.Qf.remove(r),++l,r._data.cmd&&this.u_.indexOf(r._data.cmd)==-1)r=this.Qf.getFirst();else{if(r._data.error==null||this.Ro>0&&r._data.sendTime+this.Ro<o?++d:(this.an.warn(Ce.Qu8+" error cmd = "+r._data.cmd+" seq ="+((e=r._data)===null||e===void 0?void 0:e.seq)+" start time ="+((t=r._data)===null||t===void 0?void 0:t.sendTime)),(0,B.JO)(r._data.error)&&r._data.error(I.Xb,r._data.seq)),++a>=this.Oo)break;r=this.Qf.getFirst()}this.tu=setTimeout(function(){n.checkMessageTimeout()},this.To),l==0&&d==0||this.an.info(Ce.Qu8+" call success, state: timeout="+l+" drop="+d)},s.prototype.sendStreamStatus=function(e,t,n,r,o){var a="StreamStatusNotify",l={mic_status:r,camera_status:n};Oi(this.an,o).info("".concat(this.f_," stream status, session: ").concat(t,", ").concat(JSON.stringify(l)));var d=this.encodePBBody(a,l);return this.sendMessage(a,e,t,d),e},s.prototype.ActivatePlayVideoStream=function(e,t,n){var r="ActivateVideoPlayStreamReq",o={active:n?0:1,layer:0};this.an.info("".concat(this.f_," activate video, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.ActivatePlayAudioStream=function(e,t,n){var r="ActivateAudioPlayStreamReq",o={active:n?0:1,layer:0};this.an.info("".concat(this.f_," activate audio, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.activateSEIInsert=function(e,t,n,r,o){var a="ActivateSEIInsertReq",l={peer_id:n,action:r,info_type:o};this.an.info("".concat(this.f_," insert sei, session: ").concat(t,", ").concat(JSON.stringify(l)));var d=this.encodePBBody(a,l);this.sendMessage(a,e,t,d)},s.prototype.sendBroadcasterStatus=function(e,t,n){this.an.info("".concat(this.f_," broadcast status, session: ").concat(t,", status: ").concat(n));var r="BroadcasterStatusNotify",o=this.encodePBBody(r,{status:n});this.sendMessage(r,e,t,o)},s.prototype.sendNetProbe=function(e,t,n){var r="NetQualityProbeReq",o={peer_id:n,action:1};this.an.info("".concat(this.f_," net probe req, session: ").concat(t,", ").concat(JSON.stringify(o)));var a=this.encodePBBody(r,o);this.sendMessage(r,e,t,a)},s.prototype.getP2PNetStats=function(e,t,n){var r="Peer2PeerNetStatsGetReq",o=this.encodePBBody(r,{peer_id:n});this.sendMessage(r,e,t,o)},s.prototype.sendGWCmdReq=function(e,t,n){var r="CmdReq",o=this.encodePBBody(r,n);this.sendMessage(r,t,e,o,!1)},s.prototype.sendGWCmdAck=function(e,t,n,r){var o="CmdAck";t.body=n;var a=this.encodePBBody(o,t);this.sendMessage(o,(r==null?void 0:r.seq)||this.pn.getSeq(),e,a,!1)},s.prototype.on=function(e,t){this.t_.addEventHandler(e,t)},s.prototype.off=function(e,t){this.t_.removeEventHandler(e,t)},s.prototype.headerData=function(e){var t=Yd[e.cmd];if(t!==void 0){var n=Sc.Head.create({cmd:t,seq:e.seq,session_id:e.session_id});return Sc.Head.encode(n).finish()}this.an.error("".concat(this.f_," cmd not exist"))},s.prototype.encodePBMsg=function(e,t,n){n===void 0&&(n=!0);var r=new Uint8Array(Array.from(this.getWebRTCHead(e.length,t.length)).concat(Array.from(e)).concat(Array.from(t))),o=Wa.Header.create({cmd:n?100:101}),a=Wa.Header.encode(o).finish(),l=new Uint8Array(8);l[0]=181,l[1]=0;var d=a.length,p=r.length;return l[2]=d>>8,l[3]=d-(l[2]<<8),l.set(new Uint8Array(Int32Array.from([p]).buffer).reverse(),4),new Uint8Array(Array.from(l).concat(Array.from(a)).concat(Array.from(r)))},s.prototype.getWebRTCHead=function(e,t){var n=new Uint8Array(7);return n[0]=17,n[1]=e>>8,n[2]=e-(n[1]<<8),n.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),n},s.prototype.encodePBBody=function(e,t){var n=Sc[e].create(t);return Sc[e].encode(n).finish()},s.prototype.decodePBBody=function(e,t){var n=af[e.cmd];if(n)return Sc[n].decode(t);this.an.error("".concat(this.f_," cmd is not rtc"))},s.prototype.handlePushMsg=function(e,t){var n=e[0];if(n===181){var r=(e[2]<<8)+e[3],o=Wa.Header.decode(e.slice(8,8+r));if(o.cmd===101){var a=e.slice(8+r),l=a[0];if(l===17){var d=(a[1]<<8)+a[2],p=Sc.Head.decode(a.slice(7,7+d)),u=a.slice(7+d);return{header:p,body:this.decodePBBody(p,u)}}this.an.error("".concat(this.f_," webrtc tag error ").concat(l))}else this.an.error("".concat(this.f_," cmd error ").concat(o.cmd))}else this.an.error("".concat(this.f_," type error ").concat(n))},s})(),rd=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Hf=(function(s){function e(t,n){var r=s.call(this)||this;return r.b_=t,r.an=n,r.retryActiveCount=1,r.RETRY_MAX_TIME=90,r.rr=.3,r.sr=4.8,r.aborted=!1,r.f_="zc.rssh "+t.server,r}return rd(e,s),e.prototype.startRetryTask=function(t,n,r,o,a){this.an.info("".concat(this.f_," start retry task"));var l=n.roomID,d=n.token,p=n.firstInterval;this.init(t),this.startMaxTime(),this.onCompleteActive=r,this.onSucActive=o,this.onFailActive=a,this.active(p,{roomID:l,token:d})},e.prototype.active=function(t,n){var r=this;if(this.an.info("".concat(this.f_," active ").concat(t)),this.retryTimer)return this.an.info("".concat(this.f_," has actived, ignore")),!1;if(this.isOverTime)return this.an.info("".concat(this.f_," retry over time, stop retry")),!1;this.retryActiveInterval=this.getRetryDelayByCount(this.retryActiveCount);var o=(0,B.Cs)(t)?t:this.retryActiveInterval,a=function(){r.an.info("".concat(r.f_," connect timer triggered ")+r.b_.mediaState),r.retryTimer&&clearTimeout(r.retryTimer),r.retryTimer=null,r.retryActiveCount++,r.b_&&(r.b_.mediaState===Ae.LOGOUT||t===0?(r.b_.connectServer(n==null?void 0:n.roomID,n==null?void 0:n.token,function(d,p){r.handleConnectRsp(d,p)}),t===0&&(r.onCompleteActive&&r.onCompleteActive(r.b_.server),r.onCompleteActive=void 0)):r.b_.mediaState===Ae.LOGIN&&r.qr())},l="";return o===0?(a(),l+="connect immediately"):(this.retryTimer=setTimeout(a,o),l+="connect timer start, delay ".concat(o)),this.an.info("".concat(this.f_," ").concat(l)),!0},e.prototype.handleConnectRsp=function(t,n){this.an.info(this.f_+" connect res "+n+" aborted "+this.aborted),this.aborted||(n!=0?this.b_.g_(n)?(this.qr(),this.onFailActive&&this.onFailActive(this.b_.server,n),this.resetCallback()):this.active():(this.an.info("".concat(this.f_," connect suc ")),this.qr(),this.onSucActive&&this.onSucActive(t),this.resetCallback()))},e.prototype.getRetryDelayByCount=function(t){var n=Math.min(this.sr,this.rr*Math.pow(2,t<2?0:t)),r=Math.random(),o=Math.floor(r*(1e3*n+1));return this.an.info("".concat(this.f_," attempt ").concat(t," ").concat(n," ").concat(o)),o},e.prototype.startMaxTime=function(){var t=this;this.maxTimer||(this.maxTimer=setTimeout(function(){t.an.warn("".concat(t.f_," connect over max time ").concat(t.RETRY_MAX_TIME,"s, stop retry, aborted ")+t.aborted),t.isOverTime=!0,t.aborted||(t.invalid(),t.aborted=!0,t.onFailActive&&t.onFailActive(t.b_.server,I.jZ),t.resetCallback())},1e3*this.RETRY_MAX_TIME))},e.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},e.prototype.qr=function(){this.an.info("".concat(this.f_," stop retry")),this.stopMaxTime(),this.invalid(),this.aborted=!0},e.prototype.onactive=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},e.prototype.invalid=function(){this.an.info("".concat(this.f_," invalid")),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.startRetryTimer&&clearTimeout(this.startRetryTimer),this.startRetryTimer=null,this.retryStartTime=0,this.retryActiveCount=1},e.prototype.resetCallback=function(){this.onCompleteActive=void 0,this.onSucActive=void 0,this.onFailActive=void 0},e.prototype.reset=function(){this.an.info(this.f_+" reset"),this.stopMaxTime(),this.invalid(),this.resetCallback()},e})(Ic),id="zc.bwa",Ff=(function(){function s(e,t,n){this.an=e,this.gn=t,this.pn=n,this.timer=0,this.__=I.b3.Excellent,this.y_=5}return Object.defineProperty(s.prototype,"S_",{get:function(){return+this.gn.streamReportSpeed.toFixed(1)},enumerable:!1,configurable:!0}),s.prototype.E_=function(){var e,t=(e=this.pn.reporter.tracerHandler.getUploadStatus())!==null&&e!==void 0?e:{uploadSpeed:0,increaseSpeed:0};return+Math.max(t.uploadSpeed,t.increaseSpeed).toFixed(1)},s.prototype.setUploadStrategy=function(e,t){return this.an.setUploadStrategy(e),e!=this.y_&&(this.y_=e,t&&this.an.info("".concat(id," ").concat(t)),!0)},s.prototype.start=function(){var e,t,n=this,r=(t=(e=this.gn.au("log_strategy",!0))!==null&&e!==void 0?e:this.gn.au("log_strategy"))!==null&&t!==void 0?t:-1;[0,1,2,3,4,5].includes(r)?this.stop():this.timer||(this.k_(),this.timer=setInterval(function(){n.k_()},3e3))},s.prototype.k_=function(){var e,t,n=Object.values(this.gn.publisherList),r=Object.values(this.gn.playerList);if(n.length>0){this.endStreamTime=void 0;var o=n.reduce(function(Ze,et,ht){var gt,Et=et.publisher,At=Et.targetVBitrate;Et.lowStream&&(At+=(gt=Et.lowStreamVBitrate)!==null&&gt!==void 0?gt:0),Ze.needBitrate+=At,Et.mic_status===0&&(Ze.needBitrate+=100),Ze.hasPublishing||Et.state!==6||(Ze.hasPublishing=!0);var Ot=Et.getAvailableBitrate();(0,B.TE)(Ot)||Ze.bitrateList.push(Ot);var Bt=Et.qualityGrade;Bt>Ze.netGrade&&(Ze.netGrade=Bt),Et.camera_status===0&&(Ze.hasVideo=!0,Et.isLowVideoQuality&&(Ze.isReduceVideoQuality=!0));var Kt=Ze.bitrateList.length;return ht===n.length-1&&Kt>0&&(Ze.bitrate=Ze.bitrateList.reduce(function(Ht,Zt){return Ht+Zt},0)/Kt),Ze},{needBitrate:0,bitrateList:[],bitrate:void 0,netGrade:I.b3.Excellent,isReduceVideoQuality:!1,hasVideo:!1,hasPublishing:!1}),a=o.bitrate,l=o.needBitrate,d=o.netGrade,p=o.isReduceVideoQuality,u=o.hasVideo,v=o.hasPublishing;if(window.noZegoLogStrategy)this.an.setUploadStrategy(5),this.y_=5;else if(v)if(a){var x=a-l-8*r.length;if(!window.noZegoLogStrategy){var U=void 0;x<=0&&u&&!p?this.an.setUploadStrategy(U=1):U=this.an.setUpBitrate(x),(0,B.TE)(U)||U==this.y_||(this.an.info("".concat(id," publish strategy: ").concat(U," bitrate: ").concat(x," grade: ").concat(d," reduce: ").concat(!u||p)),this.y_=U),(0,B.TE)(d)||(this.__=d)}}else U=this.O_(d),this.setUploadStrategy(U,"publish strategy: ".concat(U," grade: ").concat(d," reduce: ").concat(p));else this.an.setUploadStrategy(U=1),this.setUploadStrategy(U,"publish requesting strategy: ".concat(U))}else if(r.length>0){this.endStreamTime=void 0;var te=r.reduce(function(Ze,et){return Ze.hasPlaying||et.state!==6||(Ze.hasPlaying=!0),et.qualityGrade>Ze.grade&&(Ze.grade=et.qualityGrade),Ze},{grade:I.b3.Excellent,hasPlaying:!1}),le=te.hasPlaying;U=this.O_(d=te.grade),le&&U!==0||(U=1),window.noZegoLogStrategy?(this.an.setUploadStrategy(5),this.y_=5):this.setUploadStrategy(U,"play strategy: ".concat(U," grade: ").concat(d," playing: ").concat(le))}else{var se=this.E_(),We=+((t=((e=this.pn.rtm)===null||e===void 0?void 0:e.netAgent).speed)!==null&&t!==void 0?t:0).toFixed(1),Ke="".concat(id," will end. curr strategy: ").concat(this.y_," grade: ").concat(this.__," tracer: ").concat(se," speedLog: ").concat(this.S_," netAgent: ").concat(We);this.endStreamTime||(this.endStreamTime=Date.now()),(Date.now()-this.endStreamTime>3e4||se+this.S_+We<10)&&(U=this.O_(I.b3.Excellent),this.setUploadStrategy(U)&&(Ke+=" target strategy ".concat(U))),this.an.info(Ke),this.y_===5&&this.stop()}},s.prototype.lazyStopCheck=function(){[I.b3.Excellent,I.b3.Good].includes(this.__)},s.prototype.stop=function(){var e,t,n="".concat(id," end check net. ").concat(this.__);this.timer&&(clearInterval(this.timer),this.timer=0);var r=(t=(e=this.gn.au("log_strategy",!0))!==null&&e!==void 0?e:this.gn.au("log_strategy"))!==null&&t!==void 0?t:-1;(!r||r<0)&&(r=5),this.an.setUploadStrategy(r),(0,B.TE)(r)||r==this.y_||(n+=" new strategy ".concat(r),this.y_=r),this.an.info(n)},s.prototype.O_=function(e){var t,n=this.__;switch(e<n&&(e=n-1),this.__=e,e){case I.b3.Excellent:t=5;break;case I.b3.Good:t=3;break;case I.b3.Middle:t=2;break;case I.b3.Poor:t=1;break;case I.b3.Die:t=0;break;default:t=4}return t},s.defaultAvailableBitrate=5e4,s})(),Gf=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),ga=function(){return ga=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},ga.apply(this,arguments)},pp=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))};(function(s){s[s.NotReUse=0]="NotReUse",s[s.TheSameReUse=1]="TheSameReUse",s[s.DiffReUse=2]="DiffReUse",s[s.AllReUse=3]="AllReUse"})(Qa||(Qa={}));var va="rtc",Ja="l3",Ka=j.Og,Qf=Ka.event,Iu=Ka.error,$d=j.Nr,od=$d.error,eh=I.h7.error,ku=R.frameRate,cf=R.bitRate,Wf=(function(){function s(e){this.an=e,this.lazyTimeout=9e4,this.taskMap={}}return s.prototype.startLazyEndTimer=function(e,t,n){var r=this;this.taskMap[e]&&clearTimeout(this.taskMap[e].timer);var o=setTimeout(function(){t(),delete r.taskMap[e]},n??this.lazyTimeout);this.taskMap[e]={callback:t,timer:o}},s.prototype.clearLazyEndTimer=function(e){this.taskMap[e]&&(clearTimeout(this.taskMap[e].timer),delete this.taskMap[e],this.an.info("zsc.rsfs.0 clearLazyEndTimer: "+e))},s.prototype.endAll=function(){for(var e in this.taskMap)clearTimeout(this.taskMap[e].timer),this.taskMap[e].callback(),delete this.taskMap[e]},s.prototype.hasEndTask=function(e){return!!this.taskMap[e]},s.prototype.end=function(e){this.taskMap[e]&&(clearTimeout(this.taskMap[e].timer),this.taskMap[e].callback(),delete this.taskMap[e])},s})(),Yr=(function(s){function e(t,n,r,o,a,l){var d,p,u,v=this;return(v=s.call(this)||this).an=t,v.pn=n,v.dataReport=r,v.I_=o,v.acMgr=a,v.geo=l,v.testEnvironment=!1,v.playModule=null,v.trackUtils=new sf(v.an),v.R_=3e3,v.C_=3e3,v.previewStreamList=[],v.A_={},v.captureStreamElementMap=new Map,v.soundLevelDelegate=!1,v.soundLevelInterval=1e3,v.enableInBackground=!1,v.Od=!0,v.z_={},v.D_={},v.streamIPStackMode=F.IPv4Prefer,v.isMicEnabled=!0,v.isDataChannelEnabled=!1,v.targetQuality=I.Bl.MiddleMinQuality,v.probeInterval=6e4,v.N_=3e5,v.gwNode="",v.playerList={},v.publisherList={},v.playSuccessCallBackList={},v.playErrorCallBackList={},v.waitPublishList=[],v.waitPlayList=[],v.autoSwitchProtocol=!0,v.udpFailNum=0,v.maxUdpFailNum=2,v.probeStartedNum=3,v.cachedGwNodesList={},v.cachedGwNodesMode=Qa.TheSameReUse,v.P_=-1,v.M_=-1,v.qp=null,v.x_=3,v.useCopyMusic=!1,v.playEventKeys={},v.isCustomVC=!1,v.defaultVideoMuted=!1,v.defaultAudioMuted=!1,v.agentConnectIPStackType=-1,v._agentIpStackDetection={IPv4:G.unknown,IPv6:G.unknown},v.miniSdpWorker=null,v.ipV6Prefer=0,v.ipNodeType=k.ZV4Priority,v.isCandidateHasIPv6=!1,v.referenceVideoBitrate=-1,v.referenceBitrateUpdateTs=0,v.j_=function(x){v.an.info("zsc.orh.0 call ".concat(x)),v.retryStreamList(x)},v.q_=function(x,U){v.an.info("zsc.odh.0 call ".concat(x," connect fail ").concat(U)),v.openConnectServerTask(x)},v.eventHandler={visibilitychange:function(){!v.enableInBackground&&v.soundLevelDelegate&&(he.VJ.hidden?(v.soundLevelTimer&&clearTimeout(v.soundLevelTimer),v.soundLevelTimer=null,v.enableSoundLevelProcessor(!1)):(v.enableSoundLevelProcessor(!0),v.activeSoundLevel(),v.ac.state==="suspended"&&v.ac.resume()))}},v.isNotSupportSeiWorker=!1,v.turnServers=void 0,v.checkDeviceChange=void 0,v.L_=new Wf(t),v.I_._on("_roomStateUpdate",function(x,U,te,le,se,We){var Ke;for(var Ze in U=="CONNECTING"?Ke=1:U==="CONNECTED"&&(Ke=5),v.B_.timer||(0,B.TE)(Ke)||v.B_.setUploadStrategy(Ke,"login state ".concat(U," , strategy ").concat(Ke)),v.playerList){var et=v.playerList[Ze];if(et.room.roomID==x&&et.state===6&&et.playMode==I.ey.CDN)if(U=="CONNECTED"){et.CDNBrokenCnt++;var ht=et.zegoCdnPlayer,gt=et.zegoExpressPlayer;gt?gt.resume():ht&&(ht.canRetry=!0,ht.retry())}else U==="DISCONNECTED"&&!We&&v.stopPlayingStream(Ze)}}),he.VJ.addEventListener("visibilitychange",v.eventHandler.visibilitychange),v.Fg=new of(t,n,v),(d=v.I_.netAgent)===null||d===void 0||d.on("clientInfo",function(x){var U;if(v.pn.accessClientIp&&(x!=null&&x.clientIP)&&v.pn.accessClientIp!==x.clientIP){v.an.info("zsc.cs.0 client ip changed "+v.pn.accessClientIp+" "+x.clientIP);var te=v.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.rH.event);te.setAttributes({last_client_ip:v.pn.accessClientIp,current_client_ip:x.clientIP}),te.end(),v.lastChangeIpTime=Date.now(),v.U_(v.publisherList,!0),v.U_(v.playerList,!1),v.z_={}}if(v.pn.accessClientIp=x.clientIP,!v.pn.clientTimeOffset&&(x==null?void 0:x.timeOffset)){var le=v.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.co.event);le.setAttributes({ntp_source:2,ntp_offset:x==null?void 0:x.timeOffset}),le.end()}(0,B.Cs)(x==null?void 0:x.timeOffset)&&(v.pn.clientTimeOffset=x==null?void 0:x.timeOffset),v.updateTimeOffsetInterval(),(U=v.Fg)===null||U===void 0||U.checkIfSupportNTP()}),(p=v.I_.netAgent)===null||p===void 0||p.on("connected",function(){var x=v.I_.netAgent.connectIPStackType;v.an.info("zsc.cs.0 netAgent connect stack ".concat(ae[x])),v.agentConnectIPStackType=x}),(u=v.I_.netAgent)===null||u===void 0||u.on("ipDetection",function(x){v.an.info("zsc.cs.0 ip detection ".concat(JSON.stringify(x)));var U=x.linkConnectDetection;if(U&&(v._agentIpStackDetection.IPv4!==U.IPv4||v._agentIpStackDetection.IPv6!==(U==null?void 0:U.IPv6))){v._agentIpStackDetection=U;var te=v.getStreamIPNodesMode().ipNodeType;v.ipNodeType=te}}),v.B_=new Ff(t,v,v.pn),v}return Gf(e,s),Object.defineProperty(e.prototype,"signalList",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"probeList",{get:function(){return this.z_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamReportSpeed",{get:function(){return this.Fg.speed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentIpStackDetection",{get:function(){return this._agentIpStackDetection},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!!(lt.proxyCtrl&&this.pn.engineConfig.notProxyRTC!==!0||this.isLocalProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocalProxy",{get:function(){var t=lt.proxyCtrl;return t&&!(t!=null&&t.getTurnInfo)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useingUdp",{get:function(){var t=this.playerList,n=Object.values(this.publisherList),r=Object.values(t);if(!n.length&&!r.length)return!1;var o=!!r.find(function(a){return a.stateNego===5});return!!o||(o=!!n.find(function(a){return a.publisher.stateNego===5}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rxQuality",{get:function(){return this.M_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"txQuality",{get:function(){return this.P_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxChannels",{get:function(){var t;return this.au("max_channels",!0)?t=this.au("max_channels",!0):(0,B.Cs)(this.pn.engineConfig.maxChannels)?t=this.pn.engineConfig.maxChannels:this.au("max_channels")&&(t=this.au("max_channels")),t},enumerable:!1,configurable:!0}),e.setCloseNetProbe=function(t){e.closeNetProbe=t},e.setReportCustomerContext=function(t){of.reportCustomerContext=t},e.prototype.U_=function(t,n){var r=this,o="zc.rgnds";(0,he.rA)(this.an,o);var a=null;for(var l in t)a=n?t[l].publisher:t[l];a&&(this.clearCachedGwNodesList(a,n),Object.keys(this.D_).forEach(function(d){return r.D_[d].ipChange=!0}),this.stopNetProbe(a),(0,he.EK)(this.an,o))},Object.defineProperty(e.prototype,"billingTimer",{get:function(){return this._billingTimer||(this._billingTimer=new Vf(this.an,this.pn)),this._billingTimer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cameraPreviewStream",{get:function(){return this.previewStreamList.find(function(t){return t.previewType==="camera"})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"microphonePreviews",{get:function(){return this.previewStreamList.filter(function(t){return t.previewType==="camera"&&t.micTrack})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"publishersLength",{get:function(){return Object.keys(this.publisherList).length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasRTCStream",{get:function(){var t=Object.keys(this.publisherList).length,n=Object.values(this.playerList).filter(function(r){return r.playMode===I.ey.RTC}).length;return!(!t&&!n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasL3Stream",{get:function(){return Object.values(this.playerList).filter(function(t){return t.playMode===I.ey.L3}).length!==0},enumerable:!1,configurable:!0}),e.prototype.initMiniSdpWorker=function(t){var n,r=bi(this.pn.browserInfo,"chrome",78,0);t&&nd.isSupported&&!r?this.miniSdpWorker=this.miniSdpWorker||new nd(this.an):(this.pn.$u=!1,(n=this.miniSdpWorker)===null||n===void 0||n.destroy(),this.miniSdpWorker=null)},e.prototype.setSessionInfo=function(t,n,r){this.an.debug("zsc.ssi.0 called"),this.appid=t,this.userid=n,this.testEnvironment=r},e.prototype.onPlayStateUpdate=function(t,n,r,o){},e.prototype.onPlayQualityUpdate=function(t,n){},e.prototype.onPublishStateUpdate=function(t,n,r){},e.prototype.onPublishQualityUpdate=function(t,n){},e.prototype.setPublishStateStart=function(t,n,r,o,a,l){var d,p,u=this,v="zsc.pss.0",x=Oi(this.an,n);x.info(v+" call");var U=this.checkPreview(r);if(!U)return x.error(v+" stream not found"),!1;if(this.publisherList[n])return x.error(v+"  publisher already exist"),this.cr.spanSetAttributes({key:Qf,par:n},{error:Iu.ie.code,message:Iu.ie.message}),!1;var te=new us(n,this.an,this.dataReport,this.pn.engineConfig.publishQualityInterval||this.R_,this.C_,this,this.pn,U);this.isProxy&&this.Od&&this.setIsPeer(!1),te.isPeer=this.Od,te.isExternal=!0,te.parentSpanKey=j.ch.event;var le=(d=U==null?void 0:U.videoTrack)===null||d===void 0?void 0:d.label,se="",We="",Ke=r.getAudioTracks()[0]&&r.getAudioTracks()[0].label;try{se=(p=U==null?void 0:U.videoTrack)===null||p===void 0?void 0:p.getSettings().deviceId,We=r.getAudioTracks()[0]&&r.getAudioTracks()[0].getSettings().deviceId}catch(et){x.warn(v+" get device id failed. error: "+et)}var Ze=new ef(n,this.an,this.pn,this,!0);return this.publisherList[n]={seq:0,room:t,localStream:r,publisher:te,streamID:n,publishOption:o,cameraLabel:le||"",microLabel:Ke||"",cameraDeviceId:se||"",microDeviceId:We||"",deviceStateCount:0,retryStreamHandler:Ze,isDataChannel:l,streamSid:a,isRetweetCDN:!1},this.publishersLength===1&&this.G_(!0),te.onPublishStateUpdate=function(et,ht,gt,Et,At,Ot){var Bt=u.publisherList[ht];Bt?Bt.retryStreamHandler.publishStateHandle(et,Bt.streamID,gt,Et,At,Ot):x.error("zsc.psuh.0 cannot find publish")},te.onPublishQualityUpdate=function(et,ht){var gt=u.publisherList[et];gt?(u.pn.deviceStateOut&&ht.audio.audioBitrate===0?(gt.deviceStateCount++,gt.deviceStateCount>=2&&(gt.deviceStateCount=0,u.pn.deviceStateOut=!1,x.warn(v+" publish audio error by device"))):gt.deviceStateCount=0,u.onPublishQualityUpdate(gt.streamID,ht)):x.error("zsc.psuh.0 cannot find publish")},!0},e.prototype.retweetCDN=function(t,n,r){var o=this,a=Oi(this.an,n);return new Promise(function(l,d){a.info("zsc.rwc.0 call ".concat(t," ").concat(r));var p=o.getRoomByStreamID(n);p?p.streamHandler._publishTarget({type:t==="add"?"addpush":"delpush",streamID:n,pushUrl:r},function(){a.info("zsc.rwc.0 suc "),l(void 0)},function(u){a.warn("zsc.rwc.0 fail  "+JSON.stringify(u)),d(u)}):a.info("zsc.rwc.0 no room")})},e.prototype.startPublishingStream=function(t){var n,r=this,o=Oi(this.an,t);o.info("zsc.sps.0 call");var a=this.publisherList[t];if(a){!((n=a.publishOption)===null||n===void 0)&&n.cdnUrl&&!a.isRetweetCDN&&this.retweetCDN("add",t,a.publishOption.cdnUrl).then(function(){o.info("zsc.sps.0 add cdn suc"),a.isRetweetCDN=!0}).catch(function(d){o.warn("zsc.sps.0 add cdn fail "+JSON.stringify(d))});var l=a.retryStreamHandler;l.invalid(),l.init(this.pn.streamRetryTime),l.startMaxTime(),this.connectWebRTCCenterServer(!1,!0,a==null?void 0:a.room.roomID,a==null?void 0:a.room.token,function(d){var p,u=(p=r.publisherList[t])===null||p===void 0?void 0:p.publisher;u&&(u.setSignal(d),r.publishStream(t)),r.billingTimer.startChargeInfosUpload(),r.activeSoundLevel()}),this.B_.start()}else o.error("zsc.sps.0 publisher don't exist")},e.prototype.publishStream=function(t){var n=this,r=Oi(this.an,t);r.info("zsc.ps.0 call");var o=this.publisherList[t].publisher;if(o)if(r.info("zsc.ps.0 state ".concat(o.state)),o.state===7){var a=null,l=this.publisherList[t].publishOption,d=this.checkPreview(this.publisherList[t].localStream);d?((a=d.localStream)&&a.getTracks().forEach(function(p){wn(p,n.an,"zsc.ps.0")}),this.cr.spanSetAttributes({key:Qf,par:t},{cap_w:Ka.cap_w(d.videoInfo.width),cap_h:Ka.cap_h(d.videoInfo.height),w:Ka.w(d.videoInfo.width),h:Ka.h(d.videoInfo.height),video_en_fps:Ka.video_en_fps(d.videoInfo.frameRate),video_en_bps:Ka.video_en_bps(1e3*d.videoInfo.bitRate),is_mini:Ka.is_mini(o.$u)}),a?(r.info("zsc.ps.0 call success"),this.setStreamGwNode(o,!0),o.getDispatchIPNodeMode(),o.startPublish(t,a,l,this.getReferredVideoBitrate())):r.error("zsc.ps.0 no localStream found")):r.error("zsc.ps.0 no preview found")}else r.warn("zsc.ps.0 publisher is progress");else r.info("zsc.ps.0 publisher don't exist")},e.prototype.stopPublishingStream=function(t,n){var r=Oi(this.an,t);r.info("zsc.sps.0.1 call "+JSON.stringify(n));var o=this.publisherList[t];if(o){var a=o.retryStreamHandler;a&&(a.stopMaxTime(),a.invalid()),o.isRetweetCDN&&o.publishOption.cdnUrl&&this.retweetCDN("del",t,o.publishOption.cdnUrl).then(function(){o.isRetweetCDN=!1,r.info("zsc.sps.0.1 del cdn suc")}).catch(function(d){r.warn("zsc.sps.0.1 del cdn fail "+JSON.stringify(d))}),delete this.publisherList[t],this.resetNetworkData();var l=o.publisher;l&&(a.getTryTime(l),l.stopPublish(n),delete o.publisher),this.removeStreamFromSignal(!0,t),this.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),this.publishersLength===0&&this.G_(!1),r.info("zsc.sps.0.1 call success")}else r.warn("zsc.sps.0.1 publisher don't exist")},e.prototype.createStreamSignal=function(t){var n=new ma(t,this.an,this.pn,this.I_.netAgent);return this.pn.clientIP=this.I_.netAgent.clientIP||"",n.setSessionInfo(this.appid,this.userid),n.onReconnected=this.j_,n.onNeedRetry=this.q_,n},e.prototype.connectWebRTCCenterServer=function(t,n,r,o,a){var l,d=this,p=this.an,u="zsc.cwrcs.0";p.info("".concat(u," call, isLogin: ").concat(t,", server: ").concat(n?"rtc":"l3"));var v=null,x=n?va:Ja;this.L_.clearLazyEndTimer(x),this.A_[x]?(l=this.A_[x].signal,this.A_[x].retryServerSignalHandler=null):(l=this.createStreamSignal(x),this.A_[x]={signal:l}),l&&(l.mediaState===Ae.LOGOUT?(p.info("".concat(u," has not connect")),v||(v=new Hf(l,this.an),this.A_[x].retryServerSignalHandler=v),v.startRetryTask(this.pn.serverRetryTime,{roomID:r,token:o,firstInterval:0},function(U){var te=d.A_[U].signal;te&&a&&a(te)},function(U){d.retryStreamList(U);var te=d.A_[U].signal;t&&te&&(U===va&&d.hasRTCStream||U===Ja&&d.hasL3Stream||d.disconnectSignalURL(te,!0,15e3))},function(U,te){d.handleServerConnectFail(U,te)})):l.mediaState===Ae.TRY_LOGIN?(p.info("".concat(u," connecting")),a&&a(l)):(p.info("".concat(u,"  already connected")),a&&a(l)))},e.prototype.handleServerConnectFail=function(t,n){n===I.jZ?(t===va&&this.hasRTCStream||t===Ja&&this.hasL3Stream)&&this.openConnectServerTask(t):n&&this.handleConnectFailStream(t,n)},e.prototype.handleConnectFailStream=function(t,n){var r="zsc.rcsr.0";if(this.an.info("".concat(r," reconnect ").concat(t," ").concat(n)),this.pn.engineConfig.keepRtcWhenSignalDisconnected){var o=function(a,l){var d,p=!1;return n===Ft.lph.code?(d=ga({},Ft.lph),p=!0):((d=ga({},Ft.F$4)).message=d.message+" "+n,n===1008&&(d=Ft.g9p,p=!0),n===20010&&(p=!0,d=JSON.parse(JSON.stringify(a?Ft.ZpF:l?Ft.MK1:Ft.b1q)))),{error:d,stopRetry:p}};Object.values(this.publisherList).forEach(function(a){var l,d=o(!0);(l=a.retryStreamHandler)===null||l===void 0||l.publishStateHandle(I.eZ.error,a.streamID,d.error,d.stopRetry)}),Object.values(this.playerList).forEach(function(a){var l,d=o(!1,a.playMode===I.ey.RTC);(l=a.retryStreamHandler)===null||l===void 0||l.playStateHandle(eh,a.streamId,d.error,d.stopRetry)})}else this.an.info("".concat(r," keep rtc when signal disconnect"))},e.prototype.disconnectAllSignal=function(){var t=this;this.an.info("zsc.dcas.0 call"),Object.values(this.A_).forEach(function(n){var r=n.signal;r&&t.disconnectStreamSignal(r)})},e.prototype.disconnectStreamSignal=function(t){!this.I_.stateCenter.roomModulesList.some(function(n){return n.roomState!=="DISCONNECTED"})&&this.disconnectSignalURL(t,!1)},e.prototype.disconnectSignalURL=function(t,n,r){var o=this;this.an.info("zsc.dcsu.0 "+t.server+" "+n+" call");var a=t.server;n?(this.an.info("zsc.dcsu.0 lazy end"),this.L_.startLazyEndTimer(a,function(){var l=o.J_(a);o.an.info("zsc.dcsu.0 lazy end start "+l),l&&t.disconnectServer(),o.an.info("zsc.dcsu.0 lazy end signal")},r)):this.L_.hasEndTask(a)?(this.an.info("zsc.dcsu.0 has task to end"),this.L_.end(a)):(this.an.info("zsc.dcsu.0 direct disconnect"),t.disconnectServer()),this.an.info("zsc.dcsu.0 call success")},e.prototype.reConnectSignals=function(){this.an.info("".concat("zsc.rcs.0"," call")),Object.values(this.A_).forEach(function(t){var n=t.retryServerSignalHandler,r=t.signal;n&&(n==null||n.active(0,{roomID:r==null?void 0:r._s,token:r==null?void 0:r.token}))})},e.prototype.isNetAgentConnect=function(){var t,n;return(n=(t=this.I_)===null||t===void 0?void 0:t.netAgent)===null||n===void 0?void 0:n.isConnect()},e.prototype.setPlayStateStart=function(t,n,r,o){var a=this,l=Oi(this.an,t);if(l.info("zsc.pss.1 call"),this.playerList[t])return l.error("zsc.pss.1 player already exist"),od.be;var d=this.getPlayRoom(t)||this.pn.roomList[0];if(!d)return l.error("zsc.pss.1 not login room"),od.ge;var p=new Bf(t,this.an,null,this.dataReport,this.pn.engineConfig.playQualityInterval||this.R_,this.C_,this,this.ac,this.pn,d,n,r,o);!this.getStream(d,t)&&(p.streamInRoom=!1),this.isProxy&&this.Od&&this.setIsPeer(!1),p.isExternal=!0,p.isPeer=this.Od,this.playerList[t]=p;var u=d.streamList.find(function(x){return x.stream_id==t});if(u){var v=u.stream_attr_opts;v&&p.setMuteStreamByPlayMode(v)}return p.onPlayQualityUpdate=function(x,U){var te=a.playerList[x];te?a.onPlayQualityUpdate(te.streamId,U):l.error("zsc.pss.1 cannot find play")},!0},e.prototype.onRemoteMicStatusUpdate=function(t,n,r){},e.prototype.onRemoteCameraStatusUpdate=function(t,n,r){},e.prototype.startPlayingStream=function(t,n){var r,o,a=this,l=Oi(this.an,t),d=this.playerList[t],p=d.playMode===I.ey.CDN;if(l.info("zsc.sps.1 start play called "+d.playMode),n=n||this.playSuccessCallBackList[t],!d)return l.error("zsc.sps.1 player don't exist"),!1;if(!((r=d.playOption)===null||r===void 0)&&r.CDNVideo&&d.firstPlay){var u=d.playOption.CDNVideo;d._CDNPlayerClone=u.cloneNode(),d.initPoster=(u==null?void 0:u.getAttribute("poster"))||"",d.initVideoStyle=(u==null?void 0:u.getAttribute("style"))||"",d.firstPlay=!1}else d.zegoExpressPlayer&&d.firstPlay&&(d.firstPlay=!1);var v=d.retryStreamHandler;return v.invalid(),v.init(this.pn.streamRetryTime),p?(d.playCDN(function(x){var U=a.playErrorCallBackList[t];U&&U({errorCode:x.code,extendedData:x.message})},n),!0):((o=d.completePlaySpan)===null||o===void 0||o.setAttributes({urls:$d.urls([d.serverUrl])}),v.startMaxTime(),v.playStartSpan(t,d,!0),this.connectWebRTCCenterServer(!1,(d==null?void 0:d.playMode)===I.ey.RTC,d==null?void 0:d.room.roomID,d==null?void 0:d.room.token,function(x){var U=a.playerList[t];U&&(U.setSignal(x),a.playStream(t,n)),a.billingTimer.startChargeInfosUpload(),a.activeSoundLevel()}),this.B_.start(),!0)},e.prototype.playStream=function(t,n){var r,o=Oi(this.an,t);o.info("zsc.ps.1 call");var a=this.playerList[t];a?(o.info("zsc.ps.1 state ".concat(a.state)),a.state===7?(o.info("zsc.ps.1 call success"),this.setStreamGwNode(a,!1),(r=a.zegoPeer)===null||r===void 0||r.getDispatchIPNodeMode(),a.startPlay(t,n)):o.warn("zsc.ps.1 player is progress")):o.warn("zsc.ps.1 player don't exist")},e.prototype.rePlayStream=function(t,n){var r=this.playerList[t],o=this.playSuccessCallBackList[t];r&&(r.setSignal(n),this.playStream(t,o))},e.prototype.removeStreamFromSignal=function(t,n,r){var o,a,l=this,d=Oi(this.an,n);d.info("zsc.rsfs.0 call "+t+" "+n);var p=function(x){d.info("zsc.rsfs.0 ".concat(x.server," lazy end by remove all stream")),l.L_.startLazyEndTimer(x.server,function(){var U=l.J_(x.server);d.info("zsc.rsfs.0 "+x.server+"lazy end start, empty "+U),U&&x.disconnectServer()},r)},u=(o=this.A_[va])===null||o===void 0?void 0:o.signal;u&&!this.hasRTCStream&&p(u);var v=(a=this.A_[Ja])===null||a===void 0?void 0:a.signal;v&&!this.hasL3Stream&&p(v)},e.prototype.J_=function(t){var n;return!!(!((n=this.A_[t])===null||n===void 0)&&n.signal&&(t===va&&!this.hasRTCStream||t===Ja&&!this.hasL3Stream))},e.prototype.stopPlayingStream=function(t,n){var r=Oi(this.an,t);r.info("zsc.sps.1.1 call "+JSON.stringify(n));var o=this.playerList[t];if(o){var a=o.retryStreamHandler;a&&(a.stopMaxTime(),a.invalid()),o.playStream&&Jl.sourceDisConnect(o.playStream),delete this.playerList[t],this.resetNetworkData(),a.getTryTime(o),o.stopPlay(n);var l=o.rtcViewer;l&&l.stop(),this.removeStreamFromSignal(!1,t),!o.isProbe&&this.billingTimer.stopChargeInfosUpload(),this.stopSoundLevel(),delete this.playSuccessCallBackList[t],delete this.playErrorCallBackList[t],r.debug("zsc.sps.1.1 call success")}else r.info("zsc.sps.1.1 player don't exist")},e.prototype.reset=function(t,n){var r,o,a;for(var l in this.an.info("zsc.rs call "+t+" "+n),this.publisherList){var d=this.publisherList[l];if(((r=d.room)===null||r===void 0?void 0:r.roomID)==t||!t){var p=d.publisher,u=!1;n===0?(u=!0,p.stopReason="Logout"):n==1002031&&(p.stopReason="ReachMaxAVRetryTime");var v=n==1002031?Iu.Un:{code:n||0,message:""};u&&!p.Xh&&(v=Iu.ce),(a=(o=d.room)===null||o===void 0?void 0:o.streamHandler)===null||a===void 0||a.onPublishStateUpdate(I.eZ.error,l,v),this.stopPublishingStream(l,v),delete this.pn.publishStreamList[l]}}for(var x in this.playerList){u=!1;var U=this.playerList[x],te=U,le=te==null?void 0:te.state;n===0?(u=!0,U.stopReason="Logout"):U.stopReason="ReachMaxAVRetryTime";var se=U.room,We=se&&se.roomID==t,Ke=this.pn.roomList.length;if(v=n==1002031?od.Oe:{code:n||0,message:""},u&&le!==void 0&&le!==6&&(v=od.De),We&&(this.getStream(se,x)||Ke==1))this.onPlayStateUpdate(eh,x,v),this.stopPlayingStream(x,v);else if(We&&Ke>1){var Ze=this.pn.roomList.find(function(et){return et.roomID!==t});Ze?this.playerList[x].room=Ze:(this.stopPlayingStream(x,v),this.onPlayStateUpdate(eh,x,v))}}this.publishersLength==0&&Object.keys(this.playerList).length==0&&(this.z_={}),this.waitPublishList=[],this.waitPlayList=[],this.Fg.resetReport(),this.an.info("zsc.rs call success")},e.prototype.openConnectServerTask=function(t){var n=this,r=this.A_[t],o=r.signal,a=r.retryServerSignalHandler;if(a==null||a.reset(),o){var l=new Hf(o,this.an);l.startRetryTask(this.pn.serverRetryTime,{firstInterval:0},function(d){},function(d){n.retryStreamList(d)},function(d,p){n.handleServerConnectFail(d,p)}),this.A_[t].retryServerSignalHandler=l}},e.prototype.retryStreamList=function(t){var n;for(var r in this.publisherList){var o=this.publisherList[r].publisher,a=this.publisherList[r].retryStreamHandler;this.an.info("zsc.orh.0 reconnect "+r+" "+o.state+" "+o.stateNego),o.state==7||o.isStateRetry?!a.isOverTime&&a.publishStateHandle(I.eZ.error,r,Iu.xn):o.state==6&&(o.resendStreamStatus(2),a.stopMaxTime())}for(var r in this.playerList){var l=this.playerList[r],d=l,p=l.playMode;a=l.retryStreamHandler,this.an.info("zsc.orh.0 reconnect "+r+" "+d.state+" "+d.stateNego),((n=d.signal)===null||n===void 0?void 0:n.server)===t&&(d.state==7||p!==I.ey.CDN&&d.isStateRetry?!a.isOverTime&&a.playStateHandle(eh,r,od.Se):d.state==6&&a.stopMaxTime())}},e.prototype.getPublisher=function(t){var n=null;if((0,B.QP)(t)&&this.publisherList[t]&&this.publisherList[t].publisher)n=this.publisherList[t].publisher;else if((0,B.dr)(t)){var r=this.checkPublish(t);r&&(n=r==null?void 0:r.publisher)}return n},e.prototype.getPreviewer=function(t){var n,r=null;return(0,B.QP)(t)&&this.publisherList[t]&&this.publisherList[t].publisher?r=(n=this.publisherList[t].publisher)===null||n===void 0?void 0:n.previewer:(0,B.dr)(t)&&(r=this.checkPreview(t)),r},e.prototype.checkPlayer=function(t){return Object.values(this.playerList).find(function(n){return n.playStream===t})||null},e.prototype.checkPreview=function(t){for(var n=0;n<this.previewStreamList.length;n++)if(this.previewStreamList[n].localStream===t||t&&!(0,B.dr)(t)&&t.zegoStream&&this.previewStreamList[n].zegoCaptureStream==t.zegoStream)return this.previewStreamList[n];return null},e.prototype.checkPublish=function(t){for(var n in this.publisherList)if(this.publisherList[n].localStream==t)return this.publisherList[n];return null},e.prototype.getPublishList=function(t,n){var r;n===void 0&&(n=!0);var o=[],a=this.checkPreview(t);for(var l in n&&(a!=null&&a.zegoCaptureStream)&&(!((r=a.zegoCaptureStream)===null||r===void 0)&&r.stream)&&(t=a.zegoCaptureStream.stream),this.publisherList)this.publisherList[l].localStream==t&&o.push(this.publisherList[l]);return o},e.prototype.removePreview=function(t){for(var n=0;n<this.previewStreamList.length;n++)if(this.previewStreamList[n]===t){this.previewStreamList.splice(n,1);break}},e.prototype.onPlayerStreamUrlUpdate=function(t,n,r){},e.prototype.getScreenConstrains=function(t){var n={};if((0,B.dd)(t)&&t)n={audio:!1,video:{frameRate:ku},bitRate:this.au("screen_video_bitrate")||cf};else if((0,B.w)(t)){switch(t.videoQuality){case 1:n={video:{frameRate:w.frameRate},bitRate:w.bitRate};break;case 3:n={video:{frameRate:V.frameRate},bitRate:V.bitRate};break;case 4:n={video:{frameRate:t.frameRate,width:t.width,height:t.height},bitRate:t.bitRate};break;case 2:n={video:{frameRate:ku},bitRate:cf};break;default:n={video:{frameRate:ku},bitRate:this.au("screen_video_bitrate")||cf}}if(n.audio=!!(0,B.dd)(t.audio)&&t.audio,n.audio){var r={noiseSuppression:!1,autoGainControl:!1,echoCancellation:!0},o=t.ANS,a=t.AGC,l=t.AEC;o!==void 0&&(r.noiseSuppression=o),a!==void 0&&(r.autoGainControl=a),l!==void 0&&(r.echoCancellation=l),n.audio=r}n.video&&(n.captureElement=t.captureElement),n=ga(ga({},t),n)}return n},e.prototype.createScreenPreviewer=function(t,n,r){var o=new qc(this.an,this.pn,this,"screen"),a=t.getVideoTracks()[0].getSettings();return this.previewStreamList.push(o),(0,B.w)(r)&&(o.mediaStreamConfig=r),o.localStream=t,o.initMediaTrack(t),o.videoInfo={width:a.width||0,height:a.height||0,frameRate:a.frameRate||15,bitRate:(n==null?void 0:n.bitRate)||1e3,startBitrate:(n==null?void 0:n.startBitrate)||this.au("bitrate_mode"),minBitrate:(n==null?void 0:n.minBitrate)||0,keyFrameInterval:(n==null?void 0:n.keyFrameInterval)||2,channelCount:(n==null?void 0:n.channelCount)||1,audioBitrate:1e3*((r==null?void 0:r.audioBitrate)||48),contentHint:""},n&&(0,B.QP)(n.videoOptimizationMode)&&(o.videoInfo.contentHint=n.videoOptimizationMode),o.previewSuc=!0,o.previewType="screen",o.videoPreviewType="screen",o.audioPreviewType="screen",n!=null&&n.videoOptimizationMode&&this.setVideoTrackContentHint(t,n==null?void 0:n.videoOptimizationMode),o},e.prototype.createCompositingPreviewer=function(t,n,r){var o=new qc(this.an,this.pn,this,"compositing"),a=t.getVideoTracks()[0].getSettings();return this.previewStreamList.push(o),o.mediaStreamConfig=n,t.getAudioTracks().length>0&&(o.audioTrack=t.getAudioTracks()[0]),o.localStream=t,o.videoInfo=ga(ga({},o.videoInfo),{width:(n==null?void 0:n.width)||a.width||0,height:(n==null?void 0:n.height)||a.height||0,frameRate:(n==null?void 0:n.frameRate)||a.frameRate||15,bitRate:(n==null?void 0:n.bitrate)||2500}),o.previewSuc=!0,o.inputStreamOptions=r,o},e.prototype.setSoundLevelDelegate=function(t,n,r){r===void 0&&(r=!1),this.an.info("zsc.ssd.0 call"),this.soundLevelDelegate=t,this.enableInBackground=r,n&&this.setSoundLevelInterval(n),this.enableSoundLevelProcessor(t),t?(this.an.info("zsc.ssd.0 start getting sound"),this.activeSoundLevel()):(this.an.info("zsc.ssd.0 stop getting sound"),this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null,this.soundLevelInterval=1e3)},e.prototype.setSoundLevelInterval=function(t){var n,r;if(t&&this.soundLevelDelegate){for(var o in this.soundLevelInterval=t,this.previewStreamList)(n=this.previewStreamList[o].soundMeterWorklet)===null||n===void 0||n.setInterval(t);for(var o in this.playerList)(r=this.playerList[o].soundMeterWorklet)===null||r===void 0||r.setInterval(t)}},e.prototype.enableSoundLevelProcessor=function(t){for(var n in this.previewStreamList){var r=this.previewStreamList[n];t?r.startSoundLevel():r.stopSoundLevel()}for(var n in this.playerList){var o=this.playerList[n];t?o.startSoundLevel():o.stopSoundLevel()}},Object.defineProperty(e.prototype,"hasRemoteStream",{get:function(){return Object.keys(this.playerList).length>0},enumerable:!1,configurable:!0}),e.prototype.activeSoundLevel=function(){!this.soundLevelTimer&&this.soundLevelDelegate&&this.startSoundLevel()},e.prototype.startSoundLevel=function(){var t=this;this.soundLevelTimer&&(clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null),this.soundLevelDelegate&&(this.checkSoundLevel(),this.checkMicSoundLevel(),this.soundLevelTimer=setTimeout(function(){t.startSoundLevel()},this.soundLevelInterval))},e.prototype.checkSoundLevel=function(){var t=[];for(var n in this.publisherList){var r=0,o=this.publisherList[n].publisher,a=o.previewer;a&&(r=a.soundLevel),t.push({streamID:this.getBackStreamId(o.streamId),soundLevel:r,type:"push"})}for(var n in this.playerList){var l=this.playerList[n];l.streamId&&!l.isProbe&&t.push({streamID:this.getBackStreamId(l.streamId),soundLevel:l.soundLevel,type:"pull"})}this.soundLevelDelegate&&t.length>0&&this.onSoundLevelUpdate(t)},e.prototype.checkMicSoundLevel=function(){if(this.microphonePreviews.length&&this.soundLevelDelegate){var t=this.microphonePreviews.reduce(function(n,r){return r.soundLevel>n?r.soundLevel:n},0);this.onMicSoundLevelUpdate(t)}},e.prototype.getBackStreamId=function(t){return this.testEnvironment&&t?t.replace("zegotest-"+this.appid+"-",""):t},e.prototype.onSoundLevelUpdate=function(t){},e.prototype.onMicSoundLevelUpdate=function(t){},e.prototype.stopSoundLevel=function(){this.soundLevelTimer&&!this.hasRemoteStream&&this.previewStreamList.length===0&&(this.an.info("zsc.ssl.0 stop"),clearTimeout(this.soundLevelTimer),this.soundLevelTimer=null)},e.prototype.F_=function(){return this.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.kA.event)},e.prototype.startNetProbe=function(t,n,r){var o;n&&(n.probeTime=Date.now()),n&&!n.isPeer||!this.Od?this.cr.setError(this.F_(),{code:-1,message:"not support peer"}):(o=r||this.getProbeNodeList(n),this.an.info("zc.stnp.1 nodes ".concat(JSON.stringify(o))),o.length>0&&this.H_(t,n,o))},e.prototype.stopNetProbe=function(t){var n=this;this.D_&&t&&t.probeState!=Pe.probed&&(this.an.info("zc.stnp.0 call ".concat(t.streamId)),Object.keys(this.D_).forEach(function(r){var o;!((o=n.D_[r])===null||o===void 0)&&o.isProbed||(n.stopPlayingStream(n.D_[r].streamID),delete n.D_[r])}),t.probeState=Pe.probed,this.V_(t))},e.prototype.getProbeNodeList=function(t){var n;switch(t==null?void 0:t.ipNodeType){case k.ZV4Only:n=t.gwNodeList;break;case k.ZV4Priority:n=this.sortIPNodesByPriority(t.ipV4NodeList).map(function(r){return Rs(r)});break;case k.ZV6Priority:n=this.sortIPNodesByPriority(t.ipV6NodeList).map(function(r){return Rs(r)});break;case k.ZV6AndV4Priority:n=this.getSortedIPV6AndV4Nodes(t,"v6").map(function(r){return Rs(r)});break;default:n=[]}return n},e.prototype.V_=function(t){t.probeTimer&&clearTimeout(t.probeTimer),t.probeTimer=null},e.prototype.Q_=function(){var t="zegoprobe-"+new Date().getTime();return this.setPlayStateStart(t),{prober:this.playerList[t]?this.playerList[t]:null,streamID:t}},e.prototype.Y_=function(){var t=this,n="zc.sp.cdn";(0,he.rA)(this.an,n);var r=this.Q_(),o=r.prober,a=r.streamID;o&&(o.isProbe=!0,this.playerList[a].serverUrl=Ja,this.startPlayingStream(a,function(){}),this.playerList[a].isProbeByDG=!0,o.onCalNetQualityResult=function(l,d){t.an.info("zc.ocnqr.0 l3 detect "+l+" "+d),t.stopPlayingStream(a),(0,he.EK)(t.an,n)})},e.prototype.K_=function(t,n,r,o){o===void 0&&(o=-1);var a={result:r,probeQuality:o,timeStamp:new Date().getTime()};this.D_[n]&&(this.D_[n].isProbed=!0),this.z_[n]=a,t.probedList.push(ga(ga({},a),{gwNode:n}))},e.prototype.H_=function(t,n,r){var o=this,a="zc.psp.0";if((0,he.rA)(this.an,a),n&&r){var l=n.streamId,d=this.F_();n.probeNodeList=r;var p=new Date().getTime(),u=r.filter(function(We){return!(o.z_[We]&&o.z_[We].timeStamp+o.N_>p||n.probeState==Pe.probed||o.D_[We]&&!o.D_[We].isProbed)&&(delete o.z_[We],!0)}),v={};this.an.info("".concat(a," ").concat(l," probe nodes:").concat(JSON.stringify(u)));for(var x=u.length>this.x_?this.x_:u.length,U=function(We){var Ke=u[We];if(x==0)return"break";x--,te.z_[Ke]={};var Ze=te.Q_(),et=Ze.prober,ht=Ze.streamID;if(te.D_[Ke]={ipChange:!1,isProbed:!1,streamID:ht},v[Ke]=!0,!et)return{value:void 0};et.isProbe=!0,et.setSignal(n.signal),et.gwNode=Ke,et.ipV6Prefer=te.getIPv6PreferByGwNode(Ke),et.startPlay(ht,function(){}),et.onCalNetQualityResult=function(gt,Et){var At;Et===void 0&&(Et=-1);var Ot="zc.ocnqr.0";o.an.info(Ot+" "+et.gwNode+" "+gt+" "+Et),delete v[Ke];var Bt=Object.keys(v).length==0;if(!((At=o.D_[Ke])===null||At===void 0)&&At.ipChange)return o.an.info("".concat(Ot," ipChange:").concat(Ke)),o.stopPlayingStream(o.D_[Ke].streamID),void delete o.D_[Ke];var Kt=Pe.tryProbe;for(var Ht in o.publisherList){var Zt=o.publisherList[Ht].publisher;Zt.probeNodeList.includes(Ke)&&Zt.probeState==Kt&&o.handleProbeQuality(!0,Zt,Ke,gt,Et,Bt)}for(var Ht in o.playerList){var un=o.playerList[Ht];Ht.indexOf("zegoprobe-")==-1&&un.probeNodeList.includes(Ke)&&un.probeState==Kt&&o.handleProbeQuality(!1,un,Ke,gt,Et,Bt)}d.setAttributes({net_quality:j.kA.net_quality(parseInt(n.netQuality+"")),node_list:j.kA.node_list(r)}),d.end()},n.probeTimer||(n.probeTimer=setTimeout(function(){o.an.info("zc.snp.0 call probeTimer"),o.handleProbedList(t,n,!1,r)},6e3)),(0,he.EK)(te.an,a)},te=this,le=0;le<(u==null?void 0:u.length);le++){var se=U(le);if(typeof se=="object")return se.value;if(se==="break")break}}(0,he.OY)(this.an,a)},e.prototype.handleProbeQuality=function(t,n,r,o,a,l){var d;(0,he.rA)(this.an,"zc.hpq.0","".concat(n.streamId," ").concat(a," ").concat(r," ").concat(l," ")),this.K_(n,r,o,a),n.gwNode!=r&&((d=n.signal)===null||d===void 0?void 0:d.server)!=r||(n.probeQuality=a),l&&this.handleProbedList(t,n,l,n.probeNodeList)},e.prototype.handleProbedList=function(t,n,r,o){var a=this;this.V_(n);var l,d=n.probedList,p=n.probeState==Pe.probed,u="zc.hpl.0";(0,he.rA)(this.an,u,"".concat(n.streamId," ").concat(JSON.stringify(d)," ").concat(p," ").concat(n.netQuality)),d.length&&!p?(d.length>1&&d.forEach(function(v){if(l){if(l.probeQuality<=v.probeQuality-20){var x=a.gwNodeNetQuality(v.gwNode);if(a.an.info("".concat(u," 1: {netQuality} ").concat(v.gwNode," current:").concat(JSON.stringify(l))),x==-1||x>=l.probeQuality+20)l=v;else{var U=a.gwNodeNetQuality(l.gwNode);a.an.info("".concat(u," 2: {_netQuality} ").concat(l.gwNode)),U!==-1&&U<=Math.max(40,n.netQuality+20)&&(l=v)}}}else v.probeQuality>Math.max(40,n.netQuality+20)&&(l=v)}),l||(l=d[0]),d.forEach(function(v){var x,U=(x=a.D_[v.gwNode])===null||x===void 0?void 0:x.streamID;U&&(a.stopPlayingStream(U),delete a.D_[v.gwNode])}),this.handleCalNetQualityResult(t,l,n,r,o),n.probedList=[]):this.an.info("".concat(u," pbLength:").concat(d.length," probed:").concat(p))},e.prototype.gwNodeNetQuality=function(t){var n,r=-1;for(var o in this.publisherList){var a=this.publisherList[o].publisher;a.gwNode!=t&&a.signal.server!=t||(r=a.netQuality)}for(var o in this.playerList)if(!o.includes("zegoprobe")){var l=this.playerList[o];l.gwNode!=t&&((n=l.signal)===null||n===void 0?void 0:n.server)!=t||(r=l.netQuality)}return r},e.prototype.handleCalNetQualityResult=function(t,n,r,o,a){var l=this,d=n.gwNode,p=n.result,u=n.probeQuality,v="zc.hcqr.0 ",x=!1,U=!0,te=Oi(this.an,r.streamId);a==null||a.forEach(function(Ke){var Ze;!((Ze=l.z_[Ke])===null||Ze===void 0)&&Ze.probeQuality||(U=!1)}),te.info("".concat(v," t:").concat(r.netQuality," probe:").concat(u,", gw:").concat(d,",r:").concat(p,", last:").concat(U));var le=this.cr.createSpan(I.t0.H,{key:j.vW.event},{key:""},j.Lk.event);if(p==0&&(u>Math.max(40,r.netQuality+20)?(te.info(v+" switch "+d),x=!0,this.retryStream(r,t,d),r.probeState=Pe.probed):x=!1),!x)if(U){if(te.info(v+" last "),!r.ql)for(var se in r.netProbeToReDispatch(function(){r.ql=!1,te.info("".concat(v," gw redispatch success")),l.startNetProbe(t,r)},function(){te.info("".concat(v," gw redispatch fail")),r.ql=!1}),this.z_)this.z_[se].netQuality===-1&&(this.z_[se]={})}else o&&this.startNetProbe(t,r,a);var We=j.Lk;le.setAttributes({is_switch:We.is_switch(x),is_publish:We.is_publish(t),stream_id:We.stream_id(r.streamId),result:We.result(p),node:We.node(d),net_quality:We.net_quality(parseInt(r.netQuality+"")),probe_net_quality:We.probe_net_quality(parseInt(u+""))}),le.end()},e.prototype.retryStream=function(t,n,r){if(n){var o=t,a=o.streamId,l=o.localStream,d=o.publishOption;o.resetPublish(1),o.gwNode=r,o.startPublish(a,l,d,this.getReferredVideoBitrate())}else{var p=t,u=(a=p.streamId,p.getRemoteStreamSuc);p.resetPlay(!0,1),this.onPlayStateUpdate(I.h7.retry,a,{code:Ft.cMG.code,message:Ft.cMG.message}),p.gwNode=r,p.startPlay(a,u)}},e.prototype.getRoomByStreamID=function(t){return this.publisherList[t]?this.publisherList[t].room:this.playerList[t]?this.playerList[t].room:void 0},e.prototype.setVideoTrackContentHint=function(t,n){if((0,B.QP)(n)){var r=n.toLowerCase();if(["default","motion","detail","text"].includes(r)){var o=t.getVideoTracks()[0];o?"contentHint"in o?(this.an.info("zc.svtch "+r),o.contentHint=r=="default"?"":r):this.an.warn("zc.svtch mediaStreamTrack contentHint attribute not supported"):this.an.warn("zc.svtch video track no found")}else this.an.warn("zc.svtch videoOptimizationMode wrong")}else this.an.warn("zc.svtch videoOptimizationMode type wrong")},e.prototype.getPlayRoom=function(t){var n=this;return this.pn.roomList.find(function(r){return!!n.getStream(r,t)})},e.prototype.getStream=function(t,n){return t.streamList.find(function(r){return r.stream_id==n})},e.prototype.updateQuality=function(t,n){this.Fg.updateQualityOrChargeInfo(t,n)},e.prototype.checkStreamReport=function(){this.Fg.checkStreamReport(),this.Fg.reportOldCacheData()},e.prototype.stopToReport=function(t){this.Fg.updateQualityOrChargeInfo(t,void 0,!0)},e.prototype.setIsPeer=function(t){this.Od=t,Object.values(this.publisherList).forEach(function(n){n.publisher.isPeer=t}),Object.values(this.playerList).forEach(function(n){n.isPeer=t})},e.prototype.setStreamGwNode=function(t,n){var r=Oi(this.an,t.streamId);r.info(Ce.OKY+" call"),this.checkCachedNodesUse(t,n),t.gwNodesTTL&&t.gwNodesTTL<new Date().getTime()&&(r.info(Ce.OKY+" ttl timeout, reset gw"),t.resetGwNodes()),this.gwNode&&(t.gwNode=this.gwNode),r.info(Ce.OKY+" end "+t.gwNode)},e.prototype.getNodeIndex=function(t,n){var r="",o=n?"publish":"play",a="";switch(n||(t.playMode==I.ey.RTC?a="_rtc":t.playMode===I.ey.L3&&(a="_l3")),this.cachedGwNodesMode){case Qa.NotReUse:break;case Qa.TheSameReUse:r=o+"_"+t.streamId+a;break;case Qa.DiffReUse:r=o;break;case Qa.AllReUse:r="stream"}return r},e.prototype.checkCachedNodesUse=function(t,n){var r,o,a,l=Oi(this.an,t.streamId);if(l.info(Ce.KWc+" call "+this.cachedGwNodesMode),t.isExternal)if(n&&t.isCustomCdn())l.info(Ce.KWc+" custom cdn");else if(t.hasSucceed&&this.pn.isMultiOuter)l.info(Ce.KWc+" multi outer");else{var d=this.getNodeIndex(t,n);if(l.info(Ce.KWc+" "+d),d){var p=this.cachedGwNodesList[d];p&&p.gwNodesTTL&&p.gwNodesTTL>new Date().getTime()&&(p!=null&&p.gwNodes&&((r=p==null?void 0:p.gwNodes)===null||r===void 0?void 0:r.length)>0||p!=null&&p.ips&&((o=p==null?void 0:p.ips)===null||o===void 0?void 0:o.length)>0||p!=null&&p.ipv6s&&((a=p==null?void 0:p.ipv6s)===null||a===void 0?void 0:a.length)>0)&&(l.info(Ce.KWc+" use cache gwnodes"),p.gwNodes&&(t.gwNodeList=p.gwNodes),t.gwNodesTTL=p.gwNodesTTL,p.ips&&(t.ipV4NodeList=p.ips),p.ipv6s&&(t.ipV6NodeList=p.ipv6s),t.ipNodeType===k.ZV4Only?(t.gwNode=t.gwNodeList[0],t.ipV6Prefer=q.kV4Only):(t.gwNode=this.getGwNode(t,this.ipNodeType,-1),t.ipV6Prefer=this.ipV6Prefer))}l.info(Ce.KWc+" end "+t.gwNode)}else l.info(Ce.KWc+" retry internal")},e.prototype.updateCachedGwNodesList=function(t,n,r,o,a,l){a===void 0&&(a=[]),l===void 0&&(l=[]);var d=Oi(this.an,t);if(d.info(Ce.WaK+" call"),o===0)this.setCachedGwNodesMode(Qa.NotReUse);else if(o>0){var p=n?this.getPublisher(t):this.playerList[t];if(p){var u=this.getNodeIndex(p,n);d.info(Ce.WaK+" nodeIndex "+u),u&&(this.cachedGwNodesList[u]||(this.cachedGwNodesList[u]={}),this.cachedGwNodesList[u].gwNodesTTL=new Date().getTime()+1e3*o,(r==null?void 0:r.length)>0&&(this.cachedGwNodesList[u].gwNodes=r),(a==null?void 0:a.length)>0&&(this.cachedGwNodesList[u].ips=a),(l==null?void 0:l.length)>0&&(this.cachedGwNodesList[u].ipv6s=l))}else this.an.info(Ce.WaK+" player no found"+t)}},e.prototype.clearCachedGwNodesList=function(t,n){var r=this.getNodeIndex(t,n);this.an.info(Ce.E8q+" nodeIndex "+r,{streamid:t.streamId}),r&&delete this.cachedGwNodesList[r]},e.prototype.setCachedGwNodesMode=function(t){this.cachedGwNodesMode=t},e.prototype.updateTimeOffsetInterval=function(){var t,n,r=this;(0,B.Cs)((t=this.I_)===null||t===void 0?void 0:t.netAgent.timeOffset)&&(this.pn.clientTimeOffset=(n=this.I_)===null||n===void 0?void 0:n.netAgent.timeOffset),this.Pu=setTimeout(function(){r.updateTimeOffsetInterval()},9e5)},e.prototype.changeRxQuality=function(t){this.M_=t,this.startPublishNetWorkQuality()},e.prototype.changeTxQuality=function(t){this.P_=t,this.startPublishNetWorkQuality()},e.prototype.startPublishNetWorkQuality=function(){var t=this;this.qp===null&&(this.qp=setInterval(function(){t.pn.actionListener("networkQuality","",t.P_,t.M_)},3e3))},e.prototype.resetNetworkData=function(){Object.keys(this.playerList).length<1&&(this.M_=-1),this.publishersLength<1&&(this.P_=-1),Object.keys(this.playerList).length<1&&this.publishersLength<1&&(clearInterval(this.qp),this.qp=null)},e.prototype.getCloudSoundInterval=function(){var t=this.au("sound_sample_interval");return t&&(t<100&&(t=100),t>3e3&&(t=3e3),this.an.info("zc.gsl setting sound_sample_interval "+t)),t},e.prototype.createSoundLevel=function(t,n,r,o,a){r===void 0&&(r=this.soundLevelInterval),a===void 0&&(a=function(p){});var l=new Jl(this.an,this.pn,r,o),d=l.getSrcSource(t,n);return l.initAudioWorklet(t,d),l.onSoundLevelUpdate=function(p){a(p)},{mic:d,soundMeter:l}},e.prototype.createSEIWorker=function(){if(this.isNotSupportSeiWorker)return null;var t=this.seiWorker;if(t)return t;var n=dp.toString().trim().match(/\{([\s\S]*)\}/)[1],r=URL.createObjectURL(new window.Blob([n],{type:"text/javascript"}));return t=this.seiWorker=new Worker(r),this.an.info("zsc.gseiw init sei"),t},e.prototype.handleSeiRollBack=function(){this.isNotSupportSeiWorker=!0,this.destroySEIWorker()},e.prototype.destroySEIWorker=function(){var t;(t=this.seiWorker)===null||t===void 0||t.terminate(),this.seiWorker=void 0},e.prototype.destroy=function(){var t;this.soundLevelTimer&&clearTimeout(this.soundLevelTimer),this.Pu&&clearTimeout(this.Pu),this.qp&&clearInterval(this.qp),(t=this._billingTimer)===null||t===void 0||t.destroy(),this.Z_(),this.checkDeviceChange=void 0,this.isCandidateHasIPv6=!1,this.captureStreamElementMap.clear(),this.B_.stop(),this.destroySEIWorker(),he.VJ.removeEventListener("visibilitychange",this.eventHandler.visibilitychange)},e.prototype.Z_=function(){var t=this;Object.keys(this.A_).forEach(function(n){var r,o;t.A_[n].signal=null,(o=(r=t.A_[n])===null||r===void 0?void 0:r.retryServerSignalHandler)===null||o===void 0||o.invalid(),t.A_[n].retryServerSignalHandler=null,delete t.A_[n]})},e.prototype.supplementPlayingChargeTime=function(){this.billingTimer.supplementPlayingChargeTime()},e.prototype.getDataChannelOption=function(){var t={ordered:!0},n=this.pn.engineConfig.datachannelOption;return(0,B.dd)(n.ordered)&&!n.ordered&&(t.ordered=!1,(0,B.Cs)(n.maxPacketLifeTime)&&n.maxPacketLifeTime>0&&n.maxPacketLifeTime<5e3?t.maxPacketLifeTime=n.maxPacketLifeTime:(0,B.Cs)(n.maxRetransmits)&&n.maxRetransmits>0&&n.maxRetransmits<50&&(t.maxRetransmits=n.maxRetransmits)),t},e.prototype.getIPv6PreferByGwNode=function(t){return Si($r(t))===ae.IPv4?q.kV4AndV6:q.kV6AndV4},e.prototype.getGwNode=function(t,n,r){var o="",a=t.gwNodeList,l=t.ipV4NodeList,d=t.ipV6NodeList;if(n===k.ZV4Only)(a==null?void 0:a.length)>0&&(o=a[++r%a.length]);else if(n===k.ZV4Priority)(l==null?void 0:l.length)>0&&(t.ipNode=l[++r%l.length],o=Rs(t.ipNode));else if(n===k.ZV6Priority)(d==null?void 0:d.length)>0&&(t.ipNode=d[++r%d.length],o=Rs(t.ipNode));else if(n===k.ZV6AndV4Priority){var p=this.getSortedIPV6AndV4Nodes(t,"v6");if(p.length>0)if(r===-1)o=Rs(p[0]);else{var u=Ua(p,t.gwNode);o=Rs(p[++u%p.length])}}return this.an.info("zsc.gw get node ".concat(k[n]," ").concat(r," ").concat(o)),o},e.prototype.sortIPNodesByPriority=function(t){return t.sort(function(n,r){return n.priority>r.priority?-1:n.priority<r.priority?1:0})},e.prototype.getSortedIPV6AndV4Nodes=function(t,n){var r=pp([],t.ipV6NodeList);return t.ipV4NodeList.forEach(function(o){o.vid.split("|").every(function(a){return r.every(function(l){return l.ip===a})})||r.push(o)}),r.sort(function(o,a){return o.priority>a.priority?-1:o.priority<a.priority?1:Wo(o.ip)?n==="v6"?-1:1:n==="v6"?1:-1}),r},e.prototype.isNodeLast=function(t){var n=0,r=!1,o=t.gwNodeList,a=t.ipV4NodeList,l=t.ipV6NodeList,d=t.gwNode;if(t.ipNodeType===k.ZV4Only)r=(n=o.findIndex(function(x){return x==d}))===o.length-1;else{var p=Ua(a,d),u=Ua(l,d);if(t.ipNodeType===k.ZV4Priority)r=(n=p)===a.length-1;else if(t.ipNodeType===k.ZV6Priority)r=(n=u)===l.length-1;else{var v=this.getSortedIPV6AndV4Nodes(t,"v6");r=(n=Ua(v,d))===v.length-1}}return{lastTryNext:r,currentIdx:n}},e.prototype.getStreamIPNodesMode=function(){var t,n;if(this.an.info("zsc.gsinm call, proxy: ".concat(this.isProxy,", mode: ").concat(F[this.pn.selectIPStackMode]," ")),this.isProxy||this.pn.selectIPStackMode===F.IPv4Only)t=q.kV4Only,n=k.ZV4Only;else if(this.pn.selectIPStackMode===F.IPv4Prefer){var r=this.getIPV4PreferNodeType();n=r.ipNodeType,t=r.ipV6Prefer}else{var o=this.getIPV6PreferNodeType();n=o.ipNodeType,t=o.ipV6Prefer}return this.an.info("zsc.gsinm prefer: ".concat(t,", nodeType: ").concat(n)),this.ipV6Prefer=t,this.ipNodeType=n,{ipV6Prefer:t,ipNodeType:n}},e.prototype.getIPV4PreferNodeType=function(){var t=this.agentConnectIPStackType;this.an.info("zsc.gi4nt connected: ".concat(ae[t],", detection: ").concat(JSON.stringify(this.agentIpStackDetection)));var n,r,o=this.agentIpStackDetection,a=o.IPv4,l=o.IPv6;return t===ae.IPv4||a===G.reachable?(n=k.ZV4Only,r=q.kV4Only):[G.unknown,G.unreachable].includes(a)&&l===G.reachable?(n=k.ZV6Priority,r=q.kV6AndV4):(n=k.ZV4Priority,r=q.kV4AndV6),{ipNodeType:n,ipV6Prefer:r}},e.prototype.getIPV6PreferNodeType=function(){this.an.info("zsc.gi6nt detection: ".concat(JSON.stringify(this.agentIpStackDetection)));var t,n,r=this.agentIpStackDetection,o=r.IPv4-r.IPv6;return o===0?(t=k.ZV6AndV4Priority,n=q.kV6AndV4):o>0?(t=k.ZV4Priority,n=q.kV4AndV6):(t=k.ZV6Priority,n=q.kV6AndV4),{ipNodeType:t,ipV6Prefer:n}},e.prototype.getRetryIPPreferNodeType=function(){var t,n;this.an.info("zsc.gripnt mode:".concat(F[this.pn.selectIPStackMode]," detection: ").concat(this.agentIpStackDetection));var r=this.agentIpStackDetection;if(this.pn.selectIPStackMode===F.IPv4Prefer)r.IPv4===G.reachable?(t=k.ZV4Priority,n=q.kV4AndV6):r.IPv6===G.reachable?(t=k.ZV6Priority,n=q.kV6AndV4):(t=k.ZV4Priority,n=q.kV4AndV6);else{var o=this.getIPV6PreferNodeType();t=o.ipNodeType,n=o.ipV6Prefer}return{ipNodeType:t,ipV6Prefer:n}},e.prototype.G_=function(t){var n=this;setTimeout(function(){Object.values(n.playerList).forEach(function(r){r.changePublishOccasion(t)})},0)},e.prototype.getReferredVideoBitrate=function(){var t=Date.now();return this.referenceBitrateUpdateTs>0&&t-this.referenceBitrateUpdateTs<3e4?this.referenceVideoBitrate:0},e.prototype.updateReferenceBitrate=function(t){this.referenceVideoBitrate=t,this.referenceBitrateUpdateTs=Date.now()},e.prototype.au=function(t,n){return this.pn.settingConfig.getSetting(t,n)},e.closeNetProbe=!1,e})(Gc),uf=ye(6794),sd=(function(){function s(e){this.v=e}return s.prototype.takeStreamSnapshot=function(e){return this.v.takeStreamSnapshot(e)},s.prototype.play=function(e,t){return this.v.play(e,t)},s.prototype.stop=function(){return this.v.stop()},s.prototype.playVideo=function(e,t){this.v.playVideo(e,t)},s.prototype.stopVideo=function(){this.v.stopVideo()},s.prototype.playAudio=function(e){this.v.playAudio(e,!0)},s.prototype.stopAudio=function(){this.v.stopAudio()},s.prototype.resume=function(){this.v.resume()},s.prototype.setAudioMuted=function(e){return this.v.setAudioMuted(e)},s.prototype.setVideoMuted=function(e){return this.v.setVideoMuted(e)},s.prototype.useAudioOutputDevice=function(e){return this.v.useAudioOut(e)},s.prototype.setVolume=function(e){return this.v.setVolume(e)},s.prototype.getVideoHeight=function(){return this.v.getVideoHeight()},s.prototype.getVideoWidth=function(){return this.v.getVideoWidth()},s.prototype.on=function(e,t){return this.v.on(e,t)},s.prototype.off=function(e,t){return this.v.off(e,t)},s})(),Au=function(){return Au=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Au.apply(this,arguments)},Jf=(function(){function s(e,t,n){this.X_=e,this.W_=t,this.gn=n,this._initTime=Date.now()}return Object.defineProperty(s.prototype,"appid",{get:function(){return this.W_.appid},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"device_id",{get:function(){return this.X_.deviceID},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"product",{get:function(){return this.X_.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sdk_version",{get:function(){return I.qt},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sys_info",{get:function(){return navigator.userAgent},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"report_version",{get:function(){return this.W_.sdkVerNum},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"browser",{get:function(){return this.W_.browser},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"id_name",{get:function(){return this.X_.idName},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"nick_name",{get:function(){return this.X_.nickName},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"use_na",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"userid",{get:function(){return this.X_.userid},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"network_state",{get:function(){return this.W_.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"init_time",{get:function(){return this._initTime},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"net_type",{get:function(){var e;return((e=navigator.connection)===null||e===void 0?void 0:e.effectiveType)||"unknown"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"room_server",{get:function(){return this.X_.roomServer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"device_infos",{get:function(){return this.W_.deviceInfos},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"room_list",{get:function(){var e=this,t={};return this.W_.roomList.forEach(function(n){var r,o,a,l=e.X_.roomModulesList.find(function(p){return p.roomID===n.roomID}),d={roomSessionID:n.roomSessionID,sessionID:n.sessionID,streamList:n.streamList,token:n.token,role:e.X_.role,roomCreateFlag:e.X_.roomCreateFlag,loginTime:l==null?void 0:l.loginTime,heartbeatInterval:(r=l==null?void 0:l.heartBeatHandler)===null||r===void 0?void 0:r.heartbeatInterval,roomExtraInfos:(o=l==null?void 0:l.messageHandler)===null||o===void 0?void 0:o.transSeqMap,roomRetryTime:(a=l==null?void 0:l.roomTryHandler)===null||a===void 0?void 0:a.RETRY_MAX_TIME};t[n.roomID]=d}),t},enumerable:!1,configurable:!0}),s.prototype.getRoomList=function(e,t){var n=this;return this.room_id_list.slice(e,t).map(function(r){return Au({roomID:r},n.room_list[r])})},Object.defineProperty(s.prototype,"room_id_list",{get:function(){return this.W_.roomList.map(function(e){return e.roomID})},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"roomListSize",{get:function(){return this.room_id_list.length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"userLoginState",{get:function(){var e,t=this.X_.roomModulesList[0],n=t.runState,r=t.lastRunState;return n===I.UV.logout?e=I.Es.logout:n===I.UV.login?e=I.Es.login:r===I.UV.logout?e=I.Es.trylogin:r===I.UV.login&&(e=I.Es.reconnect),e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"publishStreamList",{get:function(){return Object.keys(this.gn.publisherList)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"publishList",{get:function(){var e=this,t={};return this.publishStreamList.forEach(function(n){var r,o,a,l=e.gn.publisherList[n],d=l==null?void 0:l.publisher,p=d==null?void 0:d.publishStat;t[n]={streamSid:l==null?void 0:l.streamSid,roomID:(r=l==null?void 0:l.room)===null||r===void 0?void 0:r.roomID,roomSessionID:(o=l==null?void 0:l.room)===null||o===void 0?void 0:o.roomSessionID,cameraLabel:l==null?void 0:l.cameraLabel,microLabel:l==null?void 0:l.microLabel,cameraStatus:d==null?void 0:d.camera_status,micStatus:d==null?void 0:d.mic_status,sessionId:d==null?void 0:d.sessionId,publishBeginTime:d==null?void 0:d.reportPublishStateTime,serverUrl:(a=d==null?void 0:d.signal)===null||a===void 0?void 0:a.server,gwNode:d==null?void 0:d.gwNode,proto:"webrtc",frameWidth:p==null?void 0:p.frameWidth,frameHeight:p==null?void 0:p.frameHeight,rtt:p==null?void 0:p.currentRoundTripTime,videoPacketsLostRate:p==null?void 0:p.videoPacketsLostRate,audioPacketsLostRate:p==null?void 0:p.audioPacketsLostRate,videoTargetBitrate:p==null?void 0:p.videoTargetBitrate,videoBitrate:p==null?void 0:p.videoBitrate,audioTargetBitrate:p==null?void 0:p.audioTargetBitrate,audioBitrate:p==null?void 0:p.audioBitrate,videoTargetFPS:p==null?void 0:p.videoTargetFPS,videoFPS:p==null?void 0:p.videoFPS,audioFPS:p==null?void 0:p.audioFPS,videoCodecName:p==null?void 0:p.videoCodecName,audioCodecName:p==null?void 0:p.audioCodecName}}),t},enumerable:!1,configurable:!0}),s.prototype.getPublishList=function(e,t){var n=this;return this.publishStreamList.slice(e,t).map(function(r){return Au({streamID:r},n.publishList[r])})},Object.defineProperty(s.prototype,"publishListSize",{get:function(){return this.publishStreamList.length},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playStreamList",{get:function(){return Object.keys(this.gn.playerList)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playList",{get:function(){var e=this,t={};return this.playStreamList.forEach(function(n){var r,o,a,l=e.gn.playerList[n],d=l,p=d==null?void 0:d.playStat;t[n]={streamSid:l==null?void 0:l.streamSid,roomID:(r=l==null?void 0:l.room)===null||r===void 0?void 0:r.roomID,roomSessionID:(o=l==null?void 0:l.room)===null||o===void 0?void 0:o.roomSessionID,cameraStatus:d==null?void 0:d.cameraStatus,micStatus:d==null?void 0:d.micStatus,sessionId:d==null?void 0:d.sessionId,playBeginTime:d==null?void 0:d.reportPlayStateTime,serverUrl:(a=d==null?void 0:d.signal)===null||a===void 0?void 0:a.server,gwNode:d==null?void 0:d.gwNode,proto:"webrtc",frameWidth:p==null?void 0:p.frameWidth,frameHeight:p==null?void 0:p.frameHeight,rtt:p==null?void 0:p.currentRoundTripTime,videoPacketsLostRate:p==null?void 0:p.videoPacketsLostRate,audioPacketsLostRate:p==null?void 0:p.audioPacketsLostRate,videoBitrate:p==null?void 0:p.videoBitrate,audioBitrate:p==null?void 0:p.audioBitrate,videoFPS:p==null?void 0:p.videoFPS,audioFPS:p==null?void 0:p.audioFPS,videoCodecName:p==null?void 0:p.videoCodecName,audioCodecName:p==null?void 0:p.audioCodecName,peerToPeerDelay:p==null?void 0:p.peerToPeerDelay,firstFrameTime:p==null?void 0:p.firstFrameTime,videoJitter:p==null?void 0:p.videoJitter,audioJitter:p==null?void 0:p.audioJitter}}),t},enumerable:!1,configurable:!0}),s.prototype.getPlayList=function(e,t){var n=this;return this.playStreamList.slice(e,t).map(function(r){return Au({streamID:r},n.playList[r])})},Object.defineProperty(s.prototype,"playListSize",{get:function(){return this.playStreamList.length},enumerable:!1,configurable:!0}),s})(),Jc="zc.ac.mer",ad=(function(){function s(e,t,n){var r=this;this.an=e,this.ac=t,this.pa=n,this.error=!1,this.effectMode=1,this.eventHandler={volumechange:function(o){var a=o.target;a&&r.ty&&(a.muted||a.paused?(r.an.info(Jc+" local audio muted disconnect"),r.ty.disconnect()):(r.an.info(Jc+" local audio is connected"),r.ty.connect(r.ac.destination)))}},this.an.info(Jc+" create audio renderer"),this.error=!this.init(),this.error||(n.addEventListener("volumechange",this.eventHandler.volumechange),n.addEventListener("pause",this.eventHandler.volumechange),n.addEventListener("play",this.eventHandler.volumechange))}return s.prototype.setGain=function(e){this.ty&&(this.ty.gain.value=e)},s.prototype.init=function(){var e=this.ac;try{var t=(0,or.$t)().match(/iPhone\sOS\s(\d+)_(\d+)_?(\d+)?/);if(t&&+t[1]==17&&+t[2]==0&&+t[3]<4)throw" iOS 17 not suppot createMediaElementSource.";this.pa.crossOrigin!=="anonymous"&&this.an.info(Jc+" Media element does not support cross-origin. Maybe no sound can be played"),this.srcNode=e.createMediaElementSource(this.pa);var n=this.ty=e.createGain();n.connect(e.destination),this.srcNode.connect(n),this.ac.state==="suspended"&&this.ac.resume()}catch(r){return this.an.warn(Jc+" create src failed."+r),!1}return!0},s.prototype.getMixNode=function(){var e=this.mixOutputNode;return e||(e=this.mixOutputNode=this.ac.createGain()),this.setVoiceChangeNode(this.effectMode,this.voiceChangerNode,!0),{mixOutputNode:e}},Object.defineProperty(s.prototype,"effectOnLocal",{get:function(){return[oa.SC.Local,oa.SC.All].includes(this.effectMode)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"effectOnMix",{get:function(){return[oa.SC.Publish,oa.SC.All].includes(this.effectMode)},enumerable:!1,configurable:!0}),s.prototype.setVoiceChangeNode=function(e,t,n){if(n===void 0&&(n=!1),this.ty&&this.srcNode&&(n||this.voiceChangerNode!==t||this.effectMode!==e)){this.effectMode=e,this.srcNode.disconnect();var r=this,o=r.mixOutputNode,a=r.effectOnLocal,l=r.effectOnMix;if(this.an.info(Jc+" set voice changer render. ".concat(JSON.stringify({mode:e,node:!!t,force:n,effectOnLocal:a,effectOnMix:l}))),t)t.disconnect(),this.srcNode.connect(t),a?t.connect(this.ty):this.srcNode.connect(this.ty),o&&(l?t.connect(o):this.srcNode.connect(o)),this.voiceChangerNode=t;else{var d=this.srcNode;d.connect(this.ty),this.mixOutputNode&&d.connect(this.mixOutputNode),this.voiceChangerNode=void 0}}},s.prototype.destroy=function(){var e;(e=this.ty)===null||e===void 0||e.connect(this.ac.destination),this.pa.removeEventListener("volumechange",this.eventHandler.volumechange),this.pa.removeEventListener("pause",this.eventHandler.volumechange),this.pa.removeEventListener("play",this.eventHandler.volumechange)},s})(),th=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},mp=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Kf=(function(){function s(e){var t=this;this.an=e,this.isResuming=!1,this.iy=new Map,this.sy=new Map,this.eventHandler={resumeAudioContext:function(r){var o=t.ac.state;if(o!=="running"){var a=r==null?void 0:r.type;t.an.info("zc.ac.rs call "+o+", "+a),t.ac.resume().then(function(){t.an.info("zc.ac.rs end "+t.ac.state+", "+a)})}else t.offCheckAudioContextListener()}},this.id=Date.now();var n=window.AudioContext||window.webkitAudioContext;this.ac=new n,this.an.info("zc.ac.0 ".concat(this.id," ").concat(this.ac.state,", ").concat(this.ac.sampleRate)),this.ac.addEventListener("statechange",function(){var r,o=(r=t.ac)===null||r===void 0?void 0:r.state;t.an.info("zc.ac.sc ".concat(t.id," ").concat(o)),o!=="running"&&t.checkAudioContext()}),this.checkAudioContext()}return s.create=function(e){return s.mgr?s.mgr.an=e:s.mgr=new s(e),s.mgr},s.prototype.getMediaElementRenderer=function(e){var t=this.iy.get(e);return t||((t=new ad(this.an,this.ac,e)).error?null:(this.iy.set(e,t),t))},s.prototype.checkAudioContext=function(){if(this.an.info("zc.ac.cac call"),this.ac&&this.ac.state==="suspended"){var e=this.eventHandler.resumeAudioContext;(0,or.nr)()&&e(),window.addEventListener("mousedown",e)}},s.prototype.offCheckAudioContextListener=function(){this.an.info("zc.ac.ocac call"),window.removeEventListener("mousedown",this.eventHandler.resumeAudioContext)},s.prototype.registerModule=function(e,t){return th(this,void 0,void 0,function(){var n,r,o;return mp(this,function(a){switch(a.label){case 0:if(this.sy.get(e))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),n=new Blob([t],{type:"text/javascript"}),r=URL.createObjectURL(n),[4,this.ac.audioWorklet.addModule(r)];case 2:return a.sent(),this.sy.set(e,!0),[3,4];case 3:return o=a.sent(),this.sy.set(e,!1),this.an.error("zc.ac.rm.0 ".concat(e," fail ").concat(o.toString())),[3,4];case 4:return[2]}})})},s.prototype.destroy=function(){this.offCheckAudioContextListener()},s})(),gp=(function(){function s(e,t){var n=t.type,r=t.channels,o=r===void 0?1:r,a=t.bufferSize,l=a===void 0?0:a,d=t.sampleBit,p=d===void 0?16:d,u=t.sampleRate,v=u===void 0?44100:u,x=this;this.instant=0,this.slow=0,this.clip=0,this.context=e,this.type=n,this.channels=o,this.bufferSize=l,this.sampleBit=p,this.sampleRate=v,this.script=e.createScriptProcessor(l,o,o),new Date().getTime(),this.script.addEventListener("audioprocess",function(U){var te,le=U.inputBuffer.getChannelData(0),se=0,We=0;for(te=0;te<le.length;++te)se+=le[te]*le[te],Math.abs(le[te])>.99&&(We+=1);if(x.instant=Math.sqrt(se/le.length),x.slow=.95*x.slow+.05*x.instant,x.clip=We/le.length,n==="pcm"||n==="wav"){for(var Ke=[],Ze=0;Ze<x.channels;Ze++)Ke.push(U.inputBuffer.getChannelData(Ze));x.recorderBuffer(Ke)}}),n!=="pcm"&&n!=="wav"||this.initRecorderBuffer(n)}return s.prototype.connectToSource=function(e,t){try{this.mic=this.context.createMediaStreamSource(e),this.mic.connect(this.script),this.script.connect(this.context.destination),(0,B.TE)(t)||t(null)}catch(n){console.error(n),(0,B.TE)(t)||t(n)}return this},s.prototype.recorderBuffer=function(e){this.worker.postMessage({command:"record",val:e})},s.prototype.initRecorderBuffer=function(e){var t=this;this.worker=this.inlineWorker(function(){var n,r,o,a,l,d,p=[];function u(Ze,et,ht){for(var gt=0;gt<ht.length;gt++,et+=2){var Et=Math.max(-1,Math.min(1,ht[gt]));Ze.setInt16(et,Et<0?32768*Et:32767*Et,!0)}}function v(Ze,et,ht){for(var gt=0;gt<ht.length;gt++,et++){var Et=Math.max(-1,Math.min(1,ht[gt])),At=Et<0?128*Et:127*Et;Ze.setInt8(et,At+=128)}}function x(Ze,et,ht){for(var gt=0;gt<ht.length;gt++)Ze.setUint8(et+gt,ht.charCodeAt(gt))}function U(Ze,et){for(var ht=new Float32Array(et.length/Ze),gt=0,Et=0;gt<ht.length;)ht[gt]=et[Et],Et+=Ze,gt++;return ht}function te(Ze,et,ht){for(var gt=new Float32Array(et*Ze.length),Et=0,At=0;At<ht[0].length;At++)gt.set(ht[0][At],Et),Et+=ht[0][At].length;return gt}function le(Ze,et){for(var ht=new Float32Array(Ze.length+et.length),gt=0;gt<Ze.length+et.length;gt+=2)ht[gt]=Ze[gt/2|0],ht[gt+1]=et[gt/2|0];return ht}function se(Ze){var et,ht;if(n==1)et=te(p[0],l,p),Ze!=1&&(ht=U(Ze,et));else if(n==2){var gt=te(p[0],l,p),Et=te(p[1],l,p);Ze!=1?ht=le(U(Ze,gt),U(Ze,Et)):et=le(gt,Et)}return Ze!=1?ht:et}function We(Ze){var et=(function(ht,gt){var Et;gt==8?Et=ht.length:gt==16&&(Et=ht.length,Et*=2);var At=new ArrayBuffer(Et),Ot=new DataView(At);return gt==8?v(Ot,0,ht):r==16&&u(Ot,0,ht),Ot})(se(Ze),r);self.postMessage({command:"exportPcmLive",val:et})}function Ke(Ze){var et=(function(ht,gt){var Et;gt==8?Et=ht.length:r==16&&(Et=ht.length,Et*=2);var At=new ArrayBuffer(Et+44),Ot=new DataView(At),Bt=o,Kt=r,Ht=n;return x(Ot,0,"RIFF"),Ot.setUint32(4,36+Et,!0),x(Ot,8,"WAVE"),x(Ot,12,"fmt "),Ot.setUint32(16,16,!0),Ot.setUint16(20,1,!0),Ot.setUint16(22,Ht,!0),Ot.setUint32(24,Bt,!0),Ot.setUint32(28,Bt*Ht*(Kt/8),!0),Ot.setUint16(32,Ht*(Kt/8),!0),Ot.setUint16(34,Kt,!0),x(Ot,36,"data"),Ot.setUint32(40,Et,!0),r==8?v(Ot,44,ht):r==16&&u(Ot,44,ht),Ot})(se(Ze),r);self.postMessage({command:"exportWav",val:et})}this.onmessage=function(Ze){switch(Ze.data.command){case"init":n=(et=Ze.data.val).sampleChannel,r=et.sampleBit,o=et.sampleRate,a=et.oldSampleRate,l=et.bufferSize,d=et.type;break;case"record":(function(ht){for(var gt=0;gt<n;gt++)p[gt]||(p[gt]=[]),p[gt].push(ht[gt]);var Et=Math.round(a/o);d==="pcm"?We(Et):d==="wav"&&Ke(Et),p=[]})(Ze.data.val)}var et}}),this.worker.postMessage({command:"init",val:{sampleChannel:this.channels,sampleBit:this.sampleBit,sampleRate:this.sampleRate,oldSampleRate:this.context.sampleRate,bufferSize:this.bufferSize,type:e}}),this.worker.onmessage=function(n){switch(n.data.command){case"exportPcmLive":t.onReceiveBuffer(n.data.val);break;case"exportWav":t.onReceiveWav(n.data.val)}}},s.prototype.onReceiveBuffer=function(e){},s.prototype.onReceiveWav=function(e){},s.prototype.writeString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},s.prototype.writeBuffer=function(e,t,n){for(var r=0;r<n.byteLength;r++)e.setUint8(t+r,n[r])},s.prototype.concatenation=function(e){for(var t=0,n=0;n<e.length;++n)t+=e[n].buffer.byteLength;var r=new Uint8Array(t),o=0;for(n=0;n<e.length;++n)r.set(new Uint8Array(e[n].buffer),o),o+=e[n].buffer.byteLength;return r},s.prototype.encodeWave=function(e){var t=this.concatenation(e),n=t.byteLength,r=new ArrayBuffer(n+44),o=new DataView(r),a=this.sampleRate,l=this.sampleBit,d=this.channels;return this.writeString(o,0,"RIFF"),o.setUint32(4,36+n,!0),this.writeString(o,8,"WAVE"),this.writeString(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,d,!0),o.setUint32(24,a,!0),o.setUint32(28,a*d*(l/8),!0),o.setUint16(32,d*(l/8),!0),o.setUint16(34,l,!0),this.writeString(o,36,"data"),o.setUint32(40,n,!0),this.writeBuffer(o,44,t),o},s.prototype.stop=function(){this.mic.disconnect(),this.script.disconnect()},s.prototype.inlineWorker=function(e){if(Worker&&e){var t=e.toString().trim().match(/\{([\s\S]*)\}/)[1],n=URL.createObjectURL(new window.Blob([t],{type:"text/javascript"}));return new Worker(n)}return null},s})(),Ya=function(){return Ya=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Ya.apply(this,arguments)},ya=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},ba=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},Mi=function(s,e,t){for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return s.concat(n||Array.prototype.slice.call(e))},Za=(function(){function s(e,t,n,r,o,a){a===void 0&&(a=I.UP.Default);var l,d,p=this;if(this.logger=e,this.reporter=n,this.recordedBlobs=[],this.mediaRecorder=null,s.isInstantiated=!0,this.an=e,this.dataReport=t,this.acMgr=Kf.create(this.an),this.stateCenter=new mf(this.an,this.dataReport),this.pn=this.stateCenter,this.pn.clientType="webrtc",this.pn.settingConfig=r.stateCenter.settingConfig,r._on("_experimentalAPICallback",function(v){p.stateCenter.onExperimentalAPICallback(v)}),((l=s.engineOptions)===null||l===void 0?void 0:l.pri)===!0){var u=s.engineOptions.netMode;u!==I.Am.Extranet&&u!==I.Am.Intranet||(this.pn.netMode=s.engineOptions.netMode)}this.RTM=r,this.pn.appid=r.getAppID(),this.streamCenter=new Yr(this.an,this.pn,this.dataReport,this.RTM,this.acMgr,{type:s.geoFenceType,areaList:s.geoFenceAreaList}),this.gn=this.streamCenter,this.pn.browser=uf.browserDetails.browser,this.pn.browserInfo=(0,or._Z)(),this.pn.sdkVerNum=this.RTM.stateCenter.sdkVerNum,this.RTM.cloudSetting.setEnvVariable("sdk_version",I.qt),this.initTracer(n),this.rtcModules=new yu(this.an,this.dataReport,this.pn,this.gn,this.RTM,this.ac,this),(d=this.RTM.cloudSetting)===null||d===void 0||d.getSettingCache(N).then(function(v){var x;p.an.info(Ce.BBG+" streamConfig "+JSON.stringify(v));var U=p.cr.createSpan(I.t0.H,{key:j.oq.event},{key:""},j.Xk.event);U.setAttributes({files:j.Xk.files([{name:N,content:JSON.stringify(v==null?void 0:v.setting),versions:JSON.stringify(v==null?void 0:v.versions),code:0,message:""}])}),U.end(),p.pn.settingConfig.setSetting(v==null?void 0:v.setting);var te=p.pn.settingConfig.getSetting("open_mini_sdp");(x=p.gn)===null||x===void 0||x.initMiniSdpWorker(te)}).catch(function(v){p.an.warn(Ce.BBG+" streamConfig "+JSON.stringify(v))}),this.pn.rtm=this.RTM,this.pn.streamCenter=this.gn,[3,4,5,6,7,8,9].includes(a)?(this.pn.scenario=a,this.an.info(Ce.sk8+" "+a+" success")):a===100?(this.stateCenter.scenario=a,this.an.info(Ce.sk8+" "+a+" liveroom set")):(this.pn.scenario=I.UP.Default,this.an.error(Ce.sk8+" "+a+"  please use valid scenario")),this.RTM.stateCenter.onListener("_beforeSwitchRoom",function(v){var x;if(p.rtcModules.publishModule.stopPublishingStreamInRoom(v),p.stateCenter.engineConfig.switchRoomNotStopPlay){var U=[];for(var te in p.streamCenter.playerList)((x=p.streamCenter.playerList[te].room)===null||x===void 0?void 0:x.roomID)===v&&(U.push(te),p.streamCenter.playerList[te].room={});var le=function(se,We){p.RTM.stateCenter.offListener("_afterSwitchRoom",le);for(var Ke=p.stateCenter.getRoomByRoomID(se),Ze=0,et=U;Ze<et.length;Ze++){var ht=et[Ze];We&&Ke?p.streamCenter.playerList[ht].room=Ke:p.rtcModules.playModule.stopPlayingStream(ht)}};p.RTM.stateCenter.onListener("_afterSwitchRoom",le)}else p.rtcModules.playModule.stopPlayingStreamInRoom(v)})}return Object.defineProperty(s.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.setGeoFence=function(e,t){if(s.isInstantiated)throw Ft.mHY;s.geoFenceType=e,s.geoFenceAreaList=t},s.setEngineOptions=function(e){s.engineOptions=Ya(Ya({},s.engineOptions||{}),e),e.geoFenceType&&(s.geoFenceType=e.geoFenceType),e.geoFenceAreaList&&(s.geoFenceAreaList=e.geoFenceAreaList),typeof e.closeNetProbe=="boolean"&&Yr.setCloseNetProbe(e.closeNetProbe),(0,he.zQ)(e.dataReportCustomerContext,!0)&&Yr.setReportCustomerContext(e.dataReportCustomerContext),e.ipStackMode!==void 0&&[0,1,2].includes(e.ipStackMode)&&(s.ipStackMode=e.ipStackMode)},s.prototype.destroyEngineHandler=function(){var e=this;this.an.info(Ce.Wgj+" call");var t=function(){return!e.RTM.stateCenter.roomModulesList.some(function(r){return!(r.isLogout()||r.roomState==="DISCONNECTED")})},n=function(){e.destroyCopyrightedMusic(),e.RTM.destroyRTM();for(var r=0,o=e.gn.previewStreamList;r<o.length;r++){var a=o[r];a.localStream&&e.destroyStream(a.localStream)}e.pn.actionListener("_engineDestroy"),e.acMgr.destroy(),e.rtcModules.publishModule.destroy(),e.gn.destroy(),e.pn.destroy(),e.RTM.netAgent.destroy(),e.an.info(Ce.Wgj+" call success"),e.an.destroy()};t()?n():(this.RTM.off("roomStateUpdate"),this.off("playerStateUpdate"),this.off("publisherStateUpdate"),this.RTM.stateCenter.onListener("_roomStateUpdate",function(r,o){o==="DISCONNECTED"&&t()&&n()}),this.RTM.logoutRoom())},s.prototype.mutePublishStreamVideo=function(e,t,n){return this.rtcModules.publishModule.mutePublishStreamVideo(e,t,n)},s.prototype.mutePublishStreamAudio=function(e,t){return this.rtcModules.publishModule.mutePublishStreamAudio(e,t)},s.prototype.mutePlayStreamVideo=function(e,t){return this.rtcModules.playModule.mutePlayStreamVideo(e,t)},s.prototype.mutePlayStreamAudio=function(e,t){return this.rtcModules.playModule.mutePlayStreamAudio(e,t)},s.prototype.muteMicrophone=function(e){return this.rtcModules.publishModule.muteMicrophone(e)},s.prototype.isMicrophoneMuted=function(){return!this.gn.isMicEnabled},s.prototype.setAudioOutput=function(e,t){return this.an.info(Ce.it$+" call"),(0,B.QP)(t)?this.rtcModules.playModule.setStreamAudioOutput(e,t):(this.an.error("audiooutput is not string"),!1)},s.prototype.setGWNode=function(e){(0,B.QP)(e)&&e.length>0&&(this.gn.gwNode=e)},s.prototype.setQualityMonitorCycle=function(e){return this.an.warn("setQualityMonitorCycle method deprecated!!!"),!1},s.prototype.startPlayingStream=function(e,t,n){return this.an.info(Ce.rGc+" call by user",{streamid:e+""}),this.rtcModules.playModule.startPlayingStream(e,t,n)},s.prototype.setPlayStreamVideoType=function(e,t){return this.rtcModules.playModule.setPlayStreamVideoType(e,t)},s.prototype.stopPlayingStream=function(e){this.an.info(Ce.dk2+" call by user",{streamid:e+""}),this.rtcModules.playModule.stopPlayingStream(e,void 0,!0)},s.prototype.setPlayAccelerate=function(e){this.pn.playAccelerate=e},s.prototype.setTurnOverTcpOnly=function(e){this.an.info(Ce.ZIe+" call "+e),(0,B.dd)(e)?this.pn.turnOverTcpOnly=e:this.an.error("zc.p.stoto.0 param must be param")},s.prototype.createStream=function(e){return this.rtcModules.publishModule.createStream(e,!0)},s.prototype.createZegoStream=function(e){return this.rtcModules.publishModule.createZegoStream(e)},s.prototype.setRoomScenario=function(e){return[3,4,5,6,7,8,9].includes(e)?(this.an.info(Ce.ibZ+" "+e+" called"),this.pn.roomList.length?(this.an.error(Ce.ibZ+" "+JSON.stringify(Ft.p7L)),!1):(this.pn.scenario=e,this.an.info(Ce.ibZ+" "+e+" called success"),!0)):(this.an.error(Ce.ibZ+" "+e+" please use valid scenario"),!1)},s.prototype.destroyStream=function(e){this.an.info(Ce.mLk+" call by user"),this.rtcModules.publishModule.destroyStream(e)},s.prototype.startPublishingStream=function(e,t,n,r){return this.an.info(Ce.gkP+" call by user",{streamid:e+""}),this.rtcModules.publishModule.startPublishingStream(e,t,n&&Ya({},n),r)},s.prototype.updatePublishingStream=function(e,t){return this.an.info(Ce.xcY+" call by user"),this.rtcModules.publishModule.updatePublishingStream(e,t)},s.prototype.activateSEIInsert=function(e){return this.rtcModules.publishModule.activateSEIInsert(e)},s.prototype.setSEIConfig=function(e){this.an.info("zc.ssc "+JSON.stringify(e)),this.pn.seiConfig=Ya(Ya({},this.pn.seiConfig),e),this.pn.player265ReceiverList.forEach(function(t){t.sendMsg({type:"SEIConfigUpdate"})})},s.prototype.sendSEI=function(e,t){return this.rtcModules.publishModule.sendSEI(e,t)},s.prototype.stopPublishingStream=function(e){return this.an.info(Ce.K4A+" call by user",{streamid:e+""}),this.rtcModules.publishModule.stopPublishingStream(e,void 0,!0)},s.prototype.setVideoConfig=function(e,t){return this.rtcModules.publishModule.setVideoConfig(e,t)},s.prototype.setAudioConfig=function(e,t){return this.rtcModules.publishModule.setAudioConfig(e,t)},s.prototype.replaceTrack=function(e,t){return this.rtcModules.publishModule.replaceTrack(e,t)},s.prototype.preloadEffect=function(e,t,n){if(this.rtcModules.audioMixModule===void 0)throw(0,he.d1)(["audio mix"]);this.rtcModules.audioMixModule.preloadEffect(e,t,n)},s.prototype.getEffectDuration=function(e){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.getEffectDuration(e);throw(0,he.d1)(["audio mix"])},s.prototype.getEffectCurrentProgress=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.getEffectProgress(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.seekAudioEffect=function(e,t,n){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.seekAudioEffect(e,t,n);throw(0,he.d1)(["audio mix"])},s.prototype.playEffect=function(e,t,n){if(this.rtcModules.audioMixModule===void 0)throw(0,he.d1)(["audio mix"]);this.rtcModules.audioMixModule.playEffect(e,t,n)},s.prototype.pauseEffect=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.pauseEffect(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.resumeEffect=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.resumeEffect(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.stopEffect=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.stopEffect(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.unloadEffect=function(e){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.unloadEffect(e);throw(0,he.d1)(["audio mix"])},s.prototype.setEffectVolume=function(e,t,n,r){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.setEffectVolume(e,t,n,r);throw(0,he.d1)(["audio mix"])},s.prototype.startMixingAudio=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.startMixingAudio(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.stopMixingAudio=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.stopMixingAudio(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.mixingBuffer=function(e,t,n,r){if(this.rtcModules.audioMixModule===void 0)throw(0,he.d1)(["audio mix"]);this.rtcModules.audioMixModule.mixingBuffer(e,t,n,r)},s.prototype.stopMixingBuffer=function(e,t){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.stopMixingBuffer(e,t);throw(0,he.d1)(["audio mix"])},s.prototype.setMixingAudioVolume=function(e,t,n){if(this.rtcModules.audioMixModule!==void 0)return this.rtcModules.audioMixModule.setMixingAudioVolume(e,t,n);throw(0,he.d1)(["audio mix"])},s.prototype.checkSystemRequirements=function(e,t){var n=this,r=navigator&&navigator.mediaDevices&&(s.screenShotReady||"getDisplayMedia"in navigator.mediaDevices);return this.an.info(Ce.XQ0+" call"+(0,or.$t)()),new he.l3(function(o){var a=(0,he.fU)(n.cr,I.t0.H,"",j.J8.event,j.oq.event),l=t||"all",d=function(p){(0,he.lA)(a,{capability:j.J8.capability(p)});var u=n.pn.checkList.indexOf(l);n.pn.checkList.splice(u,1),o(p)};return["webRTC","customCapture","camera","microphone","screenSharing","H264","VP8","H265","all"].includes(l)&&[0,1].includes(e)?n.pn.checkList.includes(l)||n.pn.checkList.includes("all")?d({result:!1,errInfo:{extendedDate:"The last test of the same type has not returned a result "}}):(n.pn.checkList.push(l),void fr(r,d,e,t,n.pn.customUa)):d({result:!1,errInfo:{extendedDate:"param error"}})})},s.prototype.enumDevices=function(e,t){return ya(this,void 0,void 0,function(){var n,r,o,a,l,d,p,u,v,x,U,te,le,se=this;return ba(this,function(We){switch(We.label){case 0:return this.an.info("zc.ed.0 call"),n=function(){return new he.l3(function(Ke,Ze){se.rtcModules.publishModule.recordDevices(function(et){var ht=!0,gt=!0;et.cameras.find(function(Et){if(Et.deviceID==="")return ht=!1,!0}),et.microphones.find(function(Et){if(Et.deviceID==="")return gt=!1,!0}),Ke({devices:et,enableCamera:ht,enableMic:gt})},function(et){Ze(et)})})},[4,n()];case 1:return r=We.sent(),o=r.enableCamera,a=r.enableMic,l=r.devices,e?(this.an.info("zc.ed.0 check permission"),d={video:!0,audio:!0},t==="videoinput"?d.audio=!1:t!=="audioinput"&&t!=="audiooutput"||(d.video=!1),u=d.audio&&!a,(p=d.video&&!o)||u?(this.an.info("zc.ed.0 need to get device permission. needCamera: ".concat(p,", needMic: ").concat(u)),[4,Cs(d).catch(function(){})]):[3,4]):[3,4];case 2:return(v=We.sent())&&v.getTracks().forEach(function(Ke){Ke.stop()}),[4,n()];case 3:x=We.sent(),U=x.devices,te=x.enableCamera,le=x.enableMic,d.video&&!te&&this.an.warn("zc.ed.0 get video device permission failed."),d.audio&&!le&&this.an.warn("zc.ed.0 get audio device permission failed."),l=U,We.label=4;case 4:return[2,l]}})})},s.prototype.getCameras=function(){return ya(this,void 0,void 0,function(){return ba(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"videoinput")];case 1:return[2,e.sent().cameras]}})})},s.prototype.getMicrophones=function(){return ya(this,void 0,void 0,function(){return ba(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audioinput")];case 1:return[2,e.sent().microphones]}})})},s.prototype.getSpeakers=function(){return ya(this,void 0,void 0,function(){return ba(this,function(e){switch(e.label){case 0:return[4,this.enumDevices(!0,"audiooutput")];case 1:return[2,e.sent().speakers]}})})},s.prototype.getAudioInfo=function(e,t,n){if(!e)return this.an.error("localStream is empty!"),!1;var r=Ya({},n);return new gp(this.ac,r).connectToSource(e,function(o){t(o)})},s.prototype.getSoundLevel=function(e,t,n){if(!this.rtcModules.audioMixModule)throw(0,he.d1)(["audio mix"]);this.rtcModules.audioMixModule.getSoundLevel(e,t,n)},s.prototype.stopSoundLevel=function(e){if(!this.rtcModules.audioMixModule)throw(0,he.d1)(["audio mix"]);this.rtcModules.audioMixModule.stopSoundLevel(e)},s.prototype.handleDataAvailable=function(e){e.data&&e.data.size>0&&s.recordedBlobs.push(e.data)},s.prototype.setAudioFrameCallback=function(e,t,n){var r=this;return new Promise(function(o,a){return ya(r,void 0,void 0,function(){var l,d,p,u,v;return ba(this,function(x){switch(x.label){case 0:if(l=function(te){a({errorCode:te.errorCode||te.code,extendedData:te.extendedData||te.message})},!((0,B.QP)(e)||(0,B.dr)(e)||(U=e,U instanceof Bh)))return this.an.error("zc.safc.0 streamID must be string or ZegoLocalStream or MediaStream"),l(Ft.ZEp),[2];if(n!=null&&n.frameSize&&![256,512,1024,2048,4096,8192,16384].includes(n==null?void 0:n.frameSize))return this.an.error("zc.safc.0 option frameSize invalid"),l(Ft.ZEp),[2];if((0,B.QP)(e)){if(!(p=this.gn.playerList[e]))return this.an.error("zc.safc.0 player not found"),l(Ft.oCq),[2];if(((v=p.playStream)===null||v===void 0?void 0:v.getAudioTracks().length)===0)return this.an.error("zc.safc.0 no stream or no audio"),l(Ft.oCq),[2];d=p}else{if(!(u=this.gn.checkPreview(e)))return this.an.error("zsc.sd.0 preview no found"),l(Ft.fzq),[2];if(e.getAudioTracks().length===0||u.isOriginEmptyTrack())return this.an.error("zsc.sd.0 preview no audio track"),l(Ft.akY),[2];d=u}return[4,this.gn.acMgr.registerModule("audioPCMExporter",`class AudioPcmDataProcessor extends AudioWorkletProcessor {\r
  // 0. Determine the buffer size (this is the same as the 1st argument of ScriptProcessor)\r
\r
  constructor(options) {\r
    super();\r
    // console.error("AudioPcmDataProcessor");\r
    this.bufferSize = 1024;\r
    // 1. Track the current buffer fill level\r
    this._bytesWritten = 0;\r
\r
    // 2. Create a buffer of fixed size\r
    this.channelCount = 2;\r
\r
    this.inputChannels = [];\r
    this.bufferSize = options.processorOptions.bufferSize || this.bufferSize;\r
    this.initBuffer();\r
    this.port.postMessage({\r
      type: "msg",\r
      msg: "init"\r
    });\r
  }\r
\r
  initBuffer() {\r
    this._bytesWritten = 0;\r
  }\r
\r
  process(inputList) {\r
    // console.warn("process", inputList[0]);\r
    this.port.postMessage({\r
      type: "proces",\r
      len: inputList[0].length\r
    });\r
    if (this.isBufferFull()) {\r
      this.flush();\r
    }\r
\r
    const _inputChannels = inputList[0];\r
    this.channelCount = _inputChannels.length;\r
    if (_inputChannels && _inputChannels.length) {\r
      // \r
      if (!this.inputChannels[0]) {\r
        for (let i = 0; i < this.channelCount; i++) {\r
          this.inputChannels[i] = new Float32Array(this.bufferSize);\r
        }\r
      }\r
\r
      const bufferLen = _inputChannels[0].length;\r
      for (let j = 0; j < bufferLen; j++) {\r
        for (let i = 0; i < _inputChannels.length; i++) {\r
          this.inputChannels[i][this._bytesWritten] = _inputChannels[i][j];\r
        }\r
        this._bytesWritten++;\r
      }\r
    }\r
    return true;\r
  }\r
\r
  isBufferEmpty() {\r
    return this._bytesWritten === 0;\r
  }\r
\r
  isBufferFull() {\r
    // console.warn(this._bytesWritten, this.bufferSize, this.channelCount);\r
    return this._bytesWritten === this.bufferSize;\r
  }\r
\r
  flush() {\r
    this.port.postMessage({\r
      type: "process",\r
      channels: this.inputChannels,\r
      channelCount: this.inputChannels.length,\r
      sampleRate: sampleRate\r
    });\r
    this.initBuffer();\r
  }\r
}\r
\r
try {\r
  registerProcessor("audio-pcm-data-processor", AudioPcmDataProcessor);\r
} catch (error) {\r
  // console.warn("registerProcessor", error);\r
}\r
`)];case 1:return x.sent(),d.setAudioFrameCallback(t,n),o({errorCode:0,extendedData:""}),[2]}var U})})})},s.prototype.startRecord=function(e){var t=this,n=this.gn.checkPreview(e);if(!n)throw"start record failed. streamNotFromZegoStr.";var r=e.clone(),o=r.getAudioTracks();o.length>0&&n.hasEmptyAudioTrack&&o.forEach(function(l){r.removeTrack(l)}),this.recordedBlobs=[];var a={mimeType:"video/webm;codecs=vp9"};console.log("MediaRecorder",MediaRecorder),MediaRecorder.isTypeSupported(a.mimeType)||(a={mimeType:"video/webm;codecs=vp8,opus"},MediaRecorder.isTypeSupported(a.mimeType)||(a={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(a.mimeType)||(a={mimeType:"video/webm"},MediaRecorder.isTypeSupported(a.mimeType)||(a={mimeType:""}))));try{this.mediaRecorder=new MediaRecorder(r,a)}catch(l){return void this.an.error("zc.mdrcd Exception while creating ZegoMediaRecorder:",l)}this.mediaRecorder.onstop=function(l){t.an.warn("zc.mdrcd Recorder stopped: "+l)},this.mediaRecorder.ondataavailable=this.handleDataAvailable.bind(this),this.mediaRecorder.start(10)},s.prototype.stopRecord=function(){this.mediaRecorder?this.mediaRecorder.stop():this.an.warn("zc.mdrcd please invoke startRecord first")},s.prototype.resumeRecord=function(){this.mediaRecorder?this.mediaRecorder.resume():this.an.warn("zc.mdrcd please invoke startRecord first")},s.prototype.pauseRecord=function(){this.mediaRecorder?this.mediaRecorder.pause():this.an.warn("zc.mdrcd please invoke startRecord first")},s.prototype.saveRecord=function(e){if(this.mediaRecorder&&this.recordedBlobs){var t=new Blob(this.recordedBlobs,{type:"video/webm"}),n=window.URL.createObjectURL(t),r=he.VJ.createElement("a");r.style.display="none",r.href=n,r.download=e+".webm",he.VJ.body.appendChild(r),r.click(),setTimeout(function(){he.VJ.body.removeChild(r),window.URL.revokeObjectURL(n)},100)}else this.an.warn("please invoke startRecord first")},s.prototype.useVideoDevice=function(e,t){return this.rtcModules.publishModule.useVideoDevice(e,t)},s.prototype.useAudioDevice=function(e,t){return this.rtcModules.publishModule.useAudioDevice(e,t)},s.prototype.useFrontCamera=function(e,t){return this.rtcModules.publishModule.useFrontCamera(e,t)},s.prototype.getElectronScreenSources=function(){return this.rtcModules.publishModule.getElectronScreenSources()},s.prototype.setSoundLevelDelegate=function(e,t,n){this.an.info("zc.ssd.0 call"),(0,B.dd)(e)?t&&(!(0,he.zQ)(t)||t<100||t>3e3)?this.an.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000"):this.gn.setSoundLevelDelegate(e,t,n):this.an.error("zc.ssd.0 param 1 must be boolean")},s.prototype.on=function(e,t){return this.rtcModules.bindListener(e,t)},s.prototype.off=function(e,t){return this.rtcModules.deleteListener(e,t)},s.prototype.getVersion=function(){return I.qt},s.prototype.setStreamExtraInfo=function(e,t){return this.rtcModules.streamCommon.setStreamExtraInfo(e,t)},s.prototype.addPublishCdnUrl=function(e,t){return this.an.info("zg.cm.apu call "+t,{streamid:e}),this.rtcModules.streamCDNModule?this.rtcModules.streamCDNModule.publishTarget({type:"addpush",streamID:e,pushUrl:t}):(0,he.AA)(["stream CDN"])},s.prototype.removePublishCdnUrl=function(e,t){return this.an.info("zg.cm.rpu call "+t,{streamid:e}),this.rtcModules.streamCDNModule?this.rtcModules.streamCDNModule.publishTarget({type:"delpush",streamID:e,pushUrl:t}):(0,he.AA)(["stream CDN"])},s.prototype.startMixerTask=function(e){return(0,he.AA)(["mix stream"])},s.prototype.startAutoMixerTask=function(e){return(0,he.AA)(["mix stream"])},s.prototype.setMixerTaskConfig=function(e){return(0,he.AA)(["mix stream"])},s.prototype.stopMixerTask=function(e){return(0,he.AA)(["mix stream"])},s.prototype.stopAutoMixerTask=function(e){return(0,he.AA)(["mix stream"])},s.prototype.setCaptureVolume=function(e,t){return this.rtcModules.publishModule.setCaptureVolume(e,t)},s.use=function(e){switch(e.type){case"AudioMix":e.install(yu,us);break;case"MixStream":e.install(s,hu,yu);break;case"StreamCDN":e.install(s,yu,hu);break;case"Advance":e.install(s,yu,hu,qc,Hh,ml,us,ma);break;case"BeautyEffect":case"VoiceChanger":e.install(s,qc);break;case"RangeAudio":case"DataChannel":case"AiDenoise":case"BackgroundProcess":case"CopyrightedMusic":case"StreamCompositor":e.install(s)}},s.prototype.createRangeAudioInstance=function(){throw(0,he.d1)(["range audio"])},s.prototype.createCopyrightedMusic=function(){throw(0,he.d1)(["copyrighted music"])},s.prototype.destroyCopyrightedMusic=function(){},s.prototype.createRealTimeSequentialDataManager=function(e){throw(0,he.d1)(["data channel"])},s.prototype.destroyRealTimeSequentialDataManager=function(e){throw(0,he.d1)(["data channel"])},s.prototype.enableDataChannel=function(e){(0,B.dd)(e)&&(this.gn.isDataChannelEnabled=e)},s.prototype.addTrack=function(e,t){var n=this;return new he.l3(function(r,o){var a={id:t.id,muted:t.muted,enabled:t.enabled,kind:t.kind,readyState:t.readyState,label:t.label};n.an.info(Ce.WuQ+" call. ".concat(e==null?void 0:e.id," track: ")+JSON.stringify(a)),n.rtcModules.publishModule.handleTrack("ADD",e,t,r,o)})},s.prototype.removeTrack=function(e,t){var n=this;return new he.l3(function(r,o){n.an.info(Ce.FGD+" call"),n.rtcModules.publishModule.handleTrack("REMOVE",e,t,r,o)})},s.prototype.setBeautyEffect=function(e,t,n){return(0,he.AA)(["beauty effect"])},s.prototype.setLowlightEnhance=function(e,t){return(0,he.AA)(["beauty effect"])},s.prototype.getPublishingStreamQuality=function(e){return this.rtcModules.publishModule.getStreamStats(e)},s.prototype.getPlayingStreamQuality=function(e){return this.rtcModules.playModule.getStreamStats(e)},s.prototype.checkAudioTrackIsActive=function(e){var t=this;return this.an.info("zc.caia.0 call"),new he.l3(function(n,r){if(e=(0,Vo.L)(e,t.an),!t.checkTrackParam(e,1))return t.an.info("zc.caia.0 param active: false"),n(!1);var o=0;try{var a=0,l=t.gn.createSoundLevel(t.ac,e,50,50,function(p){p*=100;var u=!1;a>=4?(d.destroy(),(p>0||o>0)&&(u=!0),t.an.info("zc.caia.0 active: "+u),n(u)):o=Math.max(p,o),a++}),d=l.soundMeter;d&&l.mic||(t.an.error("zc.cvia.1 checkVideoTrackIsActive not supported"),n(!1))}catch(p){t.an.error("zc.cvia.1 "+p),n(!1)}})},s.prototype.checkVideoTrackIsActive=function(e){var t=this;this.an.info("zc.cvia.0 call");var n=this;return new he.l3(function(r,o){if(e=(0,Vo.L)(e,t.an),!t.checkTrackParam(e,0))return t.an.info("zc.cvia.1 param active: false"),r(!1);var a=(0,he.sb)(1,1),l=(0,he.FP)(160,120).getContext("2d");l&&(l!=null&&l.drawImage)&&(l!=null&&l.getImageData)||(n.an.error("zc.cvia.1 checkVideoTrackIsActive not supported"),r(!1)),a.style.position="fixed",a.style.left="-1000px",a.style.opacity="0.01",he.VJ.body.appendChild(a),a.srcObject=e;var d=null;function p(){l=null;try{a.pause(),a.remove(),a.srcObject=null}catch{}}function u(){a.play();var v=setTimeout(function(){clearTimeout(v),v=null,a.removeEventListener("canplay",u),l==null||l.drawImage(a,0,0,160,120);var x=setTimeout(function(){clearTimeout(x),x=null;var U=l==null?void 0:l.getImageData(0,0,160,120),te=(U==null?void 0:U.data)&&Math.floor(U.data.length/3);if(te){for(var le=3;le<te;le+=4)if(U.data[le-1]!==0||U.data[le-2]!==0||U.data[le-3]!==0)return n.an.info("zc.cvia.0 active: true"),r(!0),void p();p(),n.an.info("zc.cvia.1 active: false"),r(!1)}},20)},200)}a.addEventListener("canplay",u),d=setTimeout(function(){clearTimeout(d),a.removeEventListener("canplay",u),p(),r(!1)},1e3)})},s.prototype.checkTrackParam=function(e,t){var n,r=this;if(this.an.info("zc.ctp.0 call type:"+t),!(0,B.dr)(e))return this.an.error("zc.ctp.1 param 1 must be MediaStream"),!1;var o=this.gn.checkPreview(e),a=Object.keys(this.gn.playerList).find(function(d){var p;return((p=r.gn.playerList[d])===null||p===void 0?void 0:p.playStream)===e});if(!o&&!a)return this.an.error("zc.ctp.1 "+he.aw),!1;var l=e[t==0?"getVideoTracks":"getAudioTracks"]()[0];return l?l.readyState!=="live"||!l.enabled||l.muted?(this.an.info("zc.ctp.0 type:".concat(t," state:").concat(l.readyState," enabled:").concat(l.enabled," muted:").concat(l.muted)),!1):!a||((n=this.gn.playerList[a])===null||n===void 0?void 0:n.micStatus)===0:(this.an.error("zc.cvia.1 the stream has not track"),!1)},s.prototype.setDummyCaptureImagePath=function(e,t){return this.rtcModules.publishModule.setDummyCaptureImagePath(e,t)},s.prototype.setAccess=function(e){},s.prototype.setTestPackageSize=function(e){this.RTM.setTestPackageSize(!0)},s.prototype.setAudioOutputDevice=function(e,t){return ya(this,void 0,void 0,function(){var n,r=this;return ba(this,function(o){return n=e==null?void 0:e.setSinkId,this.an.info("zc.saopd call:"+t),[2,new he.l3(function(a,l){return ya(r,void 0,void 0,function(){var d,p,u,v=this;return ba(this,function(x){switch(x.label){case 0:if(d=function(U){v.an.info("zc.saopd error"+JSON.stringify(U)),l({errorCode:U.code,extendedData:U.message})},!n)return[3,5];if(e.setsinkid&&(e.setsinkid.enabled=!0),!t||!(0,B.QP)(t))return[2,d({code:Ft.ann.code,message:"the 'deviceID' is invalid"})];x.label=1;case 1:return x.trys.push([1,3,,4]),[4,n.call(e,t)];case 2:return x.sent(),[3,4];case 3:return p=x.sent(),(u=e.srcObject)&&!u.getAudioTracks()[0]?[2,d(Ft.akY)]:[2,d({code:Ft.z0D.code,message:p})];case 4:return[2,a(!0)];case 5:throw Error("Browser not support set audio output.")}})})})]})})},s.prototype.enableCameraCapturing=function(e,t){return t===void 0&&(t=!0),ya(this,void 0,void 0,function(){return ba(this,function(n){return[2,this.rtcModules.publishModule.enableCameraCapturing(e,t)]})})},s.prototype.enableDualStream=function(e){this.rtcModules.publishModule.enableDualStream(e)},s.prototype.setLowStreamParameter=function(e,t){this.rtcModules.publishModule.setLowStreamParameter(e,t)},s.prototype.enableVideoHardwareEncoder=function(e){if((0,B.dd)(e)){var t=this.pn.settingConfig;t.setUserValue("hardware_encode",e),t.setUserValue("camera_hard_encode",e),t.setUserValue("custom_hard_encode",e)}},s.prototype.createLocalViewer=function(e){var t=this.gn.checkPreview(e),n=t==null?void 0:t.getViewer();if(!n)throw Error("create viewer failed.");return new sd(n)},s.prototype.createRemoteViewer=function(e){var t=this.gn.checkPlayer(e),n=t==null?void 0:t.getViewer();if(!n)throw Error("create viewer failed.");return new sd(n)},s.prototype.createStreamCompositor=function(){throw(0,he.d1)(["stream compositor"])},s.prototype._enableAiDenoise=function(e,t,n){return n==oa.PP.AIBalanced||n==oa.PP.AI||n==oa.PP.AIAggressive?this.setVoiceChangerPreset(e,{ANS:{enable:t,mode:n}}):this.enableAiDenoise(e,t)},s.prototype.enableAiDenoise=function(e,t){return(0,he.AA)(["ai denoise"])},s.prototype.setAiDenoiseMode=function(e,t){return(0,he.AA)(["voice changer with AIBalance"])},s.prototype.muteAllPlayAudioStreams=function(e){return this.rtcModules.playModule.muteAllPlayAudioStreams(e)},s.prototype.muteAllPlayVideoStreams=function(e){return this.rtcModules.playModule.muteAllPlayVideoStreams(e)},s.prototype.setVoiceChangerPreset=function(e,t){return(0,he.AA)(["voice changer","advanced"])},s.prototype.enableLiveAudioEffect=function(e,t,n){return(0,he.AA)(["voice changer","advanced"])},s.prototype.loadBackgroundBlurModule=function(){return(0,he.AA)(["blur background","advanced"],-1)},s.prototype.initBackgroundModule=function(e,t){return(0,he.AA)(["blur background","advanced"],-1)},s.prototype.setBackgroundBlurOptions=function(e,t){throw(0,he.d1)(["blur background","advanced"])},s.prototype.setVirtualBackgroundOptions=function(e,t){throw(0,he.d1)(["blur background","advanced"])},s.prototype.setTransparentBackgroundOptions=function(e){throw(0,he.d1)(["blur background","advanced"])},s.prototype.enableBackgroundProcess=function(e,t,n){return(0,he.AA)(["advanced"])},s.prototype.enableAutoSwitchDevice=function(e){this.rtcModules.publishModule.enableAutoSwitchDevice(e)},s.prototype.initTracer=function(e){this.pn.reporter=e;var t=new Jf(this.RTM.stateCenter,this.pn,this.gn);this.cr.setCommonStates(t),this.cr.setResource({sdk_version:I.qt,report_version:this.pn.sdkVerNum})},s.prototype.setEngineConfig=function(e){if(e&&this.an.info("zc.sec.0 "+JSON.stringify(e)),this.checkMaxChannels(e),this.checkRetryTime(e),this.pn.engineConfig=Ya(Ya({},this.pn.engineConfig),e),this.checkQualityInterval(),this.pn.actionListener("_engineConfigUpdate",this.pn.engineConfig),e.adaptCustomUA){var t=(0,or.$t)();this.pn.customUa=t.includes("iOS"),this.an.info("zc.sec.0 custom ua ".concat(t))}(0,B.w)(e.setUserInfo)&&this.oy(e.setUserInfo),(0,B.dd)(e.enableMiniSDP)&&this.stateCenter.setIsMiniSdp(e.enableMiniSDP),this.RTM.setEngineConfig(e)},s.prototype.oy=function(e){this.logger.info("zc.sui "+JSON.stringify(e));var t=e.token,n=e.userID;this.logger.setTokenInfo(t||"",n),n&&t&&this.pn.reporter.setReporterInfo(n,t)},s.prototype.checkQualityInterval=function(){var e=this.pn.engineConfig,t=e.publishQualityInterval,n=e.playQualityInterval;(0,B.Cs)(t)&&t!==0&&t<I.d7&&(this.pn.engineConfig.publishQualityInterval=I.d7),(0,B.Cs)(n)&&n!==0&&n<I.d7&&(this.pn.engineConfig.playQualityInterval=I.d7)},s.prototype.checkMaxChannels=function(e){var t=e.maxChannels;(0,B.Cs)(t)&&(t<I.FV&&(e.maxChannels=I.FV),t>I.di&&(e.maxChannels=I.di))},s.prototype.checkRetryTime=function(e){var t=e.roomRetryTime,n=e.streamRetryTime;(0,B.Cs)(t)&&(t<I.Lx&&(e.roomRetryTime=I.Lx),t>I.ZV&&(e.roomRetryTime=I.ZV)),(0,B.Cs)(n)&&(n<I.Lx&&(e.streamRetryTime=I.Lx),n>I.ZV&&(e.streamRetryTime=I.ZV),this.pn.streamRetryTime=e.streamRetryTime)},s.prototype.inject=function(e,t){var n=this;if(e!=="ZegoExpressPlayer")throw new Error("You are not authorized to use 'inject' method!");t({appid:this.pn.appid,logger:this.an,validateToken:function(r,o){return ya(n,void 0,void 0,function(){return ba(this,function(a){switch(a.label){case 0:return this.pn.player265Validated?[2,!0]:[4,this.RTM.fetchAppConfigByTargetToken(r,o)];case 1:return a.sent()&&(this.pn.player265Validated=!0),[2,!!this.pn.player265Validated]}})})},isLogin:function(){return n.pn.rtm&&n.pn.rtm.stateCenter.roomModulesList.some(function(r){return r.isLogin()})},seiConfig:function(){return n.pn.seiConfig},addReceiver:function(r){n.pn.player265ReceiverList.push(r)},removeReceiver:function(r){n.pn.player265ReceiverList=n.pn.player265ReceiverList.filter(function(o){return o!=r})}})},s.prototype.setStreamAlignmentProperty=function(e,t){return ya(this,void 0,void 0,function(){var n,r,o,a;return ba(this,function(l){switch(l.label){case 0:return n="zc.ssap",r=(0,B.QP)(e),this.an.info(n+" call. "+(r?e:e==null?void 0:e.id)+" alignment: ".concat(t)),o=null,(o=r?this.gn.publisherList[e]:this.gn.checkPublish(e))&&o.publisher.state===6?[4,o.publisher.setStreamAlignmentProperty(t)]:(this.an.error(n+" failed.  setStreamAlignmentProperty failed, stream not published."),[2,!1]);case 1:return a=l.sent(),this.an.info(n+" end. "+a),[2,a]}})})},s.prototype.setTurnServer=function(e){if(!(0,B.C9)(e))throw"'setTurnServer' failed. param error.";this.streamCenter.turnServers=Mi([],e)},s.prototype.destroyEngine=function(){if(this.pn.engineDestroy)throw new Error("ZegoExpressEngine has been destroyed.");this.destroyEngineHandler(),this.pn.engineDestroy=!0},s.prototype.uploadLog=function(e){return e===void 0&&(e=!1),this.RTM.uploadLog(e)},s.prototype.callExperimentalAPI=function(e){var t=this;return new Promise(function(n,r){var o=e.method,a=e.params;["onRecvRoomMuteVideoStream","onRecvRoomMuteAudioStream","onRecvRoomChannelMessage"].includes(o)?n({errorCode:0,extendedData:""}):o==="sendRoomChannelMessage"?t.RTM.sendRoomChannelMessage(a.roomID,0,a.msgType,a.msgContent,a.toUserIDList).then(function(){n({errorCode:0,extendedData:""})}).catch(function(l){r(l)}):o==="enableVolumeDucking"?t.hy(a.localStream,a.enable).then(function(){n({errorCode:0,extendedData:""})}).catch(function(l){r(l)}):n(o==="getAudioContext"?t.ac:void 0)})},s.prototype.setTracerLevel=function(e){this.RTM.reporter.tracerHandler.tracer.setLogLevel(e)},s.prototype.getReportSize=function(){var e;return(e=this.RTM.reporter.tracerHandler)===null||e===void 0?void 0:e.tracer.reportSize()},s.prototype.getFlutterVideoConfig=function(){var e=Li(this.pn,this.an,{});return{encodeWidth:e.width,encodeHeight:e.height,fps:e.frameRate,bitrate:e.bitRate,keyFrameInterval:e.keyFrameInterval}},s.prototype.getFlutterAudioConfig=function(){var e=Li(this.pn,this.an,{});return{bitrate:e.audioBitrate,channel:e.channelCount}},s.prototype.hy=function(e,t){return this.setVoiceChangerPreset(e,{volumeDucking:t})},s.screenShotReady=!1,s.isInstantiated=!1,s})();window.addEventListener("message",function(s){s.data.type==="SS_PING"&&(Za.screenShotReady=!0)});var ko,lf=function(){return lf=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},lf.apply(this,arguments)},Yf=(function(){function s(e,t){this.ly=e,this.vy=t}return s.prototype.start=function(e,t,n,r){this.ly.playEffect(lf({stream:this.vy,effectID:e},t||{}),n,r)},s.prototype.stop=function(e){return this.ly.stopEffect(this.vy,e)},s.prototype.pause=function(e){return this.ly.pauseEffect(this.vy,e)},s.prototype.resume=function(e){return this.ly.resumeEffect(this.vy,e)},s.prototype.setVolume=function(e,t,n){return this.ly.setEffectVolume(this.vy,t,e,n)},s.prototype.getTotalDuration=function(e){return this.ly.getEffectDuration(e)},s.prototype.getCurrentProgress=function(e){return this.ly.getEffectCurrentProgress(this.vy,e)},s.prototype.seekTo=function(e,t){return this.ly.seekAudioEffect(this.vy,e,t)},s})(),vp=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xa=(function(s){function e(t,n,r){var o=s.call(this,t,n,0,arguments[2])||this;return o.zegoWebRTC=new Za(o.logger,o.dataReport,o.reporter,o.zegoWebRTM,0,r==null?void 0:r.scenario),o}return vp(e,s),e.prototype.setEngineConfig=function(t){this.zegoWebRTC.setEngineConfig(t)},e.setEngineOptions=function(t){at.setEngineOptions(t),Za.setEngineOptions(t)},e.setGeoFence=function(t,n){Za.setGeoFence(t,n),at.setGeoFence(t,n)},e.prototype.setRoomScenario=function(t){return this.zegoWebRTC.setRoomScenario(t)},e.prototype.setSEIConfig=function(t){this.zegoWebRTC.setSEIConfig(t)},e.use=function(t){at.use(t),Za.use(t)},e.prototype.checkSystemRequirements=function(t,n){return n===void 0&&(n=0),this.zegoWebRTC.checkSystemRequirements(n,t)},e.prototype.off=function(t,n){return this.zegoWebRTM.stateCenter.listenerList[t]?this.zegoWebRTM.off(t,n):!!this.zegoWebRTC.stateCenter.listenerList[t]&&this.zegoWebRTC.off(t,n)},e.prototype.on=function(t,n){return this.zegoWebRTM.stateCenter.listenerList[t]?this.zegoWebRTM.on(t,n):!!this.zegoWebRTC.stateCenter.listenerList[t]&&this.zegoWebRTC.on(t,n)},e.prototype.createStream=function(t){return this.zegoWebRTC.createStream(t)},e.prototype.createZegoStream=function(t){return this.zegoWebRTC.createZegoStream(t)},e.prototype.getPublishingStreamQuality=function(t){return this.zegoWebRTC.getPublishingStreamQuality(t)},e.prototype.getElectronScreenSources=function(){return this.zegoWebRTC.getElectronScreenSources()},e.prototype.destroyStream=function(t){return this.zegoWebRTC.destroyStream(t)},e.prototype.startPublishingStream=function(t,n,r){return this.zegoWebRTC.startPublishingStream(t,n,r)},e.prototype.updatePublishingStream=function(t,n){return this.zegoWebRTC.updatePublishingStream(t,n)},e.prototype.stopPublishingStream=function(t){return this.zegoWebRTC.stopPublishingStream(t)},e.prototype.sendSEI=function(t,n){return this.zegoWebRTC.sendSEI(t,n)},e.prototype.setVideoConfig=function(t,n){return this.zegoWebRTC.setVideoConfig(t,n)},e.prototype.setAudioConfig=function(t,n){return this.zegoWebRTC.setAudioConfig(t,n)},e.prototype.replaceTrack=function(t,n){return this.zegoWebRTC.replaceTrack(t,n)},e.prototype.addTrack=function(t,n){return this.zegoWebRTC.addTrack(t,n)},e.prototype.removeTrack=function(t,n){return this.zegoWebRTC.removeTrack(t,n)},e.prototype.setCaptureVolume=function(t,n){return this.zegoWebRTC.setCaptureVolume(t,n)},e.prototype.setDummyCaptureImagePath=function(t,n){return this.zegoWebRTC.setDummyCaptureImagePath(t,n)},e.prototype.setStreamExtraInfo=function(t,n){return this.zegoWebRTC.setStreamExtraInfo(t,n)},e.prototype.enableVideoCaptureDevice=function(t,n){return this.zegoWebRTC.enableCameraCapturing(t,n)},e.prototype.addPublishCdnUrl=function(t,n){return arguments.length===3?this.zegoWebRTC.addPublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.addPublishCdnUrl(t,n)},e.prototype.removePublishCdnUrl=function(t,n){return arguments.length===3?this.zegoWebRTC.removePublishCdnUrl(arguments[0],arguments[2]):this.zegoWebRTC.removePublishCdnUrl(t,n)},e.prototype.mutePublishStreamVideo=function(t,n,r){return this.zegoWebRTC.mutePublishStreamVideo(t,n,r)},e.prototype.mutePublishStreamAudio=function(t,n){return this.zegoWebRTC.mutePublishStreamAudio(t,n)},e.prototype.setEffectsBeauty=function(t,n,r){return this.zegoWebRTC.setBeautyEffect(t,n,r)},e.prototype.setLowlightEnhancement=function(t,n){return this.zegoWebRTC.setLowlightEnhance(t,n)},e.prototype.enableDualStream=function(t){return this.zegoWebRTC.enableDualStream(t)},e.prototype.setLowStreamParameter=function(t,n){return this.zegoWebRTC.setLowStreamParameter(t,n)},e.prototype.enableHardwareEncoder=function(t){this.zegoWebRTC.enableVideoHardwareEncoder(t)},e.prototype.enableAutoSwitchDevice=function(t){return this.zegoWebRTC.enableAutoSwitchDevice(t)},e.prototype.initBackgroundModule=function(t,n){return this.zegoWebRTC.initBackgroundModule(t,n)},e.prototype.setBackgroundBlurOptions=function(t,n){return this.zegoWebRTC.setBackgroundBlurOptions(t,n)},e.prototype.setTransparentBackgroundOptions=function(t){return this.zegoWebRTC.setTransparentBackgroundOptions(t)},e.prototype.setVirtualBackgroundOptions=function(t,n){return this.zegoWebRTC.setVirtualBackgroundOptions(t,n)},e.prototype.enableBackgroundProcess=function(t,n,r){return this.zegoWebRTC.enableBackgroundProcess(t,n,r)},e.prototype.setVoiceChangerPreset=function(t,n){return this.zegoWebRTC.setVoiceChangerPreset(n,{voiceChanger:t})},e.prototype.setVoiceChangerParam=function(t,n){return this.zegoWebRTC.setVoiceChangerPreset(t,{voiceParam:n})},e.prototype.setReverbPreset=function(t,n){return this.zegoWebRTC.setVoiceChangerPreset(t,{reverb:n})},e.prototype.enableVirtualStereo=function(t,n,r){return this.zegoWebRTC.setVoiceChangerPreset(t,{stereo:{enable:n,angle:r}})},e.prototype.enableLiveAudioEffect=function(t,n,r){return this.zegoWebRTC.enableLiveAudioEffect(t,r,{liveEffect:n})},e.prototype.setAudioChangerParam=function(t,n,r){return this.zegoWebRTC.enableLiveAudioEffect(t,r,{pitch:n})},e.prototype.enableAiDenoise=function(t,n){return this.zegoWebRTC.enableAiDenoise(t,n)},e.prototype.setAiDenoiseMode=function(t,n){return this.zegoWebRTC.setAiDenoiseMode(t,n)},e.prototype.startPlayingStream=function(t,n){return this.zegoWebRTC.startPlayingStream(t,n)},e.prototype.setPlayStreamVideoType=function(t,n){return this.zegoWebRTC.setPlayStreamVideoType(t,n)},e.prototype.stopPlayingStream=function(t){return this.zegoWebRTC.stopPlayingStream(t)},e.prototype.mutePlayStreamVideo=function(t,n){return this.zegoWebRTC.mutePlayStreamVideo(t,n)},e.prototype.mutePlayStreamAudio=function(t,n){return this.zegoWebRTC.mutePlayStreamAudio(t,n)},e.prototype.setAudioFrameCallback=function(t,n,r){return this.zegoWebRTC.setAudioFrameCallback(t,n,r)},e.prototype.setCaptureAudioFrameCallback=function(t,n,r){return this.zegoWebRTC.setAudioFrameCallback(t,n,r)},e.prototype.getPlayingStreamQuality=function(t){return this.zegoWebRTC.getPlayingStreamQuality(t)},e.prototype.createLocalStreamView=function(t){return this.zegoWebRTC.createLocalViewer(t)},e.prototype.createRemoteStreamView=function(t){return this.zegoWebRTC.createRemoteViewer(t)},e.prototype.startMixerTask=function(t){return this.zegoWebRTC.startMixerTask(t)},e.prototype.stopMixerTask=function(t){return this.zegoWebRTC.stopMixerTask(t)},e.prototype.setMixerTaskConfig=function(t){return this.zegoWebRTC.setMixerTaskConfig(t)},e.prototype.startAutoMixerTask=function(t){return this.zegoWebRTC.startAutoMixerTask(t)},e.prototype.stopAutoMixerTask=function(t){return this.zegoWebRTC.stopAutoMixerTask(t)},e.prototype.startMixingAudio=function(t,n){return this.zegoWebRTC.startMixingAudio(t,n)},e.prototype.stopMixingAudio=function(t,n){return this.zegoWebRTC.stopMixingAudio(t,n)},e.prototype.setMixingAudioVolume=function(t,n,r){return this.zegoWebRTC.setMixingAudioVolume(t,n,r)},e.prototype.createAudioEffectPlayer=function(t){if(t instanceof MediaStream||t.getTracks)return new Yf(this.zegoWebRTC,t);throw Error("Param localStream is not instance of MediaStream or ZegoLocalStream.")},e.prototype.loadAudioEffect=function(t,n){var r=this;return new Promise(function(o,a){r.zegoWebRTC.preloadEffect(t,n,function(l){l&&a(l),o(t)})})},e.prototype.unloadAudioEffect=function(t){return this.zegoWebRTC.unloadEffect(t)},e.prototype.enumDevices=function(){return this.zegoWebRTC.enumDevices()},e.prototype.getCameras=function(){return this.zegoWebRTC.getCameras()},e.prototype.getMicrophones=function(){return this.zegoWebRTC.getMicrophones()},e.prototype.getSpeakers=function(){return this.zegoWebRTC.getSpeakers()},e.prototype.useVideoDevice=function(t,n){return this.zegoWebRTC.useVideoDevice(t,n)},e.prototype.useAudioDevice=function(t,n){return this.zegoWebRTC.useAudioDevice(t,n)},e.prototype.useAudioOutputDevice=function(t,n){return this.zegoWebRTC.setAudioOutputDevice(t,n)},e.prototype.useFrontCamera=function(t,n){return this.zegoWebRTC.useFrontCamera(t,n)},e.prototype.setSoundLevelDelegate=function(t,n,r){return this.zegoWebRTC.setSoundLevelDelegate(t,n,r==null?void 0:r.enableInBackground)},e.prototype.isMicrophoneMuted=function(){return this.zegoWebRTC.isMicrophoneMuted()},e.prototype.muteMicrophone=function(t){return this.zegoWebRTC.muteMicrophone(t)},e.prototype.createRangeAudioInstance=function(){return this.zegoWebRTC.createRangeAudioInstance()},e.prototype.createRealTimeSequentialDataManager=function(t){return this.zegoWebRTC.createRealTimeSequentialDataManager(t)},e.prototype.destroyRealTimeSequentialDataManager=function(t){this.zegoWebRTC.destroyRealTimeSequentialDataManager(t)},e.prototype.createCopyrightedMusic=function(){return this.zegoWebRTC.createCopyrightedMusic()},e.prototype.checkVideoTrackIsActive=function(t){return this.zegoWebRTC.checkVideoTrackIsActive(t)},e.prototype.checkAudioTrackIsActive=function(t){return this.zegoWebRTC.checkAudioTrackIsActive(t)},e.prototype.destroyCopyrightedMusic=function(){return this.zegoWebRTC.destroyCopyrightedMusic()},e.prototype.getNetworkTimeInfo=function(){var t=this.zegoWebRTC.RTM;return t.setNetAgentHBMode("periodic"),t.getNetworkInfo()},e.prototype.setStreamAlignmentProperty=function(t,n){return this.zegoWebRTC.setStreamAlignmentProperty(t,n)},e.prototype.destroyEngine=function(){return this.zegoWebRTC.destroyEngine()},e.prototype.uploadLog=function(){return this.zegoWebRTC.uploadLog(!0)},e.prototype.createStreamCompositor=function(){return this.zegoWebRTC.createStreamCompositor()},e.prototype.setTurnServer=function(t){this.zegoWebRTC.setTurnServer(t)},e.prototype.muteAllPlayAudioStreams=function(t){return this.zegoWebRTC.muteAllPlayAudioStreams(t)},e.prototype.muteAllPlayVideoStreams=function(t){return this.zegoWebRTC.muteAllPlayVideoStreams(t)},e.prototype.callExperimentalAPI=function(t){return this.zegoWebRTC.callExperimentalAPI(t)},e.version="3.11.0",e})(at),Kc="zm.scc",$a="zm.sbcm",Pu="zm.srlm",Cl="zm.sbrm",nh="zm.schm",Yc="zm.msg.sdr",cd="zm.msg.rlr",rh="zm.msg.rps",ih="zm.msg.srm",oh="zm.msg.scm",df="zm.msg.schm",Zf="zm.msg.sbm",Hs="zm.msg.bps",sh="zm.sv.ps",jo={code:1100001,msg:"input param error."},Nu={code:1100002,msg:"network timeout."},ah={code:1100003,msg:"socket close"},ec={code:1000002,msg:"not login"},Rl={code:1009001,msg:"message content is empty"},tc={code:1009002,msg:"content is too long"},Du={code:1009005,msg:"inconsistent room id"},ch={code:1009010,msg:"failed to send message"},Ss={code:1009013,msg:"message is too long"},hf={code:1002017,msg:"room extra info key exceed the limit"},Xf={code:1002098,msg:"room channel type error"},Ec={code:1002099,msg:"room inner error"},$f={code:1102022,msg:"trans send frequently"},ud={code:1009015,msg:"frequency limited."},hs=function(s){return s},Ou=function(s){return s},xl=function(s){return s},Tc="/sdk/login",Zc={event:"/liveroom/send_big_room_message",error:{IM_MESSAGE_NULL:Rl,IM_CONTENT_TOO_LONG:tc,IM_MESSAGE_TOO_LONG:Ss,INCONSISTENT_ROOM_ID:Du,ROOM_NOT_EXIST:ec}},Fs={event:"/liveroom/send_custom_command",room_sid_string:hs,request_id:Ou,error:{INPUT_PARAM:jo,IM_CONTENT_NULL:Rl,IM_CONTENT_TOO_LONG:tc,INCONSISTENT_ROOM_ID:Du,ROOM_NOT_EXIST:ec}},fs={event:"/liveroom/send_room_message",room_id:Ou,room_sid_string:Ou,msg_content_size:xl,send_seq:xl,msg_id:xl,error:{INPUT_PARAM:jo,IM_MESSAGE_NULL:Rl,IM_MESSAGE_TOO_LONG:Ss,ROOM_NOT_EXIST:ec,INCONSISTENT_ROOM_ID:Du}},As={event:"/liveroom/set_room_extrainfo",room_id:Ou,room_sid_string:hs,key:Ou,value:Ou,error:{INPUT_PARAM:jo,TRANS_FREQUENTLY:$f,ROOM_ROOMID_INCORRECT:pe.ROOM_ROOMID_INCORRECT,KEY_EMPTY:{code:1002014,msg:"room extra info key empty"},KEY_TOO_LONG:{code:1002015,msg:"room extra info key too long"},VALUE_TOOL_LONG:{code:1002016,msg:"room extra info value too long"}}},yp="/liveroom/get_room_extrainfo",bp=hs,_p=hs,Sp=1000001109,Ep=1000001110,uh=10240;(function(s){s[s.I=0]="I",s[s.H=10]="H",s[s.M=100]="M",s[s.L=1e3]="L"})(ko||(ko={}));var Il=function(){return Il=Object.assign||function(s){for(var e,t=1,n=arguments.length;t<n;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Il.apply(this,arguments)},ep=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},kl=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},ld=(function(){function s(e,t,n,r,o,a){var l=this;this.an=e,this.pn=t,this._dataReport=n,this.Jr=r,this._rtm=o,this.Ar=a,this.my=0,this.py=500,this.gy={},this.by=0,this._y=[],this.yy=null,this.wy=null,this.Gr=0,this.Sy=0,this.Ey=!1,this.ky={},this.Oy={},this.Iy={},this.roomExtraInfo={},this.Ry=function(d,p){p===void 0&&(p=!1);var u=d.map(function(v){var x={key:v.trans_type,value:v.trans_data?v.trans_data:"",updateUser:{userID:v.id_name||v.trans_idname,userName:v.nick_name||v.trans_nickname},updateTime:ki.A.isLong(v.trans_send_time)?v.trans_send_time.toNumber():v.trans_send_time};return l.roomExtraInfo[v.trans_type]=x,x});p?l.an.warn(rh+" id name same"):(u.length>0&&l.pn.actionListener("roomExtraInfoUpdate",l.Ar.roomID,Object.values(l.roomExtraInfo)),d.forEach(function(v){l.pn.actionListener("recvReliableMessage",v.trans_type,v.trans_seq,v.trans_data)}))}}return Object.defineProperty(s.prototype,"cr",{get:function(){return this.pn.reporter},enumerable:!1,configurable:!0}),s.prototype.loginRsp=function(e){var t,n,r=this,o=e.body,a=o.ret_timestamp,l=o.bigim_time_window,d=o.trans_seqs;if(a!=null&&(0,B.QP)(a)){var p=parseFloat(a);this.Gr=p==0?0:+a-new Date().getTime()}if(l&&(0,B.kb)(l)&&(this.Sy=l),d)for(var u=0;u<d.length;u++){var v=d[u].trans_channel,x=d[u].trans_seq_list||d[u].trans_seq_array;(x=(x=x.filter(function(U){var te=U.trans_type;return!r.Oy[te]||r.Oy[te].seq<U.trans_seq})).map(function(U){return{trans_type:U.trans_type,trans_local_seq:U.trans_seq}})).length>0&&this.Ty(v,x)}!((t=e.body)===null||t===void 0)&&t.user_trans_channel_list&&this.userTransMessageHandler((n=e.body)===null||n===void 0?void 0:n.user_trans_channel_list)},s.prototype.fetchUserTransMessage=function(e,t){var n=this;this.an.info("zb.mh.futm.0 call");var r=function(o){n.Cy(o)};this.Jr.fetchUserTransInfo({trans_channel:e,fetch_array:t},r,r,this.Ar),this.an.info("zb.mh.futm.0 call success")},s.prototype.userTransMessageHandler=function(e){var t=this;if(e)for(var n=function(a){var l=e[a].trans_channel,d=e[a].trans_seq_list;d=d.filter(function(p){var u=p.trans_type,v=p.trans_seq;return t.Iy[l]||(t.Iy[l]={}),!t.Iy[l][u]||t.Iy[l][u].seq<v}),d.length>0&&r.fetchUserTransMessage(l,d)},r=this,o=0;o<e.length;o++)n(o)},s.prototype.Cy=function(e){if(e.body&&e.body.err_code!=0)this.an.error("zb.mh.hfutr user trans send error "+e.body.err_code);else if(e.header&&e.body){var t=e.body.user_trans_list,n=e.body.trans_channel,r=[];if(Array.isArray(t)&&t.length>0){for(var o=0;o<t.length;o++){var a=t[o],l=a.trans_type,d=a.trans_seq;this.Iy[n]||(this.Iy[n]={}),!this.Iy[n][l]||this.Iy[n][l].seq<d?(this.Iy[n][l]={seq:d},r.push(a)):this.an.warn("zb.mh.hfutr fetch trans seq wrong"),this.an.info("zb.mh.hfutr trans "+l+" seq "+d)}r.length>0&&this.pn.actionListener("_userTransUpdate",this.Ar.roomID,n,r),this.an.info("zb.mh.hfutr call success")}}else this.an.error("zb.mh.hfutr user trans send error "+JSON.stringify(e))},s.prototype.sendReliableMessage=function(e,t,n,r){var o=this;if(this.an.info(Yc+" call"),!this.Ar.isLogin())return this.an.error(Yc+" state error"),void(r&&r(ec));if(this.Ey)return this.an.error(Yc+" send too often"),void r(As.error.TRANS_FREQUENTLY);this.Oy[e]||(this.Oy[e]={seq:0});var a={trans_type:e,trans_data:t,trans_local_seq:this.Oy[e].seq,trans_channel:"clt"};this.Ey=!0,this.Jr.sendReliableMessage(a,function(l){o.Oy[e].seq=l.body.trans_seq,o.an.info(Yc+" trans "+e+" seq "+l.body.trans_seq),o.Ey=!1,o.roomExtraInfo[e]={key:e,value:t,updateUser:{userID:o.Ar.userID,userName:o.Ar.userName},updateTime:Date.now()},n({seq:l.header.seq,errorCode:0})},function(l){var d=Ec;o.an.error(Yc+" fail "+JSON.stringify(l)),l.body&&l.body.err_code?(d=o._rtm.getServerError(l.body.err_code,l.body.err_message),o.an.error(Yc+"  "+d.msg)):d=l,o.Ey=!1,r(d)},this.Ar)},s.prototype.Ty=function(e,t){var n=this,r={trans_channel:e,fetch_array:t},o=this.cr.createSpan(ko.H,{key:Tc,par:this.Ar.roomID},{key:""},yp);o.setAttributes({fetch_array:bp(t)});var a=function(l){n.Ay(l,o)};this.Jr.fetchReliableMessage(r,a,a,this.Ar),this.an.info("zm.msg.frm call success")},s.prototype.Ay=function(e,t){if(e.body&&e.body.err_code!=0)return this.an.error(cd+" trans send error "+e.body.err_code),void this.pn.reporter.setError(t,{code:e.body.err_code});if(!e.header||!e.body)return this.an.error(cd+" trans send error "+e),void this.pn.reporter.setError(t,Nu);var n=e.body.trans_list||e.body.trans_fetch_results,r=[],o=[];if(Array.isArray(n)&&n.length>0){for(var a=0;a<n.length;a++){var l=n[a];if(l.err_code!==Sp){var d=l.trans_type,p=l.trans_seq;o.push({trans_type:d,trans_seq:p}),l.err_code!==Ep?!this.Oy[d]||this.Oy[d].seq<p?(this.Oy[d]={seq:p},r.push(l)):this.an.warn(cd+" fetch trans seq wrong"):(this.an.warn(cd+" fetch trans seq is wrong "+l.err_code),this.Oy[d]={seq:p})}else this.an.warn(cd+" fetch trans unknown type "+l.err_code)}this.roomExtraInfo={},r.length>0&&this.Ry(r)}t.setAttributes({result_array:_p(o)}),t.end()},s.prototype.handlePushTransMsg=function(e){var t,n,r=e.body.trans_type,o=e.body.trans_seq;!this.Oy[r]||this.Oy[r].seq<o?(this.Oy[r]={seq:o},this.Ry([e.body],((t=e==null?void 0:e.body)===null||t===void 0?void 0:t.trans_idname)===this.pn.idName||((n=e==null?void 0:e.body)===null||n===void 0?void 0:n.id_name)===this.pn.idName)):this.an.warn(rh+" trans seq wrong"),this.an.info(rh+" trans "+r+" seq "+o)},s.prototype.handlePushUserTransMsg=function(e){this.an.info("zb.mh.hputr.0 call");var t=e.body.trans_seq_list,n=e.body.trans_channel,r=[];if(n&&Array.isArray(t)&&t.length>0){for(var o=0;o<t.length;o++){var a=t[o].trans_type,l=t[o].trans_seq;this.Iy[n]||(this.Iy[n]={}),(!this.Iy[n][a]||this.Iy[n][a].seq<l)&&(this.Iy[n][a]={seq:l},r.push(t[o]))}r.length>0?this.pn.actionListener("_userTransUpdate",this.Ar.roomID,n,r):this.an.warn("zb.mh.hputr.0 no fetch user trans")}else this.an.warn("zb.mh.hputr.0 no push user trans")},s.prototype.sendRoomMsg=function(e,t,n,r,o,a){var l,d=this;if(!this.Ar.isLogin())return this.an.error(ih+" state error"),a(ec),!1;var p=Date.parse(new Date+"");if(this.my>0&&this.my+this.py>p)return this.an.info(ih+" freq error"),a&&a(ud,0,e,r),!1;this.my=p;var u=this.Jr.sendRoomMsg({msg_category:e,msg_type:1,msg_priority:1,msg_content:r},function(v){o({seq:v.header.seq,errorCode:0,messageID:v.body.msg_id})},function(v){var x,U,te,le=Ec;if(!v.header||!v.body)return v.code&&v.msg&&(le=v),void a({seq:0,errorCode:le.code,messageID:0});te=(x=[d._rtm.getServerError(v.body.err_code,(U=v.body)===null||U===void 0?void 0:U.err_message),v.body.msg_id])[1],d.an.error(ih+" "+(le=x[0]).msg),le==Nu&&(le=ch),a({seq:v.header.seq,errorCode:le.code,messageID:te,message:le.msg})},this.Ar);return this.cr.spanSetAttributes({key:fs.event,par:(l=this.Ar)===null||l===void 0?void 0:l.roomID},{send_seq:fs.send_seq(u)}),this.an.info(ih+"  call success"),!0},s.prototype.handlePushRoomMsg=function(e){var t=[],n=e.body.msg_list;e.body.msg_list.forEach(function(r){var o={fromUser:{userID:r.id_name,userName:r.nick_name},message:r.msg_content,sendTime:r.send_time.toNumber(),messageID:r.msg_id.toNumber()};t.push(o)}),e.body.server_msg_id=e.body.server_msg_id.toNumber(),e.body.ret_msg_id=e.body.ret_msg_id.toNumber(),this.pn.actionListener("IMRecvBroadcastMessage",this.Ar.roomID,t),this.pn.actionListener("_recvRoomMsg",n,e.body.server_msg_id,e.body.ret_msg_id)},s.prototype.sendCustomCommand=function(e,t,n,r){var o,a=this;if(!this.Ar.isLogin())return this.an.error(oh+" state error"),r(ec),!1;var l={from_userid:this.pn.idName,from_username:this.pn.nickName,request_id:this.pn.getRequestId(),custom_content:t||"",room_id:this.Ar.roomID};this.cr.spanSetAttributes({key:Fs.event,par:(o=this.Ar)===null||o===void 0?void 0:o.roomID},{request_id:Fs.request_id(l.request_id)});var d={dest_id_name:e,custom_msg:JSON.stringify(l)};return this.Jr.sendCustomCommand(d,function(p){n({seq:p.header.seq,errorCode:0})},function(p){var u,v,x,U,te,le=Ec;le=p.body&&p.body.err_code?a._rtm.getServerError(p.body.err_code,(u=p.body)===null||u===void 0?void 0:u.err_message):p,a.an.error(oh+" "+le.msg),te=((v=p.body)===null||v===void 0?void 0:v.err_code)===2||((x=p.body)===null||x===void 0?void 0:x.err_code)===1000000002?jo:le==Nu?ch:le,r({seq:((U=p.header)===null||U===void 0?void 0:U.seq)||-1,errorCode:te.code,code:te.code,message:te.msg})},this.Ar),this.an.info(oh+" call success"),!0},s.prototype.handlePushChannelMsg=function(e){var t=e.body;t.channel_type===0&&this.pn.actionListener("_experimentalAPICallback",{method:"onRecvRoomChannelMessage",content:{roomID:this.Ar.roomID,sendIDName:t.sender_idname,sendNickName:t.sender_nickname,msgType:t.msg_type,msgContent:t.msg_content}})},s.prototype.handlePushTransparentMsg=function(e){var t=e.body,n=t.sender_idname,r=t.sender_nickname,o=t.client_seq,a=t.msg_data,l=this.ky[n],d=!1;l&&o?ki.A.isLong(o)&&ki.A.isLong(l)&&o.gt(l)&&(d=!0):d=!0,this.ky[n]=o,d&&this.pn.actionListener("recvRoomTransparentMessage",this.Ar.roomID,{sendUser:{userID:n,userName:r},content:a})},s.prototype.handlePushCustomMsg=function(e){var t=JSON.parse(e.body.custommsg),n=[t.from_userid,t.from_username,t.room_id,t.custom_content];this.pn.actionListener("IMRecvCustomCommand",n[2],{userID:n[0],userName:n[1]},n[3])},s.prototype.sendRoomChannelMessage=function(e,t,n,r,o,a){var l=this;return this.Ar.isLogin()?(this.Jr.sendRoomChannelMessage({channelType:e,msgType:t,msgContent:n,toUserIDList:r},this.Ar.roomID,function(d){o({seq:d.header.seq,errorCode:0})},function(d){var p={code:0,msg:""};d.body?(p.code=d.body.err_code||0,p.msg=d.body.err_message||""):p=d,l.an.error(df+" err:"+JSON.stringify(p)),[2].includes(p.code)?p.code=jo.code:[3].includes(p.code)?p.code=tc.code:p=p.code==Nu.code?Il({},ch):p.code==ah.code?Il({},ah):{code:Ec.code,msg:"liveroom error ".concat(p.code," ").concat(p.msg)},a(p)}),this.an.info(df+" call success"),!0):(this.an.error(df+" state error"),a(ec),!1)},s.prototype.sendTransparentMessage=function(e,t,n,r,o,a,l){var d,p,u=this,v="zm.msg.stpm";if(!this.Ar.isLogin())return this.an.error(v+" state error"),void l(ec);t===0?p=0:p=((d=this.pn.rtm)===null||d===void 0?void 0:d.getNetworkInfo().timestamp)||Date.now();var x={msg_type:e,msg_data:n,to_user_list:r.map(function(U){return zn(U.userID)}),client_seq:ki.A.fromInt(p)};this.Jr.sendTransparentMessage(x,this.Ar.roomID,o||10,function(U){a({seq:U.header.seq,errorCode:0})},function(U){var te=u.zy(U,v);l(te)}),this.an.info(v+" call success")},s.prototype.sendBigRoomMessage=function(e,t,n,r,o,a){var l=this;if(!this.Ar.isLogin())return this.an.error(Zf+" state error"),void(a&&a(ec));var d=this.Sy,p=this.Gr,u=new Date().getTime()+p,v=this._rtm.getSeq().toString();if(this.gy[v]={success:o,error:a},d==0)this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:v}],function(U){l.handleBigImMsgRsp(U)},function(U){a&&a(U)});else{var x=Math.floor(u/d);this.by<x&&this._y.length==0?(this.by=x,this.sendBigRoomMessageInternal([{msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:v}],function(U){l.handleBigImMsgRsp(U)},function(U){a&&a(U)})):(this._y.push({msg_category:e,msg_type:1,msg_content:r,bigmsg_client_id:v}),this._y.length==1&&this.setBigImTimer(p,d))}},s.prototype.sendBigRoomMessageInternal=function(e,t,n){this.Jr.sendBigRoomMessage({msgs:e},function(r){t(r)},function(r){var o,a,l;r.header&&r.body?l=r.body?{code:(o=r.body)===null||o===void 0?void 0:o.err_code,msg:(a=r.body)===null||a===void 0?void 0:a.err_message}:Ec:(r.code&&r.msg&&(l=r),n(l)),n(l)},this.Ar),this.an.info(Zf+" sendBigRoomMessage called")},s.prototype.handleBigImMsgRsp=function(e){this.Sy=e.body.bigim_time_window;for(var t=e.body.msg_list||e.body.msgs,n=0;n<t.length;n++){var r=t[n].msg_client_id||t[n].bigmsg_client_id;if(this.gy[r]){var o=this.gy[r].success;o!=null&&o({seq:e.header.seq,errorCode:0,messageID:t[n].msg_id||t[n].bigmsg_id}),delete this.gy[r]}}},s.prototype.setBigImTimer=function(e,t){var n=this,r=new Date().getTime()+e,o=t-r%t,a=function(l){n.yy=setTimeout(function(){n.onBigImTimer()},l)};(function(l){return ep(this,void 0,void 0,function(){var d;return kl(this,function(p){switch(p.label){case 0:return[4,(0,he.UY)()];case 1:return d=p.sent(),[2,parseInt(d*(l+1)+"",10)]}})})})(t).then(function(l){a(l+o)}).catch(function(l){a(.5*t+o)})},s.prototype.onBigImTimer=function(){var e=this,t=new Date().getTime()+this.Gr;this.by=Math.floor(t/this.Sy);for(var n=[],r=[],o=0;o<this._y.length&&!(o>=20);o++){var a=this._y[o];n.push({msg_category:a.msg_category,msg_type:a.msg_type,msg_content:a.msg_content,bigmsg_client_id:a.bigmsg_client_id}),r.push(a.bigmsg_client_id)}this._y.length>20?this._y.splice(0,20):this._y=[],this.sendBigRoomMessageInternal(n,function(l){e.handleBigImMsgRsp(l)},function(l,d){for(var p=0;p<r.length;p++){var u=r[p],v=e.gy[u];v&&(v.error!=null&&v.error(l,d),delete e.gy[u])}}),this.yy&&clearTimeout(this.yy),this.yy=null,this._y.length>0&&this.setBigImTimer(this.Gr,this.Sy)},s.prototype.handlePushMergeMsg=function(e){for(var t=e.body.message_list||e.body.messages,n=0;n<t.length;n++)t[n].sub_cmd===14001&&this.handlePushBigRooMsg(t[n].msg_body)},s.prototype.handlePushBigRooMsg=function(e){var t;if((0,B.QP)(e))try{t=JSON.parse(e)}catch{return void this.an.warn(Hs+"parse json error")}else t=e;if(t){for(var n=t.room_id||this.Ar.roomID,r=[],o=t.msg_list||t.msg_data,a=0;a<o.length;a++){var l=o[a];l.id_name!=this.pn.idName?r.push({idName:l.id_name,nickName:l.nick_name,messageId:l.msg_id||l.bigmsg_id,category:l.msg_category,type:l.msg_type,content:l.msg_content,time:l.send_time||ki.A.isLong(l.msg_timestamp)&&l.msg_timestamp.toNumber()}):this.an.info(Hs+" self message")}r.length==0?this.an.info(Hs+" no other pushData except self"):this.onRecvBigRoomMessage(r,n),this.an.info(Hs+"call success")}else this.an.warn(Hs+" cann't find message body")},s.prototype.onRecvBigRoomMessage=function(e,t){var n=[];e.forEach(function(r){n.push({fromUser:{userID:r.idName,userName:r.nickName},message:r.content,sendTime:r.time,messageID:r.messageId})}),this.pn.actionListener("IMRecvBarrageMessage",t,n),this.pn.actionListener("_recvBigRoomMessage",e,t)},s.prototype.resetMessageInfo=function(){this.Oy={},this.wy&&(clearTimeout(this.wy),this.wy=null),this.by=0,this._y=[],this.gy={},this.yy&&(clearTimeout(this.yy),this.yy=null),this.Gr=0,this.Sy=0},s.prototype.zy=function(e,t){var n=Ec;return n=e.body&&e.body.err_code?ze(e.body.err_code,e.body.err_message):e,this.an.error(t+" err:"+(0,he.iq)(n)),[2].includes(n.code)?n.code=jo.code:[3].includes(n.code)?n.code=tc.code:n=n.code==Nu.code?Il({},ch):n.code==ah.code?Il({},ah):{code:Ec.code,msg:"liveroom error ".concat(n.code," ").concat(n.msg)},n},s.prototype.deleteTransparentUser=function(e){delete this.ky[e]},s})();function dd(s,e,t,n){return{interResolve:function(r){e(r),s.end()},interReject:function(r,o){o===void 0&&(o="");var a=r.errorCode||r.code,l=r.message||r.msg||""+o,d=a;if(a<1e6){s.setAttributes({server_code:a});var p=void 0;n&&n[a]?a=(p=n[a]).code:(p=yt(a,r.msg||""),a=Ec.code),d=p.code}s.setAttributes({error:d,message:l}),s.end(),t({errorCode:a})}}}function tp(s,e,t,n){var r=this;return t===void 0&&(t=1),n===void 0&&(n=1),new Promise(function(o,a){var l=r.getMsgSpan(fs.event,s,!0),d=dd(l,function(x){l.setAttributes({msg_id:fs.msg_id(x.messageID)}),o(x)},a,{3:Ss}),p=d.interResolve,u=d.interReject;if(!(0,B.QP)(s))return r.logger.error($a+" roomid must be string"),void u(fs.error.INPUT_PARAM," param roomID error");if(!(0,B.QP)(e))return r.logger.error($a+" message must be string"),void u(fs.error.INPUT_PARAM," param message error");if(e.length===0)return r.logger.error($a+" message is empty"),void u(fs.error.IM_MESSAGE_NULL);if(wa(e)>uh)return r.logger.error($a+" message is too long"),void u(fs.error.IM_MESSAGE_TOO_LONG);var v=r.getRoomModules(s);if(l.setAttributes({msg_content:e}),!v)return r.logger.error($a+" room not exist, roomID: "+s),void u(r.isDisConnect()?fs.error.ROOM_NOT_EXIST:fs.error.INCONSISTENT_ROOM_ID);v.messageHandler.sendRoomMsg(t,n,s,e,function(x){x.messageID&&l.setAttributes({msg_id:x.messageID}),p(x)},u)})}function Lu(s,e,t){var n=this;return new Promise(function(r,o){var a=n.getMsgSpan(Fs.event,s,!0),l=dd(a,r,o,{3:tc}),d=l.interResolve,p=l.interReject;if(!(0,B.QP)(s))return n.logger.error(Kc+" roomID must be string"),void p(Fs.error.INCONSISTENT_ROOM_ID," roomID must be string");if(!(0,B.C9)(t)||t.find(function(x){return!(0,B.QP)(x)}))return n.logger.error(Kc+" toUserIDList must be string array"),void p(Fs.error.INPUT_PARAM," param toUserList error");if(!(0,B.QP)(e)&&!(0,B.w)(e))return n.logger.error(Kc+" command must be a string or object"),void p(Fs.error.IM_CONTENT_NULL," command type error");var u=n.getRoomModules(s),v=(0,B.QP)(e)?e:JSON.stringify(e);return wa(v)>uh?(n.logger.error(Kc+" command too long"),void p(Fs.error.IM_CONTENT_TOO_LONG)):v.length===0?(n.logger.error(Kc+" command empty"),void p(Fs.error.IM_CONTENT_NULL)):(a.setAttributes({msg_content:v}),u?void u.messageHandler.sendCustomCommand(t,e,d,p):(n.logger.error(Kc+" room not exist, roomID: "+s),void p(n.isDisConnect()?Fs.error.ROOM_NOT_EXIST:Fs.error.INCONSISTENT_ROOM_ID)))})}function Al(s,e,t,n){var r=this;return t===void 0&&(t=1),n===void 0&&(n=1),new Promise(function(o,a){var l=r.getMsgSpan(Zc.event,s),d=dd(l,o,a,{3:tc}),p=d.interResolve,u=d.interReject;if(!(0,B.QP)(s))return r.logger.error(Cl+" roomid must be string"),void u(Zc.error.ROOM_NOT_EXIST," param roomID error");if(!(0,B.QP)(e))return r.logger.error(Cl+" message must be string"),void u(Zc.error.IM_MESSAGE_NULL);if(e.length===0)r.logger.error(Cl+" message is empty"),u(Zc.error.IM_MESSAGE_NULL);else if(wa(e)>uh)return r.logger.error(Cl+" message is too long"),void u(r.stateCenter.isFlutter?Zc.error.IM_CONTENT_TOO_LONG:Zc.error.IM_MESSAGE_TOO_LONG);l.setAttributes({msg_content:e});var v=r.getRoomModules(s);if(!v)return r.logger.error(Cl+" room not exist, roomID: "+s),void u(r.isDisConnect()?Zc.error.ROOM_NOT_EXIST:Zc.error.INCONSISTENT_ROOM_ID);v.messageHandler.sendBigRoomMessage(t,n,s,e,p,u)})}function ff(s,e,t){var n=this;return new Promise(function(r,o){var a=n.getMsgSpan(As.event,s),l=dd(a,r,o,{1015:hf}),d=l.interResolve,p=l.interReject;if(!(0,B.QP)(s))return n.logger.error($a+" roomid must be string"),void p(As.error.ROOM_ROOMID_INCORRECT," roomID must be string");if(s.length===0)return n.logger.error($a+" roomid is empty"),void p(As.error.ROOM_ROOMID_INCORRECT," roomid is empty");if(!(0,B.QP)(e))return n.logger.error(Pu+" key must be string"),void p(As.error.KEY_EMPTY," key must be string");if(e.length===0)return n.logger.error(Pu+" key is empty"),void p(As.error.KEY_EMPTY);if(e.length>128)return n.logger.error(Pu+" key is too long"),void p(As.error.KEY_TOO_LONG);if(!(0,B.QP)(t))return n.logger.error(Pu+" value must be string"),void p(As.error.INPUT_PARAM," value must be string");if(t.length>4096)return n.logger.error(Pu+" value is too long"),void p(As.error.VALUE_TOOL_LONG);a.setAttributes({key:As.key(e),value:As.value(t)});var u=n.getRoomModules(s);if(!u)return n.logger.error(Pu+" room not exist, roomID: "+s),void p(As.error.ROOM_ROOMID_INCORRECT);u.messageHandler.sendReliableMessage(e,t,d,p)})}var hd={_sendBroadcastMessage:tp,sendBroadcastMessage:function(s,e){var t=this;return new Promise(function(n,r){tp.call(t,s,e).then(function(o){n({errorCode:o.errorCode,messageID:o.messageID,extendedData:o.extendedData})}).catch(function(o){r(o)})})},_sendCustomCommand:Lu,sendCustomCommand:function(s,e,t){var n=this;return new Promise(function(r,o){Lu.call(n,s,e,t).then(function(a){r({errorCode:a.errorCode,extendedData:a.extendedData})}).catch(function(a){o(a)})})},_sendBarrageMessage:Al,sendBarrageMessage:function(s,e){var t=this;return new Promise(function(n,r){Al.call(t,s,e).then(function(o){n({errorCode:o.errorCode,messageID:o.messageID,extendedData:o.extendedData})}).catch(function(o){r(o)})})},_setRoomExtraInfo:ff,setRoomExtraInfo:function(s,e,t){return ff.call(this,s,e,t)},sendRoomChannelMessage:function(s,e,t,n,r){var o=this;return new Promise(function(a,l){var d=function(u,v){v===void 0&&(v=""),v&&o.logger.error(nh+v),l({errorCode:u.code,extendedData:u.msg+v})};if(e===0)if((0,B.QP)(s))if((0,he.zQ)(t))if((0,B.C9)(r)&&!r.find(function(u){return!(0,B.QP)(u)}))if((0,B.QP)(n))if(wa(n)>uh)d(tc," msgContent too long");else if(n.length!==0){var p=o.getRoomModules(s);if(!p)return o.logger.error(nh+" room not exist, roomID: "+s),void d(o.isDisConnect()?Fs.error.ROOM_NOT_EXIST:Fs.error.INCONSISTENT_ROOM_ID);p.messageHandler.sendRoomChannelMessage(e,t,n,r,function(){a({errorCode:0,extendedData:""})},d)}else d(jo," msgContent empty");else d(jo," msgContent must be a string");else d(jo," toUserIDList must be string array");else d(jo," msgType must be integer number");else d(jo," roomID must be string");else d(Xf)})},sendTransparentMessage:function(s,e){var t=this;return new Promise(function(n,r){var o="zm.stpm",a=function(U,te){te===void 0&&(te=""),te&&t.logger.error(o+" "+te),r({errorCode:U.code,extendedData:U.msg+te})};if(!(0,B.QP)(s)||s.length>127||!(0,he.jy)(s))a(Du);else if((0,B.w)(e)){var l=e.sendMode,d=e.sendType,p=e.content,u=e.recvUserList,v=e.timeOut;if([0,1,2].includes(l))if([0,1].includes(d))if(p)if((0,B.G0)(p))if(p.byteLength)if(p.byteLength>4096)a(tc);else if((0,B.C9)(u)&&!u.find(function(U){return!(0,B.QP)(U.userID)}))if((0,B.TE)(v)||(0,he.zQ)(v)){var x=t.getRoomModules(s);if(!x)return t.logger.error(o+" room not exist, roomID: "+s),void a(t.isDisConnect()?ec:Du);x.messageHandler.sendTransparentMessage(l,d,p,u,v,function(){n({errorCode:0,extendedData:""})},a)}else a(jo,"message content type error");else a(jo,"recvUserList must be ZegoUser Array");else a(Rl);else a(jo,"message content type error");else a(Rl);else a(jo,"message sendType error");else a(jo,"message sendMode error")}else a(jo,"message must be object")})}},lh={handlePushRoomMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushRoomMsg(e[1])},handlePushCustomMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushCustomMsg(e[1])},handlePushMergeMsg:function(s){var e,t=(e=s==null?void 0:s.header)===null||e===void 0?void 0:e.room_id,n=this.rtm.getRoomModules(t);n?n.messageHandler.handlePushMergeMsg(s):this.logger.error(sh+" room no found ignore "+JSON.stringify(s))},handlePushTransMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushTransMsg(e[1])},handlePushUserTransMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushUserTransMsg(e[1])},handleBigImMsgRsp:function(s){var e,t=(e=s==null?void 0:s.header)===null||e===void 0?void 0:e.room_id,n=this.rtm.getRoomModules(t);n?n.messageHandler.handleBigImMsgRsp(s):this.logger.error(sh+" room no found ignore "+JSON.stringify(s))},handlePushMsg:function(s){var e,t=(e=s==null?void 0:s.header)===null||e===void 0?void 0:e.room_id,n=this.rtm.getRoomModules(t);if(n)return[n,s];this.logger.error(sh+" room no found ignore "+JSON.stringify(s))},handlePushChannelMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushChannelMsg(e[1])},handlePushTransparentMsg:function(s){var e=this.handlePushMsg(s);e[0].messageHandler.handlePushTransparentMsg(e[1])}},dh={initMessageHandler:function(){this.messageHandler=new ld(this.logger,this.stateCenter,this.dataReport,this.liveRoomHandler,this.rtm,this)}},hh={type:"Message",install:function(s,e,t){for(var n in hd)Object.defineProperty(s.prototype,n,{value:hd[n],writable:!1});for(var n in lh)Object.defineProperty(t.prototype,n,{value:lh[n],writable:!1});for(var n in dh)Object.defineProperty(e.prototype,n,{value:dh[n],writable:!1})}},np=ye(5830),rp=ye(3509),Tp=ye(9674),ip=ye(743),op=function(s,e,t,n){return new(t||(t=Promise))(function(r,o){function a(p){try{d(n.next(p))}catch(u){o(u)}}function l(p){try{d(n.throw(p))}catch(u){o(u)}}function d(p){var u;p.done?r(p.value):(u=p.value,u instanceof t?u:new t(function(v){v(u)})).then(a,l)}d((n=n.apply(s,[])).next())})},fh=function(s,e){var t,n,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(p){return(function(u){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(a=0)),a;)try{if(t=1,n&&(r=2&u[0]?n.return:u[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,u[1])).done)return r;switch(n=0,r&&(u=[2&u[0],r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||u[0]!==6&&u[0]!==2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(s,a)}catch(v){u=[6,v],n=0}finally{t=r=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}})([d,p])}}},wp=(function(){function s(e,t){this.zegoWebRTC=e,this.roomID=t,this.pubDataChannelList=[],this.subDataChannelList=[],this.listenerList={receiveRealTimeSequentialData:[]},this.an=e.logger}return s.prototype.startBroadcasting=function(e,t){return op(this,void 0,void 0,function(){var n,r,o,a,l,d;return fh(this,function(p){switch(p.label){case 0:if((0,he.rA)(this.an,n="dc.sb.0"),this.pubDataChannelList.includes(e))return this.an.error(n+" datachannel already exist"),[2,!1];if((r=this.zegoWebRTC.streamCenter.publisherList[e])&&r.publisher.dataChannel)return this.pubDataChannelList.push(e),[2,!0];if(r&&!r.publisher.dataChannel)return this.an.error(n+" publish datachannel no exist, try other stream ID"),[2,!1];if(this.broadcastStream)return[3,2];o=he.VJ.createElement("canvas"),a=void 0;try{a=o.captureStream()}catch{return this.an.error(n+" publish datachannel, canvas captureStream error"),[2,!1]}return l=this,[4,this.zegoWebRTC.createStream({custom:{source:a}})];case 1:l.broadcastStream=p.sent(),p.label=2;case 2:return(d=this.zegoWebRTC.startPublishingStream(e,this.broadcastStream,{roomID:this.roomID},!0))&&this.pubDataChannelList.push(e),(0,he.OY)(this.an,n),[2,d]}})})},s.prototype.stopBroadcasting=function(e){var t="dc.sb.1";(0,he.rA)(this.an,t),this.pubDataChannelList=this.pubDataChannelList.filter(function(r){return r!==e});var n=this.zegoWebRTC.streamCenter.publisherList[e];return n?(n.room.roomID==this.roomID&&n.isDataChannel&&this.zegoWebRTC.stopPublishingStream(e),(0,he.OY)(this.an,t),!0):(this.an.error(t+" datachannel no found"),!1)},s.prototype.sendRealTimeSequentialData=function(e,t){if(!(0,B.SY)(t))return this.an.error("dc.srsd data type wrong"),!1;var n=this.zegoWebRTC.streamCenter.publisherList[e];return n&&this.pubDataChannelList.includes(e)?this.sendBCMessage(n.publisher,t):(this.an.error("dc.srsd datachannel no found"),!1)},s.prototype.sendBCMessage=function(e,t){var n;if(!e.dataChannelState)return!1;for(var r=new Uint8Array(t),o=0,a=t.byteLength,l=e.send_seq,d=0,p=new Date().getTime(),u=0;a>0;){a>1151?u=1141:(u=a,d=1);var v=new Uint8Array(u+10);v[0]=1,v[1]=d,v[2]=e.send_seq>>8&255,v[3]=255&e.send_seq,v[4]=l>>8&255,v[5]=255&l,v[6]=p>>24&255,v[7]=p>>16&255,v[8]=p>>8&255,v[9]=255&p;for(var x=0;x<u;x++)v[x+10]=r[x+o];a-=u,o+=u,e.send_seq++,e.send_seq>=65536&&(e.send_seq=0),(n=e.dataChannel)===null||n===void 0||n.send(v)}return!0},s.prototype.startSubscribing=function(e,t){var n,r;return op(this,void 0,void 0,function(){var o,a,l;return fh(this,function(d){switch(d.label){case 0:return(0,he.rA)(this.an,o="dc.ss.0"),this.subDataChannelList.includes(e)?(this.an.error(o+" datachannel already exist"),[2,!1]):(a=this.zegoWebRTC.streamCenter.playerList[e])?[3,2]:[4,this.zegoWebRTC.startPlayingStream(e,void 0,!0)];case 1:d.sent(),a=this.zegoWebRTC.streamCenter.playerList[e],d.label=2;case 2:return(l=a).dataChannel?(!(!((n=l.onDataChannelList)===null||n===void 0)&&n.includes(this.onReceivedDataChannel.bind(this)))&&((r=l.onDataChannelList)===null||r===void 0||r.push(this.onReceivedDataChannel.bind(this))),this.subDataChannelList.push(e),(0,he.OY)(this.an,o),[2,!0]):(this.an.error(o+" datachannel no exist, try other stream ID"),[2,!1])}})})},s.prototype.stopSubscribing=function(e){var t="dc.ss.1";(0,he.rA)(this.an,t),this.subDataChannelList=this.subDataChannelList.filter(function(r){return r!==e});var n=this.zegoWebRTC.streamCenter.playerList[e];return n?(n.room.roomID==this.roomID&&n.isDataChannel&&this.zegoWebRTC.stopPlayingStream(e),(0,he.OY)(this.an,t),!0):(this.an.error(t+" datachannel no subscribe"),!1)},s.prototype.on=function(e,t){this.bindListener(e,t)},s.prototype.off=function(e,t){this.deleteListener(e,t)},s.prototype.bindListener=function(e,t){return this.listenerList[e]?(0,B.JO)(t)?(this.listenerList[e].indexOf(t)==-1&&this.listenerList[e].push(t),!0):(this.an.error("zc.o.0 listener callBack must be funciton"),!1):(this.an.error("dc.o.0 event "+e+" no found"),!1)},s.prototype.deleteListener=function(e,t){if(!this.listenerList[e])return this.an.error("dc.o.1 listener no found"),!1;var n=this.listenerList[e];return t?n.splice(n.indexOf(t),1):this.listenerList[e]=[],!0},s.prototype.actionListener=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.listenerList[e]&&this.listenerList[e].forEach(function(o){try{setTimeout(function(){o.apply(void 0,n)},0)}catch(a){t.an.error("dc.al "+e+" "+a)}})},s.prototype.onReceivedDataChannel=function(e,t,n){this.actionListener("receiveRealTimeSequentialData",e,t,n)},s.prototype.reset=function(){var e=this,t="dc.rs";for(var n in(0,he.rA)(this.an,t),this.pubDataChannelList.forEach(function(r){var o=e.zegoWebRTC.streamCenter.publisherList[r];o&&o.room.roomID==e.roomID&&o.isDataChannel&&e.zegoWebRTC.stopPublishingStream(r)}),this.subDataChannelList.forEach(function(r){var o=e.zegoWebRTC.streamCenter.playerList[r];o&&o.room.roomID==e.roomID&&o.isDataChannel&&e.zegoWebRTC.stopPlayingStream(r)}),this.listenerList)this.listenerList[n]=[];this.broadcastStream&&this.zegoWebRTC.destroyStream(this.broadcastStream),this.broadcastStream=void 0,(0,he.OY)(this.an,t)},s})(),ph=(function(){function s(e,t){this._roomID=t,this.Dy=new wp(e,t)}return s.prototype.reset=function(){this.Dy.reset()},Object.defineProperty(s.prototype,"roomID",{get:function(){return this._roomID},enumerable:!1,configurable:!0}),s.prototype.startBroadcasting=function(e){return this.Dy.startBroadcasting(e)},s.prototype.stopBroadcasting=function(e){return this.Dy.stopBroadcasting(e)},s.prototype.sendRealTimeSequentialData=function(e,t){return this.Dy.sendRealTimeSequentialData(e,t)},s.prototype.startSubscribing=function(e){return this.Dy.startSubscribing(e)},s.prototype.stopSubscribing=function(e){return this.Dy.stopSubscribing(e)},s.prototype.on=function(e,t){this.Dy.on(e,t)},s.prototype.off=function(e,t){this.Dy.off(e,t)},s})(),mh={type:"DataChannel",install:function(s){Object.defineProperty(s.prototype,"createRealTimeSequentialDataManager",{value:function(e){this.logger.info("dc.cr room call"),this.enableDataChannel(!0);var t=this.stateCenter.getRoomByRoomID(e);return t?t.dataChannelManager?null:(t.dataChannelManager=new ph(this,e),t.dataChannelManager):(this.logger.error("dc.cr room ".concat(e," no exist")),null)},writable:!1}),Object.defineProperty(s.prototype,"destroyRealTimeSequentialDataManager",{value:function(e){this.logger.info("dc.ds call");var t=this.stateCenter.roomList.find(function(n){return n.dataChannelManager==e});t?(e.reset(),t.dataChannelManager=null):this.logger.error("dc.ds not match, room: ".concat(e.roomID))},writable:!1})}},gh=ye(5772),Cp=(function(){var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},s(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}s(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();Xa.use(hh),Xa.use(np.StreamCDN),Xa.use(rp.AudioMix),Xa.use(Tp.MixStream),Xa.use(ip.RangeAudio),Xa.use(mh),Xa.use(gh.BeautyEffect);var fd=(function(s){function e(){return s!==null&&s.apply(this,arguments)||this}return Cp(e,s),e})(Xa)})(),Fe})()})})(ZegoExpressWebRTC$1)),ZegoExpressWebRTC$1.exports}var ZegoExpressWebRTCExports=requireZegoExpressWebRTC();let zg=null;const initZego=(g,f)=>(zg||(zg=new ZegoExpressWebRTCExports.ZegoExpressEngine(g,f)),zg),joinCall=async(g,f,b,C,D)=>{const O=initZego(C,D);return await O.loginRoom(g,"",{userID:f,userName:b}),O},CallPage=({currentUser:g})=>{var Ne;const{roomID:f}=useParams(),b=useLocation(),C=useNavigate(),D=reactExports.useRef(null),[O,$]=reactExports.useState(null),[_e,ye]=reactExports.useState(null),[Fe,ot]=reactExports.useState(null),[Re,Z]=reactExports.useState(!1),[I,P]=reactExports.useState(!1),Pe=((Ne=b.state)==null?void 0:Ne.caller)===!0;reactExports.useEffect(()=>{(async()=>{if(Pe){const Qe=f.split("_")[1],ne=await api.createCall(g.id,Qe,"audio");ne.status==="success"&&($(ne.call),ye(ne.zego))}else{const Qe=await api.checkIncomingCall(g.id);(Qe==null?void 0:Qe.status)==="incoming"&&($(Qe.call),ye(Qe.zego))}})()},[]);const ke=async()=>{if(!O||!_e)return;Z(!0),await api.acceptCall(O.id);const tt=await joinCall(O.room_id,g.id,g.name,_e.appID,_e.appSign);ot(tt);const Qe=await tt.createStream({camera:{video:!1,audio:!0}});tt.startPublishingStream("stream_"+g.id,Qe),tt.on("roomStreamUpdate",async(ne,oe,fe)=>{if(oe==="ADD"){const Y=await tt.startPlayingStream(fe[0].streamID);D.current&&(D.current.srcObject=Y,D.current.play())}}),P(!0),Z(!1)},ce=async()=>{if(Fe)try{Fe.stopPublishingStream("stream_"+g.id),Fe.logoutRoom(O==null?void 0:O.room_id)}catch{}O!=null&&O.id&&await api.endCall(O.id),C(-1)};return!O||!_e?jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center text-white bg-black",children:"Aguardando chamada..."}):jsxRuntimeExports.jsxs("div",{className:"w-full h-full bg-black text-white flex flex-col items-center justify-center",children:[jsxRuntimeExports.jsx("audio",{ref:D,autoPlay:!0}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold mb-2",children:Pe?"Chamando...":"Ligao recebida"}),jsxRuntimeExports.jsx("div",{className:"text-xl opacity-70 mb-8",children:Re?"Conectando...":I?"Conectado":Pe?"Aguardando resposta...":"Recebendo chamada"}),!I&&!Re&&!Pe&&jsxRuntimeExports.jsx("button",{onClick:ke,className:"bg-green-600 w-32 h-32 rounded-full text-xl flex items-center justify-center",children:"Atender"}),jsxRuntimeExports.jsx("button",{onClick:ce,className:"mt-10 bg-red-600 w-20 h-20 rounded-full"})]})},BottomNav=()=>{const f=useLocation().pathname,b=C=>f===C?"text-[#008069] scale-110":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300";return f==="/login"||f.startsWith("/chat/")?null:jsxRuntimeExports.jsxs("div",{className:"fixed bottom-0 left-0 w-full bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800 z-50 h-16 flex items-center justify-around px-2 pb-2 transition-colors",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:`flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${b("/")}`,children:[jsxRuntimeExports.jsx(MessageCircle,{size:24,fill:f==="/"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Conversas"})]}),jsxRuntimeExports.jsxs(Link,{to:"/status",className:`flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${b("/status")}`,children:[jsxRuntimeExports.jsx(Zap,{size:24,fill:f==="/status"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Status"})]}),jsxRuntimeExports.jsxs(Link,{to:"/discover",className:`flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${b("/discover")}`,children:[jsxRuntimeExports.jsx(Globe,{size:24}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Descobrir"})]}),jsxRuntimeExports.jsxs(Link,{to:"/profile",className:`flex flex-col items-center justify-center w-full h-full transition-all duration-300 ${b("/profile")}`,children:[jsxRuntimeExports.jsx(User,{size:24,fill:f==="/profile"?"currentColor":"none"}),jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Perfil"})]})]})},scriptRel="modulepreload",assetsURL=function(g){return"/"+g},seen={},__vitePreload=function g(f,b,C){let D=Promise.resolve();if(b&&b.length>0){let $=function(Fe){return Promise.all(Fe.map(ot=>Promise.resolve(ot).then(Re=>({status:"fulfilled",value:Re}),Re=>({status:"rejected",reason:Re}))))};document.getElementsByTagName("link");const _e=document.querySelector("meta[property=csp-nonce]"),ye=(_e==null?void 0:_e.nonce)||(_e==null?void 0:_e.getAttribute("nonce"));D=$(b.map(Fe=>{if(Fe=assetsURL(Fe),Fe in seen)return;seen[Fe]=!0;const ot=Fe.endsWith(".css"),Re=ot?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Fe}"]${Re}`))return;const Z=document.createElement("link");if(Z.rel=ot?"stylesheet":scriptRel,ot||(Z.as="script"),Z.crossOrigin="",Z.href=Fe,ye&&Z.setAttribute("nonce",ye),document.head.appendChild(Z),ot)return new Promise((I,P)=>{Z.addEventListener("load",I),Z.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${Fe}`)))})}))}function O($){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=$,window.dispatchEvent(_e),!_e.defaultPrevented)throw $}return D.then($=>{for(const _e of $||[])_e.status==="rejected"&&O(_e.reason);return f().catch(O)})},App$1=registerPlugin("App",{web:()=>__vitePreload(()=>import("./web-DWTG99fe.js"),[]).then(g=>new g.AppWeb)});async function requestAudioPermission(){try{return await navigator.mediaDevices.getUserMedia({audio:!0}),!0}catch(g){return console.error("Permisso de udio negada:",g),!1}}const UserCard=({user:g,refresh:f})=>{const[b,C]=reactExports.useState(!1),[D,O]=reactExports.useState(!1),$=useNavigate(),ye=(()=>{try{const Z=localStorage.getItem("ph_chat_user")||localStorage.getItem("user");if(!Z)return null;const I=JSON.parse(Z);return{uid:I.uid??I.id??null}}catch{return null}})(),Fe=ye==null?void 0:ye.uid,ot=Fe===g.uid;reactExports.useEffect(()=>{(async()=>{if(!(!Fe||!(g!=null&&g.uid)))try{const I=await api.checkFollow(Fe,g.uid),P=(I==null?void 0:I.is_following)??(I==null?void 0:I.isFollowing)??(I==null?void 0:I.following)??(I==null?void 0:I.status)??!1;C(P===!0||P==="true"||P===1||P==="1"||P==="following")}catch{C(!1)}})()},[g==null?void 0:g.uid]);const Re=async()=>{if(!Fe||ot)return;O(!0);const Z=b?"unfollow":"follow";try{const I=await api.followUser(Fe,g.uid,Z);(I==null?void 0:I.action)==="follow"?C(!0):(I==null?void 0:I.action)==="unfollow"?C(!1):C(!b),f&&f()}catch{}O(!1)};return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 rounded-lg mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",onClick:()=>$(`/socialProfile/${g.uid}`),children:[jsxRuntimeExports.jsx("img",{src:g.photo||`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name||"User")}`,className:"w-12 h-12 rounded-full"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-bold",children:g.name}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["@",g.username]})]})]}),!ot&&jsxRuntimeExports.jsx("button",{onClick:Re,disabled:D,className:`px-4 py-1 rounded text-white ${b?"bg-red-500":"bg-blue-500"}`,children:D?"...":b?"Deixar de Seguir":"Seguir"})]})},FollowersPage=()=>{const{id:g}=useParams(),[f,b]=reactExports.useState([]),[C,D]=reactExports.useState(!0),O=JSON.parse(localStorage.getItem("user")||"{}"),$=async()=>{try{D(!0);const _e=await api.getFollowers(g||"");b(Array.isArray(_e)?_e:[])}catch(_e){console.error("Erro ao carregar seguidores:",_e),b([])}D(!1)};return reactExports.useEffect(()=>{g&&$()},[g]),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"inline-flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(ArrowLeft,{})," Voltar"]}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Seguidores"}),C&&jsxRuntimeExports.jsx("p",{children:"Carregando..."}),!C&&f.length===0&&jsxRuntimeExports.jsx("p",{children:"Nenhum seguidor encontrado."}),!C&&f.map(_e=>jsxRuntimeExports.jsx(UserCard,{user:_e,currentUserId:O.uid,refresh:$},_e.uid))]})},FollowingPage=()=>{const{id:g}=useParams(),[f,b]=reactExports.useState([]),[C,D]=reactExports.useState(!0),O=JSON.parse(localStorage.getItem("user")||"{}"),$=async()=>{D(!0);const _e=await api.getFollowing(g||"");b(Array.isArray(_e)?_e:[]),D(!1)};return reactExports.useEffect(()=>{g&&$()},[g]),jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"inline-flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(ArrowLeft,{})," Voltar"]}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Seguindo"}),C&&jsxRuntimeExports.jsx("p",{children:"Carregando..."}),!C&&f.length===0&&jsxRuntimeExports.jsx("p",{children:"Este usurio no segue ningum."}),f.map(_e=>jsxRuntimeExports.jsx(UserCard,{user:_e,currentUserId:O.uid,refresh:$},_e.uid))]})},App=()=>{const[g,f]=reactExports.useState(null),[b,C]=reactExports.useState(!0),[D,O]=reactExports.useState({title:"",body:"",show:!1}),$=useNavigate();reactExports.useEffect(()=>{g&&requestAudioPermission()},[g]),reactExports.useEffect(()=>{const ye=App$1.addListener("backButton",({canGoBack:Fe})=>{Fe?window.history.back():confirm("Deseja realmente sair do aplicativo?")&&App$1.exitApp()});return()=>{ye.then(Fe=>Fe.remove())}},[]),reactExports.useEffect(()=>{localStorage.getItem("theme")==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[]),reactExports.useEffect(()=>{const ye=localStorage.getItem("ph_chat_user");if(ye){const Fe=JSON.parse(ye);f(Fe),api.getUser(Fe.id).then(ot=>{if(ot!=null&&ot.id){const Re={...Fe,...ot};f(Re),localStorage.setItem("ph_chat_user",JSON.stringify(Re))}})}C(!1)},[]),reactExports.useEffect(()=>{if(!g){localStorage.removeItem("ph_chat_user");return}localStorage.setItem("ph_chat_user",JSON.stringify(g)),initializePushNotifications(ye=>{api.saveFcmToken(g.uid,ye)},ye=>{ye!=null&&ye.title&&(O({title:ye.title,body:ye.body,show:!0}),setTimeout(()=>{O(Fe=>({...Fe,show:!1}))},4e3))})},[g]),reactExports.useEffect(()=>{if(!g)return;const ye=setInterval(async()=>{try{const Fe=await api.checkIncomingCall(g.uid);if((Fe==null?void 0:Fe.status)==="incoming"){const ot=Fe.call;$(`/call/${ot.type}/${ot.room_id}`,{state:{caller:!0,zego:Fe.zego}})}}catch{}},2e3);return()=>clearInterval(ye)},[g]);const _e=ye=>{if(!g)return;const Fe={...g,...ye};localStorage.setItem("ph_chat_user",JSON.stringify(Fe)),f(Fe)};return b?jsxRuntimeExports.jsx("div",{className:"flex h-full items-center justify-center bg-[#e5ddd5] dark:bg-gray-900",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-[#008069] border-t-transparent"})}):jsxRuntimeExports.jsxs("div",{className:"h-full w-full flex flex-col overflow-hidden bg-gray-100 dark:bg-gray-900 relative",children:[D.show&&jsxRuntimeExports.jsxs("div",{className:"absolute top-4 left-4 right-4 z-50 bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border-l-4 border-teal-500 flex items-start gap-3 animate-in slide-in-from-top duration-300",children:[jsxRuntimeExports.jsx("div",{className:"bg-teal-100 dark:bg-teal-900/50 p-2 rounded-full text-teal-600 dark:text-teal-400",children:jsxRuntimeExports.jsx(Bell,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-sm",children:D.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-xs",children:D.body})]}),jsxRuntimeExports.jsx("button",{onClick:()=>O(ye=>({...ye,show:!1})),children:jsxRuntimeExports.jsx(X,{size:18,className:"text-gray-400 hover:text-gray-600"})})]}),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:g?jsxRuntimeExports.jsx(Navigate,{to:"/"}):jsxRuntimeExports.jsx(LoginPage,{onLogin:f})}),jsxRuntimeExports.jsx(Route,{path:"/",element:g?jsxRuntimeExports.jsx(ChatListPage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/discover",element:g?jsxRuntimeExports.jsx(DiscoverPage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/status",element:g?jsxRuntimeExports.jsx(StatusPage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:g?jsxRuntimeExports.jsx(ProfilePage,{user:g,onLogout:()=>f(null),onUpdateUser:_e}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/chat/:id",element:g?jsxRuntimeExports.jsx(ChatRoomPage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/socialProfile/:id",element:g?jsxRuntimeExports.jsx(SocialProfilePage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/profile/:id",element:g?jsxRuntimeExports.jsx(SocialProfilePage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/user/:id",element:g?jsxRuntimeExports.jsx(SocialProfilePage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/follow-list/:id/followers",element:g?jsxRuntimeExports.jsx(FollowersPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/follow-list/:id/following",element:g?jsxRuntimeExports.jsx(FollowingPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/search",element:g?jsxRuntimeExports.jsx(UserSearchPage,{}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})}),jsxRuntimeExports.jsx(Route,{path:"/call/:mode/:roomID",element:g?jsxRuntimeExports.jsx(CallPage,{currentUser:g}):jsxRuntimeExports.jsx(Navigate,{to:"/login"})})]}),g&&jsxRuntimeExports.jsx(BottomNav,{})]})};async function tryLoadOTA(){try{const g=await new Promise((D,O)=>{const $=indexedDB.open("phchat-ota-db",1);$.onerror=()=>O($.error),$.onupgradeneeded=()=>{const _e=$.result;_e.objectStoreNames.contains("files")||_e.createObjectStore("files"),_e.objectStoreNames.contains("meta")||_e.createObjectStore("meta")},$.onsuccess=()=>D($.result)}),f=await new Promise(D=>{const $=g.transaction("files","readonly").objectStore("files").get("index.html");$.onsuccess=()=>D($.result||null),$.onerror=()=>D(null)});if(!f){console.log(" Nenhuma OTA encontrada.");return}const b=new Blob([f],{type:"text/html"}),C=URL.createObjectURL(b);console.log(" Carregando OTA"),window.location.replace(C)}catch(g){console.log("OTA no disponvel:",g)}}(async()=>{await tryLoadOTA();const g=document.getElementById("root");if(!g)throw new Error("Root no encontrado");ReactDOM.createRoot(g).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsx(App,{})})}))})();export{WebPlugin as W};
